ISQ.GUI=initializeNS("ISQ.GUI");ISQ.GUI.IntuitiveInput=ISQ.Base.extend({name:"ISQ.GUI.IntuitiveInput"});ISQ.GUI.IntuitiveInput.prototype.ctor=function(a){this.mInput=a.input;this.mInput.intuitive=this;this.mOnTimeElapsedHandler=a.onTimeElapsedHandler||null;if(!this.mOnTimeElapsedHandler){throw ("Intuitive search ctor: invalid onTimeElapsedHandler")}this.mOnBeginWritingHandler=a.onBeginWritingHandler||null;this.mEnterKeyHandler=a.enterKeyHandler||null;this.mLastValue=this.mInitialValue=a.initialValue||this.mInput.value.Trim();this.mInterval=a.interval||this.mInterval;this.mOriginalKeyUpHandler=a.keyUpHandler||null;if(this.mInput.onkeyup){var b=this.mInput.onkeyup;this.mInput.onkeyup=function(c){b(c);this.intuitive.inputKeyUpHandler.apply(this.intuitive,new Array(c,this.value))}}else{this.mInput.onkeyup=this.inputKeyUpHandler}this.mInput.onpaste=function(c){var d=this;setTimeout(function(){d.intuitive.inputKeyUpHandler.apply(d.intuitive,new Array(c,d.value))},0)};if(a.processAfterConstructor===true){this.mInput.onkeyup()}else{this.mFirstRun=false}};ISQ.GUI.IntuitiveInput.prototype.dtor=function(){this.mInput.intuitive=null;this.mInput=null;this.mOnTimeElapsedHandler.dispose();this.mOnTimeElapsedHandler=null;if(this.mOnBeginWritingHandler!==null){this.mOnBeginWritingHandler.dispose();this.mOnBeginWritingHandler=null}};ISQ.GUI.IntuitiveInput.prototype.inputKeyUpHandler=function(c,d){if(typeof(this.intuitive)!=="undefined"){arguments.callee.apply(this.intuitive,new Array(c,this.value));return}if(this.mEnterKeyHandler){var a=ISQ.Html.getDomEvent(c);if(a&&a.domEvent&&a.domEvent.keyCode===13){this.mEnterKeyHandler.handle(a);return}}if(this.mFirstRun){this.mFirstRun=false;if(this.mLastValue.length===0){return}this.mOnTimeElapsedHandler.handle(this.mLastValue,true);return}if(d===this.mLastValue){return}d=d.Trim();if(this.mKeyUpTimer===null&&this.mOnBeginWritingHandler&&d!==this.mLastValue){this.mOnBeginWritingHandler.handle()}this.mLastValue=d;clearTimeout(this.mKeyUpTimer);if(d===this.mLastQuery){return}if(d.length===0){this.mOnTimeElapsedHandler.handle(d,this.mLastQuery!==d);
this.mLastQuery="";this.mKeyUpTimer=null;return}var b=this;this.mKeyUpTimer=setTimeout(function(){if(b.mLastQuery===d){b.mOnTimeElapsedHandler.handle(d,false);return}b.mLastQuery=d;b.mOnTimeElapsedHandler.handle(d,true);b.mKeyUpTimer=null},this.mInterval)};ISQ.GUI.IntuitiveInput.prototype.resetValue=function(a,b){if(!a){this.mInput.value=""}if(typeof(b)!=="undefined"){this.mInitialValue=b}this.mLastValue=this.mInitialValue;this.mLastQuery=null;clearTimeout(this.mKeyUpTimer);this.mKeyUpTimer=null};ISQ.GUI.IntuitiveInput.prototype.input=function(){return this.mInput};ISQ.GUI.IntuitiveInput.prototype.value=function(){return this.mInput.value};ISQ.GUI.IntuitiveInput.prototype.enable=function(){this.mInput.disabled=false};ISQ.GUI.IntuitiveInput.prototype.disable=function(){this.mInput.disabled=true};ISQ.GUI.IntuitiveInput.prototype.mInput=null;ISQ.GUI.IntuitiveInput.prototype.mLastValue="";ISQ.GUI.IntuitiveInput.prototype.mInitialValue="";ISQ.GUI.IntuitiveInput.prototype.mLastQuery=null;ISQ.GUI.IntuitiveInput.prototype.mOnTimeElapsedHandler=null;ISQ.GUI.IntuitiveInput.prototype.mOriginalKeyUpHandler=null;ISQ.GUI.IntuitiveInput.prototype.mKeyUpTimer=null;ISQ.GUI.IntuitiveInput.prototype.mInterval=500;ISQ.GUI.IntuitiveInput.prototype.mOnBeginWritingHandler=null;ISQ.GUI.IntuitiveInput.prototype.mFirstRun=true;ISQ.GUI.IntuitiveInput.prototype.mEnterKeyHandler=null;
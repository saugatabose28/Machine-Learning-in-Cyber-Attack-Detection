ISQ.Debug=initializeNS("ISQ.Debug");var _debug=function(){if(arguments.length===0){return ISQ.Debug}if(typeof(arguments[0])==="object"){ISQ.Debug.insertHTML(arguments[0])}else{ISQ.Debug.insertText(arguments[0])}};ISQ.Debug.init=function(){if(!debugLevel){return}if(document.addEventListener){document.addEventListener("keydown",ISQ.Debug.documentKeyDown,true)}else{if(document.attachEvent){document.attachEvent("onkeydown",ISQ.Debug.documentKeyDown)}}};ISQ.Debug.insertText=function(b){if(!debugLevel){return}this.show();var a=createDiv(this.mPopup.contentNode);a.innerHTML=b};ISQ.Debug.insertTimeDiff=function(d,a){var c=new Date();var b=(c-a);if(b>10){ISQ.Debug.insertText("<b>"+d+"</b> @ <b>"+b+" ms</b>")}return c};ISQ.Debug.insertTime=function(b){var a=new Date();ISQ.Debug.insertText("<b>"+b+"</b> @ "+a.ToString("%M:%S")+":"+a.getMilliseconds())};ISQ.Debug.insertHTML=function(a){if(!debugLevel){return}this.show();this.mPopup.contentNode.appendChild(a)};ISQ.Debug.insertObject=function(d,a,b){b=b||0;if(b===4){ISQ.Debug.insertText("DEPTH TOO DEEP");return}if(!a){ISQ.Debug.insertText("START depicting object:")}for(var c in d){ISQ.Debug.insertText("KEY:"+c);if(d[c]===null){ISQ.Debug.insertText("NULL")}else{if(typeof(d[c])==="undefined"){ISQ.Debug.insertText("Undefined")}else{if(typeof(d[c])==="object"){var e=false;if(ISQ.Base.isDerivedOf(d[c],ISQ.Base)){if(d[c].isDerivedOf(ISQ.Policies.Policy)){e=true;ISQ.Debug.insertText("Policy Id:"+d[c].id())}else{if(d[c].isDerivedOf(ISQ.Event)){e=true;ISQ.Debug.insertText("Event")}else{if(d[c].isDerivedOf(ISQ.Handler)){e=true;ISQ.Debug.insertText("Handler")}}}}else{if(d[c].nodeName){e=true;ISQ.Debug.insertText("HTML node. Name:"+d[c].nodeName+", id: "+d[c].id)}}if(!e){ISQ.Debug.insertText("{");ISQ.Debug.insertObject(d[c],true,b+1);ISQ.Debug.insertText("}")}}else{if(typeof(d[c])==="function"){ISQ.Debug.insertText("function()")}else{ISQ.Debug.insertText("VALUE: "+d[c])}}}}}if(!a){ISQ.Debug.insertText("STOP depicting object:")}};ISQ.Debug.insertStackCallback=function(){var f=30;var a=new Array();
var b=arguments.callee.caller;b=b.caller;for(var d=0;d<f&&b!==null;++d){var c=false;for(var e=0;e<a.Length&&!c;++e){if(a[e]===b){c=true}}if(c){break}a.push(b);b=b.caller}this.insertText("Printing callstack");this.insertArray(a)};ISQ.Debug.insertArray=function(a){for(var b=0;b<a.length;++b){this.insertText(b+": "+a[b])}};ISQ.Debug.createPopup=function(){var d=createDiv(document.body,"border:2px solid #aaa;background:#212620;width:300px;");innerDiv=createDiv(d,"padding:5px");var e=createElement("h2",innerDiv,"color:#e5e5e5");e.innerHTML="Debug";var b=createLink({text:"X",onclick:function(){this.debugConsole.hide()},style:"color: #E5E5E5;margin-left: 5px;position: absolute;right: 8px;top: 5px;text-decoration:none",parent:innerDiv});b.debugConsole=this;b=createLink({text:"Clear All",onclick:function(){this.debugConsole.mPopup.contentNode.innerHTML=""},style:"color: #E5E5E5;float: left;margin: 5px 0 0;text-decoration: none;",parent:innerDiv});b.debugConsole=this;var c=createDiv(d,"background:#efefef;padding:5px;width:290px;height:300px;overflow-y:auto;resize:both;margin-top:20px;border-top:1px solid #666;font-size:14px;font-family:verdana");c.id="nanoRepDebugDiv";this.mPopup=new ISQ.GUI.Popup({position:{type:ISQ.GUI.Popup.PositionType.SCREEN_LEFT_TOP,adjust:false,fixed:true},element:d,drag:e,blockerOptions:{show:false}});this.mPopup.contentNode=c};ISQ.Debug.show=function(){if(!this.mPopup){this.createPopup()}this.mPopup.show()};ISQ.Debug.hide=function(){this.mPopup.hide()};ISQ.Debug.documentKeyDown=function(b){var a=window.event||b;if(a.shiftKey){return true}if(a.keyCode!==192){return true}ISQ.Debug.toggleConsole();return false};ISQ.Debug.toggleConsole=function(){if(!ISQ.Debug.mConsolePopup){ISQ.Debug.mConsolePopup=createDiv(document.body,"position:fixed;bottom:1px;padding:4px 7px;width:80%;background:#fff;z-index:20;border:1px solid #cdcdcd;right:0");ISQ.Debug.mConsoleInput=createInput({parent:ISQ.Debug.mConsolePopup,type:"text",style:"width:90%;border:0;font-size:16px;"});setTimeout(function(){ISQ.Debug.mConsoleInput.focus()
},0);ISQ.Debug.mConsoleInput.onkeyup=ISQ.Debug.parseConsoleInput}else{setTimeout(function(){ISQ.Debug.mConsoleInput.value=""},0);if(ISQ.Debug.mConsolePopup.style.display==="none"){ISQ.Debug.mConsolePopup.style.display="block";try{ISQ.Debug.mConsoleInput.focus()}catch(a){}}else{ISQ.Debug.mConsolePopup.style.display="none"}}};ISQ.Debug.parseConsoleInput=function(b){var a=window.event||b;if(a.keyCode!=13){return}var e=ISQ.Debug.mConsoleInput.value.Trim();if(!e){return}switch(e){case"open()":ISQ.Debug.show();break;case"refreshCharts()":var c=pageGC().array();for(var d=0;d<c.length;++d){if(!ISQ.Base.isDerivedOf(c[d],ISQ.Statistics.Charts.IChart)){continue}if(c[d].isDisposed()){continue}c[d].process()}break}};ISQ.Debug.mPopup=null;ISQ.Debug.mConsolePopup=null;ISQ.Debug.mConsoleInput=null;
var VisualEffects={};VisualEffects.FadeEnum={IN:5,OUT:6};VisualEffects.Fade=function(a){this.mElement=_(a);if(this.mElement===null){throw ("VisualEffects.Fade Ctor: No valid element")}this.fadeInEvent=new ISQ.Event();this.fadeOutEvent=new ISQ.Event();return this};VisualEffects.Fade.prototype.mElement=null;VisualEffects.Fade.prototype.fadeInEvent=null;VisualEffects.Fade.prototype.fadeOutEvent=null;VisualEffects.Fade.prototype.mIsRunning=false;VisualEffects.Fade.prototype.mTimer=null;VisualEffects.Fade.prototype.mInterval=null;VisualEffects.Fade.prototype.mAmount=null;VisualEffects.Fade.prototype.mLeftAmount=null;VisualEffects.Fade.prototype.mTime=null;VisualEffects.Fade.prototype.mLastExecutionTime=null;VisualEffects.Fade.prototype.mAvailableToRun=true;VisualEffects.Fade.prototype.mCurrentDirection=null;VisualEffects.Fade.prototype.mCurrentOpacity=-1;VisualEffects.Fade.prototype.mRemoveFilterStyle=false;VisualEffects.Fade.prototype.mCancelInIe6=false;VisualEffects.Fade.prototype.stop=function(){if(this.mIsRunning){clearTimeout(this.mTimer);this.mIsRunning=false}};VisualEffects.Fade.prototype.fadeOut=function(d,b){try{this.stop();this.mCancelInIe6=b===true?true:false;this.mCurrentOpacity=this.getOpacity();if(this.mCurrentOpacity===0){this.fadeOutEvent.dispatch();return false}this.mCurrentDirection=VisualEffects.FadeEnum.OUT;this.mTime=d;this.mInterval=10;this.mLeftAmount=this.mCurrentOpacity;this.mAmount=this.mLeftAmount/(this.mTime/this.mInterval);if(ISQ.Http.browser.isIE6&&this.mCancelInIe6){this.mAmount=this.mLeftAmount}this.updateOpacity(-this.mAmount);this.mIsRunning=true;var a=this;this.mLastExecutionTime=new Date();this.mTimer=setTimeout(function(){a.fader()},this.mInterval)}catch(c){return false}return true};VisualEffects.Fade.prototype.fadeIn=function(e,d,b){try{this.stop();this.mRemoveFilterStyle=d===true?true:false;this.mCancelInIe6=b===true?true:false;this.mCurrentOpacity=this.getOpacity();if(this.mCurrentOpacity===100){this.fadeInEvent.dispatch();return false}this.mCurrentDirection=VisualEffects.FadeEnum.IN;
this.mTime=e;this.mInterval=10;this.mLeftAmount=(100-this.mCurrentOpacity);this.mAmount=this.mLeftAmount/(this.mTime/this.mInterval);if(ISQ.Http.browser.isIE6&&this.mCancelInIe6){this.mAmount=this.mLeftAmount}this.updateOpacity(this.mAmount);this.mIsRunning=true;var a=this;this.mLastExecutionTime=new Date();this.mTimer=setTimeout(function(){a.fader()},this.mInterval)}catch(c){return false}return true};VisualEffects.Fade.prototype.fader=function(){try{clearTimeout(this.mTimer);if(!this.mIsRunning){return}var b=new Date()-this.mLastExecutionTime;this.mInterval=b;this.mTime-=b;if(this.mTime<=0){this.mTime=0}switch(this.mCurrentDirection){case VisualEffects.FadeEnum.OUT:this.mLeftAmount=this.mCurrentOpacity;if(this.mTime===0){this.mTime=this.mInterval}this.mAmount=this.mLeftAmount/(this.mTime/this.mInterval);this.mAmount=this.mAmount>this.mLeftAmount?this.mLeftAmount:this.mAmount;this.updateOpacity(-this.mAmount);if(this.mCurrentOpacity===0){this.mIsRunning=false;this.fadeOutEvent.dispatch();return}break;case VisualEffects.FadeEnum.IN:this.mLeftAmount=this.mCurrentOpacity>=100?100:(100-this.mCurrentOpacity);if(this.mTime===0){this.mTime=this.mInterval}this.mAmount=this.mLeftAmount/(this.mTime/this.mInterval);this.mAmount=this.mAmount>this.mLeftAmount?this.mLeftAmount:this.mAmount;this.updateOpacity(this.mAmount);if(this.mCurrentOpacity===100){this.mIsRunning=false;if(this.mRemoveFilterStyle&&ISQ.Http.browser.app==="ie"&&!ISQ.Http.browser.isIE11){this.mElement.style.filter="";this.mElement.style.removeAttribute("filter")}this.fadeInEvent.dispatch();return}break}if(!this.mIsRunning){return}var a=this;this.mLastExecutionTime=new Date();this.mTimer=setTimeout(function(){a.fader()},this.mInterval)}catch(c){}};VisualEffects.Fade.prototype.getOpacity=function(){var b=100;if(ISQ.Http.browser.app==="ie"&&!ISQ.Http.browser.isIE11){var c=ISQ.CSS.getValue(this.mElement,"filter");if(typeof(c)!=="undefined"&&c!==null){var e=c.indexOf("alpha(opacity=");if(e!==-1){var a=c.indexOf(",");if(a===-1){a=c.indexOf(")")}var d=parseInt(c.substring(e+14,a));
if(!isNaN(d)){b=d}}if(b<0){b=0}else{if(b>100){b=100}}}}else{var c=ISQ.CSS.getValue(this.mElement,"opacity");if(typeof(c)!=="undefined"&&c!==null){var d=Number(c);if(!isNaN(d)){b=d;b*=100;if(b<0){b=0}else{if(b>100){b=100}}}}}return b};VisualEffects.Fade.prototype.setOpacity=function(a){this.updateOpacity(-this.mCurrentOpacity+a)};VisualEffects.Fade.prototype.updateOpacity=function(c){this.mCurrentOpacity+=c;if(this.mCurrentOpacity<0){this.mCurrentOpacity=0}else{if(this.mCurrentOpacity>100){this.mCurrentOpacity=100}}if(ISQ.Http.browser.app==="ie"&&!ISQ.Http.browser.isIE11){var a=new Array();a.push("alpha(opacity=");a.push(this.mCurrentOpacity);a.push(")");this.mElement.style.filter=a.join("")}else{var b=parseInt(this.mCurrentOpacity)/100;this.mElement.style.opacity=b}};
ISQ.Protocol.ServerLog=ISQ.Base.extend({name:"ISQ.Protocol.ServerLog"});ISQ.Protocol.ServerLog.eLevelEnum={INFO:"Info",DEBUG:"Debug",ERROR:"Error"};ISQ.Protocol.ServerLog.prototype.ctor=function(a){if(!a.isDerivedOf(ISQ.Protocol.ClientBase)){throw ("ISQ.Protocol.ServerLog.send: clientProtocol is not of type ISQ.Protocol.BaseClient")}this.client=a;this.token=new Ajax.Token({id:ISQ.Protocol.tokenEnum.SYSTEM,disposable:false})};ISQ.Protocol.ServerLog.prototype.dtor=function(){this.shutdown();delete this.client};ISQ.Protocol.ServerLog.prototype.initialize=function(a){if(a!==""){this.enabled=true;var b=a.split("|delimiter|");this.logFilter=b[0];this.requiredLogLevel=b[1];if(this.logFilter!=="*"){this.regExp=new RegExp();this.regExp.compile(this.logFilter,"i")}}};ISQ.Protocol.ServerLog.prototype.shutdown=function(){this.regExp=null;this.enabled=false};ISQ.Protocol.ServerLog.prototype.send=function(c,d){try{if(!this.enabled){return}if(!d||d===""){return}if(this.requiredLogLevel===ISQ.Protocol.ServerLog.eLevelEnum.ERROR&&c!==ISQ.Protocol.ServerLog.eLevelEnum.ERROR){return}if(this.regExp===null||!this.regExp.test(navigator.userAgent)){return}var a=new Array();a.push("<serverLog eLevel='");a.push(c);a.push("'>");a.push(d);a.push("</serverLog>");this.client.sendData(a.join(""),this.token,null,true)}catch(b){alert(b.message)}};ISQ.Protocol.ServerLog.prototype.token=null;ISQ.Protocol.ServerLog.prototype.logFilter="";ISQ.Protocol.ServerLog.prototype.regExp=null;ISQ.Protocol.ServerLog.prototype.client=null;ISQ.Protocol.ServerLog.prototype.enabled=false;ISQ.Protocol.ServerLog.prototype.requiredLogLevel=ISQ.Protocol.ServerLog.eLevelEnum.ERROR;
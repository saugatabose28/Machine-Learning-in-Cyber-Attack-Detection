!function() {
    goog.provide("P.CONST"), goog.require("P.scout.CONST");
    var a = {
        SHOW: 0,
        BUBBLE: 1,
        REMOVE: 2
    }, b = {
        VIEWPORT_MIDDLE: 1,
        ANCHORED: 2,
        MANUAL: 3
    }, c = {
        BEGINNING: "beginningStep",
        CONTINUE: "continueStep",
        END: "endStep",
        TOOLTIP: "tooltipStep"
    }, d = {
        OPEN: "open",
        CLOSE: "close"
    }, e = {
        USER_EDUCATION_TUTORIAL: "userEducationTutorial"
    }, f = {
        SECRET: "secret",
        PUBLIC: "public"
    };
    P.CONST.PIN_WIDTH = P.scout.CONST.PIN_WIDTH, P.CONST.PIN_MARGIN = P.scout.CONST.PIN_MARGIN, P.CONST.MIN_COLUMNS = P.scout.CONST.MIN_COLUMNS, P.CONST.MAX_COLUMNS = P.scout.CONST.MAX_COLUMNS, P.CONST.OPEN_CONVERSATION_MIN_POLL = 3e3, P.CONST.UPDATES_WITH_ACTIVE_CONVERSATIONS_MIN_POLL = 5e3, P.CONST.UPDATES_MIN_POLL = 15e3, P.CONST.UPDATES_MAX_POLL = 9e5, P.CONST.ACTIVE_CONVERSATION_HEAD_DIMENSION = 59, P.CONST.SCROLL_TO_ELEMENT_OFFSET = 130, P.CONST.SCROLL_TO_TOP_ANIMATION_TIME = 300, P.CONST.BOARD_PRIVACY_SECRET = "secret", P.CONST.ADD_HOVER_LISTENER_FOR_MAP_MARKER = "addHoverListenerForMapMarker", P.CONST.REMOVE_HOVER_LISTENER_FOR_MAP_MARKER = "removeHoverListenerForMapMarker", P.CONST.CLASS_BUTTON_HIGHLIGHTED = "buttonHighlighted", P.CONST.CLASS_TYPEAHEAD_HIGHLIGHTED = "highlighted", P.CONST.COOKIE_CSRF = "csrftoken", P.CONST.COOKIE_DEVICE_PIXEL_RATIO = "c_dpr", P.CONST.COOKIE_EMAIL_ADDRESS_UPDATED = "ues", P.CONST.COOKIE_FB_AUTO_LOGIN_DISABLED = "fba", P.CONST.COOKIE_FB_AUTO_LOGIN_DISABLED_PERSIST = "fbap", P.CONST.COOKIE_FB_AUTO_LOGIN_DISABLED_EXP = "fba_exp2", P.CONST.COOKIE_LOCAL_STORAGE = "ls", P.CONST.COOKIE_SESSION_STORAGE = "ss", P.CONST.COOKIE_NAG_LANGUAGE = "nl", P.CONST.COOKIE_USER_JUST_REGISTERED = "ujr", P.CONST.COOKIE_FORCE_DESKTOP = "r_m", P.CONST.COOKIE_SUPPRESS_NAG_DOWNLOAD = "nd", P.CONST.COOKIE_OPEN_IN_APP = "open_in_app", P.CONST.COOKIE_STAY_IN_BROWSER = "stay_in_browser", P.CONST.COOKIE_VERSION_REFRESH = "version_refresh", P.CONST.COOKIE_REGISTER_RESTRICT = "r_r", P.CONST.COOKIE_PERSONALIZE_FROM_OFFSITE_BROWSING_COOKIE_NAME = "_pinterest_pfob", P.CONST.COOKIE_DUMMY_SECURE = "_pinterest_d_sess", P.CONST.USER_AGENT_PLATFORM_IOS = "ios", P.CONST.USER_AGENT_PLATFORM_ANDROID = "android", P.CONST.USER_AGENT_PLATFORM_IPAD = "ipad", P.CONST.LOCALSTORAGE_SELECTED_NOTIFICATION_TAB = "selectedNotificationTab", P.CONST.SESSION_FACEBOOK_ID = "_fbid", P.CONST.SESSION_FACEBOOK_TOKEN = "_fbt", P.CONST.SESSION_KEY_INVITE_FOLLOW = "d_pif_invite", P.CONST.SESSION_TWITTER_ID = "_twid", P.CONST.SESSION_TWITTER_TOKEN = "_twit", P.CONST.SESSION_TWITTER_TOKEN_SECRET = "_twisc", P.CONST.SESSION_TWITTER_FIRST_NAME = "_twifn", P.CONST.SESSION_TWITTER_LAST_NAME = "_twiln", P.CONST.SESSION_TWITTER_USERNAME = "_twiun", P.CONST.SESSION_TWITTER_IMAGE_URL = "_twiiu", P.CONST.SESSION_RAKUTEN_ID = "_rakuid", P.CONST.SESSION_RAKUTEN_TOKEN = "_rakut", P.CONST.SESSION_RAKUTEN_REFRESH_TOKEN = "_rakurt", P.CONST.SESSION_RAKUTEN_FIRST_NAME = "_rakufn", P.CONST.SESSION_RAKUTEN_EMAIL = "_rakue", P.CONST.SESSION_RAKUTEN_GENDER = "_rakug", P.CONST.SESSION_GPLUS_CODE = "_gpc", P.CONST.SESSION_GPLUS_REDIRECT_URI = "_gpuri", P.CONST.EVENT_ADD_PERMANENT_MARKER_TO_MAP_FROM_TYPEAHEAD = "addPermanentMarkerToMapFromTypeahead", P.CONST.EVENT_APPEND_ELEMENT = "appendElement", P.CONST.EVENT_BLUR = "blur", P.CONST.EVENT_BOARD_CACHE_PIN_ID_TO_ADD_TO_MAP = "boardCachePinIdToAddToMap", P.CONST.EVENT_BOARD_CREATE_USER_REMOVED = "boardCreateUserRemoved", P.CONST.EVENT_BOARD_DELETED = "boardDeleted", P.CONST.EVENT_BOARD_FOLLOW = "boardFollowed", P.CONST.EVENT_BOARD_SELECTED = "boardSelected", P.CONST.EVENT_BOARD_CREATED = "boardCreated", P.CONST.EVENT_BOARD_UNFOLLOW = "boardUnfollowed", P.CONST.EVENT_BODY_COLUMN_CHANGE = "bodyColumnChange", P.CONST.EVENT_BUTTON_CLICK = "buttonClick", P.CONST.EVENT_CENTER_MAP_GEO_FEATURE = "centerMapFromGeoFeature", P.CONST.EVENT_CHANGE = "change", P.CONST.EVENT_CLEAR_PLACEHOLDER_MARKER_HIGHLIGHT = "clearPlaceholderMarkerHighlight", P.CONST.EVENT_CLOSE = "close", P.CONST.EVENT_CONFIRM = "confirm", P.CONST.EVENT_CONVERSATION_DECREMENT_BADGE = "conversationDecrementBadge", P.CONST.EVENT_CONVERSATION_HEAD_CLICKED = "conversationHeadClicked", P.CONST.EVENT_CONVERSATION_HEAD_READY = "conversationHeadReady", P.CONST.EVENT_CONVERSATIONS_PREVENT_CONVERSATIONS_RENDERING_ON_CHANGE = "conversationsPreventConversationsRenderingOnChange", P.CONST.EVENT_CONVERSATIONS_IS_EMPTY = "conversationsIsEmpty", P.CONST.EVENT_CONVERSATIONS_IS_EMPTY_WITHOUT_FRIENDS = "conversationsIsEmptyWithoutFriends", P.CONST.EVENT_CONVERSATION_LIST_ITEM_CLICKED = "conversationListItemClicked", P.CONST.EVENT_CONVERSATION_MESSAGES_SCROLL = "conversationMessagesScroll", P.CONST.EVENT_CONTACT_SELECTED = "contactSelected", P.CONST.EVENT_CONTENT_CHANGED = "contentChanged", P.CONST.EVENT_DATA = "data", P.CONST.EVENT_DATEPICKER_DATE_SELECTED = "datePickerDateSelected", P.CONST.EVENT_DATEPICKER_RANGE_SELECTED = "datePickerRangeSelected", P.CONST.EVENT_DESTROYED = "destroyed", P.CONST.EVENT_DIMS_CHANGED = "dimsChanged", P.CONST.EVENT_DISMISS = "dismiss", P.CONST.EVENT_DIALOG_BUTTON_CLICKED = "dialogButtonClicked", P.CONST.EVENT_DROPDOWN_CONTAINER_HIDDEN = "dropdownContainerHidden", P.CONST.EVENT_DROPDOWN_CONTAINER_SHOWN = "dropdownContainerShown", P.CONST.EVENT_DROPDOWN_HIDE = "dropdownHide", P.CONST.EVENT_DROPDOWN_HIDE_NOT_PROPAGATE = "dropdownHideNotPropagate", P.CONST.EVENT_DROPDOWN_SHOW = "dropdownShow", P.CONST.EVENT_ENTER_PRESSED = "enterPressed", P.CONST.EVENT_ERROR = "error", P.CONST.EVENT_ERROR_RESOLVED = "errorResolved", P.CONST.EVENT_ESCAPE_DROPDOWN = "escapeDropdown", P.CONST.EVENT_EXTERNAL_CLICK = "externalLinkClicked", P.CONST.EVENT_FAST_FOLLOW_CATEGORY_SELECTED = "followpageCategorySelected", P.CONST.EVENT_FAST_FOLLOW_PINFLUENCER_CATEGORY_SELECTED = "followPinfluencerCategorySelected", P.CONST.EVENT_FAST_FOLLOW_SEARCH_QUERY_UPDATED = "followpageSearchQueryUpdated", P.CONST.EVENT_FOCUS = "focus", P.CONST.EVENT_GRID_ITEM_SELECTED = "gridItemSelected", P.CONST.EVENT_HIGHLIGHT_PLACEHOLDER_MARKER = "highlightPlaceholderMarker", P.CONST.EVENT_HOVERINTENT_ENTER_COMPLETE = "mouseEnterComplete", P.CONST.EVENT_HOVERINTENT_ENTER_START = "mouseEnterStart", P.CONST.EVENT_HOVERINTENT_OUT_COMPLETE = "mouseOutComplete", P.CONST.EVENT_HOVERINTENT_OUT_START = "mouseOutStart", P.CONST.EVENT_IMAGE_BLOCK_CLICKED = "imageBlockClicked", P.CONST.EVENT_INCREMENT_BUTTON_CREATE = "incrementButtonCreate", P.CONST.EVENT_INCREMENT_BUTTON_DESTROY = "incrementButtonDestroy", P.CONST.EVENT_INTEREST_FOLLOW = "interestFollow", P.CONST.EVENT_INVITE_EMAIL = "inviteEmail", P.CONST.EVENT_INVITE_USER = "inviteUser", P.CONST.EVENT_ITEM_CLICK = "itemClick", P.CONST.EVENT_ITEMS_END = "itemsEnd", P.CONST.EVENT_ITEMS_REQUEST_ERROR = "itemsRequestError", P.CONST.EVENT_ITEMS_REQUEST_START = "itemsRequestStart", P.CONST.EVENT_ITEMS_REQUEST_SUCCESS = "itemsRequestSuccess", P.CONST.EVENT_ITEM_HIGHLIGHTED = "itemHighlighted", P.CONST.EVENT_ITEM_SELECTED = "itemSelected", P.CONST.EVENT_LIST_ITEM_CLICK = "listItemClick", P.CONST.EVENT_MAP_CLUSTER_CLICK = "mapClusterClick", P.CONST.EVENT_MAP_DRAG_END = "mapDragEnd", P.CONST.EVENT_MAP_POPUP_OPENED = "mapPopupOpened", P.CONST.EVENT_MAP_READY = "mapReady", P.CONST.EVENT_MAP_ZOOM_END = "mapZoomEnd", P.CONST.EVENT_MODAL = "modal", P.CONST.EVENT_NAVIGATE = "navigate", P.CONST.EVENT_NEXT = "next", P.CONST.EVENT_OPEN = "open", P.CONST.EVENT_OPEN_IN_APP = "openInApp", P.CONST.EVENT_COOKIE_BASED_REDIRECT_TO_APP = "redirectToApp", P.CONST.EVENT_INTERSTITIAL_OPEN_IN_APP = "interstitialOpenInApp", P.CONST.EVENT_UNAUTH_BANNER_OPEN_IN_APP = "unauthBannerOpenInApp", P.CONST.EVENT_MODAL_ANIMATE_HIDE_END = "modalAnimateHideEnd", P.CONST.EVENT_MODAL_ANIMATE_HIDE_START = "modalAnimateHideStart", P.CONST.EVENT_MODAL_ANIMATE_SHOW_END = "modalAnimateShowEnd", P.CONST.EVENT_MODAL_ANIMATE_SHOW_START = "modalAnimateShowStart", P.CONST.EVENT_PASTE = "paste", P.CONST.EVENT_PAGE_NUMBER_CLICK = "pageNumberClick", P.CONST.EVENT_PLACE_IMAGE_SELECTED = "placeImageSelected", P.CONST.EVENT_PIN_CREATE = "pinCreate", P.CONST.EVENT_PIN_CREATE_OPENED = "pinCreateOpened", P.CONST.EVENT_PIN_DELETED = "pinDeleted", P.CONST.EVENT_PIN_FEEDBACK_SUBMITTED = "pinFeedbackSubmitted", P.CONST.EVENT_PIN_LIKED = "pinLiked", P.CONST.EVENT_PIN_MASK_CLICKED = "pinMaskClicked", P.CONST.EVENT_PIN_MOUSE_IN = "pinMouseIn", P.CONST.EVENT_PIN_MOUSE_OUT = "pinMouseOut", P.CONST.EVENT_PIN_PLACE_CLICK = "pinPlaceClick", P.CONST.EVENT_PIN_UNLIKED = "pinUnliked", P.CONST.EVENT_PIN_UPDATED = "pinUpdated", P.CONST.EVENT_PINIT_BUTTON_CLICKED = "pinItButtonClicked", P.CONST.EVENT_PLACE_SELECTED = "placeSelected", P.CONST.EVENT_PREVIOUS = "previous", P.CONST.EVENT_PROGRESS_COMPLETED = "progressCompleted", P.CONST.EVENT_PULSER_CLICKED = "pulserClicked", P.CONST.EVENT_REMOVE_PLACEHOLDER_MARKER_TO_MAP_FROM_TYPEAHEAD = "removePlaceholderMarkerToMapFromTypeahead", P.CONST.EVENT_REPORT_REASON_SELECTED = "reportReasonSelected", P.CONST.EVENT_REQUIRES_AUTHENTICATION = "authenticationRequired", P.CONST.EVENT_RESET_SHOW_PIN_ON_MAP_BUTTON = "resetShowPinOnMapButtonStates", P.CONST.EVENT_RESIZE = "resize", P.CONST.EVENT_ROUTE_MATCHED = "routeMatched", P.CONST.EVENT_ROUTE_NO_MATCH = "routeNoMatch", P.CONST.EVENT_ROW_CLICKED = "rowClicked", P.CONST.EVENT_SCROLL = "scroll", P.CONST.EVENT_SCROLL_TO_ELEMENT = "scrollToElement", P.CONST.EVENT_SCROLL_TO_TOP = "scrollToTop", P.CONST.EVENT_SEE_QUESTION = "seeQuestion", P.CONST.EVENT_SEND_OBJECT_TO_USERS = "sendObjectViaUsers", P.CONST.EVENT_SET_PLACEHOLDER_MARKERS = "setPlaceholderMarkers", P.CONST.EVENT_STICKY_FIXED = "stickyUpdate", P.CONST.EVENT_STICKY_NORMAL = "stickyNormal", P.CONST.EVENT_SUBMIT_VALIDATED = "submitValidated", P.CONST.EVENT_TEXT_INPUT_RESIZED = "textInputResized", P.CONST.EVENT_OLD_TOAST_RENDER = "oldToastRender", P.CONST.EVENT_TOGGLE_MARKERS_TRANSLUCENT = "toggleMarkersTransparent", P.CONST.EVENT_TOKEN_ADDED = "tokenAdded", P.CONST.EVENT_TOKEN_REMOVED = "tokenRemoved", P.CONST.EVENT_TOKEN_REMOVED_BY_USER = "tokenRemovedByUser", P.CONST.EVENT_REMOVE_TOKEN = "removeToken", P.CONST.EVENT_TRIGGER_FLYOUT_CLICKED = "triggerFlyoutClicked", P.CONST.EVENT_TUTORIAL_SHOW = "showTutorial", P.CONST.EVENT_TUTORIAL_TRIGGER_CLICKED = "tutorialTriggerClicked", P.CONST.EVENT_TYPEAHEAD_HIDDEN = "typeaheadHidden", P.CONST.EVENT_TYPEAHEAD_HINT = "typeaheadHint", P.CONST.EVENT_TYPEAHEAD_MOUSEDOWN = "typeaheadMousedown", P.CONST.EVENT_TYPEAHEAD_NO_RESULTS_RETURNED = "typeaheadNoResultsReturned", P.CONST.EVENT_TYPEAHEAD_RENDER_DONE = "typeaheadRenderDone", P.CONST.EVENT_TYPEAHEAD_RESULTS_RETURNED = "typeaheadResultsReturned", P.CONST.EVENT_TYPEAHEAD_SEARCH_START = "typeaheadSearchStart", P.CONST.EVENT_TYPEAHEAD_SEARCH_WORLD = "typeaheadSearchWorld", P.CONST.EVENT_TYPEAHEAD_SHOWN = "typeaheadShown", P.CONST.EVENT_UNREAD_CONVERSATION_LIST_ITEM_CLICK = "conversationUnreadListItemClick", P.CONST.EVENT_UPDATE_GEO_FEATURE_LIST = "updateGeoFeatureList", P.CONST.EVENT_UPLOAD_ERROR = "uploadError", P.CONST.EVENT_UPLOAD_PROGRESS = "uploadProgress", P.CONST.EVENT_UPLOAD_START = "uploadStart", P.CONST.EVENT_UPLOAD_SUCCESS = "uploadSuccess", P.CONST.EVENT_USER_CLICK = "userClick", P.CONST.EVENT_USER_FOLLOW = "userFollow", P.CONST.EVENT_USER_REGISTER = "userRegister", P.CONST.EVENT_USER_UNFOLLOW = "userUnfollow", P.CONST.EVENT_VISUAL_SEARCH_OBJECT_SELECTED = "visualSearchObjectTagSelected", P.CONST.EVENT_VISUAL_SEARCH_OBJECT_CROP_BUTTON_PRESSED = "visualSearchObjectCropButtonPressed", P.CONST.EVENT_PIN_COMMENTS_TOGGLED = "pinCommentsToggled", P.CONST.EVENT_SOCIAL_NETWORK_CONNECTION = "socialConnect", P.CONST.EVENT_REFRESH_FOLLOWING_GRID = "refreshFollowingGrid", P.CONST.EVENT_REPIN_DIALOG_ERROR = "repinDialogError", P.CONST.FACEBOOK_LOGIN_SUCCESS = "fbLoginSuccess", P.CONST.FACEBOOK_LOGIN_FAILURE = "fbLoginFailure", P.CONST.GA_ACTION_CLICK = "click", P.CONST.GA_ACTION_CLICK_ACCEPT = "click_accept", P.CONST.GA_ACTION_CLICK_BACK = "click_back", P.CONST.GA_ACTION_CLICK_CANCEL = "click_cancel", P.CONST.GA_ACTION_CLICK_CLOSE = "click_close", P.CONST.GA_ACTION_CLICK_CONFIRM = "click_confirm", P.CONST.GA_ACTION_CLICK_SUBMIT = "click_submit", P.CONST.GA_ACTION_ENTER_SUBMIT = "enter_submit", P.CONST.GA_ACTION_ERROR = "error", P.CONST.GA_ACTION_OPEN_MODAL = "open_modal", P.CONST.GA_ACTION_SELECT_SUBMIT = "select_submit", P.CONST.GA_ACTION_SUCCESS = "success", P.CONST.GA_CATEGORY_PIN_DELETE = "pin_delete", P.CONST.GA_CATEGORY_PIN_EDIT = "pin_edit", P.CONST.IMAGE_SIZE_ORIG = "orig", P.CONST.PUBSUB_CHANNEL_BREADCRUMBS = "breadcrumbs", P.CONST.PUBSUB_CHANNEL_CURRENT_USER = "currentUser", P.CONST.PUBSUB_CHANNEL_CONTEXT_LOGGING = "contextLogging", P.CONST.PUBSUB_CHANNEL_KLP_BAR = "klpBar", P.CONST.PUBSUB_CHANNEL_MAIN_MODULE = "mainModule", P.CONST.PUBSUB_CHANNEL_MESSAGES = "messages", P.CONST.PUBSUB_CHANNEL_REQUEST = "request", P.CONST.PUBSUB_CHANNEL_SITE = "site", P.CONST.PUBSUB_CHANNEL_TUTORIAL = "tutorial", P.CONST.PUBSUB_CHANNEL_UNAUTH_NAG = "unauthNag", P.CONST.PUBSUB_MESSAGE_BOARD_SET_PUBLIC = "boardSetPublic", P.CONST.PUBSUB_MESSAGE_USER_EMAIL_UPDATED = "userEmailUpdated", P.CONST.PUBSUB_TOPIC_ANSWER_DELETED = "answerDeleted", P.CONST.PUBSUB_TOPIC_ANSWER_LIKED = "answerLiked", P.CONST.PUBSUB_TOPIC_ANSWER_REPLY_CREATED = "answerReplyCreated", P.CONST.PUBSUB_TOPIC_ANSWER_REPORTED = "answerReported", P.CONST.PUBSUB_TOPIC_ANSWER_UNLIKED = "answerUnliked", P.CONST.PUBSUB_TOPIC_ANSWER_UPDATED = "answerUpdated", P.CONST.PUBSUB_TOPIC_APP_VERSION = "appVersion", P.CONST.PUBSUB_TOPIC_APP_VERSION_AVAILABLE = "appVersionAvailable", P.CONST.PUBSUB_TOPIC_BOARD_APPROVED_COLLABORATOR_INVITE = "boardApprovedCollaboratorInvite", P.CONST.PUBSUB_TOPIC_BOARD_BANNED_COLLABORATOR = "boardBannedCollaborator", P.CONST.PUBSUB_TOPIC_BOARD_COVER_UPDATED = "boardCoverUpdated", P.CONST.PUBSUB_TOPIC_BOARD_CREATED = "boardCreated", P.CONST.PUBSUB_TOPIC_BOARD_DELETED = "boardDeleted", P.CONST.PUBSUB_TOPIC_BOARD_FOLLOW = "boardFollow", P.CONST.PUBSUB_TOPIC_BOARD_REMOVED_COLLABORATOR_SELF = "boardRemovedCollaboratorSelf", P.CONST.PUBSUB_TOPIC_BOARD_UNFOLLOW = "boardUnfollow", P.CONST.PUBSUB_TOPIC_BOARD_UPDATED = "boardUpdated", P.CONST.PUBSUB_TOPIC_BOARD_WRITE_ACCESS_UPDATED = "boardWriteAccessUpdated", P.CONST.PUBSUB_TOPIC_BREADCRUMB_UPDATE = "updateBreadcrumb", P.CONST.PUBSUB_TOPIC_CONSUMER_UPDATED = "consumerUpdated", P.CONST.PUBSUB_TOPIC_CONSUMER_LIST_UPDATED = "consumerListUpdated", P.CONST.PUBSUB_TOPIC_CONTEXT_LOG_PLAIN_OBJECT = "contextLogPlainObject", P.CONST.PUBSUB_TOPIC_CONVERSATION_NO_ACTIVE_CONVERSATIONS = "conversationNoActiveConversations", P.CONST.PUBSUB_TOPIC_CONVERSATION_UNREAD_COUNT = "conversationUnreadCount", P.CONST.PUBSUB_TOPIC_CONVERSATION_UNREAD_COUNT_DECREASE = "conversationUnreadCountDecrease", P.CONST.PUBSUB_TOPIC_CONVERSATION_ADDED = "conversationAdded", P.CONST.PUBSUB_TOPIC_CONVERSATION_OPEN = "conversationOpen", P.CONST.PUBSUB_TOPIC_CONVERSATION_CLOSED = "conversationClosed", P.CONST.PUBSUB_TOPIC_PLACED_EXPERIENCES_FROM_SERVER = "placedExperiencesFromServer", P.CONST.PUBSUB_TOPIC_CURRENT_CATEGORY = "currentCategory", P.CONST.PUBSUB_TOPIC_DEEP_LINK = "deepLink", P.CONST.PUBSUB_TOPIC_KLP_BAR_HIDDEN = "klpBarHidden", P.CONST.PUBSUB_TOPIC_KLP_BAR_SHOWN = "klpBarShown", P.CONST.PUBSUB_TOPIC_MAIN_MODULE_NEW = "mainModuleNew", P.CONST.PUBSUB_TOPIC_MODAL_MASK_CLICK = "modalMaskClick", P.CONST.PUBSUB_TOPIC_NAG_DOWNLOAD_APP_HIDDEN = "nagDownloadAppHidden", P.CONST.PUBSUB_TOPIC_NAG_STATE = "nagState", P.CONST.PUBSUB_TOPIC_NAG_UPDATED = "nagUpdated", P.CONST.PUBSUB_TOPIC_NAVIGATE_COMPLETE = "navigateComplete", P.CONST.PUBSUB_TOPIC_NAVIGATE_STARTED = "navigateStarted", P.CONST.PUBSUB_TOPIC_OBJECT_SENT = "objectSent", P.CONST.PUBSUB_TOPIC_PAGE_INFO = "pageInfo", P.CONST.PUBSUB_TOPIC_PIN_COMMENT_CREATED = "pinCommentCreated", P.CONST.PUBSUB_TOPIC_PIN_COMMENT_DELETED = "pinCommentDeleted", P.CONST.PUBSUB_TOPIC_PIN_CREATED = "pinCreated", P.CONST.PUBSUB_TOPIC_PIN_DELETED = "pinDeleted", P.CONST.PUBSUB_TOPIC_PIN_HIDDEN = "pinHidden", P.CONST.PUBSUB_TOPIC_PIN_HIDDEN_STOP_THROUGH_BOARD = "pinHiddenStopThroughBoard", P.CONST.PUBSUB_TOPIC_PIN_LIKED = "pinLiked", P.CONST.PUBSUB_TOPIC_PIN_QUESTION_CREATED = "pinQuestionCreated", P.CONST.PUBSUB_TOPIC_PIN_UNLIKED = "pinUnliked", P.CONST.PUBSUB_TOPIC_PIN_UPDATED = "pinUpdated", P.CONST.PUBSUB_TOPIC_PIN_FLAGGED = "pinFlagged", P.CONST.PUBSUB_TOPIC_PLACEHOLDER_MARKER_CLOSED = "placeholderMarkerClosed", P.CONST.PUBSUB_TOPIC_PLACEHOLDER_MARKER_OPENED = "placeholderMarkerOpened", P.CONST.PUBSUB_TOPIC_PREPEND_ITEM_MAP_BOARD = "prependNewPinMapBoard", P.CONST.PUBSUB_TOPIC_QUESTION_ANSWER_CREATED = "questionAnswerCreated", P.CONST.PUBSUB_TOPIC_QUESTION_DELETED = "questionDeleted", P.CONST.PUBSUB_TOPIC_QUESTION_LIKED = "questionLiked", P.CONST.PUBSUB_TOPIC_QUESTION_REPLY_CREATED = "questionReplyCreated", P.CONST.PUBSUB_TOPIC_QUESTION_REPORTED = "questionReported", P.CONST.PUBSUB_TOPIC_QUESTION_UNLIKED = "questionUnliked", P.CONST.PUBSUB_TOPIC_QUESTION_UPDATED = "questionUpdated", P.CONST.PUBSUB_TOPIC_REPLY_DELETED = "replyDeleted", P.CONST.PUBSUB_TOPIC_REPLY_REPORTED = "replyReported", P.CONST.PUBSUB_TOPIC_REPLY_UPDATED = "replyUpdated", P.CONST.PUBSUB_TOPIC_REQUEST_IDENTIFIER = "requestIdentifier", P.CONST.PUBSUB_TOPIC_SCROLL_TO_TOP_HIDDEN = "scrollToTopHidden", P.CONST.PUBSUB_TOPIC_SCROLL_TO_TOP_VISIBLE = "scrollToTopVisible", P.CONST.PUBSUB_TOPIC_SEARCH_QUERY_UPDATED = "searchQueryUpdated", P.CONST.PUBSUB_TOPIC_SEARCH_QUERY_UPDATED_WITH_EMPTY_QUERY = "searchQueryUpdatedWithEmptyQuery", P.CONST.PUBSUB_TOPIC_SEARCH_SCOPE_UPDATED = "searchScopeUpdated", P.CONST.PUBSUB_TOPIC_SEARCH_BOOST_UPDATED = "searchBoostUpdated", P.CONST.PUBSUB_TOPIC_SEARCH_GUIDE_SELECTED = "searchGuideSelected", P.CONST.PUBSUB_TOPIC_SOCIAL_NETWORK_UPDATED = "socialNetworkUpdated", P.CONST.PUBSUB_TOPIC_TOPIC_MAP_DRAGGED = "mapDragged", P.CONST.PUBSUB_TOPIC_TUTORIAL_TRIGGER_ACTIVE = "tutorialTriggerActive", P.CONST.PUBSUB_TOPIC_TUTORIAL_NEXT = "tutorialNext", P.CONST.PUBSUB_TOPIC_TUTORIAL_MINI_NEXT = "tutorialMiniNext", P.CONST.PUBSUB_TOPIC_TUTORIAL_SKIP_PROGRESS_BAR_STEP = "tutorialSkipProgressBarStep", P.CONST.PUBSUB_TOPIC_USER_BLOCKED = "userBlocked", P.CONST.PUBSUB_TOPIC_USER_FOLLOW = "userFollow", P.CONST.PUBSUB_TOPIC_USER_UNBLOCKED = "userUnblocked", P.CONST.PUBSUB_TOPIC_USER_UNFOLLOW = "userUnfollow", P.CONST.PUBSUB_TOPIC_USER_UPDATED = "userUpdated", P.CONST.PUBSUB_TOPIC_USER_CHANGED_PASSWORD = "userChangedPassword", P.CONST.PUBSUB_TOPIC_UNAUTH_NAG_TYPE = "unauthNagType", P.CONST.PUBSUB_TOPIC_VIEW_CHANGE = "viewChange", P.CONST.PUBSUB_TOPIC_WINDOW_LOCATION_CHANGE = "windowLocationChange", P.CONST.PUBSUB_TOPIC_PIN_REPINNED = "pinRepinned", P.CONST.PUBSUB_TOPIC_PIN_COMMENT_POPULATED = "pinCommentPopulated", P.CONST.PUBSUB_TOPIC_HIDE_UNAUTH_BANNER = "unauthBanner", P.CONST.MAX_CHARS_FOR_BOARD_TITLE = 100, P.CONST.MAX_CHARS_FOR_USER_DESCRIPTION = 160, P.CONST.MAX_CHARS_FOR_BOARD_PIN_DESCRIPTION = 500, P.CONST.OVERFLOWING_TEXT_OVERFLOWING_CLASS = "overflowing", P.CONST.CLASS_DROPPABLE_HOVER = "droppableHover", P.CONST.MIN_PINNABLE_IMAGE_HEIGHT = 50, P.CONST.MIN_PINNABLE_IMAGE_WIDTH = 100, P.CONST.BoardPrivacy = f, P.CONST.ErrorStrategy = a, P.CONST.PositionMode = b, P.CONST.StepTypes = c, P.CONST.TutorialTypes = e, P.CONST.ViewActions = d, P.CONST.TYPEAHEAD_ATTRIBUTE_EMPTY_STATE = "results_empty", P.CONST.TYPEAHEAD_CATEGORY_CITY = "City", P.CONST.TYPEAHEAD_TYPE_GPLUS_NON_PINNER = "gplus_non_pinner", P.CONST.TYPEAHEAD_TYPE_FB_NON_PINNER = "facebook_non_pinner", P.CONST.TYPEAHEAD_TYPE_ADDRESS_BOOK_NON_PINNER = "address_book_non_pinner", P.CONST.TYPEAHEAD_TYPE_GMAIL_NON_PINNER = "google_non_pinner", P.CONST.TYPEAHEAD_TYPE_YAHOO_NON_PINNER = "yahoo_non_pinner", P.CONST.BOARD_LAYOUT_PLACES = "places", P.CONST.API_ERROR_PIN_NOT_FOUND = 50, P.CONST.AUTO_PASSWORD_RESET_ERROR_CODE = 85, P.CONST.API_ERROR_UNDERAGE_REGISTER_ATTEMPT = 93, P.CONST.API_ERROR_DO_NOT_KNOW_TYPE_ANSWER = 324, P.CONST.LOGIN_VOLUNTARILY_DEACTIVATED_USER = 84, P.CONST.QA_TUTORIAL_SCROLL_OFFSET = 200;
    var g, h, i = parseInt("0000000000001", 2), j = 0;
    P.CONST.PositionPointFlag = {}, _.each(["VERTICAL", "HORIZONTAL"], function(a) {
        h = 0, _.each(["BOTTOM", "LEFT", "CENTER", "RIGHT", "TOP"], function(b) {
            g = i<<j++, h|=g, P.CONST.PositionPointFlag["FLAG_" + a + "_" + b] = g
        }), P.CONST.PositionPointFlag["FLAG_" + a] = h
    });
    var k = P.CONST.PositionPointFlag;
    P.CONST.PositionPoint = {
        CENTER_CENTER: k.FLAG_VERTICAL_CENTER | k.FLAG_HORIZONTAL_CENTER,
        BOTTOM_CENTER: k.FLAG_VERTICAL_BOTTOM | k.FLAG_VERTICAL_CENTER,
        BOTTOM_LEFT: k.FLAG_VERTICAL_BOTTOM | k.FLAG_VERTICAL_LEFT,
        BOTTOM_RIGHT: k.FLAG_VERTICAL_BOTTOM | k.FLAG_VERTICAL_RIGHT,
        TOP_CENTER: k.FLAG_VERTICAL_TOP | k.FLAG_VERTICAL_CENTER,
        TOP_LEFT: k.FLAG_VERTICAL_TOP | k.FLAG_VERTICAL_LEFT,
        TOP_RIGHT: k.FLAG_VERTICAL_TOP | k.FLAG_VERTICAL_RIGHT,
        LEFT_BOTTOM: k.FLAG_HORIZONTAL_LEFT | k.FLAG_HORIZONTAL_BOTTOM,
        LEFT_CENTER: k.FLAG_HORIZONTAL_LEFT | k.FLAG_HORIZONTAL_CENTER,
        LEFT_TOP: k.FLAG_HORIZONTAL_LEFT | k.FLAG_HORIZONTAL_TOP,
        RIGHT_BOTTOM: k.FLAG_HORIZONTAL_RIGHT | k.FLAG_HORIZONTAL_BOTTOM,
        RIGHT_CENTER: k.FLAG_HORIZONTAL_RIGHT | k.FLAG_HORIZONTAL_CENTER,
        RIGHT_TOP: k.FLAG_HORIZONTAL_RIGHT | k.FLAG_HORIZONTAL_TOP
    }, P.CONST.SEARCH_FILTER_CONJUNCTIONS = ["and", "that", "but", "or", "as", "if", "when", "than", "because", "while", "where", "after", "so", "though", "since", "until", "whether", "before", "although", "nor", "like", "once", "unless", "now", "except", "the", "a", "an", "san", "for", "in", "with"], P.CONST.INTEREST_LIST_FAVORITED = "favorited", P.CONST.INTEREST_LIST_USER_ADDED = "user_added"
}(), function() {
    goog.provide("P.csrf"), goog.require("P.CONST"), goog.require("P.url"), P.Csrf = {}, P.csrf.addCsrfToken = function() {
        $(document).ajaxSend(function(a, b, c) {
            P.csrf._needsCsrfToken(c.type, c.url) && b.setRequestHeader("X-CSRFToken", P.csrf.getCSRFToken())
        })
    }, P.csrf.cleanUpCookie = function() {
        var a = P.CONST.COOKIE_CSRF, b = document.cookie.match(new RegExp(a + "=.+?($|;)", "g")), c = b && b.length > 1;
        c && (document.cookie = P.CONST.COOKIE_CSRF + "=bad; expires=Thu, 01-Jan-1970 00:00:00 GMT; Max-Age=0; Path=/")
    }, P.csrf.getCSRFToken = function() {
        return Cookie.get(P.CONST.COOKIE_CSRF)
    }, P.csrf._isSafeMethod = function(a) {
        return /^(GET|HEAD|OPTIONS|TRACE)$/.test(a)
    }, P.csrf._needsCsrfToken = function(a, b) {
        return !P.csrf._isSafeMethod(a) && P.url.isTrustedOrigin(b)
    }
}(), function() {
    goog.provide("P.NOOP"), goog.provide("P.state"), goog.provide("P.Mixins"), goog.provide("P.app"), goog.require("P.csrf"), P.NOOP = function() {}, P.state = {
        activeTarget: null
    }, P.Mixins = {}, P.app = null, P.csrf.cleanUpCookie(), P.csrf.addCsrfToken(), $(document).ajaxSend(function(a, b) {
        b.setRequestHeader("X-NEW-APP", "1")
    }), Modernizr.touch || (document.body.className += "noTouch")
}(), function() {
    goog.provide("P.interfaces.ILogger"), P.interfaces.LOG_LEVEL = {
        FINEST: 0,
        FINER: 1,
        FINE: 2,
        INFO: 3,
        WARN: 4,
        ERROR: 5,
        NONE: 6
    }, P.interfaces.SERVER_LOG_TYPE = {
        LOG: "log",
        WARNING: "warning",
        ERROR: "error",
        PAGE_LOAD_METRIC: "page_load_metric",
        APP_METRIC: "app_metric"
    }, P.interfaces.LOGGABLE_HTTP_METHOD = {
        GET: "get",
        POST: "post"
    }, P.interfaces.ILogger = function() {}, _.extend(P.interfaces.ILogger.prototype, {
        finest: function() {},
        finer: function() {},
        fine: function() {},
        debug: function() {},
        warn: function() {},
        error: function() {},
        setLogLevel: function() {},
        logToServer: function() {}
    })
}(), function() {
    goog.provide("P.interfaces.IHistoryNavigator"), goog.require("P.navigateData.NavigateData"), P.interfaces.IHistoryNavigator = function() {}, P.interfaces.IHistoryNavigator.prototype.navigate = function() {};
    var a = function() {};
    a.prototype.navigate = function() {}, P._historyNavigator = null, P.setHistoryNavigator = function(a) {
        P._historyNavigator = a
    }, P.getHistoryNavigator = function() {
        return P._historyNavigator
    }, P.setHistoryNavigator(new a)
}(), function() {
    goog.provide("P.interfaces.IModalManager"), P.interfaces.IModalManager = function() {}, _.extend(P.interfaces.IModalManager.prototype, {
        showModal: function() {},
        removeModal: function() {},
        removeAllModals: function() {},
        showInModal: function() {}
    });
    var a = function() {};
    _.extend(a.prototype, {
        showModal: function() {},
        removeModal: function() {},
        removeAllModals: function() {},
        showInModal: function() {}
    }), P.setModalManager = function(a) {
        P._modalManager = a
    }, P.setModalManager(new a), P.getModalManager = function() {
        return P._modalManager
    }
}(), function() {
    goog.provide("P.interfaces.IResource"), goog.require("P.resourceResponse");
    P.interfaces.IResource = function() {}, _.extend(P.interfaces.IResource.prototype, Backbone.Events), _.extend(P.interfaces.IResource.prototype, {
        getName: function() {},
        setOptions: function() {},
        set: function() {},
        get: function() {},
        copyOptions: function() {},
        callGet: function() {},
        callCreate: function() {},
        callUpdate: function() {},
        callDelete: function() {},
        abort: function() {},
        resetBookmark: function() {},
        setBookmarks: function() {},
        getLatestBookmark: function() {},
        atEnd: function() {},
        isEqual: function() {},
        toString: function() {},
        isCalling: function() {}
    })
}(), function() {
    goog.provide("P.interfaces.IStorage"), P.interfaces.IStorage = function() {}, P.interfaces.IStorage.prototype.length = function() {}, P.interfaces.IStorage.prototype.key = function() {}, P.interfaces.IStorage.prototype.getItem = function() {}, P.interfaces.IStorage.prototype.setItem = function() {}, P.interfaces.IStorage.prototype.removeItem = function() {}, P.interfaces.IStorage.prototype.clear = function() {}
}(), function() {
    goog.provide("P.interfaces.IWindowManager"), P.interfaces.IWindowManager = function() {}, _.extend(P.interfaces.IWindowManager.prototype, {
        open: function() {},
        _makeWindowOptions: function() {},
        shrinkWrap: function() {},
        contain: function() {}
    }), P.setWindowManager = function(a) {
        P._window = a
    }, P.getWindowManager = function() {
        return P._window
    }
}(), function() {
    goog.provide("P.contextEvent"), goog.require("P.ContextLogging.ComponentType"), goog.require("P.ContextLogging.ElementType");
    var a = function(a, b, c, d, e, f, g, h) {
        this._eventType = a, this._viewType = b, this._viewParameter = c, this._helperData = d, this._requestIdentifier = e, this._element = f, this._component = g, this._time = null, this._eventData = {}, this._auxData = {}, this._objectIdStr = h
    };
    a.prototype.appendPinImpressions = function(a) {
        this._eventData.pinImpressions = this.getPinImpressions().concat(a)
    }, a.prototype.copyViewContext = function(a) {
        this._viewType = a.getViewType(), this._viewParameter = a.getViewParameter(), this._helperData = $.extend(!0, {}, a.getHelperData())
    }, a.prototype.getEventType = function() {
        return this._eventType
    }, a.prototype.getHelperData = function() {
        return this._helperData
    }, a.prototype.getPinImpressions = function() {
        return this._eventData.pinImpressions || []
    }, a.prototype.getViewParameter = function() {
        return this._viewParameter
    }, a.prototype.getViewType = function() {
        return this._viewType
    }, a.prototype.hasSameViewContext = function(a) {
        return this.getViewType() === a.getViewType() && this.getViewParameter() === a.getViewParameter() && _.isEqual(this.getHelperData(), a.getHelperData())
    }, a.prototype.setEventType = function(a) {
        this._eventType = a
    }, a.prototype.setObjectIdStr = function(a) {
        this._objectIdStr = a
    }, a.prototype.setPinImpressions = function(a) {
        this._eventData.pinImpressions = a
    }, a.prototype.setComponent = function(a) {
        this._component = a
    }, a.prototype.setElement = function(a) {
        this._element = a
    }, a.prototype.updateAuxData = function(a) {
        this._auxData = _.extend(this._auxData, a)
    }, a.prototype.setRequestIdentifier = function(a) {
        this._requestIdentifier = a
    }, a.prototype.setTime = function(a) {
        this._time = a
    }, a.prototype.toSerializable = function() {
        var a = {
            event_type: this._eventType,
            view_type: this._viewType,
            view_parameter: this._viewParameter,
            helper_data: this._helperData,
            request_identifier: this._requestIdentifier,
            element: this._element,
            component: this._component,
            time: this._time,
            event_data: this._eventData,
            aux_data: this._auxData
        };
        return this._objectIdStr && (a[P.ContextEvent.KEY_OBJECT_ID_STR] = this._objectIdStr), a
    }, P.ContextEvent = {}, Pc.TEST_MODE && (P.ContextEvent = a), P.ContextEvent.KEY_EVENT_TYPE = "event_type", P.ContextEvent.KEY_OBJECT_ID_STR = "object_id_str", P.ContextEvent.fromEventType = function(a) {
        var b = P.ContextEvent.fromPlainObject({});
        return b.setEventType(a), b
    }, P.ContextEvent.fromPlainObject = function(b) {
        return new a(b.event_type, b.view_type, b.view_parameter, b.helper_data, b.request_identifier, b.element, b.component, b.object_id_str)
    }
}(), function() {
    goog.provide("P.storage"), goog.require("P.interfaces.IStorage");
    var a = function(a) {
        this._cookieKey = a
    };
    _.extend(a.prototype, {
        length: function() {
            var a = Cookie.get(this._cookieKey), b = a ? JSON.parse(a): {};
            return _.keys(b).length
        },
        key: function() {
            throw new Error("intentionally unimplemented function")
        },
        getItem: function(a) {
            var b = Cookie.get(this._cookieKey), c = b ? JSON.parse(b): {};
            return c[a]
        },
        setItem: function(a, b) {
            var c = Cookie.get(this._cookieKey), d = c ? JSON.parse(c): {};
            d[a] = b, Cookie.set(this._cookieKey, JSON.stringify(d))
        },
        removeItem: function(a) {
            var b = Cookie.get(this._cookieKey), c = b ? JSON.parse(b): {};
            delete c[a], Cookie.set(this._cookieKey, JSON.stringify(c))
        },
        clear: function() {
            Cookie.unset(this._cookieKey)
        }
    });
    var b = function() {};
    _.extend(b.prototype, {
        length: function() {
            return window.sessionStorage.length
        },
        key: function() {
            throw new Error("intentionally unimplemented function")
        },
        getItem: function(a) {
            var b = window.sessionStorage.getItem(a);
            return null != b ? JSON.parse(b) : null
        },
        setItem: function(a, b) {
            window.sessionStorage.setItem(a, JSON.stringify(b))
        },
        removeItem: function(a) {
            window.sessionStorage.removeItem(a)
        },
        clear: function() {
            window.sessionStorage.clear()
        }
    });
    var c = function() {};
    _.extend(c.prototype, {
        length: function() {
            return window.localStorage.length
        },
        key: function() {
            throw new Error("intentionally unimplemented function")
        },
        getItem: function(a) {
            var b = window.localStorage.getItem(a);
            return null != b ? JSON.parse(b) : b
        },
        setItem: function(a, b) {
            window.localStorage.setItem(a, JSON.stringify(b))
        },
        removeItem: function(a) {
            window.localStorage.removeItem(a)
        },
        clear: function() {
            window.localStorage.clear()
        }
    });
    var d = function(d) {
        var e;
        try {
            e = d ? window.sessionStorage : window.localStorage
        } catch (f) {
            e = null
        }
        var g = d ? P.CONST.COOKIE_SESSION_STORAGE: P.CONST.COOKIE_LOCAL_STORAGE, h=!1, i = e;
        if (i)
            try {
                i.setItem("testing", "test"), i.removeItem("testing")
        } catch (f) {
            if (f.code !== window.DOMException.QUOTA_EXCEEDED_ERR || 0 !== i.length)
                throw f;
            h=!0
        } else 
            h=!0;
        return h ? new a(g) : d ? new b : new c
    };
    P.SessionStorage = d(!0), P.LocalStorage = d(!1), Pc.TEST_MODE && (P.CookieBackedStorage = a, P.WindowSessionStorage = b, P.WindowLocalStorage = c, P.FakeStorage = function() {
        this.len = 0, this.storage = {}
    }, _.extend(P.FakeStorage.prototype, {
        length: function() {
            return this.length
        },
        key: function() {
            throw new Error("intentionally unimplemented function")
        },
        getItem: function(a) {
            return this.storage[a]
        },
        setItem: function(a, b) {
            this.storage[a] = b
        },
        removeItem: function(a) {
            delete this.storage[a]
        },
        clear: function() {
            this.storage.key = {}
        }
    }))
}(), function() {
    goog.provide("P.console"), function() {
        if (!window.console) {
            for (var a, b = function() {}, c = ["assert", "clear", "count", "debug", "dir", "dirxml", "error", "exception", "group", "groupCollapsed", "groupEnd", "info", "log", "markTimeline", "profile", "profileEnd", "table", "time", "timeEnd", "timeline", "timelineEnd", "timeStamp", "trace", "warn"], d = c.length, e = {}; d--;)
                a = c[d], e[a] || (e[a] = b);
            window.console = e
        }
    }()
}(), function() {
    goog.provide("P.logger"), goog.require("P.console"), goog.require("P.interfaces.ILogger");
    var a = function(a) {
        this.name = a;
        var b;
        if (P.DEBUG) {
            var c = P.LocalStorage.getItem(this._getStorageKey());
            null !== c && void 0 !== c && (b = parseInt(c, 10))
        }
        void 0 === b && (b = P.DEBUG ? P.interfaces.LOG_LEVEL.FINE : P.interfaces.LOG_LEVEL.NONE), this.setLogLevel(b)
    };
    _.extend(a.prototype, {
        finest: function() {
            var a = _.toArray(arguments);
            this._handleLog(P.interfaces.LOG_LEVEL.FINEST, null, a)
        },
        finer: function() {
            var a = _.toArray(arguments);
            this._handleLog(P.interfaces.LOG_LEVEL.FINER, null, a)
        },
        fine: function() {
            var a = _.toArray(arguments);
            this._handleLog(P.interfaces.LOG_LEVEL.FINE, null, a)
        },
        debug: function() {
            return this.fine.apply(this, arguments)
        },
        warn: function() {
            var a = _.toArray(arguments);
            this._handleLog(P.interfaces.LOG_LEVEL.WARN, P.interfaces.SERVER_LOG_TYPE.WARNING, a)
        },
        error: function() {
            var a = _.toArray(arguments);
            this._handleLog(P.interfaces.LOG_LEVEL.ERROR, P.interfaces.SERVER_LOG_TYPE.ERROR, a)
        },
        _handleLog: function(a, b, c) {
            if (this._printToConsole(a, c), null !== b) {
                var d = {
                    logger: this.name,
                    messages: c
                };
                this.logToServer(b, "post", d)
            }
        },
        setLogLevel: function(a) {
            this.logLevel = a, P.DEBUG && P.LocalStorage.setItem(this._getStorageKey(), a)
        },
        _getStorageKey: function() {
            return "logLevels." + this.name
        },
        _printToConsole: function(a, b) {
            var c = null;
            if (c = P && P.Module && P.Module.console ? P.Module.console : window.console, c&&!(this.logLevel > a)) {
                var d;
                a === P.interfaces.LOG_LEVEL.ERROR && c.error ? d = c.error : a === P.interfaces.LOG_LEVEL.WARN && c.warn ? d = c.warn : c.log && (d = c.log);
                var e = [this.name].concat(b);
                d && Function.prototype.apply.apply(d, [c, e])
            }
        },
        logToServer: function(a, b, c) {
            this._logToServer(a, b, c).fail(function(c, d, e) {
                var f = {
                    messages: ["Failed to log error!"],
                    logType: a,
                    method: b,
                    textStatus: d,
                    serverErrorText: e,
                    jqXhrStatus: c.status
                };
                this._logToServer(P.interfaces.SERVER_LOG_TYPE.ERROR, "post", f)
            }.bind(this))
        },
        _logToServer: function(a, b, c) {
            var d = "/_/_/report/" + a + "/", e = {
                app_version: P.AppVersion.currentVersion,
                current_url: window.location.href,
                app_invalid: P.AppVersion.isNewVersionRequired(),
                page_load_request_identifier: P.PAGE_LOAD_REQUEST_IDENTIFIER
            };
            P.state.activeTarget && (e.active_target = P.state.activeTarget.getFullName());
            var f, g = {
                report_context: JSON.stringify(e),
                report_data: JSON.stringify(c)
            };
            return f = "get" === b ? $.get(d, g) : $.post(d, g)
        }
    });
    var b = [], c = {};
    P.Logger = {
        getLogger: function(d) {
            var e = c[d];
            return e || (e = new a(d), c[d] = e, b.push(e)), e
        },
        getAll: function() {
            return b
        },
        getByName: function(a) {
            return c[a]
        }
    }, Pc.TEST_MODE && (P.Logger.clear = function() {
        b = [], c = {}
    })
}(), function() {
    goog.provide("P.contextLogger"), goog.require("P.logger");
    var a = P.Logger.getLogger("P.contextLogger"), b = function() {
        this._events = [], this._currentViewContext = null, this._logTimeout = null, $(window).on("beforeunload", function() {
            this.flushEvents(!0)
        }.bind(this))
    };
    b.FLUSH_INTERVAL_MS = 1e4, b.prototype.addEvent = function(c, d) {
        var e = c.getEventType();
        if (null !== e && void 0 !== e) {
            if (d && (this._lastLoggedEvent = d.originalEvent), c.getEventType() === P.ContextLogging.EventType.VIEW)
                this._currentViewContext = P.ContextEvent.fromPlainObject({}), this._currentViewContext.copyViewContext(c);
            else {
                if (!this._currentViewContext)
                    return;
                c.copyViewContext(this._currentViewContext);
                var f = P.ContextLogging.EventType.PIN_IMPRESSION_ONE_PIXEL;
                if (c.getEventType() === f) {
                    var g = _.last(this._events);
                    if (g && g.hasSameViewContext(c) && g.getEventType() === f)
                        return void g.appendPinImpressions(c.getPinImpressions())
                }
            }
            c.setTime(this._currentNs()), this._events.push(c), a.fine("addEvent", c), this._logTimeout || (this._logTimeout = P.setTimeout(this.flushEvents.bind(this), b.FLUSH_INTERVAL_MS))
        }
    }, b.prototype.clearContext = function() {
        this._currentViewContext = null
    }, b.prototype.eventLogged = function(a) {
        return this._lastLoggedEvent === a.originalEvent
    }, b.prototype.flushEvents = function(a) {
        if (this._events.length) {
            for (var b = [], c = 0; c < this._events.length; c++)
                b.push(this._events[c].toSerializable());
            this._reset();
            var d = P.resourceFactory.create("ContextLogResource", {
                events: b,
                report_time: this._currentNs()
            });
            d.callCreate({
                async: !a,
                showError: !1
            })
        }
    }, b.prototype._currentNs = function() {
        return 1e6 * Date.now()
    }, b.prototype._reset = function() {
        this._events = [], clearTimeout(this._logTimeout), this._logTimeout = null
    }, P.ContextLogger = {}, Pc.TEST_MODE && (P.ContextLogger = b);
    var c = null;
    P.ContextLogger.getInstance = function() {
        return c || (c = new b, P.pubsub.subscribe(P.CONST.PUBSUB_CHANNEL_CONTEXT_LOGGING, P.CONST.PUBSUB_TOPIC_CONTEXT_LOG_PLAIN_OBJECT, function(a, b, c) {
            if (P.ContextEvent.KEY_EVENT_TYPE in c) {
                var d = P.ContextEvent.fromPlainObject(c);
                P.ContextLogger.getInstance().addEvent(d)
            }
        })), c
    }
}(), goog.provide("P.ContextLogging"), P.ContextLogging = {}, goog.provide("P.ContextLogging.ViewType"), P.ContextLogging.ViewType = {
    ABOUT: 6,
    ANALYTICS_DOMAIN: 40,
    ANALYTICS_PROFILE: 39,
    ANDROID_WIDGET: 13,
    ANDROID_WIDGET_FEED: 26,
    BOARD: 5,
    BOARD_PICKER: 21,
    BOOKMARKLET: 12,
    BROWSER: 11,
    CAMERA: 15,
    CATEGORY_GRID: 19,
    CONVERSATION: 42,
    DEEP_LINKING: 20,
    DISCOVER: 22,
    EDUCATION: 23,
    EMAIL: 31,
    ERROR: 17,
    EXPLORE_FEED: 28,
    EXPLORE_PAGE: 27,
    FEED: 1,
    FEED_EDITOR: 25,
    FIND_FRIENDS: 30,
    FRIEND_INVITER: 8,
    FRIEND_MULTI_INVITER: 29,
    LOGIN: 9,
    NEWS: 18,
    ORIENTATION: 24,
    OTHER_EXTERNAL: 32,
    PIN: 3,
    PINPICKS: 44,
    REGISTRATION: 10,
    REPORT: 16,
    SEARCH: 2,
    SERVICE_ENTRY_SEO: 34,
    SERVICE_ENTRY_SOCIAL: 33,
    SETTINGS: 7,
    SPLASH: 14,
    STERLING_ADVERTISER: 36,
    STERLING_CAMPAIGN: 37,
    STERLING_CREATION_FLOW: 35,
    STERLING_PIN_PROMOTION: 38,
    STORIES: 41,
    USER: 4,
    VISUAL_SEARCH: 43
}, goog.provide("P.ContextLogging.ViewParameterType"), P.ContextLogging.ViewParameterType = {
    ABOUT_ABOUT: 77,
    ABOUT_BOOKMARKLET: 62,
    ABOUT_CAREERS: 79,
    ABOUT_COPYRIGHT: 84,
    ABOUT_ETIQUETTE: 76,
    ABOUT_GOODIES: 78,
    ABOUT_PRESS: 81,
    ABOUT_PRIVACY: 82,
    ABOUT_SUPPORT: 61,
    ABOUT_TEAM: 80,
    ABOUT_TERMS: 60,
    ABOUT_USE: 83,
    ACTIVITY_V2: 225,
    ANALYTICS_DOMAIN_ALL_TIME: 2315,
    ANALYTICS_DOMAIN_CLICKS: 2313,
    ANALYTICS_DOMAIN_IMPRESSIONS: 2311,
    ANALYTICS_DOMAIN_ORIGINAL_PINS: 2314,
    ANALYTICS_DOMAIN_REPINS: 2312,
    ANALYTICS_PROFILE_ALL_TIME: 2304,
    ANALYTICS_PROFILE_CLICKS: 2303,
    ANALYTICS_PROFILE_IMPRESSIONS: 2301,
    ANALYTICS_PROFILE_REPINS: 2302,
    BOARD_COLLABORATORS: 90,
    BOARD_CREATE: 87,
    BOARD_EDIT: 88,
    BOARD_EDIT_COLLABORATORS: 104,
    BOARD_FOLLOWERS: 54,
    BOARD_MAP: 122,
    BOARD_PLACE: 121,
    BOARD_SETTINGS: 55,
    CATEGORY_DISCOVER: 91,
    CONVERSATION_ADD_PIN: 204,
    CONVERSATION_CREATE: 201,
    CONVERSATION_INBOX: 203,
    CONVERSATION_THREAD: 202,
    CONVERSATION_USERS: 205,
    DEEP_LINKING_APP: 115,
    DEEP_LINKING_FACEBOOK: 114,
    DEPRECATED_DEEP_LINKING_EMAIL: 112,
    DEPRECATED_DEEP_LINKING_WEB: 113,
    DISCOVER_CATEGORY: 137,
    DISCOVER_INTEREST: 138,
    DISCOVER_SEARCH_INTERESTS: 185,
    EDUCATION_CONTEXTUAL_MENU: 108,
    EDUCATION_FLYOUT: 221,
    EDUCATION_GUIDED_SEARCH: 184,
    EDUCATION_LONGPRESS: 94,
    EDUCATION_RELATED_PINS: 101,
    EDUCATION_SECRET_BOARD: 95,
    EMAIL_ACTIVITY_AGGREGATION: 2003,
    EMAIL_ANSWER_CREATE: 2019,
    EMAIL_ANSWER_LIKE: 2021,
    EMAIL_BOARD_RECOMMENDATIONS: 2011,
    EMAIL_COMMENT_AND_MENTION: 2013,
    EMAIL_EDITORIAL: 2002,
    EMAIL_FIREHOSE_ANSWER_CREATE: 2016,
    EMAIL_FIREHOSE_QUESTION_CREATE: 2015,
    EMAIL_FIREHOSE_REPLY_CREATE: 2017,
    EMAIL_FRIEND_JOINED: 2009,
    EMAIL_HOMEFEED_NEW_PINS: 2025,
    EMAIL_INTEREST_RECOMMENDATIONS: 2024,
    EMAIL_PARTNER: 2023,
    EMAIL_PIN_RECOMMENDATIONS: 2012,
    EMAIL_QUESTION_CREATE: 2018,
    EMAIL_QUESTION_LIKE: 2020,
    EMAIL_RECOMMENDATIONS_DIGEST: 2004,
    EMAIL_REPLY_CREATE: 2022,
    EMAIL_SEND_BOARD: 2007,
    EMAIL_SEND_PIN: 2006,
    EMAIL_SEND_PINNER: 2008,
    EMAIL_SOCIAL_DIGEST: 2005,
    EMAIL_TRANSACTIONAL: 2001,
    EMAIL_UNKNOWN: 2e3,
    EMAIL_USECASES: 2014,
    EMAIL_WELCOME: 2010,
    ERROR_NO_ACTIVITY: 70,
    ERROR_NO_BOARD: 68,
    ERROR_NO_INTERNET: 66,
    ERROR_NO_PIN: 67,
    ERROR_NO_USER: 69,
    EXTERNAL_SOURCE_OTHER: 1900,
    FEED_CATEGORY_ANIMALS: 5,
    FEED_CATEGORY_ARCHITECTURE: 6,
    FEED_CATEGORY_ART: 7,
    FEED_CATEGORY_CARS_MOTORCYCLES: 8,
    FEED_CATEGORY_CELEBRITIES: 9,
    FEED_CATEGORY_CHRISTMAS_SWEATER: 130,
    FEED_CATEGORY_DESIGN: 10,
    FEED_CATEGORY_DIY_CRAFTS: 11,
    FEED_CATEGORY_EDUCATION: 12,
    FEED_CATEGORY_FILM_MUSIC_BOOKS: 13,
    FEED_CATEGORY_FOOD_DRINK: 14,
    FEED_CATEGORY_GARDENING: 15,
    FEED_CATEGORY_GEEK: 16,
    FEED_CATEGORY_HAIR_BEAUTY: 17,
    FEED_CATEGORY_HEALTH_FITNESS: 18,
    FEED_CATEGORY_HISTORY: 19,
    FEED_CATEGORY_HOLIDAYS_EVENTS: 20,
    FEED_CATEGORY_HOLIDAY_FOR_ALL: 127,
    FEED_CATEGORY_HOLIDAY_FOR_HER: 125,
    FEED_CATEGORY_HOLIDAY_FOR_HIM: 124,
    FEED_CATEGORY_HOLIDAY_FOR_KIDS: 126,
    FEED_CATEGORY_HOME_DECOR: 21,
    FEED_CATEGORY_HUMOR: 22,
    FEED_CATEGORY_ILLUSTRATIONS_POSTERS: 23,
    FEED_CATEGORY_KIDS: 24,
    FEED_CATEGORY_MENS_FASHION: 25,
    FEED_CATEGORY_OUTDOORS: 26,
    FEED_CATEGORY_PHOTOGRAPHY: 27,
    FEED_CATEGORY_PRODUCTS: 28,
    FEED_CATEGORY_QUOTES: 29,
    FEED_CATEGORY_SCIENCE_NATURE: 30,
    FEED_CATEGORY_SPORTS: 31,
    FEED_CATEGORY_TATTOOS: 32,
    FEED_CATEGORY_TECHNOLOGY: 33,
    FEED_CATEGORY_TRAVEL: 34,
    FEED_CATEGORY_WEDDINGS: 35,
    FEED_CATEGORY_WOMENS_FASHION: 36,
    FEED_DIGEST: 207,
    FEED_DOMAIN: 129,
    FEED_EDITOR_FOLLOW_BOARDS: 109,
    FEED_EDITOR_UNFOLLOW_BOARDS: 110,
    FEED_EVERYTHING: 2,
    FEED_FOLLOWING: 0,
    FEED_FRIENDS: 1,
    FEED_GIFTS: 85,
    FEED_GIFTS_100_200: 40,
    FEED_GIFTS_20: 37,
    FEED_GIFTS_200_500: 41,
    FEED_GIFTS_20_50: 38,
    FEED_GIFTS_500: 42,
    FEED_GIFTS_50_100: 39,
    FEED_HOME: 92,
    FEED_INTEREST: 136,
    FEED_PLACES: 200,
    FEED_POPULAR: 3,
    FEED_RELATED_BOARD: 116,
    FEED_RELATED_INTEREST: 117,
    FEED_SOURCE: 4,
    FEED_SUBCATEGORY: 120,
    FEED_TOP_PICKS: 111,
    FEED_VIDEOS: 128,
    FEED_WELCOME: 118,
    FIND_FRIENDS: 135,
    FRIEND_INVITER_EMAIL: 56,
    FRIEND_INVITER_FACEBOOK: 57,
    FRIEND_INVITER_FIND_FRIENDS: 131,
    FRIEND_INVITER_GMAIL: 58,
    FRIEND_INVITER_INVITE: 132,
    FRIEND_INVITER_TWITTER: 133,
    FRIEND_INVITER_YAHOO: 59,
    LOGIN_EMAIL: 63,
    LOGIN_FACEBOOK: 64,
    LOGIN_TWITTER: 65,
    MOBILE_ORIENTATION_COLLECT: 97,
    MOBILE_ORIENTATION_DISCOVER: 96,
    MOBILE_ORIENTATION_FUNCTIONAL: 98,
    MOBILE_ORIENTATION_STORY: 99,
    NEWS_NETWORK_STORY: 210,
    NEWS_YOUR_STORY: 211,
    ORIENTATION_END: 171,
    ORIENTATION_FAST_FOLLOW: 102,
    ORIENTATION_INTEREST_PICKER: 172,
    ORIENTATION_START: 170,
    ORIENTATION_USER_PICKER: 173,
    PICKED_FOR_YOU_FEED: 106,
    PIN_ANSWERS: 187,
    PIN_ARTICLE: 141,
    PIN_COMMENTS: 152,
    PIN_CREATE: 73,
    PIN_CREATE_PINMARKLET: 119,
    PIN_CREATE_PLACES: 150,
    PIN_CREATE_REPIN: 72,
    PIN_CREATE_SDK: 100,
    PIN_EDIT: 89,
    PIN_LIKES: 151,
    PIN_LOOKBOOK: 146,
    PIN_MOVIE: 142,
    PIN_OTHER: 139,
    PIN_PLACE: 143,
    PIN_PRODUCT: 144,
    PIN_QUESTIONS: 186,
    PIN_RECIPE: 145,
    PIN_REGULAR: 140,
    PIN_REPIN_BOARDS: 153,
    PIN_REPLIES: 188,
    PIN_SEND_TO: 105,
    PIN_TWINS: 224,
    REBUILD_FEED_END: 223,
    REBUILD_FEED_INTEREST_PICKER: 222,
    REGISTRATION_BOARDS: 48,
    REGISTRATION_LANDING: 46,
    REGISTRATION_SIGNUP: 47,
    REGISTRATION_SIGNUP_BUSINESS: 300,
    REPORT_PIN: 71,
    REPORT_USER: 86,
    SEARCH_AUTOCOMPLETE: 103,
    SEARCH_BOARDS: 44,
    SEARCH_INTERESTS: 182,
    SEARCH_MY_PINS: 107,
    SEARCH_PINS: 43,
    SEARCH_PLACES: 123,
    SEARCH_PLACE_BOARDS: 181,
    SEARCH_USERS: 45,
    SERVICE_ENTRY_SEO_BING: 2112,
    SERVICE_ENTRY_SEO_GOOGLE: 2110,
    SERVICE_ENTRY_SEO_YAHOO: 2111,
    SERVICE_ENTRY_SOCIAL_FACEBOOK: 2101,
    SERVICE_ENTRY_SOCIAL_TWITTER: 2102,
    SPLASH_INSPIRED_WALL: 161,
    SPLASH_LOADING: 160,
    STERLING_ADVERTISER_DASHBOARD: 2208,
    STERLING_ADVERTISER_EDIT: 2209,
    STERLING_ADVERTISER_EDIT_BILLING: 2211,
    STERLING_ADVERTISER_SEARCH: 2210,
    STERLING_CAMPAIGN_DASHBOARD: 2206,
    STERLING_CAMPAIGN_EDIT: 2207,
    STERLING_CREATION_FLOW_BILLING: 2203,
    STERLING_CREATION_FLOW_PICK_A_PIN: 2201,
    STERLING_CREATION_FLOW_SETUP_DETAILS: 2202,
    STERLING_PIN_PROMOTION_DASHBOARD: 2204,
    STERLING_PIN_PROMOTION_EDIT: 2205,
    STORIES_RELATED_BOARDS: 192,
    STORIES_RELATED_PINS: 190,
    STORIES_RELATED_USERS: 191,
    USER_ABOUT: 75,
    USER_ACTIVITY: 53,
    USER_BOARDS: 49,
    USER_EDIT: 93,
    USER_FOLLOWERS: 50,
    USER_FOLLOWING: 51,
    USER_FYP: 189,
    USER_INTERESTS: 183,
    USER_LIKES: 52,
    USER_PINS: 74
}, goog.provide("P.ContextLogging.ComponentType"), P.ContextLogging.ComponentType = {
    BOARD_PINS_GRID: 29,
    BROWSER: 17,
    BULK_INVITE: 37,
    CATEGORIES_CAROUSEL: 42,
    CONTEXTUAL_MENU: 18,
    CONTEXTUAL_USER_EDUCATION: 52,
    CONVERSATION_MESSAGES: 55,
    DIGEST_STORY: 63,
    DISCOVER_FEATURED_CAROUSEL: 49,
    DOMAIN: 30,
    EDUCATION: 14,
    FLOWED_BOARD: 1,
    FLOWED_CATEGORY: 11,
    FLOWED_PIN: 0,
    HOMEFEED_INVITE_MODULE: 24,
    INTEREST_CAROUSEL: 40,
    INTEREST_GRID: 36,
    INTEREST_PICKER: 66,
    INTEREST_RELATED_CAROUSEL: 41,
    LIST_HEADER: 27,
    LOOKBOOK_ACTION_BAR: 65,
    LOOKBOOK_FRAME: 64,
    MAP: 26,
    MODAL_ADD_PIN: 7,
    MODAL_CREATE_BOARD: 12,
    MODAL_DIALOG: 9,
    MODAL_PIN: 4,
    MODAL_POST_REPIN: 6,
    MODAL_REPIN: 5,
    NAG: 19,
    NAG_CLIPBOARD_URL: 53,
    NAVIGATION: 8,
    NEWS_FEED: 3,
    NOTIFICATIONS_CONVERSATIONS_DROPDOWN: 54,
    ORIENTATION: 16,
    PINNER_CAROUSEL: 50,
    PIN_FEEDBACK_DIALOG_PFY: 58,
    PIN_FEEDBACK_DIALOG_PFY_REASON: 59,
    PIN_FEEDBACK_DIALOG_PROMOTED: 60,
    PIN_FEEDBACK_DIALOG_PROMOTED_REASON: 61,
    PIN_FEEDBACK_PIN_CELL_HIDDEN_NO_REASON: 62,
    REGISTRATION: 15,
    RELATED_BOARDS: 31,
    RELATED_INTERESTS: 39,
    SAFARI_KEYCHAIN_USE_PROMPT: 67,
    SEARCH_BOX: 43,
    SEARCH_GUIDES_CONTAINER: 47,
    SEARCH_INTEREST_RESULTS_GRID: 44,
    SEARCH_RELATED_CATEGORIES: 33,
    SEARCH_RELATED_QUERIES: 32,
    SEGMENTED_CONTROL: 51,
    SEND_OBJECT: 56,
    SHEET: 13,
    STORIES_FEED: 48,
    SUGGESTED_USERS: 2,
    TOAST: 20,
    TRENDING_CATEGORIES: 25,
    TYPEAHEAD_SUGGESTIONS: 35,
    USER_EDUCATION_DROPDOWN: 57,
    USER_FEED: 10,
    USER_MENU_DROPDOWN: 46,
    USER_NEWS: 38,
    USER_REPINS_FROM: 28,
    USER_SELECT_SEARCH_BOX: 34,
    VISUAL_SEARCH_GRID: 45,
    WIDGET_ACTION_BAR: 21,
    WIDGET_FOOTER: 23,
    WIDGET_HEADER: 22
}, goog.provide("P.ContextLogging.ElementType"), P.ContextLogging.ElementType = {
    ADD_INTEREST_BUTTON: 229,
    ADD_MESSAGE_BUTTON: 99,
    ADD_PIN_FROM_WEBSITE_BUTTON: 250,
    ADD_PLACE_BUTTON: 165,
    ANALYTICS_BUTTON: 24,
    APP_ICON: 137,
    APP_RATING_ATTEMPT_BUTTON: 205,
    APP_RATING_DECLINE_BUTTON: 206,
    APP_RATING_REMIND_BUTTON: 207,
    AUTOCOMPLETE_SUGGESTION: 104,
    BACK_BUTTON: 34,
    BOARD_CATEGORY: 51,
    BOARD_COVER: 36,
    BOARD_CREATE: 22,
    BOARD_CREATE_SECRET: 90,
    BOARD_CREATE_SUGGESTED: 23,
    BOARD_DELETE_BUTTON: 50,
    BOARD_DESCRIPTION: 93,
    BOARD_EDIT_BUTTON: 81,
    BOARD_FOLLOW: 37,
    BOARD_LEAVE_BUTTON: 97,
    BOARD_NAME: 52,
    BOARD_PICKER: 67,
    BOARD_RELATED_BOARD: 180,
    BOARD_SECRET: 53,
    BROWSER_BUTTON: 79,
    BROWSER_WEB_IMAGE: 109,
    BULK_INVITER_BUTTON: 215,
    BUY_BUTTON: 201,
    CAMERA_BUTTON: 54,
    CANCEL_BUTTON: 73,
    CATEGORY_ICON: 38,
    CATEGORY_RECENT: 127,
    CHANGE_PASSWORD_BUTTON: 128,
    CLEAR_CONTACTS_BUTTON: 115,
    CLEAR_HISTORY_BUTTON: 102,
    CLEAR_SEARCHES_BUTTON: 114,
    CLIPBOARD_BUTTON: 101,
    CLOSE_BUTTON: 75,
    COLLABORATOR_TEXT: 171,
    COMPOSE_SMS_INVITE_BUTTON: 210,
    CONVERSATION_CREATE_BUTTON: 276,
    CONVERSATION_INBOX_BUTTON: 278,
    CONVERSATION_LIST_ITEM: 277,
    CONVERSATION_NEW_BUTTON: 275,
    COPY_LINK_BUTTON: 100,
    COUNTRY_BUTTON: 124,
    CREATE_BOARD_BUTTON: 249,
    CREATE_BUTTON: 44,
    DECLINE_BUTTON: 86,
    DIGEST_PIN: 296,
    DISCOVER_FEATURED_ITEM: 265,
    DISCOVER_TRENDING_CATEGORY: 153,
    DOMAIN_URL: 177,
    DONE_BUTTON: 76,
    DUPLICATE_PIN_WARNING: 120,
    EDIT_HOME_FEED_BUTTON: 117,
    EDUCATION_GUIDED_SEARCH_COMPLETE_BUTTON: 232,
    EDUCATION_GUIDED_SEARCH_SUGGESTION: 231,
    EDUCATION_TARGET: 95,
    EMAIL_BUTTON: 123,
    EXPLORE_BUTTON: 78,
    FACEBOOK_CONNECT: 68,
    FACEBOOK_INVITE_BUTTON: 202,
    FACEBOOK_TIMELINE_CONNECT: 21,
    FEED_SUBCATEGORY: 152,
    FINDFRIENDS_BUTTON: 58,
    FIND_FRIENDS_BUTTON: 248,
    FIND_IMAGES_BUTTON: 56,
    FIND_MORE_BOARDS_BUTTON: 105,
    FLOWED_INTEREST: 211,
    FOLLOWERS_BUTTON: 42,
    FOLLOWING_BOARDS_BUTTON: 268,
    FOLLOWING_BUTTON: 41,
    FOLLOWING_INTERESTS_BUTTON: 266,
    FOLLOWING_PINNERS_BUTTON: 267,
    FOLLOW_ALL_USERS_BUTTON: 20,
    FOLLOW_BOARDS_BUTTON: 118,
    GALLERY_BUTTON: 55,
    GENDER_BUTTON: 241,
    GET_STARTED_BUTTON: 106,
    GPLUS_CONNECT: 208,
    GPLUS_INVITE_BUTTON: 203,
    HELP_BUTTON: 271,
    HELP_CENTER_BUTTON: 281,
    HELP_FLYOUT_BUTTON: 299,
    HELP_PULSE: 270,
    INSTALL_EXTENSION_BUTTON: 280,
    INTEREST_SUGGESTION: 260,
    INVITE_ALL_TOGGLE: 173,
    INVITE_BUTTON: 59,
    INVITE_DELETE_BUTTON: 150,
    LANGUAGE_BUTTON: 240,
    LIKES_BUTTON: 175,
    LINK_OUT_BUTTON: 144,
    LOCATION_BUTTON: 159,
    LOGIN_BUTTON: 30,
    LOGO: 178,
    LOGOUT_BUTTON: 19,
    LOOKBOOK_PROFILE_IMAGE: 298,
    LOOKBOOK_TAG: 297,
    MAP_ADD_BUTTON: 157,
    MAP_ANNOTATION: 154,
    MAP_DIRECTIONS_BUTTON: 156,
    MAP_PIN_ICON: 164,
    MAP_SEE_ON_MAP_BUTTON: 155,
    MAP_TOGGLE_BUTTON: 170,
    MENU_BUTTON: 74,
    MORE_INFO_BUTTON: 245,
    MORE_PINS_BUTTON: 141,
    NAME_BUTTON: 136,
    NAVIGATION_DISCOVER_BUTTON: 147,
    NAVIGATION_HOME_BUTTON: 146,
    NAVIGATION_LOGO_BUTTON: 244,
    NEWS_BUTTON: 77,
    NEWS_FEED_ACTOR_IMAGE: 273,
    NEWS_FEED_ACTOR_LABEL: 274,
    NEWS_FEED_ANSWER: 219,
    NEWS_FEED_BOARD: 39,
    NEWS_FEED_PIN: 15,
    NEWS_FEED_QUESTION: 218,
    NEWS_FEED_REPLY: 252,
    NEWS_FEED_USER: 16,
    NEXT_BUTTON: 96,
    NOTIFICATIONS_ICON: 139,
    PERSONALIZED_RECOMMENDATIONS_BUTTON: 242,
    PFY_REASON_BUTTON: 145,
    PHONE_BUTTON: 161,
    PHOTOS_BUTTON: 149,
    PIN_ATTRIBUTION: 27,
    PIN_BOARD: 5,
    PIN_BOARD_FOLLOW: 6,
    PIN_BOARD_PIN: 7,
    PIN_CAPTION_COMMENT: 4,
    PIN_CELL_BUTTON_PFY_PIN_SOURCE: 282,
    PIN_CELL_BUTTON_PROMOTED_PIN_SOURCE: 283,
    PIN_COMMENT_BUTTON: 2,
    PIN_DELETE_BUTTON: 49,
    PIN_DESCRIPTION: 116,
    PIN_DOMAIN: 25,
    PIN_EDIT_BUTTON: 3,
    PIN_FEEDBACK_BUTTON_PFY: 284,
    PIN_FEEDBACK_BUTTON_PROMOTED: 285,
    PIN_FEEDBACK_BUTTON_STATE_REASON_PFY: 286,
    PIN_FEEDBACK_BUTTON_STATE_REASON_PROMOTED: 287,
    PIN_FEEDBACK_DIALOG_BUTTON_DISMISS: 292,
    PIN_FEEDBACK_DIALOG_BUTTON_HIDE_PIN_PFY: 288,
    PIN_FEEDBACK_DIALOG_BUTTON_HIDE_PIN_PROMOTED: 291,
    PIN_FEEDBACK_DIALOG_BUTTON_LEARN_MORE_PROMOTED: 290,
    PIN_FEEDBACK_DIALOG_BUTTON_PFY_STOP_RECS_FROM_THROUGH_BOARD: 289,
    PIN_FEEDBACK_REASON_BUTTON_NOT_INTERESTED: 293,
    PIN_FEEDBACK_REASON_BUTTON_OFFENSIVE: 294,
    PIN_FEEDBACK_REASON_BUTTON_SEEN_BEFORE: 295,
    PIN_FLAG_BUTTON: 176,
    PIN_INTEREST: 255,
    PIN_LIKER: 28,
    PIN_LIKE_BUTTON: 1,
    PIN_ORIGINAL_BOARD: 8,
    PIN_ORIGINAL_BOARD_FOLLOW: 9,
    PIN_ORIGINAL_BOARD_PIN: 10,
    PIN_PINNED_TO: 29,
    PIN_PROMOTED_INFO: 142,
    PIN_READING_LIST_BUTTON: 259,
    PIN_RELATED_PIN: 148,
    PIN_REPIN_BUTTON: 0,
    PIN_REPORT_BUTTON: 47,
    PIN_RICH_PIN_ACTION_BUTTON: 110,
    PIN_SAVE_BUTTON: 48,
    PIN_SEND_BUTTON: 98,
    PIN_SHARE: 46,
    PIN_SHARE_BUTTON: 72,
    PIN_SHARE_EMAIL_BUTTON: 258,
    PIN_SHARE_FACEBOOK_BUTTON: 257,
    PIN_SHARE_TWITTER_BUTTON: 256,
    PIN_SOURCE_IMAGE: 35,
    PIN_SUBMIT: 70,
    PIN_UPLOAD_BUTTON: 18,
    PIN_USER: 26,
    PIN_VIA: 12,
    PIN_VIA_PIN: 11,
    PLACES_BUTTON: 158,
    PLACES_LIST_PLACE: 160,
    PLACE_IMAGE: 163,
    PLACE_PICKER_CREATE: 166,
    PLACE_PICKER_IMAGE: 167,
    PROFILE_BUTTON: 40,
    PROFILE_FACEBOOK: 65,
    PROFILE_IMAGE: 63,
    PROFILE_TWITTER: 66,
    PROFILE_URL: 64,
    PROMOTED_OK_BUTTON: 143,
    PUSH_NOTIFICATIONS_BUTTON: 125,
    RAKUTEN_CONNECT: 151,
    RECENT_SEARCH_SUGGESTION: 253,
    REFRESH_BUTTON: 45,
    RELATED_INTEREST: 216,
    RELATED_RICH_PIN_BUTTON: 214,
    REMOVE_BUTTON: 107,
    REMOVE_PLACE_BUTTON: 168,
    REMOVE_SUGGESTED_USER_BUTTON: 14,
    REPINS_BUTTON: 174,
    REPIN_ADD_PLACE_BUTTON: 212,
    REPIN_EDIT_PLACE_BUTTON: 213,
    REPIN_SUGGESTED_BOARD: 17,
    RESET_BUTTON: 33,
    RETRY_BUTTON: 32,
    RIBBON_BUTTON: 131,
    SAFARI_KEYCHAIN_NOT_NOW_BUTTON: 311,
    SAFARI_KEYCHAIN_USE_PASSWORD_BUTTON: 310,
    SAVE_USER_SETTINGS_BUTTON: 130,
    SEARCH_ALL_WITH_QUERY: 254,
    SEARCH_BOARDS_BUTTON: 221,
    SEARCH_BOX_ADD_TOKEN_BUTTON: 228,
    SEARCH_BOX_TEXT_INPUT: 227,
    SEARCH_BUTTON: 43,
    SEARCH_GUIDE_SUGGESTION: 226,
    SEARCH_MY_PINS_BUTTON: 223,
    SEARCH_PINNERS_BUTTON: 222,
    SEARCH_PINS_BUTTON: 220,
    SEARCH_PLACES_BUTTON: 224,
    SEARCH_PRIVACY_BUTTON: 243,
    SEARCH_RELATED_CATEGORY: 192,
    SEARCH_RELATED_QUERY: 191,
    SEARCH_TOKEN: 225,
    SEE_MORE_BUTTON: 179,
    SEE_OTHER_PINS_BUTTON: 140,
    SEND_BUTTON: 103,
    SEND_INVITE_BUTTON: 172,
    SEND_SMS_INVITE_BUTTON: 209,
    SEND_SOCIAL_BUTTON: 300,
    SEND_TO_PINNER_BUTTON: 204,
    SETTINGS_BUTTON: 57,
    SHARE_SOCIAL_BUTTON: 301,
    SHOW_PASSWORD_BUTTON: 129,
    SIGNUP_BUTTON: 31,
    SINGLE_PIN_POPOVER: 217,
    STORIES_FEED_ACTOR: 263,
    STORIES_FEED_ACTOR_IMAGE: 272,
    STORIES_FEED_LARGE_STORY: 261,
    STORIES_FEED_RELATED_MORE_CELL: 269,
    STORIES_FEED_RELATED_OBJECT: 264,
    STORIES_FEED_SMALL_STORY: 262,
    SUGGESTED_EMAIL: 121,
    SUGGESTED_USER: 13,
    SUGGEST_INTEREST_BUTTON: 230,
    SUPPORT_BUTTON: 60,
    TOS_BUTTON: 61,
    TWITTER_CONNECT: 69,
    UNDO_BUTTON: 113,
    UNFOLLOW_BOARDS_BUTTON: 119,
    UPDATE_BUTTON: 126,
    UPLOAD_PIN_BUTTON: 251,
    USERNAME_BUTTON: 122,
    USER_ABOUT_BUTTON: 85,
    USER_ABOUT_EDIT_BUTTON: 91,
    USER_BLOCK_BUTTON: 87,
    USER_BOARDS_BUTTON: 84,
    USER_EDIT_BUTTON: 94,
    USER_FEED_FOLLOW: 71,
    USER_FEED_INVITE_CUSTOM_EMAIL: 135,
    USER_FEED_INVITE_EMAIL: 133,
    USER_FEED_INVITE_SMS: 134,
    USER_FLAG_BUTTON: 80,
    USER_FOLLOW: 62,
    USER_ICON: 138,
    USER_LIKES_BUTTON: 82,
    USER_LIST_CONTACT: 132,
    USER_LIST_USER: 112,
    USER_PINS_BUTTON: 83,
    USER_RECENT_CONTACT: 111,
    USER_REPORT_BUTTON: 89,
    USER_UNBLOCK_BUTTON: 88,
    USER_URL_EDIT_BUTTON: 92,
    VISUAL_OBJECT_BUTTON: 233,
    VISUAL_SEARCH_BUTTON: 234,
    WEBSITE_BUTTON: 162,
    WHO_CAN_PIN_BUTTON: 108,
    YOUR_PROFILE_BUTTON: 246,
    YOUR_SETTINGS_BUTTON: 247
}, goog.provide("P.ContextLogging.EventType"), P.ContextLogging.EventType = {
    ADDRESS_BOOK_UPLOAD: 1800,
    ADVERTISER_CREATE: 2004,
    ADVERTISER_UPDATE: 2005,
    ANDROID_REQUEST: 1001,
    ANDROID_WIDGET_DISABLE: 401,
    ANDROID_WIDGET_ENABLE: 400,
    ANDROID_WIDGET_UPDATE: 402,
    ANSWER_CREATE: 240,
    ANSWER_DELETE: 243,
    ANSWER_EDIT: 242,
    ANSWER_LIKE: 244,
    ANSWER_REPORT: 246,
    ANSWER_UNLIKE: 245,
    ANSWER_VIEW: 241,
    API_PAGEVIEW: 100,
    APP_BACKGROUND: 422,
    APP_INSTALL: 1008,
    APP_START: 406,
    APP_TIMING: 404,
    BOARD_ACCEPT_INVITE_COLLABORATOR: 32,
    BOARD_ADD_COLLABORATOR: 24,
    BOARD_CREATE: 20,
    BOARD_DECLINE_INVITE_COLLABORATOR: 29,
    BOARD_DELETE: 22,
    BOARD_EDIT: 21,
    BOARD_FOLLOW: 26,
    BOARD_INVITE_COLLABORATOR: 28,
    BOARD_REMOVE_COLLABORATOR: 25,
    BOARD_REORDER_PINS: 36,
    BOARD_REQUEST_APPROVAL_INVITE_COLLABORATOR: 34,
    BOARD_REQUEST_INVITE_COLLABORATOR: 33,
    BOARD_SEND: 35,
    BOARD_SET_PRIVATE: 30,
    BOARD_SET_PUBLIC: 31,
    BOARD_UNFOLLOW: 27,
    BOARD_VIEW: 23,
    BROWSER: 83,
    BULK_PIN_DELETE: 900,
    BULK_PIN_MOVE: 901,
    BULK_PIN_REPIN: 902,
    CAMPAIGN_CREATE: 2002,
    CAMPAIGN_UPDATE: 2003,
    CLICK: 101,
    CLIENT_NOTIFICATION_OPENED_BY: 511,
    CLIENT_NOTIFICATION_RECEIVED_BY: 510,
    CONTEXTUAL_MENU_CLOSE: 119,
    CONTEXTUAL_MENU_OPEN: 118,
    CONVERSATION_CREATE: 181,
    CONVERSATION_HIDE: 182,
    CONVERSATION_MESSAGE_SEND: 180,
    CONVERSATION_REPORT: 183,
    CONVERSATION_UPGRADE_EXTERNAL_USER: 184,
    DEEP_LINK_HTTP: 701,
    DEEP_LINK_OTHER: 702,
    DEEP_LINK_PINTEREST: 700,
    DEVICE_START: 405,
    DOMAIN_VERIFIED: 200,
    DRAG: 104,
    EMAIL_CLICKTHROUGH_DEPRECATED: 800,
    EMAIL_CLICK_API_DEPRECATED: 74,
    EMAIL_CLICK_DEPRECATED: 73,
    EMAIL_OPEN_API_DEPRECATED: 72,
    EMAIL_OPEN_DEPRECATED: 71,
    EMAIL_RECEIVE: 70,
    EMAIL_SUBSCRIBE_SETTINGS_CHANGE: 502,
    EMAIL_UNSUBSCRIBE_SETTINGS_CHANGE: 503,
    EXPLAIN_CREATE: 260,
    EXPLAIN_DELETE: 263,
    EXPLAIN_EDIT: 262,
    EXPLAIN_VIEW: 261,
    FEED_SUBCATEGORY: 69,
    FEED_VIEW: 80,
    GOT_BOARD_FOLLOW: 1104,
    GOT_BOARD_INVITE_COLLABORATOR: 1105,
    GOT_PIN_COMMENT: 1101,
    GOT_PIN_LIKE: 1103,
    GOT_PIN_REPIN: 1102,
    GOT_PIN_VIEW: 1100,
    GOT_USER_FOLLOW: 1106,
    HOVER: 105,
    INTEREST_FOLLOW: 601,
    INTEREST_IMPRESSION_SERVER_SIDE: 600,
    INTEREST_PIN_DOWNVOTE: 606,
    INTEREST_PIN_UPVOTE: 605,
    INTEREST_REMOVE: 603,
    INTEREST_UNFOLLOW: 602,
    INTEREST_UNREMOVE: 604,
    INTERSTITIAL_LOADED: 1700,
    INTERSTITIAL_OPEN_IN_APP: 1701,
    INTERSTITIAL_OPEN_IN_BROWSER: 1702,
    IPAD_REQUEST: 1002,
    IPHONE_REQUEST: 1003,
    IPOD_REQUEST: 1004,
    LINK_EXTRACT: 251,
    LONG_PRESS: 103,
    MAC_REQUEST: 1005,
    MOBILE_BADGE_RECEIEVED: 420,
    MOBILE_BADGE_SHOWN: 421,
    NOTIFICATION: 1500,
    NOTIFICATION_SUBSCRIBE_SETTINGS_CHANGE: 500,
    NOTIFICATION_UNSUBSCRIBE_SETTINGS_CHANGE: 501,
    OTHER_REQUEST: 1007,
    OWN_BOARD_VIEW: 2101,
    OWN_PIN_CLICK: 2103,
    OWN_PIN_VIEW: 2102,
    OWN_PROFILE_VIEW: 2100,
    PAGEVIEW: 0,
    PAYMENT_METHOD_CREATE: 312,
    PAYMENT_METHOD_DELETE: 317,
    PAYMENT_METHOD_UPDATE: 316,
    PAYMENT_METHOD_VIEW: 313,
    PINCH: 109,
    PIN_CLICKTHROUGH: 12,
    PIN_CLOSEUP: 16,
    PIN_COMMENT: 7,
    PIN_COMMENT_FLAG: 76,
    PIN_CREATE: 1,
    PIN_DEACTIVATE: 133,
    PIN_DELETE: 3,
    PIN_DELETE_COMMENT: 10,
    PIN_EDIT: 2,
    PIN_FEEDBACK: 135,
    PIN_FLAG: 11,
    PIN_HIDE: 17,
    PIN_IMPRESSION_ONE_PIXEL: 18,
    PIN_IMPRESSION_SERVER_SIDE: 19,
    PIN_INSERTION: 15,
    PIN_INSERT_TO_HOME_FEED: 1401,
    PIN_INSERT_TO_INTEREST_FEED: 1402,
    PIN_INSERT_TO_PUBLIC_FEED: 1400,
    PIN_LIKE: 6,
    PIN_LONG_CLICKTHROUGH: 1600,
    PIN_PROMOTION_CREATE: 2e3,
    PIN_PROMOTION_UPDATE: 2001,
    PIN_REACTIVATE: 134,
    PIN_REPIN: 5,
    PIN_REPORT: 59,
    PIN_SAVE_TO_DEVICE: 82,
    PIN_SEND: 14,
    PIN_SHARE: 8,
    PIN_SHARE_FACEBOOK: 1300,
    PIN_SHORT_CLICKTHROUGH: 1601,
    PIN_UNLIKE: 9,
    PIN_UPVOTE: 130,
    PIN_VIEW: 4,
    PIN_VIEW_ON_HOME_FEED: 1403,
    PLACE_CREATE: 1200,
    PROMOTED_PIN_FLAG: 131,
    PROMOTED_PIN_HIDE: 132,
    PULL_NOTIFICATION_OPENED_BY: 408,
    PULL_NOTIFICATION_RECEIVED_BY: 407,
    PULL_TO_REFRESH: 158,
    PUSH_NOTIFICATION_DEVICE_ASSOCIATED: 114,
    PUSH_NOTIFICATION_DEVICE_DISABLED: 117,
    PUSH_NOTIFICATION_DEVICE_DISASSOCIATED: 115,
    PUSH_NOTIFICATION_DEVICE_ENABLED: 116,
    PUSH_NOTIFICATION_OPENED_BY: 113,
    PUSH_NOTIFICATION_RECEIVED_BY: 112,
    PUSH_NOTIFICATION_REGISTRATION_FAILED: 121,
    PUSH_NOTIFICATION_SENT_TO: 111,
    QUESTION_ANSWERED: 253,
    QUESTION_CREATE: 220,
    QUESTION_DELETE: 223,
    QUESTION_EDIT: 222,
    QUESTION_LIKE: 224,
    QUESTION_REPORT: 226,
    QUESTION_UNLIKE: 225,
    QUESTION_VIEW: 221,
    REFERRER_APP_INSTALL: 1009,
    REFERRER_APP_INSTALL_ATTEMPT: 1010,
    REFRESH: 81,
    RENDER: 120,
    REPLY_CREATE: 247,
    REPLY_DELETE: 248,
    REPLY_EDIT: 250,
    REPLY_REPORT: 249,
    REPLY_VIEW: 252,
    SAFARI_KEYCHAIN_SUCCESSFUL_LOGIN: 2200,
    SCROLL: 110,
    SEARCH_BOARDS: 61,
    SEARCH_INTERESTS: 67,
    SEARCH_MY_PINS: 63,
    SEARCH_PINS: 60,
    SEARCH_PLACE_BOARDS: 66,
    SEARCH_RECIPES: 65,
    SEARCH_RESULT_IMPRESSION_ONE_PIXEL: 640,
    SEARCH_USERS: 62,
    SEARCH_VIDEOS: 64,
    SEND_PIN_RECOMMENDATION: 410,
    SERVICE_ENTRY: 801,
    SHIPPING_DETAIL_CREATE: 310,
    SHIPPING_DETAIL_DELETE: 315,
    SHIPPING_DETAIL_UPDATE: 314,
    SHIPPING_DETAIL_VIEW: 311,
    SWIPE: 108,
    TAP: 102,
    TOGGLE_OFF: 107,
    TOGGLE_ON: 106,
    TOP_NOTIFICATION_CLICKED: 300,
    TRANSLATION_DETECTION: 1900,
    TRANSLATION_TRIGGERED: 1901,
    URL_CHECK: 201,
    URL_CLICKTHROUGH: 203,
    URL_IMAGE: 202,
    USER_BLOCK: 54,
    USER_CREATE: 40,
    USER_DEACTIVATED: 48,
    USER_DELETE: 42,
    USER_DELETED_APP: 96,
    USER_DISABLE_ANALYTICS: 85,
    USER_DISABLE_FACBOOK: 87,
    USER_DISABLE_FACEBOOK_TIMELINE: 89,
    USER_DISABLE_GPLUS: 93,
    USER_DISABLE_RAKUTEN: 95,
    USER_DISABLE_TWITTER: 91,
    USER_EDIT: 41,
    USER_ENABLE_ANALYTICS: 84,
    USER_ENABLE_FACEBOOK: 86,
    USER_ENABLE_FACEBOOK_TIMELINE: 88,
    USER_ENABLE_GPLUS: 92,
    USER_ENABLE_RAKUTEN: 94,
    USER_ENABLE_TWITTER: 90,
    USER_FOLLOW: 45,
    USER_GENDER_CHANGED: 155,
    USER_INVITE: 47,
    USER_INVITE_CREATE: 151,
    USER_INVITE_CREATE_DEPRECATED: 1201,
    USER_INVITE_EMAIL_SENT: 154,
    USER_INVITE_FACEBOOK_CREATE: 152,
    USER_INVITE_FACEBOOK_SENT: 153,
    USER_LOGIN_ATTEMPT: 50,
    USER_LOGIN_FAILED: 39,
    USER_LOGIN_SUCCESS: 38,
    USER_PARTNER_CONVERT: 58,
    USER_PARTNER_CREATE: 57,
    USER_PASSWORD_RESET_COMPLETED: 52,
    USER_PASSWORD_RESET_REQUEST: 51,
    USER_PERSONALIZED_RECOMMENDATIONS_CHANGED: 157,
    USER_PUBLISH_TO_SOCIAL_NETWORK: 75,
    USER_REACTIVATED: 49,
    USER_REORDER_BOARDS: 44,
    USER_REPORT: 56,
    USER_SEARCH_PRIVACY_CHANGED: 156,
    USER_SEND: 150,
    USER_SUSPICIOUS_LOGIN: 53,
    USER_UNBLOCK: 55,
    USER_UNFOLLOW: 46,
    USER_VIEW: 43,
    VIEW: 13,
    VISUAL_OBJECT_IMPRESSION_SERVER_SIDE: 670,
    VISUAL_RESULTS_IMPRESSION_SERVER_SIDE: 671,
    WEB_OR_API_REQUEST: 1e3,
    WINDOWS_REQUEST: 1006
}, goog.provide("P.Experiences"), P.Experiences = {}, goog.provide("P.Experiences.Placement"), P.Experiences.Placement = {
    ANALYTICS_AUDIENCE_DASHBOARD_TAKEOVER: 60002,
    ANALYTICS_HOME_TAKEOVER: 60001,
    ANALYTICS_NOOP: 6e4,
    ANDROID_APPLAUNCH_AUTO_COMPLETE: 20007,
    ANDROID_BOARD_TAKEOVER: 20003,
    ANDROID_CONVERSATION_NAG: 20010,
    ANDROID_GLOBAL_NAG: 20002,
    ANDROID_HOME_FEED_TAKEOVER: 20008,
    ANDROID_HOME_HEADER: 20001,
    ANDROID_MAIN_USER_ED: 20006,
    ANDROID_NETWORK_STORY_NAG: 20009,
    ANDROID_NOOP: 2e4,
    ANDROID_PIN_CLOSEUP_TAKEOVER: 20005,
    ANDROID_USER_PROFILE_TAKEOVER: 20004,
    BATCH_NOOP: 8e4,
    BATCH_NUX_EMAILS: 80001,
    EMAIL_NOOP: 7e4,
    EMAIL_NUX: 70002,
    EMAIL_USER_ED_TIP: 70001,
    IOS_BOARD_TAKEOVER: 10008,
    IOS_GLOBAL_NAG: 10001,
    IOS_HOMEFEED_TAKEOVER: 10003,
    IOS_HOME_PR_NAG: 10002,
    IOS_MAIN_USER_ED: 10006,
    IOS_MESSAGES_LIST_VIEW_TAKEOVER: 10011,
    IOS_MESSAGE_SPLIT_VIEW_TAKEOVER: 10013,
    IOS_MESSAGE_VIEW_TAKEOVER: 10012,
    IOS_NOOP: 1e4,
    IOS_NOTIFICATIONS_TAKEOVER: 10010,
    IOS_PERMISSIONS_TAKEOVER: 10007,
    IOS_PIN_CLOSEUP_TAKEOVER: 10004,
    IOS_REPIN_DIALOG_TAKEOVER: 10005,
    IOS_USER_PROFILE_TAKEOVER: 10009,
    NOOP: 1,
    PUSH_NOTIFICATION_AUTH: 50001,
    PUSH_NOTIFICATION_NONAUTH: 50002,
    PUSH_NOTIFICATION_NOOP: 5e4,
    WEB_BOARD_HERO: 17,
    WEB_BOARD_TAKEOVER: 18,
    WEB_CATEGORY_HERO: 23,
    WEB_EMPTY_PLACES_BOARD_TAKEOVER: 20,
    WEB_EXPLORE_TAKEOVER: 22,
    WEB_FILLED_PLACES_BOARD_TAKEOVER: 21,
    WEB_HERO: 13,
    WEB_HOME_HERO: 15,
    WEB_HOME_TAKEOVER: 11,
    WEB_MOBILE_EVERYTHING_FEED_TAKEOVER: 40001,
    WEB_MOBILE_NOOP: 4e4,
    WEB_NAG: 30,
    WEB_NOOP: 10,
    WEB_ONLOAD_AUTO_COMPLETE: 26,
    WEB_PIN_CLOSEUP: 12,
    WEB_PIN_CLOSEUP_TAKEOVER: 24,
    WEB_PIN_SUCCESS: 14,
    WEB_PROFILE_HERO: 27,
    WEB_SEARCH_HERO: 25,
    WEB_SEARCH_PAGE_TAKEOVER: 29,
    WEB_TOOLTIP: 16,
    WEB_USER_NEWS: 28,
    WEB_USER_PROFILE_TAKEOVER: 19
}, goog.provide("P.Experiences.PlacementReverse"), P.Experiences.PlacementReverse = {
    1: "NOOP",
    10: "WEB_NOOP",
    11: "WEB_HOME_TAKEOVER",
    12: "WEB_PIN_CLOSEUP",
    13: "WEB_HERO",
    14: "WEB_PIN_SUCCESS",
    15: "WEB_HOME_HERO",
    16: "WEB_TOOLTIP",
    17: "WEB_BOARD_HERO",
    18: "WEB_BOARD_TAKEOVER",
    19: "WEB_USER_PROFILE_TAKEOVER",
    20: "WEB_EMPTY_PLACES_BOARD_TAKEOVER",
    21: "WEB_FILLED_PLACES_BOARD_TAKEOVER",
    22: "WEB_EXPLORE_TAKEOVER",
    23: "WEB_CATEGORY_HERO",
    24: "WEB_PIN_CLOSEUP_TAKEOVER",
    25: "WEB_SEARCH_HERO",
    26: "WEB_ONLOAD_AUTO_COMPLETE",
    27: "WEB_PROFILE_HERO",
    28: "WEB_USER_NEWS",
    29: "WEB_SEARCH_PAGE_TAKEOVER",
    30: "WEB_NAG",
    10000: "IOS_NOOP",
    10001: "IOS_GLOBAL_NAG",
    10002: "IOS_HOME_PR_NAG",
    10003: "IOS_HOMEFEED_TAKEOVER",
    10004: "IOS_PIN_CLOSEUP_TAKEOVER",
    10005: "IOS_REPIN_DIALOG_TAKEOVER",
    10006: "IOS_MAIN_USER_ED",
    10007: "IOS_PERMISSIONS_TAKEOVER",
    10008: "IOS_BOARD_TAKEOVER",
    10009: "IOS_USER_PROFILE_TAKEOVER",
    10010: "IOS_NOTIFICATIONS_TAKEOVER",
    10011: "IOS_MESSAGES_LIST_VIEW_TAKEOVER",
    10012: "IOS_MESSAGE_VIEW_TAKEOVER",
    10013: "IOS_MESSAGE_SPLIT_VIEW_TAKEOVER",
    20000: "ANDROID_NOOP",
    20001: "ANDROID_HOME_HEADER",
    20002: "ANDROID_GLOBAL_NAG",
    20003: "ANDROID_BOARD_TAKEOVER",
    20004: "ANDROID_USER_PROFILE_TAKEOVER",
    20005: "ANDROID_PIN_CLOSEUP_TAKEOVER",
    20006: "ANDROID_MAIN_USER_ED",
    20007: "ANDROID_APPLAUNCH_AUTO_COMPLETE",
    20008: "ANDROID_HOME_FEED_TAKEOVER",
    20009: "ANDROID_NETWORK_STORY_NAG",
    20010: "ANDROID_CONVERSATION_NAG",
    40000: "WEB_MOBILE_NOOP",
    40001: "WEB_MOBILE_EVERYTHING_FEED_TAKEOVER",
    50000: "PUSH_NOTIFICATION_NOOP",
    50001: "PUSH_NOTIFICATION_AUTH",
    50002: "PUSH_NOTIFICATION_NONAUTH",
    60000: "ANALYTICS_NOOP",
    60001: "ANALYTICS_HOME_TAKEOVER",
    60002: "ANALYTICS_AUDIENCE_DASHBOARD_TAKEOVER",
    70000: "EMAIL_NOOP",
    70001: "EMAIL_USER_ED_TIP",
    70002: "EMAIL_NUX",
    80000: "BATCH_NOOP",
    80001: "BATCH_NUX_EMAILS"
}, goog.provide("P.Experiences.Experience"), P.Experiences.Experience = {
    ANALYTICS_AUDIENCE_SELECTOR_USER_ED: 60002,
    ANALYTICS_HOME_USER_ED: 60001,
    ANALYTICS_NOOP: 6e4,
    ANDROID_BOARD_FOLLOW_ED: 30034,
    ANDROID_BOARD_FOLLOW_ED_HELPER: 30035,
    ANDROID_BOARD_FOLLOW_ED_HELPER_TABLET: 30037,
    ANDROID_BOARD_FOLLOW_ED_TABLET: 30036,
    ANDROID_CLICKTHROUGH_ED: 30017,
    ANDROID_CLICKTHROUGH_ED_HELPER: 30029,
    ANDROID_CLICKTHROUGH_ED_HELPER_TABLET: 30031,
    ANDROID_CLICKTHROUGH_ED_TABLET: 30030,
    ANDROID_EMMY_AWARDS: 30019,
    ANDROID_EMPTY_BOARD_ED: 30005,
    ANDROID_EMPTY_BOARD_ED_HELPER: 30009,
    ANDROID_EMPTY_BOARD_ED_HELPER_TABLET: 30014,
    ANDROID_EMPTY_BOARD_ED_TABLET: 30013,
    ANDROID_EMPTY_USER_PROFILE_ED: 30006,
    ANDROID_EMPTY_USER_PROFILE_ED_HELPER: 30010,
    ANDROID_EMPTY_USER_PROFILE_ED_HELPER_TABLET: 30016,
    ANDROID_EMPTY_USER_PROFILE_ED_TABLET: 30015,
    ANDROID_HERO_EMPTY_HOMEFEED: 30001,
    ANDROID_HERO_PROMPT_REBUILD_FEED: 30042,
    ANDROID_HERO_UNDO_REBUILD_FEED: 30043,
    ANDROID_HOME_FEED_ED: 30020,
    ANDROID_HOME_FEED_ED_HELPER: 30023,
    ANDROID_HOME_FEED_ED_HELPER_TABLET: 30025,
    ANDROID_HOME_FEED_ED_TABLET: 30024,
    ANDROID_MSGS_WELCOME_MESSAGE: 30018,
    ANDROID_NAG_ADS_PRIVACY_UPDATE: 30022,
    ANDROID_NAG_CONFIRM_EMAIL: 30002,
    ANDROID_NAG_CONNECT_FACEBOOK: 30032,
    ANDROID_NAG_INVITER: 30004,
    ANDROID_NAG_UPLOAD_CONTACTS: 30033,
    ANDROID_NAG_WRITE_BANNED: 30003,
    ANDROID_NOOP: 3e4,
    ANDROID_NUX_MANDATORY_MEN: 30011,
    ANDROID_NUX_MANDATORY_WOMEN: 30012,
    ANDROID_NUX_REBUILD_FEED: 30044,
    ANDROID_PROFILE_FOLLOW_ED: 30038,
    ANDROID_PROFILE_FOLLOW_ED_HELPER: 30039,
    ANDROID_PROFILE_FOLLOW_ED_HELPER_TABLET: 30041,
    ANDROID_PROFILE_FOLLOW_ED_TABLET: 30040,
    ANDROID_QA_EDUCATION: 30007,
    ANDROID_QA_NOTIFICATION_EDUCATION: 30008,
    ANDROID_REPIN_ED: 30021,
    ANDROID_REPIN_ED_HELPER: 30026,
    ANDROID_REPIN_ED_HELPER_TABLET: 30028,
    ANDROID_REPIN_ED_TABLET: 30027,
    BATCH_EMAIL_EMPTY_BOARD: 80003,
    BATCH_EMAIL_FIRST_BOARD_CREATE: 80001,
    BATCH_EMAIL_FIRST_CLICKTHROUGH: 80006,
    BATCH_EMAIL_FIRST_PIN_CREATE: 80005,
    BATCH_EMAIL_GUIDED_SEARCH: 80004,
    BATCH_EMAIL_INTEREST_RECOMMENDATIONS: 80002,
    BATCH_EMAIL_MOBILE_APP_DOWNLOAD: 80007,
    BATCH_NOOP: 8e4,
    CONFIRM_EMAIL: 2,
    EMAIL_NOOP: 7e4,
    EMAIL_USER_ED_TIP_CLICKTHROUGH: 70003,
    EMAIL_USER_ED_TIP_EMAIL_VERIFY: 70005,
    EMAIL_USER_ED_TIP_EMPTY_BOARD: 70001,
    EMAIL_USER_ED_TIP_PINIT_BUTTON: 70007,
    EMAIL_USER_ED_TIP_PIN_CREATE: 70006,
    EMAIL_USER_ED_TIP_REPIN: 70002,
    EMAIL_USER_ED_TIP_SEARCH: 70004,
    IOS_CONTACTS_AND_FACEBOOK_PERMISSIONS: 20012,
    IOS_CONTACTS_PERMISSIONS: 20011,
    IOS_CREATE_BUTTON_ED: 20038,
    IOS_EMMY_AWARDS: 20027,
    IOS_EMPTY_BOARD_ED: 20014,
    IOS_EMPTY_BOARD_ED_HELPER: 20016,
    IOS_EMPTY_USER_PROFILE_ED: 20015,
    IOS_EMPTY_USER_PROFILE_ED_HELPER: 20017,
    IOS_HOME_FEED_ED: 20033,
    IOS_HOME_FEED_ED_HELPER: 20034,
    IOS_HOME_WELCOME_HELPER: 20006,
    IOS_MSGS_MESSAGE_LIST_USER_ED: 20022,
    IOS_MSGS_MESSAGE_USER_ED: 20023,
    IOS_MSGS_MESSAGE_USER_ED_IPAD: 20025,
    IOS_MSGS_NOTIFICATIONS_USER_ED: 20021,
    IOS_MSGS_NOTIFICATIONS_USER_ED_IPAD: 20024,
    IOS_MSGS_WELCOME_MESSAGE: 20026,
    IOS_NAG_ADS_PRIVACY_UPDATE: 20028,
    IOS_NAG_CONFIRM_EMAIL: 20001,
    IOS_NAG_CONFIRM_EMAIL_V3_5_1: 20009,
    IOS_NAG_INVITER: 20003,
    IOS_NAG_PLACE_PINS: 20002,
    IOS_NAG_REBUILD_FEED: 20035,
    IOS_NAG_UNDO_REBUILD_FEED: 20036,
    IOS_NAG_WRITE_BANNED: 20008,
    IOS_NOOP: 2e4,
    IOS_NUX_FIRST_PIN: 20004,
    IOS_NUX_MANDATORY: 20005,
    IOS_NUX_MANDATORY_MEN: 20019,
    IOS_NUX_MANDATORY_WOMEN: 20020,
    IOS_NUX_REBUILD_FEED: 20037,
    IOS_PINS_LIVE_PROFILE_HELPER: 20007,
    IOS_QA_EDUCATION: 20010,
    IOS_QA_NOTIFICATION_EDUCATION: 20018,
    IOS_REPIN_ED: 20029,
    IOS_REPIN_ED_HELPER: 20030,
    IOS_REPIN_ED_HELPER_IPAD: 20032,
    IOS_REPIN_ED_IPAD: 20031,
    IOS_TEST: 29999,
    IOS_UPDATE_APP_HELPER: 20013,
    NOOP: 1,
    PUSH_NOTIFICATION_FRIEND_PIN: 50003,
    PUSH_NOTIFICATION_NOOP: 5e4,
    PUSH_NOTIFICATION_PIN_TWINS: 50002,
    PUSH_NOTIFICATION_SIMILAR_REPINS: 50001,
    WEB_BLANK_SESSION: 10009,
    WEB_CATEGORY_SEARCH_USER_ED: 10014,
    WEB_CLICKTHROUGH_ED: 11010,
    WEB_CLICKTHROUGH_ED_MANUAL: 11011,
    WEB_EMPTY_BOARD_ED: 11002,
    WEB_EMPTY_BOARD_ED_MANUAL: 11004,
    WEB_EMPTY_PLACES_BOARD_USER_ED: 10016,
    WEB_EMPTY_PROFILE_ED: 11003,
    WEB_EMPTY_PROFILE_ED_MANUAL: 11005,
    WEB_EXPLORE_BUTTON_USER_ED: 10019,
    WEB_EXPLORE_HEADER_USER_ED: 10023,
    WEB_EXPLORE_PAGE_USER_ED: 10020,
    WEB_FACEBOOK_CONNECT_HERO: 10028,
    WEB_FACEBOOK_PUBLISH_HERO: 10029,
    WEB_FAST_FOLLOW_USER_ED: 10012,
    WEB_FEED_EDITOR_USER_ED: 10001,
    WEB_FILLED_PLACES_BOARD_USER_ED: 10017,
    WEB_FIND_FRIENDS_USER_ED: 10013,
    WEB_FIRST_BOARD_USER_ED: 10018,
    WEB_FIRST_FOLLOW: 10007,
    WEB_FIRST_PIN_SUCCESS: 10005,
    WEB_FIRST_PIN_USER_ED: 10010,
    WEB_GUIDED_SEARCH_HEADER_USER_ED: 10032,
    WEB_GUIDED_SEARCH_USER_ED: 10033,
    WEB_HERO_ADS_PRIVACY_UPDATE: 10074,
    WEB_HERO_APP_UPSELL: 10069,
    WEB_HERO_CONVERT_TO_BUSINESS: 10063,
    WEB_HERO_EMMY_AWARDS: 10071,
    WEB_HERO_EMPTY_HOMEFEED: 10051,
    WEB_HERO_HOLIDAY_GUIDE: 10058,
    WEB_HERO_INSTALL_APP: 10052,
    WEB_HERO_INSTALL_EXTENSION: 10060,
    WEB_HERO_INVITE_FRIENDS: 10050,
    WEB_HERO_LANGUAGE: 10054,
    WEB_HERO_LANGUAGE_BROWSER_SAFE: 10061,
    WEB_HERO_NEW_ANALYTICS_CONVERT_TO_BIZ_NAG: 10070,
    WEB_HERO_NEW_ANALYTICS_NAG: 10068,
    WEB_HERO_PINIT_BUTTON: 10053,
    WEB_HERO_PINIT_BUTTON_INTERNATIONAL: 10062,
    WEB_HERO_PINIT_WEBMASTER: 10055,
    WEB_HERO_PLACE_PINS: 10056,
    WEB_HERO_PLACE_PINS_BOARD: 10057,
    WEB_HERO_PROMOTED_PINS_BETA_REMINDER: 10067,
    WEB_HERO_PROMOTE_A_PIN: 10064,
    WEB_HERO_PROMPT_REBUILD_FEED: 10072,
    WEB_HERO_SCOOTER_PINNER_STORY: 10066,
    WEB_HERO_UNDO_REBUILD_FEED: 10073,
    WEB_HERO_VALENTINES: 10059,
    WEB_HERO_WORLD_CUP: 10065,
    WEB_HOMEFEED_CAROUSEL: 10030,
    WEB_HOME_FEED_ED: 11006,
    WEB_HOME_FEED_ED_MANUAL: 11008,
    WEB_INTL_PIN_USER_ED: 10027,
    WEB_MANDATORY_AUTOBAHN: 10004,
    WEB_MOBILE_NOOP: 4e4,
    WEB_MOBILE_NUX_INTERESTS: 40002,
    WEB_MOBILE_NUX_MANDATORY: 40001,
    WEB_MODERN_HEADER_USER_ED: 10021,
    WEB_MSGS_WELCOME_MESSAGE: 10025,
    WEB_NAG_ADS_PRIVACY_UPDATE: 10200,
    WEB_NAG_LIMITED_LOGIN: 10201,
    WEB_NOOP: 1e4,
    WEB_PINIT_BOOKMARKLET: 10008,
    WEB_PIN_CLOSEUP_AUTOBAHN: 10003,
    WEB_PIN_CLOSEUP_LITE: 10002,
    WEB_PIN_SUCCESS_EXTENSION_ED_BOARD_BOXED: 10104,
    WEB_PIN_SUCCESS_EXTENSION_ED_CATEGORY_BOXED: 10103,
    WEB_PIN_SUCCESS_EXTENSION_ED_DOMAIN: 10101,
    WEB_PIN_SUCCESS_EXTENSION_ED_ODD_CONTENTS: 10102,
    WEB_PIN_SUCCESS_EXTENSION_UPSELL: 10022,
    WEB_PIN_SUCCESS_NEW_EXTENSION_UPSELL: 10100,
    WEB_PLACE_PINS_TOOLTIP: 10015,
    WEB_QA_CLOSEUP_NOTIFICATION_USER_ED: 11001,
    WEB_QA_CLOSEUP_USER_ED: 11e3,
    WEB_REBUILD_FEED: 10031,
    WEB_REPIN_ED: 11007,
    WEB_REPIN_ED_MANUAL: 11009,
    WEB_SEARCH_DISCOVER_TOOLTIP: 10006,
    WEB_TEST: 19999,
    WEB_UNAUTH_PIN_CLOSEUP: 12e3,
    WEB_USER_NEWS_APP_UPSELL: 10026,
    WEB_VISUAL_OBJECT_SEARCH_CLOSEUP_USER_ED: 10024,
    WEB_YOUR_BOARDS_USER_ED: 10011
}, goog.provide("P.Experiences.ExperienceReverse"), P.Experiences.ExperienceReverse = {
    1: "NOOP",
    2: "CONFIRM_EMAIL",
    10000: "WEB_NOOP",
    10001: "WEB_FEED_EDITOR_USER_ED",
    10002: "WEB_PIN_CLOSEUP_LITE",
    10003: "WEB_PIN_CLOSEUP_AUTOBAHN",
    10004: "WEB_MANDATORY_AUTOBAHN",
    10005: "WEB_FIRST_PIN_SUCCESS",
    10006: "WEB_SEARCH_DISCOVER_TOOLTIP",
    10007: "WEB_FIRST_FOLLOW",
    10008: "WEB_PINIT_BOOKMARKLET",
    10009: "WEB_BLANK_SESSION",
    10010: "WEB_FIRST_PIN_USER_ED",
    10011: "WEB_YOUR_BOARDS_USER_ED",
    10012: "WEB_FAST_FOLLOW_USER_ED",
    10013: "WEB_FIND_FRIENDS_USER_ED",
    10014: "WEB_CATEGORY_SEARCH_USER_ED",
    10015: "WEB_PLACE_PINS_TOOLTIP",
    10016: "WEB_EMPTY_PLACES_BOARD_USER_ED",
    10017: "WEB_FILLED_PLACES_BOARD_USER_ED",
    10018: "WEB_FIRST_BOARD_USER_ED",
    10019: "WEB_EXPLORE_BUTTON_USER_ED",
    10020: "WEB_EXPLORE_PAGE_USER_ED",
    10021: "WEB_MODERN_HEADER_USER_ED",
    10022: "WEB_PIN_SUCCESS_EXTENSION_UPSELL",
    10023: "WEB_EXPLORE_HEADER_USER_ED",
    10024: "WEB_VISUAL_OBJECT_SEARCH_CLOSEUP_USER_ED",
    10025: "WEB_MSGS_WELCOME_MESSAGE",
    10026: "WEB_USER_NEWS_APP_UPSELL",
    10027: "WEB_INTL_PIN_USER_ED",
    10028: "WEB_FACEBOOK_CONNECT_HERO",
    10029: "WEB_FACEBOOK_PUBLISH_HERO",
    10030: "WEB_HOMEFEED_CAROUSEL",
    10031: "WEB_REBUILD_FEED",
    10032: "WEB_GUIDED_SEARCH_HEADER_USER_ED",
    10033: "WEB_GUIDED_SEARCH_USER_ED",
    10050: "WEB_HERO_INVITE_FRIENDS",
    10051: "WEB_HERO_EMPTY_HOMEFEED",
    10052: "WEB_HERO_INSTALL_APP",
    10053: "WEB_HERO_PINIT_BUTTON",
    10054: "WEB_HERO_LANGUAGE",
    10055: "WEB_HERO_PINIT_WEBMASTER",
    10056: "WEB_HERO_PLACE_PINS",
    10057: "WEB_HERO_PLACE_PINS_BOARD",
    10058: "WEB_HERO_HOLIDAY_GUIDE",
    10059: "WEB_HERO_VALENTINES",
    10060: "WEB_HERO_INSTALL_EXTENSION",
    10061: "WEB_HERO_LANGUAGE_BROWSER_SAFE",
    10062: "WEB_HERO_PINIT_BUTTON_INTERNATIONAL",
    10063: "WEB_HERO_CONVERT_TO_BUSINESS",
    10064: "WEB_HERO_PROMOTE_A_PIN",
    10065: "WEB_HERO_WORLD_CUP",
    10066: "WEB_HERO_SCOOTER_PINNER_STORY",
    10067: "WEB_HERO_PROMOTED_PINS_BETA_REMINDER",
    10068: "WEB_HERO_NEW_ANALYTICS_NAG",
    10069: "WEB_HERO_APP_UPSELL",
    10070: "WEB_HERO_NEW_ANALYTICS_CONVERT_TO_BIZ_NAG",
    10071: "WEB_HERO_EMMY_AWARDS",
    10072: "WEB_HERO_PROMPT_REBUILD_FEED",
    10073: "WEB_HERO_UNDO_REBUILD_FEED",
    10074: "WEB_HERO_ADS_PRIVACY_UPDATE",
    10100: "WEB_PIN_SUCCESS_NEW_EXTENSION_UPSELL",
    10101: "WEB_PIN_SUCCESS_EXTENSION_ED_DOMAIN",
    10102: "WEB_PIN_SUCCESS_EXTENSION_ED_ODD_CONTENTS",
    10103: "WEB_PIN_SUCCESS_EXTENSION_ED_CATEGORY_BOXED",
    10104: "WEB_PIN_SUCCESS_EXTENSION_ED_BOARD_BOXED",
    10200: "WEB_NAG_ADS_PRIVACY_UPDATE",
    10201: "WEB_NAG_LIMITED_LOGIN",
    11000: "WEB_QA_CLOSEUP_USER_ED",
    11001: "WEB_QA_CLOSEUP_NOTIFICATION_USER_ED",
    11002: "WEB_EMPTY_BOARD_ED",
    11003: "WEB_EMPTY_PROFILE_ED",
    11004: "WEB_EMPTY_BOARD_ED_MANUAL",
    11005: "WEB_EMPTY_PROFILE_ED_MANUAL",
    11006: "WEB_HOME_FEED_ED",
    11007: "WEB_REPIN_ED",
    11008: "WEB_HOME_FEED_ED_MANUAL",
    11009: "WEB_REPIN_ED_MANUAL",
    11010: "WEB_CLICKTHROUGH_ED",
    11011: "WEB_CLICKTHROUGH_ED_MANUAL",
    12000: "WEB_UNAUTH_PIN_CLOSEUP",
    19999: "WEB_TEST",
    20000: "IOS_NOOP",
    20001: "IOS_NAG_CONFIRM_EMAIL",
    20002: "IOS_NAG_PLACE_PINS",
    20003: "IOS_NAG_INVITER",
    20004: "IOS_NUX_FIRST_PIN",
    20005: "IOS_NUX_MANDATORY",
    20006: "IOS_HOME_WELCOME_HELPER",
    20007: "IOS_PINS_LIVE_PROFILE_HELPER",
    20008: "IOS_NAG_WRITE_BANNED",
    20009: "IOS_NAG_CONFIRM_EMAIL_V3_5_1",
    20010: "IOS_QA_EDUCATION",
    20011: "IOS_CONTACTS_PERMISSIONS",
    20012: "IOS_CONTACTS_AND_FACEBOOK_PERMISSIONS",
    20013: "IOS_UPDATE_APP_HELPER",
    20014: "IOS_EMPTY_BOARD_ED",
    20015: "IOS_EMPTY_USER_PROFILE_ED",
    20016: "IOS_EMPTY_BOARD_ED_HELPER",
    20017: "IOS_EMPTY_USER_PROFILE_ED_HELPER",
    20018: "IOS_QA_NOTIFICATION_EDUCATION",
    20019: "IOS_NUX_MANDATORY_MEN",
    20020: "IOS_NUX_MANDATORY_WOMEN",
    20021: "IOS_MSGS_NOTIFICATIONS_USER_ED",
    20022: "IOS_MSGS_MESSAGE_LIST_USER_ED",
    20023: "IOS_MSGS_MESSAGE_USER_ED",
    20024: "IOS_MSGS_NOTIFICATIONS_USER_ED_IPAD",
    20025: "IOS_MSGS_MESSAGE_USER_ED_IPAD",
    20026: "IOS_MSGS_WELCOME_MESSAGE",
    20027: "IOS_EMMY_AWARDS",
    20028: "IOS_NAG_ADS_PRIVACY_UPDATE",
    20029: "IOS_REPIN_ED",
    20030: "IOS_REPIN_ED_HELPER",
    20031: "IOS_REPIN_ED_IPAD",
    20032: "IOS_REPIN_ED_HELPER_IPAD",
    20033: "IOS_HOME_FEED_ED",
    20034: "IOS_HOME_FEED_ED_HELPER",
    20035: "IOS_NAG_REBUILD_FEED",
    20036: "IOS_NAG_UNDO_REBUILD_FEED",
    20037: "IOS_NUX_REBUILD_FEED",
    20038: "IOS_CREATE_BUTTON_ED",
    29999: "IOS_TEST",
    30000: "ANDROID_NOOP",
    30001: "ANDROID_HERO_EMPTY_HOMEFEED",
    30002: "ANDROID_NAG_CONFIRM_EMAIL",
    30003: "ANDROID_NAG_WRITE_BANNED",
    30004: "ANDROID_NAG_INVITER",
    30005: "ANDROID_EMPTY_BOARD_ED",
    30006: "ANDROID_EMPTY_USER_PROFILE_ED",
    30007: "ANDROID_QA_EDUCATION",
    30008: "ANDROID_QA_NOTIFICATION_EDUCATION",
    30009: "ANDROID_EMPTY_BOARD_ED_HELPER",
    30010: "ANDROID_EMPTY_USER_PROFILE_ED_HELPER",
    30011: "ANDROID_NUX_MANDATORY_MEN",
    30012: "ANDROID_NUX_MANDATORY_WOMEN",
    30013: "ANDROID_EMPTY_BOARD_ED_TABLET",
    30014: "ANDROID_EMPTY_BOARD_ED_HELPER_TABLET",
    30015: "ANDROID_EMPTY_USER_PROFILE_ED_TABLET",
    30016: "ANDROID_EMPTY_USER_PROFILE_ED_HELPER_TABLET",
    30017: "ANDROID_CLICKTHROUGH_ED",
    30018: "ANDROID_MSGS_WELCOME_MESSAGE",
    30019: "ANDROID_EMMY_AWARDS",
    30020: "ANDROID_HOME_FEED_ED",
    30021: "ANDROID_REPIN_ED",
    30022: "ANDROID_NAG_ADS_PRIVACY_UPDATE",
    30023: "ANDROID_HOME_FEED_ED_HELPER",
    30024: "ANDROID_HOME_FEED_ED_TABLET",
    30025: "ANDROID_HOME_FEED_ED_HELPER_TABLET",
    30026: "ANDROID_REPIN_ED_HELPER",
    30027: "ANDROID_REPIN_ED_TABLET",
    30028: "ANDROID_REPIN_ED_HELPER_TABLET",
    30029: "ANDROID_CLICKTHROUGH_ED_HELPER",
    30030: "ANDROID_CLICKTHROUGH_ED_TABLET",
    30031: "ANDROID_CLICKTHROUGH_ED_HELPER_TABLET",
    30032: "ANDROID_NAG_CONNECT_FACEBOOK",
    30033: "ANDROID_NAG_UPLOAD_CONTACTS",
    30034: "ANDROID_BOARD_FOLLOW_ED",
    30035: "ANDROID_BOARD_FOLLOW_ED_HELPER",
    30036: "ANDROID_BOARD_FOLLOW_ED_TABLET",
    30037: "ANDROID_BOARD_FOLLOW_ED_HELPER_TABLET",
    30038: "ANDROID_PROFILE_FOLLOW_ED",
    30039: "ANDROID_PROFILE_FOLLOW_ED_HELPER",
    30040: "ANDROID_PROFILE_FOLLOW_ED_TABLET",
    30041: "ANDROID_PROFILE_FOLLOW_ED_HELPER_TABLET",
    30042: "ANDROID_HERO_PROMPT_REBUILD_FEED",
    30043: "ANDROID_HERO_UNDO_REBUILD_FEED",
    30044: "ANDROID_NUX_REBUILD_FEED",
    40000: "WEB_MOBILE_NOOP",
    40001: "WEB_MOBILE_NUX_MANDATORY",
    40002: "WEB_MOBILE_NUX_INTERESTS",
    50000: "PUSH_NOTIFICATION_NOOP",
    50001: "PUSH_NOTIFICATION_SIMILAR_REPINS",
    50002: "PUSH_NOTIFICATION_PIN_TWINS",
    50003: "PUSH_NOTIFICATION_FRIEND_PIN",
    60000: "ANALYTICS_NOOP",
    60001: "ANALYTICS_HOME_USER_ED",
    60002: "ANALYTICS_AUDIENCE_SELECTOR_USER_ED",
    70000: "EMAIL_NOOP",
    70001: "EMAIL_USER_ED_TIP_EMPTY_BOARD",
    70002: "EMAIL_USER_ED_TIP_REPIN",
    70003: "EMAIL_USER_ED_TIP_CLICKTHROUGH",
    70004: "EMAIL_USER_ED_TIP_SEARCH",
    70005: "EMAIL_USER_ED_TIP_EMAIL_VERIFY",
    70006: "EMAIL_USER_ED_TIP_PIN_CREATE",
    70007: "EMAIL_USER_ED_TIP_PINIT_BUTTON",
    80000: "BATCH_NOOP",
    80001: "BATCH_EMAIL_FIRST_BOARD_CREATE",
    80002: "BATCH_EMAIL_INTEREST_RECOMMENDATIONS",
    80003: "BATCH_EMAIL_EMPTY_BOARD",
    80004: "BATCH_EMAIL_GUIDED_SEARCH",
    80005: "BATCH_EMAIL_FIRST_PIN_CREATE",
    80006: "BATCH_EMAIL_FIRST_CLICKTHROUGH",
    80007: "BATCH_EMAIL_MOBILE_APP_DOWNLOAD"
}, goog.provide("P.Experiences.ExperienceCompleteAction"), P.Experiences.ExperienceCompleteAction = {
    COMPLETE: 1,
    COMPLETE_AND_SHOW: 2,
    DONT_COMPLETE_AND_HIDE: 3,
    DONT_COMPLETE_AND_SHOW: 4
}, goog.provide("P.Experiences.ExperienceCompleteActionReverse"), P.Experiences.ExperienceCompleteActionReverse = {
    1: "COMPLETE",
    2: "COMPLETE_AND_SHOW",
    3: "DONT_COMPLETE_AND_HIDE",
    4: "DONT_COMPLETE_AND_SHOW"
}, goog.provide("P.CONST.RecommendationComplaintReason"), P.CONST.RecommendationComplaintReason = {
    NOT_INTERESTED: 1,
    OFFENSIVE: 2,
    OTHER_REASON: 0,
    SEEN_IT_BEFORE: 3
}, goog.provide("P.CONST.PinFeedbackTypes"), P.CONST.PinFeedbackTypes = {
    BLOCK_ALL_PFY_PINS: 3,
    BLOCK_PFY_THROUGH_BOARD: 2,
    BLOCK_SINGLE_PFY_PIN: 1
}, goog.provide("P.BrowserExtensionUrls"), P.BrowserExtensionUrls = {
    EXTENSION_PINIT_CHROME_URL: "https://chrome.google.com/webstore/detail/gpdjojdkbbmdfjfahjcgigfpmkopogic",
    EXTENSION_PINIT_FIREFOX_URL: "http://about.pinterest.com//assets/ext/Pinterest-Firefox.xpi",
    EXTENSION_PINIT_OPERA_URL: "https://addons.opera.com/en/extensions/details/pinterest-8/?display=en"
}, goog.provide("P.InProductUrls"), P.InProductUrls = {
    ABOUT_PRIVACY_PLAIN_URL: "/_/_/about/privacy/plain.html",
    ABOUT_TERMS_URL: "http://www.pinterest.com/_/_/about/terms/",
    HELP_ABOUT_MAP_URL: "http://www.pinterest.com/_/_/help/articles/about-our-maps-and-data",
    HELP_CENTER_URL: "http://www.pinterest.com/_/_/help/",
    HELP_PASSWORD_RESET_URL: "http://www.pinterest.com/_/_/help/articles/trouble-pinterest-emails",
    HELP_PIN_POLICIES_URL: "http://www.pinterest.com/_/_/help/entries/21047417",
    HELP_REPORT_PERSON_URL: "http://www.pinterest.com/_/_/help/entries/22163668#person",
    HELP_WHY_BLOCKED_FOR_INAPPROPRIATE_URL: "http://www.pinterest.com/_/_/help/entries/21436306"
}, goog.provide("P.LoginStates"), P.LoginStates = {
    DEFAULT: 1,
    LIMITED: 2
}, goog.provide("P.ModalPresentationTypes"), P.ModalPresentationTypes = {
    FORM_SHEET: 0,
    PANEL: 1
}, function() {
    goog.provide("P.spinner");
    var a = {
        SMALL: "Small",
        MEDIUM: "Medium"
    }, b = {
        size: a.MEDIUM
    }, c = function(a) {
        this.options = _.extend({}, b, a), this.$spinEl = null
    };
    c.Size = a, c.prototype = {
        spin: function(a, b) {
            this.$spinEl && this.stop(), b = b || "spinner";
            var c = b + this.options.size;
            this.$spinEl = $('<div class="Spinner"><div class="' + c + '"></div></div>'), this.$spinEl.prependTo(a)
        },
        stop: function() {
            this.$spinEl.remove(), this.$spinEl = null
        }
    }, P.Spinner = c
}(), function() {
    goog.provide("P.body"), goog.require("P.logger");
    var a = P.Logger.getLogger("Body"), b = "noScroll", c = function() {
        this.scrollStack = [!0]
    };
    c.prototype = {
        pushScrolling: function(a) {
            return this.push().setScrolling(a), this
        },
        pop: function() {
            return this.scrollStack.length <= 1 ? void a.error("Tried to pop with only one item on stack.  Mismatched push and pops?") : (this.scrollStack.pop(), this.updateElement(), this)
        },
        setScrolling: function(a) {
            return this.scrollStack[this.scrollStack.length - 1] = a, this.updateElement(), this
        },
        push: function() {
            return this.scrollStack.push(this.peek()), this
        },
        peek: function() {
            return this.scrollStack[this.scrollStack.length - 1]
        },
        updateElement: function() {
            var a = this.peek();
            $("body").toggleClass(b, !a)
        }
    }, P.Body = new c, Pc.TEST_MODE && (P.Body.constructor = c)
}(), function() {
    goog.provide("P.polyfills");
    for (var a = ["ms", "moz", "webkit", "o"], b = 0; b < a.length&&!window.requestAnimationFrame; ++b)
        window.requestAnimationFrame = window[a[b] + "RequestAnimationFrame"], window.cancelAnimationFrame = window[a[b] + "CancelAnimationFrame"] || window[a[b] + "CancelRequestAnimationFrame"];
    Date.now = Date.now || function() {
        return (new Date).getTime()
    }
}(), function() {
    goog.provide("P.pubsub");
    var a = 0;
    P.PubSub = function(a) {
        this.ns = a, this.channels = {}
    };
    var b = function(a, b, c) {
        this.pubsub = a, this.target = b, this.subscriberOptions = c, this.topics = {}
    }, c = function(a, b) {
        this.pubsub = a, this.target = b, this.subscribers = {}, this.filters = {}, this.messages = {}
    };
    _.extend(P.PubSub.prototype, {
        createSubscriber: function(a, c) {
            return new b(this, a, c)
        },
        subscribe: function(a, b, c, d) {
            var e = this.createSubscriber(a, {
                handler: c,
                scope: d
            });
            return e.subscribe(b), e
        },
        publish: function(a, b, c) {
            this.getChannel(a).publish(b, c)
        },
        getChannel: function(a) {
            return this.channels[a] || (this.channels[a] = new c(this, a)), this.channels[a]
        },
        clearChannel: function(a) {
            var b = this.channels[a];
            b && (b.unsubscribeAll(), delete this.channels[a])
        }
    }), _.extend(c.prototype, {
        addSubscriber: function(a, b) {
            var c = a.getId();
            return this.subscribers[c] = a, _.each(b, function(b) {
                this.filters[b] || (this.filters[b] = {}), this.filters[b][c] || (this.filters[b][c] = a, _.isUndefined(this.messages[b]) || a.publish(b, this.messages[b]))
            }.bind(this)), a
        },
        removeSubscriber: function(a, b) {
            var c = a.getId();
            _.each(b, function(a) {
                this.filters[a] && delete this.filters[a][c]
            }.bind(this)), _.keys(this.subscribers).length < 1 && this.pubsub.clearChannel(this.target)
        },
        publish: function(a, b) {
            _.each(this.filters[a], function(c) {
                c.publish(a, b)
            }), "*" !== a && this.publish("*", b), this.messages[a] = b
        },
        getSubscribers: function() {
            var a = _.toArray(arguments);
            if (!a.length)
                return _.values(this.subscribers);
            var b = {};
            return _.each(a, function(a) {
                _.extend(b, this.filters[a])
            }.bind(this)), _.values(b)
        },
        unsubscribeAll: function() {
            _.each(this.subscribers, function(a) {
                a.unsubscribe()
            })
        }
    }), _.extend(b.prototype, {
        publish: function(a, b) {
            return this.getHandler().call(this.getScope(), this.target, a, b), this
        },
        subscribe: function() {
            var a = _.toArray(arguments);
            return this.getChannel().addSubscriber(this, a), _.each(a, function(a) {
                this.topics[a] = 1
            }.bind(this)), this
        },
        unsubscribe: function() {
            var a = _.toArray(arguments);
            return 0 === a.length && (a = this.getTopics()), _.each(a, function(a) {
                delete this.topics[a]
            }.bind(this)), this.getChannel().removeSubscriber(this, a), this
        },
        getChannel: function() {
            return this.pubsub.getChannel(this.target)
        },
        getHandler: function() {
            return this.subscriberOptions.handler
        },
        getScope: function() {
            return this.subscriberOptions.scope
        },
        getName: function() {
            return this.subscriberOptions.name
        },
        getId: function() {
            return this.id || (this.id = a++), this.id
        },
        getTopics: function() {
            return _.keys(this.topics)
        }
    }), P.PubSub.Subscriber = b, P.PubSub.Channel = c, P.pubsub = new P.PubSub("local")
}(), function() {
    goog.provide("P.appVersion");
    var a = {
        CURRENT: 1,
        NEW_VERSION_AVAILABLE: 2,
        NEW_VERSION_REQUIRED: 3
    }, b = function() {
        this.currentVersion = "", this.versionState = a.CURRENT
    };
    _.extend(b.prototype, {
        setup: function(b) {
            this.currentVersion = b, $(document).ajaxSend(function(a, b) {
                b.setRequestHeader("X-APP-VERSION", this.currentVersion)
            }.bind(this)), P.pubsub.subscribe(P.CONST.PUBSUB_CHANNEL_SITE, P.CONST.PUBSUB_TOPIC_APP_VERSION, function(a, b, c) {
                this._checkVersion(c)
            }.bind(this)), P.pubsub.subscribe(P.CONST.PUBSUB_CHANNEL_SITE, P.CONST.PUBSUB_TOPIC_APP_VERSION_AVAILABLE, function() {
                this.versionState === a.CURRENT && (this.versionState = a.NEW_VERSION_AVAILABLE)
            }.bind(this))
        },
        _checkVersion: function(b) {
            b !== this.currentVersion && (this.versionState = a.NEW_VERSION_REQUIRED)
        },
        isNewVersionAvailable: function() {
            return this.versionState === a.NEW_VERSION_AVAILABLE || this.isNewVersionRequired()
        },
        isNewVersionRequired: function() {
            return this.versionState === a.NEW_VERSION_REQUIRED
        }
    }), P.AppVersion = new b
}(), function() {
    goog.provide("P.deepLink");
    var a = function() {
        this.tracking = null, this.url = null
    };
    _.extend(a.prototype, {
        updateUrl: function(a) {
            this.url = a
        },
        setTracking: function(a) {
            this.tracking = a
        },
        setup: function(a, b, c) {
            this.updateUrl(a || b), this.setTracking(c), P.pubsub.subscribe(P.CONST.PUBSUB_CHANNEL_SITE, P.CONST.PUBSUB_TOPIC_DEEP_LINK, function(a, b, c) {
                this.updateUrl(c)
            }.bind(this))
        },
        getTrackedUrl: function() {
            return this.tracking ? P.url.appendQueryString(this.url, this.tracking) : this.url
        },
        attemptIOSDeepLink: function(a) {
            var b = this.getTrackedUrl();
            window.setTimeout(function() {
                window.location = b, this.shouldRedirectToFallback() && window.setTimeout(function() {
                    window.location = a
                }, 50)
            }.bind(this), 100)
        },
        shouldRedirectToFallback: function() {
            return - 1 !== window.navigator.userAgent.indexOf("Twitter for iPhone")?!1 : !0
        },
        attemptAndroidDeepLink: function(a) {
            window.location = a
        },
        redirectToDeepLink: function(a, b) {
            b === P.CONST.USER_AGENT_PLATFORM_IOS || b === P.CONST.USER_AGENT_PLATFORM_IPAD ? this.attemptIOSDeepLink(a) : b === P.CONST.USER_AGENT_PLATFORM_ANDROID && this.attemptAndroidDeepLink(a)
        },
        logDownloadClick: function(a, b, c, d) {
            if (b || c) {
                P.trackRegisterAction("mobile_app_nag_click");
                var e = P.ContextEvent.fromEventType(P.ContextLogging.EventType.REFERRER_APP_INSTALL_ATTEMPT);
                e.updateAuxData({
                    utm_medium: d,
                    utm_source: a
                }), P.ContextLogger.getInstance().addEvent(e)
            }
        },
        getLinkForUserAgent: function(a, b) {
            var c;
            return a === P.CONST.USER_AGENT_PLATFORM_IOS || a === P.CONST.USER_AGENT_PLATFORM_IPAD ? c = b.ios_deep_link : a === P.CONST.USER_AGENT_PLATFORM_ANDROID && (c = b.android_deep_link), c && b.deep_link_tracking && (c = P.url.appendQueryString(c, b.deep_link_tracking)), c
        }
    }), P.DeepLink = new a
}(), function() {
    goog.provide("P.experiments"), P.experiments.Client = function(a, b) {
        this.active = _.clone(a), this.triggerable = _.clone(b)
    }, P.experiments.Client.prototype.getGroupForExperiment = function(a, b) {
        return this._getGroupForExperiment(a, b)
    }, P.experiments.Client.prototype._getGroupForExperiment = function(a, b, c) {
        void 0 === b && (b=!0);
        var d = this.active[a];
        return void 0 === d && b && (d = this.triggerable[a], void 0 !== d && (delete this.triggerable[a], this.active[a] = d, this._reportExperimentActivated(a, c))), d || null
    }, P.experiments.Client.prototype.inExperimentGroups = function(a, b, c) {
        var d = this.getGroupForExperiment(a, c);
        return null !== d && _.contains(b, d)
    }, P.experiments.Client.prototype.activateAndPersistExperiment = function(a) {
        this._getGroupForExperiment(a, !0, !0)
    }, P.experiments.Client.prototype.inExperimentGroup = function(a, b, c) {
        return this.inExperimentGroups(a, [b], c)
    }, P.experiments.Client.prototype.inExperimentGroupsActiveOrTriggerable = function(a, b) {
        for (var c in b)
            if (this.inExperimentGroupActiveOrTriggerable(a, b[c]))
                return !0;
        return !1
    }, P.experiments.Client.prototype.inExperimentGroupActiveOrTriggerable = function(a, b) {
        return (this.active[a] || this.triggerable[a]) === b
    }, P.experiments.Client.prototype._reportExperimentActivated = function(a, b) {
        var c = P.resourceFactory.create("ActivateExperimentResource", {
            experiment_name: a,
            add_to_experiment: !!b
        });
        c.callCreate({
            showError: !1
        })
    }, P.experiments.Client.prototype.getDebugInfo = function() {
        return JSON.stringify({
            active: this.active,
            triggerable: this.triggerable
        })
    };
    var a = Pc.experiments;
    P.experiments.instance = new P.experiments.Client(a.active, a.triggerable)
}(), function() {
    goog.provide("P.error"), P.Error = function() {
        this.name = "P.Error", this.code = null, this.http_status = null, this.api_error_code = null, this.target = null, this.stack_trace = null, this.extra_data = null, this.request_identifier = null
    }, P.Error.prototype = new Error, P.Error.prototype.constructor = P.Error, P.Error.fromPlainObject = function(a) {
        var b = new P.Error;
        return a.message && (b.message = a.message), a.code && (b.code = a.code), a.http_status && (b.http_status = a.http_status), a.api_error_code && (b.api_error_code = a.api_error_code), a.target && (b.target = a.target), a.stack_trace && (b.stack_trace = a.stack_trace), a.extra_data && (b.extra_data = a.extra_data), a.request_identifier && (b.request_identifier = a.request_identifier), b
    }
}(), function() {
    goog.provide("P.errors"), goog.require("P.experiments"), P.Errors = {}, P.Errors.ENABLE_WRAPPING = P.experiments.instance.inExperimentGroup("denzel_error_wrap", "enabled"), P.Errors.wrapFn = function(a, b) {
        return b ? P.Errors.ENABLE_WRAPPING ? function() {
            try {
                return b.apply(this, arguments)
            } catch (c) {
                if (!c.loggedToServer) {
                    var d = Array.prototype.slice.call(arguments, 0);
                    P.Errors.reportError(this, a, d, c), c.loggedToServer=!0
                }
                throw c
            }
        } : b : function() {}
    }, P.Errors.wrap = function(a, b) {
        _.each(b, function(b) {
            var c = a[b];
            a[b] = P.Errors.wrapFn(b, c)
        })
    }, P.Errors.reportError = function(a, b, c, d) {
        var e = {
            fn_name: b || "unknown_function_name"
        };
        if (a instanceof P.Module) {
            for (var f = b, g = a; g;)
                f = g.getDebugInfo() + ":" + f, g = g.parent;
            e.error_path = f
        } else 
            a instanceof P.Resource && (e.resource_name = a.name);
        if (c[0]instanceof $.Event) {
            var h = c[0], i = h.currentTarget;
            e.event = {
                type: h.type,
                target_class: i.className.replace(/\s+/g, " ")
            }, i.href && (e.event.target_href = i.href)
        }
        e.traceback = printStackTrace({
            e: d
        }).join("\n"), P.Logger.getLogger("Errors").error(d.message, e)
    }, P.showError = function(a, b) {
        a = _.escape(a), P.showHtmlError(a, b)
    }, P.showHtmlError = function(a, b) {
        var c, d = {
            name: "ConfirmDialog",
            options: {
                view_type: "error",
                message: a,
                template: null
            }
        }, e = P.getModalManager().getTopModal();
        if (e) {
            var f = e.options.module;
            c = "error" === f.options.view_type
        }
        c || P.loadModule(d).then(function(a) {
            b && a.on(P.CONST.EVENT_CONFIRM, b), P.getModalManager().showInModal(a)
        })
    }
}(), function() {
    goog.provide("P.fb"), goog.require("P.console"), goog.require("P.script");
    var a=!1;
    P.fb = {}, P.fb.ensureInit = function(b) {
        var c = "fb";
        P.script.load([], "//connect.facebook.net/en_US/all.js", c), P.script.ready(c, function() {
            var c = window.FB;
            c && (a || (c.init({
                appId: P.FB_KEY,
                status: !0
            }), FB.Event.subscribe("auth.statusChange", function() {
                P.fb.refreshAccessToken()
            }), a=!0), b(c))
        })
    }, P.fb.ensureLoggedIn = function(a) {
        P.fb.ensureInit(function(b) {
            b.getUserID() ? a(b) : b.login(function() {
                a(b)
            })
        })
    }, P.fb.refreshAccessToken = function() {
        P.currentUser.isAuthenticated() && P.currentUser.attributes.facebook_id&&!P.currentUser.isLimitedLogin() && P.fb.ensureInit(function(a) {
            if (a.getUserID()) {
                var b = a.getAccessToken();
                if (b) {
                    var c = P.resourceFactory.create("UserSocialNetworkResource", {
                        facebook_token: b
                    });
                    c.callUpdate({
                        showError: !1
                    })
                }
            }
        })
    }
}(), function() {
    goog.provide("P.gapi"), P.gapi = {}, P.gapi.get = function(a) {
        var b = "gplus";
        P.script.load([], "https://apis.google.com/js/client:plusone.js", b), P.script.ready(b, function() {
            a(window.gapi)
        })
    }
}(), function() {
    goog.provide("P.hoverIntent"), P.HoverIntent = function(a, b) {
        this.$el = a, this.options = _.extend({
            sensitivity: 10,
            enterDelay: 0,
            exitDelay: 0,
            interval: 40
        }, b), this.$el.on("mouseenter mouseleave", this._handleHover.bind(this))
    }, _.extend(P.HoverIntent.prototype, Backbone.Events, {
        _checkMouseEnter: function() {
            this._clearTimeout(), this._isMouseStill() ? this._onMouseEnterComplete() : (this._setPreviousXY(this._currX, this._currY), this._timeout = P.setTimeout(this._checkMouseEnter.bind(this), this.options.interval))
        },
        _clearTimeout: function() {
            this._timeout && (this._timeout = clearTimeout(this._timeout))
        },
        _handleHover: function(a) {
            this._clearTimeout(), "mouseenter" === a.type ? (this._onMouseEnterStart(), this.options.enterDelay ? (this._setPreviousXY(a.pageX, a.pageY), this.$el.on("mousemove.HoverIntent", function(a) {
                this._setCurrentXY(a.pageX, a.pageY)
            }.bind(this)), this._isEntered || (this._timeout = window.setTimeout(function() {
                this._checkMouseEnter()
            }.bind(this), this.options.enterDelay))) : this._onMouseEnterComplete()) : (this._onMouseOutStart(), this._isEntered && (this._timeout = window.setTimeout(function() {
                this._onMouseOutComplete()
            }.bind(this), this.options.exitDelay)))
        },
        _isMouseStill: function() {
            var a = Math.abs(this._prevX - this._currX), b = Math.abs(this._prevY - this._currY);
            return a || b || (a = 0, b = 0), a + b < this.options.sensitivity
        },
        _onMouseEnterStart: function() {
            this.trigger(P.CONST.EVENT_HOVERINTENT_ENTER_START)
        },
        _onMouseEnterComplete: function() {
            this.$el.off("mousemove.HoverIntent"), this._isEntered = 1, this.trigger(P.CONST.EVENT_HOVERINTENT_ENTER_COMPLETE)
        },
        _onMouseOutStart: function() {
            this.$el.off("mousemove.HoverIntent"), this.trigger(P.CONST.EVENT_HOVERINTENT_OUT_START)
        },
        _onMouseOutComplete: function() {
            this._clearTimeout(), this._isEntered = 0, this.trigger(P.CONST.EVENT_HOVERINTENT_OUT_COMPLETE)
        },
        _setCurrentXY: function(a, b) {
            this._currX = a, this._currY = b
        },
        _setPreviousXY: function(a, b) {
            this._prevX = a, this._prevY = b
        }
    })
}(), function() {
    goog.provide("P.isHovering");
    var a = "data-is-hovering";
    jQuery.fn.initHovering = function() {
        return this.each(function(b, c) {
            $(c).hover(function() {
                $(c).attr(a, "true")
            }, function() {
                $(c).removeAttr(a)
            }).removeAttr(a)
        }), this
    }, jQuery.fn.isHovering = function() {
        return !!$(this).attr(a)
    }
}(), function() {
    goog.provide("P.fbUtil"), goog.require("P.fb");
    var a = "publish_actions";
    P.FbUtil = {}, P.FbUtil.checkFbTimelinePermission = function(b) {
        var c = function(c) {
            c.api("/me/permissions", function(c) {
                var d = c.data;
                d && d[0][a] ? b.success && b.success() : b.error && b.error()
            })
        };
        P.fb.ensureInit(c)
    }, P.FbUtil.fbConnectedAccountMatchesLoggedInAccount = function(a, b) {
        if (!b)
            return !0;
        var c = a.getAuthResponse();
        return c ? b === c.userID : !0
    }, P.FbUtil.maybeRequestFbTimelinePermission = function(a, b) {
        P.fb.ensureInit(function(c) {
            var d = P.FbUtil.fbConnectedAccountMatchesLoggedInAccount(c, b);
            return d ? void P.FbUtil.checkFbTimelinePermission({
                success : function() {
                    a.success && a.success(), a.complete && a.complete()
                }, error : function() {
                    P.FbUtil.fbLogin(a)
                }
            }) : (P.showError(P._("Oops! Your account is linked to a different Facebook account than the one you're logged into now.")), a.error && a.error(), void(a.complete && a.complete()))
        })
    }, P.FbUtil.fbLogin = function(b) {
        P.fb.ensureInit(function(c) {
            c.login(function(a) {
                a.authResponse ? P.FbUtil.checkFbTimelinePermission(b) : b.error && b.error(), b.complete && b.complete()
            }, {
                scope: a
            })
        })
    }
}(), function() {
    goog.provide("P.user"), goog.require("P.start"), goog.require("P.fb"), goog.require("P.LoginStates"), P.User = Backbone.Model.extend({
        initialize: function() {
            this.log = P.Logger.getLogger("User")
        },
        isAuthenticated: function() {
            return !!P.CONTEXT.is_authenticated
        },
        isLimitedLogin: function() {
            return this.get("login_state") === P.LoginStates.LIMITED
        },
        attemptLogin: function() {
            this.attemptLoginWithFacebook()
        },
        attemptLoginWithFacebook: function() {
            var a = P.getQueryStringParams(), b=!1;
            a.next && (b = P.beginsWith(a.next, "/oauth/dialog")), (b ||!this.fbAutoLoginDisabled()) && P.fb.ensureInit(function(a) {
                var b = this._attemptLoginWithFacebook.bind(this);
                a.getLoginStatus(b, !0)
            }.bind(this))
        },
        fbAutoLoginDisabled: function() {
            var a = Cookie.get(P.CONST.COOKIE_FB_AUTO_LOGIN_DISABLED_EXP), b = Cookie.get(P.CONST.COOKIE_FB_AUTO_LOGIN_DISABLED_PERSIST), c = Cookie.get(P.CONST.COOKIE_FB_AUTO_LOGIN_DISABLED);
            return a ? c && b : c
        },
        _attemptLoginWithFacebook: function(a) {
            var b = a.authResponse;
            if (b) {
                var c = {
                    facebook_id: b.userID,
                    facebook_token: b.accessToken,
                    facebook_autologin: !0
                };
                this.login(c).then(function() {
                    window.location.reload(!0)
                })
            }
        },
        login: function(a) {
            var b = P.resourceFactory.create("UserSessionResource", a), c = {
                showError: !1,
                async: !1
            };
            return b.callCreate(c).then(function(a) {
                return this.log.debug("Login, successful", a), a
            }.bind(this))
        },
        logout: function() {
            return Cookie.set(P.CONST.COOKIE_FB_AUTO_LOGIN_DISABLED, "True"), Promise.resolve(void 0)
        },
        isWriteBanned: function() {
            var a = P.currentUser.get("nags") || [];
            return a.length > 0 && "write_banned" === a[0].type
        }
    }), P.currentUser = new P.User, P.start.ready(function(a) {
        P.currentUser.set(a.user)
    })
}(), function() {
    goog.provide("P._"), goog.provide("P.string"), P._ = function(a) {
        return P.STRINGS && P.STRINGS.hasOwnProperty(a) ? P.STRINGS[a] : a
    }, P.string.common = {}, P.string.initializeCommonStrings = function() {
        P.string.common = {
            successInviteSentToEmail: P._("Success! Invitation sent to {{ email }}"),
            connectError: P._("Couldn't connect. You must authorize Pinterest."),
            defaultErrorMessage: P._("Sorry! Something went wrong on our end!"),
            asciiPasswordError: P._("Oops! Your password can only have English letters, numbers and basic symbols.")
        }
    };
    var a = /\{\{\s*(\w+)\s*\}\}/g;
    P.string.format = function(b, c) {
        var d = function(a, d) {
            return c && c.hasOwnProperty(d) ? c[d] : (P.string.logError("Missing arg for format string", {
                format: b,
                argId: d
            }), "")
        }, e = b.replace(a, d);
        return e
    }, P.string.logError = function(a, b) {
        P.Logger.getLogger("Strings").error(a, b)
    }, P.getHumanizedTimesince = function(a) {
        var b = function(a, b) {
            return a.getWeekNumber() - b.getWeekNumber() + 52 * (b.getYear() - a.getYear())
        }, c = function(a, c) {
            var d = b(a, c);
            return Math.floor(d / 52)
        }, d = function(a, b) {
            var c = 864e5;
            return Math.round(Math.abs((a.getTime() - b.getTime()) / c))
        }, e = function(a, b) {
            var c = 36e5;
            return Math.floor(Math.abs(a - b) / c)
        }, f = function(a, b) {
            return Math.floor((b - a) / 1e3 / 60)
        }, g = new Date(a), h = new Date, i = c(g, h);
        if (i > 0)
            return i > 1 ? P.string.format(P._("{{ years }} years ago"), {
                years: i
            }) : P.string.format(P._("{{ year }} year ago"), {
                year: i
            });
        var j = b(g, h);
        if (j > 1)
            return j > 1 ? P.string.format(P._("{{ weeks }} weeks ago"), {
                weeks: j
            }) : P.string.format(P._("{{ week }} week ago"), {
                week: j
            });
        var k = d(g, h);
        if (k > 0)
            return k > 1 ? P.string.format(P._("{{ days }} days ago"), {
                days: k
            }) : P.string.format(P._("{{ day }} day ago"), {
                day: k
            });
        var l = e(g, h);
        if (l > 0)
            return l > 1 ? P.string.format(P._("{{ hours }} hours ago"), {
                hours: l
            }) : P.string.format(P._("{{ hour }} hour ago"), {
                hour: l
            });
        var m = f(g, h);
        return m > 0 ? m > 1 ? P.string.format(P._("{{ minutes }} minutes ago"), {
            minutes: m
        }) : P.string.format(P._("{{ minute }} minute ago"), {
            minute: m
        }) : P._("just now")
    };
    var b = /^[\w.!#$%&'*+\-\/=?\^`{|}~]+@[a-z\d\-]+(\.[a-z\d\-]+)+$/i;
    P.isEmailAddress = function(a) {
        return b.test(a)
    }
}(), function() {
    goog.provide("P.router"), goog.require("P.logger"), function() {
        var a = P.Logger.getLogger("P.router"), b = /\$\{(\d+)\}/g, c = /\?\{(\w+)\}/g, d = /\$\{(\w+)\}/g, e = /^([^\?]*?)\?(.*)$/, f = function(a, e, f, g) {
            var h=!1;
            return a = a.replace(c, function(a, b) {
                var c = f[b];
                return void 0 === c && (h=!0), c
            }), h ? null : (a = a.replace(b, function(a, b) {
                return e[parseInt(b, 10)]
            }), g && (a = a.replace(d, function(a, b) {
                var c = g[b];
                return e[c]
            })), a)
        }, g = function(a, b, c, d) {
            var e = a;
            return _.isObject(a) ? (e = {}, _.each(a, function(a, f) {
                e[g(f, b, c, d)] = g(a, b, c, d)
            })) : _.isString(a) && (e = f(a, b, c, d)), e
        };
        P.Route = function(a) {
            this.pathPattern = new RegExp(a, "i"), this.module = "", this.named = {}, this.options = {}, this.resource = null, this.extraContent = {}
        }, P.Route.fromPlainObject = function(a) {
            var b = a.pathPattern;
            if (!b)
                throw new Error("pathPattern is required");
            var c = new P.Route(b);
            return "module"in a && (c.module = a.module), "named"in a && (c.named = a.named), "options"in a && (c.options = a.options), "resource"in a && (c.resource = a.resource), "extraContent"in a && (c.extraContent = a.extraContent), c
        }, P.RouteMatch = function() {
            this.pathPattern = null, this.module = "", this.named = {}, this.options = {}, this.resource = null, this.extraContent = {}, this.navigateData = null
        }, P.Router = function() {
            this.routes = [], this.lastUrl = window.location.href, this.log = P.Logger.getLogger("Router")
        }, _.extend(P.Router.prototype, Backbone.Events), _.extend(P.Router.prototype, {
            start: function() {
                if (_.each(P.ROUTES, function(a) {
                    var b = P.Route.fromPlainObject(a);
                    this.addRoute(b)
                }.bind(this)), P.useHistory()) {
                    if (window.history.replaceState) {
                        var a = $("link[rel=canonical]").attr("href");
                        if (window.location.href !== a) {
                            var b = "state"in window.history ? window.history.state: {};
                            try {
                                if (P.currentUser.isAuthenticated()) {
                                    var c = P.url.appendQueryString(a, P.getQueryStringParams());
                                    window.history.replaceState(b, document.title, c)
                                } else 
                                    window.history.replaceState(b, document.title, a)
                                } catch (d) {
                                this.log.error("replaceState failed", d)
                            }
                            this.lastUrl = window.location.href
                        }
                    }
                    $(window).on("popstate", function(a) {
                        this.log.debug("popstate fired, lastUrl", this.lastUrl, " new URL ", window.location.href), this.lastUrl === window.location.href ? this.log.debug("ignoring spurious popstate event") : this.onStateChange(a), this.lastUrl = window.location.href
                    }.bind(this))
                }
            },
            navigate: function(a, b, c) {
                c = c || new P.navigateData.NavigateData, this.navigateData = c, b.trigger && ($("link[rel=canonical]").remove(), window.history.pushState({}, document.title, a), this.lastUrl = window.location.href);
                var d = this.resolve(a);
                this.log.debug("route matched", d, a), d ? this.trigger(P.CONST.EVENT_ROUTE_MATCHED, d) : this.trigger(P.CONST.EVENT_ROUTE_NO_MATCH, a)
            },
            resolve: function(a) {
                var b = null, c = null, d = null;
                (d = e.exec(a)) ? (b = d[1], c = d[2]) : b = a;
                for (var f = decodeURIComponent(b), g = null, h = 0; h < this.routes.length; h++) {
                    var i = this.routes[h], j = i.pathPattern.exec(f);
                    if (j) {
                        var k = j.slice(1);
                        g = this.subRoute(i, k, c);
                        break
                    }
                }
                return g
            },
            addRoute: function(a) {
                this.routes.push(a)
            },
            subRoute: function(a, b, c) {
                var d = P.getQueryStringParams(c), e = new P.RouteMatch;
                return e.pathPattern = a.pathPattern, e.module = g(a.module, b, d, a.named), e.named = g(a.named, b, d, a.named), e.options = g(a.options, b, d, a.named), e.resource = g(a.resource, b, d, a.named), e.extraContent = g(a.extraContent, b, d, a.named), e.navigateData = this.navigateData, this.navigateData = new P.navigateData.NavigateData, e
            },
            onStateChange: function() {
                this.navigate(window.location.pathname, {
                    trigger: !1
                })
            }
        }), P.navigate = function(b, c) {
            b = P.normalizeUrl(b), c = c || new P.navigateData.NavigateData;
            var d = P.url.getUrlClass(b);
            if (d === P.url.UrlClass.UNTRUSTED || c.evt && c.evt.data && c.evt.data.useNewTab) {
                var e = null;
                return c.evt && c.evt.data && (e = c.evt.data.pinId), void P.SafeLink.open(b, e)
            }
            return P.useHistory() && d !== P.url.UrlClass.TRUSTED_DIFFERENT_ORIGIN ? d === P.url.UrlClass.SAME_ORIGIN ? (c.fromNavigate=!0, void P.router.get().navigate(b, {
                trigger: !0
            }, c)) : void a.error("unexpected UrlClass", d, b) : void P.changeWindowLocation(b, !1)
        }, P.Errors.wrap(P.Router.prototype, ["start"]), P.router.set = function(a) {
            P._router = a
        }, P.router.get = function() {
            return P._router
        }, P.router.set(new P.Router)
    }()
}(), function() {
    goog.provide("P.filter"), P.filter = {}, P.filter.FilterMatchResult = function() {
        this.hasExactMatch=!1, this.itemMatched = []
    }, P.filter._escapeRegExp = function(a) {
        return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&")
    }, P.filter._getTestFunction = function(a) {
        var b = a.split(" "), c = _.without(b, ""), d = _.map(c, P.filter._escapeRegExp), e = new RegExp(d.join(".*"), "i");
        return function(a) {
            return e.test(a)
        }
    }, P.filter._makeCaseInsensitiveEqualsRegExp = function(a) {
        return new RegExp("^" + P.filter._escapeRegExp(a) + "$", "i")
    }, P.filter.match = function(a, b) {
        var c = P.filter._getTestFunction(a), d = new P.filter.FilterMatchResult;
        d.itemMatched = _.map(b, c);
        var e = P.filter._makeCaseInsensitiveEqualsRegExp(a);
        return d.hasExactMatch = _.some(b, function(a) {
            return e.test(a)
        }), d
    }
}(), function() {
    goog.provide("P.url"), goog.provide("P.beginsWith");
    var a;
    P.Logger && (a = P.Logger.getLogger("P.url")), P.url = {}, P.beginsWith = function(a, b) {
        return 0 === a.lastIndexOf(b, 0)
    }, P.endsWith = function(a, b) {
        return - 1 !== a.indexOf(b, a.length - b.length)
    }, P.getQueryStringParams = function(a) {
        a = a || window.location.search, "?" === a[0] && (a = a.substring(1));
        for (var b, c = /\+/g, d = /([^&=]+)=?([^&]*)/g, e = function(a) {
            return decodeURIComponent(a.replace(c, " "))
        }, f = {}; b = d.exec(a);)
            f[e(b[1])] = e(b[2]);
        return f
    };
    var b = "";
    P.url._getAuthenticationOrigin = function() {
        return b
    };
    var c = "";
    P.url._getTrustedHostnameEnding = function() {
        return c
    }, P.start && P.start.ready(function(a) {
        b = a.authenticationOrigin, c = a.trustedHostnameEnding
    });
    var d = function(b, c) {
        c = c || {}, c.next && a && a.error('makeNextUrl: passing "next" in "params" is not allowed', {
            next: c.next
        });
        var d = _.extend({}, c, {
            next: window.location.href
        });
        d.prev || (d.prev = window.location.href);
        var e = P.url._getAuthenticationOrigin() + b + "?" + $.param(d);
        return e
    };
    P.getRegisterUrl = function(a) {
        return d("/join/", a)
    }, P.getLoginUrl = function(a) {
        return d("/login/", a)
    }, P.absolutify = function(a, b, c) {
        return a.match(/^https{0,1}:\/\//) ? a : (void 0 === b && (b = window.location.protocol), void 0 === c && (c = window.location.hostname, window.location.port && (c += ":" + window.location.port)), b + "//" + c + a)
    }, P.normalizeUrl = function(a) {
        var b = P.absolutify("/");
        return P.beginsWith(a, b) ? a.substr(b.length - 1) : a
    }, P.getCurrentUrl = function() {
        return window.location.pathname + ("?" === window.location.search ? "" : window.location.search)
    }, P.isOffsiteUrl = function(a) {
        return !(!a ||!a.match(/^https{0,1}:\/\//) || P.url.isTrustedOrigin(a))
    }, P.url.UrlClass = {
        SAME_ORIGIN: 1,
        TRUSTED_DIFFERENT_ORIGIN: 2,
        UNTRUSTED: 3,
        INVALID: 4
    }, P.url._parse = function() {
        var a = document.createElement("a"), b = /^https{0,1}:\/\/[^\/]+/;
        return function(c) {
            a.href = c;
            var d = a.href, e = b.exec(d), f = e ? e[0]: null, g = a.hostname;
            return {
                origin: f,
                hostname: g
            }
        }
    }(), P.url.getUrlClass = function(a) {
        var b = P.url._parse(a);
        if (b.origin === window.location.origin)
            return P.url.UrlClass.SAME_ORIGIN;
        if (b.hostname === window.location.hostname)
            return P.url.UrlClass.TRUSTED_DIFFERENT_ORIGIN;
        if (b.hostname) {
            var c = P.url._getTrustedHostnameEnding();
            if (b.hostname === c || P.endsWith(b.hostname, "." + c))
                return P.url.UrlClass.TRUSTED_DIFFERENT_ORIGIN
        }
        var d = P.url._getAuthenticationOrigin();
        return b.origin && b.origin === d ? P.url.UrlClass.TRUSTED_DIFFERENT_ORIGIN : b.origin ? P.url.UrlClass.UNTRUSTED : P.url.UrlClass.INVALID
    }, P.url.isTrustedOrigin = function(a) {
        switch (P.url.getUrlClass(a)) {
        case P.url.UrlClass.SAME_ORIGIN:
        case P.url.UrlClass.TRUSTED_DIFFERENT_ORIGIN:
            return !0
        }
        return !1
    }, P.url.buildRelativeUrl = function(a, b) {
        var c = $.param(b);
        return a + "?" + c
    }, P.url.appendQueryString = function(a, b) {
        if (!_.isEmpty(b)) {
            var c = a.split("?")[0], d = a.split("?")[1], e = d ? P.getQueryStringParams(d): {}, f = $.extend({}, e, b);
            return c + "?" + $.param(f)
        }
        return a
    }
}(), function() {
    goog.provide("P.autologin"), P.autologin = {
        checkForAutologin: function() {
            return "true" === P.currentUser.get("autologin")
        },
        showLoginErrorDialog: function(a, b) {
            var c = {
                name: "ConfirmDialog",
                options: {
                    button_text: P._("Log in to continue"),
                    body_message: b,
                    title: P._("Password, please!"),
                    template: "generic"
                }
            };
            P.loadModule(c).then(function(b) {
                P.getModalManager().showInModal(b), a.listen(b, P.CONST.EVENT_CONFIRM, function() {
                    a.navigate("/login/", null, !1)
                })
            })
        }
    }
}(), function() {
    goog.provide("P.util"), goog.require("P.errors"), goog.require("P.ContextLogging.ComponentType"), goog.require("P.ContextLogging.EventType"), goog.require("P.LoginStates"), goog.require("P.ModalPresentationTypes"), goog.require("P.InProductUrls");
    var a = function() {
        return P.currentUser.get("locale") || window.navigator.language
    }, b = {
        _: function(a) {
            return nunjucks.runtime.markSafe(P._(a))
        },
        _ngettext: function(b, c, d) {
            var e, f;
            return f = goog.i18n.pluralRules.select(d, e, a()) === goog.i18n.pluralRules.Keyword.ONE ? b : c, nunjucks.runtime.markSafe(P._(f))
        },
        _interpolate: function(a, b) {
            var c = {};
            for (var d in b) {
                var e = b[d], f=!0;
                c[d] = nunjucks.runtime.suppressValue(e, f)
            }
            return nunjucks.runtime.markSafe(P.string.format(a, c))
        },
        ComponentType: P.ContextLogging.ComponentType,
        ElementType: P.ContextLogging.ElementType
    }, c = _.memoize(function() {
        var a = nunjucks.configure({
            autoescape: !0,
            dev: !0
        });
        a.addFilter("to_json", function(a) {
            return JSON.stringify(a)
        }), a.addFilter("dict_copy", function(a) {
            if (!(a instanceof Object) || a instanceof Array || a instanceof Function)
                return a;
            var b = {};
            for (var c in a)
                a.hasOwnProperty(c) && (b[c] = a[c]);
            return b
        }), a.addFilter("should_include_timestamp", function(a, b) {
            var c = b.previous_message_time, d = b.chunk_time || 3600;
            c || (c = new Date);
            var e = Math.abs((new Date(a) - new Date(c)) / 1e3);
            return e > d
        }), a.addFilter("urlparams", function(a, b) {
            var c = $.param(_.omit(b, "__keywords"));
            return c ? (a +=- 1 !== a.indexOf("?") ? "&" : "?", a += c) : a
        }), a.addFilter("named_format", function(a, b) {
            return P.string.format(a.toString(), b)
        }), a.addFilter("strip", function(a, b) {
            var c = new RegExp("^[ " + b + "]+|[ " + b + "]+$", "g");
            return a ? a.replace(c, "") : a
        }), a.addFilter("emojify", function(a) {
            function b(a, b) {
                return 1024 * (a - 55296) + (b - 56320) + 65536
            }
            var c, d = /([\ud800-\udbff])([\udc00-\udfff])/g, e = a.match(d);
            return e ? (c = a.replace(d, function(a, c, d) {
                var e = b(c.charCodeAt(0), d.charCodeAt(0));
                return '<span class="emoji emoji' + e.toString(16) + '"></span>'
            }), nunjucks.runtime.markSafe(c)) : a
        }), a.addFilter("linkify", function(a, b, c) {
            isNaN(b) && (b = 1 / 0);
            var d = c===!0 ? ' rel="nofollow"': "", e = /^(?:\(|<|&lt;)?(.*?)(?:\.|,|\)|\n|>|&gt;)?$/, f = /^[\w.!#$%&'*+\-\/=?\^`{|}~]+@[a-z\d\-]+(\.[a-z\d\-]+)+$/i, g = /^https?:\/\/.*$/, h = /^www\./, i = /\.(?:org|net|com)(?:\:|\/|$)/, j = a.split(/\s+/).filter(function(a) {
                return a && a.length
            }).map(function(a) {
                var c = a.match(e), j = c && c[1] || a, k = _.escape(j), l = j.substr(0, b), m = _.escape(l), n = "", o = "";
                if (j !== a) {
                    var p = a.indexOf(j);
                    n = a.substring(0, p), o = a.substring(p + j.length)
                }
                return j = g.test(j) ? '<a href="' + k + '"' + d + ">" + m + "</a>" : h.test(j) ? '<a href="http://' + k + '"' + d + ">" + m + "</a>" : f.test(j) ? '<a href="mailto:' + k + '">' + k + "</a>" : i.test(j) ? '<a href="http://' + k + '"' + d + ">" + m + "</a>" : _.escape(j), _.escape(n) + j + _.escape(o)
            });
            return nunjucks.runtime.markSafe(j.join(" "))
        }), a.addFilter("cdn_version_url", function(a) {
            return a
        }), a.addFilter("pin_url", function(a) {
            return "/pin/" + a + "/"
        });
        var c = function(a, b, c) {
            if (a.length <= b)
                return a;
            var d = a.lastIndexOf(" ", b);
            return a.substring(0, d) + c
        };
        return a.addFilter("smart_truncate", function(a, b, d) {
            return b || (b = 80), d || (d = "..."), a && (a = c(a, b, d)), a
        }), a.addFilter("parse_date", function(a) {
            return a
        }), a.addFilter("humanize_timesince", function(a) {
            return a ? P.getHumanizedTimesince(a) : void 0
        }), a.addFilter("is_just_now", function(a) {
            if (!a)
                return !1;
            var b = new Date(a), c = new Date;
            return 0 === Math.floor((c - b) / 1e3 / 60)
        }), a.addFilter("contains", function(a, b) {
            return - 1 !== a.indexOf(b)
        }), a.addFilter("sub", function(a, b, c) {
            return "undefined" === typeof c && (c = a.length), a.slice(b, c)
        }), a.addFilter("numberfmt", function(a, b, c, d) {
            return c && d && a > d ? d + "+" : a
        }), _.each(b, function(b, c) {
            a.addGlobal(c, b)
        }), a.addGlobal("LoginStates", P.LoginStates), a.addGlobal("ModalPresentationTypes", P.ModalPresentationTypes), a.addGlobal("settings", {
            ABOUT_PRIVACY_PLAIN_URL: P.InProductUrls.ABOUT_PRIVACY_PLAIN_URL,
            ABOUT_TERMS_URL: P.InProductUrls.ABOUT_TERMS_URL,
            HELP_ABOUT_MAP_URL: P.InProductUrls.HELP_ABOUT_MAP_URL,
            HELP_CENTER_URL: P.InProductUrls.HELP_CENTER_URL,
            HELP_PASSWORD_RESET_URL: P.InProductUrls.HELP_PASSWORD_RESET_URL,
            HELP_PIN_POLICIES_URL: P.InProductUrls.HELP_PIN_POLICIES_URL,
            HELP_REPORT_PERSON_URL: P.InProductUrls.HELP_REPORT_PERSON_URL,
            HELP_WHY_BLOCKED_FOR_INAPPROPRIATE_URL: P.InProductUrls.HELP_WHY_BLOCKED_FOR_INAPPROPRIATE_URL
        }), a
    });
    P.renderNunjucks = function(a, b) {
        var d = c();
        return d.render(a, b)
    }, P.useHistory = function() {
        return !!(window.history && window.history.pushState && window.history.replaceState)
    }, jQuery.fn.positionAncestor = function(a) {
        var b = 0, c = 0;
        return a.length > 0 && this.each(function(d, e) {
            var f = $(e), g = f.offset();
            if (a[0] === window)
                b = g.left, c = g.top;
            else {
                var h = a.scrollLeft(), i = a.scrollTop(), j = a.offset();
                b = h + g.left - j.left, c = i + g.top - j.top
            }
            return !1
        }), {
            left: b,
            top: c
        }
    }, P.debounce = function(a, b, c) {
        var d = _.debounce(a, c, !0), e = _.debounce(b, c);
        return function() {
            d.apply(this, arguments), e.apply(this, arguments)
        }
    }, P.toArgumentString = function(a) {
        var b = [];
        return _.each(a, function(a, c) {
            a = a && a.toString ? a.toString() : JSON.stringify(a), b.push(c + "=" + a)
        }), b.join(", ")
    };
    var d = /(<([^>]+)>)/gi;
    P.stripTags = function(a) {
        return a.replace(d, "")
    }, P.normalizeScroller = function(a) {
        return a && a[0] && a[0] !== window || (a = $("body,html")), a
    }, P.scrollToTop = function(a) {
        var b = a.callback || P.NOOP, c = a.duration || P.CONST.SCROLL_TO_TOP_ANIMATION_TIME, d = P.normalizeScroller(a.$scroller), e = a.newScrollOffset || 0;
        d.animate({
            scrollTop: e
        }, {
            duration: c,
            complete: _.once(b)
        })
    }, P.changeWindowLocation = function(a, b) {
        P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_SITE, P.CONST.PUBSUB_TOPIC_WINDOW_LOCATION_CHANGE, {}), b ? window.open(a, "_blank") : (P.trackRegisterAction("setting_new_window_location"), window.location.href = a)
    }, P.navigateAfterLoginStatusChange = function(a) {
        P.url.isTrustedOrigin(a) || (a = "/", P.trackRegisterAction("url_reset")), P.changeWindowLocation(a, !1)
    }, P.trackRegisterAction = function(a) {
        var b = P.resourceFactory.create("UserRegisterTrackActionResource", {
            action: a
        });
        b.callUpdate({
            showError: !1
        })
    }, P.getDebugWindow = function() {
        return window.opener || window
    }, P.prefixVendorAttributes = function(a) {
        for (var b = ["ms", "moz", "webkit", "o"], c = 0; c < b.length; c++)
            b[c] = "-" + b[c] + "-" + a;
        return b.push(a), b
    }, P.getResetPasswordOneClickUrl = function(a) {
        return "/login/reset/?" + $.param(a)
    }, P.keyCode = {
        BACKSPACE: 8,
        COMMA: 188,
        DELETE: 46,
        DOWN: 40,
        END: 35,
        ENTER: 13,
        ESCAPE: 27,
        HOME: 36,
        LEFT: 37,
        NUMPAD_ADD: 107,
        NUMPAD_DECIMAL: 110,
        NUMPAD_DIVIDE: 111,
        NUMPAD_ENTER: 108,
        NUMPAD_MULTIPLY: 106,
        NUMPAD_SUBTRACT: 109,
        PAGE_DOWN: 34,
        PAGE_UP: 33,
        PERIOD: 190,
        RIGHT: 39,
        SPACE: 32,
        TAB: 9,
        UP: 38
    }, P.downloadFile = function(a) {
        var b = "downloaderIFrame", c = document.getElementById(b);
        null === c && (c = document.createElement("iframe"), c.id = b, c.style.display = "none", document.body.appendChild(c)), c.src = a
    }, P.logWidgetEvent = function(a) {
        var b = new Image, c = "//log.pinterest.com/";
        b.src = c + "?" + $.param(a)
    };
    var e = function() {
        try {
            (new Date).toLocaleString("i")
        } catch (a) {
            return "RangeError" === a.name
        }
        return !1
    }();
    P.dateToLocaleString = function(b, c) {
        return e ? b.toLocaleString([a()], c) : b.toDateString()
    }
}(), function() {
    goog.provide("P.dom"), goog.require("P.errors"), P.dom = {}, P.dom.scrollIntoView = function(a, b) {
        var c = a.position().top, d = c + a.outerHeight(), e = b.outerHeight(), f = b.scrollTop();
        c < 0 ? b.scrollTop(f + c) : d > e && b.scrollTop(f - e + d)
    };
    var a = window.requestAnimationFrame || function(a) {
        setTimeout(a, 16)
    }, b = function() {
        return new Promise(function(b) {
            a(function() {
                b(void 0)
            })
        })
    };
    P.dom.deferWrite = b, P.deferDomManipulation = function(a) {
        P.dom.deferWrite().then(a)
    }
}(), function() {
    goog.provide("P.boardPickerUtil"), goog.require("P.modules.Dropdown"), P.boardPickerUtil = {}, P.boardPickerUtil.showNoBoardsTooltip = function(a) {
        if (a.length) {
            var b = new P.modules.Dropdown({
                options: {
                    anchor: a,
                    class_name: "large aboveModal",
                    fixed: !0,
                    position_point: "TOP_CENTER",
                    text: P._("<strong>You collect your Pins on boards</strong> so everything's nice and organized."),
                    mouse_close_mode: "always"
                }
            });
            b.render().then(function() {
                $("body").append(b.$el), _.defer(function() {
                    b.positionModule(), b.fadeIn()
                })
            })
        }
    }
}(), function() {
    Promise.prototype.fin = function(a) {
        return this.then(function(b) {
            return Promise.resolve(void 0).then(a).then(function() {
                return b
            })
        }, function(b) {
            return Promise.resolve(void 0).then(a).then(function() {
                throw b
            })
        })
    }
}(), function() {
    goog.provide("P.nativeApp"), P.nativeApp = {
        getOpenInAppPreference: function() {
            return !!Cookie.get(P.CONST.COOKIE_OPEN_IN_APP)
        },
        setOpenInAppPreference: function() {
            Cookie.set(P.CONST.COOKIE_OPEN_IN_APP, "1", 8760)
        },
        getStayInBrowserPreference: function() {
            return !!Cookie.get(P.CONST.COOKIE_STAY_IN_BROWSER)
        },
        setStayInBrowserPreference: function(a, b) {
            if (b===!0)
                return void Cookie.unset(P.CONST.COOKIE_STAY_IN_BROWSER);
            var c;
            c = a ? 72 : 24, Cookie.set(P.CONST.COOKIE_STAY_IN_BROWSER, "1", c)
        }
    }
}(), function() {
    goog.provide("P.viewport"), goog.require("P.start");
    var a = function() {
        this.height = 0, this.width = 0
    };
    _.extend(a.prototype, {
        init: function() {
            this.on(P.CONST.EVENT_RESIZE, this._onResize, this), $(window).on("resize", _.debounce(this._cacheWindowSize.bind(this), 200)), this._cacheWindowSize(), this.updateBodyColumns()
        },
        _cacheWindowSize: function() {
            var a = $(window), b = a.height(), c = a.width();
            (b !== this.height || c !== this.width) && (this.height = b, this.width = c, this.trigger(P.CONST.EVENT_RESIZE))
        },
        _onResize: function() {
            this.updateBodyColumns()
        },
        updateBodyColumns: function() {
            this.setBodyColumns(P.bodyColumns.getBodyColumnsNeeded())
        },
        setBodyColumns: function(a) {
            a !== this.numColumns && (this.numColumns = a, P.bodyColumns.setNumColumns(a), this.trigger(P.CONST.EVENT_BODY_COLUMN_CHANGE))
        }
    }), P.Viewport = new a, _.extend(P.Viewport, Backbone.Events), P.start.ready(function() {
        P.Viewport.init()
    })
}(), function() {
    function a(a) {
        return a === window.setTimeout ? function(a, b) {
            return window.setTimeout(a, b)
        } : a === window.setInterval ? function(a, b) {
            return window.setInterval(a, b)
        } : a
    }
    goog.provide("P.window");
    var b = function(b, c) {
        var d = a(c);
        if (!P.Errors.ENABLE_WRAPPING)
            return d;
        var e = function(a, c, e) {
            if ("string" === typeof a && (a = window[a]), !a)
                return - 1;
            var f = b + ":" + e, g = _.isFunction(a) ? P.Errors.wrapFn(f, a): a;
            return d(g, c)
        };
        return e
    };
    P.setTimeout = b("setTimeout", window.setTimeout), P.setInterval = b("setInterval", window.setInterval)
}(), function() {
    goog.provide("P.googleAnalytics"), goog.provide("P.trackGATiming"), goog.require("P.start"), goog.require("P.logger"), goog.require("P.pubsub"), window._gaq = window._gaq || [];
    var a, b = P.Logger.getLogger("GoogleAnalytics"), c = function(c) {
        b.finer("gaqPush", c);
        for (var d = 0; d < a.length; d++) {
            var e = a[d];
            window._gaq.push(["_setAccount", e]), window._gaq.push(c)
        }
    }, d = function(b) {
        a = b;
        var d = document.createElement("script");
        d.type = "text/javascript", d.async=!0, d.src = ("https:" === document.location.protocol ? "https://ssl" : "http://www") + ".google-analytics.com/ga.js", (document.getElementsByTagName("head")[0] || document.getElementsByTagName("body")[0]).appendChild(d), P.DEBUG && (c(["_setSampleRate", 100]), c(["_setSiteSpeedSampleRate", 100]))
    }, e = {
        VISITOR: 1,
        SESSION: 2,
        PAGE: 3
    }, f = function(a) {
        var b = a ? "logged in": "logged out";
        c(["_setCustomVar", 1, "is_logged_in", b, e.SESSION])
    };
    P.start.ready(function(a) {
        d(a.gaAccountNumbers), f(a.isLoggedIn)
    }), P.getTrackGAPageviewUrl = function(a, b) {
        var c = a, d = P.getQueryStringParams(b), e = d.q;
        return e && (c += "?" + $.param({
            q: e
        })), c
    }, P.trackGAPageview = function(a) {
        c(["_setCustomVar", 2, "page_name", a, e.PAGE]), c(["_trackPageview", P.getTrackGAPageviewUrl(window.location.pathname, window.location.search)]), c(["_setPageGroup", 1, a])
    }, P.trackGAEvent = function(a, b, d, e) {
        c(["_trackEvent", a, b, d, e])
    }, P.trackGATiming = function(a, b, d, e, f) {
        c(["_trackTiming", a, b, d, e, f])
    }, P.trackGACategoryEvent = function(a, b, c) {
        P.trackGAEvent(a + "_" + b, c)
    }
}(), function() {
    function a(a, b, c) {
        this.category = a, this.variable = b, this.label = c, this.startTime, this.elapsedTime
    }
    function b() {
        return window.performance.now()
    }
    function c() {
        this.timers = {}
    }
    goog.provide("P.trackingTimer"), goog.require("P.trackGATiming"), goog.require("P.logger");
    var d = P.Logger.getLogger("TrackingTimer"), e = 6e5, f=!(!window.performance ||!window.performance.now);
    a.prototype.start = function() {
        return f && (this.startTime = b()), this
    }, a.prototype.end = function() {
        return f && (this.elapsedTime = b() - this.startTime), this
    }, a.prototype.send = function() {
        return f && this.elapsedTime > 0 && this.elapsedTime < e && P.trackGATiming(this.category, this.variable, this.elapsedTime, this.label), this
    }, c.prototype.start = function(b, c, e) {
        if (f) {
            var g = Array.prototype.slice.apply(arguments).join(":");
            g in this.timers && d.warn("Timer already exists for key: " + g);
            var h = new a(b, c, e).start();
            this.timers[g] = h
        }
    }, c.prototype.end = function() {
        if (f) {
            var a = Array.prototype.slice.apply(arguments).join(":"), b = this.timers[a];
            b ? (b.end().send(), delete this.timers[a]) : d.warn("Timer doesn't exist for: " + a)
        }
    }, P.trackingTimer = new c
}(), function() {
    goog.provide("P.event"), P.Event = function(a, b, c) {
        this.type = a, this.target = b, this.currentTarget = b, this.data = c || {}, this.stopped=!1
    }, P.Event.prototype.stopPropagation = function() {
        this.stopped=!0
    }, P.Event.prototype.shouldPropagate = function() {
        return !this.stopped
    }
}(), function() {
    goog.provide("P.loader"), goog.require("P.modules"), goog.require("P.resourceFactory");
    P.ModuleConstructorNotFoundError = function() {
        Error.apply(this, arguments)
    }, P.ModuleConstructorNotFoundError.prototype = new Error, P.ModuleConstructorNotFoundError.prototype.name = "P.ModuleConstructorNotFoundError", P._loadModuleConstructor = function(a) {
        for (var b, c = P.modules, d = a.split(/\./), e = 0; e < d.length && c; e++)
            if (c = c[d[e]], !c)
                return b = new P.ModuleConstructorNotFoundError, b.moduleName = a, Promise.reject(b);
        var f = c;
        return _.isFunction(f) ? Promise.resolve(f) : (b = new P.ModuleConstructorNotFoundError, b.moduleName = a, Promise.reject(b))
    }, P.loadModuleConstructor = _.memoize(P._loadModuleConstructor), P.loadModule = function(a) {
        var b = a.name, c = P.loadModuleConstructor(b).then(function(b) {
            var c = new b({
                id: a.id,
                resource: a.resource,
                options: a.options,
                data: a.data
            });
            return c
        });
        return c
    }, P.moduleFactory = {
        create: function(a, b, c) {
            return P.loadModuleConstructor(a.name).then(function(d) {
                var e = $("#" + a.uid, b), f = {
                    el: e,
                    options: a.options,
                    id: a.id || void 0,
                    resource: a.resource || void 0,
                    data: a.data || void 0
                }, g = new d(f);
                return c && c.addChild(g), g.loadFromModuleTree(a).then(function() {
                    return g
                })
            })
        }
    }
}(), function() {
    goog.provide("P.resourceFactory"), goog.require("P.interfaces.IResource");
    var a = function() {
        this.defaultConstructorFn = null, this.nameToConstructorFn = {}
    };
    a.prototype = {
        setDefaultConstructorFn: function(a) {
            this.defaultConstructorFn = a
        },
        create: function(a, b) {
            var c, d = b || {}, e = this.nameToConstructorFn[a];
            if (e)
                c = new e(d);
            else {
                if (!this.defaultConstructorFn)
                    throw new Error("Couldn't find constructor function for " + a);
                c = new this.defaultConstructorFn(a, d)
            }
            return c
        },
        clone: function(a) {
            return this.create(a.getName(), a.copyOptions(!0))
        },
        register: function(a, b) {
            this.nameToConstructorFn[a] = b
        }
    }, P.ResourceFactory = a, P.resourceFactory = new a
}(), function() {
    function a(a) {
        this.name = a, this.id = null, this.options = {}, this.data = null, this.async=!1, this.resource = null, this.renderType = P.ModuleRenderType.NORMAL, this.errorStrategy = P.CONST.ErrorStrategy.REMOVE
    }
    goog.provide("P.moduleRenderOptions"), goog.require("P.interfaces.IResource"), goog.require("P.ModuleRenderType"), a.prototype = {
        setName: function(a) {
            this.name = a
        },
        setId: function(a) {
            this.id = a
        },
        setOptions: function(a) {
            this.options = a
        },
        setData: function(a) {
            this.data = a
        },
        setAsync: function(a) {
            this.async = a
        },
        setResource: function(a) {
            this.resource = a
        },
        setRenderType: function(a) {
            this.renderType = a
        },
        setErrorStrategy: function(a) {
            this.errorStrategy = a
        }
    }, a.fromPlainObject = function(b) {
        var c = new a(b.name);
        if ("id"in b && c.setId(b.id), "options"in b && c.setOptions(b.options), "data"in b && c.setData(b.data), "async"in b && c.setAsync(b.async), b.resource) {
            var d = P.resourceFactory.create(b.resource.name, b.resource.options);
            c.setResource(d)
        }
        return "renderType"in b && c.setRenderType(b.renderType), "errorStrategy"in b && c.setErrorStrategy(b.errorStrategy), c
    }, P.ModuleRenderOptions = a
}(), function() {
    goog.provide("P.ModuleRenderType"), P.ModuleRenderType = {
        NORMAL: 1,
        PREPEND: 2,
        APPEND: 3
    }
}(), function() {
    goog.provide("P.ModuleRenderer"), P.ModuleRenderer = function() {}, P.ModuleRenderer.prototype = {
        render: function() {}
    }
}(), function() {
    function a(a) {
        this.name = a, this.attributes = {
            "class": "",
            id: ""
        }, this.id = null, this.children = [], this.data = null, this.extraData = {}, this.errorStrategy = P.CONST.ErrorStrategy.REMOVE, this.options = {}, this.uid = "", this.async=!1, this.resource = null, this.tagName = null, this.additionalClasses = null, this.additionalAttributes = null, this.innerHtml = null, this.outerHtml = null, this.error = null
    }
    goog.provide("P.moduleTree"), goog.require("P.interfaces.IResource");
    var b = P.Logger.getLogger("ModuleTree");
    a.prototype = {
        setAttributes: function(a) {
            this.attributes = a
        },
        setId: function(a) {
            this.id = a
        },
        setChildren: function(a) {
            this.children = a
        },
        addChild: function(a) {
            this.children.push(a)
        },
        setData: function(a) {
            this.data = a
        },
        setExtraData: function(a) {
            this.extraData = a
        },
        setErrorStrategy: function(a) {
            this.errorStrategy = a
        },
        setError: function(a) {
            this.error = a
        },
        setOptions: function(a) {
            this.options = a
        },
        setUid: function(a) {
            this.uid = a
        },
        setAsync: function(a) {
            this.async = a
        },
        setResource: function(a) {
            this.resource = a
        },
        setTagName: function(a) {
            this.tagName = a
        },
        setAdditionalClasses: function(a) {
            this.additionalClasses = a
        },
        setAdditionalAttributes: function(a) {
            this.additionalAttributes = a
        },
        setInnerHtml: function(a) {
            this.innerHtml = a
        },
        setOuterHtml: function(a) {
            this.outerHtml = a
        },
        flattenHtml: function() {
            var c = this.name.replace(".", "-");
            this.name || b.warn("in flattenHtml, this.name is null or undefined", this), this.uid = _.uniqueId("m");
            var d = this.tagName || "div", e = "<" + d + ' class="Module ' + c;
            this.additionalClasses && (e += " " + this.additionalClasses.join(" ")), e += '" id="' + this.uid + '"', this.additionalAttributes && _.each(this.additionalAttributes, function(a, b) {
                e += " " + _.escape(b) + '="' + _.escape(a) + '"'
            }), e += ">", this.innerHtml && (e += a.replacePlaceholders(this.innerHtml, function(a) {
                var c = this.children[a];
                if (c) {
                    var d = c.getTreeOuterHtml();
                    return c.outerHtml = null, d
                }
                return b.warn("child index missing", a), ""
            }.bind(this))), e += "</" + d + ">", this.outerHtml = e
        },
        getTreeOuterHtml: function() {
            return this.outerHtml
        }
    }, a.fromPlainObject = function(b) {
        var c = new a(b.name);
        return "attributes"in b && c.setAttributes(b.attributes), "id"in b && c.setId(b.id), "data"in b && c.setData(b.data), "extraData"in b && c.setExtraData(b.extraData), "errorStrategy"in b && c.setErrorStrategy(b.errorStrategy), "options"in b && c.setOptions(b.options), "uid"in b && c.setUid(b.uid), "async"in b && c.setAsync(b.async), "resource"in b && c.setResource(b.resource), "error"in b && c.setError(b.error), _.each(b.children, function(b) {
            var d = a.fromPlainObject(b);
            c.addChild(d)
        }), c
    }, a.getModulePlaceholder = function(a) {
        return "<!--placeholder " + a + "-->"
    };
    var c = /<!--placeholder (\d+)-->/g;
    a.replacePlaceholders = function(a, d) {
        return a || b.warn("HTML is null or undefined; can' replace placeholders.", this), a.replace(c, function(a, b) {
            var c = b;
            return d(c)
        })
    }, P.ModuleTree = a
}(), function() {
    goog.provide("P.moduleTemplate"), goog.require("P.experiments"), goog.require("P.interfaces.IResource"), goog.require("P.logger"), goog.require("P.moduleTree"), goog.require("P.user");
    var a = P.Logger.getLogger("ModuleTemplate"), b = function(a) {
        return nunjucks.runtime.markSafe(P.ModuleTree.getModulePlaceholder(a))
    }, c = function(a, b) {
        for (var c in b)
            "__keywords" !== c && (a[c] = b[c])
    };
    P.moduleTemplate = {}, P.moduleTemplate.Result = function() {
        this.innerHtml = "", this.childrenModuleRenderOptions = [], this.additionalClasses = [], this.additionalAttributes = {}, this.data = null, this.extraData = {}, this.tagName = null
    }, P.moduleTemplate.TemplateContext = function(a, b, c, d) {
        this.options = a, this.data = b, this.resource = c, this._result = d, this.module = this.module.bind(this), this.ProxyModule = this.ProxyModule.bind(this), this.tag_name = this.tag_name.bind(this), this.addclass = this.addclass.bind(this), this.attr = this.attr.bind(this), this.extra_data = this.extra_data.bind(this), this.describe = this.describe.bind(this), this.base = this.base.bind(this), this.context = _.extend({}, this.context, {
            language: P.CONTEXT.language,
            locale: P.CONTEXT.locale,
            is_authenticated: P.currentUser.isAuthenticated(),
            is_retina: P.CONTEXT.is_retina
        })
    }, P.moduleTemplate.TemplateContext.prototype = {
        context: {
            experiments: {
                in_experiment_group: function(a, b, c) {
                    var d = c && c.activate;
                    return P.experiments.instance.inExperimentGroup(a, b, d)
                },
                in_experiment_groups: function(a, b, c) {
                    var d = c && c.activate;
                    return P.experiments.instance.inExperimentGroups(a, b, d)
                },
                get_group_for_experiment: function(a, b) {
                    var c = b && b.activate;
                    return P.experiments.instance.getGroupForExperiment(a, c)
                },
                in_experiment_groups_active_or_triggered: function(a, b) {
                    return P.experiments.instance.inExperimentGroupsActiveOrTriggerable(a, b)
                },
                in_experiment_group_active_or_triggered: function(a, b) {
                    return P.experiments.instance.inExperimentGroupActiveOrTriggerable(a, b)
                },
                activate_and_persist_experiment: function(a) {
                    P.experiments.instance.activateAndPersistExperiment(a)
                }
            },
            experiences: {
                is_placed_experience: function(a, b) {
                    var c = P.Experiences.Placement[a], d = P.Experiences.Experience[b];
                    return P.ExperienceManager.instance().isPlacedExperience(c, d)
                },
                experience_viewed: function() {
                    throw new Error("not implemented")
                }
            },
            user: P.currentUser.attributes,
            set_page_title: function() {}
        },
        get_seo_experiment_group: function() {},
        in_seo_experiment_group: function() {
            return !1
        },
        module: function(a,
        c) {
            c = c || {};
            var d = P.ModuleRenderOptions.fromPlainObject(c);
            d.setName(a);
            var e = this._result.childrenModuleRenderOptions.length;
            return this._result.childrenModuleRenderOptions.push(d), b(e)
        }, ProxyModule : function(a) {
            var c = P.ModuleRenderOptions.fromPlainObject(a), d = this._result.childrenModuleRenderOptions.length;
            return this._result.childrenModuleRenderOptions.push(c), b(d)
        }, create_resource: function(a, b) {
            b = b || {};
            var c = P.resourceFactory.create(a);
            return c.options = b.options || {}, c
        }, tag_name: function(a) {
            this._result.tagName = a
        }, addclass: function(a) {
            this._result.additionalClasses.push(a)
        }, attr: function(a) {
            c(this._result.additionalAttributes, a)
        }, extra_data: function(a) {
            _.extend(this._result.extraData, a)
        }, include_data: function() {}, describe: function(a) {
            c(this.options, a)
        }, base: function(b) {
            var c = b.replace(".", "-");
            b || a.warn("moduleName is null or undefined", {
                options: this.options,
                data: this.data,
                resource: this.resource
            }), this.addclass(c)
        }
    }, P.moduleTemplate.render = function(a, b, c, d) {
        var e = new P.moduleTemplate.Result, f = new P.moduleTemplate.TemplateContext(a, b, c, e);
        return e.data = b, e.innerHtml = P.renderNunjucks(d, f), e
    }
}(), function() {
    goog.provide("P.ModuleRendererLocal"), goog.require("P.logger"), goog.require("P.ModuleRenderer"), goog.require("P.moduleTemplate"), goog.require("P.moduleTree"), goog.require("P.resourceCache");
    var a = P.Logger.getLogger("ModuleRendererLocal"), b = function(a) {
        this.templateName = a
    };
    b.prototype = {
        _getData: function(a) {
            return a.data ||!a.resource ? Promise.resolve(a.data) : P.resourceCache.instance.callGet(a.resource).then(function(a) {
                return a
            })
        },
        _getErrorModuleTree: function(a) {
            var b = new P.ModuleTree(a.name);
            return b.setInnerHtml("error"), Promise.resolve(b)
        },
        _getAsyncModuleTree: function(a) {
            var b = new P.ModuleTree(a.name);
            return a.id && b.setId(a.id), a.options && b.setOptions(a.options), a.resource && b.setResource(a.resource), b.setAsync(a.async), b.flattenHtml(), Promise.resolve(b)
        },
        _renderModuleTree: function(a, b) {
            var c = a.resource, d = P.moduleTemplate.render(a.options, b, c, this.templateName), e = d.childrenModuleRenderOptions.map(function(a) {
                return a.async ? this._getAsyncModuleTree(a) : P.loadModuleConstructor(a.name).then(function(b) {
                    var c = b.moduleRenderer;
                    return c || (c = P.moduleRendererRemote.instance), c.render(a)
                })
            }.bind(this));
            return Promise.all(e).then(function(b) {
                b = _.without(b, null);
                var c = new P.ModuleTree(a.name);
                return a.id && c.setId(a.id), a.options && c.setOptions(a.options), a.resource && c.setResource(a.resource), c.setAdditionalClasses(d.additionalClasses), c.setAdditionalAttributes(d.additionalAttributes), c.setData(d.data), c.setExtraData(d.extraData), d.tagName && c.setTagName(d.tagName), c.setChildren(b), c.setInnerHtml(d.innerHtml), c.flattenHtml(), c
            })
        },
        render: function(b) {
            return this._getData(b).then(function(a) {
                return this._renderModuleTree(b, a)
            }.bind(this)).then(void 0, function(c) {
                switch (a.error(c, "errorStrategy", b.errorStrategy), b.errorStrategy) {
                case P.CONST.ErrorStrategy.SHOW:
                    return this._getErrorModuleTree(b);
                case P.CONST.ErrorStrategy.REMOVE:
                    return null;
                default:
                    return a.warn("unknown moduleRenderOptions.errorStrategy", b.errorStrategy), null;
                case P.CONST.ErrorStrategy.BUBBLE:
                    throw c
                }
            }.bind(this))
        }
    }, P.ModuleRendererLocal = b
}(), function() {
    goog.provide("P.moduleRendererRemote"), goog.require("P.ModuleRenderer");
    var a = function() {};
    a.prototype = {
        render: function(a) {
            var b = a.resource;
            return b || (b = P.resourceFactory.create(P.Resource.NOOP_RESOURCE.name, P.Resource.NOOP_RESOURCE.options)), a.data&&!_.isEmpty(a.data) && console.warn(a.name + " is being rendered using ModuleRendererRemote. You should not pass in data in moduleRenderOptions"), b.callGet({
                showError: !1
            }, a).then(function(b) {
                return a.id && b.moduleTree.setId(a.id), b.moduleTree
            })
        }
    }, P.ModuleRendererRemote = a, P.moduleRendererRemote = {}, P.moduleRendererRemote.instance = new a
}(), function() {
    "use strict";
    function a(a, b, c, d) {
        var f = a.$el, g = _.map(b, c);
        return Promise.all(g).then(function(b) {
            var c = [], g = [];
            _.each(b, function(a) {
                c = c.concat(a.errors), g = g.concat(a.warnings)
            });
            var h = {
                $el: f,
                errors: c,
                warnings: g
            };
            return a.trigger(e, h), d && d(h), h
        })
    }
    goog.provide("P.form"), goog.require("P.placeholder");
    var b = P.Logger.getLogger("Form"), c = "hasError", d = "hasWarning", e = "validated", f = "disabled", g = "[type=submit]", h = ["button", "file", "image", "reset", "submit"], i = 100, j = ["pinterest", "password", "123456", "welcome", "ninja", "abc123", "123456789", "12345678", "sunshine", "princess", "qwerty", "master", "michael", "jordan", "dragon", "soccer", "killer", "pepper", "devil", "princess", "1234567", "iloveyou"], k = function(a, b) {
        this.$el = a, this.rules = b
    };
    _.extend(k.prototype, Backbone.Events), _.extend(k.prototype, {
        validate: function(b) {
            return a(this, this.rules, function(a) {
                return a(this.$el)
            }.bind(this), b)
        }
    }), k.Required = function(a) {
        return function(b, c) {
            var d = b.val(), e = [], f = "checkbox" === b.attr("type")&&!b.is(":checked"), g = "radio" === b.attr("type")&&!b.is(":checked");
            if (f || g ||!d) {
                var h = a && a.message ? a.message: P._("Required");
                e.push(h)
            }
            var i = {
                $el: b,
                errors: e,
                warnings: []
            };
            return c && c(i), Promise.resolve(i)
        }
    }, k.Email = function(a) {
        return function(b, c) {
            var d = $.trim(b.val()), e = [];
            if (d&&!d.match(/.+@.+\..+/gi)) {
                var f = a && a.message ? a.message: P._("Not a valid email.");
                e.push(f)
            }
            var g = {
                $el: b,
                errors: e,
                warnings: []
            };
            return c && c(g), Promise.resolve(g)
        }
    }, k.Name = function(a) {
        return function(b, c) {
            var d = $.trim(b.val()), e = [];
            if (!d.match(/^[^0-9].*$/)) {
                var f = a && a.message ? a.message: P._("Not a valid name.");
                e.push(f)
            }
            var g = {
                $el: b,
                errors: e,
                warnings: []
            };
            return c && c(g), Promise.resolve(g)
        }
    }, k.Age = function(a) {
        return function(b, c) {
            var d = $.trim(b.val()), e = [], f = a && a.message ? a.message: P._("Not a valid age.");
            "" !== d && d.length < 2 && (f = P._("Please enter at least two digits."), e.push(f));
            var g = parseInt(d, 10);
            "" === d || g > 0 && g < 300 || e.push(f);
            var h = {
                $el: b,
                errors: e,
                warnings: []
            };
            return c && c(h), Promise.resolve(h)
        }
    }, k.PhoneNumber = function(a) {
        return function(b, c) {
            var d = $.trim(b.val()), e = d.replace(/[\(\)\+\-\. ]/g, ""), f = /^(\(?\+?[0-9]*\)?)?[0-9_\- \.\(\)]*$/g, g = [];
            if (d && (!d.match(f) || e.length < 7)) {
                var h = a && a.message ? a.message: P._("Not a phone number.");
                g.push(h)
            }
            var i = {
                $el: b,
                errors: g,
                warnings: []
            };
            return c && c(i), Promise.resolve(i)
        }
    }, k.Number = function(a) {
        return function(b, c) {
            var d = $.trim(b.val()), e = /^\d+$/, f = [];
            if (d&&!d.match(e)) {
                var g = a && a.message ? a.message: P._("Not a number.");
                f.push(g)
            }
            var h = {
                $el: b,
                errors: f,
                warnings: []
            };
            return c && c(h), Promise.resolve(h)
        }
    }, k.URL = function(a) {
        return function(b, c) {
            var d = b.val(), e = [];
            if (d&&!d.match(/^(https?:\/\/){0,1}[a-z0-9_\-]+\..+/gi)) {
                var f = a && a.message ? a.message: P._("Not a valid url.");
                e.push(f)
            }
            var g = {
                $el: b,
                errors: e,
                warnings: []
            };
            return c && c(g), Promise.resolve(g)
        }
    }, k.Password = function(a) {
        return function(b, c) {
            var d = b.val(), e = [], f = $('[name="username"]'), g = {
                shortPassStr: a && a.shortPassStr || P._("Too short"),
                badPassStyle: a && a.badPassStyle || P._("Not proper style"),
                samePasswordStr: a && a.samePasswordStr || P._("Password and username can't match"),
                blackPassStr: a && a.blackPassStr || P._("Please try using a stronger password"),
                goodPassStr: a && a.goodPassStr || P._("Great!"),
                userid: f.length ? f.val(): ""
            }, h = $.fn.teststrength(d, g, j);
            if (h.length) {
                var i = h[h.length - 1];
                if (i) {
                    var k = h[0];
                    e.push(k)
                }
            }
            var l = {
                $el: b,
                errors: e,
                warnings: []
            };
            return c && c(l), Promise.resolve(l)
        }
    }, k.Length = function(a) {
        return function(b, c) {
            var d, e, f = b.val(), g = a.max || 1 / 0, h = a.min || 0, i = [], j = f.length;
            j < h ? (d = P.string.format(P._("Please enter at least {{ character_count }} characters."), {
                character_count: h
            }), e = a && a.messages && a.messages.min ? a.messages.min : d, i.push(e)) : j > g && (d = P.string.format(P._("Please enter no more than {{ character_count }} characters."), {
                character_count: g
            }), e = a && a.messages && a.messages.max ? a.messages.max : d, i.push(e));
            var k = {
                $el: b,
                errors: i,
                warnings: []
            };
            return c && c(k), Promise.resolve(k)
        }
    }, k.EqualTo = function(a) {
        return function(b, c) {
            var d = b.val(), e = $('[name="' + a.targetFieldName + '"]').val(), f = [];
            d !== e && f.push(a.message);
            var g = {
                $el: b,
                errors: f,
                warnings: []
            };
            return c && c(g), Promise.resolve(g)
        }
    }, k.GreaterThan = function(a) {
        return function(b, c) {
            var d = $.trim(b.val()), e = [];
            d.length && d <= a.value && e.push(a.message);
            var f = {
                $el: b,
                errors: e,
                warnings: []
            };
            return c && c(f), Promise.resolve(f)
        }
    }, k.GreaterThanOrEqualTo = function(a) {
        return function(b, c) {
            var d = $.trim(b.val()), e = [];
            d.length && d < a.value && e.push(a.message);
            var f = {
                $el: b,
                errors: e,
                warnings: []
            };
            return c && c(f), Promise.resolve(f)
        }
    }, k.LaterThanOrEqualToDate = function(a) {
        return function(b, c) {
            var d = new Date(b.val()), e = a.date, f = [];
            !b.is(":disabled") && e instanceof Date && d.getTime() && e.getTime() && d < e && f.push(a.message);
            var g = {
                $el: b,
                errors: f,
                warnings: []
            };
            return c && c(g), Promise.resolve(g)
        }
    }, k.ContainsOnlyAscii = function(a) {
        return function(b, c) {
            var d = b.val(), e = [], f = /^[\040-\176]*$/.test(d);
            f || e.push(a.message);
            var g = {
                $el: b,
                errors: e,
                warnings: []
            };
            return c && c(g), Promise.resolve(g)
        }
    }, k.CurrencyValue = function(a) {
        return function(b, c) {
            var d = $.trim(b.val()), e = /^\d*(\.\d\d?)?$/, f = [];
            if (d&&!d.match(e)) {
                var g = a && a.message ? a.message: P._("Not a valid currency value.");
                f.push(g)
            }
            var h = {
                $el: b,
                errors: f,
                warnings: []
            };
            return c && c(h), Promise.resolve(h)
        }
    }, k.Date = function(a) {
        return function(b, c) {
            var d = $.trim(b.val()), e = [], f = new Date(d);
            if (d&&!f.getTime()) {
                var g = a && a.message ? a.message: P._("Not a valid date.");
                e.push(g)
            }
            var h = {
                $el: b,
                errors: e,
                warnings: []
            };
            return c && c(h), Promise.resolve(h)
        }
    }, k.Time = function(a) {
        return function(b, c) {
            var d = $.trim(b.val()), e = /^([01]?[0-9]|2[0-3]):[0-5][0-9]$/, f = [];
            if (d&&!d.match(e)) {
                var g = a && a.message ? a.message: P._("Not a valid time.");
                f.push(g)
            }
            var h = {
                $el: b,
                errors: f,
                warnings: []
            };
            return c && c(h), Promise.resolve(h)
        }
    }, k.MatchesRegex = function(a) {
        return function(b, c) {
            var d = b.val(), e = [];
            a.pattern.test(d) || e.push(a.message);
            var f = {
                $el: b,
                errors: e,
                warnings: []
            };
            return c && c(f), Promise.resolve(f)
        }
    }, P.Validator = k, P.Form = function(a, c, d) {
        d = d || {}, this.$el = a, this.validators = {}, this.errorFields = {}, this.warningFields = {}, this.fastValidateFields = {}, this.hideErrors=!!d.hideErrors, this.prevalidating=!!d.prevalidate, this.disableAutoValidation=!!d.disableAutoValidation, this.onFieldBlur = this.onFieldBlur.bind(this), this.onFieldChange = this.onFieldChange.bind(this), this.onFieldKeyup = this.onFieldKeyup.bind(this), this.onFieldValidated = this.onFieldValidated.bind(this), this.onSubmit = this.onSubmit.bind(this), _.each(c, function(a, c) {
            var d = this.getField(c);
            if (d[0]) {
                var f = new P.Validator(d, a);
                this.validators[c] = f, f.on(e, this.onFieldValidated), d.on("blur", this.onFieldBlur), d.on("change", this.onFieldChange), d.on("keyup", this.onFieldKeyup)
            } else 
                b.warn(c + " wasn't found in the form")
        }.bind(this)), this.prevalidating && this.validate(function() {
            this.prevalidating=!1
        }.bind(this)), a.submit(this.onSubmit), a.find("[placeholder]").placeholder()
    }, _.extend(P.Form.prototype, Backbone.Events), _.extend(P.Form.prototype, {
        validate: function(b) {
            return a(this, this.validators, function(a) {
                return a.validate()
            }, b)
        },
        getField: function(a) {
            var b = this.$el.find("[name=" + a + "]");
            return "radio" === b.attr("type") && (b = this.$el.find("[name=" + a + "]:checked")), b
        },
        getFieldErrorMessages: function(a) {
            return a.nextAll(".formErrorMessage")
        },
        getFieldWarningMessages: function(a) {
            return a.nextAll(".formWarningMessage")
        },
        getFieldLabels: function(a) {
            var b = a.attr("id"), c = this.$el.find('label[for="' + b + '"]'), d = a.closest("label", this.$el);
            return c.add(d)
        },
        validateField: function(a, b) {
            var c = a.attr("name");
            return this.validators[c].validate(b)
        },
        getValue: function(a) {
            var b = this.getField(a);
            return "checkbox" === b.attr("type") ? b.is(":checked") : b.val()
        },
        getSubmitButtons: function() {
            return this.$el.find(g)
        },
        disableSubmitButtons: function() {
            this.getSubmitButtons().prop(f, !0).addClass(f)
        },
        enableSubmitButtons: function() {
            this.getSubmitButtons().not(".loading").prop(f, !1).removeClass(f)
        },
        hasErrors: function() {
            return !(!_.find(this.errorFields, function(a) {
                return a
            })&&!this.$el.find("." + c)[0])
        },
        hasWarnings: function() {
            return !(!_.find(this.warningFields, function(a) {
                return a
            })&&!this.$el.find("." + d)[0])
        },
        setFieldErrorsAndWarnings: function(a, b, e) {
            this.clearFieldErrorAndWarningMessages(a);
            var f=!!b[0], g=!!e[0];
            if (this.errorFields[a.attr("name")] = f, this.warningFields[a.attr("name")] = g, !this.prevalidating&&!this.hideErrors) {
                var h = this.getFieldLabels(a), i = h.add(a);
                i.toggleClass(c, f), i.toggleClass(d, g), this.appendFieldErrorMessages(a, b), this.appendFieldWarningMessages(a, e)
            }
        },
        appendFieldErrorMessages: function(a, b) {
            b && b.length && a.parent().children().last().after('<p class="formErrorMessage">' + b.join(" ") + "</p>")
        },
        appendFieldWarningMessages: function(a, b) {
            b && b.length && a.parent().children().last().after('<p class="formWarningMessage">' + b.join(" ") + "</p>")
        },
        clearFieldErrorAndWarningMessages: function(a) {
            var b = this.getFieldErrorMessages(a);
            b.remove();
            var c = this.getFieldWarningMessages(a);
            c.remove()
        },
        clearAllErrorAndWarning: function() {
            var a, b = _.keys(this.errorFields), c = _.keys(this.warningFields), d = _.uniq(_.union(b, c));
            _.each(d, function(b) {
                (this.errorFields[b] || this.warningFields[b]) && (a = this.getField(b), this.setFieldErrorsAndWarnings(a, [], []))
            }.bind(this))
        },
        enableFastValidateOnField: function(a) {
            this.fastValidateFields[a] = 1
        },
        onSubmit: function(a) {
            a.preventDefault(), a.stopPropagation(), this.trigger("submitStarted", this.$el), this.validate(function(a, b) {
                this.trigger(P.CONST.EVENT_SUBMIT_VALIDATED, a, b)
            }.bind(this))
        },
        onFieldValidated: function(a) {
            var b = a.$el, c = a.errors, d = a.warnings;
            (c[0] || d[0]) && this.enableFastValidateOnField(b.attr("name")), this.setFieldErrorsAndWarnings(b, c, d), this.hasErrors() ? this.disableSubmitButtons() : this.enableSubmitButtons()
        },
        onFieldKeyup: function(a) {
            if (a.keyCode !== P.keyCode.TAB) {
                var b = $(a.target);
                this.fastValidateFields[b.attr("name")]&&!this.disableAutoValidation && this.validateField(b)
            }
        },
        onFieldBlur: function(a) {
            if (!this.disableAutoValidation) {
                var b = $(a.target);
                _.delay(function() {
                    this.validateField(b)
                }.bind(this), i)
            }
        },
        onFieldChange: function(a) {
            if (!this.disableAutoValidation) {
                var b = $(a.target);
                this.validateField(b)
            }
        },
        getData: function(a) {
            for (var b, c, d, e, f, g = this.$el.find("input,select,textarea"), i = g.length, j = {}, k = 0; k < i; ++k)
                b = $(g[k]), d = b.attr("name"), void 0 === d ||!a && b.is(":disabled") || (c = b.attr("type"), _.contains(h, c) || "radio" === c&&!b.is(":checked") || (e = "checkbox" === c ? b.is(":checked") : b.val(), _.has(j, d) ? (f = j[d], _.isArray(f) || (f = [f], j[d] = f), f.push(e)) : j[d] = e));
            return j
        }
    }), P.Errors.wrap(P.Form.prototype, ["onSubmit"])
}(), function() {
    goog.provide("P.placeholder");
    var a = P.Logger.getLogger("Placeholder"), b = "placeholder", c = "placeholder", d = "placeholder-visible";
    if (P.isPlaceholderSupported = b in document.createElement("input"), P.isPlaceholderSupported)
        jQuery.fn.placeholder = function() {
            return this
        };
    else {
        var e = {
            initPlaceholder: function() {
                this.blur(e._onPlaceholderBlur), this.focus(e._onPlaceholderFocus), this.each(function(a, b) {
                    e._clearPlaceholder(b), e._setPlaceholder(b)
                })
            },
            _onPlaceholderBlur: function() {
                e._setPlaceholder(this)
            },
            _onPlaceholderFocus: function() {
                e._clearPlaceholder(this)
            },
            _setPlaceholder: function(a) {
                var e = $(a), f = e.val();
                f || (a[d]=!0, e.addClass(c), a.value = e.attr(b))
            },
            _clearPlaceholder: function(a) {
                var b = $(a);
                a && a[d] && (a[d]=!1, b.removeClass(c), a.value = "")
            }
        };
        jQuery.fn.placeholder = function() {
            return e.initPlaceholder.apply(this), this
        };
        var f = {
            get: function(a) {
                var c = $(a), e = a[d];
                return e && c.attr(b) === a.value ? "" : a.value
            },
            set: function(a, b) {
                var c = $(a);
                return b && a[d] ? e._clearPlaceholder(a) : b || e._setPlaceholder(a), a.value = b, e._setPlaceholder(a), c
            }
        };
        a.debug("Adding hooks on input and textarea for placeholders."), $.valHooks.input = f, $.valHooks.textarea = f, $(document).delegate("form", "submit", function() {
            var a = $("input", this).each(e._clearPlaceholder);
            window.setTimeout(function() {
                a.each(e._setPlaceholder)
            }, 10)
        })
    }
}(), function() {
    goog.provide("P.Module"), goog.provide("P.Module.console"), goog.provide("P.Module.objectHash"), goog.provide("P.Module.window"), goog.require("P.CONST"), goog.require("P.errors"), goog.require("P.interfaces.IResource"), goog.require("P.ModuleRenderer"), goog.require("P.ModuleRenderType"), goog.require("P.logger");
    var a = 300, b = "fadeIn", c = "fadeOut", d = "hideModule", e = b + " " + c, f = "loading", g = 300, h = "moduleMask", i = "inModal", j = "notNavigatable", k = "savedScrollLeft", l = "savedScrollTop", m = "data-element-type", n = "data-component-type", o = "data-aux", p = _.invert(P.CONST.ErrorStrategy), q = 0, r = function(a, b, c) {
        var d = "other";
        this.object = a, this.event = b, this.fn = c, this.id = "", this.object instanceof P.Module ? this.id = this.object.cid : (this.id = d + q, q += 1)
    };
    P.Module = function() {}, P.Module = Backbone.View.extend({
        className: "Module",
        GACategory: null,
        constructor: function(a) {
            Backbone.View.call(this, a), a && (a.id && (this.id = a.id), a.options && this.setOptions(a.options), a.resource && this.setResource(a.resource), a.data && (this.data = a.data))
        },
        initialize: function(a) {
            this.log = P.Logger.getLogger(this.className), this.id = null, this.cid = this.cid || "", this.options = {}, a && a.options && (this.options = a.options), this.resource = null, this.parent = null, this.children = [], this._childrenIdMap = {}, this._listeners = {}, this._pubsubHandlers = {}, this.inDom=!1, this.contentReady=!1, this._html = null, this._pendingRenderRequest=!1, this.extraState = {}, this._spinner = null, this._$mask = null, this.data = null, this.extraData = null, this.model = null, this._breadcrumbs = null, this.onCreated()
        },
        _ensureElement: function() {
            if (this.el)
                this.setElement(this.el, !1);
            else {
                var a = this.attributes || {};
                if (!a["class"]) {
                    var b = ["Module"], c = this.className.replace(/\./g, "-");
                    b.push(c), a["class"] = b.join(" ")
                }
                var d = $(document.createElement(this.tagName));
                d.attr(a), this.setElement(d, !1)
            }
        },
        setAsMainModule: function(a, b, c) {
            return this.errorStrategy = P.CONST.ErrorStrategy.SHOW, this.hasSameOptions(a, b) && this.contentReady&&!this._forceRefreshRequested(c) ? Promise.resolve(void 0) : (this.empty(), this._forceRefreshRequested(c) && (this.extraState = {}), this.setOptions(a), this.setResource(b), this.performTransition(c))
        },
        _forceRefreshRequested: function(a) {
            return !!(a && a.evt && a.evt.data && a.evt.data.forceRefresh)
        },
        performTransition: function() {
            return this.render()
        },
        setResource: function(a) {
            (!a || _.isEqual(a, {})) && (a = P.Resource.NOOP_RESOURCE), this.resource = P.resourceFactory.create(a.name, a.options)
        },
        setOptions: function(a) {
            var b = this.options;
            this.options = a || {}, this.onOptionsChanged(b, this.options)
        },
        setModal: function(a) {
            this.$el.toggleClass(i, !!a), this.modal !== a && (this.modal = a, a && this.onAddedToModal(a))
        },
        animateEntranceToModal: P.NOOP,
        animateExitFromModal: P.NOOP,
        prependChild: function(a) {
            this.$el.prepend(a.$el), this.addChild(a, 0)
        },
        appendChild: function(a) {
            this.insertChild(a, this.$el)
        },
        insertChild: function(a, b, c, d) {
            d ? a.$el.insertAfter(d) : a.$el.appendTo(b), this.addChild(a, c)
        },
        insertChildBefore: function(a, b, c, d) {
            d ? a.$el.insertBefore(d) : a.$el.appendTo(b), this.addChild(a, c)
        },
        removeChild: function(a) {
            if (a.parent === this) {
                a.parent = null, this._removeListenersOnModule(a), this.children = _.filter(this.children, function(b) {
                    return a !== b
                }), a.id && delete this._childrenIdMap[a.id];
                var b = a.getParentElement();
                a.detachElement(), a.onRemoved(), this.onChildRemoved(a, b)
            }
        },
        getChildByElement: function(a) {
            var b = _.find(this.children, function(b) {
                return b.$el.is(a)
            });
            return b
        },
        getChildByModuleName: function(a) {
            var b = _.find(this.children, function(b) {
                return b.className === a
            });
            return b
        },
        getChildrenByModuleName: function(a) {
            var b = _.filter(this.children, function(b) {
                return b.className === a
            });
            return b
        },
        getChildById: function(a) {
            return this._childrenIdMap[a]
        },
        getHasError: function() {
            return !!this.error
        },
        removeChildById: function(a) {
            var b = this.getChildById(a);
            b && b.remove()
        },
        remove: function() {
            this.parent && this.parent.removeChild(this)
        },
        detachElement: function() {
            this.remove(), this.$el.detach(), this.inDom && this._setInDom(!1)
        },
        destroy: function() {
            this.triggerEvent(P.CONST.EVENT_DESTROYED), this.empty(), this.detachElement(), this._removeListeners(), this._subscribers && _.each(this._subscribers, function(a) {
                a.unsubscribe()
            }), this.undelegateEvents(), this.destroyed=!0, this.onDestroyed()
        },
        destroyIfEmpty: function() {
            return this.isEmpty() ? (this.destroy(), !0) : !1
        },
        empty: function() {
            for (this.$el.empty(); this.children.length;)
                this.children[0].destroy();
            this.children = [], this._childrenIdMap = {}, this.contentReady=!1, this.onEmpty()
        },
        onEmpty: P.NOOP,
        onRendered: P.NOOP,
        onContentReady: P.NOOP,
        onAdded: P.NOOP,
        onRemoved: P.NOOP,
        onDestroyed: P.NOOP,
        onCreated: P.NOOP,
        onChildAdded: function() {},
        onChildRemoved: function() {},
        onChildRendered: P.NOOP,
        onAddedToDom: P.NOOP,
        onRemovedFromDom: P.NOOP,
        onPubSubMessage: function() {},
        onOptionsChanged: function() {},
        onAddedToModal: function() {},
        handleError: function(a) {
            var b = this.getFullName();
            this.errorStrategy === P.CONST.ErrorStrategy.REMOVE ? (this.log.warn("Removing module because of error."), this.destroy()) : this.errorStrategy === P.CONST.ErrorStrategy.BUBBLE && (this.log.warn("Bubbling up the error."), this.parent.handleError(a)), this.log.warn("Error in: " + b + "\nError Strategy: " + p[this.errorStrategy] + "\nStack Trace:" + a.stack_trace + "\nError Object: ", a), this.triggerEvent(P.CONST.EVENT_ERROR, a, this)
        },
        getSubscriber: function(a) {
            if (this._subscribers || (this._subscribers = {}), !this._subscribers[a]) {
                var b = P.pubsub.createSubscriber(a, {
                    handler: this._handlePubsub,
                    scope: this,
                    name: this.className
                });
                this._subscribers[a] = b
            }
            return this._subscribers[a]
        },
        pubsubSubscribe: function(a, b) {
            var c = this.getSubscriber(a);
            c.subscribe.apply(c, _.keys(b)), this._pubsubHandlers[a] || (this._pubsubHandlers[a] = {}), _.extend(this._pubsubHandlers[a], b)
        },
        pubsubUnsubscribe: function(a) {
            var b = _.tail(_.toArray(arguments)), c = this.getSubscriber(a);
            c.unsubscribe.apply(c, b)
        },
        _handlePubsub: function(a, b, c) {
            var d = (this._pubsubHandlers[a] || {})[b];
            d && d.call(this, a, b, c), this.onPubSubMessage(a, b, c)
        },
        ensureAuthentication: function() {
            if (!P.currentUser.isAuthenticated()) {
                var a = {
                    contextualResource: this.getContextualResource(),
                    authRedirectUrl: this.getAuthRedirectUrl()
                };
                return this.triggerEvent(P.CONST.EVENT_REQUIRES_AUTHENTICATION, a, !0), !1
            }
            return !0
        },
        getAuthRedirectUrl: function() {
            return P.getRegisterUrl()
        },
        getContextualResource: function() {
            return null
        },
        getFullName: function() {
            for (var a = [this.toString(!0)], b = this; b.parent;)
                b = b.parent, a.unshift(b.toString());
            return a.join(">")
        },
        toString: function(a) {
            var b = this.className, c = [];
            return a && this.options && c.push(P.toArgumentString(this.options)), this.resource && "NoopResource" !== this.resource.name && c.push("resource=" + this.resource.toString()), b + "(" + c.join(", ") + ")"
        },
        getHeight: function(a) {
            return a = a ||!1, this.$el.outerHeight(a)
        },
        getWidth: function(a) {
            return a = a ||!1, this.$el.outerWidth(a)
        },
        getOffset: function() {
            return this.$el.offset()
        },
        getPosition: function() {
            return this.$el.position()
        },
        getParentElement: function() {
            return this.$el.parent()
        },
        getContent: function() {
            return this.$el
        },
        getScrollableElement: function() {
            return this.getScrollableElementForElement(this.$el)
        },
        getScrollableElementForElement: function(a) {
            var b = this.getOwnedScrollables();
            if (b.length > 0) {
                var c = a;
                c = c.add(a.parentsUntil(this.$el)), c = c.add(this.$el);
                var d = c.filter(b);
                if (d.length > 0)
                    return d.last()
            }
            return this.parent ? this.parent.getScrollableElementForElement(this.$el.parent()) : $(window)
        },
        listen: function(a, b, c) {
            var d = function() {
                c.apply(this, _.toArray(arguments))
            }.bind(this);
            a.on(b, d);
            var e = new r(a, b, d);
            return this._listeners[e.id] || (this._listeners[e.id] = []), this._listeners[e.id].push(e), e
        },
        childListen: function(a, b) {
            return this.listen(this, "child:" + a, b)
        },
        delegateEvents: function() {
            if (!this.__wrapEvents) {
                this.events = this.events || {}, this.events["click.logging"] = "_logContextEvent", this.events["click.logging [" + m + "]"] = "_logContextEvent", this.events["click a"] = "_handleLinkClick";
                var a = {};
                _.each(this.events, function(b, c) {
                    a[c] = _.isFunction(b) ? P.Errors.wrapFn("eventFunction", b) : P.Errors.wrapFn(b, function() {
                        return P.state.activeTarget = this, this[b].apply(this, _.toArray(arguments))
                    }.bind(this))
                }.bind(this)), this._wrappedLogContextEvent = this.events["click.logging"], this.events = a, this.__wrapEvents=!0
            }
            return this.$el.attr(m) || 0 === this.$el.attr(m) ? this.events["click.logging"] = this._wrappedLogContextEvent : delete this.events["click.logging"], Backbone.View.prototype.delegateEvents.call(this)
        },
        navigate: function(a, b, c, d) {
            P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_SITE, P.CONST.PUBSUB_TOPIC_NAVIGATE_STARTED);
            var e = {
                url: a,
                $el: b
            };
            if (c && (e.forceRefresh = 1), _.extend(e, d), this.triggerEvent(P.CONST.EVENT_NAVIGATE, e, !0)) {
                this.log.debug("Navigate event wasn't prevented. Navigating to:", a);
                var f = new P.navigateData.NavigateData;
                f.evt = new P.Event("", null, e), P.getHistoryNavigator().navigate(a, f)
            }
        },
        showInModal: function(a, b) {
            var c = {
                module: a,
                showModalOptions: b
            };
            this.triggerEvent(P.CONST.EVENT_MODAL, c, !0) && (this.log.debug("Modal event wasn't prevented. Telling modalManager to open:", a), P.getModalManager().showInModal(a, b || {}, this))
        },
        removeListener: function(a) {
            a.object.off(a.event, a.fn), this._listeners[a.id] = _.filter(this._listeners[a.id], function(b) {
                return a !== b
            })
        },
        triggerEvent: function(a, b, c) {
            var d = new P.Event(a, this, b);
            if (this.trigger(a, d), d.shouldPropagate() && c) {
                for (var e = new P.Event("child:" + a, this, b), f = this.parent; f && e.shouldPropagate();)
                    f.trigger.call(f, e.type, e), e.currentTarget = f, f = f.parent;
                return e.shouldPropagate()
            }
            return d.shouldPropagate()
        },
        _removeListenersOnModule: function(a) {
            _.each(this._listeners[a.cid], function(a) {
                a.object.off(a.event, a.fn)
            }), delete this._listeners[a.cid]
        },
        showLoading: function(a, b) {
            if (a=!!a, b = b || this.$el, this.$el.addClass(f), null === this._spinner) {
                var c = this.getLoadingSpinnerOptions();
                null === c || void 0 !== c.enable&&!c.enable || (this._spinner = new P.Spinner(c), this._spinner.spin(b, this.getLoadingSpinnerClassName()))
            }
            a ? this.showMask() : this.hideMask()
        },
        hideLoading: function() {
            this.$el.removeClass(f), null !== this._spinner && (this._spinner.stop(), this._spinner = null), this.hideMask()
        },
        isLoading: function() {
            return this.$el.hasClass(f)
        },
        showMask: function() {
            null === this._$mask && (this._$mask = $("<div></div>").addClass(h).css({
                left: 0,
                top: 0,
                width: this.getWidth(),
                height: this.getHeight()
            }).prependTo(this.$el))
        },
        hideMask: function() {
            null !== this._$mask && (this._$mask.remove(), this._$mask = null)
        },
        show: function() {
            this.$el.show()
        },
        hide: function() {
            this.$el.hide()
        },
        hideModule: function() {
            this.$el.addClass(d)
        },
        showModule: function() {
            this.$el.removeClass(d)
        },
        fadeIn: function(d) {
            this.$el.removeClass(c).addClass(b);
            var e = function() {
                d && d()
            };
            P.setTimeout(e, a)
        },
        fadeOut: function(d) {
            this.$el.removeClass(b).addClass(c);
            var e = function() {
                d && d()
            };
            P.setTimeout(e, a)
        },
        clearFades: function() {
            this.$el.removeClass(e)
        },
        getLoadingSpinnerOptions: function() {
            return _.extend({
                enable: !0
            }, this.options.spinner || {})
        },
        getLoadingSpinnerClassName: function() {
            return null
        },
        render: function() {
            return this._renderInternal(!1)
        },
        renderExistingData: function() {
            return this._renderInternal(!0)
        },
        _renderInternal: function(a) {
            var b = this.getParentElement();
            return 0 === b.length && (b = $(document.body)), this._render(b, a)
        },
        renderAdditional: function(a) {
            if (!this.contentReady || this._pendingRenderAdditionalRequest || this.resource.atEnd())
                return Promise.resolve(void 0);
            var b = this._fetch(a, !1);
            return this._pendingRenderAdditionalRequest=!0, b.fin(function() {
                this._pendingRenderAdditionalRequest=!1, this.triggerEvent(P.CONST.EVENT_CONTENT_CHANGED, null, !0)
            }.bind(this)), b
        },
        renderAbort: function() {
            return this._pendingRenderRequest ? (this.resource ? this.resource.abort() : this._pendingRenderRequest=!1, !0) : !1
        },
        insertAfterModule: function(a, b) {
            a.insertAfter(b.$el)
        },
        appendToElement: function(a) {
            a.append(this.$el)
        },
        _render: function(a, b) {
            if (this._pendingRenderRequest)
                return Promise.reject(new Error("render already in progress"));
            this._pendingRenderAdditionalRequest && this.resource.abort();
            var c = P.setTimeout(function() {
                this.showLoading(), c = null
            }.bind(this), g, "_render Loading"), d = function() {
                c ? clearTimeout(c) : this.hideLoading()
            }.bind(this);
            this._pendingRenderRequest=!0;
            var e = this._fetch(P.ModuleRenderType.NORMAL, b).then(function() {
                this.rendered=!0, this.onRendered(), this.parent && this.parent.onChildRendered(this), this.triggerEvent(P.CONST.EVENT_CONTENT_CHANGED, null, !0)
            }.bind(this)).fin(function() {
                this._pendingRenderRequest=!1, d()
            }.bind(this));
            return e
        },
        _getModuleRenderer: function() {
            if (this.options.force_render_remote)
                return P.moduleRendererRemote.instance;
            var a = this.constructor.moduleRenderer;
            return a ? a : P.moduleRendererRemote.instance
        },
        _fetch: function(a, b) {
            a !== P.ModuleRenderType.PREPEND && a !== P.ModuleRenderType.APPEND && this.resource && this.resource.resetBookmark();
            var c = new P.ModuleRenderOptions(this.className);
            if (c.setOptions(this.options), b) {
                var d = this.model ? this.model.getData(): this.data;
                c.setData(d)
            }
            return c.setResource(this.resource), c.setRenderType(a), c.setErrorStrategy(this.errorStrategy), this._getModuleRenderer().render(c).then(function(b) {
                return this.loadFromModuleTree(b, a)
            }.bind(this), function(a) {
                throw this.error = a, a.target = this, this.handleError(a), a
            }.bind(this))
        },
        loadFromModuleTree: function(a, b) {
            var c = a.getTreeOuterHtml(), d = c ? $(c): this.$el;
            if (b = b || P.ModuleRenderType.NORMAL, d && b !== P.ModuleRenderType.APPEND && b !== P.ModuleRenderType.PREPEND && (this.contentReady=!1), a.id && (this.id = a.id), a.data && (this.data = a.data), a.extraData && (this.extraData = a.extraData), a.options && this.setOptions(a.options), a.resource && (!a.error || b === P.ModuleRenderType.APPEND && b === P.ModuleRenderType.PREPEND) && this.setResource(a.resource), this.data && this.resource && (this.model = P.resourceCache.instance.ensureModel(this.resource, this.data)), b === P.ModuleRenderType.APPEND)
                d.children().appendTo(this.$el);
            else if (b === P.ModuleRenderType.PREPEND)
                d.children().prependTo(this.$el);
            else {
                var e = d.attr("id"), f = e&&!!document.getElementById(e), g=!this.inDom && f;
                this.inDom = this.inDom || f, this._replaceElement(d), this.$el.removeAttr("id"), g && this.onAddedToDom()
            }
            if (_.isUndefined(a.errorStrategy) || null === a.errorStrategy || (this.errorStrategy = a.errorStrategy), this.error = a.error, a.error)
                return a.error.target = this, this.handleError(a.error), Promise.resolve();
            if (a.async)
                return this.render(), Promise.resolve();
            var h = a.children.map(function(a) {
                return P.moduleFactory.create(a, this.$el, this)
            }.bind(this));
            return Promise.all(h).then(function() {
                d && b !== P.ModuleRenderType.APPEND && b !== P.ModuleRenderType.PREPEND && (this.contentReady=!0, this.onContentReady())
            }.bind(this), function(a) {
                throw this.handleError(a), a
            })
        },
        addChild: function(a, b) {
            var c = "undefined" === typeof b&&-1 || b;
            a.parent !== this && (a.parent && a.remove(), a.parent = this, - 1 === c ? this.children.push(a) : this.children.splice(c, 0, a), a.id && (this._childrenIdMap[a.id] = a), a.onAdded(), this.onChildAdded(a, b), this.inDom && a._setInDom(!0))
        },
        isEmpty: function() {
            return !$.trim(this.$el.html())&&!this.children.length
        },
        isInModal: function() {
            return !!this.modal
        },
        isElement: function(a) {
            return this.$el.get(0) === $(a).get(0)
        },
        loadFromData: function() {
            this.log.error("override method loadFromData")
        },
        hasSameOptions: function(a, b) {
            var c = this.hasSameModuleOptions(a), d = this.hasSameResourceOptions(b);
            return this.log.debug("has same options? ", c, this.options, a, d, !this.resource || this.resource.options, b), c && d
        },
        hasSameModuleOptions: function(a) {
            return a = a || {}, _.isEqual(this.options, a)
        },
        hasSameResourceOptions: function(a) {
            (!a || _.isEqual(a, {})) && (a = P.Resource.NOOP_RESOURCE);
            var b=!this.resource && _.isEqual(a, P.Resource.NOOP_RESOURCE);
            return b || this.resource && this.resource.isEqual(a)
        },
        setChildId: function(a, b) {
            a.parent === this && (this.removeChildId(a), a.id = b, this._childrenIdMap[a.id] = a)
        },
        removeChildId: function(a) {
            a.id && a.parent === this && (delete this._childrenIdMap[a.id], delete a.id)
        },
        getOwnedScrollables: function() {
            return $()
        },
        saveExtraState: function(a) {
            if (a) {
                var b = this.getScrollableElement().scrollTop();
                this.extraState = {
                    scrollableElementScrollTop: b
                }
            }
            this.getOwnedScrollables().each(function(a, b) {
                var c = $(b), d = c.scrollTop(), e = c.scrollLeft();
                c.data(l, d), c.data(k, e)
            }), _.each(this.children, function(a) {
                a.saveExtraState(!1)
            })
        },
        restoreExtraState: function(a) {
            if (a) {
                var b = this.extraState.scrollableElementScrollTop || 0;
                this.getScrollableElement().scrollTop(b)
            }
            var c = this.getOwnedScrollables();
            c.length && P.deferDomManipulation(function() {
                c.each(function(a, b) {
                    var c = $(b), d = c.data(l), e = c.data(k);
                    void 0 !== d && c.scrollTop(d), void 0 !== e && c.scrollLeft(e)
                })
            }), _.each(this.children, function(a) {
                a.restoreExtraState(!1)
            })
        },
        _setInDom: function(a) {
            this.inDom !== a && (this.inDom = a, a ? this.onAddedToDom() : this.onRemovedFromDom(), _.each(this.children, function(b) {
                b._setInDom(a)
            }))
        },
        _replaceElement: function(a) {
            a[0] !== this.$el[0] && (this.empty(), this.undelegateEvents(), a.insertBefore(this.$el), this.$el.remove(), this.$el = a, this.el = a[0], this.delegateEvents())
        },
        _removeListeners: function() {
            _.each(this._listeners, function(a) {
                _.each(a, function(a) {
                    a.object.off(a.event, a.fn)
                })
            }), this._listeners = {}
        },
        _handleLinkClick: function(a) {
            this._logContextEvent(a);
            var b = $(a.currentTarget), c = $(a.target), d = b.attr("href"), e=!c.hasClass(j)&&!b.hasClass(j), f = b.hasClass("external"), g = c.attr("data-ga");
            if (g && P.trackGAEvent(g, P.CONST.GA_ACTION_CLICK), !e)
                return !1;
            if (f)
                return P.changeWindowLocation(d, !0), this.triggerEvent(P.CONST.EVENT_EXTERNAL_CLICK, null, !0), !1;
            if (P.isOffsiteUrl(d) ||!(a.which > 1 || a.metaKey || a.ctrlKey || a.shiftKey || a.altKey)) {
                var h = d && d.length && "#" !== d.charAt(0)&&!P.beginsWith(d, "javascript:")&&!P.beginsWith(d, "mailto:");
                return h ? (this.navigate(d, c, !!b.attr("data-force-refresh")), !1) : void 0
            }
        },
        _logContextEvent: function(a) {
            if (!P.ContextLogger.getInstance().eventLogged(a)) {
                var b = P.ContextLogging.EventType.CLICK, c = $(a.target).closest("[" + m + "]", this.$el), d = c.parent().closest("[" + n + "]");
                if (0 !== c.length && 0 !== d.length) {
                    var e = c.attr(o) || "{}", f = P.ContextEvent.fromEventType(b), g = parseInt(c.attr(m), 10), h = parseInt(d.attr(n), 10), i = JSON.parse(e);
                    f.setElement(g), f.setComponent(h), f.updateAuxData(i);
                    var j = this.getModuleAdditionalAuxData();
                    j && f.updateAuxData(j);
                    var k = this.getLoggingObjectIdStr();
                    k && f.setObjectIdStr(k), P.ContextLogger.getInstance().addEvent(f, a)
                }
            }
        },
        _logCustomContextEvent: function(a, b, c, d) {
            var e = P.ContextEvent.fromEventType(a);
            e.setElement(b), e.setComponent(c), e.updateAuxData(d), P.ContextLogger.getInstance().addEvent(e, null)
        },
        getDebugInfo: function() {
            return this.className
        },
        getGridIndex: function() {
            return this.data && "grid_index"in this.data ? this.data.grid_index : null
        },
        getModuleAdditionalAuxData: function() {
            var a = this.getGridIndex();
            return a ? {
                grid_index: a
            } : null
        },
        getLoggingObjectIdStr: function() {
            return null
        },
        getBreadcrumbs: function() {
            return this._breadcrumbs
        },
        setBreadcrumbs: function(a) {
            this._breadcrumbs = a
        },
        focus: function() {
            this.$el.focusWithoutScrolling()
        },
        initScroll: P.NOOP
    }), P.Errors.wrap(P.Module.prototype, ["loadFromModuleTree", "render", "renderExistingData"]);
    var s = P.Module.extend;
    P.Module.extend = function(a, b) {
        return a && a.mixins && _.extend.apply(_, [a].concat(a.mixins)), s.call(this, a, b)
    }, P.Module.console = null, P.Module.window = null
}(), function() {
    goog.provide("P.integrationTesting"), goog.require("P.Module");
    var a = function() {};
    a.prototype.getChildrenByModuleName = function(a, b) {
        var c = [];
        return _.each(a.children, function(a) {
            a.className === b && c.push(a), c = c.concat(this.getChildrenByModuleName(a, b))
        }.bind(this)), c
    }, a.prototype.getParentsForModule = function(a) {
        for (var b = []; a.parent;)
            a = a.parent, b.push(a);
        return b
    }, a.prototype.getElementsForModules = function(a) {
        return a ? _.isArray(a) ? _.map(a, function(a) {
            return a.$el.get()
        }) : [a.$el.get()] : []
    }, P.integrationTesting.getHelper = function() {
        return new a
    }
}(), function() {
    goog.provide("P.tutorialManager"), goog.require("P.event"), goog.require("P.interfaces.ModalTutorialStep"), goog.require("P.interfaces.TutorialStep"), goog.require("P.interfaces.ITutorialController"), goog.require("P.CONST");
    var a = P.Logger.getLogger("TutorialManager"), b = function(a, b) {
        this.url = a, this.forceRefresh=!!b
    }, c = "tutorial", d = "Tutorial", e = "Step";
    P.TutorialManager = function() {
        this.TUTORIAL_CONFIG = {
            yourBoards: {
                stepNames: ["ModalSeeProfileIntro"],
                expiredSteps: {},
                canExit: !1,
                inModal: !0,
                nextUrlInfo: function() {
                    return new b("/" + P.currentUser.get("username") + "/", !1)
                },
                onUserExit: P.NOOP
            },
            findFriends: {
                stepNames: ["ModalFindFriendsIntro"],
                expiredSteps: {},
                nextUrlInfo: function() {
                    return new b("/find_friends/", !1)
                },
                canExit: !1,
                inModal: !0,
                onUserExit: P.NOOP
            },
            fastFollowIntro: {
                stepNames: ["ModalFastFollowIntro"],
                expiredSteps: {},
                nextUrlInfo: function() {
                    return new b(null, !1)
                },
                canExit: !1,
                inModal: !0,
                onUserExit: P.NOOP
            },
            firstPinIntro: {
                stepNames: ["ModalFirstPinIntro"],
                expiredSteps: {},
                canExit: !0,
                inModal: !0,
                nextUrlInfo: function() {
                    return new b(null, !1)
                },
                onUserExit: P.NOOP
            },
            categorySearchIntro: {
                stepNames: ["ModalCategorySearchIntro"],
                expiredSteps: {},
                canExit: !1,
                inModal: !0,
                nextUrlInfo: function() {
                    return new b(null, !1)
                },
                onUserExit: P.NOOP
            },
            guidedSearchHeaderIntro: {
                stepNames: ["GuidedSearchHeaderIntroOne", "GuidedSearchHeaderIntroTwo", "GuidedSearchHeaderIntroThree", "GuidedSearchHeaderIntroFour"],
                stepExtraData: {
                    GuidedSearchHeaderIntroOne: {
                        moduleName: "ModalGSHeaderIntroStepBase",
                        options: {
                            start_tour: P._("Next"),
                            title: P._("We moved things around a bit!"),
                            content: P._("Here's where to explore categories and see the latest Pin Picks."),
                            module_id: "categoriesDropdownButton",
                            step_position: "BOTTOM_RIGHT",
                            has_background: !0,
                            background_class: "categoriesDropdownButtonBg"
                        }
                    },
                    GuidedSearchHeaderIntroTwo: {
                        moduleName: "ModalGSHeaderIntroStepBase",
                        options: {
                            title: P._("There's more down here"),
                            content_html: P._("Want to add Pins or boards? Got a question?<br />Look no further."),
                            module_id: "footerButtons",
                            step_position: "TOP_RIGHT",
                            has_background: !0,
                            background_class: "footerButtonWrapperBg"
                        }
                    },
                    GuidedSearchHeaderIntroThree: {
                        moduleName: "ModalGSHeaderIntroStepBase",
                        options: {
                            title: P._("Get back home"),
                            content_html: P._("Click the trusty Pinterest P to get back to your<br />home feed."),
                            module_id: "logoNavButton",
                            step_position: "BOTTOM_LEFT",
                            has_background: !0,
                            background_class: "logoNavButtonBg"
                        }
                    },
                    GuidedSearchHeaderIntroFour: {
                        moduleName: "ModalGSHeaderIntroStepBase",
                        options: {
                            title: P._("Find anything you're looking for"),
                            content_html: P._("You can search for Pins, boards or other Pinners. Give it a try&mdash;you might be surprised what you find."),
                            module_id: "mainSearchTextbox",
                            step_position: "BOTTOM_LEFT",
                            has_background: !0,
                            background_class: "mainSearchTextboxBg",
                            caret_class: "gsHeaderIntroLastStep"
                        }
                    }
                },
                expiredSteps: {},
                canExit: !1,
                inModal: !0,
                nextUrlInfo: function() {
                    return new b(null, !1)
                },
                onUserExit: P.NOOP
            },
            guidedSearchIntro: {
                stepNames: ["GuidedSearchIntroOne", "GuidedSearchIntroTwo"],
                stepExtraData: {
                    GuidedSearchIntroOne: {
                        moduleName: "ModalGuidedSearchIntroStepBase",
                        options: {
                            start_tour: P._("Next"),
                            title: P._("Explore your options"),
                            content: P._("Scroll through the guides and click any that look interesting to steer your search in the right direction."),
                            module_id: "searchGuides",
                            step_position: "BOTTOM_CENTER"
                        }
                    },
                    GuidedSearchIntroTwo: {
                        moduleName: "ModalGuidedSearchIntroStepBase",
                        options: {
                            title: P._("Have something else in mind?"),
                            content: P._("Type in your own search terms to find just the thing you're after."),
                            step_position: "BOTTOM_LEFT",
                            has_background: !0,
                            background_class: "searchInputTokenBg"
                        }
                    }
                },
                expiredSteps: {},
                canExit: !1,
                inModal: !0,
                nextUrlInfo: function() {
                    return new b(null, !1)
                },
                onUserExit: P.NOOP
            },
            placePinsIntro: {
                stepNames: ["ModalPlacePinsIntro"],
                expiredSteps: {},
                canExit: !0,
                inModal: !0,
                nextUrlInfo: function() {
                    return new b(null, !1)
                },
                onUserExit: P.NOOP
            },
            emptyPlacesBoardIntro: {
                stepNames: ["ModalPlacePinsAddEmpty", "ModalPlacePinsSearch"],
                expiredSteps: {},
                canExit: !0,
                inModal: !0,
                nextUrlInfo: function() {
                    return new b(null, !1)
                },
                onUserExit: P.NOOP
            },
            filledPlacesBoardIntro: {
                stepNames: ["ModalPlacePinsEdit", "ModalPlacePinsShow", "ModalPlacePinsAddFilled"],
                expiredSteps: {},
                canExit: !0,
                inModal: !0,
                nextUrlInfo: function() {
                    return new b(null, !1)
                },
                onUserExit: P.NOOP
            },
            newUserBastilleMaleSteps: {
                stepNames: ["NewUserInterestPicker", "NewUserFindFriends", "InitializeHomeFeedSpinner"],
                expiredSteps: {},
                canExit: !1,
                nextUrlInfo: function() {
                    return P.currentUser.attributes.is_partner ? new b("/business/getstarted/", !0) : new b("/?allow_nux=no", !0)
                },
                stepExtraData: {
                    InitializeHomeFeedSpinner: {
                        moduleName: "BuildingHomeFeedSpinner",
                        options: {
                            is_nux: !0
                        }
                    }
                },
                onUserExit: P.NOOP
            },
            newUserBastilleNonMaleSteps: {
                stepNames: ["NewUserInterestPicker", "InitializeHomeFeedSpinner"],
                expiredSteps: {},
                canExit: !1,
                stepExtraData: {
                    InitializeHomeFeedSpinner: {
                        moduleName: "BuildingHomeFeedSpinner",
                        options: {
                            is_nux: !0
                        }
                    }
                },
                nextUrlInfo: function() {
                    return P.currentUser.attributes.is_partner ? new b("/business/getstarted/", !0) : new b("/?allow_nux=no", !0)
                },
                onUserExit: P.NOOP
            },
            newUserExtensionMaleSteps: {
                stepNames: ["NewUserInterestPicker", "NewUserFindFriends", "NewUserInstallExtension", "InitializeHomeFeedSpinner"],
                expiredSteps: {},
                canExit: !1,
                stepExtraData: {
                    InitializeHomeFeedSpinner: {
                        moduleName: "BuildingHomeFeedSpinner",
                        options: {
                            is_nux: !0
                        }
                    }
                },
                nextUrlInfo: function() {
                    return P.currentUser.get("is_partner") ? new b("/business/getstarted/", !0) : new b("/?allow_nux=no", !0)
                },
                onUserExit: P.NOOP
            },
            newUserExtensionNonMaleSteps: {
                stepNames: ["NewUserInterestPicker", "NewUserInstallExtension", "InitializeHomeFeedSpinner"],
                expiredSteps: {},
                canExit: !1,
                stepExtraData: {
                    InitializeHomeFeedSpinner: {
                        moduleName: "BuildingHomeFeedSpinner",
                        options: {
                            is_nux: !0
                        }
                    }
                },
                nextUrlInfo: function() {
                    return P.currentUser.get("is_partner") ? new b("/business/getstarted/", !0) : new b("/?allow_nux=no", !0)
                },
                onUserExit: P.NOOP
            },
            rebuildHomeFeedSteps: {
                stepNames: ["NewUserInterestPicker", "InitializeHomeFeedSpinner"],
                expiredSteps: {},
                canExit: !1,
                stepExtraData: {
                    InitializeHomeFeedSpinner: {
                        moduleName: "BuildingHomeFeedSpinner",
                        options: {
                            is_nux: !1
                        }
                    }
                },
                nextUrlInfo: function() {
                    return new b("/?allow_nux=no", !0)
                },
                onUserExit: P.NOOP
            },
            firstBoardIntro: {
                stepNames: ["ModalFirstBoardIntro"],
                expiredSteps: {},
                canExit: !1,
                inModal: !0,
                nextUrlInfo: function() {
                    return new b(null, !1)
                },
                onUserExit: P.NOOP
            },
            newUserWhitneyEd: {
                stepNames: ["ModalNuxWelcome", "ModalNuxDiscover", "ModalNuxPin", "ModalNuxBoard"],
                expiredSteps: {},
                canExit: !1,
                inModal: !0,
                nextUrlInfo: function() {
                    return new b("/", !0)
                },
                onUserExit: P.NOOP
            },
            interestsNuxMweb: {
                stepNames: ["NewUserWelcome", "NewUserInterestPicker", "NewUserSetupSpinner"],
                expiredSteps: {},
                canExit: !1,
                nextUrlInfo: function() {
                    return new b("/", !0)
                },
                onUserExit: P.NOOP
            },
            qaNotificationIntro: {
                stepNames: ["ModalQuestionIntroOne", "ModalQuestionIntroTwo"],
                expiredSteps: {},
                canExit: !1,
                inModal: !0,
                nextUrlInfo: function() {
                    return new b(null, !1)
                },
                onUserExit: P.NOOP
            },
            qaAnswerIntro: {
                stepNames: ["ModalAnswerIntroOne", "ModalAnswerIntroTwo"],
                expiredSteps: {},
                canExit: !1,
                inModal: !0,
                nextUrlInfo: function() {
                    return new b(null, !1)
                },
                onUserExit: P.NOOP
            },
            visualObjectSearchIntro: {
                stepNames: ["ModalVisualObjectSearchIntro"],
                expiredSteps: {},
                canExit: !1,
                inModal: !0,
                nextUrlInfo: function() {
                    return new b(null, !1)
                },
                onUserExit: P.NOOP
            },
            analyticsHomeUserEd: {
                stepNames: ["ModalAnalyticsHomeOverallIntro", "ModalAnalyticsHomeProfileCardIntro", "ModalAnalyticsHomeAudienceCardIntro", "ModalAnalyticsHomeDomainCardIntro"],
                expiredSteps: {},
                canExit: !1,
                inModal: !0,
                nextUrlInfo: function() {
                    return new b(null, !1)
                },
                onUserExit: P.NOOP
            },
            analyticsAudienceSelectorUserEd: {
                stepNames: ["ModalAnalyticsAudienceSelectorIntro"],
                expiredSteps: {},
                canExit: !1,
                inModal: !0,
                nextUrlInfo: function() {
                    return new b(null, !1)
                },
                onUserExit: P.NOOP
            },
            emptyBoardIntro: {
                triggerCardTitle: P._("Learn how to organize boards by theme or topic"),
                title: P._("Learn about boards"),
                subtitle: P._("Find out how to use them to organize your Pins"),
                stepNames: ["BoardIntroOne", "BoardIntroTwo", "BoardIntroThree", "BoardIntroFour"],
                stepExtraData: {
                    BoardIntroOne: {
                        moduleName: "UserEducationGuideStepBase",
                        options: {
                            body_html: P._("This is a board. Boards are for saving Pins by theme or topic."),
                            zoomed_in: !0,
                            step_type: P.CONST.StepTypes.BEGINNING,
                            stacked_group: 1
                        }
                    },
                    BoardIntroTwo: {
                        moduleName: "UserEducationGuideStepBase",
                        options: {
                            body_html: P._("For example, Keith saves garden ideas on his greenhouse board"),
                            zoomed_in: !0,
                            step_type: P.CONST.StepTypes.CONTINUE,
                            stacked_group: 1
                        },
                        backgroundImage: "greenhouse-board"
                    },
                    BoardIntroThree: {
                        moduleName: "UserEducationGuideStepBase",
                        options: {
                            body_html: P._("Ash made a board to plan her weeknight dinners"),
                            zoomed_in: !0,
                            step_type: P.CONST.StepTypes.CONTINUE,
                            stacked_group: 1
                        },
                        backgroundImage: "recipe-board"
                    },
                    BoardIntroFour: {
                        moduleName: "UserEducationGuideStepBase",
                        options: {
                            body_html: P._("Click to look for Pins for your board"),
                            step_type: P.CONST.StepTypes.TOOLTIP,
                            anchor: ".headerContainer .categoriesHeader",
                            position_point: "BOTTOM_CENTER",
                            fixed: !0,
                            viewChangeFilter: {
                                moduleName: "Dropdown",
                                view_type: "categoriesMenu guided"
                            }
                        }
                    }
                },
                commonStepExtraData: {
                    placementID: P.Experiences.Placement.WEB_FILLED_PLACES_BOARD_TAKEOVER,
                    experienceID: P.Experiences.Experience.WEB_EMPTY_BOARD_ED
                },
                expiredSteps: {},
                canExit: !1,
                tutorialType: P.CONST.TutorialTypes.USER_EDUCATION_TUTORIAL,
                nextUrlInfo: function() {
                    return new b(null, !1)
                },
                onUserExit: P.NOOP
            },
            emptyProfileIntro: {
                triggerCardTitle: P._("Learn what your profile’s for and how to use it"),
                title: P._("Get to know your profile"),
                subtitle: P._("Learn what it's for and how to use it"),
                stepNames: ["ProfileIntroOne", "ProfileIntroTwo", "ProfileIntroThree", "ProfileIntroFour", "ProfileIntroFive"],
                stepExtraData: {
                    ProfileIntroOne: {
                        moduleName: "UserEducationGuideStepBase",
                        options: {
                            body_html: P._("This is your profile.  Anything you Pin will live here."),
                            zoomed_in: !0,
                            step_type: P.CONST.StepTypes.BEGINNING,
                            stacked_group: 1
                        }
                    },
                    ProfileIntroTwo: {
                        moduleName: "UserEducationGuideStepBase",
                        options: {
                            body_html: P._("Boards are where you organize your Pins by theme or topic"),
                            zoomed_in: !0,
                            step_type: P.CONST.StepTypes.CONTINUE,
                            stacked_group: 1
                        },
                        backgroundImage: "keith-profile"
                    },
                    ProfileIntroThree: {
                        moduleName: "UserEducationGuideStepBase",
                        options: {
                            body_html: P._("For example, Keith has a board for stuff he wants to wear"),
                            zoomed_in: !0,
                            step_type: P.CONST.StepTypes.CONTINUE,
                            stacked_group: 1
                        },
                        backgroundImage: "style-board"
                    },
                    ProfileIntroFour: {
                        moduleName: "UserEducationGuideStepBase",
                        options: {
                            body_html: P._("Ash is saving places to travel and recipes to try"),
                            zoomed_in: !0,
                            step_type: P.CONST.StepTypes.CONTINUE,
                            stacked_group: 1
                        },
                        backgroundImage: "ash-profile"
                    },
                    ProfileIntroFive: {
                        moduleName: "UserEducationGuideStepBase",
                        options: {
                            body_html: P._("You can make boards for anything! Click Done to try it out."),
                            step_type: P.CONST.StepTypes.END,
                            zoomed_in: !0,
                            stacked_group: 1
                        }
                    }
                },
                commonStepExtraData: {
                    placementID: P.Experiences.Placement.WEB_USER_PROFILE_TAKEOVER,
                    experienceID: P.Experiences.Experience.WEB_EMPTY_PROFILE_ED
                },
                expiredSteps: {},
                canExit: !1,
                tutorialType: P.CONST.TutorialTypes.USER_EDUCATION_TUTORIAL,
                nextUrlInfo: function() {
                    return new b(null, !1)
                },
                onUserExit: P.NOOP
            },
            homeFeedGuide: {
                triggerCardTitle: P._("See how all these Pins got in your home feed"),
                title: P._("Get to know your home feed"),
                subtitle: P._("Learn how to fill your home feed with Pins you’re interested in"),
                stepNames: ["HomeFeedGuideOne", "HomeFeedGuideTwo", "HomeFeedGuideThree", "HomeFeedGuideFour"],
                stepExtraData: {
                    HomeFeedGuideOne: {
                        moduleName: "UserEducationGuideStepBase",
                        options: {
                            body_html: P._("This is your home feed. It’s full of Pins from boards you follow."),
                            zoomed_in: !0,
                            step_type: P.CONST.StepTypes.BEGINNING,
                            stacked_group: 1
                        }
                    },
                    HomeFeedGuideTwo: {
                        moduleName: "UserEducationGuideStepBase",
                        options: {
                            body_html: P._("For example, Mia follows boards about cooking and travel"),
                            zoomed_in: !0,
                            step_type: P.CONST.StepTypes.CONTINUE,
                            stacked_group: 1
                        },
                        backgroundImage: "home-feed-1"
                    },
                    HomeFeedGuideThree: {
                        moduleName: "UserEducationGuideStepBase",
                        options: {
                            body_html: P._("David follows vintage scooter and DIY boards"),
                            zoomed_in: !0,
                            step_type: P.CONST.StepTypes.CONTINUE,
                            stacked_group: 1
                        },
                        backgroundImage: "home-feed-2"
                    },
                    HomeFeedGuideFour: {
                        moduleName: "UserEducationGuideStepBase",
                        options: {
                            body_html: P._("Pin anything from your home feed to save it for yourself"),
                            zoomed_in: !0,
                            step_type: P.CONST.StepTypes.END,
                            stacked_group: 1
                        }
                    }
                },
                commonStepExtraData: {
                    placementID: P.Experiences.Placement.WEB_HOME_TAKEOVER,
                    experienceID: P.Experiences.Experience.WEB_HOME_FEED_ED
                },
                expiredSteps: {},
                canExit: !1,
                tutorialType: P.CONST.TutorialTypes.USER_EDUCATION_TUTORIAL,
                nextUrlInfo: function() {
                    return new b(null, !1)
                },
                onUserExit: P.NOOP
            },
            pinClickThrough: {
                triggerCardTitle: P._("Pins are more than just pictures! Learn more"),
                title: P._("Pins are more than just images"),
                subtitle: P._("Learn how to get back to a Pin’s website"),
                stepNames: ["PinClickThroughOne", "PinClickThroughTwo", "PinClickThroughThree"],
                stepExtraData: {
                    PinClickThroughOne: {
                        moduleName: "UserEducationGuideStepBase",
                        options: {
                            body_html: P._("This is a Pin.<br />Pins link to websites."),
                            zoomed_in: !0,
                            step_type: P.CONST.StepTypes.BEGINNING,
                            stacked_group: 1
                        }
                    },
                    PinClickThroughTwo: {
                        moduleName: "UserEducationGuideStepBase",
                        options: {
                            body_html: P._("This recipe Pin takes you right to the cooking instructions"),
                            zoomed_in: !0,
                            step_type: P.CONST.StepTypes.CONTINUE,
                            stacked_group: 1
                        },
                        backgroundImage: "clickthrough-1"
                    },
                    PinClickThroughThree: {
                        moduleName: "UserEducationGuideStepBase",
                        options: {
                            body_html: P._("Try it! Click the Pin to see where it came from."),
                            step_type: P.CONST.StepTypes.TOOLTIP,
                            anchor: ".CloseupContent .imageContainer",
                            attach_to: ".Module.Closeup",
                            position_point: "CENTER_CENTER"
                        }
                    }
                },
                commonStepExtraData: {
                    placementID: P.Experiences.Placement.WEB_PIN_CLOSEUP,
                    experienceID: P.Experiences.Experience.WEB_CLICKTHROUGH_ED
                },
                expiredSteps: {},
                canExit: !1,
                tutorialType: P.CONST.TutorialTypes.USER_EDUCATION_TUTORIAL,
                nextUrlInfo: function() {
                    return new b(null, !1)
                },
                onUserExit: P.NOOP
            },
            repin: {
                triggerCardTitle: P._("Learn how to save this Pin for yourself"),
                title: P._("Become a Pinning pro"),
                subtitle: P._("Learn how to save Pins to boards"),
                stepNames: ["RepinOne", "RepinTwo", "RepinThree", "RepinFour"],
                stepExtraData: {
                    RepinOne: {
                        moduleName: "UserEducationGuideStepBase",
                        options: {
                            body_html: P._("If you want to save this Pin, you can Pin it to a board"),
                            zoomed_in: !0,
                            step_type: P.CONST.StepTypes.BEGINNING,
                            stacked_group: 1
                        }
                    },
                    RepinTwo: {
                        moduleName: "UserEducationGuideStepBase",
                        options: {
                            body_html: P._("For example, Jon saved this article to his Must Read board"),
                            zoomed_in: !0,
                            step_type: P.CONST.StepTypes.CONTINUE,
                            stacked_group: 1
                        },
                        backgroundImage: "repin-1"
                    },
                    RepinThree: {
                        moduleName: "UserEducationGuideStepBase",
                        options: {
                            body_html: P._("Mia saved recipes to her Easy Dinners board"),
                            zoomed_in: !0,
                            step_type: P.CONST.StepTypes.CONTINUE,
                            stacked_group: 1
                        },
                        backgroundImage: "repin-2"
                    },
                    RepinFour: {
                        moduleName: "UserEducationGuideStepBase",
                        options: {
                            body_html: P._("To save this Pin for yourself, click Pin it"),
                            step_type: P.CONST.StepTypes.TOOLTIP,
                            anchor: ".PinActionBar .repin.pinActionBarButton",
                            attach_to: ".Module.Closeup",
                            position_point: "BOTTOM_CENTER",
                            fixed: !0
                        }
                    }
                },
                commonStepExtraData: {
                    placementID: P.Experiences.Placement.WEB_PIN_CLOSEUP,
                    experienceID: P.Experiences.Experience.WEB_REPIN_ED
                },
                expiredSteps: {},
                canExit: !1,
                tutorialType: P.CONST.TutorialTypes.USER_EDUCATION_TUTORIAL,
                nextUrlInfo: function() {
                    return new b(null, !1)
                },
                onUserExit: P.NOOP
            },
            boardFollow: {
                stepNames: ["BoardFollowOne", "BoardFollowTwo", "BoardFollowThree", "BoardFollowFour"],
                stepExtraData: {
                    BoardFollowOne: {
                        moduleName: "UserEducationGuideStepBase",
                        options: {
                            body_html: P._("Like this board? Follow it to see new Pins in your home feed"),
                            zoomed_in: !0,
                            step_type: P.CONST.StepTypes.BEGINNING,
                            stacked_group: 1
                        }
                    },
                    BoardFollowTwo: {
                        moduleName: "UserEducationGuideStepBase",
                        options: {
                            body_html: P._("For example, Rob followed Kim’s travel board"),
                            zoomed_in: !0,
                            step_type: P.CONST.StepTypes.CONTINUE,
                            stacked_group: 1
                        },
                        backgroundImage: "styleBoard"
                    },
                    BoardFollowThree: {
                        moduleName: "UserEducationGuideStepBase",
                        options: {
                            body_html: P._("When Kim adds Pins to it, Rob sees them in his home feed"),
                            zoomed_in: !0,
                            step_type: P.CONST.StepTypes.CONTINUE,
                            stacked_group: 1
                        },
                        backgroundImage: "keithProfile"
                    },
                    BoardFollowFour: {
                        moduleName: "UserEducationGuideStepBase",
                        options: {
                            body_html: P._("To see Pins from this board in your home feed, click Follow"),
                            step_type: P.CONST.StepTypes.TOOLTIP,
                            anchor: ".BoardFollowButton",
                            position_point: "BOTTOM_CENTER"
                        }
                    }
                },
                expiredSteps: {},
                canExit: !1,
                tutorialType: P.CONST.TutorialTypes.USER_EDUCATION_TUTORIAL,
                nextUrlInfo: function() {
                    return new b(null, !1)
                },
                onUserExit: P.NOOP
            },
            profileFollow: {
                stepNames: ["ProfileFollowOne", "ProfileFollowTwo", "ProfileFollowThree", "ProfileFollowFour"],
                stepExtraData: {
                    ProfileFollowOne: {
                        moduleName: "UserEducationGuideStepBase",
                        options: {
                            body_html: P._("Like this user's boards? Follow your favorites to see their new Pins in your home feed"),
                            zoomed_in: !0,
                            step_type: P.CONST.StepTypes.BEGINNING,
                            stacked_group: 1
                        }
                    },
                    ProfileFollowTwo: {
                        moduleName: "UserEducationGuideStepBase",
                        options: {
                            body_html: P._("For example, Liz followed Sam’s art and DIY boards"),
                            zoomed_in: !0,
                            step_type: P.CONST.StepTypes.CONTINUE,
                            stacked_group: 1
                        },
                        backgroundImage: "styleBoard"
                    },
                    ProfileFollowThree: {
                        moduleName: "UserEducationGuideStepBase",
                        options: {
                            body_html: P._("When Sam adds Pins to them, Liz sees them in her home feed"),
                            zoomed_in: !0,
                            step_type: P.CONST.StepTypes.CONTINUE,
                            stacked_group: 1
                        },
                        backgroundImage: "keithProfile"
                    },
                    ProfileFollowFour: {
                        moduleName: "UserEducationGuideStepBase",
                        options: {
                            body_html: P._("You can always unfollow boards later if you change your mind"),
                            zoomed_in: !0,
                            step_type: P.CONST.StepTypes.END,
                            stacked_group: 1
                        }
                    }
                },
                expiredSteps: {},
                canExit: !1,
                tutorialType: P.CONST.TutorialTypes.USER_EDUCATION_TUTORIAL,
                nextUrlInfo: function() {
                    return new b(null, !1)
                },
                onUserExit: P.NOOP
            }
        }, this.init()
    }, P.TutorialManager.prototype = {
        init: function() {
            this._isActive=!1, this.moduleContainer = null, this.userEducationGuideContainer = null, this.tutorialController = null, this.renderModule=!0, this.progressModule = null, $("body").removeClass(this.tutorialClassName), this.tutorialName = null, this.tutorialClassName = null, this.tutorial = null, this.allStepNames = null, this.numTotalSteps = null, this.currentStep = null, this.isZoomedIn=!1
        },
        startTutorial: function(a, b) {
            b = b || {};
            var c = this.TUTORIAL_CONFIG[a];
            if (c)
                if (this.tutorialController = null, c.tutorialType === P.CONST.TutorialTypes.USER_EDUCATION_TUTORIAL) {
                    if (this.isTutorialActive())
                        return;
                        var d = b.display_data || {};
                        d.automatic_trigger ? (this.tutorialController = new P.UserEducationGuideController(a, b, c, this), this.tutorialController.startTutorial().then(function() {
                            this._start(a, !0)
                        }.bind(this)), P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_TUTORIAL, P.CONST.PUBSUB_TOPIC_TUTORIAL_TRIGGER_ACTIVE, $.extend({}, c, {
                            tutorialName: a
                        }))) : d.manual_trigger ? P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_TUTORIAL, P.CONST.PUBSUB_TOPIC_TUTORIAL_TRIGGER_ACTIVE, $.extend({}, c, {
                            tutorialName: a
                        })) : P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_TUTORIAL, P.CONST.PUBSUB_TOPIC_TUTORIAL_TRIGGER_ACTIVE, $.extend({}, c, {
                            tutorialName: a,
                            showFlyout: !0
                        }))
                } else 
                    this._startTutorialDeprecated(a, b)
        },
        _startTutorialDeprecated: function(a, b) {
            return b = b || {}, this.moduleContainer = b.moduleContainer, this.renderModule = b.renderModule, this.progressModule = b.progressModule || this.progressModule, this._isActive ? void(this.renderModule===!1 || this.currentModule || this._loadModuleForStep(this.currentStep)) : void this._start(a, !0)
        },
        setProgressModule: function(a) {
            this.progressModule !== a && (this.progressModule = a, this.progressModule.listen(this.progressModule, P.CONST.EVENT_NEXT, this._next.bind(this)), this.progressModule.listen(this.progressModule, P.CONST.EVENT_PREVIOUS, this._previous.bind(this)), this._updateProgressModuleStep())
        },
        stopTutorial: function() {
            this._isActive && this.init()
        },
        resumeTutorial: function() {
            if (!this._isActive) {
                var a = this._getStoredData();
                a && a.name && this._start(a.name, !1)
            }
        },
        _start: function(a, b) {
            var c = this.TUTORIAL_CONFIG[a];
            c && (this._clear(b), this._isActive=!0, this.tutorialName = a, this.tutorialClassName = this.tutorialName + d, $("body").addClass(this.tutorialClassName), this.tutorial = c, this.expiredSteps = this.tutorial.expiredSteps, this.allStepNames = this.tutorial.stepNames, this.numTotalSteps = this.tutorial.stepNames.length, this._funnelPrefix = "tutorial_" + a, this.renderModule = this.renderModule===!1?!1 : !0, this.tutorial.inModal ? (this._setupModal(), this._setStep(this._getStoredStep() || this.allStepNames[0])) : (this.moduleContainer ||!this.renderModule) && this._setStep(this._getStoredStep() || this.allStepNames[0]))
        },
        isTutorialActive: function() {
            return this._isActive
        },
        _setupModal: function() {
            var a = {
                name: "Modal",
                options: {
                    mask_type: "dark",
                    can_dismiss: !1
                }
            };
            P.loadModule(a).then(function(a) {
                this.modal = a, this.modal.render(), this.modal.childListen(P.CONST.EVENT_NEXT, this._next.bind(this)), this.modal.childListen(P.CONST.EVENT_PREVIOUS, this._previous.bind(this)), P.getModalManager().showModal(this.modal, null)
            }.bind(this))
        },
        _next: function() {
            var a = this._getStepIndex(this.currentStep);
            return this.currentStep === _.last(this.allStepNames) ? void this._endTutorial(!0) : void this._setStep(this.allStepNames[a + 1])
        },
        _previous: function() {
            var b = this._getStepIndex(this.currentStep);
            return 0 === b ? (a.logToServer(P.interfaces.SERVER_LOG_TYPE.LOG, "get", {
                type: "tutorial",
                tutorial: this.tutorialName,
                step: this.currentStep,
                step_number: b,
                action: "exit"
            }), this.tutorial.onUserExit(b), void this._endTutorial(!1)) : void this._setStep(this.allStepNames[b - 1])
        },
        _onDismiss: function() {
            this._endTutorial(!1)
        },
        _endTutorial: function(a) {
            var b = function() {
                var b = this.tutorial.nextUrlInfo().url, c = this.tutorial.nextUrlInfo().forceRefresh;
                if (this._clear(!0), a && b) {
                    var d = new P.navigateData.NavigateData;
                    c && (d.evt = new P.Event("", null, {
                        forceRefresh: 1
                    })), P.getHistoryNavigator().navigate(b, d)
                }
            }.bind(this), c = function() {
                return this.progressModule ? this.progressModule.endMandatoryFlow().then(function() {
                    this.progressModule.remove();
                    var a = P.app;
                    a.updateNavigationBar()
                }.bind(this)) : Promise.resolve()
            }.bind(this);
            this.tutorialController && this.tutorialController.onExit();
            var d;
            if (this.currentModule) {
                var e = a ? this.currentModule.completePlacedExperience(): this.currentModule.dismissPlacedExperience();
                d = e.fin(function() {
                    return new Promise(function(a) {
                        this.currentModule.onExit(a)
                    }.bind(this))
                }.bind(this)), this.currentModule.onTutorialComplete()
            } else 
                d = Promise.resolve();
            d.then(c).then(b), P.trackRegisterAction(this._funnelPrefix + "_complete")
        },
        _setStep: function(b) {
            return P.trackRegisterAction(this._funnelPrefix + "_" + b), a.debug("set step from", this.currentStep, "to", b), b !== this.currentStep ? (_.contains(this.allStepNames, b) || this.expiredSteps[b] || this._endTutorial(!0), this.expiredSteps[b] && (b = this.expiredSteps[b]), this.currentStep = b, this._saveCurrentStep(), this.currentModule ? void this.currentModule.onExit(function() {
                this.currentModule.onRemoved(), this._loadModuleForStep(b)
            }.bind(this)) : void(this.renderModule && this._loadModuleForStep(this.currentStep))) : void 0
        },
        _setNextStepClass: function(a) {
            var b = $("body"), c = null, d = this._getStepIndex(a);
            d > 0 && (c = this.allStepNames[d - 1], b.removeClass(c + e)), b.addClass(a + e)
        },
        _updateProgressModuleStep: function() {
            if (this.currentStep) {
                var a = this._getStepIndex(this.currentStep);
                this._setNextStepClass(this.currentStep), this.progressModule && this.progressModule.nextStep(a + 1)
            }
        },
        _loadModuleForStep: function(a) {
            if (this.tutorialController)
                this.tutorialController.loadModuleForStep(a);
            else {
                var b = this.getModuleArgs(a);
                a = a ? a : this.tutorial.stepNames[0], P.loadModule(b).then(function(a) {
                    var b = this.currentModule;
                    this.currentModule = a;
                    var c = a;
                    c.onEnter(function() {
                        this.modal ? this._renderStepModuleInModal(a, b) : this._renderStepModule(a, b)
                    }.bind(this))
                }.bind(this))
            }
        },
        _renderStepModule: function(a) {
            a.render().then(function() {
                var b = this.moduleContainer.children[0];
                this.moduleContainer.prependChild(a), b && b.destroy(), a.onShow(this._updateProgressModuleStep())
            }.bind(this))
        },
        _renderStepModuleInModal: function(a, b) {
            a.render().then(function() {
                var c = this.modal;
                c.setModule(a);
                var d = a;
                b && b.destroy(), d.setModalPosition(), d.onShow(this._updateProgressModuleStep())
            }.bind(this))
        },
        getModuleArgs: function(a) {
            var b = a, c = {
                tutorial_name: this.tutorialName,
                current_step: this._getStepIndex(a),
                total_steps: this.numTotalSteps,
                can_exit: this.tutorial.canExit
            };
            return this.tutorial.stepExtraData && this.tutorial.stepExtraData[a] && (b = this.tutorial.stepExtraData[a].moduleName, $.extend(c, this.tutorial.stepExtraData[a].options || {}), $.extend(c, this.tutorial.commonStepExtraData || {})), {
                name: "tutorials." + b,
                options: c
            }
        },
        _getStepIndex: function(a) {
            var b = _.indexOf(this.allStepNames, a);
            return - 1 !== b ? b : 0
        },
        _getStoredStep: function() {
            var a = this._getStoredData();
            return a && a.name !== this.tutorialName && (this._clearStoredData(), a = null), a && a.step || null
        },
        _getStoredData: function() {
            var a = P.SessionStorage.getItem(c);
            return a
        },
        _saveCurrentStep: function() {
            P.SessionStorage.setItem(c, {
                name: this.tutorialName,
                step: this.currentStep
            })
        },
        _clear: function(a) {
            this.tutorial && (this.stopTutorial(), this.modal && this._destroyModal(), a && this._clearStoredData())
        },
        _clearStoredData: function() {
            P.SessionStorage.removeItem(c)
        },
        _destroyModal: function() {
            this.modal.destroy(), this.modal = null
        }
    };
    var f = null;
    P.TutorialManager.instance = function() {
        return f || (f = new P.TutorialManager), f
    }
}(), function() {
    goog.provide("P.modalManager"), goog.require("P.interfaces.IModalManager");
    var a = function(a) {
        this._onModalDestroyed = this._onModalDestroyed.bind(this), this._onModalDismiss = this._onModalDismiss.bind(this), this._onKeyup = this._onKeyup.bind(this), this.$container = a || null, this.modals = [], this._animatedElement = null
    };
    _.extend(a.prototype, {
        getContainer: function() {
            return this.$container || (this.$container = $("body")), this.$container
        },
        showModal: function(a, b, c) {
            var d = this.getContainer();
            return this.modals.push(a), d.append(a.$el), a.moduleOpener = c, a._setInDom(!0), a.on(P.CONST.EVENT_DESTROYED, this._onModalDestroyed), a.on("child:" + P.CONST.EVENT_DISMISS, this._onModalDismiss), a.show(), a.focus(), 1 === this.modals.length && this._addListeners(), P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_TUTORIAL, P.CONST.PUBSUB_TOPIC_VIEW_CHANGE, {
                moduleName: "Modal",
                action: P.CONST.ViewActions.OPEN
            }), a
        },
        hasModals: function() {
            return this.modals.length >= 1
        },
        removeModal: function(a) {
            a.destroy()
        },
        removeAllModals: function(a) {
            _.each(this.modals, function(b) {
                var c = b;
                (a || c.getCanDismiss()) && c.destroy()
            })
        },
        showInModal: function(a, b, c) {
            var d = {
                module: a
            };
            _.extend(d, b);
            var e = {
                name: "Modal",
                options: d
            };
            P.loadModule(e).then(function(a) {
                this.showModal(a, b, c)
            }.bind(this))
        },
        _onModalDismiss: function(a) {
            P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_TUTORIAL, P.CONST.PUBSUB_TOPIC_VIEW_CHANGE, {
                moduleName: "Modal",
                action: P.CONST.ViewActions.CLOSE
            });
            var b = a.target.parent;
            this.removeModal(b)
        },
        _onModalDestroyed: function(a) {
            var b = a.target;
            b.off(P.CONST.EVENT_DESTROYED, this._onModalDestroyed), b.off("child:" + P.CONST.EVENT_DISMISS, this._onModalDismiss), this.modals = _.filter(this.modals, function(a) {
                return b !== a
            }), this.modals.length || this._removeListeners()
        },
        _addListeners: function() {
            $(document).on("keyup", this._onKeyup)
        },
        _removeListeners: function() {
            $(document).off("keyup", this._onKeyup)
        },
        getTopModal: function() {
            if (!this.hasModals())
                return null;
            var a = this.modals[this.modals.length - 1];
            return a
        },
        removeTopModal: function() {
            if (this.hasModals()) {
                var a = this.modals.pop();
                a.hide()
            }
        },
        _onKeyup: function(a) {
            a.keyCode === P.keyCode.ESCAPE && this.removeTopModal()
        },
        setAnimatedElement: function(a) {
            this._animatedElement && this._animatedElement.remove(), this._animatedElement = a, a && a.addClass("animatingToModal")
        },
        getAnimatedElement: function() {
            return this._animatedElement
        }
    }), P.setModalManager(new a)
}(), function() {
    goog.provide("P.userEducationGuideController"), goog.require("P.interfaces.ITutorialController"), goog.require("P.viewport");
    var a = "userEducationGuideBackgroundImage";
    P.UserEducationGuideController = function(a, b, c, d) {
        this.tutorialName = a, this.options = b || {}, this.tutorialInfo = c, this.tutorialManager = d, this.viewChangeSubscriber = P.pubsub.subscribe(P.CONST.PUBSUB_CHANNEL_TUTORIAL, P.CONST.PUBSUB_TOPIC_VIEW_CHANGE, this.onViewChange.bind(this)), this.navigationSubscriber = P.pubsub.subscribe(P.CONST.PUBSUB_CHANNEL_SITE, P.CONST.PUBSUB_TOPIC_DEEP_LINK, this.dismissTutorial.bind(this))
    }, P.UserEducationGuideController.prototype = {
        startTutorial: function() {
            var a = this.tutorialManager;
            return new Promise(function(b, c) {
                return window.self !== window.top ? void c(void 0) : a.isTutorialActive() ? void c(void 0) : void(a.userEducationGuideContainer ? (a.moduleContainer = a.userEducationGuideContainer, this._prefetchAllImages(), b(void 0)) : P.loadModule({
                    name: "UserEducationGuide"
                }).then(function(c) {
                    c.render().then(function() {
                        $("body").append(c.$el), a.userEducationGuideContainer = c, a.moduleContainer = a.userEducationGuideContainer, this._prefetchAllImages(), b(void 0)
                    }.bind(this))
                }.bind(this)))
            }.bind(this))
        },
        loadModuleForStep: function(a) {
            var b = this.tutorialManager;
            a = a ? a : this.tutorialInfo.stepNames[0];
            var c = this._getStepInfo(a) || {};
            if (c.backgroundImage ? this._showBackgroundImage(c.backgroundImage) : this._hideBackgroundImages(), c.options && c.options.zoomed_in&&!b.isZoomedIn)
                this._enterZoomedInMode();
            else if (c.options&&!c.options.zoomed_in && b.isZoomedIn)
                return void this._exitZoomedInMode().then(this._loadStepModule.bind(this, a));
            this._loadStepModule(a)
        },
        onExit: function() {
            this._hideBackgroundImages(), this.tutorialManager.isZoomedIn && this._exitZoomedInMode(), this.tutorialManager.moduleContainer.$el.empty(), this.viewChangeSubscriber && (P.pubsub.getChannel(P.CONST.PUBSUB_CHANNEL_TUTORIAL).removeSubscriber(this.viewChangeSubscriber, [P.CONST.PUBSUB_TOPIC_VIEW_CHANGE]), this.viewChangeSubscriber = null), this.navigationSubscriber && (P.pubsub.getChannel(P.CONST.PUBSUB_CHANNEL_SITE).removeSubscriber(this.navigationSubscriber, [P.CONST.PUBSUB_TOPIC_DEEP_LINK]), this.navigationSubscriber = null)
        },
        onViewChange: function(a, b, c) {
            var d = this._getStepInfo(this.tutorialManager.currentStep) || {};
            c = c || {};
            var e = c.options || {}, f = d.options && d.options.viewChangeFilter || {};
            (c.moduleName !== f.moduleName || e.view_type !== f.view_type) && this.dismissTutorial()
        },
        dismissTutorial: function() {
            this.tutorialManager && this.tutorialManager.isTutorialActive() && this.tutorialManager._onDismiss()
        },
        _loadStepModule: function(a) {
            var b = this._getModuleArgs(a), c = this.tutorialManager;
            this._isCurrentCardStacked() || P.loadModule(b).then(function(b) {
                var d = c.currentModule;
                c.currentModule = b;
                var e = b;
                e.onEnter(function() {
                    this._renderStepModuleUserEducationGuide(b, d, a)
                }.bind(this))
            }.bind(this))
        },
        _renderStepModuleUserEducationGuide: function(a, b, c) {
            var d = this.tutorialManager, e = this._getStepInfo(c);
            a.render().then(function() {
                b && b.destroy(), d.moduleContainer.$el.appendTo(e && e.options && e.options.attach_to ? e.options.attach_to : $("body")), d.moduleContainer.prependChild(a), a.onShow()
            })
        },
        _getModuleArgs: function(a) {
            var b = this.tutorialManager.getModuleArgs(a), c = this._getStepInfo(a);
            return c && c.options.step_type === P.CONST.StepTypes.BEGINNING && (b.options.stacked_cards = this._getStackedCardGroup(this.tutorialInfo.stepExtraData, c.options.stacked_group)), b
        },
        _getStackedCardGroup: function(a, b) {
            var c = _.filter(a, function(a) {
                var c = a.options;
                return c.stacked_group === b && c.step_type !== P.CONST.StepTypes.BEGINNING
            });
            return c.map(function(a) {
                return a.options
            })
        },
        _enterZoomedInMode: function() {
            var a = $("body");
            a.addClass("userEducationGuideZoomedIn");
            var b = $('<div class="userEducationGuideOverlay" />');
            a.append(b), b.transition({
                scale: .8
            }), $(".App").transition({
                scale: .8
            }), this.tutorialManager.isZoomedIn=!0
        },
        _exitZoomedInMode: function() {
            return new Promise(function(a) {
                var b = function() {
                    $("body").removeClass("userEducationGuideZoomedIn"), $(".App").css("transform", ""), this.tutorialManager.isZoomedIn=!1, a(void 0)
                }.bind(this), c = function() {
                    $(".App").transition({
                        scale: 1
                    }, 500, "ease", b)
                };
                $(".userEducationGuideOverlay").remove(), window.setTimeout(c, 200)
            }.bind(this))
        },
        _prefetchAllImages: function() {
            for (var b in this.tutorialInfo.stepExtraData) {
                var c = this.tutorialInfo.stepExtraData[b];
                if (c.backgroundImage) {
                    var d = c.backgroundImage;
                    d += P.Viewport.width < 1400 ? " small" : " big", $("body").append($('<div class="' + a + " " + d + '" />'))
                }
            }
        },
        _isCurrentCardStacked: function() {
            var a = this._getStepInfo(this.tutorialManager.currentStep);
            return a && (a.options.step_type === P.CONST.StepTypes.CONTINUE || a.options.step_type === P.CONST.StepTypes.END)?!0 : !1
        },
        _showBackgroundImage: function(b) {
            if (b) {
                var c = $("." + a + "." + b), d = $("." + a + ".active");
                c && c.length && (d.length ? (c.addClass("visible"), d.transition({
                    opacity: 0
                }, function() {
                    d.removeClass("active"), c.addClass("active").removeClass("visible")
                })) : (c.addClass("visible"), $(".App").transition({
                    opacity: 0
                }, function() {
                    c.addClass("active").removeClass("visible")
                })))
            }
        },
        _hideBackgroundImages: function() {
            var b = $("." + a + ".active");
            $(".App").css({
                opacity: 1
            }), b.transition({
                opacity: 0
            }, function() {
                b.remove()
            })
        },
        _getStepInfo: function(a) {
            return this.tutorialInfo.stepExtraData && this.tutorialInfo.stepExtraData[a]
        }
    }
}(), function() {
    goog.provide("P.resourceResponse"), P.resourceResponse = {
        fromPlainObject: function(a) {
            var b = new P.ResourceResponse;
            b.client_context = a.client_context, b.page_info = a.page_info, b.request_identifier = a.request_identifier;
            var c = a.resource;
            c && c.options && (b.bookmarks = c.options.bookmarks || []), b.resource_response.data = a.resource_response.data;
            var d = a.resource_response.error;
            b.resource_response.error = d ? P.Error.fromPlainObject(d) : null;
            var e = a.module;
            if (e) {
                var f = P.ModuleTree.fromPlainObject(e.tree);
                f.setOuterHtml(e.html), b.moduleTree = f
            }
            return b
        }
    }, P.ResourceResponse = function() {
        this.resource_response = {
            data: null,
            error: null
        }, this.client_context = null, this.moduleTree = null, this.page_info = null, this.request_identifier = "", this.bookmarks = []
    }
}(), function() {
    goog.provide("P.resource"), goog.require("P.interfaces.IResource"), goog.require("P.logger"), goog.require("P.resourceFactory"), goog.require("P.resourceResponse");
    var a = P.Logger.getLogger("Resource"), b = "-end-", c = P.DEBUG ? ["test_mode", "test_user", "allow_api_side_effects", "memoize_api", "request_debug"]: [];
    P.Resource = function(a, b) {
        this.name = a, this.options = b || {}
    }, _.extend(P.Resource.prototype, {
        getName: function() {
            return this.name
        },
        setOptions: function(a) {
            this.options = a
        },
        set: function(a, b) {
            this.options[a] = b
        },
        get: function(a) {
            return this.options[a] || null
        },
        copyOptions: function(a) {
            var b = _.clone(this.options);
            return b && a && delete b.bookmarks, b
        },
        callGet: function(a, b) {
            return this.call("get", a, b)
        },
        callCreate: function(a) {
            return this.call("create", a)
        },
        callUpdate: function(a) {
            return this.call("update", a)
        },
        callDelete: function(a) {
            return this.call("delete", a)
        },
        _isUrlShortEnoughForHttpGet: function(a, b) {
            var c = a + "?" + $.param(b);
            return c.length <= 2e3
        },
        call: function(a, b, c) {
            var d = b && void 0 !== b.async ? b.async : !0, e = b && b.timeout || null, f = this._call(a, d, e, c);
            return f.then(function(a) {
                this.onResponseSuccess(a)
            }.bind(this), function(a) {
                this.onResponseError(a)
            }.bind(this)), f.then(void 0, function(a) {
                var c = new P.Module;
                a && 19 === a.api_error_code ? P.writeban.showWriteBanned(c) : a && 3 === a.api_error_code && P.currentUser.isLimitedLogin() ? P.limitedLogin.showLogin(c) : (void 0 === b || b.showError) && P.showError(a.message)
            }), f
        },
        _call: function(b, d, e, f) {
            this.xhr && (this.xhr.abort(), this.xhr = null);
            var g, h = {
                options: this.options,
                context: _.pick(P.CONTEXT, c)
            };
            g = "/resource/" + this.name + "/" + b + "/", f && (h.module = {
                name: f.name,
                options: f.options
            }, h.render_type = f.renderType, h.error_strategy = f.errorStrategy);
            var i = {
                source_url: P.getCurrentUrl(),
                data: JSON.stringify(h)
            };
            P.state.activeTarget && (i.module_path = P.state.activeTarget.getFullName());
            var j = "get" === b && this._isUrlShortEnoughForHttpGet(g, i), k = {}, l = document.hidden;
            return void 0 !== l && (k["X-Pinterest-AppState"] = l ? "background" : "active"), new Promise(function(b, c) {
                this.xhr = $.ajax({
                    cache: !1,
                    url: g,
                    async: d,
                    data: i,
                    dataType: "json",
                    headers: k,
                    timeout: e,
                    type: j ? "get": "post",
                    complete: function(d, e) {
                        if ("abort" === e)
                            return void c(new Error("aborted"));
                        if (0 === d.status)
                            return void c(new Error(P._("Connectivity error or cancelled by navigation")));
                        var f = null, i = null;
                        try {
                            var j = JSON.parse(d.responseText);
                            if (!(j instanceof Object))
                                throw Error("JSON.parse did not return an object");
                            f = P.resourceResponse.fromPlainObject(j), i = f.resource_response.error;
                            var k=!!d.getResponseHeader("X-Pinterest-New-Version");
                            k && P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_SITE, P.CONST.PUBSUB_TOPIC_APP_VERSION_AVAILABLE)
                        } catch (l) {
                            i = new P.Error, i.message = P.string.common.defaultErrorMessage, i.http_status = d.status, a.error("Failed to parse resource response JSON.  HTTP status: " + d.status, {
                                js_exception_message: l.message,
                                resource_name: this.name,
                                response_headers: d.getAllResponseHeaders(),
                                http_status: d.status,
                                text_status: e,
                                respose_text: d.responseText
                            })
                        }
                        if (i && 403 === i.http_status&&!P.currentUser.isAuthenticated())
                            return void P.changeWindowLocation(P.getLoginUrl(), !1);
                        var m = h && h.options && h.options.disable_auth_failure_redirect===!0;
                        if (i && 401 === i.http_status && 1001 === i.api_error_code&&!m) {
                            var n = P.getLoginUrl();
                            return void P.changeWindowLocation(n, !1)
                        }
                        i ? f && f.moduleTree ? b(f) : c(i) : f ? b(f) : a.error("no error and no resource response", {
                            status: d.status,
                            textStatus: e,
                            xhrUrl: g
                        }), this.xhr = null
                    }.bind(this),
                    error: function(b, c, d) {
                        var e = {
                            format: "sentry",
                            js_exception_message: d.message,
                            js_exception_name: d.name,
                            resource_name: this.name,
                            response_headers: b.getAllResponseHeaders(),
                            http_status: b.status,
                            text_status: c,
                            respose_text: b.responseText
                        };
                        d.stack && (e.stack = d.stack), a.error("Failed to complete resource request: " + b.status, e)
                    }.bind(this)
                })
            }.bind(this))
        },
        abort: function() {
            this.xhr && (this.xhr.abort(), this.xhr = null)
        },
        resetBookmark: function() {
            this.options && delete this.options.bookmarks
        },
        setBookmarks: function(a) {
            this.set("bookmarks", a)
        },
        getLatestBookmark: function() {
            var a = this.options.bookmarks;
            return a ? a[a.length - 1] : void 0
        },
        atEnd: function() {
            return this.getLatestBookmark() === b
        },
        onResponseSuccess: function(a) {
            if (a.client_context) {
                P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_SITE, P.CONST.PUBSUB_TOPIC_APP_VERSION, a.client_context.app_version);
                var b = a.client_context.event_log_info;
                b && P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_CONTEXT_LOGGING, P.CONST.PUBSUB_TOPIC_CONTEXT_LOG_PLAIN_OBJECT, b);
                var c = a.client_context.placed_experiences;
                c && P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_SITE, P.CONST.PUBSUB_TOPIC_PLACED_EXPERIENCES_FROM_SERVER, c)
            }
            P.CONTEXT = a.client_context, a.page_info && (a.page_info.title || _.keys(a.page_info.meta).length) && P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_SITE, P.CONST.PUBSUB_TOPIC_PAGE_INFO, a.page_info), a.bookmarks && this.setBookmarks(a.bookmarks), P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_REQUEST, P.CONST.PUBSUB_TOPIC_REQUEST_IDENTIFIER, a.request_identifier)
        },
        onResponseError: function(b) {
            a.warn("Request error for " + this.name, b, b.stack_trace)
        },
        isEqual: function(a, b) {
            if (this.name !== a.name)
                return !1;
            var c = _.omit(this.options, "bookmarks"), d = _.omit(a.options, "bookmarks");
            if (b) {
                c.latest_bookmark = this.getLatestBookmark();
                var e = a.options.bookmarks;
                d.latest_bookmark = e && e[e.length - 1]
            }
            return _.isEqual(c, d)
        },
        toString: function() {
            var a = _.omit(this.options, "bookmarks", "field_set_key");
            return this.name + "(" + P.toArgumentString(a) + ")"
        },
        isCalling: function() {
            return !!this.xhr
        }
    }), P.Resource.NOOP_RESOURCE = {
        name: "NoopResource",
        options: {}
    }, P.resourceFactory.setDefaultConstructorFn(P.Resource), P.logFrontEndEvent = function(a) {
        var b = P.resourceFactory.create("IncrementEventResource", {
            event: a
        });
        b.callCreate({
            showError: !1
        })
    }
}(), function() {
    goog.provide("P.safeLink");
    var a = "offsite_", b = "-";
    P.SafeLink = {
        open: function(c, d) {
            var e = Math.round(1e3 * Math.random()) + "", f = Math.round(1e3 * Math.random()) + "";
            Cookie.set(a + e, f);
            var g = {
                token: e + b + f,
                url: c
            };
            d && (g.pin = d), P.changeWindowLocation("/offsite/?" + $.param(g), !0)
        }
    }
}(), function() {
    goog.provide("P.socialConnect"), P.SocialConnect = function() {};
    var a;
    _.extend(P.SocialConnect.prototype, Backbone.Events), _.extend(P.SocialConnect.prototype, {
        connect: function(a, b) {
            b = _.extend({}, {
                success: P.NOOP,
                error: P.NOOP,
                complete: P.NOOP
            }, b);
            var c = null, d = null;
            a === P.SocialConnect.RAKUTEN && (c = 800, d = 600);
            var e, f = P.FacebookDialog.getWindowOptions(c, d);
            if (e = window.open("/connect/" + a + "/", "", f), !e)
                return P.showError(P._("You must enable popups!")), void b.error({
                network: a,
                alertedUpstream: !0
            });
            var g = P.setInterval(function() {
                e.closed && (clearInterval(g), this.handleComplete({
                    network: a,
                    error_message: "Window closed."
                }))
            }.bind(this), 1e3);
            this.once("connect:" + a, function(a) {
                clearInterval(g), a.error_message ? b.error(a) : b.success(a), b.complete()
            })
        },
        complete: function(a) {
            var b = JSON.parse(a);
            this.handleComplete(b)
        },
        handleComplete: function(a) {
            var b = "connect:" + a.network;
            this.trigger(b, a)
        }
    }), _.extend(P.SocialConnect, {
        instance: function() {
            return a || (a = new P.SocialConnect), a
        },
        FACEBOOK: "facebook",
        TWITTER: "twitter",
        GOOGLE: "google",
        GPLUS: "gplus",
        YAHOO: "yahoo",
        RAKUTEN: "rakuten",
        MICROSOFT: "microsoft"
    })
}(), function() {
    goog.provide("P.facebookDialog");
    var a = 20, b = 580, c = 400;
    P.FacebookDialog = {
        open: function(a) {
            var d = _.pick(a, P.FacebookDialog._validParams), e = P.FacebookDialog._getDialogType(a), f = P.FacebookDialog.generateFbRef(), g = a.object_type && a.object_id && "feed" === e;
            if (d.method = e, d.link = P.absolutify(a.path), g && (d.link += "?" + $.param({
                fb_ref: f
            })), "feed" === e) {
                var h = P.FacebookDialog.getWindowOptions(a.width || b, a.height || c);
                window.open("http://www.facebook.com/sharer/sharer.php?u=" + encodeURIComponent(d.link), "sharer", h)
            } else 
                P.fb.ensureInit(function(b) {
                    b.getLoginStatus(function() {
                        b.ui(d, function(b) {
                            if (g && b && b.post_id) {
                                var c = P.resourceFactory.create("LogFacebookFeedShare", {});
                                c.options = {
                                    object_type: a.object_type,
                                    object_id: a.object_id,
                                    fb_ref: f
                                }, c.callCreate({
                                    showError: !1
                                })
                            }
                            a.callback && a.callback(b)
                        })
                    })
                })
        },
        _validParams: ["description", "name", "picture", "to", "href"],
        _validOptions: ["send", "feed", "share"],
        generateFbRef: function() {
            for (var b = ""; b.length < a;)
                b += Math.floor(65535 * Math.random()).toString(16);
            return P.currentUser.id + ":" + b
        },
        _getDialogType: function(a) {
            var b = _.contains(P.FacebookDialog._validOptions, a.type), c = b ? a.type: "feed";
            return c
        },
        getWindowOptions: function(a, d) {
            var e = a ? a: b, f = d ? d: c, g = screen.width, h = screen.height, i = Math.round((g - e) / 2), j = h > f ? Math.round((h - f) / 2): 0;
            return "scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=" + e + ",height=" + f + ",left=" + i + ",top=" + j
        }
    }
}(), function() {
    !function(a) {
        a.fn.getCursorPosition = function() {
            var a = this.get(0);
            if (a) {
                if ("selectionStart"in a)
                    return a.selectionStart;
                if (document.selection) {
                    a.focus();
                    var b = document.selection.createRange(), c = document.selection.createRange().text.length;
                    return b.moveStart("character", - a.value.length), b.text.length - c
                }
            }
        }
    }(jQuery)
}(), function() {
    goog.provide("P.lruCache");
    var a = 10, b = function(a, b) {
        this.uid = a, this.item = b, this.next = null, this.prev = null
    };
    P.LruCache = function(b) {
        this._maxNumItems = b || a, this._uidToData = {}, this._numItems = 0, this._firstData = null, this._lastData = null
    }, P.LruCache.prototype.set = function(a, c) {
        var d = this._uidToData[a];
        d || (d = new b(a, c), this._uidToData[a] = d, this._numItems += 1), this._moveToFront(d), this._numItems > this._maxNumItems && this._evict()
    }, P.LruCache.prototype.get = function(a) {
        var b = this._uidToData[a];
        return b ? (this._moveToFront(b), b.item) : null
    }, P.LruCache.prototype.remove = function(a) {
        var b = this._uidToData[a];
        b && (delete this._uidToData[a], this._firstData === b && (this._firstData = b.next), this._lastData === b && (this._lastData = b.prev), b.prev && (b.prev.next = b.next), b.next && (b.next.prev = b.prev), this._numItems -= 1)
    }, P.LruCache.prototype._moveToFront = function(a) {
        this._firstData !== a && (this._firstData ? (this._lastData === a && (this._lastData = a.prev), a.prev && (a.prev.next = a.next), a.next && (a.next.prev = a.prev), this._firstData.prev = a, a.next = this._firstData, a.prev = null, this._firstData = a) : (this._firstData = a, this._lastData = a))
    }, P.LruCache.prototype._evict = function() {
        delete this._uidToData[this._lastData.uid], this._firstData === this._lastData ? (this._firstData = null, this._lastData = null) : (this._lastData = this._lastData.prev, this._lastData.next = null), this._numItems -= 1
    }
}(), function() {
    goog.provide("P.set"), P.Set = function() {
        this.items = {}
    }, P.Set.prototype.add = function(a) {
        this.items[a]=!0
    }, P.Set.prototype.remove = function(a) {
        delete this.items[a]
    }, P.Set.prototype.contains = function(a) {
        return Object.prototype.hasOwnProperty.call(this.items, a)
    }
}(), function() {
    goog.provide("P.model"), P.model.Model = function(a) {
        this._modelOrCollection = null, this._modelAvailablePromise = a.then(function(a) {
            this.set(a)
        }.bind(this))
    }, _.extend(P.model.Model.prototype, Backbone.Events), P.model.Model.prototype.set = function(a) {
        var b = a instanceof Array;
        this._modelOrCollection || (this._modelOrCollection = b ? new Backbone.Collection : new Backbone.Model, this.on("all", function() {
            this.trigger.apply(this, arguments)
        }.bind(this)));
        var c;
        b ? c = a : (c = this._modelOrCollection.toJSON(), $.extend(!0, c, a)), this._modelOrCollection.set(c)
    }, P.model.Model.prototype.updateData = function(a) {
        a.then(function(a) {
            this.set(a)
        }.bind(this))
    }, P.model.Model.prototype.getNonEmptyData = function() {
        return this._modelAvailablePromise.then(function() {
            return this.getData()
        }.bind(this))
    }, P.model.Model.prototype.getData = function() {
        if (this._modelOrCollection) {
            var a = this._modelOrCollection.toJSON();
            if (a instanceof Object)
                return a
        }
        return null
    }, P.model.Model.prototype.on = function(a, b) {
        this._modelAvailablePromise.then(function() {
            return this._modelOrCollection.on(a, b)
        }.bind(this))
    }, P.model.Model.prototype.once = function(a, b) {
        this._modelAvailablePromise.then(function() {
            return this._modelOrCollection.once(a, b)
        }.bind(this))
    }, P.model.Model.prototype.off = function(a, b) {
        this._modelAvailablePromise.then(function() {
            return this._modelOrCollection.off(a, b)
        }.bind(this))
    }
}(), function() {
    goog.provide("P.modelManager"), goog.require("P.lruCache"), P.modelManager.EntityType = {
        PIN: "pin"
    }, P.modelManager.EntityDict, P.modelManager.EntityId, P.modelManager.CACHE_FOR_TYPE_SIZE = 1e3, P.modelManager.CacheForType = function(a) {
        this.cache = new P.LruCache(P.modelManager.CACHE_FOR_TYPE_SIZE), this._entityType = a
    }, P.modelManager.CacheForType.prototype.getModel = function(a) {
        return this.cache.get(a)
    }, P.modelManager.CacheForType.prototype.addEntityDict = function(a) {
        if (a.type !== this._entityType)
            throw new Error("invalid entityDict type");
        var b = a.id;
        this.ensureModel(b, Promise.resolve(a))
    }, P.modelManager.CacheForType.prototype.ensureModel = function(a, b) {
        var c = this.cache.get(a);
        return c || (c = new P.model.Model(b), this.cache.set(a, c)), c.updateData(b), c
    }, P.modelManager.ModelManager = function() {
        this.entityTypeToCache = {}, _.each(P.modelManager.EntityType, function(a) {
            this.entityTypeToCache[a] = new P.modelManager.CacheForType(a)
        }.bind(this))
    }, P.modelManager.ModelManager.prototype.getModel = function(a, b) {
        var c = this.entityTypeToCache[a];
        return c ? c.getModel(b) : null
    }, P.modelManager.ModelManager.prototype.add = function(a) {
        if (a instanceof Array)
            a.forEach(function(a) {
                this._addEntity(a)
            }.bind(this));
        else if (a instanceof Object) {
            var b = a;
            this._addEntity(b)
        }
    }, P.modelManager.ModelManager.prototype.ensureModel = function(a, b, c) {
        var d = this.entityTypeToCache[a];
        if (!d)
            throw new Error("unexpected entityType " + a);
        return d.ensureModel(b, c)
    }, P.modelManager.ModelManager.prototype._addEntity = function(a) {
        var b = a.type;
        if (b) {
            var c = b, d = this.entityTypeToCache[c];
            if (d) {
                var e = a.id;
                "string" === typeof e && d.ensureModel(e, Promise.resolve(a))
            }
        }
    }, P.modelManager.instance = new P.modelManager.ModelManager
}(), function() {
    goog.provide("P.resourceCache"), goog.require("P.model"), goog.require("P.modelManager"), P.resourceCache = {};
    var a = function(b) {
        return _.isObject(b) ? _.sortBy(_.map(_.pairs(b), function(b) {
            return [b[0], a(b[1])]
        }), function(a) {
            return a[0]
        }) : b
    }, b = function(b) {
        return JSON.stringify(a(b))
    };
    P.resourceCache.IResourceCacheStrategy = function() {}, P.resourceCache.IResourceCacheStrategy.prototype.ensureModel = function() {}, P.resourceCache.ResourceCacheStrategyEntity = function(a, b) {
        this._entityType = a, this._modelManager = b
    }, P.resourceCache.ResourceCacheStrategyEntity.prototype.ensureModel = function(a, b) {
        var c = a.options.id;
        return this._modelManager.ensureModel(this._entityType, c, b)
    }, P.resourceCache.ResourceCacheStrategySimple = function() {
        this._cache = {}
    }, P.resourceCache.ResourceCacheStrategySimple.prototype._getKey = function(a) {
        var c = _.omit(a.options, "bookmarks");
        return c.bookmark = a.getLatestBookmark(), b(c)
    }, P.resourceCache.ResourceCacheStrategySimple.prototype.ensureModel = function(a, b) {
        var c = this._getKey(a), d = this._cache[c];
        return d ? d.updateData(b) : d = this._cache[c] = new P.model.Model(b), d
    }, P.resourceCache.ResourceCache = function(a) {
        this._resourceCacheStrategies = a
    }, P.resourceCache.Freshness = {
        STALE_BUT_NOT_EMPTY: 1,
        FRESH: 2
    }, P.resourceCache.ResourceCache.prototype.callGet = function(a, b) {
        var c = this._resourceCacheStrategies[a.name], d = a.callGet({
            showError: !1
        }).then(function(a) {
            return a.resource_response.data
        });
        if (c) {
            var e = c.ensureModel(a, d);
            return b && b.freshness === P.resourceCache.Freshness.FRESH ? d : e.getNonEmptyData()
        }
        return d
    }, P.resourceCache.ResourceCache.prototype.ensureModel = function(a, b) {
        var c = this._resourceCacheStrategies[a.name];
        return c ? c.ensureModel(a, Promise.resolve(b)) : null
    }, P.resourceCache.instance = new P.resourceCache.ResourceCache({
        PinResource: new P.resourceCache.ResourceCacheStrategyEntity(P.modelManager.EntityType.PIN, P.modelManager.instance),
        BoardsResource: new P.resourceCache.ResourceCacheStrategySimple,
        BoardPickerBoardsResource: new P.resourceCache.ResourceCacheStrategySimple,
        ConversationsResource: new P.resourceCache.ResourceCacheStrategySimple
    })
}(), function() {
    goog.provide("P.typeaheadProvider");
    var a = 5;
    P.TypeaheadProvider = function(b) {
        b = b || {}, this.tags = b.tags, this.enable_recent_queries=!!b.enable_recent_queries, this.minimum_term_character_length = b.minimum_term_character_length || 0, this.bypass_lru_cache = b.bypass_lru_cache;
        var c = {
            tags: b.tags,
            pin: b.pin_id
        }, d = b.num_places;
        d ? c.num_places = d : c.count = "count"in b ? b.count : a, b.should_geocode && (c.should_geocode=!0), b.exclude_non_followers && (c.exclude_non_followers=!0);
        var e = "TypeaheadResource";
        b.resource_name && (e = b.resource_name), this.searchResource = P.resourceFactory.create(e, c), this.itemsCache = new P.LruCache
    }, _.extend(P.TypeaheadProvider.prototype, Backbone.Events), _.extend(P.TypeaheadProvider.prototype, {
        search: function(a, b) {
            var c;
            if (a = $.trim(a), !a && "pinners_and_contacts" === this.tags)
                return this.abortSearch(), this.publishData(a, [], {}, b);
            if (!a && P.currentUser.isLimitedLogin())
                return this.abortSearch(), this.publishData(a, [], {}, b);
            if (!a && this.enable_recent_queries && P.currentUser && P.currentUser.isAuthenticated())
                c = "recent_search";
            else {
                var d = this.bypass_lru_cache ? {}
                : this.itemsCache.get(a);
                if (d) {
                    var e = d.items;
                    if (e && e.length) {
                        this.abortSearch();
                        var f = d.hint;
                        return void this.publishData(a, e, f, b)
                    }
                }
            }
            a.length >= this.minimum_term_character_length ? this.fetch(a, c, b) : this.publishData(a, [], {}, b)
        },
        getResource: function() {
            return this.searchResource
        },
        abortSearch: function() {
            this.getResource().abort()
        },
        publishData: function(a, b, c, d) {
            var e = {
                term: a,
                items: b,
                hint: c
            };
            this.trigger(P.CONST.EVENT_DATA, e), d && d(e)
        },
        setAutocompleteScope: function(a) {
            this.getResource().set("autocompleteScope", a)
        },
        fetch: function(a, b, c) {
            var d = this.getResource();
            if (d.isCalling()) {
                var e = d.get("term");
                if (a === e)
                    return;
                this.abortSearch()
            }
            "" !== this.tags && (this.trigger(P.CONST.EVENT_TYPEAHEAD_SEARCH_START, a), d.set("term", a), d.set("tags", b || this.tags), d.resetBookmark(), d.callGet({
                showError: !1
            }).then(function(b) {
                var d = b.resource_response.data, e = d.items, f = d.hint || {}, g = {
                    hint: f,
                    items: e
                };
                this.cacheData(a, g), this.publishData(a, e, f, c)
            }.bind(this), function(a) {
                this.trigger("fetchError", a)
            }.bind(this)), this.warm=!0)
        },
        removeCacheForTerm: function(a) {
            this.itemsCache.remove(a)
        },
        cacheData: function(a, b) {
            this.itemsCache.set(a, b)
        },
        prefetch: function() {
            if (!this.warm) {
                var a = P.resourceFactory.create("TypeaheadPrepareResource");
                a.callGet({
                    showError: !1
                }), this.warm=!0
            }
        }
    })
}(), function() {
    goog.provide("P.invite"), P.Invite = {
        _logInvites: function(a) {
            var b = {
                invite_id: null,
                invite_code: null,
                invite_metadata: {
                    invite_type: a,
                    to_follow: [P.currentUser.id]
                }
            }, c = {
                topic: "sent_invites",
                content: b
            }, d = P.resourceFactory.create("EventLoggingResource", c);
            d.callCreate({
                showError: !1
            })
        },
        trackInvite: function(a, b) {
            b ? P.trackGACategoryEvent("user_invite", a, P.CONST.GA_ACTION_SUCCESS) : P.trackGACategoryEvent("user_invite", a, P.CONST.GA_ACTION_ERROR), "gplus" === a && P.Invite._logInvites(a)
        },
        _inviteFacebookUserId: function(a) {
            var b = P.resourceFactory.create("FacebookInviteCreateResource", {
                type: "facebook",
                facebook_id: a
            });
            return b.callCreate()
        },
        _showFacebookDialog: function(a, b) {
            P.Invite._inviteFacebookUserId(a).then(function(c) {
                var d = c.resource_response.data, e = d.url, f = d.invite_code;
                P.FacebookDialog.open({
                    type: "send",
                    name: "name",
                    path: e,
                    to: a,
                    callback: function(a) {
                        if (a && a.success) {
                            P.Invite.trackInvite("facebook", !0);
                            var c = P.resourceFactory.create("FacebookInviteSentResource", {
                                invite_code: f
                            });
                            c.callCreate()
                        }
                        b && b(a && a.success)
                    }
                }), P.trackGACategoryEvent("user_invite", "facebook", P.CONST.GA_ACTION_OPEN_MODAL)
            }, function() {
                P.Invite.trackInvite("facebook", !1)
            })
        },
        userInviteFacebook: function(a, b) {
            P.fb.ensureLoggedIn(function() {
                P.Invite._showFacebookDialog(a, b)
            })
        },
        userInviteEmail: function(a, b) {
            var c = P.resourceFactory.create("EmailInviteSentResource", {
                email: a,
                type: "email"
            });
            c.callCreate().then(function() {
                P.Invite.trackInvite("email", !0), b && b(!0)
            }, function() {
                P.Invite.trackInvite("email", !1), b && b(!1)
            })
        },
        trackInviteFunnelAction: function(a, b) {
            b = "undefined" !== typeof b ? b : !1;
            var c = {
                action: a,
                is_recipient_funnel: b
            };
            P.resourceFactory.create("TrackInviteFunnelActionResource", c).callCreate({
                showError: !1
            })
        }
    }
}(), function() {
    goog.provide("P.userRegistration"), goog.require("P.fb");
    var a = P.Logger.getLogger("UserRegistration"), b = function() {};
    b.prototype = {
        fastTrackSocialRegistration: function(a, b) {
            if (a === P.SocialConnect.FACEBOOK)
                return this.fetchNetworkData(a).then(function(a) {
                    return this.sendImmediateFbRegisterRequest(a, b)
                }.bind(this));
            if (a === P.SocialConnect.RAKUTEN) {
                var c = {
                    rakuten_id: P.SessionStorage.getItem(P.CONST.SESSION_RAKUTEN_ID),
                    rakuten_token: P.SessionStorage.getItem(P.CONST.SESSION_RAKUTEN_TOKEN),
                    rakuten_refresh_token: P.SessionStorage.getItem(P.CONST.SESSION_RAKUTEN_REFRESH_TOKEN),
                    first_name: P.SessionStorage.getItem(P.CONST.SESSION_RAKUTEN_FIRST_NAME),
                    email: P.SessionStorage.getItem(P.CONST.SESSION_RAKUTEN_EMAIL),
                    gender: P.SessionStorage.getItem(P.CONST.SESSION_RAKUTEN_GENDER),
                    country: null
                };
                return this.register(P.SocialConnect.RAKUTEN, c)
            }
            return Promise.resolve(void 0)
        },
        sendImmediateFbRegisterRequest: function(a, b) {
            var c = {
                first_name: a.first_name,
                last_name: a.last_name,
                email: a.email,
                gender: a.gender,
                social_username: a.username,
                image_url: a.image_url,
                facebook_id: a.id,
                facebook_token: a.access_token,
                country: null
            };
            return b && _.extend(c, b), this.addExtraSocialParams(P.SocialConnect.FACEBOOK, c), this.register(P.SocialConnect.FACEBOOK, c)
        },
        addExtraSocialParams: function(a, b) {
            var c = P.SessionStorage.getItem(P.CONST.SESSION_FACEBOOK_ID), d = P.SessionStorage.getItem(P.CONST.SESSION_FACEBOOK_TOKEN);
            c && (b.facebook_id || (b.facebook_id = c), P.SessionStorage.removeItem(P.CONST.SESSION_FACEBOOK_ID)), d && (b.facebook_token || (b.facebook_token = d), P.SessionStorage.removeItem(P.CONST.SESSION_FACEBOOK_TOKEN));
            var e = P.SessionStorage.getItem(P.CONST.SESSION_KEY_INVITE_FOLLOW);
            e && (e.invite_follow_board && (b.board_to_follow = e.invite_follow_board), e.invite_follow_user && (b.user_to_follow = e.invite_follow_user))
        },
        fetchNetworkData: function(a) {
            return a === P.SocialConnect.FACEBOOK ? (P.trackRegisterAction("register_facebook"), new Promise(function(a, b) {
                P.fb.ensureInit(function(c) {
                    c.getLoginStatus(function(d) {
                        if (d.authResponse) {
                            var e = ["picture.type(large)", "id", "first_name", "last_name", "email", "username", "gender"], f = "/me?fields=" + e.join(",");
                            c.api(f, function(c) {
                                c&&!c.error ? (c.picture && c.picture.data && c.picture.data.url&&!c.picture.data.is_silhouette && (c.image_url = c.picture.data.url), a(c)) : b(new Error("FB.api errored: " + c.error))
                            })
                        } else 
                            b(new Error("not authed"))
                    }, !0)
                })
            })) : Promise.reject(new Error("Unsupported social network: " + a))
        },
        register: function(b, c) {
            var d = P.UserRegistration.getResource(c), e = function(a, b) {
                var c = b || "nonetwork";
                window.optimizely = window.optimizely || [], window.optimizely.push(["trackEvent", a]), window.optimizely.push(["trackEvent", c + a])
            };
            return e("SignupInit", b), d.callCreate().then(function(c) {
                P.trackGAEvent("user_signup", P.CONST.GA_ACTION_SUCCESS), e("SignupSuccess", b), P.SessionStorage.removeItem(P.CONST.SESSION_KEY_INVITE_FOLLOW), a.debug("Login, successful", c), Cookie.set(P.CONST.COOKIE_USER_JUST_REGISTERED, "1")
            }, function(a) {
                throw P.trackGAEvent("user_signup", P.CONST.GA_ACTION_ERROR), e("SignupFail", b), a.api_error_code === P.CONST.API_ERROR_UNDERAGE_REGISTER_ATTEMPT && (Cookie.set(P.CONST.COOKIE_REGISTER_RESTRICT, "1", 87600), Cookie.set(P.CONST.COOKIE_PERSONALIZE_FROM_OFFSITE_BROWSING_COOKIE_NAME, "disabled")), a
            })
        },
        getResource: function(a) {
            return P.resourceFactory.create("UserRegisterResource", a)
        },
        showSignupModal: function(a, b) {
            var c = {
                name: "reg.ContextualSignup",
                options: b || {}
            };
            a && (c.resource = a), P.loadModule(c).then(function(a) {
                P.getModalManager().showInModal(a, {
                    mask_type: "dark",
                    can_dismiss: b.can_dismiss
                })
            }).fin(function() {
                P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_SITE, P.CONST.PUBSUB_TOPIC_HIDE_UNAUTH_BANNER)
            })
        }
    }, P.UserRegistration = new b
}(), function() {
    goog.provide("P.preventScroll"), goog.require("P.Mixins");
    var a = function() {};
    a.prototype.listen = function() {}, P.Mixins.PreventScroll = {
        startPreventScroll: function(a, b) {
            this.stopPreventScroll(), this._preventScrollListener = this.listen(a, "mousewheel", function(c) {
                var d = c.originalEvent.wheelDeltaY < 0 ? "down": "up", e = a.scrollTop();
                if ("down" === d) {
                    var f = a.outerHeight() + e;
                    f >= b.outerHeight() && c.preventDefault()
                } else 
                    0 === e && c.preventDefault()
            })
        },
        stopPreventScroll: function() {
            this._preventScrollListener && (this.removeListener(this._preventScrollListener), this._preventScrollListener = null)
        }
    }
}(), function() {
    goog.provide("P.navigateData.NavigateData"), goog.require("P.Module"), P.navigateData.NavigateData = function() {
        this.evt = null, this.handled=!1, this.reuseLast=!1, this.fromHistoryUid = null, this.fromNavigate=!1, this.currentModule = null
    }
}(), function() {
    goog.provide("P.number"), P.number.quantize = function(a, b) {
        var c = a * Math.pow(10, b), d = Math.round(10 * (c - parseInt(c, 10))) / 10;
        return d===-.5 && (d =- .6), c = Math.round(parseInt(c, 10) + d) / Math.pow(10, b)
    }, P.number.toRadians = function(a) {
        return a * Math.PI / 180
    }, P.number.dollarToMicrodollar = function(a) {
        return 1e6 * a
    }, P.number.microdollarToDollar = function(a) {
        return a / 1e6
    }, P.number.formatUSD = function(a) {
        return a.toFixed(2).replace(/\d(?=(\d{3})+\.)/g, "$&,")
    }
}(), function() {
    goog.provide("P.positioning"), P.Positioning = {
        positionElementAtAnchor: function(a, b, c, d, e) {
            var f = P.CONST.PositionPointFlag, g = b.offset(), h = a.outerWidth(), i = b.outerWidth();
            if (g) {
                var j = 0, k = 0;
                if (c & f.FLAG_VERTICAL_BOTTOM || c & f.FLAG_VERTICAL_TOP ? (j = c & f.FLAG_VERTICAL_BOTTOM ? g.top + b.outerHeight() : g.top - a.outerHeight(), k = c & f.FLAG_VERTICAL_LEFT ? g.left : c & f.FLAG_VERTICAL_RIGHT ? g.left + i - h : g.left + (i - h) / 2) : c & f.FLAG_HORIZONTAL_LEFT || c & f.FLAG_HORIZONTAL_RIGHT ? (k = c & f.FLAG_HORIZONTAL_LEFT ? g.left - h : g.left + i, j = c & f.FLAG_HORIZONTAL_TOP ? g.top : c & f.FLAG_HORIZONTAL_BOTTOM ? g.top + b.outerHeight() - a.outerHeight() : g.top + (b.outerHeight() - a.outerHeight()) / 2) : c & f.FLAG_VERTICAL_CENTER && c & f.FLAG_HORIZONTAL_CENTER && (k = g.left + (i - h) / 2, j = g.top + (b.outerHeight() - a.outerHeight()) / 2), d) {
                    var l = j - $(window).scrollTop();
                    l > 0 && (j = l)
                } else {
                    var m = a.parents().filter(function() {
                        return "fixed" === $(this).css("position")
                    });
                    m[0] && (j += m.scrollTop(), j -= $(window).scrollTop())
                }
                var n = {
                    left: k,
                    top: j
                };
                return e && (n = P.Positioning.checkIfInViewportAndAdjustAccordingly(a, n, c)), a.css(n), c
            }
        },
        checkIfInViewportAndAdjustAccordingly: function(a, b) {
            var c, d, e = a.width(), f = b.left, g = b.top, h = f + e, i = 7;
            h > P.Viewport.width ? c = f - (h - P.Viewport.width + i) : f < i && (c = i);
            var j = {};
            return j.left = c ? c : f, j.top = d ? d : g, j
        }
    }
}(), function() {
    goog.provide("P.browserHistory"), P.BrowserHistory = function(a) {
        this._onRemoved = a, this._uidToData = {}, this._views = [], this._currentIndex =- 1
    }, _.extend(P.BrowserHistory.prototype, {
        add: function(a) {
            var b = this.getCurrentUid(), c = void 0 === this._uidToData[b], d = c && null !== b;
            b = null !== b ? b : this._getNewUid(), c ? (d || (this._removeViewsAfter(this._currentIndex), this._saveState(b)), this._insert(b)) : this._currentIndex = this._views.indexOf(b), this._uidToData[b] = a
        },
        _insert: function(a) {
            var b = this._views.length;
            if (0 === b || a > this._views[b - 1])
                return this._views.push(a), void(this._currentIndex = b);
            for (var c = 0; c < b; c++) {
                var d = this._views[c];
                if (a < d) {
                    this._views.splice(c, 0, a), this._currentIndex = c;
                    break
                }
                if (a === d) {
                    this._currentIndex = c, this.log.error("Duplicate uid in browser history.");
                    break
                }
            }
        },
        _removeViewsAfter: function(a) {
            a < 0 && (a =- 1);
            var b = this._views.slice(a + 1);
            _.each(b, function(a) {
                var b = this._uidToData[a];
                this._onRemoved && this._onRemoved(b), delete this._uidToData[a]
            }.bind(this)), this._views = this._views.slice(0, a + 1)
        },
        _saveState: function(a) {
            window.history.replaceState({
                uid: a
            }, document.title, window.location.href)
        },
        getCurrentUid: function() {
            var a = window.history.state && void 0 !== window.history.state.uid ? window.history.state.uid : null;
            return a
        },
        _getNewUid: function() {
            return window.history.length
        },
        getCurrent: function() {
            return this._uidToData[this.getCurrentUid()]
        },
        get: function(a) {
            return this._uidToData[a]
        }
    })
}(), function() {
    goog.provide("P.simpleBrowserHistory"), P.SimpleBrowserHistory = function() {
        this._uidToData = {}
    }, _.extend(P.SimpleBrowserHistory.prototype, {
        add: function(a) {
            var b = this.getCurrentUid();
            b = null !== b ? b : this._getNewUid(), this._uidToData[b] = a
        },
        getCurrentUid: function() {
            return window.location.href
        },
        _getNewUid: function() {
            return window.location.href
        },
        getCurrent: function() {
            return this._uidToData[this.getCurrentUid()]
        },
        get: function(a) {
            return this._uidToData[a]
        }
    })
}(), function() {
    goog.provide("P.HistoryManager"), goog.require("P.navigateData.NavigateData");
    var a = 10, b = function(a, b, c) {
        this.url = a, this.moduleUid = b, this.backgroundModuleUid = c || null, this.numHopsToBackground = 0
    }, c = function(a, b) {
        this.module = a, this.backgroundModule = b || null
    }, d = function() {
        this._browserHistory = null, this._seenModules = null, this._pageInfoCache = {}, this._init()
    };
    _.extend(d.prototype, {
        start: function(a) {
            this._init(), a && (a.uid = this._getNewUid(a), this._addToHistory(a, null))
        },
        _init: function() {
            this._seenModules = new P.LruCache(a), this._browserHistory = new P.SimpleBrowserHistory
        },
        navigate: function(a, b) {
            b.fromHistoryUid = this._browserHistory.getCurrentUid(), b.reuseLast=!!b.handled, P.navigate(a, b, {})
        },
        getModule: function(a, b) {
            var d = null, e = null, f = null, g = null;
            return g = b.reuseLast ? this._browserHistory.get(b.fromHistoryUid) : this._browserHistory.getCurrent(), g && (d = this._seenModules.get(g.moduleUid), f = g.moduleUid, e = this._seenModules.get(g.backgroundModuleUid)), d || (d = new a, f = null !== f ? f : this._getNewUid(d), d.uid = f), this._addToHistory(d, e), new c(d, e)
        },
        updateBackgroundModule: function(a, b) {
            var c = this._browserHistory.getCurrent(), d = this._browserHistory.get(b.fromHistoryUid);
            a ? (c.backgroundModuleUid = a.uid, this._seenModules.set(a.uid, a), b.fromNavigate && d && (c.numHopsToBackground = d.numHopsToBackground + 1)) : (c.backgroundModuleUid = null, c.numHopsToBackground = 0)
        },
        cancelNavigation: function() {
            var a = this._browserHistory.getCurrent();
            this._seenModules.remove(a.moduleUid), this._go( - 1)
        },
        closeCurrentModule: function() {
            var a = this._browserHistory.getCurrent();
            a && 0 !== a.numHopsToBackground && this._go( - a.numHopsToBackground)
        },
        setPageInfo: function(a) {
            var b = this._getUrl();
            this._pageInfoCache[b] = a
        },
        getPageInfo: function(a) {
            return a = a || this._getUrl(), this._pageInfoCache[a]
        },
        _go: function(a) {
            window.history.go(a)
        },
        _getUrl: function() {
            return window.location.href
        },
        _getNewUid: function(a) {
            return a.cid
        },
        _addToHistory: function(a, c) {
            var d = this._getUrl(), e = c ? c.uid: null, f = this._browserHistory.getCurrent();
            f || (f = new b(d, a.uid, e)), this._browserHistory.add(f), this._seenModules.set(a.uid, a), c && this._seenModules.set(e, c)
        }
    });
    var e = function() {
        this._pageInfoCache = {}
    };
    _.extend(e.prototype, {
        start: P.NOOP,
        navigate: function(a, b) {
            P.navigate(a, b, {})
        },
        getModule: function(a) {
            return [new a({}), []]
        },
        updateBackgroundModule: P.NOOP,
        cancelNavigation: P.NOOP,
        closeCurrentModule: P.NOOP,
        setPageInfo: function(a) {
            var b = this._getUrl();
            this._pageInfoCache[b] = a
        },
        getPageInfo: function(a) {
            return a = a || this._getUrl(), this._pageInfoCache[a]
        },
        _getUrl: function() {
            return window.location.href
        }
    }), P.HistoryManager = P.useHistory() ? d : e, Pc.TEST_MODE && (P.PushStateHistoryManager = d, P.NoPushStateHistoryManager = e, P.HistoryRecord = b)
}(), function() {
    goog.require("P.console"), function() {
        function a(a, b) {
            var c = 'font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;font-size: 15px;' + (a ? "font-weight: bold;" : "") + "color: " + b + ";";
            return c
        }
        console.log("%c♥ web? %c--> %cjoinUs()", a(!0, "#d22"), a(!0, "#777"), a(!0, "#2b2")), window.joinUs = function() {
            return console.log("%cWe're excited to have you! %c☃", a(!1, "#d22"), a(!1, "#333")), window.location.href = "/_/_/about/careers/", ""
        }
    }()
}(), function() {
    goog.provide("P.date"), P.date.today = function() {
        var a = new Date;
        return new Date(a.getFullYear(), a.getMonth(), a.getDate())
    }, P.date.UTCToday = function() {
        var a = new Date;
        return new Date(a.getUTCFullYear(), a.getUTCMonth(), a.getUTCDate())
    }, P.date.addDays = function(a, b) {
        return new Date(a.getTime() + 24 * b * 60 * 60 * 1e3)
    }, P.date.UTCDate = function(a) {
        var b = new Date(a);
        return new Date(b.getUTCFullYear(), b.getUTCMonth(), b.getUTCDate())
    }
}(), function() {
    goog.provide("P.socialNetworkSettingsManager"), goog.require("P.string"), goog.require("P.socialConnect");
    var a = 1e3, b = 110;
    P.SocialNetworkSettingsManager = function() {}, _.extend(P.SocialNetworkSettingsManager.prototype, {
        handleConnect: function(a, b, c) {
            if (b&&!P.currentUser.isLimitedLogin()) {
                var d = {
                    success: function(d) {
                        var e = {
                            network: a,
                            data: d
                        };
                        this._internalConnectNetwork(b, e, c)
                    }.bind(this),
                    error: function(a) {
                        a.alertedUpstream || P.showError(P.string.common.connectError), c.error && c.error(a)
                    },
                    complete: function() {
                        c.complete && c.complete()
                    }
                };
                this._externalConnectNetwork(a, b, d)
            } else {
                var e = {
                    network: a
                };
                this._internalConnectNetwork(b, e, c)
            }
        },
        updateConnectStatus: function() {
            var a = P.resourceFactory.create("UserResource", {
                user_id: P.currentUser.get("id"),
                username: P.currentUser.get("username"),
                field_set_key: "social_connect"
            });
            a.callGet().then(function(a) {
                var b = a.resource_response.data;
                P.currentUser.set(b), P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_CURRENT_USER, P.CONST.PUBSUB_TOPIC_SOCIAL_NETWORK_UPDATED)
            })
        },
        _externalConnectNetwork: function(a, b, c) {
            return b ? void P.SocialConnect.instance().connect(a, c) : void(c.success && c.success({}))
        },
        _internalConnectNetwork: function(a, b, c) {
            var d = P.resourceFactory.create("UserSocialNetworkResource", b);
            (a ? d.callCreate() : d.callDelete()).then(function(a) {
                this.updateConnectStatus(), c.success && c.success(a)
            }.bind(this), function(a) {
                c.error && a instanceof Object && c.error(a)
            }).fin(function() {
                c.complete && c.complete()
            })
        },
        _getResourceNameForNetworkFriends: function(a) {
            var b = null;
            switch (a) {
            case P.SocialConnect.FACEBOOK:
                b = "UserFacebookFriendsResource";
                break;
            case P.SocialConnect.TWITTER:
                b = "UserTwitterFriendsResource";
                break;
            case P.SocialConnect.GOOGLE:
                b = "UserGmailFriendsResource";
                break;
            case P.SocialConnect.YAHOO:
                b = "UserYahooFriendsResource";
                break;
            case P.SocialConnect.MICROSOFT:
                b = "UserMicrosoftFriendsResource";
                break;
            default:
                return 
            }
            return b
        },
        pollForFriends: function(c, d) {
            d = d || {};
            var e = d.resourceOptions || {}, f = this._getResourceNameForNetworkFriends(c);
            if (f) {
                var g = P.resourceFactory.create(f, e);
                g.callGet({
                    showError: !1
                }).then(function() {
                    var a = d.success;
                    a && a(g)
                }, function(e) {
                    if (e.api_error_code === b)
                        P.setTimeout(function() {
                            this.pollForFriends(c, d)
                        }.bind(this), a);
                    else {
                        var f = d.error;
                        f && f()
                    }
                }.bind(this))
            }
        }
    });
    var c = null;
    P.SocialNetworkSettingsManager.instance = function() {
        return c || (c = new P.SocialNetworkSettingsManager), c
    }
}(), function() {
    goog.provide("P.conversationsManager"), goog.require("P.resourceResponse"), goog.require("P.modules.Conversation"), goog.require("P.modules.ActiveConversations");
    var a = 5, b = "activeConversations", c = 72, d = function() {
        this.activeConversationsContainer = null, this.conversations = {}, this.conversationIdToLastMessageId = {}, this.conversationIds = [], this._openConversation = null, this._logger = P.Logger.getLogger("ConversationsManager")
    };
    _.extend(d.prototype, Backbone.Events), _.extend(d.prototype, {
        _fetchingConversations: !1,
        _pendingRequest: null,
        getContainer: function() {
            return this.activeConversationsContainer
        },
        setContainer: function(a) {
            this.activeConversationsContainer = a
        },
        setDraggedObject: function(a) {
            this._draggedObject = a
        },
        getDraggedObject: function() {
            return this._draggedObject
        },
        listenForConversations: function() {
            P.currentUser.isAuthenticated()&&!P.currentUser.isLimitedLogin() && this.listenTo(P.Updater.instance(), "conversations_unseen_count", this.onUnseenConversationsCount)
        },
        onUnseenConversationsCount: function(a) {
            (a > 0 || this._shouldUpdateConversations) && this._fetchConversations().then(function(b) {
                this._shouldUpdateConversations=!1, this._updateActiveConversations(b), P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_SITE, P.CONST.PUBSUB_TOPIC_CONVERSATION_UNREAD_COUNT, a)
            }.bind(this))
        },
        _fetchConversations: function() {
            if (!this._fetchingConversations) {
                var a = P.resourceFactory.create("ConversationsResource", {});
                this._pendingRequest = P.resourceCache.instance.callGet(a, {
                    freshness: P.resourceCache.Freshness.FRESH
                }), this._pendingRequest.then(function() {
                    this._conversationsBookmarks = a.get("bookmarks")
                }.bind(this)).fin(function() {
                    this._fetchingConversations=!1
                }.bind(this)), this._fetchingConversations=!0
            }
            return this._pendingRequest
        },
        getConversationsBookmarks: function() {
            return this._conversationsBookmarks
        },
        _updateActiveConversations: function(a) {
            _.each(a, function(a) {
                var b = a.id, c = this.conversationIdToLastMessageId[b], d = a.last_message;
                if (d) {
                    var e = d.id;
                    if (!_.isUndefined(c)) {
                        var f = d.sender.id;
                        if (e !== c) {
                            var g = _.contains(this.conversationIds, b);
                            if (g) {
                                var h = this.conversations[b];
                                h.updateConversation(a)
                            } else 
                                f !== P.currentUser.get("id") && this.addConversation(a, !1)
                            }
                    }
                    this.conversationIdToLastMessageId[b] = e
                }
            }.bind(this))
        },
        deleteConversationBadgeCount: function() {
            var a = P.resourceFactory.create("ConversationBadgeResource", {});
            a.callDelete({
                showError: !1
            }).then(function() {
                P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_SITE, P.CONST.PUBSUB_TOPIC_CONVERSATION_UNREAD_COUNT, 0)
            })
        },
        sendMessageToUsers: function(a, b, c) {
            var d = {
                user_ids: a || [],
                emails: b || []
            }, e = this._sendNewMessage("ConversationsResource", d, c);
            return e.then(function(a) {
                var b = a.resource_response.data;
                this.addConversation(b)
            }.bind(this)), e
        },
        sendMessageToConversation: function(a, b) {
            var c = {
                conversation_id: a
            };
            return this._sendNewMessage("ConversationMessagesResource", c, b)
        },
        _sendNewMessage: function(a, b, c) {
            c.text && (b.text = c.text), c.object_id && (b[c.object_type] = c.object_id);
            var d = P.resourceFactory.create(a, b), e = d.callCreate({
                error: this._handleSendMessageError.bind(this)
            });
            return e.then(function() {
                this._shouldUpdateConversations=!0
            }.bind(this)), e
        },
        _handleSendMessageError: function(a) {
            var b = a.extra_data;
            if (243 === a.api_error_code && b.objects) {
                var c = b.objects;
                P.loadModule({
                    name: "ConfirmDialog",
                    options: {
                        template: "message_object_auth_error",
                        attached_object: c.object,
                        users: c.users,
                        emails: c.emails
                    }
                }).then(function(a) {
                    P.getModalManager().showInModal(a)
                })
            }
        },
        logContextEvent: function(a, b, c, d) {
            var e = P.ContextEvent.fromEventType(a);
            if (c && e.setObjectIdStr(c), d) {
                if (d.attr("data-element-type")) {
                    var f = parseInt(d.attr("data-element-type"), 10);
                    e.setElement(f)
                }
                var g = d.closest("[data-component-type]");
                if (g.length) {
                    var h = parseInt(g.attr("data-component-type"), 10);
                    e.setComponent(h)
                }
            }
            e.updateAuxData({
                conversation_id: b
            }), P.ContextLogger.getInstance().addEvent(e)
        },
        _addConversationToDom: function(a, b, c) {
            var d = this.getContainer();
            if (d) {
                var e = a.id;
                this.conversationIds.push(e), this.cacheActiveConversations();
                var f = {
                    id: e
                };
                (!P.currentUser.isAuthenticated() || P.currentUser.isLimitedLogin()) && (f.unauth=!0), a.users = _.reject(a.users, function(a) {
                    return a.id === P.currentUser.get("id")
                });
                var g = new P.modules.Conversation({
                    options: f,
                    data: a
                });
                g.renderExistingData().then(function() {
                    this.conversations[e] = g, this.resetConversationHeadTransforms(), d.appendChild(g), c && g.setInactive(), b ? this.openConversation(g) : (g.setBadgeCount(a.unread), this._openConversation && this._openConversation.adjustPopup()), g.focus()
                }.bind(this)), this._ensureWithinMaxNumberOfConversations()
            }
        },
        _animateAddConversation: function(a, b, c) {
            var d = _.reject(a.users, function(a) {
                return a.id === P.currentUser.get("id")
            }), e = this._addConversationToDom.bind(this, a, b);
            b && this._openConversation && this._openConversation.closePopup();
            var f;
            if (c && c.length)
                f = this._makeAnimatedElement(c), this._animateShowConversationHead(f, e);
            else {
                var g = new P.modules.ConversationHead({
                    options: {
                        users: d,
                        emails: a.emails
                    }
                });
                g.render().then(function() {
                    f = this._makeAnimatedElement(g.$el), this._animateShowConversationHead(f, e)
                }.bind(this))
            }
        },
        _makeAnimatedElement: function(a) {
            var b = a.clone();
            return b.addClass("cloned").offset({
                left: - 1e3,
                top: - 1e3
            }).appendTo($("body")), b
        },
        _animateShowConversationHead: function(a, b) {
            var d = this.getContainer(), e = d.getContent(), f = e.offset(), g = f.left, h = f.top, i = d.getHeight(!0), j = e.find(".ConversationHead");
            j.transition({
                y: - c
            }, 280, "ease"), a.addClass("normal opening"), a.removeClass("medium small"), a.width(P.CONST.ACTIVE_CONVERSATION_HEAD_DIMENSION).height(P.CONST.ACTIVE_CONVERSATION_HEAD_DIMENSION).css("visibility", "hidden"), a.offset({
                left: g,
                top: h + i - P.CONST.ACTIVE_CONVERSATION_HEAD_DIMENSION - 3
            }), a.transition({
                scale: 0,
                duration: 1
            }, function() {
                $(this).css("visibility", "")
            }).transition({
                scale: 1.2,
                duration: 180
            }).transition({
                scale: 1,
                duration: 100
            }, function() {
                b(), a.remove()
            })
        },
        cacheActiveConversations: function() {
            P.LocalStorage.setItem(b, this.conversationIds)
        },
        _ensureWithinMaxNumberOfConversations: function() {
            if (this.conversationIds.length > a) {
                var b = this.conversationIds[0];
                this.removeOverboundsConversation(b)
            }
        },
        removeOverboundsConversation: function(a) {
            var b = this.conversations[a], c = b.getContent();
            c.transition({
                scale: .8
            }, 200).transition({
                scale: 2,
                opacity: 0
            }, 200, "ease", function() {
                this.resetConversationHeadTransforms(), this.removeConversationById(a)
            }.bind(this))
        },
        loadInitialConversations: function(a) {
            var c = P.LocalStorage.getItem(b);
            c && c.length || (c = [], this._publishNoActiveConversationsIfNeeded());
            var d = [].concat(c);
            this._fetchConversations().then(function(b) {
                var c=!!a;
                _.each(b, function(b) {
                    var e = b.id === a;
                    e ? (this._addConversationToDom(b, !0), c=!1) : _.contains(d, b.id) && this._addConversationToDom(b, !1)
                }.bind(this)), c && this.addConversationById(a, !0), this.cacheActiveConversations()
            }.bind(this))
        },
        addConversation: function(a, b, c) {
            _.isUndefined(b) && (b=!0);
            var d = a.id, e = this.conversations[d];
            e ? (e.updateConversation(a), b && this.openConversation(e)) : this._animateAddConversation(a, b, c), P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_MESSAGES, P.CONST.PUBSUB_TOPIC_CONVERSATION_ADDED)
        },
        addConversationById: function(a, b) {
            if (_.contains(this.conversationIds, a))
                return void(b && this.openConversation(this.conversations[a]));
            var c = P.resourceFactory.create("ConversationResource", {
                conversation_id: a
            });
            c.callGet({
                showError: !1
            }).then(function(a) {
                var c = a.resource_response.data;
                this.addConversation(c, b)
            }.bind(this))
        },
        addConversationForUnauthUser: function(a) {
            var b = P.getQueryStringParams(), c = b.user_id, d = b.od;
            if (c && d) {
                var e = P.resourceFactory.create("UnauthConversationResource", {
                    conversation_id: a,
                    user_id: c,
                    od: d
                });
                e.callGet().then(function(a) {
                    var b = a.resource_response.data;
                    this._unauthUserEmail = b.unauth_user_email;
                    var c = b.conversation;
                    this.addConversation(c, !0)
                }.bind(this))
            }
        },
        getUnauthUserEmail: function() {
            return this._unauthUserEmail
        },
        listenForActiveConversationUpdates: function() {
            P.currentUser.isAuthenticated()&&!P.currentUser.isLimitedLogin() && (P.Updater.instance().setMinPoll(P.CONST.UPDATES_WITH_ACTIVE_CONVERSATIONS_MIN_POLL), P.ConversationsUpdater.instance().activate(), this.activeConversationsListener || (this.activeConversationsListener = this.listenTo(P.ConversationsUpdater.instance(), "active_conversations", this.onActiveConversationsUpdate)))
        },
        getOpenConversationId: function() {
            return this._openConversation ? this._openConversation.data.id : !1
        },
        onActiveConversationsUpdate: function(a) {
            this._updateActiveConversations(a)
        },
        stopListeningForActiveConversationUpdates: function() {
            P.currentUser.isAuthenticated()&&!P.currentUser.isLimitedLogin() && (P.ConversationsUpdater.instance().deactivate(), P.Updater.instance().setMinPoll(P.CONST.UPDATES_MIN_POLL), this.stopListening(this.activeConversationsListener), this.activeConversationsListener = null)
        },
        getConversationIds: function() {
            return this.conversationIds
        },
        hasActiveConversations: function() {
            return this.getConversationIds().length > 0
        },
        resetConversationHeadTransforms: function() {
            var a = this.getContainer();
            a && a.$(".ConversationHead").css("transform", "")
        },
        scaleConversationDownAndRemove: function(a) {
            var b = this.conversations[a], d = b.getContent(), e = _.indexOf(this.conversationIds, a), f = this.getContainer().getConversationHeads(), g = f.slice(0, e);
            d.transition({
                scale: 1.1
            }, 120, function() {
                g.length && g.transition({
                    y: c
                }, 140)
            }).transition({
                scale: 0
            }, 140, "ease", function() {
                this.resetConversationHeadTransforms(), this.removeConversationById(a)
            }.bind(this))
        },
        removeConversationById: function(a) {
            if (this.conversationIds = _.without(this.conversationIds, a), this.conversations[a]) {
                this._openConversation && (this._openConversation.getConversationId() === a ? this.closeConversation(this._openConversation) : this._openConversation.adjustPopup());
                var b = this.conversations[a];
                b.destroy(), delete this.conversations[a], this.cacheActiveConversations(), this._publishNoActiveConversationsIfNeeded()
            }
        },
        _publishNoActiveConversationsIfNeeded: function() {
            0 === this.conversationIds.length && P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_MESSAGES, P.CONST.PUBSUB_TOPIC_CONVERSATION_NO_ACTIVE_CONVERSATIONS)
        },
        closeAllConversations: function() {
            _.each(this.conversations, function(a) {
                this.closeConversation(a)
            }.bind(this))
        },
        closeConversation: function(a) {
            this.stopListeningForActiveConversationUpdates(), this.setAllActive(), a.closePopup(), this._openConversation === a && (this._openConversation = null, P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_MESSAGES, P.CONST.PUBSUB_TOPIC_CONVERSATION_CLOSED, null))
        },
        setAllActive: function() {
            _.each(this.conversations, function(a) {
                a.setActive()
            })
        },
        setAllInactive: function() {
            _.each(this.conversations, function(a) {
                a !== this._openConversation && a.setInactive()
            }.bind(this))
        },
        closeConversationById: function(a) {
            var b = this.conversations[a];
            b && this.closeConversation(b)
        },
        openConversation: function(a) {
            this.conversations[a.getConversationId()] && (this._openConversation ? (this._openConversation.setInactive(), this._openConversation.closePopup()) : this.setAllInactive(a), this._openConversation = a, this._openConversation.setActive(), a.showPopup(), P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_MESSAGES, P.CONST.PUBSUB_TOPIC_CONVERSATION_OPEN, null), this.listenForActiveConversationUpdates())
        }
    }), P.setConversationsManager = function(a) {
        P._conversationsManager = a
    }, P.getConversationsManager = function() {
        return P._conversationsManager
    }, P.setConversationsManager(new d)
}(), function() {
    goog.provide("P.conversationsUtil"), P.getConversationFromUrl = function() {
        var a, b = P.getQueryStringParams(), c = window.location.pathname, d = "/conversation/", e = 0 === c.indexOf(d);
        if ((b.conversation || e) && (a = b.conversation, !a)) {
            var f = c.split(d), g = f[1];
            a = g.split("/")[0]
        }
        return a
    }
}(), function() {
    goog.provide("P.updater");
    var a = "mousemove.updater";
    P.Updater = function() {
        this.decay = 0, this.lastFetchTime = 0, this.timeout = null, this.recentPinId = null, this._minPoll = P.CONST.UPDATES_MIN_POLL, this._numRetries = 0, this.updatesResource = P.resourceFactory.create("UpdatesResource", {}), $(document).on(a, _.throttle(function() {
            this.wake()
        }.bind(this), 1e3)), this.deferredFetch()
    }, _.extend(P.Updater.prototype, Backbone.Events), _.extend(P.Updater.prototype, {
        getUpdatesResourceOptions: function() {
            var a = {};
            return this.recentPinId && (a.last_pin_id = this.recentPinId), a
        },
        setRecentPinId: function(a) {
            this.recentPinId = a
        },
        setMinPoll: function(a) {
            this._minPoll = a
        },
        wake: function() {
            this.msSinceLastFetch() > this._minPoll && (this._numRetries = 0, this.decay = 0, this.fetch())
        },
        fetch: function() {
            clearTimeout(this.timeout), this.lastFetchTime = (new Date).getTime(), this.updatesResource.setOptions(this.getUpdatesResourceOptions()), this.updatesResource.callGet({
                showError: !1
            }).then(function(a) {
                var b = a.resource_response.data;
                this._numRetries = 0, _.each(b, function(a, b) {
                    this.trigger(b, a)
                }.bind(this)), this.deferredFetch()
            }.bind(this), function() {
                this.attemptDeferredFetch()
            }.bind(this))
        },
        attemptDeferredFetch: function() {
            this._numRetries++, this._numRetries < 5 ? this.deferredFetch() : $(document).off(a)
        },
        deferredFetch: function() {
            this.decay = Math.min(2 * (this.decay || 1e3), P.CONST.UPDATES_MAX_POLL), this.timeout = P.setTimeout(function() {
                this.fetch()
            }.bind(this), this._minPoll + this.decay)
        },
        msSinceLastFetch: function() {
            return (new Date).getTime() - this.lastFetchTime
        }
    }), P.Updater.instance = function() {
        return P.Updater._instance || (P.Updater._instance = new P.Updater), P.Updater._instance
    }
}(), function() {
    goog.provide("P.conversationsUpdater"), P.ConversationsUpdater = function() {
        this.conversationsUpdatesResource = P.resourceFactory.create("ConversationsUpdatesResource", {}), this.poller = null, this._numRetries = 0, this._requestConversationId = null, this._pollInterval = null
    }, _.extend(P.ConversationsUpdater.prototype, Backbone.Events), _.extend(P.ConversationsUpdater.prototype, {
        fetch: function() {
            if (!this.pendingRequest) {
                var a = P.getConversationsManager().getOpenConversationId();
                a && (this.pendingRequest=!0, this._requestConversationId !== a && (this._requestConversationId = a, this.conversationsUpdatesResource.resetBookmark(), this.conversationsUpdatesResource.setOptions({
                    conversation_ids: [this._requestConversationId]
                })), this.conversationsUpdatesResource.callGet({
                    showError: !1
                }).then(function(a) {
                    this.pendingRequest=!1, this._numRetries = 0;
                    var b = a.resource_response.data, c = b.updated_conversations || [];
                    this._activated && b.wait && this._setNextPoll(1e3 * b.wait), c.length > 0 && this.trigger("active_conversations", c)
                }.bind(this), function() {
                    this.pendingRequest=!1, this.deactivateIfNecessary()
                }.bind(this)))
            }
        },
        deactivateIfNecessary: function() {
            this._numRetries++, this._numRetries > 5 && this.deactivate()
        },
        deactivate: function() {
            this._resetPoller(), this.pendingRequest=!1, this._activated=!1
        },
        activate: function() {
            this._setNextPoll(P.CONST.OPEN_CONVERSATION_MIN_POLL), this._numRetries = 0, this._activated=!0
        },
        _setNextPoll: function(a) {
            this.pendingRequest || (a && this._pollInterval === a || this._resetPoller(), a && this._pollInterval !== a && (this.poller = window.setInterval(function() {
                this.fetch()
            }.bind(this), a)), this._pollInterval = a)
        },
        _resetPoller: function() {
            this.poller && clearInterval(this.poller), this.poller = null, this._pollInterval = null
        },
        isActive: function() {
            return this._activated
        }
    }), P.ConversationsUpdater.instance = function() {
        return P.ConversationsUpdater._instance || (P.ConversationsUpdater._instance = new P.ConversationsUpdater), P.ConversationsUpdater._instance
    }
}(), function() {
    goog.provide("P.title"), P.Title = function() {
        this.prefixCount = 0, this.previousCount = 0
    }, _.extend(P.Title.prototype, {
        setPrefixCount: function(a) {
            this.previousCount = this.prefixCount, this.prefixCount = Math.max(a, 0), this._updateTitle()
        },
        incrementPrefixCount: function() {
            this.setPrefixCount(this.prefixCount + 1)
        },
        resetPrefix: function() {
            this.setPrefixCount(0)
        },
        decrementPrefixCount: function() {
            this.setPrefixCount(this.prefixCount - 1)
        },
        _updateTitle: function() {
            if (this.prefixCount !== this.previousCount) {
                var a, b = document.title, c = b.split("(" + this.previousCount + ") "), d = c.length > 1 ? _.rest(c).join(""): c[0];
                a = this.prefixCount ? "(" + this.prefixCount + ") " + d : d, window.document.title = a
            }
        }
    }), P.Title.instance = function() {
        return P.Title._instance || (P.Title._instance = new P.Title), P.Title._instance
    }
}(), function() {
    goog.provide("P.writeban"), P.writeban = {}, P.writeban.showWriteBanned = function(a) {
        var b = P.string.format(P._("Due to strange activity, we put your account in safe mode to protect your Pins. You just need to reset your password.")), c = {
            name: "ConfirmDialog",
            options: {
                button_text: P._("Reset Password"),
                body_message: b,
                title: P._("Safe mode alert!"),
                template: "generic"
            }
        }, d = function() {
            this.triggerEvent(P.CONST.EVENT_DISMISS, null, !1)
        }.bind(a), e = function() {
            P.trackGAEvent("reset_password", P.CONST.GA_ACTION_CLICK), this.showLoading();
            var a = P.resourceFactory.create("UserResetPasswordResource", {
                username_or_email: P.currentUser.attributes.username
            }), b = function() {
                P.trackGAEvent("reset_password", P.CONST.GA_ACTION_SUCCESS);
                var a = {
                    name: "ConfirmDialog",
                    options: {
                        email: P.currentUser.attributes.email,
                        template: "password_reset_email_sent"
                    }
                };
                P.loadModule(a).then(function(a) {
                    this.showInModal(a, null), this.listen(a, P.CONST.EVENT_DESTROYED, d)
                }.bind(this))
            }.bind(this), c = function() {
                this.hideLoading()
            }.bind(this), e = function() {
                P.trackGAEvent("reset_password", P.CONST.GA_ACTION_ERROR)
            };
            a.callCreate({
                showError: !1
            }).then(b, e).fin(c)
        }.bind(a);
        P.loadModule(c).then(function(a) {
            this.showInModal(a, null), this.listen(a, P.CONST.EVENT_CONFIRM, e), this.listen(a, P.CONST.EVENT_DISMISS, d)
        }.bind(a))
    }
}(), function() {
    goog.provide("P.limitedLogin"), P.limitedLogin = {}, P.limitedLogin.showLogin = function(a) {
        var b = {
            name: "ConfirmDialog",
            options: {
                button_text: P._("Log In"),
                body_message: P._("You just need to log in first."),
                title: P._("Almost there..."),
                template: "generic"
            }
        }, c = function() {
            P.navigate("/login")
        }, d = function() {
            a.triggerEvent(P.CONST.EVENT_DISMISS, null, !1)
        };
        P.loadModule(b).then(function(a) {
            this.showInModal(a, {
                can_dismiss: !0
            }), this.listen(a, P.CONST.EVENT_CONFIRM, c), this.listen(a, P.CONST.EVENT_DISMISS, d)
        }.bind(a))
    }
}(), function() {
    goog.provide("P.translate"), P.translate = {}, P.translate.detect = function(a) {
        var b = P.resourceFactory.create("LanguageDetectionResource", {
            text: a
        });
        return b.callGet()
    }, P.translate.translate = function(a, b) {
        var c = P.resourceFactory.create("LanguageTranslationResource", {
            text: a,
            to: b
        });
        return c.callGet()
    }
}(), function() {
    goog.provide("P.browserExtension"), goog.require("P.BrowserExtensionUrls");
    var a = {
        OTHER: 0,
        CHROME: 1,
        SAFARI: 2,
        IE: 3,
        FIREFOX: 4,
        OPERA: 5
    }, b = _.object([[a.CHROME, {
        url: P.BrowserExtensionUrls.EXTENSION_PINIT_CHROME_URL,
        newWindow: !0
    }
    ], [a.FIREFOX, {
        url: P.BrowserExtensionUrls.EXTENSION_PINIT_FIREFOX_URL,
        newWindow: !1
    }
    ], [a.OPERA, {
        url: P.BrowserExtensionUrls.EXTENSION_PINIT_OPERA_URL,
        newWindow: !0
    }
    ]]), c = function() {};
    c.prototype = {
        handleExtensionInstall: function(a, b) {
            var c = this._getBrowserExtensionUrl();
            c && (this.isChrome() ? this._handleChromeExtensionInstall(a, b) : P.changeWindowLocation(c, this._openInNewWindow()))
        },
        _handleChromeExtensionInstall: function(a, b) {
            if (!this.isExtensionInstalled()) {
                var c = this._getBrowserExtensionUrl();
                chrome.webstore.install(c, a, b)
            }
        },
        isExtensionInstalled: function() {
            return void 0 !== $("body").attr("data-pinterest-extension-installed")
        },
        _getBrowser: function() {
            var b=!!window.opera || window.navigator.userAgent.indexOf(" OPR/") >= 0, c = "InstallTrigger"in window, d = Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor") > 0, e=!!window.chrome&&!b, f=!1||!!document.documentMode;
            return c ? a.FIREFOX : b ? a.OPERA : e ? a.CHROME : f ? a.IE : d ? a.SAFARI : a.OTHER
        },
        isChrome: function() {
            return this._getBrowser() === a.CHROME
        },
        _getBrowserExtensionUrl: function() {
            var a = this._getBrowser();
            return a ? b[a].url : void 0
        },
        _openInNewWindow: function() {
            var a = this._getBrowser();
            return a ? b[a].newWindow : void 0
        }
    }, P.browserExtension.instance = new c
}(), function() {
    goog.provide("P.interfaces.IToastsManager"), P.interfaces.IToastsManager = function() {}, _.extend(P.interfaces.IToastsManager.prototype, Backbone.Events), _.extend(P.interfaces.IToastsManager.prototype, {
        setContainer: function() {},
        getContainer: function() {},
        addToast: function() {}
    })
}(), function() {
    goog.provide("P.toastsManager"), goog.require("P.modules.ToastBase"), goog.require("P.modules.Toasts");
    var a = function() {
        this.container = null, this.toasts = []
    };
    _.extend(a.prototype, Backbone.Events), _.extend(a.prototype, {
        setContainer: function(a) {
            this.container = a
        },
        getContainer: function() {
            return this.container
        },
        addToast: function(a) {
            var b = this;
            a.renderExistingData().then(function() {
                var c = b.getContainer();
                c.appendChild(a)
            })
        }
    }), P.experiments.instance.inExperimentGroupsActiveOrTriggerable("web_toasts", ["employees", "enabled"]) && (P._toastsManager = new a, P.getToastsManager = function() {
        return P._toastsManager
    })
}(), function() {
    goog.provide("P.focusWithoutScrolling"), jQuery.fn.focusWithoutScrolling = function() {
        var a = $(".Closeup");
        return this.each(function(b, c) {
            var d = $(window), e = d.scrollLeft(), f = d.scrollTop();
            return $(c).focus(), a.length ? (f = a.scrollTop(), void a.scrollTop(f)) : (d.scrollLeft(e), void d.scrollTop(f))
        }), this
    }
}(), function() {
    goog.provide("P.signupModalManager"), P.signupModalManager = {}, P.signupModalManager.shouldShowSignupModal = function(a) {
        var b = ["BoardPage", "DomainFeedPage"];
        return b.indexOf(a.className) >= 0
    }, P.signupModalManager.showContextualSignupModal = function(a) {
        var b = {
            BoardPage: {
                extra_class: "redesign",
                redirect_to_signup: !0,
                can_dismiss: !1,
                prev: window.location.pathname,
                tagline: P._("Sign up to get more details about this board and discover more great ideas!")
            },
            UserProfilePage: {
                extra_class: "redesign",
                redirect_to_signup: !0,
                can_dismiss: !1,
                prev: window.location.pathname,
                tagline: P._("Sign up to get more details about this user and discover more great ideas!")
            },
            DomainFeedPage: {
                extra_class: "redesign",
                can_dismiss: !1,
                prev: window.location.href,
                tagline: P._("Sign up to see more Pins from this website and discover more great ideas!")
            },
            Closeup: {
                extra_class: "redesign",
                redirect_to_signup: !0,
                can_dismiss: !1,
                prev: window.location.pathname,
                tagline: P._("Sign up to get more details about this Pin and discover more great ideas!")
            },
            SearchPage: {
                extra_class: "redesign",
                redirect_to_signup: !0,
                can_dismiss: !1,
                prev: window.location.pathname,
                tagline: P._("Sign up to see more Pins and discover more great ideas!")
            },
            InterestFeedPage: {
                extra_class: "redesign",
                redirect_to_signup: !0,
                can_dismiss: !1,
                prev: window.location.pathname,
                tagline: P._("Sign up to see more Pins and discover more great ideas!")
            },
            CategoriesPage: {
                extra_class: "redesign",
                redirect_to_signup: !0,
                can_dismiss: !1,
                prev: window.location.pathname,
                tagline: P._("Sign up to see more Pins and discover more great ideas!")
            },
            FeedPage: {
                extra_class: "redesign",
                redirect_to_signup: !0,
                can_dismiss: !1,
                prev: window.location.pathname,
                tagline: P._("Sign up to see more Pins and discover more great ideas!")
            }
        }, c = b[a.className];
        c && P.UserRegistration.showSignupModal(null, c)
    }
}(), goog.provide("P.experienceManager"), goog.require("P.Experiences"), goog.require("P.logger"), goog.require("P.resourceFactory"), goog.require("P.set");
var logger = P.Logger.getLogger("ExperienceManager"), PlacedExperience, PlacedExperiences;
P.ExperienceManager = function(a) {
    this._placedExperiences = a, this._triggered = new P.Set
}, P.ExperienceManager.prototype = {
    _getResource: function(a, b) {
        return P.resourceFactory.create(a, b)
    },
    constructPlacedExperienceId: function(a, b) {
        return a && b ? a + ":" + b : null
    },
    isPlacedExperience: function(a, b) {
        var c = this.getPlacedExperienceId(a, b);
        return c && this.triggerPlacedExperienceId(a, c), null !== c
    },
    getPlacedExperienceId: function(a, b) {
        if (a && b) {
            var c = this._placedExperiences[a];
            if (c && c.experience_id === b)
                return c.id
        }
        return null
    },
    getPlacedExperienceWithContext: function(a, b) {
        var c = this.getPlacedExperience(a);
        if (c && c.experience_id !== P.Experiences.Experience.NOOP || _.isEmpty(b))
            return c ? (c.triggerable_placed_exps && c.triggerable_placed_exps.forEach(function(c) {
                this.triggerPlacedExperienceId(a, c, b)
            }.bind(this)), Promise.resolve(c)) : Promise.resolve(null);
        var d = this._getResource("UserExperienceResource", {
            placement_ids: [a],
            extra_context: b
        });
        return d.callGet({
            showError: !1
        }).then(function(c) {
            var d = c.resource_response.data || {}, e = d[a];
            return e ? (e.triggerable_placed_exps && e.triggerable_placed_exps.forEach(function(c) {
                this.triggerPlacedExperienceId(a, c, b)
            }.bind(this)), e) : null
        }.bind(this))
    },
    getPlacedExperience: function(a) {
        return this._placedExperiences[a] || null
    },
    refreshPlacedExperiences: function() {
        logger.debug("Refreshing all placed experiences.");
        var a = this._getResource("UserExperiencePlatformResource");
        a.callGet({
            showError: !1
        }).then(function(a) {
            var b = a.resource_response.data;
            this._placedExperiences = b
        }.bind(this))
    },
    dismissPlacedExperience: function(a, b) {
        var c = this.getPlacedExperienceId(a, b);
        return c ? (delete this._placedExperiences[a], this.dismissPlacedExperienceId(c)) : Promise.resolve()
    },
    dismissPlacedExperienceId: function(a) {
        if (a) {
            logger.debug("Delete placed experience: ", a);
            var b = this._getResource("UserExperienceResource", {
                placed_experience_id: a
            });
            return b.callDelete({
                showError: !1
            }).then(function() {
                return void this.refreshPlacedExperiences()
            }.bind(this))
        }
        return Promise.resolve()
    },
    viewPlacedExperience: function(a, b) {
        var c = this.getPlacedExperienceId(a, b);
        c && this.viewPlacedExperienceId(c)
    },
    triggerPlacedExperienceId: function(a, b, c) {
        if (!this._triggered.contains(a)) {
            this._triggered.add(a);
            var d = this._getResource("UserExperienceTriggerResource", {
                placed_experience_id: b,
                extra_context: c
            });
            d.callUpdate({
                showError: !1
            })
        }
    },
    viewPlacedExperienceId: function(a) {
        if (a) {
            logger.debug("Viewed placed experience: ", a);
            var b = this._getResource("UserExperienceViewedResource", {
                placed_experience_id: a
            });
            b.callUpdate({
                showError: !1
            })
        }
    },
    completePlacedExperience: function(a, b) {
        var c = this.getPlacedExperienceId(a, b);
        return c ? (delete this._placedExperiences[a], this.completePlacedExperienceId(c)) : Promise.resolve()
    },
    completePlacedExperienceId: function(a) {
        if (a) {
            logger.debug("Complete placed experience: ", a);
            var b = this._getResource("UserExperienceCompletedResource", {
                placed_experience_id: a
            });
            return b.callUpdate({
                showError: !1
            }).then(function() {
                return void this.refreshPlacedExperiences()
            }.bind(this))
        }
        return Promise.resolve()
    }
};
var instance = null;
P.ExperienceManager.instance = function() {
    if (!instance) {
        var a = P.expns;
        instance = new P.ExperienceManager(a), P.pubsub.subscribe(P.CONST.PUBSUB_CHANNEL_SITE, P.CONST.PUBSUB_TOPIC_PLACED_EXPERIENCES_FROM_SERVER, function(a, b, c) {
            instance = new P.ExperienceManager(c)
        })
    }
    return instance
}, P.ExperienceManager.Tutorials = {}, P.ExperienceManager.Tutorials[P.Experiences.Experience.WEB_FIRST_PIN_USER_ED] = "firstPinIntro", P.ExperienceManager.Tutorials[P.Experiences.Experience.WEB_YOUR_BOARDS_USER_ED] = "yourBoards", P.ExperienceManager.Tutorials[P.Experiences.Experience.WEB_FAST_FOLLOW_USER_ED] = "fastFollowIntro", P.ExperienceManager.Tutorials[P.Experiences.Experience.WEB_FIND_FRIENDS_USER_ED] = "findFriends", P.ExperienceManager.Tutorials[P.Experiences.Experience.WEB_CATEGORY_SEARCH_USER_ED] = "categorySearchIntro", P.ExperienceManager.Tutorials[P.Experiences.Experience.WEB_EMPTY_PLACES_BOARD_USER_ED] = "emptyPlacesBoardIntro", P.ExperienceManager.Tutorials[P.Experiences.Experience.WEB_FILLED_PLACES_BOARD_USER_ED] = "filledPlacesBoardIntro", P.ExperienceManager.Tutorials[P.Experiences.Experience.WEB_FIRST_BOARD_USER_ED] = "firstBoardIntro", P.ExperienceManager.Tutorials[P.Experiences.Experience.WEB_MOBILE_NUX_MANDATORY] = "newUserWhitneyEd", P.ExperienceManager.Tutorials[P.Experiences.Experience.WEB_MOBILE_NUX_INTERESTS] = "interestsNuxMweb", P.ExperienceManager.Tutorials[P.Experiences.Experience.WEB_VISUAL_OBJECT_SEARCH_CLOSEUP_USER_ED] = "visualObjectSearchIntro", P.ExperienceManager.Tutorials[P.Experiences.Experience.ANALYTICS_HOME_USER_ED] = "analyticsHomeUserEd", P.ExperienceManager.Tutorials[P.Experiences.Experience.ANALYTICS_AUDIENCE_SELECTOR_USER_ED] = "analyticsAudienceSelectorUserEd", P.ExperienceManager.Tutorials[P.Experiences.Experience.WEB_EMPTY_BOARD_ED] = "emptyBoardIntro", P.ExperienceManager.Tutorials[P.Experiences.Experience.WEB_EMPTY_BOARD_ED_MANUAL] = "emptyBoardIntro", P.ExperienceManager.Tutorials[P.Experiences.Experience.WEB_EMPTY_PROFILE_ED] = "emptyProfileIntro", P.ExperienceManager.Tutorials[P.Experiences.Experience.WEB_EMPTY_PROFILE_ED_MANUAL] = "emptyProfileIntro", P.ExperienceManager.Tutorials[P.Experiences.Experience.WEB_HOME_FEED_ED] = "homeFeedGuide", P.ExperienceManager.Tutorials[P.Experiences.Experience.WEB_HOME_FEED_ED_MANUAL] = "homeFeedGuide", P.ExperienceManager.Tutorials[P.Experiences.Experience.WEB_REPIN_ED] = "repin", P.ExperienceManager.Tutorials[P.Experiences.Experience.WEB_REPIN_ED_MANUAL] = "repin", P.ExperienceManager.Tutorials[P.Experiences.Experience.WEB_CLICKTHROUGH_ED] = "pinClickThrough", P.ExperienceManager.Tutorials[P.Experiences.Experience.WEB_CLICKTHROUGH_ED_MANUAL] = "pinClickThrough", P.ExperienceManager.Tutorials[P.Experiences.Experience.WEB_GUIDED_SEARCH_HEADER_USER_ED] = "guidedSearchHeaderIntro", P.ExperienceManager.Tutorials[P.Experiences.Experience.WEB_GUIDED_SEARCH_USER_ED] = "guidedSearchIntro", goog.provide("P.versionedFileLoader"), goog.require("P.logger"), goog.require("P.script");
var versionedFileLoaderLog = P.Logger.getLogger("VersionedFileLoader");
P.VersionedFileLoader = function() {}, P.VersionedFileLoader.prototype = {
    getJSFiles: function() {
        return Pc.dynamicallyLoadedJSFiles
    },
    loadScript: function(a, b) {
        var c = this.getJSFiles(), d = c[a];
        return d ? (P.script.load([], d, a), void P.script.ready(a, function() {
            b()
        })) : void versionedFileLoaderLog.error("Tried loading file (", + a + "), but it does not exist.")
    }
}, P.VersionedFileLoader.instance = new P.VersionedFileLoader, goog.provide("P.adTracking"), P.AdTracking = {}, P.AdTracking.trackConversions = function() {
    P.currentUser.isAuthenticated() && Cookie.get(P.CONST.COOKIE_USER_JUST_REGISTERED) && (P.AdTracking.pingGoogleConversion(), P.AdTracking.pingFacebookConversion(), Cookie.unset(P.CONST.COOKIE_USER_JUST_REGISTERED))
}, P.AdTracking.pingUrl = function(a) {
    var b = new Image;
    a += "&cache_bust=" + Date.now(), b.src = a
}, P.AdTracking.pingGoogleConversion = function() {
    P.AdTracking.pingUrl("https://www.googleadservices.com/pagead/conversion/983308403/?value=0&label=BAZXCN218AYQ87Dw1AM&guid=ON&script=0")
}, P.AdTracking.pingFacebookConversion = function() {
    P.AdTracking.pingUrl("https://www.facebook.com/offsite_event.php?id=6007773338208&value=0&currency=USD")
}, "undefined" !== typeof Modernizr && Modernizr.csstransforms3d && function() {
    var a, b, c, d;
    a = function(a) {
        return $("<style>").attr({
            "class": "keyframe-style",
            id: a.id,
            type: "text/css"
        }).appendTo("head")
    }, $.keyframe = {
        getVendorPrefix: function() {
            function a() {
                var a;
                return a = navigator.userAgent, - 1 !== a.indexOf("Opera") ? "-o-" : - 1 !== a.indexOf("MSIE") ? "-ms-" : - 1 !== a.indexOf("WebKit") ? "-webkit-" : ""
            }
            var b = a();
            return function() {
                return b
            }
        }(),
        isSupported: function() {
            var a, b, c;
            if (b = $("body").get(0), a=!1, b.style.animationName)
                a=!0;
            else {
                c = this.getVendorPrefix().slice(1, - 1);
                var d = c + "AnimationName";
                d in b.style && (a=!0)
            }
            return a
        },
        getProperty: function(a) {
            var b = a;
            switch (a) {
            case"transform":
                b = this.getVendorPrefix() + b
            }
            return b
        },
        generate: function(b) {
            var c, d, e, f, g, h;
            f = b.name || "", e = "@" + this.getVendorPrefix() + "keyframes " + f + " {";
            for (h in b)
                if ("name" !== h) {
                    e += h + " {";
                    for (g in b[h]) {
                        var i = this.getProperty(g);
                        e += i + ":" + b[h][g] + ";"
                    }
                    e += "}"
                }
            e += "}", d = $("style#" + b.name), d.length > 0 ? (d.html(e), c = $("*").filter(function() {
                this.style["" + $.keyframe.getVendorPrefix().slice(1, - 1) + "AnimationName"] === f
            }), c.each(function() {
                var a, b;
                a = $(this), b = a.data("keyframeOptions"), a.resetKeyframe(function() {
                    a.playKeyframe(b)
                })
            })) : a({
                id: f
            }).append(e)
        },
        define: function(a) {
            if (!a.length)
                return this.generate(a);
            for (var b = 0; b < a.length; b++) {
                var c = a[b];
                this.generate(c)
            }
        }
    }, d = $.keyframe.getVendorPrefix(), b = "animation-play-state", c = "running", $.fn.resetKeyframe = function(a) {
        $(this).css(d + b, c).css(d + "animation", "none");
        a && setTimeout(a, 1)
    }, $.fn.pauseKeyframe = function() {
        $(this).css(d + b, "paused")
    }, $.fn.resumeKeyframe = function() {
        return $(this).css(d + b, c)
    }, $.fn.playKeyframe = function(a, e) {
        var f, g, h, i, j, k;
        if ("string" === typeof a) {
            var l = a.trim().split(" ");
            a = {
                name: l[0],
                duration: parseInt(l[1]),
                timingFunction: l[2],
                delay: parseInt(l[3]),
                repeat: l[4],
                complete: e
            }
        }
        a = $.extend({
            duration: 0,
            timingFunction: "ease",
            delay: 0,
            repeat: 1,
            direction: "normal",
            fillMode: "forwards",
            complete: e
        }, a), i = a.duration, h = a.delay, k = a.repeat, f = "" + a.name + " " + i + "ms " + a.timingFunction + " " + h + "ms " + k + " " + a.direction + " " + a.fillMode, e = a.complete, g = d + "animation", j = ["webkit", "moz", "MS", "o", ""];
        var m = function(a, b, c) {
            var d, e, f;
            for (e = 0, f = []; e < j.length;)
                j[e] || (b = b.toLowerCase()), d = j[e] + b, a.off(d).on(d, c), f.push(e++)
        };
        this.each(function() {
            var h = $(this).addClass("boostKeyframe").css(d + b, c).css(g, f).data("keyframeOptions", a);
            e && (m(h, "AnimationIteration", e), m(h, "AnimationEnd", e))
        })
    }, a({
        id: "boost-keyframe"
    }).append(" .boostKeyframe{" + d + "transform:scale3d(1,1,1);}")
}.call(this), function() {
    goog.provide("P.main"), goog.require("P.adTracking"), goog.require("P.logger"), goog.require("P.modules"), goog.require("P.start"), goog.require("P.string"), goog.require("P.clickCapturer");
    var a = P.Logger.getLogger("Main"), b = function(a, c) {
        _.each(a, function(a, d) {
            a.prototype ? a.prototype.className = c + d : "object" === typeof a && b(a, c + d + ".")
        })
    };
    P.start.ready(function(a) {
        b(P.modules, ""), P.CONST.CANONICAL_MAIN_DOMAIN = a.canonicalMainDomain, P.string.initializeCommonStrings();
        var c = a.tree, d = P.ModuleTree.fromPlainObject(c);
        P.clickCapturer.stopCapturing(), P.moduleFactory.create(d).then(function(a) {
            P.app = a
        }).then(P.clickCapturer.replayEvents), P.AdTracking.trackConversions(), a.canDebug && $(document).on("keypress", function(a) {
            var b = P.getWindowManager();
            b && "|" === String.fromCharCode(a.which) && b.open("/_/_/debug/", "debug", 800, 800)
        }), P.start.finishStart()
    }), $(document).ready(function() {
        var b = $("#jsInit");
        b.length || a.error("jsInit block at bottom of page failed to load"), FastClick.attach(document.body)
    })
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/AnswerLikeButton/AnswerLikeButton.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n", h += d.suppressValue((f = 7, g = 1, d.callWrap(d.contextOrFrameLookup(b, c, "base"), "base", ["QALikeButton"])), a.autoesc), a.getTemplate("app/common/modules/QALikeButton/QALikeButton.nunjucks", !0, function(f, g) {
                    if (f)
                        return void e(f);
                    for (var i in g.blocks)
                        b.addBlock(i, g.blocks[i]);
                    h += "\n", g.rootRenderFunc(a, b, c, d, e)
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/Board/Board.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n", a.getTemplate("templates/macros/image.nunjucks", function(i, j) {
                    return i ? void e(i) : void j.getExported(function(i, j) {
                        if (i)
                            return void e(i);
                        if (!j.hasOwnProperty("image_tag"))
                            return void e(new Error("cannot import 'image_tag'"));
                        var k = j.image_tag;
                        b.setVariable("image_tag", k), h += "\n", a.getTemplate("templates/macros/search_debug.nunjucks", function(i, j) {
                            return i ? void e(i) : void j.getExported(function(i, j) {
                                if (i)
                                    return void e(i);
                                if (!j.hasOwnProperty("search_debug"))
                                    return void e(new Error("cannot import 'search_debug'"));
                                var l = j.search_debug;
                                b.setVariable("search_debug", l), h += "\n\n";
                                var m;
                                f = 30, g = 28, m = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["view_type", "boardCoverImage"]), c.set("view_type", m, !0), c.parent || (b.setVariable("view_type", m), b.addExport("view_type")), h += "\n", h += d.suppressValue((f = 31, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", [d.contextOrFrameLookup(b, c, "view_type")])), a.autoesc), h += "\n\n";
                                var n;
                                n = d.contextOrFrameLookup(b, c, "data"), c.set("board", n, !0), c.parent || (b.setVariable("board", n), b.addExport("board")), h += "\n";
                                var o;
                                f = 34, g = 25, o = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["id"]), c.set("board_id", o, !0), c.parent || (b.setVariable("board_id", o), b.addExport("board_id")), h += "\n";
                                var p;
                                f = 35, g = 26, p = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["url"]), c.set("board_url", p, !0), c.parent || (b.setVariable("board_url", p), b.addExport("board_url")), h += "\n";
                                var q;
                                f = 36, g = 22, q = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["owner", {}
                                ]), c.set("owner", q, !0), c.parent || (b.setVariable("owner", q), b.addExport("owner")), h += "\n";
                                var r;
                                f = 37, g = 25, r = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "owner"), "get", a.autoesc), 'owner["get"]', ["id"]), c.set("owner_id", r, !0), c.parent || (b.setVariable("owner_id", r), b.addExport("owner_id")), h += "\n\n";
                                var s;
                                s = "secret" == (f = 39, g = 26, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["privacy"])), c.set("is_secret", s, !0), c.parent || (b.setVariable("is_secret", s), b.addExport("is_secret")), h += "\n";
                                var t;
                                f = 40, g = 33, t = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["is_collaborative"]), c.set("is_collaborative", t, !0), c.parent || (b.setVariable("is_collaborative", t), b.addExport("is_collaborative")), h += "\n";
                                var u;
                                if (u = "places" == (f = 41, g = 25, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["layout"])), c.set("is_place", u, !0), c.parent || (b.setVariable("is_place", u), b.addExport("is_place")), h += "\n", h += d.suppressValue((f = 42, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "include_data"), "include_data", ["id"])), a.autoesc), h += "\n\n", f = 44, g = 15, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["class_name"]) && (h += "\n    ", h += d.suppressValue((f = 45, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", [(f = 45, g = 25, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["class_name"]))])), a.autoesc), h += "\n"), h += "\n", f = 47, g = 15, (d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["component_type"]) || 0 == (f = 47, g = 48, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["component_type"]))) && (h += "\n    ", h += d.suppressValue((f = 48, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "attr"), "attr", [{
                                    "data-component-type": (f = 48, g = 45, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["component_type"]))
                                }
                                ])), a.autoesc), h += "\n"), h += "\n\n", "boardCoverImage" == d.contextOrFrameLookup(b, c, "view_type")) {
                                    h += "\n    ", d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "is_authenticated", a.autoesc) && (h += "\n        ", h += d.suppressValue((f = 53, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["draggable"])), a.autoesc), h += "\n    "), h += "\n    ", h += d.suppressValue((f = 55, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "include_data"), "include_data", ["followed_by_me", "id"])), a.autoesc), h += "\n\n    ";
                                    var v;
                                    f = 57, g = 36, v = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["allow_buttons", !0]), c.set("allow_buttons", v, !0), c.parent || (b.setVariable("allow_buttons", v), b.addExport("allow_buttons")), h += "\n    ";
                                    var w;
                                    f = 58, g = 40, w = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["show_edit_buttons", !0]), c.set("show_edit_buttons", w, !0), c.parent || (b.setVariable("show_edit_buttons", w), b.addExport("show_edit_buttons")), h += "\n    ";
                                    var x;
                                    f = 59, g = 39, x = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["allow_click_thru", !0]), c.set("allow_click_thru", x, !0), c.parent || (b.setVariable("allow_click_thru", x), b.addExport("allow_click_thru")), h += "\n    ";
                                    var y;
                                    f = 60, g = 39, y = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["board_click_mask", !1]), c.set("board_click_mask", y, !0), c.parent || (b.setVariable("board_click_mask", y), b.addExport("board_click_mask")), h += "\n    ";
                                    var z;
                                    z = d.contextOrFrameLookup(b, c, "board_click_mask") ? "primary" : "default", c.set("follow_button_color", z, !0), c.parent || (b.setVariable("follow_button_color", z), b.addExport("follow_button_color")), h += "\n    ";
                                    var A;
                                    A = d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "is_authenticated", a.autoesc) && (f = 62, g = 67, d.callWrap(d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "user", a.autoesc), "get", a.autoesc), 'context["user"]["get"]', ["id"]) == (f = 62, g = 86, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "owner"), "get", a.autoesc), 'owner["get"]', ["id"]))), c.set("owns_board", A, !0), c.parent || (b.setVariable("owns_board", A), b.addExport("owns_board")), h += "\n    ";
                                    var B;
                                    B = a.getFilter("contains").call(b, (f = 63, g = 35, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["access", []])), "write"), c.set("can_edit_board", B, !0), c.parent || (b.setVariable("can_edit_board", B), b.addExport("can_edit_board")), h += "\n    ";
                                    var C;
                                    f = 64, g = 31, C = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["name"]), c.set("board_name", C, !0), c.parent || (b.setVariable("board_name", C), b.addExport("board_name")), h += "\n    ";
                                    var D;
                                    if (f = 65, g = 39, D = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["collaborated_by_me"]), c.set("collaborated_by_me", D, !0), c.parent || (b.setVariable("collaborated_by_me", D), b.addExport("collaborated_by_me")), h += "\n\n    ", d.contextOrFrameLookup(b, c, "allow_click_thru")) {
                                        h += "\n        ";
                                        var E;
                                        E = a.getFilter("named_format").call(b, (f = 68, g = 27, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["More from {{ board }}"])), {
                                            board: (f = 68, g = 85, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["description"]) || d.contextOrFrameLookup(b, c, "board_name"))
                                        }), c.set("title_text", E, !0), c.parent || (b.setVariable("title_text", E), b.addExport("title_text")), h += '\n        <a href="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "board_url"), a.autoesc), h += '" class="boardLinkWrapper"\n            data-element-type="', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "BOARD_COVER", a.autoesc), a.autoesc), h += '"\n            title="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "title_text"), a.autoesc), h += '">\n    '
                                    } else {
                                        if (h += "\n        ", d.contextOrFrameLookup(b, c, "board_click_mask")) {
                                            h += '\n            <div class="wholeBoardMask mask', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "id", a.autoesc), a.autoesc), h += " ", d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "followed_by_me", a.autoesc) && (h += "followedBoard"), h += '"\n                    data-element-type="', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "BOARD_COVER", a.autoesc), a.autoesc), h += '">\n                <div class="check">&nbsp;</div>\n                <div class="mask">&nbsp;</div>\n                <div class="mask">&nbsp;</div>\n                <span class="message">\n                    <h4>', h += d.suppressValue((f = 80, g = 26, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Nice choice!"])), a.autoesc), h += "</h4>\n                    <span>\n                        ";
                                            var F = d.makeMacro([], [], function(e) {
                                                c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                                                var h, i = "";
                                                return h = {}, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 82, g = 25, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 82, g = 25, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["This board will show<br> up on your home feed."])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                                            });
                                            b.setVariable("_doTranslation", F), h += d.suppressValue((f = 82, g = 25, d.callWrap(F, "_doTranslation", [])), a.autoesc), h += "\n                    </span>\n                </span>\n            </div>\n        "
                                        }
                                        h += '\n        <div class="boardLinkWrapper">\n    '
                                    }
                                    h += "\n        ";
                                    var G;
                                    f = 92, g = 45, G = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["show_board_context", !0]), c.set("show_board_context", G, !0), c.parent || (b.setVariable("show_board_context", G), b.addExport("show_board_context")), h += "\n        ";
                                    var H;
                                    f = 93, g = 51, H = d.callWrap(d.memberLookup((f = 93, g = 34, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["owner", {}
                                    ])), "get", a.autoesc), 'the return value of (board["get"])["get"]', ["full_name"]), c.set("user_name", H, !0), c.parent || (b.setVariable("user_name", H), b.addExport("user_name")), h += '\n        <h3 class="boardName', d.contextOrFrameLookup(b, c, "show_board_context") && (h += " hasBoardContext"), h += '">\n            ', h += d.suppressValue((f = 95, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["BoardIcons", d.makeKeywordArgs({
                                        data: d.contextOrFrameLookup(b, c, "board")
                                    })])), a.autoesc), h += "\n            ", d.contextOrFrameLookup(b, c, "show_board_context") ? (h += "\n                ", h += d.suppressValue((f = 102, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["User", d.makeKeywordArgs({
                                        data: d.contextOrFrameLookup(b, c, "owner"),
                                        id: "userBoardContext",
                                        options: {
                                            view_type: "thumb",
                                            title_text: d.contextOrFrameLookup(b, c, "board_name"),
                                            title_tag: "div",
                                            size: "boardRepTitle",
                                            link: !1,
                                            url: d.contextOrFrameLookup(b, c, "board_url"),
                                            url_element_type: d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "BOARD_NAME", a.autoesc),
                                            show_follow_button: !1,
                                            show_user_icon: (f = 114, g = 53, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["show_user_icon", !0])),
                                            href_title_text: (f = 115, g = 52, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["description"]))
                                        },
                                        resource: (f = 117, g = 44, d.callWrap(d.contextOrFrameLookup(b, c, "create_resource"), "create_resource", ["UserResource", d.makeKeywordArgs({
                                            options: {
                                                user_id: (f = 118, g = 44, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "owner"), "get", a.autoesc), 'owner["get"]', ["id"])),
                                                field_set_key: "board_grid_item"
                                            }
                                        })]))
                                    })])), a.autoesc), h += "\n            ") : (h += "\n                ", d.contextOrFrameLookup(b, c, "allow_buttons") && (h += "\n                    ", h += d.suppressValue((f = 98, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["noContext"])), a.autoesc), h += "\n                "), h += "\n                ", h += d.suppressValue(d.contextOrFrameLookup(b, c, "board_name"), a.autoesc), h += "\n            "), h += '\n        </h3>\n        <div class="boardCoverWrapper">\n            ';
                                    var I;
                                    if (f = 125, g = 87, I = d.callWrap(d.memberLookup((f = 125, g = 68, d.callWrap(d.memberLookup((f = 125, g = 44, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["cover_images", {}
                                    ])), "get", a.autoesc), 'the return value of (board["get"])["get"]', ["216x146", {}
                                    ])), "get", a.autoesc), 'the return value of (the return value of (board["get"])["get"])["get"]', ["url"]), c.set("board_cover_url", I, !0), c.parent || (b.setVariable("board_cover_url", I), b.addExport("board_cover_url")), h += '\n            <span class="hoverMask"></span>\n            ', !d.contextOrFrameLookup(b, c, "board_cover_url")) {
                                        h += "\n                ";
                                        var J;
                                        f = 128, g = 48, J = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["image_cover_url"]), c.set("board_cover_url", J, !0), c.parent || (b.setVariable("board_cover_url", J), b.addExport("board_cover_url")), h += "\n            "
                                    }
                                    h += "\n            ";
                                    var K;
                                    if (f = 130, g = 40, K = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["description"]), c.set("description", K, !0), c.parent || (b.setVariable("description", K), b.addExport("description")), h += "\n            ", d.contextOrFrameLookup(b, c, "description")) {
                                        h += "\n                ";
                                        var L;
                                        f = 132, g = 33, L = d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["%s / %s / by %s"])%(d.contextOrFrameLookup(b, c, "board_name"), d.contextOrFrameLookup(b, c, "description"), d.contextOrFrameLookup(b, c, "user_name")), c.set("alt_text", L, !0), c.parent || (b.setVariable("alt_text", L), b.addExport("alt_text")), h += "\n            "
                                    } else {
                                        h += "\n                ";
                                        var M;
                                        f = 134, g = 33, M = d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["%s / by %s"])%(d.contextOrFrameLookup(b, c, "board_name"), d.contextOrFrameLookup(b, c, "user_name")), c.set("alt_text", M, !0), c.parent || (b.setVariable("alt_text", M), b.addExport("alt_text")), h += "\n            "
                                    }
                                    h += "\n            ", h += d.suppressValue((f = 136, g = 22, d.callWrap(k, "image_tag", [d.makeKeywordArgs({
                                        src: d.contextOrFrameLookup(b, c, "board_cover_url"),
                                        class_name: "boardCover",
                                        alt: d.contextOrFrameLookup(b, c, "alt_text")
                                    })])), a.autoesc), h += '\n\n            <img src="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "board_cover_url"), a.autoesc), h += '" class="boardCover" alt="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "alt_text"), a.autoesc), h += '">\n            <span class="boardPinCount">\n                ';
                                    var N;
                                    N = {
                                        id: d.contextOrFrameLookup(b, c, "board_id"),
                                        pin_count: (f = 146, g = 42, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["pin_count"])),
                                        type: (f = 147, g = 37, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["type"]))
                                    }, c.set("pin_count_data", N, !0), c.parent || (b.setVariable("pin_count_data", N), b.addExport("pin_count_data")), h += "\n                ", h += d.suppressValue((f = 149, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["PinCount", d.makeKeywordArgs({
                                        data: d.contextOrFrameLookup(b, c, "pin_count_data"),
                                        options: {
                                            can_update_count: d.contextOrFrameLookup(b, c, "can_edit_board")
                                        },
                                        resource: (f = 154, g = 44, d.callWrap(d.contextOrFrameLookup(b, c, "create_resource"), "create_resource", ["BoardResource", d.makeKeywordArgs({
                                            options: {
                                                board_id: d.contextOrFrameLookup(b, c, "board_id"),
                                                field_set_key: "pin_count"
                                            }
                                        })]))
                                    })])), a.autoesc), h += '\n            </span>\n        </div>\n\n        <ul class="boardThumbs">\n            ', c = c.push();
                                    var O = (f = 163, g = 27, d.callWrap(d.contextOrFrameLookup(b, c, "range"), "range", [4]));
                                    if (O)
                                        for (var P = O.length, Q = 0; Q < O.length; Q++) {
                                            var R = O[Q];
                                            c.set("i", R), c.set("loop.index", Q + 1), c.set("loop.index0", Q), c.set("loop.revindex", P - Q), c.set("loop.revindex0", P - Q - 1), c.set("loop.first", 0 === Q), c.set("loop.last", Q === P - 1), c.set("loop.length", P), h += "\n                <li>\n                    ";
                                            var S;
                                            S = d.memberLookup((f = 165, g = 42, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["pin_thumbnail_urls"])), R, a.autoesc), c.set("thumb", S, !0), c.parent || (b.setVariable("thumb", S), b.addExport("thumb")), h += '\n                    <span class="hoverMask"></span>\n                    ', d.contextOrFrameLookup(b, c, "thumb") && (h += "\n                        ", h += d.suppressValue((f = 168, g = 34, d.callWrap(k, "image_tag", [d.makeKeywordArgs({
                                                class_name: "thumb",
                                                src: d.contextOrFrameLookup(b, c, "thumb")
                                            })])), a.autoesc), h += "\n                    "), h += "\n                </li>\n            "
                                        }
                                    if (c = c.pop(), h += "\n        </ul>\n    ", h += d.contextOrFrameLookup(b, c, "allow_click_thru") ? "\n        </a>\n    " : "\n        </div>\n    ", h += "\n\n    ", d.contextOrFrameLookup(b, c, "allow_buttons")) {
                                        if (h += "\n        ", d.contextOrFrameLookup(b, c, "owns_board") && d.contextOrFrameLookup(b, c, "show_edit_buttons")) {
                                            h += "\n            ";
                                            var T;
                                            if (T = d.contextOrFrameLookup(b, c, "none"), c.set("cover_pin_id", T, !0), c.parent || (b.setVariable("cover_pin_id", T), b.addExport("cover_pin_id")), h += "\n            ", f = 185, g = 25, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["cover"])) {
                                                h += "\n                ";
                                                var U;
                                                f = 186, g = 58, U = d.callWrap(d.memberLookup((f = 186, g = 45, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["cover"])), "get", a.autoesc), 'the return value of (board["get"])["get"]', ["id"]), c.set("cover_pin_id", U, !0), c.parent || (b.setVariable("cover_pin_id", U), b.addExport("cover_pin_id")), h += "\n            "
                                            }
                                            h += "\n            ", f = 188, g = 25, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["pin_count"]) > 1 && (h += '\n                <div class="boardCoverEditWrapper">\n                    ', h += d.suppressValue((f = 190, g = 27, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["ShowModalButton", d.makeKeywordArgs({
                                                id: "boardCoverEditButton",
                                                options: {
                                                    ga_category: "board_edit_cover",
                                                    class_name: "boardCoverEditButton",
                                                    text: (f = 195, g = 37, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Change Cover"])),
                                                    submodule: {
                                                        name: "BoardCoverEditPage",
                                                        resource: {
                                                            name: "BoardFeedResource",
                                                            options: {
                                                                board_id: d.contextOrFrameLookup(b, c, "board_id"),
                                                                page_size: (f = 202, g = 64, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["page_size", 50])),
                                                                field_set_key: "board_cover_picker"
                                                            }
                                                        },
                                                        options: {
                                                            board_id: d.contextOrFrameLookup(b, c, "board_id"),
                                                            board_name: (f = 208, g = 59, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["name"])),
                                                            board_cover_edit_options: {
                                                                cover_pin_id: d.contextOrFrameLookup(b, c, "cover_pin_id")
                                                            }
                                                        }
                                                    }
                                                }
                                            })])), a.autoesc), h += "\n                </div>\n            "), h += "\n        "
                                        }
                                        h += "\n        ", d.contextOrFrameLookup(b, c, "can_edit_board") ? (h += "\n            ", d.contextOrFrameLookup(b, c, "show_edit_buttons") && (h += "\n                ", h += d.suppressValue((f = 221, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["ShowModalButton", d.makeKeywordArgs({
                                            options: {
                                                id: "boardEditButton",
                                                class_name: "boardEditButton",
                                                ga_category: "board_edit",
                                                text: (f = 226, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Edit"])),
                                                submodule: {
                                                    name: "BoardEdit",
                                                    resource: {
                                                        name: "BoardResource",
                                                        options: {
                                                            board_id: d.contextOrFrameLookup(b, c, "board_id"),
                                                            field_set_key: "edit"
                                                        }
                                                    },
                                                    options: {
                                                        next_url: (f = 237, g = 49, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["url"]) + "edit/"),
                                                        is_edit: !0
                                                    }
                                                }
                                            }
                                        })])), a.autoesc), h += "\n            "), h += "\n        ") : (h += "\n            ", h += d.suppressValue((f = 244, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["BoardFollowButton", d.makeKeywordArgs({
                                            options: {
                                                followed: d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "followed_by_me", a.autoesc),
                                                board_id: d.contextOrFrameLookup(b, c, "board_id"),
                                                class_name: "boardFollowUnfollowButton gridItem",
                                                user_id: (f = 249, g = 40, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "owner"), "get", a.autoesc), 'owner["get"]', ["id"])),
                                                follow_class: d.contextOrFrameLookup(b, c, "follow_button_color"),
                                                log_element_type: d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "BOARD_FOLLOW", a.autoesc)
                                            }
                                        })])), a.autoesc), h += "\n        "), h += "\n    "
                                    }
                                    h += "\n    ", h += d.suppressValue((f = 256, g = 17, d.callWrap(l, "search_debug", [d.makeKeywordArgs({
                                        data: d.contextOrFrameLookup(b, c, "board")
                                    })])), a.autoesc), h += "\n\n"
                                } else if ("boardPinsGrid" == d.contextOrFrameLookup(b, c, "view_type")) {
                                    h += "\n    ", h += d.suppressValue((f = 259, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "attr"), "attr", [{
                                        "data-component-type": d.memberLookup(d.contextOrFrameLookup(b, c, "ComponentType"), "BOARD_PINS_GRID", a.autoesc)
                                    }
                                    ])), a.autoesc), h += "\n    ", h += d.suppressValue((f = 260, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "include_data"), "include_data", ["id"])), a.autoesc), h += '\n\n    <div class="boardHeader">\n        ', h += d.suppressValue((f = 263, g = 15, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["BoardIcons", d.makeKeywordArgs({
                                        data: d.contextOrFrameLookup(b, c, "board")
                                    })])), a.autoesc), h += "\n\n        ", h += d.suppressValue((f = 265, g = 15, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["User", d.makeKeywordArgs({
                                        options: {
                                            view_type: "thumb",
                                            title_text: (f = 268, g = 39, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["name"])),
                                            size: "boardRepTitle",
                                            url: d.contextOrFrameLookup(b, c, "board_url"),
                                            url_element_type: d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "BOARD_NAME", a.autoesc),
                                            show_follow_button: !1,
                                            href_title_text: (f = 273, g = 44, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["description"]))
                                        },
                                        resource: (f = 275, g = 36, d.callWrap(d.contextOrFrameLookup(b, c, "create_resource"), "create_resource", ["UserResource", d.makeKeywordArgs({
                                            options: {
                                                user_id: (f = 276, g = 36, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "owner"), "get", a.autoesc), 'owner["get"]', ["id"])),
                                                field_set_key: "summary"
                                            }
                                        })]))
                                    })])), a.autoesc), h += "\n    </div>\n\n    ", h += '\n    <div class="pinGridWrapper">\n        ', h += d.suppressValue((f = 285, g = 15, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Grid", d.makeKeywordArgs({
                                        id: "pinGrid",
                                        async: !0,
                                        options: {
                                            scrollable: (f = 289, g = 41, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["scrollable"])),
                                            layout: "variable_height",
                                            view_type: d.contextOrFrameLookup(b, c, "view_type"),
                                            show_grid_footer: !1,
                                            prevent_default_scroll: !0,
                                            centered: !1,
                                            track_active_item: !0,
                                            active_item_id: (f = 296, g = 45, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["active_item_id"])),
                                            item_options: {
                                                view_type: d.contextOrFrameLookup(b, c, "view_type"),
                                                component_type: d.memberLookup(d.contextOrFrameLookup(b, c, "ComponentType"), "BOARD_PINS_GRID", a.autoesc)
                                            }
                                        },
                                        resource: (f = 302, g = 36, d.callWrap(d.contextOrFrameLookup(b, c, "create_resource"), "create_resource", ["BoardFeedResource", d.makeKeywordArgs({
                                            options: {
                                                field_set_key: "board_pins_grid_item",
                                                board_id: d.contextOrFrameLookup(b, c, "board_id")
                                            }
                                        })])),
                                        error_strategy: d.memberLookup(d.contextOrFrameLookup(b, c, "ErrorStrategy"), "BUBBLE", a.autoesc)
                                    })])), a.autoesc), h += "\n    </div>\n\n    ";
                                    var V;
                                    f = 310, g = 37, V = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["board_follow_button_options", {}
                                    ]), c.set("button_options", V, !0), c.parent || (b.setVariable("button_options", V), b.addExport("button_options")), h += "\n    ", a.getFilter("contains").call(b, (f = 311, g = 26, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "button_options"), "get", a.autoesc), 'button_options["get"]', ["board_access", []])), "write") ? (h += "\n        ", h += d.suppressValue((f = 312, g = 15, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["ShowModalButton", d.makeKeywordArgs({
                                        options: {
                                            ga_category: "board_edit",
                                            text: (f = 315, g = 21, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Edit"])),
                                            log_element_type: d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "BOARD_EDIT_BUTTON", a.autoesc),
                                            submodule: {
                                                name: "BoardEdit",
                                                resource: {
                                                    name: "BoardResource",
                                                    options: {
                                                        board_id: (f = 322, g = 54, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "button_options"), "get", a.autoesc), 'button_options["get"]', ["board_id"])),
                                                        field_set_key: "detailed"
                                                    }
                                                },
                                                options: {
                                                    next_url: (f = 327, g = 41, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["url"]) + "edit/"),
                                                    is_edit: !0
                                                }
                                            }
                                        }
                                    })])), a.autoesc), h += "\n    ") : (h += "\n        ", h += d.suppressValue((f = 333, g = 15, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["BoardFollowButton", d.makeKeywordArgs({
                                        id: "followBoardButton",
                                        options: {
                                            class_name: "followBoardButton",
                                            follow_class: (f = 337, g = 50, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "button_options"), "get", a.autoesc), 'button_options["get"]', ["color", "default"])),
                                            followed: (f = 338, g = 46, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "button_options"), "get", a.autoesc), 'button_options["get"]', ["board_followed_by_me"])),
                                            follow_text: (f = 339, g = 32, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Follow Board"])),
                                            unfollow_text: (f = 340, g = 34, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Unfollow Board"])),
                                            board_id: (f = 341, g = 46, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "button_options"), "get", a.autoesc), 'button_options["get"]', ["board_id"])),
                                            user_id: (f = 342, g = 45, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "button_options"), "get", a.autoesc), 'button_options["get"]', ["board_owner"])),
                                            log_element_type: d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "BOARD_FOLLOW", a.autoesc)
                                        }
                                    })])), a.autoesc), h += "\n    "), h += "\n"
                                } else if ("closeupBottomView" == d.contextOrFrameLookup(b, c, "view_type")) {
                                    h += "\n    ";
                                    var W;
                                    f = 348, g = 34, W = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["image_thumbnail_url"]), c.set("thumbnail_src", W, !0), c.parent || (b.setVariable("thumbnail_src", W), b.addExport("thumbnail_src")), h += "\n    ";
                                    var X;
                                    f = 349, g = 28, X = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["title"]), c.set("title", X, !0), c.parent || (b.setVariable("title", X), b.addExport("title")), h += "\n    ";
                                    var Y;
                                    if (f = 350, g = 31, Y = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["subtitle"]), c.set("subtitle", Y, !0), c.parent || (b.setVariable("subtitle", Y), b.addExport("subtitle")), h += '\n\n    <div class="followButtonWrapper">\n        ', f = 353, g = 23, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["show_follow_button", !1])) {
                                        h += "\n            ";
                                        var Z;
                                        Z = d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "user", a.autoesc), "id", a.autoesc) == (f = 354, g = 76, d.callWrap(d.memberLookup((f = 354, g = 59, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["owner", {}
                                        ])), "get", a.autoesc), 'the return value of (board["get"])["get"]', ["id"])), c.set("is_my_board", Z, !0), c.parent || (b.setVariable("is_my_board", Z), b.addExport("is_my_board")), h += "\n            ", h += d.suppressValue((f = 355, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["BoardFollowButton", d.makeKeywordArgs({
                                            options: {
                                                followed: d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "followed_by_me", a.autoesc),
                                                board_id: d.contextOrFrameLookup(b, c, "board_id"),
                                                is_my_board: d.contextOrFrameLookup(b, c, "is_my_board"),
                                                user_id: (f = 360, g = 40, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "owner"), "get", a.autoesc), 'owner["get"]', ["id"])),
                                                log_element_type: d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "BOARD_FOLLOW", a.autoesc)
                                            }
                                        })])), a.autoesc), h += "\n        "
                                    }
                                    h += "\n    </div>\n\n    ";
                                    var $;
                                    $ = a.getFilter("named_format").call(b, (f = 367, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["More from {{ board }}"])), {
                                        board: d.contextOrFrameLookup(b, c, "subtitle")
                                    }), c.set("title_text", $, !0), c.parent || (b.setVariable("title_text", $), b.addExport("title_text")), h += '\n    <a href="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "board_url"), a.autoesc), h += '" class="boardLink"\n            data-element-type="', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "PIN_BOARD", a.autoesc), a.autoesc), h += '"\n            title="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "title_text"), a.autoesc), h += '">\n        <span class="thumbImageWrapper">\n            ', h += d.suppressValue((f = 372, g = 22, d.callWrap(k, "image_tag", [d.makeKeywordArgs({
                                        src: d.contextOrFrameLookup(b, c, "thumbnail_src"),
                                        class_name: "boardThumbnail",
                                        alt: d.contextOrFrameLookup(b, c, "subtitle")
                                    })])), a.autoesc), h += '\n        </span>\n        <h3 class="boardRepTitle">', h += d.suppressValue(d.contextOrFrameLookup(b, c, "title"), a.autoesc), h += '</h3>\n        <h4 class="boardRepSubtitle">', h += d.suppressValue(d.contextOrFrameLookup(b, c, "subtitle"), a.autoesc), h += "</h4>\n    </a>\n"
                                } else if ("follow_view" == d.contextOrFrameLookup(b, c, "view_type")) {
                                    h += "\n    ", h += d.suppressValue((f = 382, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["small"])), a.autoesc), h += "\n\n    ";
                                    var _;
                                    f = 384, g = 34, _ = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["image_thumbnail_url"]), c.set("thumbnail_src", _, !0), c.parent || (b.setVariable("thumbnail_src", _), b.addExport("thumbnail_src")), h += "\n    ";
                                    var ab;
                                    f = 385, g = 31, ab = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["name"]), c.set("board_name", ab, !0), c.parent || (b.setVariable("board_name", ab), b.addExport("board_name")), h += '\n\n    <div class="content">\n        <a href="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "board_url"), a.autoesc), h += '">\n            ', h += d.suppressValue((f = 389, g = 22, d.callWrap(k, "image_tag", [d.makeKeywordArgs({
                                        src: d.contextOrFrameLookup(b, c, "thumbnail_src"),
                                        class_name: "boardFollowImg"
                                    })])), a.autoesc), h += '\n        </a>\n\n        <div class="followBoardItem">\n            <div class="followBoardName">\n                <a href="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "board_url"), a.autoesc), h += '">', h += d.suppressValue(d.contextOrFrameLookup(b, c, "board_name"), a.autoesc), h += "</a>\n            </div>\n            ", h += d.suppressValue((f = 399, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["BoardFollowButton", d.makeKeywordArgs({
                                        options: {
                                            followed: d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "followed_by_me", a.autoesc),
                                            borderless: !0,
                                            log_element_type: d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "BOARD_FOLLOW", a.autoesc),
                                            board_id: d.contextOrFrameLookup(b, c, "board_id"),
                                            user_id: (f = 405, g = 40, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "owner"), "get", a.autoesc), 'owner["get"]', ["id"]))
                                        }
                                    })])), a.autoesc), h += '\n        </div>\n        <i class="dismiss"></i>\n    </div>\n    <div class="followConfirmation">\n        You are now following board.\n    </div>\n'
                                }
                                h += "\n\n\n\n", e(null, h)
                            })
                        })
                    })
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/BoardFollowButton/BoardFollowButton.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n";
                var i;
                f = 10, g = 30, i = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["follow_text", (f = 10, g = 47, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Follow", "board"]))]), c.set("follow_text", i, !0), c.parent || (b.setVariable("follow_text", i), b.addExport("follow_text")), h += "\n";
                var j;
                f = 11, g = 32, j = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["unfollow_text", (f = 11, g = 51, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Unfollow", "board"]))]), c.set("unfollow_text", j, !0), c.parent || (b.setVariable("unfollow_text", j), b.addExport("unfollow_text")), h += "\n";
                var k;
                f = 12, g = 31, k = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["follow_class", "default"]), c.set("follow_class", k, !0), c.parent || (b.setVariable("follow_class", k), b.addExport("follow_class")), h += "\n\n\n", h += "\n", h += d.suppressValue((f = 16, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "describe"), "describe", [d.makeKeywordArgs({
                    follow_text: d.contextOrFrameLookup(b, c, "follow_text"),
                    unfollow_text: d.contextOrFrameLookup(b, c, "unfollow_text"),
                    is_my_board: (f = 19, g = 31, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["is_my_board"])),
                    follow_class: d.contextOrFrameLookup(b, c, "follow_class"),
                    follow_ga_category: "board_follow",
                    unfollow_ga_category: "board_unfollow"
                })])), a.autoesc), h += "\n\n";
                var l;
                l = "dim", c.set("color", l, !0), c.parent || (b.setVariable("color", l), b.addExport("color")), h += "\n";
                var m;
                m=!1, c.set("disabled", m, !0), c.parent || (b.setVariable("disabled", m), b.addExport("disabled")), h += "\n";
                var n;
                n = d.contextOrFrameLookup(b, c, "unfollow_text"), c.set("button_text", n, !0), c.parent || (b.setVariable("button_text", n), b.addExport("button_text")), h += "\n";
                var o;
                if (f = 28, g = 30, o = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["is_my_board"]), c.set("is_my_board", o, !0), c.parent || (b.setVariable("is_my_board", o), b.addExport("is_my_board")), h += "\n\n", f = 30, g = 19, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["followed"]) || d.contextOrFrameLookup(b, c, "is_my_board")) {
                    if (d.contextOrFrameLookup(b, c, "is_my_board")) {
                        h += "\n    ";
                        var p;
                        f = 34, g = 24, p = d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Your board"]), c.set("button_text", p, !0), c.parent || (b.setVariable("button_text", p), b.addExport("button_text")), h += "\n    ";
                        var q;
                        q=!0, c.set("disabled", q, !0), c.parent || (b.setVariable("disabled", q), b.addExport("disabled")), h += "\n"
                    }
                } else {
                    h += "\n    ";
                    var r;
                    r = d.contextOrFrameLookup(b, c, "follow_class"), c.set("color", r, !0), c.parent || (b.setVariable("color", r), b.addExport("color")), h += "\n    ";
                    var s;
                    s = d.contextOrFrameLookup(b, c, "follow_text"), c.set("button_text", s, !0), c.parent || (b.setVariable("button_text", s), b.addExport("button_text")), h += "\n"
                }
                h += "\n\n", h += d.suppressValue((f = 38, g = 1, d.callWrap(d.contextOrFrameLookup(b, c, "describe"), "describe", [{
                    text: d.contextOrFrameLookup(b, c, "button_text"),
                    color: d.contextOrFrameLookup(b, c, "color"),
                    disabled: d.contextOrFrameLookup(b, c, "disabled")
                }
                ])), a.autoesc), h += d.suppressValue((f = 38, g = 1, d.callWrap(d.contextOrFrameLookup(b, c, "base"), "base", ["ui.FollowButton"])), a.autoesc), a.getTemplate("app/common/modules/ui/FollowButton/FollowButton.nunjucks", !0, function(f, g) {
                    if (f)
                        return void e(f);
                    for (var i in g.blocks)
                        b.addBlock(i, g.blocks[i]);
                    h += "\n", g.rootRenderFunc(a, b, c, d, e)
                })
            } catch (t) {
                e(d.handleError(t, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/BoardFollowSuccessToast/BoardFollowSuccessToast.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n";
                var i;
                i = d.contextOrFrameLookup(b, c, "data"), c.set("suggested_board", i, !0), c.parent || (b.setVariable("suggested_board", i), b.addExport("suggested_board")), h += "\n";
                var j;
                j = {}, c.set("local_options", j, !0), c.parent || (b.setVariable("local_options", j), b.addExport("local_options")), h += "\n";
                var k;
                if (f = 6, g = 24, k = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "local_options"), "update", a.autoesc), 'local_options["update"]', [{
                    show_title_button: !1
                }
                ]), c.set("_temp_do", k, !0), c.parent || b.setVariable("_temp_do", k), h += "\n", d.contextOrFrameLookup(b, c, "suggested_board")) {
                    h += "\n    ";
                    var l;
                    f = 8, g = 28, l = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "local_options"), "update", a.autoesc), 'local_options["update"]', [{
                        image_url: (f = 9, g = 40, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "suggested_board"), "get", a.autoesc), 'suggested_board["get"]', ["image_thumbnail_url"])),
                        action_button_url: (f = 10, g = 48, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "suggested_board"), "get", a.autoesc), 'suggested_board["get"]', ["url"]))
                    }
                    ]), c.set("_temp_do", l, !0), c.parent || b.setVariable("_temp_do", l), h += "\n"
                } else {
                    h += "\n    ";
                    var m;
                    f = 13, g = 28, m = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "local_options"), "update", a.autoesc), 'local_options["update"]', [{
                        show_action: !1
                    }
                    ]), c.set("_temp_do", m, !0), c.parent || b.setVariable("_temp_do", m), h += "\n"
                }
                h += "\n\n", h += d.suppressValue((f = 16, g = 1, d.callWrap(d.contextOrFrameLookup(b, c, "describe"), "describe", [d.contextOrFrameLookup(b, c, "local_options")])), a.autoesc), h += d.suppressValue((f = 16, g = 1, d.callWrap(d.contextOrFrameLookup(b, c, "base"), "base", ["ToastBase"])), a.autoesc), a.getTemplate("app/common/modules/ToastBase/ToastBase.nunjucks", !0, function(f, g) {
                    if (f)
                        return void e(f);
                    for (var i in g.blocks)
                        b.addBlock(i, g.blocks[i]);
                    h += "\n\n", h += "\n\n", h += "\n\n\n", d.contextOrFrameLookup(b, c, "suggested_board") && (h += "\n    ", h += "\n"), h += "\n", g.rootRenderFunc(a, b, c, d, e)
                })
            } catch (n) {
                e(d.handleError(n, f, g))
            }
        }
        function b(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += d.suppressValue((f = 18, g = 20, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Board followed!"])), a.autoesc), e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function c(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "You might also like", e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function d(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n        ";
                var i;
                i = a.getFilter("escape").call(b, (f = 25, g = 55, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "suggested_board"), "get", a.autoesc), 'suggested_board["get"]', ["name"]))), c.set("suggested_board_name", i, !0), c.parent || (b.setVariable("suggested_board_name", i), b.addExport("suggested_board_name")), h += "\n        ";
                var j;
                f = 26, g = 56, j = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "suggested_board"), "get", a.autoesc), 'suggested_board["get"]', ["owner"]), c.set("suggested_board_owner", j, !0), c.parent || (b.setVariable("suggested_board_owner", j), b.addExport("suggested_board_owner")), h += "\n        ";
                var k;
                f = 27, g = 67, k = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "suggested_board_owner"), "get", a.autoesc), 'suggested_board_owner["get"]', ["full_name"]), c.set("suggested_board_owner_name", k, !0), c.parent || (b.setVariable("suggested_board_owner_name", k), b.addExport("suggested_board_owner_name")), h += "\n        ";
                var l;
                f = 28, g = 71, l = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "suggested_board_owner"), "get", a.autoesc), 'suggested_board_owner["get"]', ["username"]), c.set("suggested_board_owner_username", l, !0), c.parent || (b.setVariable("suggested_board_owner_username", l), b.addExport("suggested_board_owner_username")), h += "\n        ";
                var m;
                f = 29, g = 54, m = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "suggested_board"), "get", a.autoesc), 'suggested_board["get"]', ["url"]), c.set("suggested_board_url", m, !0), c.parent || (b.setVariable("suggested_board_url", m), b.addExport("suggested_board_url")), h += "\n        ";
                var n = d.makeMacro([], [], function(e) {
                    c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                    var h, i = "";
                    return h = {
                        board_name: d.contextOrFrameLookup(b, c, "suggested_board_name"),
                        suggested_board_url: d.contextOrFrameLookup(b, c, "suggested_board_url"),
                        suggested_board_name: d.contextOrFrameLookup(b, c, "suggested_board_name"),
                        suggested_board_owner_username: d.contextOrFrameLookup(b, c, "suggested_board_owner_username"),
                        suggested_board_owner_name: d.contextOrFrameLookup(b, c, "suggested_board_owner_name")
                    }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 30, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 30, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ['<a href="{{ suggested_board_url }}">{{ suggested_board_name }}</a> by <a href="/{{ suggested_board_owner_username }}/">{{ suggested_board_owner_name }}'])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                });
                b.setVariable("_doTranslation", n), h += d.suppressValue((f = 30, g = 9, d.callWrap(n, "_doTranslation", [])), a.autoesc), h += "\n    ", e(null, h)
            } catch (o) {
                e(d.handleError(o, f, g))
            }
        }
        return {
            b_title_text: b,
            b_action_title_text: c,
            b_action_detail_text: d,
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/BoardIcons/BoardIcons.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                var i;
                i = d.contextOrFrameLookup(b, c, "data"), c.set("board", i, !0), c.parent || (b.setVariable("board", i), b.addExport("board")), h += "\n";
                var j;
                j = d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "is_collaborative", a.autoesc), c.set("is_collaborative", j, !0), c.parent || (b.setVariable("is_collaborative", j), b.addExport("is_collaborative")), h += "\n";
                var k;
                k = "places" == d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "layout", a.autoesc), c.set("is_place", k, !0), c.parent || (b.setVariable("is_place", k), b.addExport("is_place")), h += "\n";
                var l;
                l = "secret" == d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "privacy", a.autoesc), c.set("is_secret", l, !0), c.parent || (b.setVariable("is_secret", l), b.addExport("is_secret")), h += "\n\n", d.contextOrFrameLookup(b, c, "is_place") && (h += '\n    <span class="placeIcon"></span>\n'), h += "\n", d.contextOrFrameLookup(b, c, "is_secret") && (h += '\n    <span class="secretIcon"></span>\n'), h += "\n", d.contextOrFrameLookup(b, c, "is_collaborative") && (h += '\n    <span class="collaborativeIcon"></span>\n'), h += "\n", e(null, h)
            } catch (m) {
                e(d.handleError(m, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/BoardInviteBase/BoardInviteBase.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n", a.getTemplate("templates/macros/link.nunjucks", function(i, j) {
                    return i ? void e(i) : void j.getExported(function(i, j) {
                        if (i)
                            return void e(i);
                        if (!j.hasOwnProperty("link_markup"))
                            return void e(new Error("cannot import 'link_markup'"));
                        var k = j.link_markup;
                        b.setVariable("link_markup", k), h += "\n\n";
                        var l;
                        f = 17, g = 28, l = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["view_type", "boardEdit"]), c.set("view_type", l, !0), c.parent || (b.setVariable("view_type", l), b.addExport("view_type")), h += "\n\n";
                        var m = d.makeMacro(["options"], [], function(e, h) {
                            c = c.push(), h = h || {}, h.hasOwnProperty("caller") && c.set("caller", h.caller), c.set("options", e);
                            var i = "";
                            return i += '\n    <div class="invitee">\n        <div class="thumbImageWrapper">\n            ', d.memberLookup(e, "image", a.autoesc) ? (i += '\n                <img src="', i += d.suppressValue(d.memberLookup(e, "image", a.autoesc), a.autoesc), i += '">\n            ') : i += '\n                <div class="inviteeIcon"></div>\n            ', i += '\n        </div>\n        <h4 class="inviteeName">', i += d.suppressValue(d.memberLookup(e, "name", a.autoesc), a.autoesc), i += '</h4>\n        <div class="inviteTypeWrapper">\n            <div class="inviteTypeIcon ', i += d.suppressValue(d.memberLookup(e, "class", a.autoesc), a.autoesc), i += '"></div>\n            ', i += '\n            <div class="inviteTypeName">', i += d.suppressValue((f = 32, g = 42, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", [d.memberLookup(e, "type", a.autoesc)])), a.autoesc), i += "</div>\n        </div>\n    </div>\n", c = c.pop(), new d.SafeString(i)
                        });
                        if (b.addExport("invite_type_footer"), b.setVariable("invite_type_footer", m), h += "\n\n", "email" == d.contextOrFrameLookup(b, c, "view_type")) {
                            h += "\n    ", h += d.suppressValue((f = 38, g = 11, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                                id: "removeButton",
                                options: {
                                    type: "button",
                                    text: (f = 42, g = 21, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Remove"])),
                                    class_name: "remove",
                                    ga_category: "collaborator_delete_invite"
                                }
                            })])), a.autoesc), h += "\n    ";
                            var n;
                            f = 47, g = 28, n = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["identifier"]), c.set("email", n, !0), c.parent || (b.setVariable("email", n), b.addExport("email")), h += "\n    ", h += d.suppressValue((f = 48, g = 23, d.callWrap(m, "invite_type_footer", [{
                                name: d.contextOrFrameLookup(b, c, "email"),
                                "class": "isEmail",
                                type: "Email"
                            }
                            ])), a.autoesc), h += "\n\n"
                        } else if ("facebook" == d.contextOrFrameLookup(b, c, "view_type")) {
                            h += "\n    ", h += d.suppressValue((f = 55, g = 11, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                                id: "removeButton",
                                options: {
                                    type: "button",
                                    text: (f = 59, g = 21, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Remove"])),
                                    class_name: "remove",
                                    ga_category: "collaborator_delete_invite"
                                }
                            })])), a.autoesc), h += "\n    ";
                            var o;
                            f = 64, g = 27, o = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["name"]), c.set("name", o, !0), c.parent || (b.setVariable("name", o), b.addExport("name")), h += "\n    ";
                            var p;
                            f = 65, g = 32, p = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["image"]), c.set("image_url", p, !0), c.parent || (b.setVariable("image_url", p), b.addExport("image_url")), h += "\n    ", h += d.suppressValue((f = 66, g = 23, d.callWrap(m, "invite_type_footer", [{
                                image: d.contextOrFrameLookup(b, c, "image_url"),
                                name: d.contextOrFrameLookup(b, c, "name"),
                                "class": "isFacebook",
                                type: "Facebook"
                            }
                            ])), a.autoesc), h += "\n\n"
                        } else if (d.contextOrFrameLookup(b, c, "data")) {
                            if (h += "\n\n    ", "boardCreate" == d.contextOrFrameLookup(b, c, "view_type")) {
                                h += "\n        ";
                                var q;
                                q = d.contextOrFrameLookup(b, c, "data"), c.set("invited_user", q, !0), c.parent || (b.setVariable("invited_user", q), b.addExport("invited_user")), h += "\n    "
                            } else {
                                h += "\n        ";
                                var r;
                                r = d.contextOrFrameLookup(b, c, "data"), c.set("invite", r, !0), c.parent || (b.setVariable("invite", r), b.addExport("invite")), h += "\n        ";
                                var s;
                                f = 79, g = 41, s = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "invite"), "get", a.autoesc), 'invite["get"]', ["invited_by_user"]), c.set("invited_by_user", s, !0), c.parent || (b.setVariable("invited_by_user", s), b.addExport("invited_by_user")), h += "\n        ";
                                var t;
                                f = 80, g = 38, t = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "invite"), "get", a.autoesc), 'invite["get"]', ["invited_user"]), c.set("invited_user", t, !0), c.parent || (b.setVariable("invited_user", t), b.addExport("invited_user")), h += "\n        ";
                                var u;
                                f = 81, g = 60, u = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "invited_user"), "get", a.autoesc), 'invited_user["get"]', ["id"]) == d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "user", a.autoesc), "id", a.autoesc), c.set("current_user_is_invited_user", u, !0), c.parent || (b.setVariable("current_user_is_invited_user", u), b.addExport("current_user_is_invited_user")), h += "\n        ";
                                var v;
                                f = 82, g = 44, v = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "invited_by_user"), "get", a.autoesc), 'invited_by_user["get"]', ["full_name"]), c.set("full_name", v, !0), c.parent || (b.setVariable("full_name", v), b.addExport("full_name")), h += "\n        ";
                                var w;
                                f = 83, g = 59, w = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "invited_by_user"), "get", a.autoesc), 'invited_by_user["get"]', ["username"]), c.set("invited_by_user_username", w, !0), c.parent || (b.setVariable("invited_by_user_username", w), b.addExport("invited_by_user_username")), h += "\n        ";
                                var x;
                                x = "/" + d.contextOrFrameLookup(b, c, "invited_by_user_username") + "/", c.set("invited_by_user_url", x, !0), c.parent || (b.setVariable("invited_by_user_url", x), b.addExport("invited_by_user_url")), h += "\n    "
                            }
                            if (h += "\n\n    ", h += d.suppressValue((f = 87, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", [d.contextOrFrameLookup(b, c, "view_type")])), a.autoesc), h += "\n    ", h += d.suppressValue((f = 88, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "include_data"), "include_data", ["board"])), a.autoesc), h += "\n\n    ", h += d.suppressValue((f = 90, g = 15, d.callWrap(d.contextOrFrameLookup(b, c, "extra_data"), "extra_data", [{
                                currentUserIsInvitedUser: d.contextOrFrameLookup(b, c, "current_user_is_invited_user"),
                                invitedUserFullName: (f = 92, g = 47, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "invited_user"), "get", a.autoesc), 'invited_user["get"]', ["full_name"]))
                            }
                            ])), a.autoesc), h += "\n\n    ", "boardCreate" == d.contextOrFrameLookup(b, c, "view_type"))
                                h += "\n        ", h += d.suppressValue((f = 96, g = 15, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                                    id: "removeButton",
                                    options: {
                                        type: "button",
                                        text: (f = 100, g = 25, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Remove"])),
                                        class_name: "remove",
                                        ga_category: "collaborator_delete_invite"
                                    }
                                })])), a.autoesc), h += "\n        ", h += d.suppressValue((f = 104, g = 15, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["User", d.makeKeywordArgs({
                                    options: {
                                        view_type: "thumb",
                                        size: "small",
                                        show_follow_button: !1,
                                        dim: !1,
                                        is_invite: !0
                                    },
                                    data: d.contextOrFrameLookup(b, c, "invited_user")
                                })])), a.autoesc), h += "\n\n    ";
                            else if ("boardEdit" == d.contextOrFrameLookup(b, c, "view_type")) {
                                h += "\n        ";
                                var y;
                                f = 116, g = 39, y = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "invite"), "get", a.autoesc), 'invite["get"]', ["status"]), c.set("invite_status", y, !0), c.parent || (b.setVariable("invite_status", y), b.addExport("invite_status")), h += "\n        ";
                                var z;
                                f = 117, g = 39, z = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "invite"), "get", a.autoesc), 'invite["get"]', ["access"]), c.set("invite_access", z, !0), c.parent || (b.setVariable("invite_access", z), b.addExport("invite_access")), h += "\n\n        ";
                                var A;
                                A = "accepted" == d.contextOrFrameLookup(b, c, "invite_status"), c.set("accepted", A, !0), c.parent || (b.setVariable("accepted", A), b.addExport("accepted")), h += "\n        ";
                                var B;
                                if (f = 120, g = 58, B = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "invited_by_user"), "get", a.autoesc), 'invited_by_user["get"]', ["id"]) == d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "user", a.autoesc), "id", a.autoesc), c.set("invited_by_current_user", B, !0), c.parent || (b.setVariable("invited_by_current_user", B), b.addExport("invited_by_current_user")), h += "\n\n        ", h += d.suppressValue((f = 122, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "extra_data"), "extra_data", [{
                                    invitedUserId: (f = 123, g = 45, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "invited_user"), "get", a.autoesc), 'invited_user["get"]', ["id"])),
                                    accepted: d.contextOrFrameLookup(b, c, "accepted")
                                }
                                ])), a.autoesc), h += "\n\n        ", a.getFilter("contains").call(b, d.contextOrFrameLookup(b, c, "invite_access"), "approve") && a.getFilter("contains").call(b, d.contextOrFrameLookup(b, c, "invite_access"), "delete"))
                                    h += "\n            ", h += d.suppressValue((f = 128, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                                        id: "removeButton",
                                        options: {
                                            type: "button",
                                            text: (f = 132, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Remove"])),
                                            class_name: "remove",
                                            ga_category: "collaborator_pending_invite_remove"
                                        }
                                    })])), a.autoesc), h += "\n            ", h += d.suppressValue((f = 136, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                                        id: "approveButton",
                                        options: {
                                            type: "button",
                                            text: (f = 140, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Approve"])),
                                            class_name: "approve",
                                            ga_category: "collaborator_pending_invite_approve"
                                        }
                                    })])), a.autoesc), h += "\n        ";
                                else if (a.getFilter("contains").call(b, d.contextOrFrameLookup(b, c, "invite_access"), "delete")) {
                                    if (h += "\n            ", d.contextOrFrameLookup(b, c, "current_user_is_invited_user")) {
                                        h += "\n                ";
                                        var C;
                                        f = 146, g = 29, C = d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Leave"]), c.set("text", C, !0), c.parent || (b.setVariable("text", C), b.addExport("text")), h += "\n                ";
                                        var D;
                                        D = "collaborator_decline_invite", c.set("ga_category", D, !0), c.parent || (b.setVariable("ga_category", D), b.addExport("ga_category")), h += "\n            "
                                    } else {
                                        h += "\n                ";
                                        var E;
                                        f = 149, g = 29, E = d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Remove"]), c.set("text", E, !0), c.parent || (b.setVariable("text", E), b.addExport("text")), h += "\n                ", h += d.suppressValue((f = 150, g = 27, d.callWrap(d.contextOrFrameLookup(b, c, "extra_data"), "extra_data", [{
                                            invitedUserFirstName: (f = 151, g = 60, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "invited_user"), "get", a.autoesc), 'invited_user["get"]', ["first_name"])),
                                            has_delete_permission: !0
                                        }
                                        ])), a.autoesc), h += "\n                ";
                                        var F;
                                        F = "collaborator_delete_invite", c.set("ga_category", F, !0), c.parent || (b.setVariable("ga_category", F), b.addExport("ga_category")), h += "\n            "
                                    }
                                    h += "\n            ", h += d.suppressValue((f = 156, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                                        id: "removeButton",
                                        options: {
                                            type: "button",
                                            text: d.contextOrFrameLookup(b, c, "text"),
                                            class_name: "remove",
                                            ga_category: d.contextOrFrameLookup(b, c, "ga_category")
                                        }
                                    })])), a.autoesc), h += "\n        "
                                }
                                h += "\n\n        ";
                                var G;
                                if (G = "", c.set("subtitle", G, !0), c.parent || (b.setVariable("subtitle", G), b.addExport("subtitle")), h += "\n        ", d.contextOrFrameLookup(b, c, "invited_by_current_user")) {
                                    h += "\n            ";
                                    var H;
                                    f = 169, g = 29, H = d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["invited by you"]), c.set("subtitle", H, !0), c.parent || (b.setVariable("subtitle", H), b.addExport("subtitle")), h += "\n        "
                                } else {
                                    h += "\n            ";
                                    var I;
                                    I = a.getFilter("named_format").call(b, (f = 171, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["invited by {{ user_full_name }}"])), {
                                        user_full_name: d.contextOrFrameLookup(b, c, "full_name")
                                    }), c.set("subtitle", I, !0), c.parent || (b.setVariable("subtitle", I), b.addExport("subtitle")), h += "\n        "
                                }
                                h += "\n\n        ";
                                var J;
                                J=!d.contextOrFrameLookup(b, c, "accepted"), c.set("dim", J, !0), c.parent || (b.setVariable("dim", J), b.addExport("dim")), h += "\n        ", h += d.suppressValue((f = 175, g = 15, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["User", d.makeKeywordArgs({
                                    options: {
                                        view_type: "thumb",
                                        size: (f = 178, g = 35, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["size", "small"])),
                                        subtitle_text: d.contextOrFrameLookup(b, c, "subtitle"),
                                        show_follow_button: !1,
                                        dim: d.contextOrFrameLookup(b, c, "dim")
                                    },
                                    data: d.contextOrFrameLookup(b, c, "invited_user"),
                                    resource: (f = 184, g = 36, d.callWrap(d.contextOrFrameLookup(b, c, "create_resource"), "create_resource", ["UserResource", d.makeKeywordArgs({
                                        options: {
                                            username: (f = 186, g = 48, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "invited_user"), "get", a.autoesc), 'invited_user["get"]', ["username"]))
                                        }
                                    })]))
                                })])), a.autoesc), h += "\n\n    "
                            } else if ("news" == d.contextOrFrameLookup(b, c, "view_type")) {
                                h += "\n\n        ";
                                var K;
                                f = 193, g = 31, K = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "invite"), "get", a.autoesc), 'invite["get"]', ["board"]), c.set("board", K, !0), c.parent || (b.setVariable("board", K), b.addExport("board")), h += '\n\n        <div class="pending">\n            ';
                                var L;
                                f = 196, g = 39, L = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["name", "?"]), c.set("board_name", L, !0), c.parent || (b.setVariable("board_name", L), b.addExport("board_name")), h += "\n            ";
                                var M;
                                f = 197, g = 38, M = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["url"]), c.set("board_url", M, !0), c.parent || (b.setVariable("board_url", M), b.addExport("board_url")), h += "\n            ";
                                var N;
                                f = 198, g = 59, N = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "invited_by_user"), "get", a.autoesc), 'invited_by_user["get"]', ["full_name", "?"]), c.set("invited_by_user_name", N, !0), c.parent || (b.setVariable("invited_by_user_name", N), b.addExport("invited_by_user_name")), h += "\n\n            ", h += d.suppressValue((f = 200, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["User", d.makeKeywordArgs({
                                    options: {
                                        view_type: "thumb",
                                        show_name: !1,
                                        size: "notification",
                                        show_follow_button: !1
                                    },
                                    data: d.contextOrFrameLookup(b, c, "invited_by_user"),
                                    resource: (f = 208, g = 40, d.callWrap(d.contextOrFrameLookup(b, c, "create_resource"), "create_resource", ["UserResource", d.makeKeywordArgs({
                                        options: {
                                            user_id: d.memberLookup(d.contextOrFrameLookup(b, c, "invited_by_user"), "id", a.autoesc)
                                        }
                                    })]))
                                })])), a.autoesc), h += '\n\n            <div class="actions">\n                ', h += d.suppressValue((f = 216, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                                    id: "removeButton",
                                    options: {
                                        class_name: "remove",
                                        text: (f = 220, g = 33, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Ignore"]))
                                    }
                                })])), a.autoesc), h += "\n                ", h += d.suppressValue((f = 223, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                                    id: "acceptButton",
                                    options: {
                                        class_name: "accept",
                                        text: (f = 227, g = 33, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Accept"])),
                                        color: "primary"
                                    }
                                })])), a.autoesc), h += '\n            </div>\n\n            <p class="description">\n                ';
                                var O = d.makeMacro([], [], function(e) {
                                    c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                                    var h, i = "";
                                    return h = {
                                        inviter_name: (f = 234, g = 47, d.callWrap(k, "link_markup", [d.contextOrFrameLookup(b, c, "invited_by_user_url"), d.contextOrFrameLookup(b, c, "invited_by_user_name")])),
                                        board_name: (f = 235, g = 42, d.callWrap(k, "link_markup", [d.contextOrFrameLookup(b, c, "board_url"), d.contextOrFrameLookup(b, c, "board_name")]))
                                    }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 234, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 234, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["{{ inviter_name }} invited you to add Pins to {{ board_name }}"])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                                });
                                b.setVariable("_doTranslation", O), h += d.suppressValue((f = 234, g = 17, d.callWrap(O, "_doTranslation", [])), a.autoesc), h += "\n                ", "secret" == (f = 238, g = 29, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["privacy"])) && (h += '\n                    <span class="secretIconInline">', h += d.suppressValue((f = 239, g = 53, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Secret Board"])), a.autoesc), h += "</span>\n                "), h += '\n            </p>\n        </div>\n        <div class="success">\n            <div class="description">\n                ';
                                var P = d.makeMacro([], [], function(e) {
                                    c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                                    var h, i = "";
                                    return h = {
                                        board_name: (f = 245, g = 45, d.callWrap(k, "link_markup", [d.contextOrFrameLookup(b, c, "board_url"), d.contextOrFrameLookup(b, c, "board_name")]))
                                    }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 245, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 245, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["You can now add Pins to {{ board_name }}"])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                                });
                                b.setVariable("_doTranslation", P), h += d.suppressValue((f = 245, g = 17, d.callWrap(P, "_doTranslation", [])), a.autoesc), h += "\n            </div>\n        </div>\n    "
                            } else if ("boardDetail" == d.contextOrFrameLookup(b, c, "view_type")) {
                                if (h += "\n        ", "new" == (f = 251, g = 22, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "invite"), "get", a.autoesc), 'invite["get"]', ["status"]))) {
                                    h += "\n            ", h += d.suppressValue((f = 252, g = 21, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["centeredWithinWrapper"])), a.autoesc), h += '\n\n            <div class="pending">\n                <div class="boardInviteContent">\n                    <img src="', h += d.suppressValue((f = 256, g = 50, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "invited_by_user"), "get", a.autoesc), 'invited_by_user["get"]', ["image_small_url"])), a.autoesc), h += '"\n                         alt="', h += d.suppressValue(a.getFilter("named_format").call(b, (f = 257, g = 32, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Profile image of {{ name }}"])), {
                                        name: d.contextOrFrameLookup(b, c, "full_name")
                                    }), a.autoesc), h += '" />\n                    ';
                                    var Q = d.makeMacro([], [], function(e) {
                                        c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                                        var h, i = "";
                                        return h = {
                                            username: (f = 258, g = 47, d.callWrap(k, "link_markup", [d.contextOrFrameLookup(b, c, "invited_by_user_url"), d.contextOrFrameLookup(b, c, "full_name")]))
                                        }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 258, g = 21, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 258, g = 21, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["{{ username }} invited you to add Pins to this board."])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                                    });
                                    b.setVariable("_doTranslation", Q), h += d.suppressValue((f = 258, g = 21, d.callWrap(Q, "_doTranslation", [])), a.autoesc), h += '\n                </div>\n                <div class="actions">\n                    ', h += d.suppressValue((f = 263, g = 27, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                                        id: "removeButton",
                                        options: {
                                            class_name: "remove",
                                            text: (f = 267, g = 37, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Ignore"]))
                                        }
                                    })])), a.autoesc), h += "\n                    ", h += d.suppressValue((f = 270, g = 27, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                                        id: "acceptButton",
                                        options: {
                                            class_name: "accept",
                                            text: (f = 274, g = 37, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Accept"])),
                                            color: "primary"
                                        }
                                    })])), a.autoesc), h += '\n                </div>\n            </div>\n            <div class="success">\n                <div class="description">\n                    ';
                                    var R = d.makeMacro([], [], function(e) {
                                        c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                                        var h, i = "";
                                        return h = {}, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 282, g = 21, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 282, g = 21, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["You can now add Pins to this board."])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                                    });
                                    b.setVariable("_doTranslation", R), h += d.suppressValue((f = 282, g = 21, d.callWrap(R, "_doTranslation", [])), a.autoesc), h += "\n                </div>\n            </div>\n        "
                                }
                                h += "\n    "
                            }
                            h += "\n"
                        }
                        h += "\n", e(null, h)
                    })
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/BoardLabel/BoardLabel.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n", a.getTemplate("templates/macros/image.nunjucks", function(i, j) {
                    return i ? void e(i) : void j.getExported(function(i, j) {
                        if (i)
                            return void e(i);
                        if (!j.hasOwnProperty("image_tag"))
                            return void e(new Error("cannot import 'image_tag'"));
                        var k = j.image_tag;
                        b.setVariable("image_tag", k), h += "\n\n";
                        var l;
                        f = 8, g = 28, l = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["view_type", "normal"]), c.set("view_type", l, !0), c.parent || (b.setVariable("view_type", l), b.addExport("view_type")), h += "\n", h += d.suppressValue((f = 9, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", [d.contextOrFrameLookup(b, c, "view_type")])), a.autoesc), h += "\n\n";
                        var m;
                        m = d.contextOrFrameLookup(b, c, "data"), c.set("board", m, !0), c.parent || (b.setVariable("board", m), b.addExport("board")), h += "\n\n";
                        var n;
                        f = 13, g = 32, n = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["image_cover_url"]), c.set("image_cover_url", n, !0), c.parent || (b.setVariable("image_cover_url", n), b.addExport("image_cover_url")), h += "\n<span class='boardImg' style='background-image:url(", h += d.suppressValue(d.contextOrFrameLookup(b, c, "image_cover_url"), a.autoesc), h += ')\'></span>\n\n<span class="nameAndIcons">\n    ', h += d.suppressValue((f = 17, g = 11, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["BoardIcons", d.makeKeywordArgs({
                            id: "boardIcons",
                            data: d.contextOrFrameLookup(b, c, "board")
                        })])), a.autoesc), h += "\n    ", h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "name", a.autoesc), a.autoesc), h += "\n</span>\n", e(null, h)
                    })
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/BoardPageBase/BoardPageBase.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n";
                var i;
                i = d.contextOrFrameLookup(b, c, "data"), c.set("board", i, !0), c.parent || (b.setVariable("board", i), b.addExport("board")), h += "\n\n";
                var j;
                f = 11, g = 22, j = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["tab", "pins"]), c.set("tab", j, !0), c.parent || (b.setVariable("tab", j), b.addExport("tab")), h += "\n";
                var k;
                f = 12, g = 22, k = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["owner"]), c.set("owner", k, !0), c.parent || (b.setVariable("owner", k), b.addExport("owner")), h += "\n";
                var l;
                l = a.getFilter("contains").call(b, (f = 13, g = 29, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["access", []])), "write"), c.set("is_own_board", l, !0), c.parent || (b.setVariable("is_own_board", l), b.addExport("is_own_board")), h += "\n", b.getBlock("data")(a, b, c, d, function(i, j) {
                    if (i)
                        return void e(i);
                    h += j, h += "\n";
                    var k;
                    f = 15, g = 26, k = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "set_page_title", a.autoesc), 'context["set_page_t"]', [(f = 15, g = 36, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["name"]))]), c.set("_temp_do", k, !0), c.parent || b.setVariable("_temp_do", k), h += "\n\n";
                    var l;
                    l = "places" == (f = 17, g = 31, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["layout"])), c.set("is_place_board", l, !0), c.parent || (b.setVariable("is_place_board", l), b.addExport("is_place_board")), h += "\n", d.contextOrFrameLookup(b, c, "is_place_board") && (h += "\n    ", h += d.suppressValue((f = 19, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["placesBoard"])), a.autoesc), h += "\n"), h += "\n\n";
                    var m = d.makeMacro(["user", "board_id"], [], function(e, h, i) {
                        c = c.push(), i = i || {}, i.hasOwnProperty("caller") && c.set("caller", i.caller), c.set("user", e), c.set("board_id", h);
                        var j = "";
                        return j += "\n    ", f = 23, g = 16, d.callWrap(d.memberLookup(e, "get", a.autoesc), 'user["get"]', ["id"]) && (j += "\n        ", j += d.suppressValue((f = 24, g = 15, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["BoardInvite", d.makeKeywordArgs({
                            id: "boardInvites",
                            options: {
                                view_type: "boardDetail"
                            },
                            resource: (f = 29, g = 36, d.callWrap(d.contextOrFrameLookup(b, c, "create_resource"), "create_resource", ["BoardInviteResource", d.makeKeywordArgs({
                                options: {
                                    field_set_key: "news",
                                    board_id: h,
                                    invited_user_id: d.memberLookup(e, "id", a.autoesc)
                                }
                            })])),
                            error_strategy: d.memberLookup(d.contextOrFrameLookup(b, c, "ErrorStrategy"), "REMOVE", a.autoesc)
                        })])), a.autoesc), j += "\n    "), j += "\n", c = c.pop(), new d.SafeString(j)
                    });
                    b.addExport("board_invite"), b.setVariable("board_invite", m), h += "\n\n", d.contextOrFrameLookup(b, c, "is_place_board") && (h += "\n    ", b.getBlock("map")(a, b, c, d, function(a, b) {
                        return a ? void e(a) : (h += b, void(h += "\n"))
                    })), h += "\n\n", h += "\n\n", b.getBlock("above_header")(a, b, c, d, function(i, j) {
                        return i ? void e(i) : (h += j, h += '\n\n\n<div class="addPinAnchor"></div>\n\n<div class="locationBoardContentWrapperBackground"></div>\n<div class="locationBoardPageContentWrapper">\n    <div class="transformWrapper">\n\n    ', h += d.suppressValue((f = 72, g = 17, d.callWrap(m, "board_invite", [d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "user", a.autoesc), (f = 72, g = 41, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["id"]))])), a.autoesc), h += "\n\n", void b.getBlock("header")(a, b, c, d, function(f, g) {
                            return f ? void e(f) : (h += g, h += "\n\n", void b.getBlock("grid_or_no_content")(a, b, c, d, function(a, b) {
                                return a ? void e(a) : (h += b, h += "\n    </div>\n</div>\n", void e(null, h))
                            }))
                        }))
                    })
                })
            } catch (m) {
                e(d.handleError(m, f, g))
            }
        }
        function b(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function c(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n        ", h += "\n        ", h += d.suppressValue((f = 45, g = 15, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Map", d.makeKeywordArgs({
                    id: "map",
                    options: {
                        map_id: (f = 48, g = 35, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["map_id", d.memberLookup(d.contextOrFrameLookup(b, c, "settings"), "MAPBOX_DEFAULT_MAP_ID", a.autoesc)])),
                        view_type: "board_page",
                        is_mobile: d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "django_request", a.autoesc), "is_mobile_agent", a.autoesc)
                    }
                })])), a.autoesc), h += "\n    ", e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function d(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n", e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function e(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n    ", h += d.suppressValue((f = 75, g = 11, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["BoardHeader", d.makeKeywordArgs({
                    id: "boardHeader",
                    options: d.contextOrFrameLookup(b, c, "options"),
                    error_strategy: d.memberLookup(d.contextOrFrameLookup(b, c, "ErrorStrategy"), "BUBBLE", a.autoesc),
                    data: d.contextOrFrameLookup(b, c, "data"),
                    resource: (f = 80, g = 32, d.callWrap(d.contextOrFrameLookup(b, c, "create_resource"), "create_resource", ["BoardResource", d.makeKeywordArgs({
                        options: {
                            board_id: (f = 81, g = 33, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["id"])),
                            field_set_key: "detailed"
                        }
                    })]))
                })])), a.autoesc), h += "\n", e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function f(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                if (h += "\n    ", d.contextOrFrameLookup(b, c, "is_own_board") || (f = 88, g = 33, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["pin_count"])))
                    h += "\n        ", h += d.suppressValue((f = 89, g = 15, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Grid", d.makeKeywordArgs({
                        id: "grid",
                        resource: d.contextOrFrameLookup(b, c, "resource"),
                        options: d.contextOrFrameLookup(b, c, "grid_options"),
                        error_strategy: d.memberLookup(d.contextOrFrameLookup(b, c, "ErrorStrategy"), "BUBBLE", a.autoesc)
                    })])), a.autoesc), h += "\n    ";
                else if (!d.contextOrFrameLookup(b, c, "use_places_layout")) {
                    if (h += '\n        <div class="boardNoContent boardNoPins">\n            ', d.contextOrFrameLookup(b, c, "owner")) {
                        h += "\n                <p>";
                        var i = d.makeMacro([], [], function(e) {
                            c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                            var h, i = "";
                            return h = {
                                first_name: (f = 97, g = 46, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "owner"), "get", a.autoesc), 'owner["get"]', ["first_name"]))
                            }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 97, g = 20, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 97, g = 20, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["{{ first_name }} hasn't pinned anything to this board yet."])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                        });
                        b.setVariable("_doTranslation", i), h += d.suppressValue((f = 97, g = 20, d.callWrap(i, "_doTranslation", [])), a.autoesc), h += "</p>\n            "
                    } else 
                        h += "\n                <p>", h += d.suppressValue((f = 101, g = 21, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["There are no pins on this board yet."])), a.autoesc), h += "</p>\n            ";
                    h += "\n            ", h += d.suppressValue((f = 103, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["NavigateButton", d.makeKeywordArgs({
                        options: {
                            text: (f = 105, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Find Boards Like This"])),
                            url: "/search/boards/?q=" + a.getFilter("urlencode").call(b, (f = 106, g = 59, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["name"])))
                        }
                    })])), a.autoesc), h += "\n        </div>\n    "
                }
                h += "\n", e(null, h)
            } catch (j) {
                e(d.handleError(j, f, g))
            }
        }
        return {
            b_data: b,
            b_map: c,
            b_above_header: d,
            b_header: e,
            b_grid_or_no_content: f,
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/BoardPicker/BoardPicker.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n";
                var i;
                f = 10, g = 63, i = d.callWrap(d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "experiments", a.autoesc), "in_experiment_groups", a.autoesc), 'context["experiment"]["in_experim"]', ["web_pin_create", ["enabled_separator", "employees-separator"]]), c.set("show_separators", i, !0), c.parent || (b.setVariable("show_separators", i), b.addExport("show_separators")), h += "\n\n";
                var j;
                f = 12, g = 28, j = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["view_type", "normal"]), c.set("view_type", j, !0), c.parent || (b.setVariable("view_type", j), b.addExport("view_type")), h += "\n\n", d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "in_popover", a.autoesc) && (h += "\n    ", h += d.suppressValue((f = 15, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["inPopover"])), a.autoesc), h += "\n"), h += "\n\n";
                var k;
                k = d.memberLookup(d.contextOrFrameLookup(b, c, "data"), "boards_shortlist", a.autoesc), c.set("boards_shortlist", k, !0), c.parent || (b.setVariable("boards_shortlist", k), b.addExport("boards_shortlist")), h += "\n";
                var l;
                l = d.memberLookup(d.contextOrFrameLookup(b, c, "data"), "all_boards", a.autoesc), c.set("all_boards", l, !0), c.parent || (b.setVariable("all_boards", l), b.addExport("all_boards")), h += "\n\n";
                var m;
                if (m = [], c.set("base_data", m, !0), c.parent || (b.setVariable("base_data", m), b.addExport("base_data")), h += "\n\n", a.getFilter("length").call(b, d.contextOrFrameLookup(b, c, "boards_shortlist")) > 0) {
                    if (h += "\n    ", "compact" != d.contextOrFrameLookup(b, c, "view_type") || d.contextOrFrameLookup(b, c, "show_separators"))
                        if ("pinCreate3" == d.contextOrFrameLookup(b, c, "view_type")) {
                            h += "\n        ";
                            var n;
                            n = d.contextOrFrameLookup(b, c, "none"), c.set("shortlist_section_name", n, !0), c.parent || (b.setVariable("shortlist_section_name", n), b.addExport("shortlist_section_name")), h += "\n    "
                        } else {
                            h += "\n        ";
                            var o;
                            f = 29, g = 39, o = d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Recently Picked"]), c.set("shortlist_section_name", o, !0), c.parent || (b.setVariable("shortlist_section_name", o), b.addExport("shortlist_section_name")), h += "\n    "
                        } else {
                        h += "\n        ";
                        var p;
                        p = d.contextOrFrameLookup(b, c, "none"), c.set("shortlist_section_name", p, !0), c.parent || (b.setVariable("shortlist_section_name", p), b.addExport("shortlist_section_name")), h += "\n    "
                    }
                    h += "\n    ";
                    var q;
                    if (q = {
                        name: d.contextOrFrameLookup(b, c, "shortlist_section_name"),
                        items: d.contextOrFrameLookup(b, c, "boards_shortlist")
                    }, c.set("section", q, !0), c.parent || (b.setVariable("section", q), b.addExport("section")), h += "\n    ", d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "show_recent_boards_class_name", a.autoesc)) {
                        h += "\n        ";
                        var r;
                        f = 36, g = 26, r = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "section"), "update", a.autoesc), 'section["update"]', [{
                            class_name: "recentBoards"
                        }
                        ]), c.set("_temp_do", r, !0), c.parent || b.setVariable("_temp_do", r), h += "\n    "
                    }
                    h += "\n    ";
                    var s;
                    f = 38, g = 24, s = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "base_data"), "append", a.autoesc), 'base_data["append"]', [d.contextOrFrameLookup(b, c, "section")]), c.set("_temp_do", s, !0), c.parent || b.setVariable("_temp_do", s), h += "\n"
                }
                if (h += "\n\n", a.getFilter("length").call(b, d.contextOrFrameLookup(b, c, "all_boards")) > 0) {
                    if (h += "\n    ", h += d.suppressValue((f = 42, g = 15, d.callWrap(d.contextOrFrameLookup(b, c, "extra_data"), "extra_data", [{
                        hasBoards: !0
                    }
                    ])), a.autoesc), h += "\n\n    ", "compact" != d.contextOrFrameLookup(b, c, "view_type") || d.contextOrFrameLookup(b, c, "show_separators"))
                        if ("pinCreate3" == d.contextOrFrameLookup(b, c, "view_type")) {
                            h += "\n        ";
                            var t;
                            t = a.getFilter("named_format").call(b, (f = 47, g = 40, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["All Boards ({{ board_count }})"])), {
                                board_count: a.getFilter("length").call(b, d.contextOrFrameLookup(b, c, "all_boards"))
                            }), c.set("all_boards_section_name", t, !0), c.parent || (b.setVariable("all_boards_section_name", t), b.addExport("all_boards_section_name")), h += "\n    "
                        } else {
                            h += "\n        ";
                            var u;
                            f = 49, g = 40, u = d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["All Boards"]), c.set("all_boards_section_name", u, !0), c.parent || (b.setVariable("all_boards_section_name", u), b.addExport("all_boards_section_name")), h += "\n    "
                        } else {
                        h += "\n        ";
                        var v;
                        v = d.contextOrFrameLookup(b, c, "none"), c.set("all_boards_section_name", v, !0), c.parent || (b.setVariable("all_boards_section_name", v), b.addExport("all_boards_section_name")), h += "\n    "
                    }
                    h += "\n    ";
                    var w;
                    if (w = {
                        name: d.contextOrFrameLookup(b, c, "all_boards_section_name"),
                        items: d.contextOrFrameLookup(b, c, "all_boards")
                    }, c.set("section", w, !0), c.parent || (b.setVariable("section", w), b.addExport("section")), h += "\n\n    ", d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "show_all_boards_class_name", a.autoesc)) {
                        h += "\n        ";
                        var x;
                        f = 57, g = 26, x = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "section"), "update", a.autoesc), 'section["update"]', [{
                            class_name: "allBoards"
                        }
                        ]), c.set("_temp_do", x, !0), c.parent || b.setVariable("_temp_do", x), h += "\n    "
                    }
                    h += "\n\n    ";
                    var y;
                    f = 60, g = 24, y = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "base_data"), "append", a.autoesc), 'base_data["append"]', [d.contextOrFrameLookup(b, c, "section")]), c.set("_temp_do", y, !0), c.parent || b.setVariable("_temp_do", y), h += "\n    ";
                    var z;
                    z = a.getFilter("length").call(b, d.contextOrFrameLookup(b, c, "base_data")) - 1, c.set("all_boards_section_index", z, !0), c.parent || (b.setVariable("all_boards_section_index", z), b.addExport("all_boards_section_index")), h += "\n"
                } else 
                    h += "\n    ", h += d.suppressValue((f = 63, g = 15, d.callWrap(d.contextOrFrameLookup(b, c, "extra_data"), "extra_data", [{
                        hasBoards: !1
                    }
                    ])), a.autoesc), h += "\n";
                h += "\n\n";
                var A;
                A = {
                    input_placeholder_text: (f = 67, g = 31, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Find or create a board"])),
                    item_module: {
                        name: "BoardLabel",
                        options: {
                            view_type: d.contextOrFrameLookup(b, c, "view_type")
                        }
                    }
                }, c.set("base_options", A, !0), c.parent || (b.setVariable("base_options", A), b.addExport("base_options")), h += "\n\n", h += "\n";
                var B;
                if (f = 78, g = 36, B = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["selected_board_id"]), c.set("selected_board_id", B, !0), c.parent || (b.setVariable("selected_board_id", B), b.addExport("selected_board_id")), h += "\n", d.contextOrFrameLookup(b, c, "selected_board_id")) {
                    h += "\n    ", c = c.push();
                    var C = d.contextOrFrameLookup(b, c, "all_boards");
                    if (C)
                        for (var D = C.length, E = 0; E < C.length; E++) {
                            var F = C[E];
                            if (c.set("board", F), c.set("loop.index", E + 1), c.set("loop.index0", E), c.set("loop.revindex", D - E), c.set("loop.revindex0", D - E - 1), c.set("loop.first", 0 === E), c.set("loop.last", E === D - 1), c.set("loop.length", D), h += "\n        ", f = 81, g = 21, d.callWrap(d.memberLookup(F, "get", a.autoesc), 'board["get"]', ["id"]) == d.contextOrFrameLookup(b, c, "selected_board_id")) {
                                h += "\n            ";
                                var G;
                                f = 82, g = 35, G = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "base_options"), "update", a.autoesc), 'base_options["update"]', [{
                                    selected_section_index: d.contextOrFrameLookup(b, c, "all_boards_section_index"),
                                    selected_item_index: d.memberLookup(d.contextOrFrameLookup(b, c, "loop"), "index0", a.autoesc)
                                }
                                ]), c.set("_temp_do", G, !0), c.parent || b.setVariable("_temp_do", G), h += "\n        "
                            }
                            h += "\n    "
                        }
                    c = c.pop(), h += "\n"
                }
                h += "\n\n";
                var H;
                if (H = 0 == a.getFilter("length").call(b, d.contextOrFrameLookup(b, c, "all_boards")), c.set("empty", H, !0), c.parent || (b.setVariable("empty", H), b.addExport("empty")), h += "\n", d.contextOrFrameLookup(b, c, "empty")) {
                    h += "\n    ";
                    var I;
                    f = 92, g = 27, I = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "base_options"), "update", a.autoesc), 'base_options["update"]', [{
                        create_suggestions: [(f = 94, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Places to Visit"])), (f = 95, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Stuff to Buy"])), (f = 96, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Projects to Try"])), (f = 97, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Things to Wear"])), (f = 98, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Recipes to Cook"])), (f = 99, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Ideas for the House"]))]
                    }
                    ]), c.set("_temp_do", I, !0), c.parent || b.setVariable("_temp_do", I), h += "\n"
                } else {
                    h += "\n    ";
                    var J;
                    f = 103, g = 27, J = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "base_options"), "update", a.autoesc), 'base_options["update"]', [{
                        create_suggestions: d.contextOrFrameLookup(b, c, "none")
                    }
                    ]), c.set("_temp_do", J, !0), c.parent || b.setVariable("_temp_do", J), h += "\n"
                }
                h += "\n\n";
                var K;
                K = d.contextOrFrameLookup(b, c, "base_data"), c.set("data", K, !0), c.parent || (b.setVariable("data", K), b.addExport("data")), h += "\n", h += d.suppressValue((f = 107, g = 1, d.callWrap(d.contextOrFrameLookup(b, c, "describe"), "describe", [d.contextOrFrameLookup(b, c, "base_options")])), a.autoesc), h += d.suppressValue((f = 107, g = 1, d.callWrap(d.contextOrFrameLookup(b, c, "base"), "base", ["ui.Picker"])), a.autoesc), a.getTemplate("app/common/modules/ui/Picker/Picker.nunjucks", !0, function(f, g) {
                    if (f)
                        return void e(f);
                    for (var i in g.blocks)
                        b.addBlock(i, g.blocks[i]);
                    h += "\n", g.rootRenderFunc(a, b, c, d, e)
                })
            } catch (L) {
                e(d.handleError(L, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/BoardPickerDropdownButton/BoardPickerDropdownButton.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n";
                var i;
                i = d.memberLookup(d.contextOrFrameLookup(b, c, "data"), "boards_shortlist", a.autoesc), c.set("boards_shortlist", i, !0), c.parent || (b.setVariable("boards_shortlist", i), b.addExport("boards_shortlist")), h += "\n";
                var j;
                if (j = d.memberLookup(d.contextOrFrameLookup(b, c, "data"), "all_boards", a.autoesc), c.set("all_boards", j, !0), c.parent || (b.setVariable("all_boards", j), b.addExport("all_boards")), h += "\n\n", 0 == a.getFilter("length").call(b, d.contextOrFrameLookup(b, c, "all_boards")) && (h += "\n    ", h += d.suppressValue((f = 10, g = 15, d.callWrap(d.contextOrFrameLookup(b, c, "extra_data"), "extra_data", [{
                    no_boards: !0
                }
                ])), a.autoesc), h += "\n"), h += "\n\n", d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "selected_board_id", a.autoesc)) {
                    h += "\n    ";
                    var k;
                    k = d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "selected_board_id", a.autoesc), c.set("selected_board_id", k, !0), c.parent || (b.setVariable("selected_board_id", k), b.addExport("selected_board_id")), h += "\n"
                } else if (a.getFilter("length").call(b, d.contextOrFrameLookup(b, c, "boards_shortlist")) > 0) {
                    h += "\n    ";
                    var l;
                    l = d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "boards_shortlist"), 0, a.autoesc), "id", a.autoesc), c.set("selected_board_id", l, !0), c.parent || (b.setVariable("selected_board_id", l), b.addExport("selected_board_id")), h += "\n"
                }
                h += "\n\n";
                var m;
                m = {
                    arrow: "down",
                    dropdown_options: {
                        class_name: "aboveModal strongBorder boardPicker",
                        hide_caret: !0
                    },
                    label_module: {
                        name: "BoardLabel",
                        options: {
                            view_type: "compact"
                        },
                        data: {
                            name: (f = 30, g = 26, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Select a board"]))
                        }
                    }
                }, c.set("base_options", m, !0), c.parent || (b.setVariable("base_options", m), b.addExport("base_options")), h += "\n\n", c = c.push();
                var n = d.contextOrFrameLookup(b, c, "all_boards");
                if (n)
                    for (var o = n.length, p = 0; p < n.length; p++) {
                        var q = n[p];
                        if (c.set("board", q), c.set("loop.index", p + 1), c.set("loop.index0", p), c.set("loop.revindex", o - p), c.set("loop.revindex0", o - p - 1), c.set("loop.first", 0 === p), c.set("loop.last", p === o - 1), c.set("loop.length", o), h += "\n    ", d.memberLookup(q, "id", a.autoesc) == d.contextOrFrameLookup(b, c, "selected_board_id")) {
                            h += "\n        ";
                            var r;
                            f = 36, g = 44, r = d.callWrap(d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "base_options"), "label_module", a.autoesc), "update", a.autoesc), 'base_options["label_modu"]["update"]', [{
                                data: q
                            }
                            ]), c.set("_temp_do", r, !0), c.parent || b.setVariable("_temp_do", r), h += "\n        ", h += d.suppressValue((f = 39, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "extra_data"), "extra_data", [{
                                selectedBoard: q
                            }
                            ])), a.autoesc), h += "\n    "
                        }
                        h += "\n"
                    }
                c = c.pop(), h += "\n\n", h += d.suppressValue((f = 45, g = 1, d.callWrap(d.contextOrFrameLookup(b, c, "describe"), "describe", [d.contextOrFrameLookup(b, c, "base_options")])), a.autoesc), h += d.suppressValue((f = 45, g = 1, d.callWrap(d.contextOrFrameLookup(b, c, "base"), "base", ["DropdownButton"])), a.autoesc), a.getTemplate("app/common/modules/DropdownButton/DropdownButton.nunjucks", !0, function(f, g) {
                    if (f)
                        return void e(f);
                    for (var i in g.blocks)
                        b.addBlock(i, g.blocks[i]);
                    h += "\n", g.rootRenderFunc(a, b, c, d, e)
                })
            } catch (s) {
                e(d.handleError(s, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/Button/Button.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n", h += "\n";
                var i;
                f = 36, g = 29, i = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["class_name", ""]), c.set("class_name", i, !0), c.parent || (b.setVariable("class_name", i), b.addExport("class_name"));
                var j;
                f = 37, g = 31, j = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["element_type", "button"]), c.set("element_type", j, !0), c.parent || (b.setVariable("element_type", j), b.addExport("element_type")), d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "ellipsis", a.autoesc) || "button" != d.contextOrFrameLookup(b, c, "element_type") || (h += d.suppressValue((f = 39, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "tag_name"), "tag_name", ["button"])), a.autoesc)), "a" == d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "element_type", a.autoesc) && d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "url", a.autoesc) && (h += "\n    ", h += d.suppressValue((f = 43, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "attr"), "attr", [d.makeKeywordArgs({
                    href: d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "url", a.autoesc)
                })])), a.autoesc)), d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "cancelButton", a.autoesc) && (h += d.suppressValue((f = 47, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["cancelButton"])), a.autoesc)), "div" != d.contextOrFrameLookup(b, c, "element_type") && "button" != d.contextOrFrameLookup(b, c, "element_type") && (h += d.suppressValue((f = 51, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "tag_name"), "tag_name", [d.contextOrFrameLookup(b, c, "element_type")])), a.autoesc)), d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "disabled", a.autoesc) && (h += d.suppressValue((f = 55, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "attr"), "attr", [d.makeKeywordArgs({
                    disabled: "disabled"
                })])), a.autoesc), h += "\n    ", h += d.suppressValue((f = 56, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["disabled"])), a.autoesc)), d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "borderless", a.autoesc) ? h += d.suppressValue((f = 60, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["borderless"])), a.autoesc) : "inContextDropdownButton" != d.contextOrFrameLookup(b, c, "class_name") && (h += "\n    ", h += d.suppressValue((f = 62, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["btn"])), a.autoesc), f = 63, g = 19, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["rounded", !0]) && (h += d.suppressValue((f = 64, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["rounded"])), a.autoesc))), d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "size", a.autoesc) && (h += d.suppressValue((f = 69, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", [d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "size", a.autoesc)])), a.autoesc));
                var k;
                f = 72, g = 24, k = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["color", "default"]), c.set("color", k, !0), c.parent || (b.setVariable("color", k), b.addExport("color")), "default" != d.contextOrFrameLookup(b, c, "color") && (h += d.suppressValue((f = 74, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", [d.contextOrFrameLookup(b, c, "color")])), a.autoesc)), d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "primary_on_hover", a.autoesc) && (h += d.suppressValue((f = 78, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["primaryOnHover"])), a.autoesc)), (d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "log_element_type", a.autoesc) || 0 == d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "log_element_type", a.autoesc)) && (h += d.suppressValue((f = 82, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "attr"), "attr", [{
                    "data-element-type": d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "log_element_type", a.autoesc)
                }
                ])), a.autoesc)), h += d.suppressValue((f = 85, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", [d.contextOrFrameLookup(b, c, "class_name")])), a.autoesc), h += "\n", h += d.suppressValue((f = 86, g = 5, d.callWrap(d.contextOrFrameLookup(b, c, "attr"), "attr", [d.makeKeywordArgs({
                    type: (f = 86, g = 22, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["type", "button"]))
                })])), a.autoesc), h += "\n";
                var l;
                l = d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "has_icon", a.autoesc), c.set("has_icon", l, !0), c.parent || (b.setVariable("has_icon", l), b.addExport("has_icon")), h += "\n";
                var m;
                m = d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "icon_on_right", a.autoesc), c.set("icon_on_right", m, !0), c.parent || (b.setVariable("icon_on_right", m), b.addExport("icon_on_right")), h += "\n\n", "down" == d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "arrow", a.autoesc) && (h += "<span class='downArrow'></span>"), d.contextOrFrameLookup(b, c, "has_icon")&&!d.contextOrFrameLookup(b, c, "icon_on_right") && (h += "<em></em>\n"), d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "set_badge_left", a.autoesc) && d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "supports_badge", a.autoesc) && (h += "<span class='buttonBadge leftBadge'></span>");
                var n;
                if (n = d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "label_module", a.autoesc), c.set("label_module", n, !0), c.parent || (b.setVariable("label_module", n), b.addExport("label_module")), d.contextOrFrameLookup(b, c, "label_module")) {
                    var o;
                    o = {}, c.set("label_module_with_id", o, !0), c.parent || (b.setVariable("label_module_with_id", o), b.addExport("label_module_with_id")), h += "\n    ";
                    var p;
                    f = 106, g = 35, p = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "label_module_with_id"), "update", a.autoesc), 'label_module_with_id["update"]', [d.contextOrFrameLookup(b, c, "label_module")]), c.set("_temp_do", p, !0), c.parent || b.setVariable("_temp_do", p), h += "\n    ";
                    var q;
                    f = 107, g = 35, q = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "label_module_with_id"), "update", a.autoesc), 'label_module_with_id["update"]', [{
                        id: "label"
                    }
                    ]), c.set("_temp_do", q, !0), c.parent || b.setVariable("_temp_do", q), h += "\n    ", h += d.suppressValue((f = 108, g = 16, d.callWrap(d.contextOrFrameLookup(b, c, "ProxyModule"), "ProxyModule", [d.contextOrFrameLookup(b, c, "label_module_with_id")])), a.autoesc)
                } else if (d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "text", a.autoesc)) {
                    var r;
                    r = d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "text", a.autoesc), c.set("text", r, !0), c.parent || (b.setVariable("text", r), b.addExport("text"));
                    var s;
                    f = 111, g = 32, s = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["show_text", !0]), c.set("show_text", s, !0), c.parent || (b.setVariable("show_text", s), b.addExport("show_text")), d.contextOrFrameLookup(b, c, "show_text") ? (h += '<span class="buttonText">', h += d.suppressValue(d.contextOrFrameLookup(b, c, "text"), a.autoesc), h += "</span>\n        ", h += d.suppressValue((f = 114, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["hasText"])), a.autoesc)) : (h += '<span class="accessibilityText">', h += d.suppressValue(d.contextOrFrameLookup(b, c, "text"), a.autoesc), h += "</span>")
                } else 
                    h += "\n    &nbsp;";
                h += "\n", d.contextOrFrameLookup(b, c, "has_icon") && d.contextOrFrameLookup(b, c, "icon_on_right") && (h += "\n    <em></em>"), d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "supports_badge", a.autoesc)&&!d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "set_badge_left", a.autoesc) && (h += "<span class='buttonBadge'></span>"), e(null, h)
            } catch (t) {
                e(d.handleError(t, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/ConfirmDialog/ConfirmDialog.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                if (h += "\n", d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "message", a.autoesc))
                    h += '\n    <form class="standardForm">\n        <h1>', h += d.suppressValue((f = 13, g = 14, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Oops!"])), a.autoesc), h += '</h1>\n        <p class="body">\n            ', h += d.suppressValue(a.getFilter("safe").call(b, d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "message", a.autoesc)), a.autoesc), h += '\n        </p>\n        <div class="formFooter">\n            <div class="formFooterButtons">\n                <button class="Button confirm btn primary rounded">\n                    ', h += d.suppressValue((f = 20, g = 22, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Okay"])), a.autoesc), h += "\n                </button>\n            </div>\n        </div>\n    </form>\n";
                else {
                    h += "\n    ", h += d.suppressValue((f = 26, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "include_data"), "include_data", [!0])), a.autoesc), h += "\n\n    ", f = 28, g = 19, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["fluid", !1]) && (h += "\n        ", h += d.suppressValue((f = 29, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["fluid"])), a.autoesc), h += "\n    "), h += "\n\n    ", "wide" == (f = 32, g = 19, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["view_type"])) && (h += "\n        ", h += d.suppressValue((f = 33, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["wide"])), a.autoesc), h += "\n    "), h += "\n\n    ", "mediumWide" == (f = 36, g = 19, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["view_type"])) && (h += "\n        ", h += d.suppressValue((f = 37, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["mediumWide"])), a.autoesc), h += "\n    "), h += "\n\n    ", f = 40, g = 19, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["class_name"]) && (h += "\n        ", h += d.suppressValue((f = 41, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", [(f = 41, g = 29, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["class_name"]))])), a.autoesc), h += "\n    "), h += "\n\n    ";
                    var i;
                    f = 44, g = 31, i = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["template", ""]), c.set("template", i, !0), c.parent || (b.setVariable("template", i), b.addExport("template")), h += "\n    ", h += "\n    ";
                    var j;
                    j = a.getFilter("strip").call(b, d.contextOrFrameLookup(b, c, "template"), "./"), c.set("template", j, !0), c.parent || (b.setVariable("template", j), b.addExport("template")), h += "\n    ";
                    var k;
                    k = "templates/dialogs/" + d.contextOrFrameLookup(b, c, "template") + ".nunjucks", c.set("template_filepath", k, !0), c.parent || (b.setVariable("template_filepath", k), b.addExport("template_filepath")), h += "\n    ", a.getTemplate(d.contextOrFrameLookup(b, c, "template_filepath"), function(a, d) {
                        return a ? void e(a) : void d.render(b.getVariables(), c.push(), function(a, b) {
                            return a ? void e(a) : (h += b, void(h += "\n"))
                        })
                    })
                }
                h += "\n", e(null, h)
            } catch (l) {
                e(d.handleError(l, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/ContactsList/ContactsList.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n";
                var i;
                i = [], c.set("list_items", i, !0), c.parent || (b.setVariable("list_items", i), b.addExport("list_items")), h += "\n";
                var j;
                j = d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "user", a.autoesc), c.set("user", j, !0), c.parent || (b.setVariable("user", j), b.addExport("user")), h += "\n\n", c = c.push();
                var k = d.contextOrFrameLookup(b, c, "data");
                if (k)
                    for (var l = k.length, m = 0; m < k.length; m++) {
                        var n = k[m];
                        c.set("contact", n), c.set("loop.index", m + 1), c.set("loop.index0", m), c.set("loop.revindex", l - m), c.set("loop.revindex0", l - m - 1), c.set("loop.first", 0 === m), c.set("loop.last", m === l - 1), c.set("loop.length", l), h += "\n    ";
                        var o;
                        if (o = d.memberLookup(n, "type", a.autoesc), c.set("type", o, !0), c.parent || (b.setVariable("type", o), b.addExport("type")), h += "\n    ", "user" == d.contextOrFrameLookup(b, c, "type")) {
                            h += "\n        ";
                            var p;
                            f = 16, g = 29, p = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "list_items"), "append", a.autoesc), 'list_items["append"]', [{
                                module: {
                                    name: "ui.ImageBlock",
                                    options: {
                                        title: d.memberLookup(n,
                                        "full_name",
                                        a.autoesc),
                                        body: (f = 21,
                                        g = 29,
                                        d.callWrap(d.contextOrFrameLookup(b,
                                        c,
                                        "_"),
                                        "_",
                                        ["Fellow Pinner"])),
                                        image_size: "small",
                                        image_style: "circle",
                                        image_src: d.memberLookup(n,
                                        "image_small_url",
                                        a.autoesc),
                                        class_name: "userContact"
                                    }, data: n
                                }
                            }
                            ]), c.set("_temp_do", p, !0), c.parent || b.setVariable("_temp_do", p), h += "\n    "
                        } else if ("emailcontact" == d.contextOrFrameLookup(b, c, "type") && d.memberLookup(n, "email_address", a.autoesc)) {
                            h += "\n        ";
                            var q;
                            f = 31, g = 29, q = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "list_items"), "append", a.autoesc), 'list_items["append"]', [{
                                module: {
                                    name: "ui.ImageBlock",
                                    options: {
                                        title: d.memberLookup(n,
                                        "email_address",
                                        a.autoesc),
                                        body: (f = 36,
                                        g = 29,
                                        d.callWrap(d.contextOrFrameLookup(b,
                                        c,
                                        "_"),
                                        "_",
                                        ["Email Contact"])),
                                        image_size: "small",
                                        image_style: "circle",
                                        icon_letter: d.memberLookup(n,
                                        "email_address",
                                        a.autoesc),
                                        class_name: "userContact"
                                    }, data: n
                                }
                            }
                            ]), c.set("_temp_do", q, !0), c.parent || b.setVariable("_temp_do", q), h += "\n    "
                        }
                        h += "\n"
                    }
                if (c = c.pop(), h += "\n\n", d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "show_social_connectors", a.autoesc)) {
                    if (h += "\n    ", !d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "facebook_url", a.autoesc)&&!d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "connected_to_facebook", a.autoesc)) {
                        h += "\n        ";
                        var r;
                        f = 50, g = 29, r = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "list_items"), "append", a.autoesc), 'list_items["append"]', [{
                            module: {
                                name: "ui.ImageBlock",
                                options: {
                                    title: (f = 54,
                                    g = 30,
                                    d.callWrap(d.contextOrFrameLookup(b,
                                    c,
                                    "_"),
                                    "_",
                                    ["Find friends from Facebook"])),
                                    use_sprite_image: !0,
                                    image_size: "small",
                                    image_style: "circle",
                                    class_name: "socialConnect-facebook"
                                }, data: {
                                    network: "facebook"
                                }
                            }
                        }
                        ]), c.set("_temp_do", r, !0), c.parent || b.setVariable("_temp_do", r), h += "\n    "
                    }
                    if (h += "\n    ", !d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "twitter_url", a.autoesc)&&!d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "connected_to_twitter", a.autoesc)) {
                        h += "\n        ";
                        var s;
                        f = 65, g = 29, s = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "list_items"), "append", a.autoesc), 'list_items["append"]', [{
                            module: {
                                name: "ui.ImageBlock",
                                options: {
                                    title: (f = 69,
                                    g = 30,
                                    d.callWrap(d.contextOrFrameLookup(b,
                                    c,
                                    "_"),
                                    "_",
                                    ["Find friends from Twitter"])),
                                    use_sprite_image: !0,
                                    image_size: "small",
                                    image_style: "circle",
                                    class_name: "socialConnect-twitter"
                                }, data: {
                                    network: "twitter"
                                }
                            }
                        }
                        ]), c.set("_temp_do", s, !0), c.parent || b.setVariable("_temp_do", s), h += "\n    "
                    }
                    if (h += "\n    ", !d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "gplus_url", a.autoesc)&&!d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "connected_to_gplus", a.autoesc)) {
                        h += "\n        ";
                        var t;
                        f = 80, g = 29, t = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "list_items"), "append", a.autoesc), 'list_items["append"]', [{
                            module: {
                                name: "ui.ImageBlock",
                                options: {
                                    title: (f = 84,
                                    g = 30,
                                    d.callWrap(d.contextOrFrameLookup(b,
                                    c,
                                    "_"),
                                    "_",
                                    ["Find friends from Google+"])),
                                    use_sprite_image: !0,
                                    image_size: "small",
                                    image_style: "circle",
                                    class_name: "socialConnect-gplus"
                                }, data: {
                                    network: "gplus"
                                }
                            }
                        }
                        ]), c.set("_temp_do", t, !0), c.parent || b.setVariable("_temp_do", t), h += "\n    "
                    }
                    if (h += "\n    ", !d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "connected_to_yahoo", a.autoesc)) {
                        h += "\n        ";
                        var u;
                        f = 95, g = 29, u = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "list_items"), "append", a.autoesc), 'list_items["append"]', [{
                            module: {
                                name: "ui.ImageBlock",
                                options: {
                                    title: (f = 99,
                                    g = 30,
                                    d.callWrap(d.contextOrFrameLookup(b,
                                    c,
                                    "_"),
                                    "_",
                                    ["Find friends from Yahoo"])),
                                    use_sprite_image: !0,
                                    image_size: "small",
                                    image_style: "circle",
                                    class_name: "socialConnect-yahoo"
                                }, data: {
                                    network: "yahoo"
                                }
                            }
                        }
                        ]), c.set("_temp_do", u, !0), c.parent || b.setVariable("_temp_do", u), h += "\n    "
                    }
                    h += "\n"
                }
                h += "\n\n", h += d.suppressValue((f = 111, g = 7, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["List", d.makeKeywordArgs({
                    id: "list",
                    options: {
                        items: d.contextOrFrameLookup(b, c, "list_items")
                    }
                })])), a.autoesc), h += "\n", e(null, h)
            } catch (v) {
                e(d.handleError(v, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/Conversation/Conversation.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n";
                var i;
                i = d.contextOrFrameLookup(b, c, "data"), c.set("conversation", i, !0), c.parent || (b.setVariable("conversation", i), b.addExport("conversation")), h += "\n";
                var j;
                j = d.memberLookup(d.contextOrFrameLookup(b, c, "conversation"), "users", a.autoesc), c.set("users", j, !0), c.parent || (b.setVariable("users", j), b.addExport("users")), h += "\n";
                var k;
                k = d.memberLookup(d.contextOrFrameLookup(b, c, "conversation"), "emails", a.autoesc), c.set("emails", k, !0), c.parent || (b.setVariable("emails", k), b.addExport("emails")), h += "\n\n", h += d.suppressValue((f = 13, g = 5, d.callWrap(d.contextOrFrameLookup(b, c, "attr"), "attr", [{
                    "data-component-type": d.memberLookup(d.contextOrFrameLookup(b, c, "ComponentType"), "CONVERSATION_MESSAGES", a.autoesc)
                }
                ])), a.autoesc), h += "\n\n", h += d.suppressValue((f = 15, g = 7, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["ConversationHead", d.makeKeywordArgs({
                    id: "conversationHead",
                    options: {
                        can_close: !0,
                        show_title: !0,
                        users: d.contextOrFrameLookup(b, c, "users"),
                        emails: d.contextOrFrameLookup(b, c, "emails")
                    }
                })])), a.autoesc), h += "\n", e(null, h)
            } catch (l) {
                e(d.handleError(l, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/ConversationEventMessageBase/ConversationEventMessageBase.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n";
                var i;
                i = d.contextOrFrameLookup(b, c, "data"), c.set("messages", i, !0), c.parent || (b.setVariable("messages", i), b.addExport("messages")), h += "\n";
                var j;
                j = d.memberLookup(d.contextOrFrameLookup(b, c, "messages"), 0, a.autoesc), c.set("message", j, !0), c.parent || (b.setVariable("message", j), b.addExport("message")), h += "\n";
                var k;
                k = d.memberLookup(d.contextOrFrameLookup(b, c, "message"), "type", a.autoesc), c.set("type", k, !0), c.parent || (b.setVariable("type", k), b.addExport("type")), h += "\n";
                var l;
                l = d.memberLookup(d.contextOrFrameLookup(b, c, "message"), "sender", a.autoesc), c.set("sender", l, !0), c.parent || (b.setVariable("sender", l), b.addExport("sender")), h += "\n";
                var m;
                m = a.getFilter("length").call(b, d.contextOrFrameLookup(b, c, "messages")), c.set("num_pins", m, !0), c.parent || (b.setVariable("num_pins", m), b.addExport("num_pins")), h += "\n\n", d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "hide_top_border", a.autoesc) && (h += "\n    ", h += d.suppressValue((f = 17, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["noTopBorder"])), a.autoesc), h += "\n"), h += "\n\n", h += d.suppressValue((f = 20, g = 7, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["ConversationHead", d.makeKeywordArgs({
                    options: {
                        users: [d.contextOrFrameLookup(b, c, "sender")],
                        show_title: !0,
                        size: "small",
                        should_link: !0,
                        link: !0,
                        actionable: !1
                    }
                })])), a.autoesc), h += '\n\n<div class="eventMessageContent">\n    <div class="eventMessageTitle">\n        ', b.getBlock("message_title")(a, b, c, d, function(f, g) {
                    return f ? void e(f) : (h += g, h += '\n    </div>\n    <div class="eventMessagePins">\n        ', void b.getBlock("message_pins")(a, b, c, d, function(a, b) {
                        return a ? void e(a) : (h += b, h += "\n    </div>\n</div>\n", void e(null, h))
                    }))
                })
            } catch (n) {
                e(d.handleError(n, f, g))
            }
        }
        function b(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function c(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n            ", c = c.push();
                var i = d.contextOrFrameLookup(b, c, "messages");
                if (i)
                    for (var j = i.length, k = 0; k < i.length; k++) {
                        var l = i[k];
                        c.set("msg", l), c.set("loop.index", k + 1), c.set("loop.index0", k), c.set("loop.revindex", j - k), c.set("loop.revindex0", j - k - 1), c.set("loop.first", 0 === k), c.set("loop.last", k === j - 1), c.set("loop.length", j), h += "\n                ";
                        var m;
                        m = d.memberLookup(l, "pin", a.autoesc), c.set("pin", m, !0), c.parent || (b.setVariable("pin", m), b.addExport("pin")), h += '\n                <a href="/pin/', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "id", a.autoesc), a.autoesc), h += '/">\n                    <img class="pinThumb" src="', h += d.suppressValue(d.memberLookup(d.memberLookup(d.memberLookup(d.memberLookup(l, "pin", a.autoesc), "images", a.autoesc), "136x136", a.autoesc), "url", a.autoesc), a.autoesc), h += '">\n                </a>\n            '
                    }
                c = c.pop(), h += "\n        ", e(null, h)
            } catch (n) {
                e(d.handleError(n, f, g))
            }
        }
        return {
            b_message_title: b,
            b_message_pins: c,
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/ConversationHead/ConversationHead.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n";
                var i;
                i = d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "users", a.autoesc) || [], c.set("users", i, !0), c.parent || (b.setVariable("users", i), b.addExport("users")), h += "\n";
                var j;
                j = d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "emails", a.autoesc) || [], c.set("emails", j, !0), c.parent || (b.setVariable("emails", j), b.addExport("emails")), h += "\n";
                var k;
                f = 24, g = 23, k = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["size", "normal"]), c.set("size", k, !0), c.parent || (b.setVariable("size", k), b.addExport("size")), h += "\n";
                var l;
                l = d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "can_close", a.autoesc), c.set("can_close", l, !0), c.parent || (b.setVariable("can_close", l), b.addExport("can_close")), h += "\n";
                var m;
                m = d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "should_link", a.autoesc), c.set("should_link", m, !0), c.parent || (b.setVariable("should_link", m), b.addExport("should_link")), h += "\n";
                var n;
                n = a.getFilter("length").call(b, d.contextOrFrameLookup(b, c, "users")), c.set("user_count", n, !0), c.parent || (b.setVariable("user_count", n), b.addExport("user_count")), h += "\n";
                var o;
                o = a.getFilter("length").call(b, d.contextOrFrameLookup(b, c, "emails")), c.set("email_count", o, !0), c.parent || (b.setVariable("email_count", o), b.addExport("email_count")), h += "\n\n", h += d.suppressValue((f = 30, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", [d.contextOrFrameLookup(b, c, "size")])), a.autoesc), h += "\n\n";
                var p = d.makeMacro(["user"], [], function(e, h) {
                    c = c.push(), h = h || {}, h.hasOwnProperty("caller") && c.set("caller", h.caller), c.set("user", e);
                    var i = "";
                    if (i += "\n    ", d.memberLookup(e, "image_large_url", a.autoesc)&&!d.memberLookup(e, "is_default_image", a.autoesc)) {
                        i += "\n        ";
                        var j;
                        j = d.memberLookup(e, "image_large_url", a.autoesc), c.set("image", j, !0), c.parent || (b.setVariable("image", j), b.addExport("image")), i += '\n        <img class="head" src="', i += d.suppressValue(d.contextOrFrameLookup(b, c, "image"), a.autoesc), i += '">\n    '
                    } else 
                        d.memberLookup(e, "is_default_image", a.autoesc) ? (i += '\n        <div class="head">\n            ', i += d.suppressValue(a.getFilter("upper").call(b, a.getFilter("first").call(b, (f = 38, g = 21, d.callWrap(d.memberLookup(e, "get", a.autoesc), 'user["get"]', ["full_name"])))), a.autoesc), i += "\n        </div>\n    ") : (i += "\n        ", i += '\n        <div class="head email">\n            ', i += d.suppressValue(a.getFilter("upper").call(b, a.getFilter("first").call(b, e)), a.autoesc), i += "\n        </div>\n    ");
                    return i += "\n", c = c.pop(), new d.SafeString(i)
                });
                b.addExport("image_view"), b.setVariable("image_view", p), h += '\n\n<div class="contentContainer">\n    ', d.contextOrFrameLookup(b, c, "can_close") && (h += "\n        ", h += d.suppressValue((f = 50, g = 15, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    id: "closeButton",
                    options: {
                        text: "X",
                        show_text: !1,
                        cancelButton: !0,
                        has_icon: !0,
                        borderless: !0,
                        class_name: "conversationHeadClose",
                        log_element_type: d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "CLOSE_BUTTON", a.autoesc)
                    }
                })])), a.autoesc), h += "\n    "), h += "\n    ";
                var q;
                if (q = [], c.set("names", q, !0), c.parent || (b.setVariable("names", q), b.addExport("names")), h += "\n    ", d.contextOrFrameLookup(b, c, "user_count") + d.contextOrFrameLookup(b, c, "email_count") > 1) {
                    h += "\n        ", c = c.push();
                    var r = d.contextOrFrameLookup(b, c, "users");
                    if (r)
                        for (var s = r.length, t = 0; t < r.length; t++) {
                            var u = r[t];
                            c.set("user", u), c.set("loop.index", t + 1), c.set("loop.index0", t), c.set("loop.revindex", s - t), c.set("loop.revindex0", s - t - 1), c.set("loop.first", 0 === t), c.set("loop.last", t === s - 1), c.set("loop.length", s), h += "\n            ";
                            var v;
                            f = 66, g = 28, v = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "names"), "append", a.autoesc), 'names["append"]', [(f = 66, g = 37, d.callWrap(d.memberLookup(u, "get", a.autoesc), 'user["get"]', ["full_name"]))]), c.set("_temp_do", v, !0), c.parent || b.setVariable("_temp_do", v), h += "\n        "
                        }
                    c = c.pop(), h += "\n        ", c = c.push();
                    var w = d.contextOrFrameLookup(b, c, "emails");
                    if (w)
                        for (var x = w.length, y = 0; y < w.length; y++) {
                            var z = w[y];
                            c.set("email", z), c.set("loop.index", y + 1), c.set("loop.index0", y), c.set("loop.revindex", x - y), c.set("loop.revindex0", x - y - 1), c.set("loop.first", 0 === y), c.set("loop.last", y === x - 1), c.set("loop.length", x), h += "\n            ";
                            var A;
                            f = 69, g = 28, A = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "names"), "append", a.autoesc), 'names["append"]', [z]), c.set("_temp_do", A, !0), c.parent || b.setVariable("_temp_do", A), h += "\n        "
                        }
                    c = c.pop(), h += "\n    "
                } else {
                    if (h += "\n        ", d.contextOrFrameLookup(b, c, "user_count")) {
                        h += "\n            ";
                        var B;
                        B = d.memberLookup(d.contextOrFrameLookup(b, c, "users"), 0, a.autoesc), c.set("user", B, !0), c.parent || (b.setVariable("user", B), b.addExport("user")), h += "\n            ";
                        var C;
                        f = 74, g = 28, C = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "names"), "append", a.autoesc), 'names["append"]', [(f = 74, g = 37, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "get", a.autoesc), 'user["get"]', ["full_name"]))]), c.set("_temp_do", C, !0), c.parent || b.setVariable("_temp_do", C), h += "\n        "
                    } else {
                        h += "\n            ";
                        var D;
                        f = 76, g = 28, D = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "names"), "append", a.autoesc), 'names["append"]', [d.memberLookup(d.contextOrFrameLookup(b, c, "emails"), 0, a.autoesc)]), c.set("_temp_do", D, !0), c.parent || b.setVariable("_temp_do", D), h += "\n        "
                    }
                    h += "\n    "
                }
                h += "\n\n    ";
                var E;
                E = "headWrapper", c.set("head_wrapper_classname", E, !0), c.parent || (b.setVariable("head_wrapper_classname", E), b.addExport("head_wrapper_classname")), h += "\n    ";
                var F;
                if (F = d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "show_title", a.autoesc), c.set("show_title", F, !0), c.parent || (b.setVariable("show_title", F), b.addExport("show_title")), h += "\n    ", d.contextOrFrameLookup(b, c, "should_link") && d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "username", a.autoesc)) {
                    if (h += '\n        <a\n            class="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "head_wrapper_classname"), a.autoesc), h += '"\n            href="/', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "username", a.autoesc), a.autoesc), h += '/"\n            ', d.contextOrFrameLookup(b, c, "show_title")) {
                        h += 'title="', c = c.push();
                        var G = d.contextOrFrameLookup(b, c, "names");
                        if (G)
                            for (var H = G.length, I = 0; I < G.length; I++) {
                                var J = G[I];
                                c.set("name", J), c.set("loop.index", I + 1), c.set("loop.index0", I), c.set("loop.revindex", H - I), c.set("loop.revindex0", H - I - 1), c.set("loop.first", 0 === I), c.set("loop.last", I === H - 1), c.set("loop.length", H), h += d.suppressValue(J, a.autoesc), d.memberLookup(d.contextOrFrameLookup(b, c, "loop"), "last", a.autoesc) || (h += ", ")
                            }
                        c = c.pop(), h += '"'
                    }
                    h += "\n        >\n    "
                } else {
                    if (h += '\n        <div\n            class="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "head_wrapper_classname"), a.autoesc), h += '"\n            ', d.contextOrFrameLookup(b, c, "show_title")) {
                        h += 'title="', c = c.push();
                        var K = d.contextOrFrameLookup(b, c, "names");
                        if (K)
                            for (var L = K.length, M = 0; M < K.length; M++) {
                                var N = K[M];
                                c.set("name", N), c.set("loop.index", M + 1), c.set("loop.index0", M), c.set("loop.revindex", L - M), c.set("loop.revindex0", L - M - 1), c.set("loop.first", 0 === M), c.set("loop.last", M === L - 1), c.set("loop.length", L), h += d.suppressValue(N, a.autoesc), d.memberLookup(d.contextOrFrameLookup(b, c, "loop"), "last", a.autoesc) || (h += ", ")
                            }
                        c = c.pop(), h += '"'
                    }
                    h += "\n        >\n    "
                }
                h += "\n\n    ", h += "\n    ";
                var O;
                O = [], c.set("users_or_emails", O, !0), c.parent || (b.setVariable("users_or_emails", O), b.addExport("users_or_emails")), h += "\n    ";
                var P;
                P = 3, c.set("max_user_or_emails", P, !0), c.parent || (b.setVariable("max_user_or_emails", P), b.addExport("max_user_or_emails")), h += "\n    ", c = c.push();
                var Q = (f = 98, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "range"), "range", [d.contextOrFrameLookup(b, c, "max_user_or_emails")]));
                if (Q)
                    for (var R = Q.length, S = 0; S < Q.length; S++) {
                        var T = Q[S];
                        if (c.set("index", T), c.set("loop.index", S + 1), c.set("loop.index0", S), c.set("loop.revindex", R - S), c.set("loop.revindex0", R - S - 1), c.set("loop.first", 0 === S), c.set("loop.last", S === R - 1), c.set("loop.length", R), h += "\n        ", T < d.contextOrFrameLookup(b, c, "user_count")) {
                            h += "\n            ";
                            var U;
                            f = 100, g = 38, U = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "users_or_emails"), "append", a.autoesc), 'users_or_emails["append"]', [d.memberLookup(d.contextOrFrameLookup(b, c, "users"), T, a.autoesc)]), c.set("_temp_do", U, !0), c.parent || b.setVariable("_temp_do", U), h += "\n        "
                        } else {
                            h += "\n            ";
                            var V;
                            if (V = T - d.contextOrFrameLookup(b, c, "user_count"), c.set("email_index", V, !0), c.parent || (b.setVariable("email_index", V), b.addExport("email_index")), h += "\n            ", d.contextOrFrameLookup(b, c, "email_index") < d.contextOrFrameLookup(b, c, "email_count")) {
                                h += "\n                ";
                                var W;
                                f = 104, g = 42, W = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "users_or_emails"), "append", a.autoesc), 'users_or_emails["append"]', [d.memberLookup(d.contextOrFrameLookup(b, c, "emails"), d.contextOrFrameLookup(b, c, "email_index"), a.autoesc)]), c.set("_temp_do", W, !0), c.parent || b.setVariable("_temp_do", W), h += "\n            "
                            }
                            h += "\n        "
                        }
                        h += "\n    "
                    }
                c = c.pop(), h += "\n\n    ";
                var X;
                X = a.getFilter("length").call(b, d.contextOrFrameLookup(b, c, "users_or_emails")), c.set("image_count", X, !0), c.parent || (b.setVariable("image_count", X), b.addExport("image_count")), h += "\n    ";
                var Y;
                if (Y = [], c.set("image_classnames", Y, !0), c.parent || (b.setVariable("image_classnames", Y), b.addExport("image_classnames")), h += "\n    ", 1 == d.contextOrFrameLookup(b, c, "image_count")) {
                    h += "\n        ";
                    var Z;
                    Z = ["fullWrapper"], c.set("image_classnames", Z, !0), c.parent || (b.setVariable("image_classnames", Z), b.addExport("image_classnames")), h += "\n    "
                } else if (2 == d.contextOrFrameLookup(b, c, "image_count")) {
                    h += "\n        ";
                    var $;
                    $ = ["leftWrapper halfWrapper", "rightWrapper halfWrapper isWholeHalf"], c.set("image_classnames", $, !0), c.parent || (b.setVariable("image_classnames", $), b.addExport("image_classnames")), h += "\n    "
                } else if (3 == d.contextOrFrameLookup(b, c, "image_count")) {
                    h += "\n        ";
                    var _;
                    _ = ["leftWrapper halfWrapper", "rightWrapper halfWrapper smallImage top", "rightWrapper halfWrapper smallImage bottom"], c.set("image_classnames", _, !0), c.parent || (b.setVariable("image_classnames", _), b.addExport("image_classnames")), h += "\n    "
                }
                h += '\n\n    <div class="imagesWrapper">\n        ', c = c.push();
                var ab = d.contextOrFrameLookup(b, c, "image_classnames");
                if (ab)
                    for (var bb = ab.length, cb = 0; cb < ab.length; cb++) {
                        var db = ab[cb];
                        c.set("classname", db), c.set("loop.index", cb + 1), c.set("loop.index0", cb), c.set("loop.revindex", bb - cb), c.set("loop.revindex0", bb - cb - 1), c.set("loop.first", 0 === cb), c.set("loop.last", cb === bb - 1), c.set("loop.length", bb), h += '\n            <div class="', h += d.suppressValue(db, a.autoesc), h += '">\n                ';
                        var eb;
                        eb = d.memberLookup(d.contextOrFrameLookup(b, c, "users_or_emails"), d.memberLookup(d.contextOrFrameLookup(b, c, "loop"), "index0", a.autoesc), a.autoesc), c.set("user_or_email", eb, !0), c.parent || (b.setVariable("user_or_email", eb), b.addExport("user_or_email")), h += "\n                ", h += d.suppressValue((f = 132, g = 27, d.callWrap(p, "image_view", [d.contextOrFrameLookup(b, c, "user_or_email")])), a.autoesc), h += "\n            </div>\n        "
                    }
                c = c.pop(), h += '\n    </div>\n\n    <div class="noDrag"></div>\n    ', h += d.contextOrFrameLookup(b, c, "should_link") ? "\n        </a>\n    " : "\n        </div>\n    ", h += "\n    ";
                var fb;
                fb = d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "badge_count", a.autoesc), c.set("badge_count", fb, !0), c.parent || (b.setVariable("badge_count", fb), b.addExport("badge_count")), h += "\n    ";
                var gb;
                if (gb = "count badge", c.set("base_class", gb, !0), c.parent || (b.setVariable("base_class", gb), b.addExport("base_class")), h += "\n    ", !d.contextOrFrameLookup(b, c, "badge_count")) {
                    h += "\n        ";
                    var hb;
                    hb = d.contextOrFrameLookup(b, c, "base_class") + " hidden", c.set("base_class", hb, !0), c.parent || (b.setVariable("base_class", hb), b.addExport("base_class")), h += "\n    "
                }
                h += "\n    ", h += d.suppressValue((f = 148, g = 11, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    id: "badgeButton",
                    options: {
                        class_name: d.contextOrFrameLookup(b, c, "base_class"),
                        text: d.contextOrFrameLookup(b, c, "badge_count"),
                        borderless: !0,
                        has_icon: !1
                    }
                })])), a.autoesc), h += "\n\n    ";
                var ib;
                if (ib = d.contextOrFrameLookup(b, c, "none"), c.set("first_user_name", ib, !0), c.parent || (b.setVariable("first_user_name", ib), b.addExport("first_user_name")), h += "\n    ", d.contextOrFrameLookup(b, c, "user_count") && (f = 159, g = 35, d.callWrap(d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "users"), 0, a.autoesc), "get", a.autoesc), 'users["0"]["get"]', ["first_name"]))) {
                    h += "\n        ";
                    var jb;
                    jb = d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "users"), 0, a.autoesc), "first_name", a.autoesc), c.set("first_user_name", jb, !0), c.parent || (b.setVariable("first_user_name", jb), b.addExport("first_user_name")), h += "\n    "
                } else if (d.contextOrFrameLookup(b, c, "email_count")) {
                    h += "\n        ";
                    var kb;
                    kb = d.memberLookup(d.contextOrFrameLookup(b, c, "emails"), 0, a.autoesc), c.set("first_user_name", kb, !0), c.parent || (b.setVariable("first_user_name", kb), b.addExport("first_user_name")), h += "\n    "
                }
                h += "\n\n    ", d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "show_name", a.autoesc) && d.contextOrFrameLookup(b, c, "first_user_name") && (h += '\n        <div class="name">\n            <p class="nameText">', h += d.suppressValue(d.contextOrFrameLookup(b, c, "first_user_name"), a.autoesc), h += "\n        </div>\n    "), h += "\n</div>\n", e(null, h)
            } catch (lb) {
                e(d.handleError(lb, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/ConversationListItem/ConversationListItem.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n", a.getTemplate("templates/macros/image.nunjucks", function(i, j) {
                    return i ? void e(i) : void j.getExported(function(i, j) {
                        if (i)
                            return void e(i);
                        if (!j.hasOwnProperty("image_tag"))
                            return void e(new Error("cannot import 'image_tag'"));
                        var k = j.image_tag;
                        b.setVariable("image_tag", k), h += "\n\n";
                        var l;
                        l = d.contextOrFrameLookup(b, c, "data"), c.set("conversation", l, !0), c.parent || (b.setVariable("conversation", l), b.addExport("conversation")), h += "\n";
                        var m;
                        f = 27, g = 29, m = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "conversation"), "get", a.autoesc), 'conversation["get"]', ["users"]) || d.contextOrFrameLookup(b, c, "data"), c.set("users", m, !0), c.parent || (b.setVariable("users", m), b.addExport("users")), h += "\n";
                        var n;
                        f = 28, g = 30, n = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "conversation"), "get", a.autoesc), 'conversation["get"]', ["emails"]) || [], c.set("emails", n, !0), c.parent || (b.setVariable("emails", n), b.addExport("emails")), h += "\n";
                        var o;
                        o = [], c.set("other_users", o, !0), c.parent || (b.setVariable("other_users", o), b.addExport("other_users")), h += "\n\n", c = c.push();
                        var p = d.contextOrFrameLookup(b, c, "users");
                        if (p)
                            for (var q = p.length, r = 0; r < p.length; r++) {
                                var s = p[r];
                                if (c.set("user", s), c.set("loop.index", r + 1), c.set("loop.index0", r), c.set("loop.revindex", q - r), c.set("loop.revindex0", q - r - 1), c.set("loop.first", 0 === r), c.set("loop.last", r === q - 1), c.set("loop.length", q), h += "\n    ", f = 32, g = 16, d.callWrap(d.memberLookup(s, "get", a.autoesc), 'user["get"]', ["id"]) != (f = 32, g = 42, d.callWrap(d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "user", a.autoesc), "get", a.autoesc), 'context["user"]["get"]', ["id"]))) {
                                    h += "\n        ";
                                    var t;
                                    f = 33, g = 30, t = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "other_users"), "append", a.autoesc), 'other_users["append"]', [s]), c.set("_temp_do", t, !0), c.parent || b.setVariable("_temp_do", t), h += "\n    "
                                }
                                h += "\n"
                            }
                        c = c.pop(), h += "\n\n";
                        var u;
                        u = a.getFilter("length").call(b, d.contextOrFrameLookup(b, c, "other_users")) + a.getFilter("length").call(b, d.contextOrFrameLookup(b, c, "emails")), c.set("total_count", u, !0), c.parent || (b.setVariable("total_count", u), b.addExport("total_count")), h += "\n";
                        var v;
                        v = d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "show_is_pinner", a.autoesc), c.set("show_is_pinner", v, !0), c.parent || (b.setVariable("show_is_pinner", v), b.addExport("show_is_pinner")), h += "\n";
                        var w;
                        w = d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "show_selected_state", a.autoesc), c.set("show_selected_state", w, !0), c.parent || (b.setVariable("show_selected_state", w), b.addExport("show_selected_state")), h += "\n";
                        var x;
                        f = 40, g = 41, x = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["conversation_head_size", "small"]), c.set("conversation_head_size", x, !0), c.parent || (b.setVariable("conversation_head_size", x), b.addExport("conversation_head_size")), h += "\n\n";
                        var y;
                        y = d.memberLookup(d.contextOrFrameLookup(b, c, "conversation"), "unread", a.autoesc), c.set("unread", y, !0), c.parent || (b.setVariable("unread", y), b.addExport("unread")), h += "\n", d.contextOrFrameLookup(b, c, "unread") && d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "differentiate_unread_state", a.autoesc) && (h += "\n    ", h += d.suppressValue((f = 44, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["unread"])), a.autoesc), h += "\n"), h += "\n\n", d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "log_element_type", a.autoesc) && (h += "\n    ", h += d.suppressValue((f = 48, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "attr"), "attr", [{
                            "data-element-type": d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "log_element_type", a.autoesc)
                        }
                        ])), a.autoesc), h += "\n"), h += '\n\n<div class="left">\n    ', h += d.suppressValue((f = 52, g = 11, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["ConversationHead", d.makeKeywordArgs({
                            id: "conversationHead",
                            options: {
                                can_close: !1,
                                size: d.contextOrFrameLookup(b, c, "conversation_head_size"),
                                users: d.contextOrFrameLookup(b, c, "other_users"),
                                emails: d.contextOrFrameLookup(b, c, "emails")
                            }
                        })])), a.autoesc), h += '\n</div>\n\n<div class="right">\n    ';
                        var z;
                        f = 64, g = 40, z = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "conversation"), "get", a.autoesc), 'conversation["get"]', ["last_message"]) || {}, c.set("last_message", z, !0), c.parent || (b.setVariable("last_message", z), b.addExport("last_message")), h += "\n    ";
                        var A;
                        f = 65, g = 47, A = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "last_message"), "get", a.autoesc), 'last_message["get"]', ["sender"]) || {}, c.set("last_message_sender", A, !0), c.parent || (b.setVariable("last_message_sender", A), b.addExport("last_message_sender")), h += "\n    ";
                        var B;
                        f = 66, g = 68, B = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "last_message_sender"), "get", a.autoesc), 'last_message_sender["get"]', ["id"]) == (f = 66, g = 94, d.callWrap(d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "user", a.autoesc), "get", a.autoesc), 'context["user"]["get"]', ["id"])), c.set("last_message_sent_by_current_user", B, !0), c.parent || (b.setVariable("last_message_sent_by_current_user", B), b.addExport("last_message_sent_by_current_user")), h += "\n    ";
                        var C;
                        if (C=!1, c.set("last_message_sent_object", C, !0), c.parent || (b.setVariable("last_message_sent_object", C), b.addExport("last_message_sent_object")), h += "\n\n    ", f = 69, g = 24, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "last_message"), "get", a.autoesc), 'last_message["get"]', ["text"])) {
                            h += "\n        ";
                            var D;
                            D = a.getFilter("emojify").call(b, a.getFilter("escape").call(b, (f = 70, g = 49, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "last_message"), "get", a.autoesc), 'last_message["get"]', ["text"])))), c.set("last_message_text", D, !0), c.parent || (b.setVariable("last_message_text", D), b.addExport("last_message_text")), h += "\n        ";
                            var E;
                            if (E = "", c.set("prefix_text", E, !0), c.parent || (b.setVariable("prefix_text", E), b.addExport("prefix_text")), h += "\n        ", d.contextOrFrameLookup(b, c, "last_message_sent_by_current_user")) {
                                h += "\n            ";
                                var F;
                                f = 73, g = 32, F = d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["You"]) + ": ", c.set("prefix_text", F, !0), c.parent || (b.setVariable("prefix_text", F), b.addExport("prefix_text")), h += "\n        "
                            } else if (d.contextOrFrameLookup(b, c, "total_count") > 1) {
                                h += "\n            ", h += "\n            ";
                                var G;
                                f = 76, g = 54, G = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "last_message_sender"), "get", a.autoesc), 'last_message_sender["get"]', ["first_name"]) + ": ", c.set("prefix_text", G, !0), c.parent || (b.setVariable("prefix_text", G), b.addExport("prefix_text")), h += "\n        "
                            }
                            h += "\n        ";
                            var H;
                            H = d.contextOrFrameLookup(b, c, "prefix_text") + d.contextOrFrameLookup(b, c, "last_message_text"), c.set("subtitle_text", H, !0), c.parent || (b.setVariable("subtitle_text", H), b.addExport("subtitle_text")), h += "\n    "
                        } else {
                            h += "\n        ";
                            var I;
                            if (I=!0, c.set("last_message_sent_object", I, !0), c.parent || (b.setVariable("last_message_sent_object", I), b.addExport("last_message_sent_object")), h += "\n        ", f = 81, g = 28, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "last_message"), "get", a.autoesc), 'last_message["get"]', ["user"])) {
                                if (h += "\n            ", d.contextOrFrameLookup(b, c, "last_message_sent_by_current_user")) {
                                    h += "\n                ";
                                    var J;
                                    f = 83, g = 38, J = d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["You sent a Pinner."]), c.set("subtitle_text", J, !0), c.parent || (b.setVariable("subtitle_text", J), b.addExport("subtitle_text")), h += "\n            "
                                } else {
                                    h += "\n                ";
                                    var K;
                                    K = a.getFilter("named_format").call(b, (f = 85, g = 38, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["{{first_name}} sent you a Pinner."])), {
                                        first_name: (f = 86, g = 57, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "last_message_sender"), "get", a.autoesc), 'last_message_sender["get"]', ["first_name"]))
                                    }), c.set("subtitle_text", K, !0), c.parent || (b.setVariable("subtitle_text", K), b.addExport("subtitle_text")), h += "\n            "
                                }
                                h += "\n        "
                            } else if (f = 88, g = 30, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "last_message"), "get", a.autoesc), 'last_message["get"]', ["board"])) {
                                if (h += "\n            ", d.contextOrFrameLookup(b, c, "last_message_sent_by_current_user")) {
                                    h += "\n                ";
                                    var L;
                                    f = 90, g = 38, L = d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["You sent a board."]), c.set("subtitle_text", L, !0), c.parent || (b.setVariable("subtitle_text", L), b.addExport("subtitle_text")), h += "\n            "
                                } else {
                                    h += "\n                ";
                                    var M;
                                    M = a.getFilter("named_format").call(b, (f = 92, g = 38, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["{{first_name}} sent you a board."])), {
                                        first_name: (f = 93, g = 57, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "last_message_sender"), "get", a.autoesc), 'last_message_sender["get"]', ["first_name"]))
                                    }), c.set("subtitle_text", M, !0), c.parent || (b.setVariable("subtitle_text", M), b.addExport("subtitle_text")), h += "\n            "
                                }
                                h += "\n        "
                            } else if (f = 95, g = 30, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "last_message"), "get", a.autoesc), 'last_message["get"]', ["pin"])) {
                                if (h += "\n            ", "message" == d.memberLookup(d.contextOrFrameLookup(b, c, "last_message"), "type", a.autoesc)) {
                                    if (h += "\n                ", d.contextOrFrameLookup(b, c, "last_message_sent_by_current_user")) {
                                        h += "\n                    ";
                                        var N;
                                        f = 98, g = 42, N = d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["You sent a Pin."]), c.set("subtitle_text", N, !0), c.parent || (b.setVariable("subtitle_text", N), b.addExport("subtitle_text")), h += "\n                "
                                    } else {
                                        h += "\n                    ";
                                        var O;
                                        O = a.getFilter("named_format").call(b, (f = 100, g = 42, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["{{first_name}} sent you a Pin."])), {
                                            first_name: (f = 101, g = 61, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "last_message_sender"), "get", a.autoesc), 'last_message_sender["get"]', ["first_name"]))
                                        }), c.set("subtitle_text", O, !0), c.parent || (b.setVariable("subtitle_text", O), b.addExport("subtitle_text")), h += "\n                "
                                    }
                                    h += "\n            "
                                } else if ("like" == d.memberLookup(d.contextOrFrameLookup(b, c, "last_message"), "type", a.autoesc)) {
                                    if (h += "\n                ", d.contextOrFrameLookup(b, c, "last_message_sent_by_current_user")) {
                                        h += "\n                    ";
                                        var P;
                                        f = 105, g = 42, P = d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["You liked a Pin."]), c.set("subtitle_text", P, !0), c.parent || (b.setVariable("subtitle_text", P), b.addExport("subtitle_text")), h += "\n                "
                                    } else {
                                        h += "\n                    ";
                                        var Q;
                                        Q = a.getFilter("named_format").call(b, (f = 107, g = 42, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["{{first_name}} liked a Pin."])), {
                                            first_name: (f = 108, g = 61, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "last_message_sender"), "get", a.autoesc), 'last_message_sender["get"]', ["first_name"]))
                                        }), c.set("subtitle_text", Q, !0), c.parent || (b.setVariable("subtitle_text", Q), b.addExport("subtitle_text")), h += "\n                "
                                    }
                                    h += "\n            "
                                } else if ("repin" == d.memberLookup(d.contextOrFrameLookup(b, c, "last_message"), "type", a.autoesc)) {
                                    if (h += "\n                ", d.contextOrFrameLookup(b, c, "last_message_sent_by_current_user")) {
                                        h += "\n                    ";
                                        var R;
                                        f = 112, g = 42, R = d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["You Pinned a Pin."]), c.set("subtitle_text", R, !0), c.parent || (b.setVariable("subtitle_text", R), b.addExport("subtitle_text")), h += "\n                "
                                    } else {
                                        h += "\n                    ";
                                        var S;
                                        S = a.getFilter("named_format").call(b, (f = 114, g = 42, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["{{first_name}} Pinned a Pin."])), {
                                            first_name: (f = 115, g = 61, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "last_message_sender"), "get", a.autoesc), 'last_message_sender["get"]', ["first_name"]))
                                        }), c.set("subtitle_text", S, !0), c.parent || (b.setVariable("subtitle_text", S), b.addExport("subtitle_text")), h += "\n                "
                                    }
                                    h += "\n            "
                                }
                                h += "\n        "
                            }
                            h += "\n    "
                        }
                        if (h += "\n\n    ", d.contextOrFrameLookup(b, c, "show_is_pinner")) {
                            h += "\n        ";
                            var T;
                            if (T=!1, c.set("last_message_sent_object", T, !0), c.parent || (b.setVariable("last_message_sent_object", T), b.addExport("last_message_sent_object")), h += " ", h += "\n        ", d.contextOrFrameLookup(b, c, "total_count") > 1) {
                                h += "\n            ";
                                var U;
                                f = 124, g = 34, U = d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Group of Pinners"]), c.set("subtitle_text", U, !0), c.parent || (b.setVariable("subtitle_text", U), b.addExport("subtitle_text")), h += "\n        "
                            } else if (1 == d.contextOrFrameLookup(b, c, "total_count") && 1 == a.getFilter("length").call(b, d.contextOrFrameLookup(b, c, "emails"))) {
                                h += "\n            ";
                                var V;
                                f = 126, g = 34, V = d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Email Friend"]), c.set("subtitle_text", V, !0), c.parent || (b.setVariable("subtitle_text", V), b.addExport("subtitle_text")), h += "\n        "
                            } else {
                                h += "\n            ";
                                var W;
                                f = 128, g = 34, W = d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Fellow Pinner"]), c.set("subtitle_text", W, !0), c.parent || (b.setVariable("subtitle_text", W), b.addExport("subtitle_text")), h += "\n        "
                            }
                            h += "\n    "
                        }
                        if (h += "\n\n    ", d.contextOrFrameLookup(b, c, "show_selected_state") ? (h += "\n        ", h += d.suppressValue((f = 133, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["hasSelectedStateAvailable"])), a.autoesc), h += "\n    ") : (h += "\n        ", h += d.suppressValue((f = 135, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["noSelectedStateAvailable"])), a.autoesc), h += "\n    "), h += "\n    ", d.contextOrFrameLookup(b, c, "show_selected_state") && (h += '\n        <div class="titleSubtitleWrapper">\n    '), h += "\n    ", f = 140, g = 19, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["show_last_message_object_preview"]) && d.contextOrFrameLookup(b, c, "last_message_sent_object")) {
                            h += '\n        <div class="lastObjectSent">\n            <div class="lastObjectSentShadowWrapper">\n                ';
                            var X;
                            if (X = d.contextOrFrameLookup(b, c, "none"), c.set("last_message_object_image", X, !0), c.parent || (b.setVariable("last_message_object_image", X), b.addExport("last_message_object_image")), h += "\n                ", f = 144, g = 36, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "last_message"), "get", a.autoesc), 'last_message["get"]', ["pin"])) {
                                h += "\n                    ";
                                var Y;
                                Y = d.memberLookup(d.memberLookup(d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "last_message"), "pin", a.autoesc), "images", a.autoesc), "136x136", a.autoesc), "url", a.autoesc), c.set("last_message_object_image", Y, !0), c.parent || (b.setVariable("last_message_object_image", Y), b.addExport("last_message_object_image")), h += "\n                "
                            } else if (f = 146, g = 38, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "last_message"), "get", a.autoesc), 'last_message["get"]', ["board"])) {
                                h += "\n                    ";
                                var Z;
                                Z = d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "last_message"), "board", a.autoesc), "image_thumbnail_url", a.autoesc), c.set("last_message_object_image", Z, !0), c.parent || (b.setVariable("last_message_object_image", Z), b.addExport("last_message_object_image")), h += "\n                "
                            } else if (f = 148, g = 38, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "last_message"), "get", a.autoesc), 'last_message["get"]', ["user"])) {
                                h += "\n                    ";
                                var $;
                                $ = d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "last_message"), "user", a.autoesc), "image_large_url", a.autoesc), c.set("last_message_object_image", $, !0), c.parent || (b.setVariable("last_message_object_image", $), b.addExport("last_message_object_image")), h += "\n                "
                            }
                            h += "\n                ", d.contextOrFrameLookup(b, c, "last_message_object_image") && (h += "\n                    ", h += d.suppressValue((f = 152, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["showingLastMessageObjectPreview"])), a.autoesc), h += "\n                    ", h += d.suppressValue((f = 153, g = 30, d.callWrap(k, "image_tag", [d.makeKeywordArgs({
                                width: 51,
                                height: 51,
                                src: d.contextOrFrameLookup(b, c, "last_message_object_image"),
                                class_name: "lastMessageSentImage"
                            })])), a.autoesc), h += "\n                "), h += "\n            </div>\n        </div>\n    "
                        }
                        h += "\n    ", f = 163, g = 19, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["hideable"]) && (h += "\n        ", h += d.suppressValue((f = 164, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["hideable"])), a.autoesc), h += "\n        ", h += d.suppressValue((f = 165, g = 15, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                            id: "hideConversation",
                            options: {
                                text: (f = 168, g = 25, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["&times;"])),
                                has_icon: !1,
                                show_text: !0,
                                class_name: "hideableButton",
                                borderless: !0
                            }
                        })])), a.autoesc), h += "\n    "), h += '\n        <h4 class="title">\n            ', c = c.push();
                        var _ = d.contextOrFrameLookup(b, c, "other_users");
                        if (_)
                            for (var ab = _.length, bb = 0; bb < _.length; bb++) {
                                var cb = _[bb];
                                c.set("user", cb), c.set("loop.index", bb + 1), c.set("loop.index0", bb), c.set("loop.revindex", ab - bb), c.set("loop.revindex0", ab - bb - 1), c.set("loop.first", 0 === bb), c.set("loop.last", bb === ab - 1), c.set("loop.length", ab), h += "\n                ";
                                var db;
                                if (f = 178, g = 36, db = d.callWrap(d.memberLookup(cb, "get", a.autoesc), 'user["get"]', ["full_name"]), c.set("text", db, !0), c.parent || (b.setVariable("text", db), b.addExport("text")), h += "\n                ", a.getFilter("length").call(b, d.contextOrFrameLookup(b, c, "other_users")) > 1) {
                                    h += "\n                    ";
                                    var eb;
                                    f = 180, g = 40, eb = d.callWrap(d.memberLookup(cb, "get", a.autoesc), 'user["get"]', ["first_name"]), c.set("text", eb, !0), c.parent || (b.setVariable("text", eb), b.addExport("text")), h += "\n                "
                                }
                                h += "\n                ", f = 182, g = 31, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["clickable_names"]) ? (h += '\n                    <a href="/', h += d.suppressValue(d.memberLookup(cb, "username", a.autoesc), a.autoesc), h += '/"><span>', h += d.suppressValue(d.contextOrFrameLookup(b, c, "text"), a.autoesc), h += "</span></a>\n                ") : (h += "\n                    <span>", h += d.suppressValue(d.contextOrFrameLookup(b, c, "text"), a.autoesc), h += "</span>\n                "), h += "\n                ", (!d.memberLookup(d.contextOrFrameLookup(b, c, "loop"), "last", a.autoesc) || a.getFilter("length").call(b, d.contextOrFrameLookup(b, c, "emails")) > 0) && (h += '\n                    <span class="comma">, </span>\n                '), h += "\n            "
                            }
                        if (c = c.pop(), h += "\n            ", h += d.suppressValue(a.getFilter("join").call(b, d.contextOrFrameLookup(b, c, "emails"), ", "), a.autoesc), h += '\n        </h4>\n        <p class="subtitle', d.contextOrFrameLookup(b, c, "last_message_sent_object") && (h += " sentObject"), h += '">', h += d.suppressValue(a.getFilter("safe").call(b, d.contextOrFrameLookup(b, c, "subtitle_text")), a.autoesc), h += "</p>\n    ", f = 194, g = 19, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["include_timestamp"])) {
                            h += "\n        ", h += d.suppressValue((f = 195, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["hasTimestamp"])), a.autoesc), h += "\n        ";
                            var fb;
                            fb = a.getFilter("humanize_timesince").call(b, (f = 196, g = 54, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "last_message"), "get", a.autoesc), 'last_message["get"]', ["created_at"]))), c.set("last_message_timestamp", fb, !0), c.parent || (b.setVariable("last_message_timestamp", fb), b.addExport("last_message_timestamp")), h += '\n        <p class="timeStamp">\n            ', h += d.suppressValue(d.contextOrFrameLookup(b, c, "last_message_timestamp"), a.autoesc), h += "\n        </p>\n    "
                        }
                        h += "\n    ", d.contextOrFrameLookup(b, c, "show_selected_state") && (h += "\n        </div>\n    "), h += "\n\n    ", d.contextOrFrameLookup(b, c, "show_selected_state") && (h += '\n        <div class="selectedState">\n            <em class="icon"></em>\n        </div>\n    '), h += "\n</div>\n", e(null, h)
                    })
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/ConversationMessage/ConversationMessage.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n";
                var i;
                i = d.contextOrFrameLookup(b, c, "data"), c.set("message", i, !0), c.parent || (b.setVariable("message", i), b.addExport("message")), h += "\n";
                var j;
                if (j = d.memberLookup(d.contextOrFrameLookup(b, c, "message"), "text", a.autoesc), c.set("message_text", j, !0), c.parent || (b.setVariable("message_text", j), b.addExport("message_text")), h += "\n", d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "text", a.autoesc)) {
                    h += "\n    ";
                    var k;
                    k = d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "text", a.autoesc), c.set("message_text", k, !0), c.parent || (b.setVariable("message_text", k), b.addExport("message_text")), h += "\n"
                }
                h += "\n";
                var l;
                l = d.memberLookup(d.contextOrFrameLookup(b, c, "message"), "sender", a.autoesc), c.set("sender", l, !0), c.parent || (b.setVariable("sender", l), b.addExport("sender")), h += "\n";
                var m;
                if (m = d.memberLookup(d.contextOrFrameLookup(b, c, "message"), "pin", a.autoesc), c.set("pin", m, !0), c.parent || (b.setVariable("pin", m), b.addExport("pin")), h += "\n", !d.contextOrFrameLookup(b, c, "pin")) {
                    h += "\n    ";
                    var n;
                    n = d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "pin", a.autoesc), c.set("pin", n, !0), c.parent || (b.setVariable("pin", n), b.addExport("pin")), h += "\n"
                }
                h += "\n";
                var o;
                if (o = d.memberLookup(d.contextOrFrameLookup(b, c, "message"), "board", a.autoesc), c.set("board", o, !0), c.parent || (b.setVariable("board", o), b.addExport("board")), h += "\n", !d.contextOrFrameLookup(b, c, "board")) {
                    h += "\n    ";
                    var p;
                    p = d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "board", a.autoesc), c.set("board", p, !0), c.parent || (b.setVariable("board", p), b.addExport("board")), h += "\n"
                }
                h += "\n";
                var q;
                if (q = d.memberLookup(d.contextOrFrameLookup(b, c, "message"), "user", a.autoesc), c.set("user", q, !0), c.parent || (b.setVariable("user", q), b.addExport("user")), h += "\n", !d.contextOrFrameLookup(b, c, "user")) {
                    h += "\n    ";
                    var r;
                    r = d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "user", a.autoesc), c.set("user", r, !0), c.parent || (b.setVariable("user", r), b.addExport("user")), h += "\n"
                }
                h += "\n\n";
                var s;
                if (s = d.memberLookup(d.contextOrFrameLookup(b, c, "sender"), "id", a.autoesc) == d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "user", a.autoesc), "id", a.autoesc) || d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "is_own_message", a.autoesc), c.set("is_own_message", s, !0), c.parent || (b.setVariable("is_own_message", s), b.addExport("is_own_message")), h += "\n", d.contextOrFrameLookup(b, c, "is_own_message") ? (h += "\n    ", h += d.suppressValue((f = 38, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["isOwnMessage"])), a.autoesc), h += "\n") : (h += "\n    ", h += d.suppressValue((f = 40, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["notOwnMessage"])), a.autoesc), h += "\n"), h += "\n\n", d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "pending", a.autoesc) && (h += "\n    ", h += d.suppressValue((f = 44, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["pending"])), a.autoesc), h += "\n"), h += "\n\n", d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "is_group", a.autoesc) && d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "message"), "sender", a.autoesc), "id", a.autoesc) != d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "user", a.autoesc), "id", a.autoesc) && (h += "\n    ", h += d.suppressValue((f = 48, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["hasConversationHead"])), a.autoesc), h += "\n    ", h += d.suppressValue((f = 49, g = 11, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["ConversationHead", d.makeKeywordArgs({
                    options: {
                        users: [(f = 51, g = 33, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "message"), "get", a.autoesc), 'message["get"]', ["sender"]))],
                        show_title: !0,
                        size: "small",
                        should_link: !0,
                        link: !0,
                        actionable: !1
                    }
                })])), a.autoesc), h += "\n"), h += "\n\n", !d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "hide_object", a.autoesc)) {
                    if (h += "\n    ", d.contextOrFrameLookup(b, c, "pin") ? (h += "\n        ", h += d.suppressValue((f = 63, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["hasPin"])), a.autoesc), h += "\n\n        ", a.getFilter("trim").call(b, d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "description", a.autoesc)) || (h += "\n            ", h += d.suppressValue((f = 66, g = 21, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["hasNoDescription"])), a.autoesc), h += "\n        "), h += "\n\n        ", h += d.suppressValue((f = 69, g = 15, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Pin", d.makeKeywordArgs({
                        data: d.contextOrFrameLookup(b, c, "pin"),
                        resource: (f = 71, g = 36, d.callWrap(d.contextOrFrameLookup(b, c, "create_resource"), "create_resource", ["PinResource", d.makeKeywordArgs({
                            options: {
                                id: d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "id", a.autoesc),
                                field_set_key: "grid_item"
                            }
                        })])),
                        options: {
                            show_comments: !1,
                            hide_pin_credits: !0,
                            show_pinner: !0,
                            no_fade: !0,
                            pin_create_options: {
                                render_existing_pin: !0
                            },
                            squish_giraffe_pins: !0,
                            show_board: !0,
                            hide_edit_button: !0,
                            show_social_counts: !1,
                            send_via_modal: !0
                        },
                        error_strategy: d.memberLookup(d.contextOrFrameLookup(b, c, "ErrorStrategy"), "REMOVE", a.autoesc)
                    })])), a.autoesc), h += "\n    ") : d.contextOrFrameLookup(b, c, "board") ? (h += "\n        ", h += d.suppressValue((f = 92, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["hasBoard"])), a.autoesc), h += "\n        ", h += d.suppressValue((f = 93, g = 15, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Board", d.makeKeywordArgs({
                        data: d.contextOrFrameLookup(b, c, "board"),
                        resource: (f = 95, g = 36, d.callWrap(d.contextOrFrameLookup(b, c, "create_resource"), "create_resource", ["BoardResource", d.makeKeywordArgs({
                            options: {
                                board_id: d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "id", a.autoesc),
                                field_set_key: "grid_item"
                            }
                        })])),
                        options: {
                            show_edit_buttons: !1,
                            show_user_icon: !0
                        },
                        error_strategy: d.memberLookup(d.contextOrFrameLookup(b, c, "ErrorStrategy"), "REMOVE", a.autoesc)
                    })])), a.autoesc), h += "\n    ") : d.contextOrFrameLookup(b, c, "user") && (h += "\n        ", h += d.suppressValue((f = 106, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["hasUser"])), a.autoesc), h += "\n        ", h += d.suppressValue((f = 107, g = 15, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["User", d.makeKeywordArgs({
                        data: d.contextOrFrameLookup(b, c, "user"),
                        resource: (f = 109, g = 36, d.callWrap(d.contextOrFrameLookup(b, c, "create_resource"), "create_resource", ["UserResource", d.makeKeywordArgs({
                            options: {
                                username: d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "username", a.autoesc),
                                field_set_key: "grid_item"
                            }
                        })])),
                        options: {},
                        error_strategy: d.memberLookup(d.contextOrFrameLookup(b, c, "ErrorStrategy"), "REMOVE", a.autoesc)
                    })])), a.autoesc), h += "\n    "), h += "\n\n    ", d.contextOrFrameLookup(b, c, "is_own_message")&&!d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "pending", a.autoesc)) {
                        if (h += "\n        ", d.contextOrFrameLookup(b, c, "pin")) {
                            h += "\n            ";
                            var t;
                            f = 120, g = 30, t = d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Pin sent"]), c.set("sent_text", t, !0), c.parent || (b.setVariable("sent_text", t), b.addExport("sent_text")), h += "\n        "
                        } else if (d.contextOrFrameLookup(b, c, "board")) {
                            h += "\n            ";
                            var u;
                            f = 122, g = 30, u = d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Board sent"]), c.set("sent_text", u, !0), c.parent || (b.setVariable("sent_text", u), b.addExport("sent_text")), h += "\n        "
                        } else if (d.contextOrFrameLookup(b, c, "user")) {
                            h += "\n            ";
                            var v;
                            f = 124, g = 30, v = d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Pinner sent"]), c.set("sent_text", v, !0), c.parent || (b.setVariable("sent_text", v), b.addExport("sent_text")), h += "\n        "
                        }
                        h += "\n        ", d.contextOrFrameLookup(b, c, "sent_text") && (h += '\n            <div class="msgObjectSent">', h += d.suppressValue(d.contextOrFrameLookup(b, c, "sent_text"), a.autoesc), h += "</div>\n        "), h += "\n    "
                    }
                    h += "\n"
                }
                h += '\n\n<em class="messageCaret"></em>\n', d.contextOrFrameLookup(b, c, "message_text")&&!d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "hide_text", a.autoesc) && (h += "\n    <p>", h += d.suppressValue(a.getFilter("emojify").call(b, a.getFilter("linkify").call(b, d.contextOrFrameLookup(b, c, "message_text"))), a.autoesc), h += "</p>\n"), h += "\n", e(null, h)
            } catch (w) {
                e(d.handleError(w, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/ConversationMessages/ConversationMessages.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n";
                var i;
                i = d.contextOrFrameLookup(b, c, "data"), c.set("conversation_messages", i, !0), c.parent || (b.setVariable("conversation_messages", i), b.addExport("conversation_messages")), h += "\n";
                var j;
                j = d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "prevent_empty", a.autoesc), c.set("prevent_empty", j, !0), c.parent || (b.setVariable("prevent_empty", j), b.addExport("prevent_empty")), h += "\n", 0 != a.getFilter("length").call(b, d.contextOrFrameLookup(b, c, "conversation_messages")) || d.contextOrFrameLookup(b, c, "prevent_empty") || (h += "\n    ", h += d.suppressValue((f = 16, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["empty"])), a.autoesc), h += '\n    <div class="emptyState">\n        <p>', h += d.suppressValue((f = 18, g = 12, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Drag in a Pin!"])), a.autoesc), h += "</p>\n    </div>\n"), h += "\n", h += "\n";
                var k;
                k = {}, c.set("last_user", k, !0), c.parent || (b.setVariable("last_user", k), b.addExport("last_user")), h += "\n";
                var l;
                l = {
                    time: (f = 26, g = 49, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["last_message_time", 0]))
                }, c.set("previous_message_time", l, !0), c.parent || (b.setVariable("previous_message_time", l), b.addExport("previous_message_time")), h += "\n";
                var m;
                m = {}, c.set("previous_event_messages", m, !0), c.parent || (b.setVariable("previous_event_messages", m), b.addExport("previous_event_messages")), h += "\n\n";
                var n = d.makeMacro(["message_data"], [], function(e, h) {
                    c = c.push(), h = h || {}, h.hasOwnProperty("caller") && c.set("caller", h.caller), c.set("message_data", e);
                    var i = "";
                    i += "\n    ";
                    var j;
                    if (f = 30, g = 38, j = d.callWrap(d.memberLookup(e, "get", a.autoesc), 'message_data["get"]', ["type"]), c.set("event_type", j, !0), c.parent || (b.setVariable("event_type", j), b.addExport("event_type")), i += "\n    ", "like" == d.contextOrFrameLookup(b, c, "event_type")) {
                        i += "\n        ";
                        var k;
                        k = "ConversationPinLikeMessage", c.set("module_name", k, !0), c.parent || (b.setVariable("module_name", k), b.addExport("module_name")), i += "\n    "
                    } else if ("repin" == d.contextOrFrameLookup(b, c, "event_type")) {
                        i += "\n        ";
                        var l;
                        l = "ConversationRepinMessage", c.set("module_name", l, !0), c.parent || (b.setVariable("module_name", l), b.addExport("module_name")), i += "\n    "
                    }
                    return i += "\n    ", d.contextOrFrameLookup(b, c, "module_name") && (i += '\n        <li class="messageWrapper">\n            ', i += d.suppressValue((f = 38, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", [d.contextOrFrameLookup(b, c, "module_name"), d.makeKeywordArgs({
                        options: {
                            is_group: d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "is_group", a.autoesc),
                            hide_top_border: (f = 42, g = 55, d.callWrap(d.memberLookup(e, "get", a.autoesc), 'message_data["get"]', ["hide_top_border"]))
                        },
                        data: (f = 44, g = 37, d.callWrap(d.memberLookup(e, "get", a.autoesc), 'message_data["get"]', ["messages"]))
                    })])), a.autoesc), i += "\n        </li>\n    "), i += "\n", c = c.pop(), new d.SafeString(i)
                });
                b.addExport("render_pin_event_message"), b.setVariable("render_pin_event_message", n), h += "\n\n", c = c.push();
                var o = d.contextOrFrameLookup(b, c, "conversation_messages");
                if (o)
                    for (var p = o.length, q = 0; q < o.length; q++) {
                        var r = o[q];
                        c.set("message", r), c.set("loop.index", q + 1), c.set("loop.index0", q), c.set("loop.revindex", p - q), c.set("loop.revindex0", p - q - 1), c.set("loop.first", 0 === q), c.set("loop.last", q === p - 1), c.set("loop.length", p), h += "\n    ";
                        var s;
                        s = d.memberLookup(r, "sender", a.autoesc), c.set("message_sender", s, !0), c.parent || (b.setVariable("message_sender", s), b.addExport("message_sender")), h += "\n    ";
                        var t;
                        t = d.memberLookup(d.contextOrFrameLookup(b, c, "message_sender"), "id", a.autoesc), c.set("message_sender_id", t, !0), c.parent || (b.setVariable("message_sender_id", t), b.addExport("message_sender_id")), h += "\n    ";
                        var u;
                        u = d.memberLookup(r, "type", a.autoesc), c.set("message_type", u, !0), c.parent || (b.setVariable("message_type", u), b.addExport("message_type")), h += "\n\n    ";
                        var v;
                        if (v = "message" != d.contextOrFrameLookup(b, c, "message_type") && d.contextOrFrameLookup(b, c, "message_type") == (f = 56, g = 55, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "previous_event_messages"), "get", a.autoesc), 'previous_event_messages["get"]', ["type"])) && d.contextOrFrameLookup(b, c, "message_sender_id") == (f = 57, g = 60, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "previous_event_messages"), "get", a.autoesc), 'previous_event_messages["get"]', ["sender_id"])), c.set("should_aggregate_message", v, !0), c.parent || (b.setVariable("should_aggregate_message", v), b.addExport("should_aggregate_message")), h += "\n\n    ", d.contextOrFrameLookup(b, c, "should_aggregate_message")) {
                            h += "\n        ";
                            var w;
                            f = 73, g = 58, w = d.callWrap(d.memberLookup((f = 73, g = 39, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "previous_event_messages"), "get", a.autoesc), 'previous_event_messages["get"]', ["messages"])), "append", a.autoesc), 'the return value of (previous_event_messages["get"])["append"]', [r]), c.set("_temp_do", w, !0), c.parent || b.setVariable("_temp_do", w), h += "\n    "
                        } else {
                            h += "\n        ", "message" != (f = 60, g = 39, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "previous_event_messages"), "get", a.autoesc), 'previous_event_messages["get"]', ["type"])) && a.getFilter("length").call(b, (f = 61, g = 41, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "previous_event_messages"), "get", a.autoesc), 'previous_event_messages["get"]', ["messages"]))) && (h += "\n            ", h += d.suppressValue((f = 62, g = 37, d.callWrap(n, "render_pin_event_message", [d.contextOrFrameLookup(b, c, "previous_event_messages")])), a.autoesc), h += "\n        "), h += "\n        ";
                            var x;
                            f = 64, g = 60, x = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "previous_event_messages"), "get", a.autoesc), 'previous_event_messages["get"]', ["type"]), c.set("prev_message_type", x, !0), c.parent || (b.setVariable("prev_message_type", x), b.addExport("prev_message_type")), h += "\n        ";
                            var y;
                            f = 65, g = 42, y = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "previous_event_messages"), "update", a.autoesc), 'previous_event_messages["update"]', [{
                                type: d.contextOrFrameLookup(b, c, "message_type"),
                                sender_id: d.contextOrFrameLookup(b, c, "message_sender_id"),
                                messages: [r],
                                hide_top_border: "message" != d.contextOrFrameLookup(b, c, "prev_message_type")
                            }
                            ]), c.set("_temp_do", y, !0), c.parent || b.setVariable("_temp_do", y), h += "\n    "
                        }
                        if (h += "\n\n    ", "message" == d.contextOrFrameLookup(b, c, "message_type")) {
                            h += '\n        <li class="messageWrapper">\n            ';
                            var z;
                            f = 78, g = 43, z = d.callWrap(d.memberLookup(r, "get", a.autoesc), 'message["get"]', ["created_at"]), c.set("message_time", z, !0), c.parent || (b.setVariable("message_time", z), b.addExport("message_time")), h += "\n            ";
                            var A;
                            if (A = a.getFilter("should_include_timestamp").call(b, d.contextOrFrameLookup(b, c, "message_time"), d.makeKeywordArgs({
                                chunk_time: 3600,
                                previous_message_time: (f = 80, g = 85, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "previous_message_time"), "get", a.autoesc), 'previous_message_time["get"]', ["time"]))
                            })), c.set("should_show_timestamp", A, !0), c.parent || (b.setVariable("should_show_timestamp", A), b.addExport("should_show_timestamp")), h += "\n            ", d.contextOrFrameLookup(b, c, "should_show_timestamp")) {
                                h += "\n                ";
                                var B;
                                if (B = a.getFilter("humanize_timesince").call(b, d.contextOrFrameLookup(b, c, "message_time")), c.set("humanized_time", B, !0), c.parent || (b.setVariable("humanized_time", B), b.addExport("humanized_time")), h += "\n                ", d.contextOrFrameLookup(b, c, "humanized_time") != d.contextOrFrameLookup(b, c, "previous_humanized_time")) {
                                    h += '\n                    <p class="timeSeparator', 0 == d.memberLookup(d.contextOrFrameLookup(b, c, "loop"), "index0", a.autoesc) && (h += " firstItem"), h += '">\n                        ', h += d.suppressValue(d.contextOrFrameLookup(b, c, "humanized_time"), a.autoesc), h += "\n                    </p>\n                    ";
                                    var C;
                                    C = d.contextOrFrameLookup(b, c, "humanized_time"), c.set("previous_humanized_time", C, !0), c.parent || (b.setVariable("previous_humanized_time", C), b.addExport("previous_humanized_time")), h += "\n                "
                                }
                                h += "\n            "
                            }
                            h += "\n            ";
                            var D;
                            f = 90, g = 44, D = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "previous_message_time"), "update", a.autoesc), 'previous_message_time["update"]', [{
                                time: d.contextOrFrameLookup(b, c, "message_time")
                            }
                            ]), c.set("_temp_do", D, !0), c.parent || b.setVariable("_temp_do", D), h += "\n    \n            ";
                            var E;
                            if (E = d.memberLookup(d.contextOrFrameLookup(b, c, "message_sender"), "full_name", a.autoesc), c.set("message_sender_fullname", E, !0), c.parent || (b.setVariable("message_sender_fullname", E), b.addExport("message_sender_fullname")), h += "\n            ", d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "is_group", a.autoesc) && d.contextOrFrameLookup(b, c, "message_sender_id") != d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "user", a.autoesc), "id", a.autoesc) && d.contextOrFrameLookup(b, c, "message_sender_id") != (f = 94, g = 93, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "last_user"), "get", a.autoesc), 'last_user["get"]', ["id"]))) {
                                h += '\n                <div class="messageSender">\n                    ', h += d.suppressValue(d.contextOrFrameLookup(b, c, "message_sender_fullname"), a.autoesc), h += "\n                    ";
                                var F;
                                f = 97, g = 40, F = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "last_user"), "update", a.autoesc), 'last_user["update"]', [{
                                    id: d.memberLookup(d.memberLookup(r, "sender", a.autoesc), "id", a.autoesc)
                                }
                                ]), c.set("_temp_do", F, !0), c.parent || b.setVariable("_temp_do", F), h += "\n                </div>\n            "
                            }
                            h += "\n            ", f = 100, g = 27, (d.callWrap(d.memberLookup(r, "get", a.autoesc), 'message["get"]', ["pin"]) || (f = 100, g = 49, d.callWrap(d.memberLookup(r, "get", a.autoesc), 'message["get"]', ["board"])) || (f = 100, g = 73, d.callWrap(d.memberLookup(r, "get", a.autoesc), 'message["get"]', ["user"]))) && (h += "\n                ", h += d.suppressValue((f = 101, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["ConversationMessage", d.makeKeywordArgs({
                                options: {
                                    hide_text: !0,
                                    is_group: d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "is_group", a.autoesc)
                                },
                                data: r,
                                resource: d.contextOrFrameLookup(b, c, "resource")
                            })])), a.autoesc), h += "\n            "), h += "\n            ", f = 110, g = 27, d.callWrap(d.memberLookup(r, "get", a.autoesc), 'message["get"]', ["text"]) && (h += "\n                ", h += d.suppressValue((f = 111, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["ConversationMessage", d.makeKeywordArgs({
                                options: {
                                    hide_object: !0,
                                    is_group: d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "is_group", a.autoesc)
                                },
                                data: r,
                                resource: d.contextOrFrameLookup(b, c, "resource")
                            })])), a.autoesc), h += "\n            "), h += "\n        </li>\n    "
                        }
                        h += "\n"
                    }
                c = c.pop(), h += "\n\n", "message" != (f = 124, g = 31, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "previous_event_messages"), "get", a.autoesc), 'previous_event_messages["get"]', ["type"])) && a.getFilter("length").call(b, (f = 125, g = 33, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "previous_event_messages"), "get", a.autoesc), 'previous_event_messages["get"]', ["messages"]))) && (h += "\n    ", h += d.suppressValue((f = 126, g = 29, d.callWrap(n, "render_pin_event_message", [d.contextOrFrameLookup(b, c, "previous_event_messages")])), a.autoesc), h += "\n"), h += "\n", e(null, h)
            } catch (G) {
                e(d.handleError(G, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/ConversationPinLikeMessage/ConversationPinLikeMessage.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n", h += d.suppressValue((f = 10, g = 1, d.callWrap(d.contextOrFrameLookup(b, c, "base"), "base", ["ConversationEventMessageBase"])), a.autoesc), a.getTemplate("app/common/modules/ConversationEventMessageBase/ConversationEventMessageBase.nunjucks", !0, function(f, g) {
                    if (f)
                        return void e(f);
                    for (var i in g.blocks)
                        b.addBlock(i, g.blocks[i]);
                    h += "\n\n";
                    var j;
                    j = a.getFilter("length").call(b, d.contextOrFrameLookup(b, c, "data")), c.set("number_of_pins", j, !0), c.parent || (b.setVariable("number_of_pins", j), b.addExport("number_of_pins")), h += "\n\n", h += "\n", g.rootRenderFunc(a, b, c, d, e)
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function b(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                if (h += "\n    ", d.memberLookup(d.contextOrFrameLookup(b, c, "sender"), "id", a.autoesc) == d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "user", a.autoesc), "id", a.autoesc)) {
                    h += "\n        ";
                    var i = d.makeMacro([], [], function(e) {
                        c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                        var h, i = "";
                        return h = {
                            count: d.contextOrFrameLookup(b, c, "number_of_pins")
                        }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 16, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 16, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_ngettext"), "_ngettext", ["You liked a Pin in this conversation.", "You liked {{ count }} Pins in this conversation.", d.memberLookup(d.contextOrFrameLookup(b, c, "__dict"), "count", a.autoesc)])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                    });
                    b.setVariable("_doTranslation", i), h += d.suppressValue((f = 16, g = 9, d.callWrap(i, "_doTranslation", [])), a.autoesc), h += "\n    "
                } else {
                    if (h += "\n        ", d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "is_group", a.autoesc)) {
                        h += "\n            ";
                        var j = d.makeMacro([], [], function(e) {
                            c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                            var h, i = "";
                            return h = {
                                count: d.contextOrFrameLookup(b, c, "number_of_pins"),
                                username: d.memberLookup(d.contextOrFrameLookup(b, c, "sender"), "username", a.autoesc),
                                first_name: d.memberLookup(d.contextOrFrameLookup(b, c, "sender"), "first_name", a.autoesc)
                            }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 23, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 23, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_ngettext"), "_ngettext", ['<a href="/{{username}}/">{{ first_name }}</a> liked a Pin in this conversation.', '<a href="/{{username}}/">{{ first_name }}</a> liked {{ count }} Pins in this conversation.', d.memberLookup(d.contextOrFrameLookup(b, c, "__dict"), "count", a.autoesc)])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                        });
                        b.setVariable("_doTranslation", j), h += d.suppressValue((f = 23, g = 13, d.callWrap(j, "_doTranslation", [])), a.autoesc), h += "\n        "
                    } else {
                        h += "\n            ";
                        var k = d.makeMacro([], [], function(e) {
                            c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                            var h, i = "";
                            return h = {
                                count: d.contextOrFrameLookup(b, c, "number_of_pins"),
                                username: d.memberLookup(d.contextOrFrameLookup(b, c, "sender"), "username", a.autoesc),
                                first_name: d.memberLookup(d.contextOrFrameLookup(b, c, "sender"), "first_name", a.autoesc)
                            }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 30, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 30, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_ngettext"), "_ngettext", ['<a href="/{{username}}/">{{ first_name }}</a> liked a Pin you sent.', '<a href="/{{username}}/">{{ first_name }}</a> liked {{ count }} Pins you sent.', d.memberLookup(d.contextOrFrameLookup(b, c, "__dict"), "count", a.autoesc)])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                        });
                        b.setVariable("_doTranslation", k), h += d.suppressValue((f = 30, g = 13, d.callWrap(k, "_doTranslation", [])), a.autoesc), h += "\n        "
                    }
                    h += "\n    "
                }
                h += "\n", e(null, h)
            } catch (l) {
                e(d.handleError(l, f, g))
            }
        }
        return {
            b_message_title: b,
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/ConversationPopup/ConversationPopup.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n";
                var i;
                i = d.contextOrFrameLookup(b, c, "data"), c.set("conversation", i, !0), c.parent || (b.setVariable("conversation", i), b.addExport("conversation")), h += "\n";
                var j;
                f = 16, g = 29, j = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "conversation"), "get", a.autoesc), 'conversation["get"]', ["users"]), c.set("users", j, !0), c.parent || (b.setVariable("users", j), b.addExport("users")), h += "\n";
                var k;
                k = a.getFilter("length").call(b, d.contextOrFrameLookup(b, c, "users")), c.set("user_count", k, !0), c.parent || (b.setVariable("user_count", k), b.addExport("user_count")), h += "\n";
                var l;
                f = 18, g = 30, l = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "conversation"), "get", a.autoesc), 'conversation["get"]', ["emails"]) || [], c.set("emails", l, !0), c.parent || (b.setVariable("emails", l), b.addExport("emails")), h += "\n";
                var m;
                m = a.getFilter("length").call(b, d.contextOrFrameLookup(b, c, "emails")), c.set("emails_count", m, !0), c.parent || (b.setVariable("emails_count", m), b.addExport("emails_count")), h += "\n";
                var n;
                n = d.contextOrFrameLookup(b, c, "user_count") + d.contextOrFrameLookup(b, c, "emails_count"), c.set("total_count", n, !0), c.parent || (b.setVariable("total_count", n), b.addExport("total_count")), h += "\n";
                var o;
                f = 21, g = 23, o = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["peek"]), c.set("peek", o, !0), c.parent || (b.setVariable("peek", o), b.addExport("peek")), h += "\n";
                var p;
                f = 22, g = 25, p = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["unauth"]), c.set("unauth", p, !0), c.parent || (b.setVariable("unauth", p), b.addExport("unauth")), h += "\n\n";
                var q;
                if (f = 24, g = 37, q = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["popup_log_component_type"]), c.set("log_component_type", q, !0), c.parent || (b.setVariable("log_component_type", q), b.addExport("log_component_type")), h += "\n", d.contextOrFrameLookup(b, c, "log_component_type") && (h += "\n    ", h += d.suppressValue((f = 26, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "attr"), "attr", [{
                    "data-component-type": d.contextOrFrameLookup(b, c, "log_component_type")
                }
                ])), a.autoesc), h += "\n"), h += "\n\n", d.contextOrFrameLookup(b, c, "unauth")) {
                    h += "\n    ";
                    var r;
                    r = d.memberLookup(d.contextOrFrameLookup(b, c, "users"), 0, a.autoesc), c.set("sender", r, !0), c.parent || (b.setVariable("sender", r), b.addExport("sender")), h += '\n    <div class="convosHeader">\n        <div class="left">\n            <h1 class="convosTitle">\n                ', h += d.suppressValue((f = 34, g = 27, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "sender"), "get", a.autoesc), 'sender["get"]', ["full_name"])), a.autoesc), h += '\n            </h1>\n        </div>\n        <div class="right">\n            ', h += d.suppressValue((f = 38, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                        id: "closeChatButton",
                        options: {
                            text: (f = 41, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Close"])),
                            cancelButton: !0,
                            show_text: !1,
                            borderless: !0,
                            has_icon: !0,
                            class_name: "conversationClose"
                        }
                    })])), a.autoesc), h += '\n        </div>\n    </div>\n    <div class="messagesContainer">\n        <ul class="conversationMessagesList">\n            <div class="messagesContent isLoggedOutState">\n                <li class="messageWrapper">\n                    ', h += d.suppressValue((f = 55, g = 27, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["ConversationMessage", d.makeKeywordArgs({
                        options: {
                            hide_object: !0
                        },
                        data: {
                            text: a.getFilter("named_format").call(b, (f = 58, g = 37, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["{{ first_name }} has sent you a message!"])), {
                                first_name: (f = 59, g = 56, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "sender"), "get", a.autoesc), 'sender["get"]', ["first_name"]))
                            }),
                            sender: {
                                id: d.memberLookup(d.contextOrFrameLookup(b, c, "sender"), "id", a.autoesc)
                            }
                        }
                    })])), a.autoesc), h += '\n                </li>\n            </div>\n        </ul>\n    </div>\n    <div class="joinButtonWrapper">\n        ', h += d.suppressValue((f = 69, g = 15, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["JoinButton", d.makeKeywordArgs({
                        id: "joinToReplyButton",
                        options: {
                            ga_category: "unauth_message_join",
                            text: a.getFilter("named_format").call(b, (f = 73, g = 25, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Join Pinterest to reply to {{ first_name }}"])), {
                                first_name: (f = 74, g = 44, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "sender"), "get", a.autoesc), 'sender["get"]', ["first_name"]))
                            }),
                            show_text: !0,
                            color: "primary",
                            log_element_type: d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "SIGNUP_BUTTON", a.autoesc)
                        }
                    })])), a.autoesc), h += "\n    </div>\n"
                } else {
                    if (h += '\n    <div class="convosHeader">\n        <div class="left">\n            <h1 class="convosTitle">\n                ', d.contextOrFrameLookup(b, c, "total_count") > 1) {
                        h += "\n                    ", c = c.push();
                        var s = d.contextOrFrameLookup(b, c, "users");
                        if (s)
                            for (var t = s.length, u = 0; u < s.length; u++) {
                                var v = s[u];
                                c.set("user", v), c.set("loop.index", u + 1), c.set("loop.index0", u), c.set("loop.revindex", t - u), c.set("loop.revindex0", t - u - 1), c.set("loop.first", 0 === u), c.set("loop.last", u === t - 1), c.set("loop.length", t), h += '\n                        <a href="/', h += d.suppressValue((f = 88, g = 43, d.callWrap(d.memberLookup(v, "get", a.autoesc), 'user["get"]', ["username"])), a.autoesc), h += '/">', h += d.suppressValue((f = 89, g = 36, d.callWrap(d.memberLookup(v, "get", a.autoesc), 'user["get"]', ["first_name"])), a.autoesc), h += "</a>", (!d.memberLookup(d.contextOrFrameLookup(b, c, "loop"), "last", a.autoesc) || a.getFilter("length").call(b, d.contextOrFrameLookup(b, c, "emails")) > 0) && (h += ", "), h += "\n                    "
                            }
                        c = c.pop(), h += "\n                    ", c = c.push();
                        var w = d.contextOrFrameLookup(b, c, "emails");
                        if (w)
                            for (var x = w.length, y = 0; y < w.length; y++) {
                                var z = w[y];
                                c.set("email", z), c.set("loop.index", y + 1), c.set("loop.index0", y), c.set("loop.revindex", x - y), c.set("loop.revindex0", x - y - 1), c.set("loop.first", 0 === y), c.set("loop.last", y === x - 1), c.set("loop.length", x), h += "\n                        ", d.memberLookup(d.contextOrFrameLookup(b, c, "loop"), "first", a.autoesc) || (h += ", "), h += d.suppressValue(z, a.autoesc), h += "\n                    "
                            }
                        c = c.pop(), h += "\n                "
                    } else {
                        if (h += "\n                    ", d.contextOrFrameLookup(b, c, "user_count")) {
                            h += "\n                        ";
                            var A;
                            A = d.memberLookup(d.contextOrFrameLookup(b, c, "users"), 0, a.autoesc), c.set("user", A, !0), c.parent || (b.setVariable("user", A), b.addExport("user")), h += '\n                        <a href="/', h += d.suppressValue((f = 97, g = 43, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "get", a.autoesc), 'user["get"]', ["username"])), a.autoesc), h += '/">', h += d.suppressValue((f = 97, g = 68, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "get", a.autoesc), 'user["get"]', ["full_name"])), a.autoesc), h += "</a>\n                    "
                        } else 
                            h += "\n                        ", h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "emails"), 0, a.autoesc), a.autoesc), h += "\n                    ";
                        h += "\n                "
                    }
                    h += '\n            </h1>\n        </div>\n\n        <div class="right">\n            ', h += d.suppressValue((f = 106, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                        id: "addPersonButton",
                        options: {
                            text: (f = 109, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Add Person"])),
                            cancelButton: !1,
                            show_text: !1,
                            borderless: !0,
                            has_icon: !0,
                            class_name: "addPersonToActiveChat hidden"
                        }
                    })])), a.autoesc), h += "\n            ", h += d.suppressValue((f = 117, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["ShowModalButton", d.makeKeywordArgs({
                        id: "reportButton",
                        options: {
                            class_name: "reportMsgButton",
                            has_icon: !0,
                            show_text: !1,
                            borderless: !0,
                            text: (f = 124, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Report Message"])),
                            submodule: {
                                name: "FlagConversation",
                                options: {
                                    class_name: "blockInput",
                                    object_flagged: "conversation",
                                    show_confirmation_on_change: !0,
                                    users: d.contextOrFrameLookup(b, c, "users"),
                                    conversation: d.contextOrFrameLookup(b, c, "conversation")
                                }
                            }
                        }
                    })])), a.autoesc), h += "\n            ", h += d.suppressValue((f = 137, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                        id: "closeChatButton",
                        options: {
                            text: (f = 140, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Close"])),
                            cancelButton: !0,
                            show_text: !1,
                            borderless: !0,
                            has_icon: !0,
                            class_name: "conversationClose"
                        }
                    })])), a.autoesc), h += '\n        </div>\n    </div>\n\n    <div class="messagesContainer">\n        <div class="dropTarget">\n            <p>', h += d.suppressValue((f = 153, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Drag here to send"])), a.autoesc), h += '</p>\n        </div>\n        <ul class="conversationMessagesList">\n            <div class="spinner"></div>\n            ', h += '\n            <div class="messagesContent">\n                ', h += d.suppressValue((f = 161, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["ConversationMessages", d.makeKeywordArgs({
                        id: "messages",
                        options: {
                            is_group: d.contextOrFrameLookup(b, c, "total_count") > 1,
                            emails: d.contextOrFrameLookup(b, c, "emails")
                        },
                        async: !0,
                        resource: (f = 168, g = 44, d.callWrap(d.contextOrFrameLookup(b, c, "create_resource"), "create_resource", ["ConversationMessagesResource", d.makeKeywordArgs({
                            options: {
                                conversation_id: (f = 170, g = 58, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["id"])),
                                peek: d.contextOrFrameLookup(b, c, "peek")
                            }
                        })]))
                    })])), a.autoesc), h += "\n                ", d.contextOrFrameLookup(b, c, "emails_count") > 0 && (h += '\n                    <p class="emailSentText">\n                        ', h += d.suppressValue((f = 177, g = 26, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Message sent!"])), a.autoesc), h += "<br>\n                        ", h += d.suppressValue((f = 178, g = 26, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["To message you back, your friend will need to sign up for Pinterest"])), a.autoesc), h += "\n                    </p>\n                "), h += '\n            </div>\n        </ul>\n    </div>\n\n    <div class="inputWrapper">\n        ', h += "\n        ";
                    var B;
                    B = 32, c.set("max_input_height", B, !0), c.parent || (b.setVariable("max_input_height", B), b.addExport("max_input_height")), h += "\n    \n        ", h += d.suppressValue((f = 189, g = 15, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["ui.TextField", d.makeKeywordArgs({
                        id: "textField",
                        options: {
                            autofocus: !0,
                            autogrow: !0,
                            prevent_default_on_enter: !0,
                            maxheight: d.contextOrFrameLookup(b, c, "max_input_height"),
                            placeholder: (f = 196, g = 32, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Add a message"]))
                        }
                    })])), a.autoesc), h += " \n    </div>\n"
                }
                h += "\n", e(null, h)
            } catch (C) {
                e(d.handleError(C, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/ConversationRepinMessage/ConversationRepinMessage.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n", h += d.suppressValue((f = 10, g = 1, d.callWrap(d.contextOrFrameLookup(b, c, "base"), "base", ["ConversationEventMessageBase"])), a.autoesc), a.getTemplate("app/common/modules/ConversationEventMessageBase/ConversationEventMessageBase.nunjucks", !0, function(f, g) {
                    if (f)
                        return void e(f);
                    for (var i in g.blocks)
                        b.addBlock(i, g.blocks[i]);
                    h += "\n\n";
                    var j;
                    j = a.getFilter("length").call(b, d.contextOrFrameLookup(b, c, "data")), c.set("number_of_pins", j, !0), c.parent || (b.setVariable("number_of_pins", j), b.addExport("number_of_pins")), h += "\n\n", h += "\n", g.rootRenderFunc(a, b, c, d, e)
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function b(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                if (h += "\n    ", d.memberLookup(d.contextOrFrameLookup(b, c, "sender"), "id", a.autoesc) == d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "user", a.autoesc), "id", a.autoesc)) {
                    h += "\n        ";
                    var i = d.makeMacro([], [], function(e) {
                        c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                        var h, i = "";
                        return h = {
                            count: d.contextOrFrameLookup(b, c, "number_of_pins")
                        }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 16, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 16, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_ngettext"), "_ngettext", ["You Pinned a Pin in this conversation.", "You Pinned {{ count }} Pins in this conversation.", d.memberLookup(d.contextOrFrameLookup(b, c, "__dict"), "count", a.autoesc)])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                    });
                    b.setVariable("_doTranslation", i), h += d.suppressValue((f = 16, g = 9, d.callWrap(i, "_doTranslation", [])), a.autoesc), h += "\n    "
                } else {
                    if (h += "\n        ", d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "is_group", a.autoesc)) {
                        h += "\n            ";
                        var j = d.makeMacro([], [], function(e) {
                            c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                            var h, i = "";
                            return h = {
                                count: d.contextOrFrameLookup(b, c, "number_of_pins"),
                                username: d.memberLookup(d.contextOrFrameLookup(b, c, "sender"), "username", a.autoesc),
                                first_name: d.memberLookup(d.contextOrFrameLookup(b, c, "sender"), "first_name", a.autoesc)
                            }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 23, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 23, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_ngettext"), "_ngettext", ['<a href="/{{username}}/">{{ first_name }}</a> Pinned a Pin in this conversation.', '<a href="/{{username}}/">{{ first_name }}</a> Pinned {{ count }} Pins in this conversation.', d.memberLookup(d.contextOrFrameLookup(b, c, "__dict"), "count", a.autoesc)])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                        });
                        b.setVariable("_doTranslation", j), h += d.suppressValue((f = 23, g = 13, d.callWrap(j, "_doTranslation", [])), a.autoesc), h += "\n        "
                    } else {
                        h += "\n            ";
                        var k = d.makeMacro([], [], function(e) {
                            c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                            var h, i = "";
                            return h = {
                                count: d.contextOrFrameLookup(b, c, "number_of_pins"),
                                username: d.memberLookup(d.contextOrFrameLookup(b, c, "sender"), "username", a.autoesc),
                                first_name: d.memberLookup(d.contextOrFrameLookup(b, c, "sender"), "first_name", a.autoesc)
                            }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 30, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 30, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_ngettext"), "_ngettext", ['<a href="/{{username}}/">{{ first_name }}</a> Pinned a Pin you sent.', '<a href="/{{username}}/">{{ first_name }}</a> Pinned {{ count }} Pins you sent.', d.memberLookup(d.contextOrFrameLookup(b, c, "__dict"), "count", a.autoesc)])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                        });
                        b.setVariable("_doTranslation", k), h += d.suppressValue((f = 30, g = 13, d.callWrap(k, "_doTranslation", [])), a.autoesc), h += "\n        "
                    }
                    h += "\n    "
                }
                h += "\n", e(null, h)
            } catch (l) {
                e(d.handleError(l, f, g))
            }
        }
        return {
            b_message_title: b,
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/ConversationsList/ConversationsList.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n";
                var i;
                i = [], c.set("list_items", i, !0), c.parent || (b.setVariable("list_items", i), b.addExport("list_items")), h += "\n";
                var j;
                if (f = 17, g = 36, j = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["list_item_options", {}
                ]), c.set("list_item_options", j, !0), c.parent || (b.setVariable("list_item_options", j), b.addExport("list_item_options")), h += "\n\n", a.getFilter("length").call(b, d.contextOrFrameLookup(b, c, "data"))) {
                    h += "\n    ", c = c.push();
                    var k = d.contextOrFrameLookup(b, c, "data");
                    if (k)
                        for (var l = k.length, m = 0; m < k.length; m++) {
                            var n = k[m];
                            c.set("item", n), c.set("loop.index", m + 1), c.set("loop.index0", m), c.set("loop.revindex", l - m), c.set("loop.revindex0", l - m - 1), c.set("loop.first", 0 === m), c.set("loop.last", m === l - 1), c.set("loop.length", l), h += "\n        ";
                            var o;
                            o = {
                                module: {
                                    name: "ConversationListItem",
                                    options: d.contextOrFrameLookup(b,
                                    c,
                                    "list_item_options"),
                                    data: n
                                }
                        }, c.set("list_item", o, !0), c.parent || (b.setVariable("list_item", o), b.addExport("list_item")), h += "\n        ";
                        var p;
                        p = a.getFilter("length").call(b, d.memberLookup(n, "users", a.autoesc) || []), c.set("users_count", p, !0), c.parent || (b.setVariable("users_count", p), b.addExport("users_count")), h += "\n        ";
                        var q;
                        q = a.getFilter("length").call(b, d.memberLookup(n, "emails", a.autoesc) || []), c.set("emails_count", q, !0), c.parent || (b.setVariable("emails_count", q), b.addExport("emails_count")), h += "\n        ";
                        var r;
                        if (r = [], c.set("should_hide_message", r, !0), c.parent || (b.setVariable("should_hide_message", r), b.addExport("should_hide_message")), h += "\n        ", f = 31, g = 23, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["hide_system_message"])) {
                            h += "\n            ", c = c.push();
                            var s = d.memberLookup(n, "users", a.autoesc);
                            if (s)
                                for (var t = s.length, u = 0; u < s.length; u++) {
                                    var v = s[u];
                                    if (c.set("user", v), c.set("loop.index", u + 1), c.set("loop.index0", u), c.set("loop.revindex", t - u), c.set("loop.revindex0", t - u - 1), c.set("loop.first", 0 === u), c.set("loop.last", u === t - 1), c.set("loop.length", t), h += "\n                ", "424605208526455283" == d.memberLookup(v, "id", a.autoesc)) {
                                        h += "\n                    ";
                                        var w;
                                        f = 34, g = 50, w = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "should_hide_message"), "append", a.autoesc), 'should_hide_message["append"]', [!0]), c.set("_temp_do", w, !0), c.parent || b.setVariable("_temp_do", w), h += "\n                "
                                    }
                                    h += "\n            "
                                }
                            c = c.pop(), h += "\n        "
                        }
                        if (h += "\n        ", !(d.memberLookup(d.contextOrFrameLookup(b, c, "should_hide_message"), 0, a.autoesc) || (f = 39, g = 31, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["exclude_groups"]) && d.contextOrFrameLookup(b, c, "users_count") + d.contextOrFrameLookup(b, c, "emails_count") > 2))) {
                            h += "\n            ";
                            var x;
                            f = 40, g = 33, x = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "list_items"), "append", a.autoesc), 'list_items["append"]', [d.contextOrFrameLookup(b, c, "list_item")]), c.set("_temp_do", x, !0), c.parent || b.setVariable("_temp_do", x), h += "\n        "
                        }
                        h += "\n    "
                    }
                    c = c.pop(), h += "\n"
                }
                h += "\n\n", a.getFilter("length").call(b, d.contextOrFrameLookup(b, c, "list_items")) ? (h += "\n    ", h += d.suppressValue((f = 58, g = 11, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["List", d.makeKeywordArgs({
                    id: "list",
                    options: {
                        items: d.contextOrFrameLookup(b, c, "list_items")
                    }
                })])), a.autoesc), h += "\n") : (h += "\n    ", h += d.suppressValue((f = 46, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["isEmptyState"])), a.autoesc), h += "\n    ", h += d.suppressValue((f = 47, g = 11, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["EmptyConversations", d.makeKeywordArgs({
                    options: {
                        class_name: (f = 49, g = 37, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["class_name"]))
                    },
                    resource: (f = 51, g = 32, d.callWrap(d.contextOrFrameLookup(b, c, "create_resource"), "create_resource", ["UserFriendSuggestionsResource", d.makeKeywordArgs({
                        options: {
                            min_public_pins: 10
                        }
                    })]))
                })])), a.autoesc), h += "\n"), h += "\n", e(null, h)
            } catch (y) {
                e(d.handleError(y, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/ConversationsListDropdown/ConversationsListDropdown.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n", h += d.suppressValue((f = 9, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["withinSegmentedController"])), a.autoesc), h += "\n\n", h += d.suppressValue((f = 11, g = 7, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    id: "newMessage",
                    options: {
                        text: (f = 14, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["New message"])),
                        borderless: !0,
                        show_text: !0,
                        has_icon: !0,
                        icon_on_right: !1,
                        class_name: "createConversationTab",
                        log_element_type: d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "CONVERSATION_NEW_BUTTON", a.autoesc)
                    }
                })])), a.autoesc), h += '\n\n<div class="convosContent">\n    ', h += d.suppressValue((f = 25, g = 11, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["ConversationsList", d.makeKeywordArgs({
                    id: "conversationList",
                    options: {
                        class_name: "conversationListDropdown",
                        list_item_options: {
                            conversation_head_size: "medium",
                            open_conversation_on_click: !0,
                            hideable: !0,
                            show_last_message_object_preview: !0,
                            differentiate_unread_state: !0,
                            include_timestamp: !0,
                            clickable_names: !0,
                            log_element_type: d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "CONVERSATION_LIST_ITEM", a.autoesc)
                        }
                    },
                    data: d.contextOrFrameLookup(b, c, "data"),
                    resource: d.contextOrFrameLookup(b, c, "resource")
                })])), a.autoesc), h += "\n</div>\n", e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/Counter/Counter.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n";
                var i;
                f = 11, g = 35, i = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["max"]) - (f = 11, g = 56, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["count", 0])), c.set("count_to_display", i, !0), c.parent || (b.setVariable("count_to_display", i), b.addExport("count_to_display")), h += "\n\n", h += d.suppressValue((f = 13, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "tag_name"), "tag_name", ["span"])), a.autoesc), h += "\n", d.contextOrFrameLookup(b, c, "count_to_display") < 0 && (h += "\n    ", h += d.suppressValue((f = 15, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["error"])), a.autoesc), h += "\n"), h += "\n", h += d.suppressValue(d.contextOrFrameLookup(b, c, "count_to_display"), a.autoesc), h += "\n", e(null, h)
            } catch (j) {
                e(d.handleError(j, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/CreateConversationGroup/CreateConversationGroup.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += '\n\n<div class="conversationGroupHeader">\n    <p class="title">', h += d.suppressValue((f = 10, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["New message"])), a.autoesc), h += "</p>\n    ", h += d.suppressValue((f = 11, g = 11, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    id: "cancelButton",
                    options: {
                        text: (f = 14, g = 21, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Cancel"])),
                        cancelButton: !0,
                        class_name: "cancelButton",
                        borderless: !0
                    }
                })])), a.autoesc), h += "\n\n    ", h += d.suppressValue((f = 21, g = 11, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    id: "sendToGroupButton",
                    options: {
                        text: (f = 24, g = 21, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Next"])),
                        class_name: "sendToGroupButton",
                        borderless: !0,
                        color: "primary",
                        log_element_type: d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "CONVERSATION_CREATE_BUTTON", a.autoesc)
                    }
                })])), a.autoesc), h += '\n</div>\n\n<div class="conversationGroupTokenizedWrapper">\n\n    <div class="tokenized">\n        <div class="placeholder">', h += d.suppressValue((f = 36, g = 35, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["To:"])), a.autoesc), h += "</div>\n        ", h += d.suppressValue((f = 37, g = 15, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["ui.SocialTypeaheadField", d.makeKeywordArgs({
                    id: "searchField",
                    options: {
                        class_name: "createConversationGroup",
                        enable_recent_queries: !1,
                        name: "q",
                        count: 10,
                        template: "user_circle_avatar",
                        view_type: "userCircleSelect",
                        prefetch_on_focus: !0,
                        placeholder: "",
                        bypass_maxheight: !0,
                        populate_on_result_highlight: !1,
                        preserve_typeahead: !0,
                        prevent_default_on_enter: !0,
                        set_input_value_on_selection: !1,
                        use_tab_index: !1,
                        search_delay: 0,
                        show_caret: !1,
                        should_geocode: !1,
                        spinner: {
                            enable: !1
                        },
                        tags: "pinners_and_email_contacts",
                        minimum_term_character_length: 1,
                        type: "tokenized",
                        allow_email: !0
                    }
                })])), a.autoesc), h += "\n    </div>\n\n    ", h += d.suppressValue((f = 68, g = 11, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["ConversationsList", d.makeKeywordArgs({
                    id: "convosList",
                    options: {
                        class_name: "createConversationGroup",
                        exclude_groups: !0,
                        no_rerender: !0,
                        hide_system_message: !0,
                        list_item_options: {
                            show_is_pinner: !0,
                            show_selected_state: !0
                        }
                    },
                    resource: (f = 80, g = 32, d.callWrap(d.contextOrFrameLookup(b, c, "create_resource"), "create_resource", ["ConversationsResource", {}
                    ]))
                })])), a.autoesc), h += "\n</div>\n", e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/Dropdown/Dropdown.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n", h += d.suppressValue((f = 25, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["PositionModule"])), a.autoesc), h += "\n\n", h += "\n", e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/DropdownButton/DropdownButton.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n", h += d.suppressValue((f = 14, g = 1, d.callWrap(d.contextOrFrameLookup(b, c, "base"), "base", ["Button"])), a.autoesc), a.getTemplate("app/common/modules/Button/Button.nunjucks", !0, function(f, g) {
                    if (f)
                        return void e(f);
                    for (var i in g.blocks)
                        b.addBlock(i, g.blocks[i]);
                    h += "\n", g.rootRenderFunc(a, b, c, d, e)
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/Grid/Grid.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n", h += d.suppressValue((f = 7, g = 7, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["GridItems", d.makeKeywordArgs({
                    id: "items",
                    data: d.contextOrFrameLookup(b, c, "data"),
                    resource: d.contextOrFrameLookup(b, c, "resource"),
                    options: d.contextOrFrameLookup(b, c, "options"),
                    error_strategy: d.memberLookup(d.contextOrFrameLookup(b, c, "ErrorStrategy"), "BUBBLE", a.autoesc)
                })])), a.autoesc), h += "\n\n", f = 14, g = 15, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["class_name"]) && (h += "\n    ", h += d.suppressValue((f = 15, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", [(f = 15, g = 25, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["class_name"]))])), a.autoesc), h += "\n"), h += "\n\n", f = 18, g = 15, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["show_grid_footer"]) && (h += "\n   ", h += d.suppressValue((f = 19, g = 12, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["hasFooter"])), a.autoesc), h += "\n   ", h += d.suppressValue((f = 20, g = 10, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["GridFooter", d.makeKeywordArgs({
                    id: "gridFooter"
                })])), a.autoesc), h += "\n"), h += "\n", e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/GridFooter/GridFooter.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n", h += d.suppressValue((f = 6, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["centeredWithinWrapper"])), a.autoesc), h += "\n", d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "visible", a.autoesc) && (h += "\n    ", h += d.suppressValue((f = 8, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["visible"])), a.autoesc), h += "\n"), h += '\n\n<div class="gridError">\n    <button class="Button btn rounded large">\n        <span>', h += d.suppressValue((f = 13, g = 16, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Whoops! Something went wrong."])), a.autoesc), h += "</span> ", h += d.suppressValue((f = 13, g = 60, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Try again."])), a.autoesc), h += '\n    </button>\n</div>\n<div class="gridLoadingWrapper">\n    <hr>\n    <div class="gridLoading">\n        <span class="gridFooterLogoIcon"></span>\n        <span class="gridFooterSpinner"></span>\n    </div>\n</div>\n', e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/GridItems/GridItems.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n";
                var i;
                f = 25, g = 37, i = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["show_while_loading", !0]), c.set("show_while_loading", i, !0), c.parent || (b.setVariable("show_while_loading", i), b.addExport("show_while_loading")), h += "\n", d.contextOrFrameLookup(b, c, "show_while_loading") && (h += "\n    ", h += d.suppressValue((f = 27, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["loadingItems"])), a.autoesc), h += "\n"), h += "\n\n";
                var j;
                f = 30, g = 52, j = d.callWrap(d.memberLookup((f = 30, g = 28, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["item_options", {}
                ])), "get", a.autoesc), 'the return value of (options["get"])["get"]', ["view_type"]), c.set("view_type", j, !0), c.parent || (b.setVariable("view_type", j), b.addExport("view_type")), h += "\n";
                var k;
                f = 31, g = 36, k = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["track_active_item"]), c.set("track_active_item", k, !0), c.parent || (b.setVariable("track_active_item", k), b.addExport("track_active_item")), h += "\n\n", d.contextOrFrameLookup(b, c, "track_active_item") && (h += "\n    ", h += d.suppressValue((f = 34, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["trackActiveItem"])), a.autoesc), h += "\n"), h += "\n\n", h += "\n", h += d.suppressValue((f = 38, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "describe"), "describe", [d.makeKeywordArgs({
                    centered: (f = 38, g = 30, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["centered", !0])),
                    reflow_all: (f = 39, g = 34, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["reflow_all", !0])),
                    virtualize: (f = 40, g = 34, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["virtualize", !0]))
                })])), a.autoesc), h += "\n", f = 41, g = 15, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["centered"]) && (h += "\n    ", h += d.suppressValue((f = 42, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["centeredWithinWrapper"])), a.autoesc), h += "\n"), h += "\n", f = 44, g = 15, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["pad_items", !0]) && (h += "\n    ", h += d.suppressValue((f = 45, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["padItems"])), a.autoesc), h += "\n"), h += "\n\n";
                var l;
                f = 48, g = 25, l = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["layout"]), c.set("layout", l, !0), c.parent || (b.setVariable("layout", l), b.addExport("layout")), h += "\n";
                var m;
                if (m = d.contextOrFrameLookup(b, c, "none"), c.set("layout_class", m, !0), c.parent || (b.setVariable("layout_class", m), b.addExport("layout_class")), h += "\n", "variable_height" == d.contextOrFrameLookup(b, c, "layout")) {
                    h += "\n    ";
                    var n;
                    n = "variableHeightLayout", c.set("layout_class", n, !0), c.parent || (b.setVariable("layout_class", n), b.addExport("layout_class")), h += "\n"
                } else if ("fixed_height" == d.contextOrFrameLookup(b, c, "layout")) {
                    h += "\n    ";
                    var o;
                    o = "fixedHeightLayout", c.set("layout_class", o, !0), c.parent || (b.setVariable("layout_class", o), b.addExport("layout_class")), h += "\n"
                } else if ("cloud_grid" == d.contextOrFrameLookup(b, c, "layout")) {
                    h += "\n    ";
                    var p;
                    p = "cloudGridLayout", c.set("layout_class", p, !0), c.parent || (b.setVariable("layout_class", p), b.addExport("layout_class")), h += "\n"
                }
                h += "\n", d.contextOrFrameLookup(b, c, "layout_class") && (h += "\n    ", h += d.suppressValue((f = 58, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", [d.contextOrFrameLookup(b, c, "layout_class")])), a.autoesc), h += "\n"), h += "\n";
                var q;
                f = 60, g = 31, q = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["item_options", {}
                ]), c.set("item_options", q, !0), c.parent || (b.setVariable("item_options", q), b.addExport("item_options")), h += "\n";
                var r;
                f = 61, g = 42, r = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "item_options"), "get", a.autoesc), 'item_options["get"]', ["component_type"]) || 0 == (f = 62, g = 20, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "item_options"), "get", a.autoesc), 'item_options["get"]', ["component_type"])), c.set("has_component_type", r, !0), c.parent || (b.setVariable("has_component_type", r), b.addExport("has_component_type")), h += "\n\n";
                var s;
                s=!1, c.set("action_sent", s, !0), c.parent || (b.setVariable("action_sent", s), b.addExport("action_sent")), h += "\n", c = c.push();
                var t = d.contextOrFrameLookup(b, c, "data") || [];
                if (t)
                    for (var u = t.length, v = 0; v < t.length; v++) {
                        var w = t[v];
                        c.set("item", w), c.set("loop.index", v + 1), c.set("loop.index0", v), c.set("loop.revindex", u - v), c.set("loop.revindex0", u - v - 1), c.set("loop.first", 0 === v), c.set("loop.last", v === u - 1), c.set("loop.length", u), h += "\n    ";
                        var x;
                        if (x=!0, c.set("include_item", x, !0), c.parent || (b.setVariable("include_item", x), b.addExport("include_item")), h += "\n    ", "pin" == d.memberLookup(w, "type", a.autoesc)) {
                            if (h += "\n        ", f = 68, g = 24, d.callWrap(d.memberLookup(w, "get", a.autoesc), 'item["get"]', ["images"])) {
                                if (h += "\n            ", "boardPinsGrid" == d.contextOrFrameLookup(b, c, "view_type")) {
                                    h += "\n                ";
                                    var y;
                                    f = 72, g = 44, y = d.callWrap(d.memberLookup(d.memberLookup(w, "images", a.autoesc), "get", a.autoesc), 'item["images"]["get"]', ["70x", {}
                                    ]), c.set("image", y, !0), c.parent || (b.setVariable("image", y), b.addExport("image")), h += "\n            "
                                } else {
                                    h += "\n                ";
                                    var z;
                                    f = 74, g = 44, z = d.callWrap(d.memberLookup(d.memberLookup(w, "images", a.autoesc), "get", a.autoesc), 'item["images"]["get"]', ["236x", {}
                                    ]), c.set("image", z, !0), c.parent || (b.setVariable("image", z), b.addExport("image")), h += "\n            "
                                }
                                if (h += "\n            ", f = 76, g = 29, !d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "image"), "get", a.autoesc), 'image["get"]', ["height"]) || (f = 76, g = 56, !d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "image"), "get", a.autoesc), 'image["get"]', ["url"]))) {
                                    h += "\n                ";
                                    var A;
                                    A=!1, c.set("include_item", A, !0), c.parent || (b.setVariable("include_item", A), b.addExport("include_item")), h += "\n            "
                                }
                                h += "\n        "
                            } else {
                                h += "\n            ";
                                var B;
                                B=!1, c.set("include_item", B, !0), c.parent || (b.setVariable("include_item", B), b.addExport("include_item")), h += "\n        "
                            }
                            h += "\n    "
                        }
                        if (h += "\n\n    ", d.contextOrFrameLookup(b, c, "include_item")) {
                            h += "\n        ", h += '\n        <div class="item ', d.memberLookup(w, "id", a.autoesc) == (f = 84, g = 51, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["active_item_id"])) && (h += "activeItem"), h += '"\n            ', d.contextOrFrameLookup(b, c, "track_active_item") && (h += "tabindex=1"), h += ">\n\n            ";
                            var C;
                            f = 87, g = 54, C = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["item_click_mask_options"]), c.set("item_click_mask_options", C, !0), c.parent || (b.setVariable("item_click_mask_options", C), b.addExport("item_click_mask_options")), h += "\n            ", d.contextOrFrameLookup(b, c, "item_click_mask_options") && (h += '\n                <div class="itemClickMask">\n                    <span class="selectItemIconWrapper">\n                        <em class="selectItemIcon"> </em>\n                    </span>\n                    <span class="selectItemTextWrapper">\n                        ', h += d.suppressValue((f = 94, g = 52, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "item_click_mask_options"), "get", a.autoesc), 'item_click_mask_options["get"]', ["hover_text", (f = 94, g = 68, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Selected"]))])), a.autoesc), h += "\n                    </span>\n                </div>\n            "), h += "\n\n            ";
                            var D;
                            if (f = 99, g = 68, D = d.callWrap(d.memberLookup((f = 99, g = 43, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["item_options", {}
                            ])), "copy", a.autoesc), 'the return value of (options["get"])["copy"]', []), c.set("item_options", D, !0), c.parent || (b.setVariable("item_options", D), b.addExport("item_options")), h += "\n            ", "pin" == d.memberLookup(w, "type", a.autoesc)) {
                                h += "\n                ", h += "\n                ";
                                var E;
                                E = {}, c.set("place", E, !0), c.parent || (b.setVariable("place", E), b.addExport("place")), h += "\n                ";
                                var F;
                                F = d.contextOrFrameLookup(b, c, "none"), c.set("latitude", F, !0), c.parent || (b.setVariable("latitude", F), b.addExport("latitude")), h += "\n                ";
                                var G;
                                G = d.contextOrFrameLookup(b, c, "none"), c.set("longitude", G, !0), c.parent || (b.setVariable("longitude", G), b.addExport("longitude")), h += "\n\n                ";
                                var H;
                                f = 106, g = 37, H = d.callWrap(d.memberLookup(w, "get", a.autoesc), 'item["get"]', ["place"]) || {}, c.set("place", H, !0), c.parent || (b.setVariable("place", H), b.addExport("place")), h += "\n                ";
                                var I;
                                if (I = "grid_item", c.set("field_set_key", I, !0), c.parent || (b.setVariable("field_set_key", I), b.addExport("field_set_key")), h += "\n                ", d.contextOrFrameLookup(b, c, "place")) {
                                    h += "\n                    ";
                                    var J;
                                    f = 109, g = 45, J = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "place"), "get", a.autoesc), 'place["get"]', ["latitude"]), c.set("latitude", J, !0), c.parent || (b.setVariable("latitude", J), b.addExport("latitude")), h += "\n                    ";
                                    var K;
                                    f = 110, g = 46, K = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "place"), "get", a.autoesc), 'place["get"]', ["longitude"]), c.set("longitude", K, !0), c.parent || (b.setVariable("longitude", K), b.addExport("longitude")), h += "\n                "
                                }
                                if (h += "\n                ", !d.contextOrFrameLookup(b, c, "has_component_type")) {
                                    h += "\n                    ";
                                    var L;
                                    f = 113, g = 43, L = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "item_options"), "update", a.autoesc), 'item_options["update"]', [{
                                        component_type: d.memberLookup(d.contextOrFrameLookup(b, c, "ComponentType"), "FLOWED_PIN", a.autoesc)
                                    }
                                    ]), c.set("_temp_do", L, !0), c.parent || b.setVariable("_temp_do", L), h += "\n                "
                                }
                                h += "\n\n                ", h += d.suppressValue((f = 116, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Pin", d.makeKeywordArgs({
                                    data: w,
                                    resource: (f = 118, g = 44, d.callWrap(d.contextOrFrameLookup(b, c, "create_resource"), "create_resource", ["PinResource", d.makeKeywordArgs({
                                        options: {
                                            id: (f = 119, g = 38, d.callWrap(d.memberLookup(w, "get", a.autoesc), 'item["get"]', ["id"])),
                                            field_set_key: d.contextOrFrameLookup(b, c, "field_set_key")
                                        }
                                    })])),
                                    options: d.contextOrFrameLookup(b, c, "item_options"),
                                    error_strategy: d.memberLookup(d.contextOrFrameLookup(b, c, "ErrorStrategy"), "REMOVE", a.autoesc)
                                })])), a.autoesc), h += "\n            "
                            } else if ("board" == d.memberLookup(w, "type", a.autoesc)) {
                                if (h += "\n                ", !d.contextOrFrameLookup(b, c, "has_component_type")) {
                                    h += "\n                    ";
                                    var M;
                                    f = 127, g = 43, M = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "item_options"), "update", a.autoesc), 'item_options["update"]', [{
                                        component_type: d.memberLookup(d.contextOrFrameLookup(b, c, "ComponentType"), "FLOWED_BOARD", a.autoesc)
                                    }
                                    ]), c.set("_temp_do", M, !0), c.parent || b.setVariable("_temp_do", M), h += "\n                "
                                }
                                h += "\n                ", h += d.suppressValue((f = 129, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Board", d.makeKeywordArgs({
                                    data: w,
                                    options: d.contextOrFrameLookup(b, c, "item_options"),
                                    resource: (f = 132, g = 44, d.callWrap(d.contextOrFrameLookup(b, c, "create_resource"), "create_resource", ["BoardResource", d.makeKeywordArgs({
                                        options: {
                                            board_id: (f = 133, g = 44, d.callWrap(d.memberLookup(w, "get", a.autoesc), 'item["get"]', ["id"])),
                                            field_set_key: "grid_item"
                                        }
                                    })])),
                                    error_strategy: d.memberLookup(d.contextOrFrameLookup(b, c, "ErrorStrategy"), "REMOVE", a.autoesc)
                                })])), a.autoesc), h += "\n            "
                            } else if ("user" == d.memberLookup(w, "type", a.autoesc))
                                h += "\n                ", h += d.suppressValue((f = 139, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["User", d.makeKeywordArgs({
                                    data: w,
                                    resource: (f = 141, g = 44, d.callWrap(d.contextOrFrameLookup(b, c, "create_resource"), "create_resource", ["UserResource", d.makeKeywordArgs({
                                        options: {
                                            username: (f = 142, g = 44, d.callWrap(d.memberLookup(w, "get", a.autoesc), 'item["get"]', ["username"])),
                                            field_set_key: "grid_item"
                                        }
                                    })])),
                                    options: d.contextOrFrameLookup(b, c, "item_options"),
                                    error_strategy: d.memberLookup(d.contextOrFrameLookup(b, c, "ErrorStrategy"), "REMOVE", a.autoesc)
                                })])), a.autoesc), h += "\n            ";
                            else if ("toprepinnedpin" == d.memberLookup(w, "type", a.autoesc))
                                h += "\n                ", h += d.suppressValue((f = 149, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["TopPin", d.makeKeywordArgs({
                                    data: w,
                                    options: d.contextOrFrameLookup(b, c, "item_options"),
                                    error_strategy: d.memberLookup(d.contextOrFrameLookup(b, c, "ErrorStrategy"), "REMOVE", a.autoesc)
                                })])), a.autoesc), h += "\n            ";
                            else if ("collaboratorinvite" == d.memberLookup(w, "type", a.autoesc)) {
                                if (h += "\n                ", "news" == d.contextOrFrameLookup(b, c, "view_type")) {
                                    h += "\n                    ";
                                    var N;
                                    N = "news", c.set("field_set_key", N, !0), c.parent || (b.setVariable("field_set_key", N), b.addExport("field_set_key")), h += "\n                    ";
                                    var O;
                                    f = 157, g = 41, O = d.callWrap(d.memberLookup(w, "get", a.autoesc), 'item["get"]', ["board"]) || {}, c.set("board", O, !0), c.parent || (b.setVariable("board", O), b.addExport("board")), h += "\n                    ";
                                    var P;
                                    f = 158, g = 45, P = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["id"]), c.set("board_id", P, !0), c.parent || (b.setVariable("board_id", P), b.addExport("board_id")), h += "\n                "
                                } else {
                                    h += "\n                    ";
                                    var Q;
                                    Q = "boardEdit", c.set("field_set_key", Q, !0), c.parent || (b.setVariable("field_set_key", Q), b.addExport("field_set_key")), h += "\n                    ";
                                    var R;
                                    f = 161, g = 56, R = d.callWrap(d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "resource"), "options", a.autoesc), "get", a.autoesc), 'resource["options"]["get"]', ["board_id"]), c.set("board_id", R, !0), c.parent || (b.setVariable("board_id", R), b.addExport("board_id")), h += "\n                "
                                }
                                h += "\n                ", h += d.suppressValue((f = 163, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["BoardInvite", d.makeKeywordArgs({
                                    data: w,
                                    resource: (f = 165, g = 44, d.callWrap(d.contextOrFrameLookup(b, c, "create_resource"), "create_resource", ["BoardInviteResource", d.makeKeywordArgs({
                                        options: {
                                            field_set_key: d.contextOrFrameLookup(b, c, "field_set_key"),
                                            board_id: d.contextOrFrameLookup(b, c, "board_id"),
                                            invited_user_id: (f = 168, g = 75, d.callWrap(d.memberLookup((f = 168, g = 51, d.callWrap(d.memberLookup(w, "get", a.autoesc), 'item["get"]', ["invited_user", {}
                                            ])), "get", a.autoesc), 'the return value of (item["get"])["get"]', ["id"]))
                                        }
                                    })])),
                                    options: d.contextOrFrameLookup(b, c, "item_options"),
                                    error_strategy: d.memberLookup(d.contextOrFrameLookup(b, c, "ErrorStrategy"), "REMOVE", a.autoesc)
                                })])), a.autoesc), h += "\n            "
                            } else if ("interest" == d.memberLookup(w, "type", a.autoesc))
                                h += "\n                ", h += d.suppressValue((f = 174, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Interest", d.makeKeywordArgs({
                                    data: w,
                                    options: d.contextOrFrameLookup(b, c, "item_options")
                                })])), a.autoesc), h += "\n            ";
                            else if ("pinnable" == d.memberLookup(w, "type", a.autoesc))
                                h += "\n                ", h += d.suppressValue((f = 178, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Pinnable", d.makeKeywordArgs({
                                    options: w
                                })])), a.autoesc), h += "\n            ";
                            else if ("category" == d.memberLookup(w, "type", a.autoesc))
                                h += "\n                ", h += d.suppressValue((f = 181, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Category", d.makeKeywordArgs({
                                    data: w,
                                    options: d.contextOrFrameLookup(b, c, "item_options")
                                })])), a.autoesc), h += "\n            ";
                            else if ("place_image" == d.memberLookup(w, "type", a.autoesc)) {
                                h += "\n                ";
                                var S;
                                f = 185, g = 31, S = d.callWrap(d.memberLookup(w, "update", a.autoesc), 'item["update"]', [{
                                    view_type: "add_to_map"
                                }
                                ]), c.set("_temp_do", S, !0), c.parent || b.setVariable("_temp_do", S), h += "\n                ", h += d.suppressValue((f = 188, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Pinnable", d.makeKeywordArgs({
                                    options: w
                                })])), a.autoesc), h += "\n            "
                            } else 
                                "module" == d.memberLookup(w, "type", a.autoesc) ? (h += "\n                ", h += d.suppressValue((f = 191, g = 28, d.callWrap(d.contextOrFrameLookup(b, c, "ProxyModule"), "ProxyModule", [w])), a.autoesc), h += "\n            ") : "image" == d.memberLookup(w, "type", a.autoesc) ? (h += "\n                ", h += d.suppressValue((f = 193, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Image", d.makeKeywordArgs({
                                    data: w,
                                    options: d.contextOrFrameLookup(b, c, "item_options")
                                })])), a.autoesc), h += "\n            ") : (h += "\n                ", d.memberLookup(d.contextOrFrameLookup(b, c, "settings"), "DEBUG", a.autoesc) && (h += "\n                    No module for <pre>", h += d.suppressValue(w, a.autoesc), h += "</pre>\n                "), h += "\n            ");
                                h += "\n        </div>\n    "
                        }
                        h += "\n"
                    }
                c = c.pop(), h += "\n", e(null, h)
            } catch (T) {
                e(d.handleError(T, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/Interest/Interest.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n", h += d.suppressValue((f = 12, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "include_data"), "include_data", [!0])), a.autoesc), h += "\n\n";
                var i;
                i = d.contextOrFrameLookup(b, c, "data"), c.set("interest", i, !0), c.parent || (b.setVariable("interest", i), b.addExport("interest")), h += "\n";
                var j;
                f = 15, g = 31, j = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "interest"), "get", a.autoesc), 'interest["get"]', ["id"]), c.set("interest_id", j, !0), c.parent || (b.setVariable("interest_id", j), b.addExport("interest_id")), h += "\n";
                var k;
                f = 16, g = 34, k = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "interest"), "get", a.autoesc), 'interest["get"]', ["image_size"]), c.set("interest_state", k, !0), c.parent || (b.setVariable("interest_state", k), b.addExport("interest_state")), h += "\n";
                var l;
                if (l = "", c.set("interest_image", l, !0), c.parent || (b.setVariable("interest_image", l), b.addExport("interest_image")), h += "\n", f = 18, g = 16, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "interest"), "get", a.autoesc), 'interest["get"]', ["images"])) {
                    h += "\n    ";
                    var m;
                    m = d.memberLookup((f = 19, g = 55, d.callWrap(d.memberLookup((f = 19, g = 34, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "interest"), "get", a.autoesc), 'interest["get"]', ["images", {}
                    ])), "values", a.autoesc), 'the return value of (interest["get"])["values"]', [])), 0, a.autoesc), c.set("image_item", m, !0), c.parent || (b.setVariable("image_item", m), b.addExport("image_item")), h += "\n    ";
                    var n;
                    f = 20, g = 40, n = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "image_item"), "get", a.autoesc), 'image_item["get"]', ["url", ""]), c.set("interest_image", n, !0), c.parent || (b.setVariable("interest_image", n), b.addExport("interest_image")), h += "\n"
                }
                h += "\n";
                var o;
                f = 22, g = 34, o = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "interest"), "get", a.autoesc), 'interest["get"]', ["name"]), c.set("interest_title", o, !0), c.parent || (b.setVariable("interest_title", o), b.addExport("interest_title")), h += "\n";
                var p;
                f = 23, g = 32, p = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "interest"), "get", a.autoesc), 'interest["get"]', ["key"]), c.set("interest_key", p, !0), c.parent || (b.setVariable("interest_key", p), b.addExport("interest_key")), h += "\n";
                var q;
                f = 24, g = 37, q = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "interest"), "get", a.autoesc), 'interest["get"]', ["url_name"]), c.set("interest_url_name", q, !0), c.parent || (b.setVariable("interest_url_name", q), b.addExport("interest_url_name")), h += "\n";
                var r;
                f = 25, g = 35, r = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "interest"), "get", a.autoesc), 'interest["get"]', ["image_source"]), c.set("interest_source", r, !0), c.parent || (b.setVariable("interest_source", r), b.addExport("interest_source")), h += "\n";
                var s;
                f = 26, g = 40, s = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "interest"), "get", a.autoesc), 'interest["get"]', ["is_followed"]), c.set("interest_is_followed", s, !0), c.parent || (b.setVariable("interest_is_followed", s), b.addExport("interest_is_followed")), h += "\n";
                var t;
                f = 27, g = 43, t = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "interest"), "get", a.autoesc), 'interest["get"]', ["background_color"]), c.set("interest_css_background", t, !0), c.parent || (b.setVariable("interest_css_background", t), b.addExport("interest_css_background")), h += "\n";
                var u;
                f = 28, g = 28, u = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["show_mask"]), c.set("show_mask", u, !0), c.parent || (b.setVariable("show_mask", u), b.addExport("show_mask")), h += "\n";
                var v;
                f = 29, g = 28, v = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["checkable"]), c.set("checkable", v, !0), c.parent || (b.setVariable("checkable", v), b.addExport("checkable")), h += "\n";
                var w;
                f = 30, g = 35, w = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["prepend_main_url", !1]), c.set("prepend_main_url", w, !0), c.parent || (b.setVariable("prepend_main_url", w), b.addExport("prepend_main_url")), h += "\n";
                var x;
                f = 31, g = 32, x = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["external_link", !1]), c.set("external_link", x, !0), c.parent || (b.setVariable("external_link", x), b.addExport("external_link")), h += "\n\n", h += d.suppressValue((f = 33, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", [a.getFilter("named_format").call(b, "size{{state}}{{state}}", {
                    state: d.contextOrFrameLookup(b, c, "interest_state")
                })])), a.autoesc), h += "\n\n";
                var y;
                if (f = 35, g = 28, y = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["view_type", ""]), c.set("view_type", y, !0), c.parent || (b.setVariable("view_type", y), b.addExport("view_type")), h += "\n", d.contextOrFrameLookup(b, c, "view_type") && (h += "\n    ", h += d.suppressValue((f = 37, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", [d.contextOrFrameLookup(b, c, "view_type")])), a.autoesc), h += "\n"), h += "\n\n", "c" == d.contextOrFrameLookup(b, c, "interest_source")) {
                    if (h += "\n    ", "popular" == d.contextOrFrameLookup(b, c, "interest_key")) {
                        h += "\n        ";
                        var z;
                        z = a.getFilter("named_format").call(b, "/{{category}}/", {
                            category: d.contextOrFrameLookup(b, c, "interest_key")
                        }), c.set("url", z, !0), c.parent || (b.setVariable("url", z), b.addExport("url")), h += "\n    "
                    } else {
                        h += "\n        ";
                        var A;
                        A = a.getFilter("named_format").call(b, "/all/{{category}}/", {
                            category: d.contextOrFrameLookup(b, c, "interest_key")
                        }), c.set("url", A, !0), c.parent || (b.setVariable("url", A), b.addExport("url")), h += "\n    "
                    }
                    h += "\n"
                } else {
                    h += "\n    ";
                    var B;
                    B = a.getFilter("named_format").call(b, "/explore/{{interest}}/", {
                        interest: d.contextOrFrameLookup(b, c, "interest_url_name")
                    }), c.set("url", B, !0), c.parent || (b.setVariable("url", B), b.addExport("url")), h += "\n"
                }
                if (h += "\n\n", d.contextOrFrameLookup(b, c, "prepend_main_url")) {
                    h += "\n    ";
                    var C;
                    C = d.memberLookup(d.contextOrFrameLookup(b, c, "settings"), "CANONICAL_MAIN_URL", a.autoesc) + d.contextOrFrameLookup(b, c, "url"), c.set("url", C, !0), c.parent || (b.setVariable("url", C), b.addExport("url")), h += "\n"
                }
                if (h += "\n\n", d.contextOrFrameLookup(b, c, "show_mask") || d.contextOrFrameLookup(b, c, "checkable")) {
                    h += "\n    ";
                    var D;
                    D = "div", c.set("tag_type", D, !0), c.parent || (b.setVariable("tag_type", D), b.addExport("tag_type")), h += "\n"
                } else {
                    h += "\n    ";
                    var E;
                    E = "a", c.set("tag_type", E, !0), c.parent || (b.setVariable("tag_type", E), b.addExport("tag_type")), h += "\n"
                }
                h += "\n\n", d.contextOrFrameLookup(b, c, "show_mask") && (h += '\n    <div class="wholeInterestMask">\n        <div class="check">&nbsp;</div>\n        <div class="mask">&nbsp;</div>\n    </div>\n'), h += "\n<", h += d.suppressValue(d.contextOrFrameLookup(b, c, "tag_type"), a.autoesc), h += " ", "a" == d.contextOrFrameLookup(b, c, "tag_type") && (h += 'href="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "url"), a.autoesc), h += '"'), h += '\n    class="interestWrapper', d.contextOrFrameLookup(b, c, "external_link") && "a" == d.contextOrFrameLookup(b, c, "tag_type") && (h += " external"), h += '"\n    style="background-color: ', h += d.suppressValue(a.getFilter("safe").call(b, d.contextOrFrameLookup(b, c, "interest_css_background")), a.autoesc), h += '"\n    data-component-type="', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "ComponentType"), "INTEREST_GRID", a.autoesc), a.autoesc), h += '">\n\n    ', d.contextOrFrameLookup(b, c, "checkable") && (h += '\n        <div class="selectCheck"/>\n    '), h += '\n    <div class="interestImage"\n            style="background-image: url(', h += d.suppressValue(d.contextOrFrameLookup(b, c, "interest_image"), a.autoesc), h += ')"\n            data-element-type="', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "FLOWED_INTEREST", a.autoesc), a.autoesc), h += '"\n            data-aux=\'{ "interest": ', h += d.suppressValue(a.getFilter("to_json").call(b, d.contextOrFrameLookup(b, c, "interest_key")), a.autoesc), h += ' }\'></div>\n    <div class="interestLabel">\n        <h2 data-element-type="', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "FLOWED_INTEREST", a.autoesc), a.autoesc), h += '"\n            data-aux=\'{ "interest": ', h += d.suppressValue(a.getFilter("to_json").call(b, d.contextOrFrameLookup(b, c, "interest_key")), a.autoesc), h += " }'>\n            ", h += d.suppressValue(d.contextOrFrameLookup(b, c, "interest_title"), a.autoesc), h += "\n        </h2>\n    </div>\n</", h += d.suppressValue(d.contextOrFrameLookup(b, c, "tag_type"), a.autoesc), h += ">\n\n", ("followingOneClickView" == d.contextOrFrameLookup(b, c, "view_type") || "followingOneClickHoverView" == d.contextOrFrameLookup(b, c, "view_type")) && (h += "\n    ", h += d.suppressValue((f = 87, g = 11, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["InterestFollowButton", d.makeKeywordArgs({
                    options: {
                        class_name: "interestFollowButton",
                        user_id: (f = 90, g = 39, d.callWrap(d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "user", a.autoesc), "get", a.autoesc), 'context["user"]["get"]', ["id"])),
                        interest_id: d.contextOrFrameLookup(b, c, "interest_id"),
                        follow_text: (f = 92, g = 28, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Follow"])),
                        unfollow_text: (f = 93, g = 30, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Unfollow"])),
                        followed: d.contextOrFrameLookup(b, c, "interest_is_followed")
                    }
                })])), a.autoesc), h += "\n"), h += "\n", e(null, h)
            } catch (F) {
                e(d.handleError(F, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/LikeButton/LikeButton.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n";
                var i;
                f = 10, g = 18, i = d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Like"]), c.set("like_text", i, !0), c.parent || (b.setVariable("like_text", i), b.addExport("like_text")), h += "\n";
                var j;
                f = 11, g = 20, j = d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Unlike"]), c.set("unlike_text", j, !0), c.parent || (b.setVariable("unlike_text", j), b.addExport("unlike_text")), h += "\n";
                var k;
                k = d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "liked", a.autoesc) ? d.contextOrFrameLookup(b, c, "unlike_text") : d.contextOrFrameLookup(b, c, "like_text"), c.set("button_text", k, !0), c.parent || (b.setVariable("button_text", k), b.addExport("button_text")), h += "\n\n", h += d.suppressValue((f = 14, g = 5, d.callWrap(d.contextOrFrameLookup(b, c, "base"), "base", ["Button"])), a.autoesc), h += "\n", h += d.suppressValue((f = 15, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "describe"), "describe", [d.makeKeywordArgs({
                    text: d.contextOrFrameLookup(b, c, "button_text"),
                    has_icon: d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "has_icon", a.autoesc)
                })])), a.autoesc), h += "\n\n", d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "liked", a.autoesc) && (h += "\n    ", h += d.suppressValue((f = 18, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["unlike"])), a.autoesc), h += "\n"), h += "\n\n", h += d.suppressValue((f = 21, g = 5, d.callWrap(d.contextOrFrameLookup(b, c, "attr"), "attr", [{
                    "data-text-like": d.contextOrFrameLookup(b, c, "like_text"),
                    "data-text-unlike": d.contextOrFrameLookup(b, c, "unlike_text")
                }
                ])), a.autoesc), h += "\n\n", h += d.suppressValue((f = 26, g = 1, d.callWrap(d.contextOrFrameLookup(b, c, "base"), "base", ["Button"])), a.autoesc), a.getTemplate("app/common/modules/Button/Button.nunjucks", !0, function(f, g) {
                    if (f)
                        return void e(f);
                    for (var i in g.blocks)
                        b.addBlock(i, g.blocks[i]);
                    h += "\n", g.rootRenderFunc(a, b, c, d, e)
                })
            } catch (l) {
                e(d.handleError(l, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/List/List.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n", h += d.suppressValue((f = 11, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "tag_name"), "tag_name", ["ul"])), a.autoesc), h += "\n\n";
                var i;
                i = d.contextOrFrameLookup(b, c, "data") || (f = 13, g = 32, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["items", []])), c.set("items", i, !0), c.parent || (b.setVariable("items", i), b.addExport("items")), h += "\n";
                var j;
                f = 14, g = 39, j = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["list_item_class_name", ""]), c.set("list_item_class_name", j, !0), c.parent || (b.setVariable("list_item_class_name", j), b.addExport("list_item_class_name")), h += "\n\n", c = c.push();
                var k = d.contextOrFrameLookup(b, c, "items");
                if (k)
                    for (var l = k.length, m = 0; m < k.length; m++) {
                        var n = k[m];
                        c.set("item", n), c.set("loop.index", m + 1), c.set("loop.index0", m), c.set("loop.revindex", l - m), c.set("loop.revindex0", l - m - 1), c.set("loop.first", 0 === m), c.set("loop.last", m === l - 1), c.set("loop.length", l), h += "\n    ";
                        var o;
                        o = d.memberLookup(n, "type", a.autoesc), c.set("type", o, !0), c.parent || (b.setVariable("type", o), b.addExport("type")), h += "\n\n    <li data-index='", h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "loop"), "index0", a.autoesc), a.autoesc), h += "' class=\"", h += d.suppressValue(d.contextOrFrameLookup(b, c, "list_item_class_name"), a.autoesc), h += '">\n        ';
                        var p;
                        if (p = a.getFilter("dict_copy").call(b, (f = 20, g = 39, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["item_options", {}
                        ]))), c.set("item_options", p, !0), c.parent || (b.setVariable("item_options", p), b.addExport("item_options")), h += "\n\n        ", "comment" == d.contextOrFrameLookup(b, c, "type"))
                            h += "\n            ", h += d.suppressValue((f = 23, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["PinComment", d.makeKeywordArgs({
                                data: n,
                                options: d.contextOrFrameLookup(b, c, "item_options")
                            })])), a.autoesc), h += "\n        ";
                        else if ("user" == d.contextOrFrameLookup(b, c, "type"))
                            h += "\n            ", h += d.suppressValue((f = 26, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["User", d.makeKeywordArgs({
                                data: n,
                                resource: (f = 28, g = 40, d.callWrap(d.contextOrFrameLookup(b, c, "create_resource"), "create_resource", ["UserResource", d.makeKeywordArgs({
                                    options: {
                                        user_id: (f = 30, g = 43, d.callWrap(d.memberLookup(n, "get", a.autoesc), 'item["get"]', ["id"])),
                                        field_set_key: "follow_suggestion"
                                    }
                                })])),
                                options: d.contextOrFrameLookup(b, c, "item_options")
                            })])), a.autoesc), h += "\n        ";
                        else if ("board" == d.contextOrFrameLookup(b, c, "type"))
                            h += "\n            ", h += d.suppressValue((f = 35, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Board", d.makeKeywordArgs({
                                data: n,
                                resource: (f = 37, g = 40, d.callWrap(d.contextOrFrameLookup(b, c, "create_resource"), "create_resource", ["BoardResource", d.makeKeywordArgs({
                                    options: {
                                        board_id: (f = 39, g = 44, d.callWrap(d.memberLookup(n, "get", a.autoesc), 'item["get"]', ["id"]))
                                    }
                                })])),
                                options: d.contextOrFrameLookup(b, c, "item_options")
                            })])), a.autoesc), h += "\n        ";
                        else if ("question" == d.contextOrFrameLookup(b, c, "type"))
                            h += "\n            ", f = 43, g = 32, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "item_options"), "get", a.autoesc), 'item_options["get"]', ["is_pin_question"]) ? (h += "\n                ", h += d.suppressValue((f = 44, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["QAPinQuestion", d.makeKeywordArgs({
                                data: n,
                                resource: (f = 46, g = 44, d.callWrap(d.contextOrFrameLookup(b, c, "create_resource"), "create_resource", ["QuestionResource", d.makeKeywordArgs({
                                    options: {
                                        question_id: (f = 48, g = 51, d.callWrap(d.memberLookup(n, "get", a.autoesc), 'item["get"]', ["id"])),
                                        field_set_key: "domain_list_item"
                                    }
                                })])),
                                options: d.contextOrFrameLookup(b, c, "item_options")
                            })])), a.autoesc), h += "\n            ") : (h += "\n                ", h += d.suppressValue((f = 53, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Question", d.makeKeywordArgs({
                                data: n,
                                resource: (f = 55, g = 44, d.callWrap(d.contextOrFrameLookup(b, c, "create_resource"), "create_resource", ["QuestionResource", d.makeKeywordArgs({
                                    options: {
                                        question_id: (f = 57, g = 51, d.callWrap(d.memberLookup(n, "get", a.autoesc), 'item["get"]', ["id"])),
                                        field_set_key: "list_item"
                                    }
                                })])),
                                options: d.contextOrFrameLookup(b, c, "item_options")
                            })])), a.autoesc), h += "\n            "), h += "\n        ";
                        else if ("answer" == d.contextOrFrameLookup(b, c, "type"))
                            h += "\n            ", h += d.suppressValue((f = 63, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Answer", d.makeKeywordArgs({
                                data: n,
                                resource: (f = 65, g = 40, d.callWrap(d.contextOrFrameLookup(b, c, "create_resource"), "create_resource", ["AnswerResource", d.makeKeywordArgs({
                                    options: {
                                        answer_id: (f = 67, g = 45, d.callWrap(d.memberLookup(n, "get", a.autoesc), 'item["get"]', ["id"])),
                                        field_set_key: "list_item"
                                    }
                                })])),
                                options: d.contextOrFrameLookup(b, c, "item_options")
                            })])), a.autoesc), h += "\n        ";
                        else if ("reply" == d.contextOrFrameLookup(b, c, "type"))
                            h += "\n            ", h += d.suppressValue((f = 72, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Reply", d.makeKeywordArgs({
                                data: n,
                                resource: (f = 74, g = 40, d.callWrap(d.contextOrFrameLookup(b, c, "create_resource"), "create_resource", ["ReplyResource", d.makeKeywordArgs({
                                    options: {
                                        reply_id: (f = 76, g = 44, d.callWrap(d.memberLookup(n, "get", a.autoesc), 'item["get"]', ["id"])),
                                        field_set_key: "list_item"
                                    }
                                })])),
                                options: d.contextOrFrameLookup(b, c, "item_options")
                            })])), a.autoesc), h += "\n        ";
                        else {
                            if (h += "\n            ", f = 81, g = 24, d.callWrap(d.memberLookup(n, "get", a.autoesc), 'item["get"]', ["module"]))
                                h += "\n                ", h += d.suppressValue((f = 82, g = 28, d.callWrap(d.contextOrFrameLookup(b, c, "ProxyModule"), "ProxyModule", [(f = 82, g = 37, d.callWrap(d.memberLookup(n, "get", a.autoesc), 'item["get"]', ["module"]))])), a.autoesc), h += "\n            ";
                            else if (f = 83, g = 26, d.callWrap(d.memberLookup(n, "get", a.autoesc), 'item["get"]', ["network"]))
                                h += "\n                ", h += d.suppressValue((f = 84, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["UserContact", d.makeKeywordArgs({
                                    options: {
                                        contact_info: n
                                    }
                                })])), a.autoesc), h += "\n            ";
                            else if ("email" == (f = 89, g = 26, d.callWrap(d.memberLookup(n, "get", a.autoesc), 'item["get"]', ["id_type"]))) {
                                h += "\n                ";
                                var q;
                                f = 90, g = 39, q = d.callWrap(d.memberLookup(n, "get", a.autoesc), 'item["get"]', ["checked"]) || (f = 90, g = 70, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "item_options"), "get", a.autoesc), 'item_options["get"]', ["checkedAll"])), c.set("checked", q, !0), c.parent || (b.setVariable("checked", q), b.addExport("checked")), h += "\n                ";
                                var r;
                                f = 91, g = 48, r = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "item_options"), "update", a.autoesc), 'item_options["update"]', [{
                                    checked: d.contextOrFrameLookup(b, c, "checked"),
                                    email_contact: n
                                }
                                ]), c.set("dummy", r, !0), c.parent || (b.setVariable("dummy", r), b.addExport("dummy")), h += "\n                ", h += d.suppressValue((f = 92, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["EmailContact", d.makeKeywordArgs({
                                    options: d.contextOrFrameLookup(b, c, "item_options")
                                })])), a.autoesc), h += "\n            "
                            } else if ("uid" == (f = 95, g = 27, d.callWrap(d.memberLookup(n, "get", a.autoesc), 'item["get"]', ["id_type"])) || "facebook_non_pinner" == (f = 95, g = 60, d.callWrap(d.memberLookup(n, "get", a.autoesc), 'item["get"]', ["type"]))) {
                                h += "\n                ";
                                var s;
                                f = 96, g = 48, s = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "item_options"), "update", a.autoesc), 'item_options["update"]', [{
                                    facebook_contact: n
                                }
                                ]), c.set("dummy", s, !0), c.parent || (b.setVariable("dummy", s), b.addExport("dummy")), h += "\n                ", h += d.suppressValue((f = 97, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["FacebookContact", d.makeKeywordArgs({
                                    options: d.contextOrFrameLookup(b, c, "item_options")
                                })])), a.autoesc), h += "\n            "
                            } else {
                                if (h += "\n                ", f = 101, g = 28, d.callWrap(d.memberLookup(n, "get", a.autoesc), 'item["get"]', ["text"])) {
                                    h += "\n                    ", f = 102, g = 32, d.callWrap(d.memberLookup(n, "get", a.autoesc), 'item["get"]', ["url"]) && (h += '\n                        <a class="', f = 103, g = 46, d.callWrap(d.memberLookup(n, "get", a.autoesc), 'item["get"]', ["external"]) && (h += "external "), h += d.suppressValue((f = 103, g = 84, d.callWrap(d.memberLookup(n, "get", a.autoesc), 'item["get"]', ["class_name"])), a.autoesc), h += '"\n                            ', f = 104, g = 40, d.callWrap(d.memberLookup(n, "get", a.autoesc), 'item["get"]', ["external"]) && (h += 'target="_blank" '), h += 'href="', h += d.suppressValue(d.memberLookup(n, "url", a.autoesc), a.autoesc), h += '"\n                            ', f = 105, g = 40, d.callWrap(d.memberLookup(n, "get", a.autoesc), 'item["get"]', ["ga_category"]) && (h += 'data-ga="', h += d.suppressValue(d.memberLookup(n, "ga_category", a.autoesc), a.autoesc), h += '"'), h += "\n                            ", f = 106, g = 40, d.callWrap(d.memberLookup(n, "get", a.autoesc), 'item["get"]', ["force_refresh"]) && (h += 'data-force-refresh="1"'), h += "\n                            ", f = 107, g = 40, (d.callWrap(d.memberLookup(n, "get", a.autoesc), 'item["get"]', ["log_element_type"]) || 0 == (f = 107, g = 72, d.callWrap(d.memberLookup(n, "get", a.autoesc), 'item["get"]', ["log_element_type"]))) && (h += '\n                                data-element-type="', h += d.suppressValue((f = 108, g = 60, d.callWrap(d.memberLookup(n, "get", a.autoesc), 'item["get"]', ["log_element_type"])), a.autoesc), h += '"\n                            '), h += ">\n                    "), h += "\n                        ", f = 111, g = 36, d.callWrap(d.memberLookup(n, "get", a.autoesc), 'item["get"]', ["icon_class_name"]) && (h += '\n                            <span class="', h += d.suppressValue(d.memberLookup(n, "icon_class_name", a.autoesc), a.autoesc), h += '"></span>\n                        '), h += "\n                        ";
                                    var t;
                                    f = 114, g = 50, t = d.callWrap(d.memberLookup(n, "get", a.autoesc), 'item["get"]', ["class_name"]), c.set("class_name", t, !0), c.parent || (b.setVariable("class_name", t), b.addExport("class_name")), h += "\n                        ", d.contextOrFrameLookup(b, c, "class_name") && (h += '<span class="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "class_name"), a.autoesc), h += '">\n                        '), h += "\n                        ", h += d.suppressValue(d.memberLookup(n, "text", a.autoesc), a.autoesc), h += "\n                        ", d.contextOrFrameLookup(b, c, "class_name") && (h += "\n                            </span>\n                        "), h += "\n                    ", f = 122, g = 32, d.callWrap(d.memberLookup(n, "get", a.autoesc), 'item["get"]', ["url"]) && (h += "\n                        </a>\n                    "), h += "\n                "
                                } else 
                                    h += "\n                    <hr ", f = 126, g = 36, d.callWrap(d.memberLookup(n, "get", a.autoesc), 'item["get"]', ["class_name"]) && (h += 'class="', h += d.suppressValue((f = 126, g = 67, d.callWrap(d.memberLookup(n, "get", a.autoesc), 'item["get"]', ["class_name"])), a.autoesc), h += '"'), h += ">\n                ";
                                    h += "\n\n            "
                            }
                            h += "\n        "
                        }
                        h += "\n    </li>\n"
                    }
                c = c.pop(), h += "\n", e(null, h)
            } catch (u) {
                e(d.handleError(u, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/Map/Map.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n";
                var i;
                if (i = d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "view_type", a.autoesc), c.set("view_type", i, !0), c.parent || (b.setVariable("view_type", i), b.addExport("view_type")), h += "\n", "board_page" == d.contextOrFrameLookup(b, c, "view_type")) {
                    h += "\n    ", h += d.suppressValue((f = 13, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["inBoardPage"])), a.autoesc), h += "\n    ";
                    var j;
                    j = "mapbox_board_page", c.set("mapbox_id", j, !0), c.parent || (b.setVariable("mapbox_id", j), b.addExport("mapbox_id")), h += "\n"
                } else if ("closeup" == d.contextOrFrameLookup(b, c, "view_type")) {
                    h += "\n    ", h += d.suppressValue((f = 16, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["inCloseup"])), a.autoesc), h += "\n    ";
                    var k;
                    k = "mapbox_closeup", c.set("mapbox_id", k, !0), c.parent || (b.setVariable("mapbox_id", k), b.addExport("mapbox_id")), h += "\n"
                }
                h += "\n\n";
                var l;
                f = 20, g = 29, l = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["class_name", "mapbox"]), c.set("class_name", l, !0), c.parent || (b.setVariable("class_name", l), b.addExport("class_name")), h += '\n\n<div id="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "mapbox_id"), a.autoesc), h += '" class="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "class_name"), a.autoesc), h += '"></div>\n<div class="attribution">\n    <a href= "', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "settings"), "HELP_ABOUT_MAP_URL", a.autoesc), a.autoesc), h += '">', h += d.suppressValue((f = 24, g = 47, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["About this map"])), a.autoesc), h += " <em></em></a>\n</div>\n", e(null, h)
            } catch (m) {
                e(d.handleError(m, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/Map/addToMapToast.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                var i;
                i = d.contextOrFrameLookup(b, c, "image") || "", c.set("image", i, !0), c.parent || (b.setVariable("image", i), b.addExport("image")), h += "\n";
                var j;
                j = d.contextOrFrameLookup(b, c, "name") || "", c.set("name", j, !0), c.parent || (b.setVariable("name", j), b.addExport("name")), h += '\n\n<div class="addToMapToast">\n    ', d.contextOrFrameLookup(b, c, "image") && (h += "\n        <div class=\"imageWrapper\">\n            <img class='popupToastPinImage' src='", h += d.suppressValue(d.contextOrFrameLookup(b, c, "image"), a.autoesc), h += "'>\n        </div>\n    "), h += "\n    <h3 class='toastPlaceName'>", h += d.suppressValue(d.contextOrFrameLookup(b, c, "name"), a.autoesc), h += '</h3>\n    <p class="toastAddedToMap">', h += d.suppressValue((f = 10, g = 33, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Added to your map!"])), a.autoesc), h += "</p>\n</div>\n", e(null, h)
            } catch (k) {
                e(d.handleError(k, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/Map/marker.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                var i;
                i = d.contextOrFrameLookup(b, c, "pinImage") || "", c.set("pinImage", i, !0), c.parent || (b.setVariable("pinImage", i), b.addExport("pinImage")), h += "\n";
                var j;
                j = d.contextOrFrameLookup(b, c, "markerWrapperClassName") || "", c.set("markerWrapperClassName", j, !0), c.parent || (b.setVariable("markerWrapperClassName", j), b.addExport("markerWrapperClassName")), h += "\n";
                var k;
                k = d.contextOrFrameLookup(b, c, "markerClassName") || "", c.set("markerClassName", k, !0), c.parent || (b.setVariable("markerClassName", k), b.addExport("markerClassName")), h += '\n\n<div class="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "markerWrapperClassName"), a.autoesc), h += '">\n    <div class="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "markerClassName"), a.autoesc), h += '">\n        <div class="imageContainer">\n            ', d.contextOrFrameLookup(b, c, "pinImage") && "" != d.contextOrFrameLookup(b, c, "pinImage") && (h += '\n                <img src="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "pinImage"), a.autoesc), h += '" alt="">\n            '), h += "\n        </div>\n    </div>\n</div>\n", e(null, h)
            } catch (l) {
                e(d.handleError(l, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/Map/markerCluster.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                var i;
                i = d.contextOrFrameLookup(b, c, "markerClusterPinImage") || "", c.set("markerClusterPinImage", i, !0), c.parent || (b.setVariable("markerClusterPinImage", i), b.addExport("markerClusterPinImage")), h += "\n";
                var j;
                j = d.contextOrFrameLookup(b, c, "clusterChildCount") || "", c.set("clusterChildCount", j, !0), c.parent || (b.setVariable("clusterChildCount", j), b.addExport("clusterChildCount")), h += '\n\n<div class="markerCluster">\n    <div class="imageContainerClustered">\n        <img src="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "markerClusterPinImage"), a.autoesc), h += '" alt="">\n    </div>\n    <em class="clusterChildCount">\n        ', h += d.suppressValue(d.contextOrFrameLookup(b, c, "clusterChildCount"), a.autoesc), h += "\n    </em>\n</div>\n", e(null, h)
            } catch (k) {
                e(d.handleError(k, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/Map/markerPopup.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                var i;
                i = d.memberLookup(d.contextOrFrameLookup(b, c, "place"), "region", a.autoesc), c.set("region", i, !0), c.parent || (b.setVariable("region", i), b.addExport("region")), h += "\n";
                var j;
                j = d.memberLookup(d.contextOrFrameLookup(b, c, "place"), "category", a.autoesc), c.set("category", j, !0), c.parent || (b.setVariable("category", j), b.addExport("category")), h += "\n";
                var k;
                k = d.memberLookup(d.contextOrFrameLookup(b, c, "place"), "locality", a.autoesc), c.set("locality", k, !0), c.parent || (b.setVariable("locality", k), b.addExport("locality")), h += "\n";
                var l;
                l = d.memberLookup(d.contextOrFrameLookup(b, c, "place"), "street", a.autoesc), c.set("street", l, !0), c.parent || (b.setVariable("street", l), b.addExport("street")), h += "\n";
                var m;
                m = d.memberLookup(d.contextOrFrameLookup(b, c, "place"), "phone", a.autoesc), c.set("phone", m, !0), c.parent || (b.setVariable("phone", m), b.addExport("phone")), h += "\n";
                var n;
                n = d.contextOrFrameLookup(b, c, "place") || {}, c.set("place", n, !0), c.parent || (b.setVariable("place", n), b.addExport("place")), h += "\n";
                var o;
                o = d.contextOrFrameLookup(b, c, "name") || "", c.set("name", o, !0), c.parent || (b.setVariable("name", o), b.addExport("name")), h += "\n";
                var p;
                p = d.contextOrFrameLookup(b, c, "url") || "", c.set("url", p, !0), c.parent || (b.setVariable("url", p), b.addExport("url")), h += "\n\n";
                var q;
                q=!d.contextOrFrameLookup(b, c, "street") && (d.contextOrFrameLookup(b, c, "locality") || d.contextOrFrameLookup(b, c, "region")), c.set("show_just_locality", q, !0), c.parent || (b.setVariable("show_just_locality", q), b.addExport("show_just_locality")), h += '\n\n<div class="popupContentWrapper" itemscope itemtype="http://schema.org/Place">\n    <h3 class="placeName" itemprop="name">\n        ', h += d.suppressValue(d.contextOrFrameLookup(b, c, "name"), a.autoesc), h += "\n    </h3>\n    ", (d.contextOrFrameLookup(b, c, "category") || d.contextOrFrameLookup(b, c, "show_just_locality")) && (h += '\n        <p class="categoryLocation">\n            ', d.contextOrFrameLookup(b, c, "category") && (h += "\n                <strong>", h += d.suppressValue(d.contextOrFrameLookup(b, c, "category"), a.autoesc), h += "</strong>\n            "), h += "\n            ", d.contextOrFrameLookup(b, c, "show_just_locality") && (h += '\n                <span itemprop="address" itemscope itemtype="http://schema.org/PostalAddress">\n                    ', d.contextOrFrameLookup(b, c, "category") && (h += d.suppressValue((f = 22, g = 35, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["in"])), a.autoesc)), h += "\n                    ", d.contextOrFrameLookup(b, c, "locality") && (h += '<span itemprop="addressLocality">', h += d.suppressValue(d.contextOrFrameLookup(b, c, "locality"), a.autoesc), h += "</span>"), d.contextOrFrameLookup(b, c, "region") && (d.contextOrFrameLookup(b, c, "locality") && (h += ", "), h += '<span itemprop="addressRegion">', h += d.suppressValue(d.contextOrFrameLookup(b, c, "region"), a.autoesc), h += "</span>"), h += "\n                </span>\n            "), h += "\n        </p>\n    "), h += "\n    ", d.contextOrFrameLookup(b, c, "street") && (h += '\n        <h4 class="heading">', h += d.suppressValue((f = 35, g = 30, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Address"])), a.autoesc), h += '</h4>\n        <p class="address" itemprop="address" itemscope itemtype="http://schema.org/PostalAddress">\n            ', d.contextOrFrameLookup(b, c, "street") && (h += '<span itemprop="streetAddress">', h += d.suppressValue(d.contextOrFrameLookup(b, c, "street"), a.autoesc), h += "</span><br>"), h += '\n                <span itemprop="addressLocality">', h += d.suppressValue(d.contextOrFrameLookup(b, c, "locality"), a.autoesc), h += "</span>", d.contextOrFrameLookup(b, c, "region") && (h += ', <span itemprop="addressRegion">', h += d.suppressValue(d.contextOrFrameLookup(b, c, "region"), a.autoesc), h += "</span>"), h += "\n        </p>\n    "), h += "\n    ", d.contextOrFrameLookup(b, c, "phone") && (h += '\n        <h4 class="heading">', h += d.suppressValue((f = 47, g = 30, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Contact Information"])), a.autoesc), h += '</h4>\n        <p class="address" itemprop="telephone">\n            ', h += d.suppressValue(d.contextOrFrameLookup(b, c, "phone"), a.autoesc), h += "\n        </p>\n    "), h += "\n\n    ", d.contextOrFrameLookup(b, c, "url") && (h += '\n        <div class="sourceLinkWrapper">\n            <a href="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "url"), a.autoesc), h += '" target="_blank" class="Button btn rounded sourceLink" rel="nofollow">', h += d.suppressValue((f = 55, g = 99, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Learn More"])), a.autoesc), h += "</a>\n        </div>\n    "), h += "\n</div>\n", e(null, h)
            } catch (r) {
                e(d.handleError(r, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/NavigateButton/NavigateButton.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "force_refresh", a.autoesc) && (h += "\n    ", h += d.suppressValue((f = 8, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "attr"), "attr", [{
                    "data-force-refresh": 1
                }
                ])), a.autoesc)), d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "nofollow", a.autoesc) && (h += "\n    ", h += d.suppressValue((f = 11, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "attr"), "attr", [d.makeKeywordArgs({
                    rel: "nofollow"
                })])), a.autoesc)), h += "\n\n", h += d.suppressValue((f = 14, g = 1, d.callWrap(d.contextOrFrameLookup(b, c, "base"), "base", ["Button"])), a.autoesc), a.getTemplate("app/common/modules/Button/Button.nunjucks", !0, function(f, g) {
                    if (f)
                        return void e(f);
                    for (var i in g.blocks)
                        b.addBlock(i, g.blocks[i]);
                    h += "\n", g.rootRenderFunc(a, b, c, d, e)
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/NuxProgressBase/NuxProgressBase.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n";
                var i;
                f = 6, g = 25, i = d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Next"]), c.set("next_button_text", i, !0), c.parent || (b.setVariable("next_button_text", i), b.addExport("next_button_text")), h += "\n";
                var j;
                f = 7, g = 25, j = d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Skip"]), c.set("skip_button_text", j, !0), c.parent || (b.setVariable("skip_button_text", j), b.addExport("skip_button_text")), h += "\n\n", b.getBlock("initialize_steps")(a, b, c, d, function(f, g) {
                    return f ? void e(f) : (h += g, h += "\n\n", void b.getBlock("content")(a, b, c, d, function(a, b) {
                        return a ? void e(a) : (h += b, h += "\n", void e(null, h))
                    }))
                })
            } catch (k) {
                e(d.handleError(k, f, g))
            }
        }
        function b(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n", e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function c(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n", e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            b_initialize_steps: b,
            b_content: c,
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/PagedCollection/PagedCollection.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n", b.getBlock("content")(a, b, c, d, function(i, j) {
                    return i ? void e(i) : (h += j, h += '\n\n<div class="moreItemsContainer ', f = 12, g = 46, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["hide_button"]) && (h += " hidden "), h += '">\n    ', h += d.suppressValue((f = 13, g = 11, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                        id: "moreItems",
                        options: (f = 15, g = 27, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["more_items_button_options"]))
                    })])), a.autoesc), h += "\n</div>\n", void e(null, h))
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function b(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            b_content: b,
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/PagedGrid/PagedGrid.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n";
                var i;
                i = {
                    centered: !1,
                    pad_items: !0,
                    show_grid_footer: !1
                }, c.set("grid_options", i, !0), c.parent || (b.setVariable("grid_options", i), b.addExport("grid_options")), h += "\n";
                var j;
                f = 15, g = 23, j = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "grid_options"), "update", a.autoesc), 'grid_options["update"]', [(f = 15, g = 35, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["grid_options", {}
                ]))]), c.set("_temp_do", j, !0), c.parent || b.setVariable("_temp_do", j), h += "\n\n", f = 17, g = 20, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "grid_options"), "get", a.autoesc), 'grid_options["get"]', ["pad_items"]) && (h += "\n    ", h += d.suppressValue((f = 18, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["padItems"])), a.autoesc), h += "\n"), h += "\n\n", f = 21, g = 15, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["force_vertical_scrollbar"]) && (h += "\n    ", h += d.suppressValue((f = 22, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["forceVerticalScroll"])), a.autoesc), h += "\n"), h += "\n\n";
                var k;
                k = {
                    class_name: "moreItems",
                    log_element_type: d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "SEE_MORE_BUTTON", a.autoesc)
                }, c.set("more_items_button_options", k, !0), c.parent || (b.setVariable("more_items_button_options", k), b.addExport("more_items_button_options")), h += "\n\n";
                var l;
                f = 30, g = 36, l = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "more_items_button_options"), "update", a.autoesc), 'more_items_button_options["update"]', [(f = 30, g = 48, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["more_items_button_options", {}
                ]))]), c.set("_temp_do", l, !0), c.parent || b.setVariable("_temp_do", l), h += "\n\n", h += d.suppressValue((f = 32, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "describe"), "describe", [d.makeKeywordArgs({
                    more_items_button_options: d.contextOrFrameLookup(b, c, "more_items_button_options")
                })])), a.autoesc), h += "\n\n", h += d.suppressValue((f = 36, g = 1, d.callWrap(d.contextOrFrameLookup(b, c, "base"), "base", ["PagedCollection"])), a.autoesc), a.getTemplate("app/common/modules/PagedCollection/PagedCollection.nunjucks", !0, function(f, g) {
                    if (f)
                        return void e(f);
                    for (var i in g.blocks)
                        b.addBlock(i, g.blocks[i]);
                    h += "\n\n", h += "\n", g.rootRenderFunc(a, b, c, d, e)
                })
            } catch (m) {
                e(d.handleError(m, f, g))
            }
        }
        function b(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n    ", h += d.suppressValue((f = 39, g = 11, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Grid", d.makeKeywordArgs({
                    id: "grid",
                    data: d.contextOrFrameLookup(b, c, "data"),
                    resource: d.contextOrFrameLookup(b, c, "resource"),
                    options: d.contextOrFrameLookup(b, c, "grid_options"),
                    error_strategy: d.memberLookup(d.contextOrFrameLookup(b, c, "ErrorStrategy"), "BUBBLE", a.autoesc)
                })])), a.autoesc), h += "\n", e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            b_content: b,
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/PinBase/PinBase.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n";
                var i = d.makeMacro(["repin_count", "like_count", "comment_count", "pin_url"], [], function(e, f, g, h, i) {
                    c = c.push(), i = i || {}, i.hasOwnProperty("caller") && c.set("caller", i.caller), c.set("repin_count", e), c.set("like_count", f), c.set("comment_count", g), c.set("pin_url", h);
                    var j = "";
                    if (j += "\n    ", e) {
                        j += "\n        ";
                        var k;
                        k = h + "repins/", c.set("repin_url", k, !0), c.parent || (b.setVariable("repin_url", k), b.addExport("repin_url")), j += '\n        <a class="socialItem" href="', j += d.suppressValue(d.contextOrFrameLookup(b, c, "repin_url"), a.autoesc), j += '">\n            <em class="repinIconSmall"></em>\n            <em class="socialMetaCount repinCountSmall">\n                ', j += d.suppressValue(e, a.autoesc), j += "\n            </em>\n        </a>\n    "
                    }
                    if (j += "\n    ", f) {
                        j += "\n        ";
                        var l;
                        l = h + "likes/", c.set("likes_url", l, !0), c.parent || (b.setVariable("likes_url", l), b.addExport("likes_url")), j += '\n        <a class="socialItem likes" href="', j += d.suppressValue(d.contextOrFrameLookup(b, c, "likes_url"), a.autoesc), j += '">\n            <em class="likeIconSmall"></em>\n            <em class="socialMetaCount likeCountSmall">\n                ', j += d.suppressValue(f, a.autoesc), j += "\n            </em>\n        </a>\n    "
                    }
                    if (j += "\n    ", g) {
                        j += "\n        ";
                        var m;
                        m = h, c.set("comments_url", m, !0), c.parent || (b.setVariable("comments_url", m), b.addExport("comments_url")), j += '\n        <a class="socialItem comments" href="', j += d.suppressValue(d.contextOrFrameLookup(b, c, "comments_url"), a.autoesc), j += '">\n            <em class="commentIconSmall"></em>\n            <em class="socialMetaCount commentCountSmall">\n                ', j += d.suppressValue(g, a.autoesc), j += "\n            </em>\n        </a>\n    "
                    }
                    return j += "\n", c = c.pop(), new d.SafeString(j)
                });
                b.addExport("social_meta_icons_and_counts"), b.setVariable("social_meta_icons_and_counts", i), h += "\n\n";
                var j = d.makeMacro(["pin_id", "comment_count", "comments_data", "show_actions", "max_num_to_show"], [], function(e, h, i, j, k, l) {
                    c = c.push(), l = l || {}, l.hasOwnProperty("caller") && c.set("caller", l.caller), c.set("pin_id", e), c.set("comment_count", h), c.set("comments_data", i), c.set("show_actions", j), c.set("max_num_to_show", k);
                    var m = "";
                    return m += "\n    ", m += d.suppressValue((f = 49, g = 11, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["PinCommentList", d.makeKeywordArgs({
                        id: "commentList",
                        data: i,
                        options: {
                            pin_id: e,
                            count: h,
                            image_size: "medium",
                            show_actions: j,
                            max_num_to_show: k,
                            view_type: "detailed"
                        },
                        resource: (f = 60, g = 32, d.callWrap(d.contextOrFrameLookup(b, c, "create_resource"), "create_resource", ["PinCommentListResource", d.makeKeywordArgs({
                            options: {
                                field_set_key: "pin_detailed",
                                pin_id: e,
                                page_size: k
                            }
                        })]))
                    })])), a.autoesc), m += "\n", c = c.pop(), new d.SafeString(m)
                });
                b.addExport("detailed_view_pin_comment_list"), b.setVariable("detailed_view_pin_comment_list", j), h += "\n\n";
                var k = d.makeMacro(["credit_pinner", "title_text"], [], function(e, h, i) {
                    c = c.push(), i = i || {}, i.hasOwnProperty("caller") && c.set("caller", i.caller), c.set("credit_pinner", e), c.set("title_text", h);
                    var j = "";
                    return j += "\n    ", j += d.suppressValue((f = 71, g = 11, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["User", d.makeKeywordArgs({
                        data: e,
                        options: {
                            view_type: "thumb",
                            class_name: "pinner",
                            button_class_name: "closeupBottomView",
                            title_text: h,
                            url_element_type: d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "PIN_USER", a.autoesc)
                        },
                        resource: (f = 80, g = 32, d.callWrap(d.contextOrFrameLookup(b, c, "create_resource"), "create_resource", ["UserResource", d.makeKeywordArgs({
                            options: {
                                username: (f = 82, g = 45, d.callWrap(d.memberLookup(e, "get", a.autoesc), 'credit_pinner["get"]', ["username"]))
                            }
                        })]))
                    })])), a.autoesc), j += "\n", c = c.pop(), new d.SafeString(j)
                });
                b.addExport("detailed_view_pin_credit_user"), b.setVariable("detailed_view_pin_credit_user", k), h += "\n\n";
                var l = d.makeMacro(["board", "board_title_text", "show_follow_button"], [], function(e, h, i, j) {
                    c = c.push(), j = j || {}, j.hasOwnProperty("caller") && c.set("caller", j.caller), c.set("board", e), c.set("board_title_text", h), c.set("show_follow_button", i);
                    var k = "";
                    return k += "\n    ", k += d.suppressValue((f = 88, g = 11, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Board", d.makeKeywordArgs({
                        options: {
                            view_type: "closeupBottomView",
                            show_follow_button: i,
                            title: h,
                            subtitle: (f = 93, g = 33, d.callWrap(d.memberLookup(e, "get", a.autoesc), 'board["get"]', ["name"]))
                        },
                        resource: (f = 95, g = 32, d.callWrap(d.contextOrFrameLookup(b, c, "create_resource"), "create_resource", ["BoardResource", d.makeKeywordArgs({
                            options: {
                                field_set_key: "thumb",
                                board_id: (f = 98, g = 37, d.callWrap(d.memberLookup(e, "get", a.autoesc), 'board["get"]', ["id"]))
                            }
                        })]))
                    })])), a.autoesc), k += "\n", c = c.pop(), new d.SafeString(k)
                });
                b.addExport("detailed_view_pin_credit_board"), b.setVariable("detailed_view_pin_credit_board", l), h += "\n\n";
                var m = d.makeMacro(["pinner", "board", "via_pinner", "is_repin", "show_follow_button"], [], function(e, h, i, j, m, n) {
                    c = c.push(), n = n || {}, n.hasOwnProperty("caller") && c.set("caller", n.caller), c.set("pinner", e), c.set("board", h), c.set("via_pinner", i), c.set("is_repin", j), c.set("show_follow_button", m);
                    var o = "";
                    return o += "\n    ", o += d.suppressValue((f = 105, g = 34, d.callWrap(k, "detailed_view_pin_credit_user", [e, (f = 105, g = 44, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Added by"]))])), a.autoesc), o += "\n    ", j && i ? (o += "\n        ", o += d.suppressValue((f = 107, g = 38, d.callWrap(k, "detailed_view_pin_credit_user", [i, (f = 107, g = 52, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Via"]))])), a.autoesc), o += "\n    ") : (o += "\n        ", h && (o += "\n            ", o += d.suppressValue((f = 110, g = 43, d.callWrap(l, "detailed_view_pin_credit_board", [h, (f = 110, g = 52, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Added to"])), m])), a.autoesc), o += "\n        "), o += "\n    "), o += "\n", c = c.pop(), new d.SafeString(o)
                });
                b.addExport("detailed_view_pin_credits"), b.setVariable("detailed_view_pin_credits", m), h += "\n\n";
                var n = d.makeMacro(["embed"], [], function(e, h) {
                    c = c.push(), h = h || {}, h.hasOwnProperty("caller") && c.set("caller", h.caller), c.set("embed", e);
                    var i = "";
                    i += "\n    ";
                    var j;
                    if (j = e && "gif" == (f = 116, g = 37, d.callWrap(d.memberLookup(e, "get", a.autoesc), 'embed["get"]', ["type"])), c.set("is_gif", j, !0), c.parent || (b.setVariable("is_gif", j), b.addExport("is_gif")), i += "\n    ", d.contextOrFrameLookup(b, c, "is_gif")) {
                        i += "\n        ";
                        var k;
                        k = "gifType", c.set("indicator_class", k, !0), c.parent || (b.setVariable("indicator_class", k), b.addExport("indicator_class")), i += "\n    "
                    } else {
                        i += "\n        ";
                        var l;
                        l = "videoType", c.set("indicator_class", l, !0), c.parent || (b.setVariable("indicator_class", l), b.addExport("indicator_class")), i += "\n    "
                    }
                    return i += '\n\n    <div class="playIndicatorPill ', i += d.suppressValue(d.contextOrFrameLookup(b, c, "indicator_class"), a.autoesc), i += '">\n        <div class="state"></div>\n        ', d.contextOrFrameLookup(b, c, "is_gif") ? (i += "\n            ", i += d.suppressValue((f = 126, g = 14, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["GIF"])), a.autoesc), i += "\n        ") : (i += "\n            ", i += d.suppressValue((f = 128, g = 14, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["PLAY"])), a.autoesc), i += "\n        "), i += "\n    </div>\n", c = c.pop(), new d.SafeString(i)
                });
                b.addExport("play_indicator_pill"), b.setVariable("play_indicator_pill", n), h += "\n\n", b.getBlock("additional_data")(a, b, c, d, function(i, j) {
                    if (i)
                        return void e(i);
                    h += j, h += "\n\n";
                    var k;
                    k = d.contextOrFrameLookup(b, c, "data"), c.set("pin", k, !0), c.parent || (b.setVariable("pin", k), b.addExport("pin")), h += "\n";
                    var l;
                    f = 136, g = 21, l = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["pinner", {}
                    ]), c.set("pinner", l, !0), c.parent || (b.setVariable("pinner", l), b.addExport("pinner")), h += "\n";
                    var m;
                    f = 137, g = 20, m = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["board", {}
                    ]), c.set("board", m, !0), c.parent || (b.setVariable("board", m), b.addExport("board")), h += "\n";
                    var n;
                    f = 138, g = 21, n = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["domain"]), c.set("domain", n, !0), c.parent || (b.setVariable("domain", n), b.addExport("domain")), h += "\n";
                    var o;
                    f = 139, g = 23, o = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["is_repin"]), c.set("is_repin", o, !0), c.parent || (b.setVariable("is_repin", o), b.addExport("is_repin")), h += "\n";
                    var p;
                    f = 140, g = 26, p = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["description", ""]), c.set("description", p, !0), c.parent || (b.setVariable("description", p), b.addExport("description")), h += "\n";
                    var q;
                    q = a.getFilter("safe").call(b, a.getFilter("trim").call(b, (f = 141, g = 31, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["description_html", ""])))), c.set("description_html", q, !0), c.parent || (b.setVariable("description_html", q), b.addExport("description_html")), h += "\n";
                    var r;
                    f = 142, g = 23, r = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["pin_join", d.contextOrFrameLookup(b, c, "none")]), c.set("pin_join", r, !0), c.parent || (b.setVariable("pin_join", r), b.addExport("pin_join")), h += "\n";
                    var s;
                    s = d.contextOrFrameLookup(b, c, "description"), c.set("title_text", s, !0), c.parent || (b.setVariable("title_text", s), b.addExport("title_text")), h += "\n";
                    var t;
                    if (t = d.contextOrFrameLookup(b, c, "description"), c.set("alt_text", t, !0), c.parent || (b.setVariable("alt_text", t), b.addExport("alt_text")), h += "\n", d.contextOrFrameLookup(b, c, "pin_join")) {
                        if (h += "\n    ", d.memberLookup(d.contextOrFrameLookup(b, c, "pin_join"), "seo_description", a.autoesc)) {
                            h += "\n        ";
                            var u;
                            if (u = d.memberLookup(d.contextOrFrameLookup(b, c, "pin_join"), "seo_description", a.autoesc), c.set("seo_description", u, !0), c.parent || (b.setVariable("seo_description", u), b.addExport("seo_description")), h += "\n        ", a.getFilter("lower").call(b, d.contextOrFrameLookup(b, c, "seo_description")) == a.getFilter("lower").call(b, d.contextOrFrameLookup(b, c, "description_html"))) {
                                h += "\n            ";
                                var v;
                                v = d.contextOrFrameLookup(b, c, "none"), c.set("seo_description", v, !0), c.parent || (b.setVariable("seo_description", v), b.addExport("seo_description")), h += "\n        "
                            }
                            h += "\n        ";
                            var w;
                            w = d.contextOrFrameLookup(b, c, "seo_description") || d.contextOrFrameLookup(b, c, "title_text"), c.set("title_text", w, !0), c.parent || (b.setVariable("title_text", w), b.addExport("title_text")), h += "\n    "
                        }
                        if (h += "\n\n    ", d.memberLookup(d.contextOrFrameLookup(b, c, "pin_join"), "visual_annotation", a.autoesc)) {
                            h += "\n        ";
                            var x;
                            if (x = a.getFilter("join").call(b, d.memberLookup(d.contextOrFrameLookup(b, c, "pin_join"), "visual_annotation", a.autoesc), ", "), c.set("visual_text", x, !0), c.parent || (b.setVariable("visual_text", x), b.addExport("visual_text")), h += "\n        ", d.contextOrFrameLookup(b, c, "visual_text")) {
                                h += "\n            ";
                                var y;
                                y = d.contextOrFrameLookup(b, c, "title_text") ? a.getFilter("join").call(b, [d.contextOrFrameLookup(b, c, "title_text"), d.contextOrFrameLookup(b, c, "visual_text")], " ") : d.contextOrFrameLookup(b, c, "visual_text"), c.set("title_text", y, !0), c.parent || (b.setVariable("title_text", y), b.addExport("title_text")), h += "\n            ";
                                var z;
                                f = 159, g = 43, z = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["show_vase_v2"]), c.set("show_vase_v2", z, !0), c.parent || (b.setVariable("show_vase_v2", z), b.addExport("show_vase_v2")), h += "\n        "
                            }
                            h += "\n    "
                        }
                        h += "\n"
                    }
                    h += "\n";
                    var A;
                    f = 163, g = 42, A = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["view_on_map_button", !1]), c.set("show_view_on_map_button", A, !0), c.parent || (b.setVariable("show_view_on_map_button", A), b.addExport("show_view_on_map_button")), h += "\n\n";
                    var B;
                    B = d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "user", a.autoesc), c.set("user", B, !0), c.parent || (b.setVariable("user", B), b.addExport("user")), h += "\n\n";
                    var C;
                    if (f = 167, g = 28, C = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["view_type", "summary"]), c.set("view_type", C, !0), c.parent || (b.setVariable("view_type", C), b.addExport("view_type")), h += "\n", "boardPinsGrid" == d.contextOrFrameLookup(b, c, "view_type"))
                        h += "\n    ", b.getBlock("board_pins_grid_view")(a, b, c, d, function(a, b) {
                            return a ? void e(a) : (h += b, void(h += "\n"))
                        });
                    else if ("visualObjectGrid" == d.contextOrFrameLookup(b, c, "view_type"))
                        h += "\n    ", b.getBlock("visual_object_grid_view")(a, b, c, d, function(a, b) {
                            return a ? void e(a) : (h += b, void(h += "\n"))
                        });
                    else {
                        if (h += "\n    ", f = 173, g = 19, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["mask_pin"]) && (h += '\n        <div class="pinMask"></div>\n    '), h += '\n    <div class="pinWrapper">\n        ', "summary" == d.contextOrFrameLookup(b, c, "view_type")) {
                            h += "\n\n            ";
                            var D;
                            f = 179, g = 39, D = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["rich_summary"]), c.set("rich_summary", D, !0), c.parent || (b.setVariable("rich_summary", D), b.addExport("rich_summary")), h += "\n            ";
                            var E;
                            f = 180, g = 32, E = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["place", (f = 180, g = 49, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["place_summary"]))]) || {}, c.set("place", E, !0), c.parent || (b.setVariable("place", E), b.addExport("place")), h += "\n            ";
                            var F;
                            if (F = "", c.set("rich_title", F, !0), c.parent || (b.setVariable("rich_title", F), b.addExport("rich_title")), h += "\n            ", d.contextOrFrameLookup(b, c, "rich_summary")&&!d.contextOrFrameLookup(b, c, "show_view_on_map_button")) {
                                h += "\n                ";
                                var G;
                                if (f = 183, g = 54, G = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "rich_summary"), "get", a.autoesc), 'rich_summary["get"]', ["type_name"]), c.set("rich_type_name", G, !0), c.parent || (b.setVariable("rich_type_name", G), b.addExport("rich_type_name")), h += "\n                ", d.contextOrFrameLookup(b, c, "rich_type_name")) {
                                    h += "\n                    ";
                                    var H;
                                    f = 185, g = 61, H = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "rich_summary"), "get", a.autoesc), 'rich_summary["get"]', ["apple_touch_icon_link"]) || (f = 186, g = 43, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "rich_summary"), "get", a.autoesc), 'rich_summary["get"]', ["favicon_link"])), c.set("rich_favicon_link", H, !0), c.parent || (b.setVariable("rich_favicon_link", H), b.addExport("rich_favicon_link")), h += "\n                    ";
                                    var I;
                                    f = 187, g = 58, I = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "rich_summary"), "get", a.autoesc), 'rich_summary["get"]', ["site_name"]) || d.contextOrFrameLookup(b, c, "domain"), c.set("rich_site_name", I, !0), c.parent || (b.setVariable("rich_site_name", I), b.addExport("rich_site_name")), h += "\n                    ";
                                    var J;
                                    if (f = 188, g = 54, J = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "rich_summary"), "get", a.autoesc), 'rich_summary["get"]', ["display_name"]), c.set("rich_title", J, !0), c.parent || (b.setVariable("rich_title", J), b.addExport("rich_title")), h += "\n                    ", !d.contextOrFrameLookup(b, c, "attribution") && d.contextOrFrameLookup(b, c, "rich_site_name") && d.contextOrFrameLookup(b, c, "rich_favicon_link") && d.contextOrFrameLookup(b, c, "domain")) {
                                        h += "\n                        ";
                                        var K;
                                        K = {
                                            author_url: "/source/" + d.contextOrFrameLookup(b, c, "domain") + "/",
                                            rich_site_name: d.contextOrFrameLookup(b, c, "rich_site_name"),
                                            provider_favicon_url: d.contextOrFrameLookup(b, c, "rich_favicon_link")
                                        }, c.set("attribution", K, !0), c.parent || (b.setVariable("attribution", K), b.addExport("attribution")), h += "\n                    "
                                    }
                                    h += "\n                "
                                }
                                h += "\n            "
                            } else if (d.contextOrFrameLookup(b, c, "place")) {
                                h += "\n                ";
                                var L;
                                if (f = 196, g = 47, L = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "place"), "get", a.autoesc), 'place["get"]', ["type"]), c.set("rich_type_name", L, !0), c.parent || (b.setVariable("rich_type_name", L), b.addExport("rich_type_name")), h += "\n                ", d.contextOrFrameLookup(b, c, "rich_type_name")) {
                                    h += "\n                    ";
                                    var M;
                                    f = 198, g = 54, M = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "place"), "get", a.autoesc), 'place["get"]', ["source_icon"]), c.set("rich_favicon_link", M, !0), c.parent || (b.setVariable("rich_favicon_link", M), b.addExport("rich_favicon_link")), h += "\n                    ";
                                    var N;
                                    f = 199, g = 51, N = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "place"), "get", a.autoesc), 'place["get"]', ["source_name"]) || d.contextOrFrameLookup(b, c, "domain"), c.set("rich_site_name", N, !0), c.parent || (b.setVariable("rich_site_name", N), b.addExport("rich_site_name")), h += "\n                    ";
                                    var O;
                                    f = 200, g = 47, O = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "place"), "get", a.autoesc), 'place["get"]', ["name"]), c.set("rich_title", O, !0), c.parent || (b.setVariable("rich_title", O), b.addExport("rich_title")), h += "\n                "
                                }
                                h += "\n            "
                            }
                            h += "\n\n            ";
                            var P;
                            f = 204, g = 42, P = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["show_pinner", !1]), c.set("show_pinner", P, !0), c.parent || (b.setVariable("show_pinner", P), b.addExport("show_pinner")), h += "\n            ";
                            var Q;
                            f = 205, g = 41, Q = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["show_board", !1]), c.set("show_board", Q, !0), c.parent || (b.setVariable("show_board", Q), b.addExport("show_board")), h += "\n            ";
                            var R;
                            f = 206, g = 47, R = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["show_pinned_from", !1]), c.set("show_pinned_from", R, !0), c.parent || (b.setVariable("show_pinned_from", R), b.addExport("show_pinned_from")), h += "\n            ";
                            var S;
                            S=!d.contextOrFrameLookup(b, c, "is_repin") && (f = 207, g = 62, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["is_uploaded"])), c.set("uploaded_by_pinner", S, !0), c.parent || (b.setVariable("uploaded_by_pinner", S), b.addExport("uploaded_by_pinner")), h += "\n            ";
                            var T;
                            if (f = 208, g = 48, T = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["recommendation_reason"]), c.set("recommendation_reason", T, !0), c.parent || (b.setVariable("recommendation_reason", T), b.addExport("recommendation_reason")), h += "\n\n            ", d.contextOrFrameLookup(b, c, "recommendation_reason") && "FOLLOWED_INTEREST" == d.memberLookup(d.contextOrFrameLookup(b, c, "recommendation_reason"), "reason", a.autoesc)) {
                                h += "\n                ";
                                var U;
                                if (f = 211, g = 46, U = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["source_interest"]), c.set("source_interest", U, !0), c.parent || (b.setVariable("source_interest", U), b.addExport("source_interest")), h += "\n                ", d.contextOrFrameLookup(b, c, "source_interest")) {
                                    h += "\n                    ";
                                    var V;
                                    f = 213, g = 60, V = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "source_interest"), "get", a.autoesc), 'source_interest["get"]', ["name"]), c.set("interest_name", V, !0), c.parent || (b.setVariable("interest_name", V), b.addExport("interest_name")), h += "\n                    ";
                                    var W;
                                    f = 214, g = 64, W = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "source_interest"), "get", a.autoesc), 'source_interest["get"]', ["url_name"]), c.set("interest_url_name", W, !0), c.parent || (b.setVariable("interest_url_name", W), b.addExport("interest_url_name")), h += "\n                    ";
                                    var X;
                                    f = 215, g = 100, X = d.callWrap(d.memberLookup((f = 215, g = 83, d.callWrap(d.memberLookup((f = 215, g = 65, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "source_interest"), "get", a.autoesc), 'source_interest["get"]', ["images", {}
                                    ])), "get", a.autoesc), 'the return value of (source_interest["get"])["get"]', ["30x30", {}
                                    ])), "get", a.autoesc), 'the return value of (the return value of (source_interest["get"])["get"])["get"]', ["url"]), c.set("interest_image_url", X, !0), c.parent || (b.setVariable("interest_image_url", X), b.addExport("interest_image_url")), h += "\n                    ";
                                    var Y;
                                    Y = d.contextOrFrameLookup(b, c, "interest_name") && d.contextOrFrameLookup(b, c, "interest_url_name"), c.set("show_interest", Y, !0), c.parent || (b.setVariable("show_interest", Y), b.addExport("show_interest")), h += "\n                "
                                }
                                h += "\n            "
                            }
                            h += "\n            ";
                            var Z;
                            f = 219, g = 36, Z = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["title"]), c.set("pin_title", Z, !0), c.parent || (b.setVariable("pin_title", Z), b.addExport("pin_title")), h += "\n            ";
                            var $;
                            $ = d.contextOrFrameLookup(b, c, "pin_title")&&!d.contextOrFrameLookup(b, c, "user"), c.set("show_pin_title", $, !0), c.parent || (b.setVariable("show_pin_title", $), b.addExport("show_pin_title")), h += "\n            ";
                            var _;
                            if (_=!1, c.set("pin_title_view", _, !0), c.parent || (b.setVariable("pin_title_view", _), b.addExport("pin_title_view")), h += "\n\n            ", d.contextOrFrameLookup(b, c, "show_interest")) {
                                h += "\n                ";
                                var ab;
                                if (ab = "/explore/" + d.contextOrFrameLookup(b, c, "interest_url_name") + "/", c.set("credit_link", ab, !0), c.parent || (b.setVariable("credit_link", ab), b.addExport("credit_link")), h += "\n                ", d.contextOrFrameLookup(b, c, "interest_image_url")) {
                                    h += "\n                    ";
                                    var bb;
                                    bb = d.contextOrFrameLookup(b, c, "interest_image_url"), c.set("thumbnail_src", bb, !0), c.parent || (b.setVariable("thumbnail_src", bb), b.addExport("thumbnail_src")), h += "\n                "
                                }
                                h += "\n                ";
                                var cb;
                                cb = d.contextOrFrameLookup(b, c, "interest_name"), c.set("credit_title", cb, !0), c.parent || (b.setVariable("credit_title", cb), b.addExport("credit_title")), h += "\n                ";
                                var db;
                                f = 229, g = 36, db = d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Found in"]), c.set("credit_name", db, !0), c.parent || (b.setVariable("credit_name", db), b.addExport("credit_name")), h += "\n                ";
                                var eb;
                                eb = "interest", c.set("credit_image_type", eb, !0), c.parent || (b.setVariable("credit_image_type", eb), b.addExport("credit_image_type")), h += "\n            "
                            } else if (d.contextOrFrameLookup(b, c, "pinner") && d.contextOrFrameLookup(b, c, "show_pinner") && d.contextOrFrameLookup(b, c, "board") && d.contextOrFrameLookup(b, c, "show_board")) {
                                h += "\n                ";
                                var fb;
                                f = 232, g = 44, fb = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["url"]), c.set("credit_link", fb, !0), c.parent || (b.setVariable("credit_link", fb), b.addExport("credit_link")), h += "\n                ";
                                var gb;
                                if (f = 233, g = 47, gb = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pinner"), "get", a.autoesc), 'pinner["get"]', ["image_small_url"]), c.set("thumbnail_src", gb, !0), c.parent || (b.setVariable("thumbnail_src", gb), b.addExport("thumbnail_src")), h += "\n                ", d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "is_retina", a.autoesc)) {
                                    h += "\n                    ";
                                    var hb;
                                    f = 235, g = 51, hb = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pinner"), "get", a.autoesc), 'pinner["get"]', ["image_large_url"]), c.set("thumbnail_src", hb, !0), c.parent || (b.setVariable("thumbnail_src", hb), b.addExport("thumbnail_src")), h += "\n                "
                                }
                                h += "\n                ";
                                var ib;
                                f = 237, g = 45, ib = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["name"]), c.set("credit_title", ib, !0), c.parent || (b.setVariable("credit_title", ib), b.addExport("credit_title")), h += "\n                ";
                                var jb;
                                f = 238, g = 45, jb = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pinner"), "get", a.autoesc), 'pinner["get"]', ["full_name"]), c.set("credit_name", jb, !0), c.parent || (b.setVariable("credit_name", jb), b.addExport("credit_name")), h += "\n                ";
                                var kb;
                                kb = "pinner", c.set("credit_image_type", kb, !0), c.parent || (b.setVariable("credit_image_type", kb), b.addExport("credit_image_type")), h += "\n            "
                            } else if (d.contextOrFrameLookup(b, c, "pinner") && d.contextOrFrameLookup(b, c, "show_pinner")) {
                                h += "\n                ";
                                var lb;
                                lb = "/" + (f = 241, g = 51, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pinner"), "get", a.autoesc), 'pinner["get"]', ["username"])) + "/", c.set("credit_link", lb, !0), c.parent || (b.setVariable("credit_link", lb), b.addExport("credit_link")), h += "\n                ";
                                var mb;
                                if (f = 242, g = 47, mb = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pinner"), "get", a.autoesc), 'pinner["get"]', ["image_small_url"]), c.set("thumbnail_src", mb, !0), c.parent || (b.setVariable("thumbnail_src", mb), b.addExport("thumbnail_src")), h += "\n                ", d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "is_retina", a.autoesc)) {
                                    h += "\n                    ";
                                    var nb;
                                    f = 244, g = 51, nb = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pinner"), "get", a.autoesc), 'pinner["get"]', ["image_large_url"]), c.set("thumbnail_src", nb, !0), c.parent || (b.setVariable("thumbnail_src", nb), b.addExport("thumbnail_src")), h += "\n                "
                                }
                                h += "\n                ";
                                var ob;
                                f = 246, g = 46, ob = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pinner"), "get", a.autoesc), 'pinner["get"]', ["full_name"]), c.set("credit_title", ob, !0), c.parent || (b.setVariable("credit_title", ob), b.addExport("credit_title")), h += "\n                ";
                                var pb;
                                f = 247, g = 36, pb = d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Pinned by"]), c.set("credit_name", pb, !0), c.parent || (b.setVariable("credit_name", pb), b.addExport("credit_name")), h += "\n                ";
                                var qb;
                                qb = "pinner", c.set("credit_image_type", qb, !0), c.parent || (b.setVariable("credit_image_type", qb), b.addExport("credit_image_type")), h += "\n            "
                            } else if (d.contextOrFrameLookup(b, c, "board") && d.contextOrFrameLookup(b, c, "show_board")) {
                                h += "\n                ";
                                var rb;
                                f = 250, g = 44, rb = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["url"]), c.set("credit_link", rb, !0), c.parent || (b.setVariable("credit_link", rb), b.addExport("credit_link")), h += "\n                ";
                                var sb;
                                f = 251, g = 46, sb = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["image_thumbnail_url"]), c.set("thumbnail_src", sb, !0), c.parent || (b.setVariable("thumbnail_src", sb), b.addExport("thumbnail_src")), h += "\n                ";
                                var tb;
                                f = 252, g = 45, tb = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["name"]), c.set("credit_title", tb, !0), c.parent || (b.setVariable("credit_title", tb), b.addExport("credit_title")), h += "\n                ";
                                var ub;
                                f = 253, g = 36, ub = d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Pinned onto"]), c.set("credit_name", ub, !0), c.parent || (b.setVariable("credit_name", ub), b.addExport("credit_name")), h += "\n                ";
                                var vb;
                                vb = "board", c.set("credit_image_type", vb, !0), c.parent || (b.setVariable("credit_image_type", vb), b.addExport("credit_image_type")), h += "\n            "
                            } else if (d.contextOrFrameLookup(b, c, "domain") && d.contextOrFrameLookup(b, c, "show_pinned_from")) {
                                h += "\n                ";
                                var wb;
                                wb = "/source/" + d.contextOrFrameLookup(b, c, "domain") + "/", c.set("credit_link", wb, !0), c.parent || (b.setVariable("credit_link", wb), b.addExport("credit_link")), h += "\n                ";
                                var xb;
                                xb = d.contextOrFrameLookup(b, c, "none"), c.set("thumbnail_src", xb, !0), c.parent || (b.setVariable("thumbnail_src", xb), b.addExport("thumbnail_src")), h += "\n                ";
                                var yb;
                                if (f = 258, g = 43, yb = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["domain"]), c.set("credit_title", yb, !0), c.parent || (b.setVariable("credit_title", yb), b.addExport("credit_title")), h += "\n                ", d.contextOrFrameLookup(b, c, "show_pin_title")) {
                                    h += "\n                    ";
                                    var zb;
                                    zb = d.contextOrFrameLookup(b, c, "pin_title"), c.set("credit_name", zb, !0), c.parent || (b.setVariable("credit_name", zb), b.addExport("credit_name")), h += "\n                    ";
                                    var Ab;
                                    Ab=!0, c.set("pin_title_view", Ab, !0), c.parent || (b.setVariable("pin_title_view", Ab), b.addExport("pin_title_view")), h += "\n                "
                                } else {
                                    h += "\n                    ";
                                    var Bb;
                                    f = 263, g = 40, Bb = d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Pinned from"]), c.set("credit_name", Bb, !0), c.parent || (b.setVariable("credit_name", Bb), b.addExport("credit_name")), h += "\n                "
                                }
                                h += "\n                ";
                                var Cb;
                                Cb = "domain", c.set("credit_image_type", Cb, !0), c.parent || (b.setVariable("credit_image_type", Cb), b.addExport("credit_image_type")), h += "\n            "
                            } else if (d.contextOrFrameLookup(b, c, "uploaded_by_pinner") && d.contextOrFrameLookup(b, c, "show_pinned_from")) {
                                h += "\n                ";
                                var Db;
                                Db = "/" + (f = 267, g = 51, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pinner"), "get", a.autoesc), 'pinner["get"]', ["username"])) + "/", c.set("credit_link", Db, !0), c.parent || (b.setVariable("credit_link", Db), b.addExport("credit_link")), h += "\n                ";
                                var Eb;
                                if (f = 268, g = 47, Eb = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pinner"), "get", a.autoesc), 'pinner["get"]', ["image_small_url"]), c.set("thumbnail_src", Eb, !0), c.parent || (b.setVariable("thumbnail_src", Eb), b.addExport("thumbnail_src")), h += "\n                ", d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "is_retina", a.autoesc)) {
                                    h += "\n                    ";
                                    var Fb;
                                    f = 270, g = 51, Fb = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pinner"), "get", a.autoesc), 'pinner["get"]', ["image_large_url"]), c.set("thumbnail_src", Fb, !0), c.parent || (b.setVariable("thumbnail_src", Fb), b.addExport("thumbnail_src")), h += "\n                "
                                }
                                h += "\n                ";
                                var Gb;
                                f = 272, g = 46, Gb = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pinner"), "get", a.autoesc), 'pinner["get"]', ["full_name"]), c.set("credit_title", Gb, !0), c.parent || (b.setVariable("credit_title", Gb), b.addExport("credit_title")), h += "\n                ";
                                var Hb;
                                f = 273, g = 36, Hb = d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Uploaded by"]), c.set("credit_name", Hb, !0), c.parent || (b.setVariable("credit_name", Hb), b.addExport("credit_name")), h += "\n                ";
                                var Ib;
                                Ib = "pinner", c.set("credit_image_type", Ib, !0), c.parent || (b.setVariable("credit_image_type", Ib), b.addExport("credit_image_type")), h += "\n            "
                            } else if (f = 275, g = 28, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pinner"), "get", a.autoesc), 'pinner["get"]', ["username"])) {
                                h += "\n                ";
                                var Jb;
                                Jb = "/" + (f = 276, g = 51, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pinner"), "get", a.autoesc), 'pinner["get"]', ["username"])) + "/", c.set("credit_link", Jb, !0), c.parent || (b.setVariable("credit_link", Jb), b.addExport("credit_link")), h += "\n                ";
                                var Kb;
                                f = 277, g = 36, Kb = d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Pinned by pinner"]), c.set("credit_name", Kb, !0), c.parent || (b.setVariable("credit_name", Kb), b.addExport("credit_name")), h += "\n            "
                            }
                            h += "\n\n            ", b.getBlock("summary_view")(a, b, c, d, function(a, b) {
                                return a ? void e(a) : (h += b, void(h += "\n\n        "))
                            })
                        } else 
                            "detailed" == d.contextOrFrameLookup(b, c, "view_type") && (h += "\n            ", b.getBlock("detailed_view")(a, b, c, d, function(a, b) {
                                return a ? void e(a) : (h += b, void(h += "\n        "))
                            }));
                        h += "\n    </div>\n"
                    }
                    h += "\n", e(null, h)
                })
            } catch (o) {
                e(d.handleError(o, f, g))
            }
        }
        function b(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function c(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function d(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function e(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n                ", h += "\n\n                ";
                var i;
                f = 284, g = 46, i = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["show_reason", !0])&&!d.contextOrFrameLookup(b, c, "show_interest"), c.set("show_reason", i, !0), c.parent || (b.setVariable("show_reason", i), b.addExport("show_reason")), h += "\n                ";
                var j;
                f = 285, g = 47, j = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["show_generic", !1]), c.set("show_generic", j, !0), c.parent || (b.setVariable("show_generic", j), b.addExport("show_generic")), h += "\n                ";
                var k;
                f = 286, g = 39, k = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["promoter"]), c.set("promoter", k, !0), c.parent || (b.setVariable("promoter", k), b.addExport("promoter")), h += "\n                ";
                var l;
                if (l = d.contextOrFrameLookup(b, c, "promoter") != d.contextOrFrameLookup(b, c, "none") || d.contextOrFrameLookup(b, c, "recommendation_reason") && d.contextOrFrameLookup(b, c, "show_reason"), c.set("has_more_info_popup", l, !0), c.parent || (b.setVariable("has_more_info_popup", l), b.addExport("has_more_info_popup")), h += "\n                ", d.contextOrFrameLookup(b, c, "has_more_info_popup")) {
                    h += "\n                    ";
                    var m;
                    f = 289, g = 89, m = d.callWrap(d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "experiments", a.autoesc), "in_experiment_groups", a.autoesc), 'context["experiment"]["in_experim"]', ["pin_feedback_tool", ["enabled", "employees"]]), c.set("new_pin_feedback_tool", m, !0), c.parent || (b.setVariable("new_pin_feedback_tool", m), b.addExport("new_pin_feedback_tool")), h += " \n                "
                }
                h += '\n                <div class="pinCredits">\n                    ';
                var n;
                if (n = d.contextOrFrameLookup(b, c, "show_board") && d.contextOrFrameLookup(b, c, "board") && "places" == (f = 292, g = 84, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["layout"])), c.set("show_place_board_glyph", n, !0), c.parent || (b.setVariable("show_place_board_glyph", n), b.addExport("show_place_board_glyph")), h += "\n                    ", d.contextOrFrameLookup(b, c, "show_pinner") || d.contextOrFrameLookup(b, c, "show_board") || d.contextOrFrameLookup(b, c, "show_pinned_from")) {
                    if (h += "\n                        ", d.contextOrFrameLookup(b, c, "has_more_info_popup") && d.contextOrFrameLookup(b, c, "new_pin_feedback_tool")) {
                        if (h += "\n                            ", d.contextOrFrameLookup(b, c, "promoter")) {
                            h += "\n                                ";
                            var o;
                            f = 296, g = 52, o = d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Promoted by"]), c.set("credit_name", o, !0), c.parent || (b.setVariable("credit_name", o), b.addExport("credit_name")), h += "\n                                ";
                            var p;
                            p = d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "PIN_CELL_BUTTON_PROMOTED_PIN_SOURCE", a.autoesc), c.set("source_element_type", p, !0), c.parent || (b.setVariable("source_element_type", p), b.addExport("source_element_type")), h += "\n                                ";
                            var q;
                            q = "/" + (f = 298, g = 69, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "promoter"), "get", a.autoesc), 'promoter["get"]', ["username"])) + "/", c.set("credit_link", q, !0), c.parent || (b.setVariable("credit_link", q), b.addExport("credit_link")), h += "\n                                ";
                            var r;
                            f = 299, g = 64, r = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "promoter"), "get", a.autoesc), 'promoter["get"]', ["full_name"]), c.set("credit_title", r, !0), c.parent || (b.setVariable("credit_title", r), b.addExport("credit_title")), h += "\n                            "
                        } else {
                            h += "\n                                ";
                            var s;
                            f = 301, g = 52, s = d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Picked for you"]), c.set("credit_name", s, !0), c.parent || (b.setVariable("credit_name", s), b.addExport("credit_name")), h += "\n                                ";
                            var t;
                            t = d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "PIN_CELL_BUTTON_PFY_PIN_SOURCE", a.autoesc), c.set("source_element_type", t, !0), c.parent || (b.setVariable("source_element_type", t), b.addExport("source_element_type")), h += "\n                                \n                                ";
                            var u;
                            if (f = 304, g = 68, u = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["image_thumbnail_url"]), c.set("board_thumbnail_src", u, !0), c.parent || (b.setVariable("board_thumbnail_src", u), b.addExport("board_thumbnail_src")), h += "\n                                ", d.contextOrFrameLookup(b, c, "board_thumbnail_src")) {
                                h += "\n                                    ";
                                var v;
                                v = "board", c.set("credit_image_type", v, !0), c.parent || (b.setVariable("credit_image_type", v), b.addExport("credit_image_type")), h += "\n                                    ";
                                var w;
                                w = d.contextOrFrameLookup(b, c, "board_thumbnail_src"), c.set("thumbnail_src", w, !0), c.parent || (b.setVariable("thumbnail_src", w), b.addExport("thumbnail_src")), h += "\n                                "
                            }
                            h += "\n                            "
                        }
                        h += '\n                            <div class="pinCreditWrapper" data-element-type="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "source_element_type"), a.autoesc), h += '">\n                        '
                    }
                    if (h += "\n                        ", h += d.suppressValue((f = 312, g = 41, d.callWrap(d.contextOrFrameLookup(b, c, "block_pin_credit"), "block_pin_credit", [d.contextOrFrameLookup(b, c, "credit_link"), d.contextOrFrameLookup(b, c, "thumbnail_src"), d.contextOrFrameLookup(b, c, "credit_title"), d.contextOrFrameLookup(b, c, "credit_name"), d.contextOrFrameLookup(b, c, "credit_image_type"), d.contextOrFrameLookup(b, c, "show_place_board_glyph"), d.makeKeywordArgs({
                        pin_title_view: d.contextOrFrameLookup(b, c, "pin_title_view")
                    })])), a.autoesc), h += "\n                        ", d.contextOrFrameLookup(b, c, "has_more_info_popup")) {
                        if (h += "\n                            ", d.contextOrFrameLookup(b, c, "new_pin_feedback_tool")) {
                            h += "\n                                ";
                            var x;
                            if (x = "summary", c.set("view_type", x, !0), c.parent || (b.setVariable("view_type", x), b.addExport("view_type")), h += "\n                                ", d.contextOrFrameLookup(b, c, "promoter")) {
                                h += "\n                                    ";
                                var y;
                                y = d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "PIN_FEEDBACK_BUTTON_PROMOTED", a.autoesc), c.set("log_element_type", y, !0), c.parent || (b.setVariable("log_element_type", y), b.addExport("log_element_type")), h += "\n                                    ";
                                var z;
                                z = {
                                    name: "PromotedPinInfo2",
                                    options: {
                                        pin_id: d.contextOrFrameLookup(b, c, "pin_id"),
                                        promoter: d.contextOrFrameLookup(b, c, "promoter")
                                    }
                                }, c.set("dropdown_module", z, !0), c.parent || (b.setVariable("dropdown_module", z), b.addExport("dropdown_module")), h += "\n                                "
                            } else {
                                h += "\n                                    ";
                                var A;
                                A = d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "PIN_FEEDBACK_BUTTON_PFY", a.autoesc), c.set("log_element_type", A, !0), c.parent || (b.setVariable("log_element_type", A), b.addExport("log_element_type")), h += "\n                                    ";
                                var B;
                                B = {
                                    name: "RelatedPinInfo2",
                                    options: {
                                        recommendation_reason: d.contextOrFrameLookup(b, c, "recommendation_reason"),
                                        pin_id: d.contextOrFrameLookup(b, c, "pin_id"),
                                        show_generic: d.contextOrFrameLookup(b, c, "show_generic")
                                    },
                                    error_strategy: d.memberLookup(d.contextOrFrameLookup(b, c, "ErrorStrategy"), "REMOVE", a.autoesc)
                                }, c.set("dropdown_module", B, !0), c.parent || (b.setVariable("dropdown_module", B), b.addExport("dropdown_module")), h += "\n                                "
                            }
                            h += "\n                                ", h += d.suppressValue((f = 344, g = 39, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["PresenterButton", d.makeKeywordArgs({
                                options: {
                                    class_name: "hidePinInfo",
                                    has_icon: !0,
                                    text: (f = 348, g = 49, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["More information"])),
                                    show_text: !1,
                                    borderless: !0,
                                    log_element_type: d.contextOrFrameLookup(b, c, "log_element_type"),
                                    dropdown_options: {
                                        hide_caret: !0,
                                        view_type: d.contextOrFrameLookup(b, c, "view_type"),
                                        position_point: "TOP_RIGHT",
                                        display_while_loading: !0,
                                        force_in_viewport: !0,
                                        class_name: "underneathHeader"
                                    },
                                    module: d.contextOrFrameLookup(b,
                                    c,
                                    "dropdown_module")
                                }
                            })])), a.autoesc), h += "\n                                </div>\n                            "
                        } else {
                            h += "\n                                </div>\n                                ", h += '\n                                <div class="recommendationReasonWrapper">\n                                    ';
                            var C;
                            if (C = "recommendationReason", c.set("recommendation_reason_class", C, !0), c.parent || (b.setVariable("recommendation_reason_class", C), b.addExport("recommendation_reason_class")), h += "\n                                    ", d.contextOrFrameLookup(b, c, "promoter")) {
                                h += "\n                                        ";
                                var D;
                                D = d.contextOrFrameLookup(b, c, "recommendation_reason_class") + " promoted", c.set("recommendation_reason_class", D, !0), c.parent || (b.setVariable("recommendation_reason_class", D), b.addExport("recommendation_reason_class")), h += "\n                                    "
                            }
                            if (h += '\n\n                                    <p class="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "recommendation_reason_class"), a.autoesc), h += '">\n                                        ', d.contextOrFrameLookup(b, c, "promoter")) {
                                h += "\n                                            ", h += d.suppressValue((f = 381, g = 46, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Promoted Pin"])), a.autoesc), h += "\n\n                                            ";
                                var E;
                                E = d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "PIN_PROMOTED_INFO", a.autoesc), c.set("log_element_type", E, !0), c.parent || (b.setVariable("log_element_type", E), b.addExport("log_element_type")), h += "\n                                            ";
                                var F;
                                F = {
                                    name: "PromotedPinInfo",
                                    options: {
                                        pin_id: d.contextOrFrameLookup(b, c, "pin_id"),
                                        promoter: d.contextOrFrameLookup(b, c, "promoter")
                                    }
                                }, c.set("dropdown_module", F, !0), c.parent || (b.setVariable("dropdown_module", F), b.addExport("dropdown_module")), h += "\n\n                                        "
                            } else if (d.contextOrFrameLookup(b, c, "recommendation_reason")) {
                                h += "\n                                            ", h += d.suppressValue((f = 393, g = 46, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Related Pin"])), a.autoesc), h += "\n\n                                            ";
                                var G;
                                G = d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "PFY_REASON_BUTTON", a.autoesc), c.set("log_element_type", G, !0), c.parent || (b.setVariable("log_element_type", G), b.addExport("log_element_type")), h += "\n                                            ";
                                var H;
                                H = {
                                    name: "RelatedPinInfo",
                                    options: {
                                        recommendation_reason: d.contextOrFrameLookup(b, c, "recommendation_reason"),
                                        pin_id: d.contextOrFrameLookup(b, c, "pin_id"),
                                        show_generic: d.contextOrFrameLookup(b, c, "show_generic")
                                    },
                                    error_strategy: d.memberLookup(d.contextOrFrameLookup(b, c, "ErrorStrategy"), "REMOVE", a.autoesc)
                                }, c.set("dropdown_module", H, !0), c.parent || (b.setVariable("dropdown_module", H), b.addExport("dropdown_module")), h += "\n                                        "
                            }
                            h += "\n                                    </p>\n\n                                    ", h += d.suppressValue((f = 408, g = 43, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["PresenterButton", d.makeKeywordArgs({
                                options: {
                                    class_name: "moreInfo",
                                    has_icon: !0,
                                    text: (f = 412, g = 53, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["More information"])),
                                    show_text: !1,
                                    borderless: !0,
                                    log_element_type: d.contextOrFrameLookup(b, c, "log_element_type"),
                                    dropdown_options: {
                                        largeCaret: !1,
                                        view_type: d.contextOrFrameLookup(b, c, "recommendation_reason") ? "pickedForYou": "",
                                        position_point: "TOP_LEFT",
                                        display_while_loading: !0,
                                        force_in_viewport: !0,
                                        class_name: "underneathHeader"
                                    },
                                    module: d.contextOrFrameLookup(b,
                                    c,
                                    "dropdown_module")
                                }
                            })])), a.autoesc), h += "\n                                "
                        }
                        h += "\n                            "
                    }
                    h += "\n                        "
                }
                h += "\n                    </div>\n                ", e(null, h)
            } catch (I) {
                e(d.handleError(I, f, g))
            }
        }
        function f(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            b_additional_data: b,
            b_board_pins_grid_view: c,
            b_visual_object_grid_view: d,
            b_summary_view: e,
            b_detailed_view: f,
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/PinCount/PinCount.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                a.getTemplate("templates/macros/format.nunjucks", function(i, j) {
                    return i ? void e(i) : void j.getExported(function(i, j) {
                        if (i)
                            return void e(i);
                        if (!j.hasOwnProperty("count_text"))
                            return void e(new Error("cannot import 'count_text'"));
                        var k = j.count_text;
                        b.setVariable("count_text", k), h += "\n\n", h += "\n\n", h += d.suppressValue((f = 11, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "include_data"), "include_data", ["id"])), a.autoesc), h += "\n\n";
                        var l;
                        f = 13, g = 25, l = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "data"), "get", a.autoesc), 'data["get"]', ["pin_count"]) || 0, c.set("pin_count", l, !0), c.parent || (b.setVariable("pin_count", l), b.addExport("pin_count")), h += "\n\n", h += d.suppressValue((f = 15, g = 11, d.callWrap(k, "count_text", [d.contextOrFrameLookup(b, c, "pin_count"), "pin", d.makeKeywordArgs({
                            capitalize: !0
                        })])), a.autoesc), h += "\n", e(null, h)
                    })
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/PinDescriptionComment/PinDescriptionComment.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n", a.getTemplate("templates/macros/pin_attribution.nunjucks", function(i, j) {
                    return i ? void e(i) : void j.getExported(function(i, j) {
                        if (i)
                            return void e(i);
                        if (!j.hasOwnProperty("pin_attribution"))
                            return void e(new Error("cannot import 'pin_attribution'"));
                        var k = j.pin_attribution;
                        b.setVariable("pin_attribution", k), h += "\n\n";
                        var l;
                        l = "detailed" == d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "view_type", a.autoesc), c.set("is_closeup", l, !0), c.parent || (b.setVariable("is_closeup", l), b.addExport("is_closeup")), h += '\n<div class="pinDescriptionComment ', d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "view_type", a.autoesc) && (h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "view_type", a.autoesc), a.autoesc)), h += '">\n    <a class="userThumbContainer" href="/', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "username", a.autoesc), a.autoesc), h += '/">\n        <img class="userThumb" src="', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "image_src", a.autoesc), a.autoesc), h += '"\n             alt="', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "full_name", a.autoesc), a.autoesc), h += '">\n    </a>\n    <div class="commenterNameCommentText">\n        <div class="commenterWrapper">\n            ', (!d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "show_comment_form", a.autoesc) || d.contextOrFrameLookup(b, c, "is_closeup")) && (h += '\n                <a class="commentDescriptionCreator"\n                    href="/', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "username", a.autoesc), a.autoesc), h += '/">\n                    ', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "full_name", a.autoesc), a.autoesc), h += "\n                </a>\n\n                ", d.contextOrFrameLookup(b, c, "is_closeup") && (h += "\n                    <span class='commentDescriptionTimeAgo'>&bull; ", h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "subtitle", a.autoesc), a.autoesc), h += " </span>\n                "), h += "\n            "), h += "\n        </div>\n        ", d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "content", a.autoesc) && (h += "\n            ", d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "is_description", a.autoesc) ? (h += '\n                <h1 class="commentDescriptionContent">\n                    <div class="pinDesc nonCanonicalDesc">\n                        ', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "content", a.autoesc), a.autoesc), h += "\n                    </div>\n                </h1>\n                ", d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "can_translate", a.autoesc) && (h += '\n                    <button class="rounded Button translateButton Module hasText btn hidden" id="translateButton">\n                        ', h += d.suppressValue((f = 47, g = 26, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["See translation"])), a.autoesc), h += "\n                    </button>\n                "), h += "\n            ") : (h += '\n                <p class="commentDescriptionContent">', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "content", a.autoesc), a.autoesc), h += "</p>\n            "), h += "\n        "), h += "\n        ", d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "attribution", a.autoesc) && (h += "\n            ", h += d.suppressValue((f = 55, g = 28, d.callWrap(k, "pin_attribution", [d.makeKeywordArgs({
                            attribution: d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "attribution", a.autoesc),
                            view_type: d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "view_type", a.autoesc)
                        })])), a.autoesc), h += "\n        "), h += "\n        ", d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "show_comment_form", a.autoesc) && (h += '\n            <form class="addCommentForm" method="post">\n                ', h += d.suppressValue((f = 59, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["ui.TextField", d.makeKeywordArgs({
                            id: "pinCommentField",
                            options: {
                                placeholder: (f = 62, g = 40, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Add a comment..."])),
                                rows: d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "comment_form_rows", a.autoesc),
                                max: 1e3,
                                mentions: !0,
                                pin_id: d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "pin_id", a.autoesc)
                            }
                        })])), a.autoesc), h += "\n                ", h += d.suppressValue((f = 68, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                            options: {
                                class_name: "addComment",
                                text: (f = 71, g = 33, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Comment"])),
                                color: "primary",
                                log_element_type: d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "PIN_COMMENT_BUTTON", a.autoesc)
                            },
                            id: "addCommentButton"
                        })])), a.autoesc), h += "\n            </form>\n        "), h += "\n    </div>\n</div>\n", e(null, h)
                    })
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/PinFeedbackDialog/PinFeedbackDialog.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n";
                var i;
                f = 14, g = 32, i = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["rec_reason_id"]), c.set("rec_reason_id", i, !0), c.parent || (b.setVariable("rec_reason_id", i), b.addExport("rec_reason_id")), h += "\n";
                var j;
                if (f = 15, g = 29, j = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["through_id"]), c.set("through_id", j, !0), c.parent || (b.setVariable("through_id", j), b.addExport("through_id")), h += "\n", d.contextOrFrameLookup(b, c, "through_id") && d.contextOrFrameLookup(b, c, "rec_reason_id")) {
                    h += "\n    ";
                    var k;
                    k = d.memberLookup(d.contextOrFrameLookup(b, c, "ComponentType"), "PIN_FEEDBACK_DIALOG_PFY_REASON", a.autoesc), c.set("component_element_type", k, !0), c.parent || (b.setVariable("component_element_type", k), b.addExport("component_element_type")), h += "\n"
                } else {
                    h += "\n    ";
                    var l;
                    l = d.memberLookup(d.contextOrFrameLookup(b, c, "ComponentType"), "PIN_FEEDBACK_DIALOG_PROMOTED_REASON", a.autoesc), c.set("component_element_type", l, !0), c.parent || (b.setVariable("component_element_type", l), b.addExport("component_element_type")), h += "\n"
                }
                h += '\n\n<form class="standardForm" method="post" data-component-type="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "component_element_type"), a.autoesc), h += '">\n    <h1 class="formHeader">', h += d.suppressValue((f = 23, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Why don't you want to see this?"])), a.autoesc), h += '</h1>\n    <div class="radioOption" data-element-type="', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "PIN_FEEDBACK_REASON_BUTTON_NOT_INTERESTED", a.autoesc), a.autoesc), h += '">\n        <input type="radio" name="reason" value="NOT_INTERESTED" id="interest"/> \n        <label for="interest">', h += d.suppressValue((f = 26, g = 32, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["I wasn't interested in it"])), a.autoesc), h += '</label>\n    </div>\n    <div class="radioOption" data-element-type="', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "PIN_FEEDBACK_REASON_BUTTON_OFFENSIVE", a.autoesc), a.autoesc), h += '">\n        <input type="radio" name="reason" value="OFFENSIVE" id="offensive"/> \n\n        <label for="offensive">', h += d.suppressValue((f = 31, g = 33, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["I thought it was offensive"])), a.autoesc), h += '</label>\n    </div>\n    <div class="radioOption" data-element-type="', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "PIN_FEEDBACK_REASON_BUTTON_SEEN_BEFORE", a.autoesc), a.autoesc), h += '">\n        <input type="radio" name="reason" value="SEEN_IT_BEFORE" id="seen"/> \n        <label for="seen">', h += d.suppressValue((f = 35, g = 28, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["I'd seen it before"])), a.autoesc), h += '</label>\n    </div>\n\n    <div class="formFooter">\n        <div class="learnPolicies">\n            ';
                var m = d.makeMacro([], [], function(e) {
                    c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                    var h, i = "";
                    return h = {
                        policy_url: d.memberLookup(d.contextOrFrameLookup(b, c, "settings"), "ABOUT_PRIVACY_PLAIN_URL", a.autoesc)
                    }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 40, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 40, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ['Learn about <a href="{{ policy_url }}">our policies</a>'])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                });
                b.setVariable("_doTranslation", m), h += d.suppressValue((f = 40, g = 13, d.callWrap(m, "_doTranslation", [])), a.autoesc), h += '\n        </div>\n        <div class="formFooterButtons">\n            ', h += d.suppressValue((f = 45, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    id: "cancelButton",
                    options: {
                        cancelButton: !0,
                        text: (f = 49, g = 33, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Cancel"]))
                    }
                })])), a.autoesc), h += "\n\n            ", h += d.suppressValue((f = 54, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    id: "submitButton",
                    options: {
                        class_name: "submitButton",
                        text: (f = 58, g = 33, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Submit"])),
                        color: "primary",
                        type: "submit"
                    }
                })])), a.autoesc), h += "\n        </div>\n    </div>\n</form>", e(null, h)
            } catch (n) {
                e(d.handleError(n, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/PinLikeButton/PinLikeButton.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n", h += d.suppressValue((f = 9, g = 5, d.callWrap(d.contextOrFrameLookup(b, c, "base"), "base", ["LikeButton"])), a.autoesc), h += "\n\n", h += d.suppressValue((f = 11, g = 5, d.callWrap(d.contextOrFrameLookup(b, c, "attr"), "attr", [{
                    "data-element-type": d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "PIN_LIKE_BUTTON", a.autoesc),
                    "data-source-interest-id": d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "source_interest_id", a.autoesc)
                }
                ])), a.autoesc), h += "\n\n", h += d.suppressValue((f = 16, g = 1, d.callWrap(d.contextOrFrameLookup(b, c, "base"), "base", ["LikeButton"])), a.autoesc), a.getTemplate("app/common/modules/LikeButton/LikeButton.nunjucks", !0, function(f, g) {
                    if (f)
                        return void e(f);
                    for (var i in g.blocks)
                        b.addBlock(i, g.blocks[i]);
                    h += "\n", g.rootRenderFunc(a, b, c, d, e)
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/PinfluencerOptOutConfirmationPage/PinfluencerOptOutConfirmationPage.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += '\n\n<div class="standardForm">\n    <ul>\n        <li>\n            <h2>\n                ';
                var i = d.makeMacro([], [], function(e) {
                    c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                    var h, i = "";
                    return h = {}, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 10, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 10, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Okay, you're off the list!"])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                });
                b.setVariable("_doTranslation", i), h += d.suppressValue((f = 10, g = 17, d.callWrap(i, "_doTranslation", [])), a.autoesc), h += "\n            </h2>\n            <p>\n                ";
                var j = d.makeMacro([], [], function(e) {
                    c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                    var h, i = "";
                    return h = {}, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 15, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 15, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["We'll stop recommending you to new Pinners."])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                });
                b.setVariable("_doTranslation", j), h += d.suppressValue((f = 15, g = 17, d.callWrap(j, "_doTranslation", [])), a.autoesc), h += "\n            </p>\n            <p>\n                ";
                var k;
                k = d.memberLookup(d.contextOrFrameLookup(b, c, "settings"), "CANONICAL_MAIN_URL", a.autoesc), c.set("home_feed_href", k, !0), c.parent || (b.setVariable("home_feed_href", k), b.addExport("home_feed_href")), h += "\n                ", h += d.suppressValue(a.getFilter("named_format").call(b, (f = 21, g = 18, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Go back to the <a href='{{ home_feed_href }}'>home feed</a>?"])), {
                    home_feed_href: d.contextOrFrameLookup(b, c, "home_feed_href")
                }), a.autoesc), h += "\n            </p>\n        </li>\n    </ul>\n</div>\n", e(null, h)
            } catch (l) {
                e(d.handleError(l, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/PromotedPinInfo2/PromotedPinInfo2.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n", a.getTemplate("templates/macros/link.nunjucks", function(i, j) {
                    return i ? void e(i) : void j.getExported(function(i, j) {
                        if (i)
                            return void e(i);
                        if (!j.hasOwnProperty("link_markup"))
                            return void e(new Error("cannot import 'link_markup'"));
                        var k = j.link_markup;
                        b.setVariable("link_markup", k);
                        var l;
                        f = 9, g = 27, l = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["promoter"]), c.set("promoter", l, !0), c.parent || (b.setVariable("promoter", l), b.addExport("promoter"));
                        var m;
                        f = 10, g = 33, m = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "promoter"), "get", a.autoesc), 'promoter["get"]', ["full_name"]), c.set("promoter_name", m, !0), c.parent || (b.setVariable("promoter_name", m), b.addExport("promoter_name"));
                        var n;
                        if (f = 11, g = 37, n = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "promoter"), "get", a.autoesc), 'promoter["get"]', ["username"]), c.set("promoter_username", n, !0), c.parent || (b.setVariable("promoter_username", n), b.addExport("promoter_username")), h += "\n", d.contextOrFrameLookup(b, c, "promoter_username")) {
                            h += "\n    ";
                            var o;
                            o = "/" + d.contextOrFrameLookup(b, c, "promoter_username") + "/", c.set("promoter_link", o, !0), c.parent || (b.setVariable("promoter_link", o), b.addExport("promoter_link")), h += "\n"
                        } else {
                            h += "\n    ";
                            var p;
                            p = "/", c.set("promoter_link", p, !0), c.parent || (b.setVariable("promoter_link", p), b.addExport("promoter_link")), h += "\n"
                        }
                        h += '\n                               \n<div class="preAction" data-component-type="', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "ComponentType"), "PIN_FEEDBACK_DIALOG_PROMOTED", a.autoesc), a.autoesc), h += '">\n    <h3 class="title">', h += d.suppressValue((f = 19, g = 24, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["About this Pin"])), a.autoesc), h += '</h3>\n    <div class="description">\n        ';
                        var q = d.makeMacro([], [], function(e) {
                            c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                            var h, i = "";
                            return h = {
                                link: d.contextOrFrameLookup(b, c, "promoter_link"),
                                promoter_name: d.contextOrFrameLookup(b, c, "promoter_name")
                            }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 21, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 21, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ['This Pin is from <a href="{{ link }}">{{ promoter_name }}</a>. It\'s showing up because <a href="{{ link }}">{{ promoter_name }}</a> paid to have it placed where you\'d be more likely to notice it.'])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                        });
                        b.setVariable("_doTranslation", q), h += d.suppressValue((f = 21, g = 9, d.callWrap(q, "_doTranslation", [])), a.autoesc), h += '\n    </div>\n    <div class="divider"></div>\n    <div class="padded">\n        <a class="action hidePin" data-element-type="', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "PIN_FEEDBACK_DIALOG_BUTTON_HIDE_PIN_PROMOTED", a.autoesc), a.autoesc), h += '">\n            <div class="hidePinIcon"></div>';
                        var r = d.makeMacro([], [], function(e) {
                            c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                            var h, i = "";
                            return h = {}, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 29, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 29, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Hide this Promoted Pin"])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                        });
                        b.setVariable("_doTranslation", r), h += d.suppressValue((f = 29, g = 13, d.callWrap(r, "_doTranslation", [])), a.autoesc), h += '</a>\n    </div>\n    <div class="divider"></div>\n    <div class="padded">\n        <a href="', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "settings"), "HELP_PROMOTED_PINS_URL", a.autoesc), a.autoesc), h += '" class="action learnMore" data-element-type="', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "PIN_FEEDBACK_DIALOG_BUTTON_LEARN_MORE_PROMOTED", a.autoesc), a.autoesc), h += '">\n            <div class="learnMoreIcon"></div>\n            ', h += d.suppressValue((f = 38, g = 14, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Learn More"])), a.autoesc), h += "\n        </a>\n    </div>\n</div>", e(null, h)
                    })
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/QALikeButton/QALikeButton.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n", h += d.suppressValue((f = 7, g = 1, d.callWrap(d.contextOrFrameLookup(b, c, "describe"), "describe", [{
                    borderless: !0,
                    has_icon: !0,
                    show_text: !1
                }
                ])), a.autoesc), h += d.suppressValue((f = 7, g = 1, d.callWrap(d.contextOrFrameLookup(b, c, "base"), "base", ["LikeButton"])), a.autoesc), a.getTemplate("app/common/modules/LikeButton/LikeButton.nunjucks", !0, function(f, g) {
                    if (f)
                        return void e(f);
                    for (var i in g.blocks)
                        b.addBlock(i, g.blocks[i]);
                    h += "\n", g.rootRenderFunc(a, b, c, d, e)
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/QuestionLikeButton/QuestionLikeButton.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n", h += d.suppressValue((f = 7, g = 1, d.callWrap(d.contextOrFrameLookup(b, c, "base"), "base", ["QALikeButton"])), a.autoesc), a.getTemplate("app/common/modules/QALikeButton/QALikeButton.nunjucks", !0, function(f, g) {
                    if (f)
                        return void e(f);
                    for (var i in g.blocks)
                        b.addBlock(i, g.blocks[i]);
                    h += "\n", g.rootRenderFunc(a, b, c, d, e)
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/QuizSignupFlow/QuizSignupFlow.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n\n", h += d.suppressValue((f = 7, g = 7, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    id: "facebookSignup",
                    options: {
                        text: (f = 10, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Save board"])),
                        size: "large",
                        class_name: "unAuthFacebookConnect registerLoginButton"
                    }
                })])), a.autoesc), e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/RelatedPinInfo2/RelatedPinInfo2.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n", a.getTemplate("templates/macros/link.nunjucks", function(i, j) {
                    return i ? void e(i) : void j.getExported(function(i, j) {
                        if (i)
                            return void e(i);
                        if (!j.hasOwnProperty("link_markup"))
                            return void e(new Error("cannot import 'link_markup'"));
                        var k = j.link_markup;
                        b.setVariable("link_markup", k);
                        var l;
                        f = 11, g = 40, l = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["recommendation_reason"]), c.set("recommendation_reason", l, !0), c.parent || (b.setVariable("recommendation_reason", l), b.addExport("recommendation_reason"));
                        var m;
                        f = 12, g = 53, m = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "recommendation_reason"), "get", a.autoesc), 'recommendation_reason["get"]', ["board"]) || {}, c.set("recommendation_board", m, !0), c.parent || (b.setVariable("recommendation_board", m), b.addExport("recommendation_board"));
                        var n;
                        f = 13, g = 42, n = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "recommendation_board"), "get", a.autoesc), 'recommendation_board["get"]', ["name"]), c.set("board_name", n, !0), c.parent || (b.setVariable("board_name", n), b.addExport("board_name"));
                        var o;
                        f = 14, g = 41, o = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "recommendation_board"), "get", a.autoesc), 'recommendation_board["get"]', ["url"]), c.set("board_url", o, !0), c.parent || (b.setVariable("board_url", o), b.addExport("board_url"));
                        var p;
                        f = 15, g = 34, p = d.callWrap(k, "link_markup", [d.contextOrFrameLookup(b, c, "board_url"), d.contextOrFrameLookup(b, c, "board_name")]), c.set("board_name_link", p, !0), c.parent || (b.setVariable("board_name_link", p), b.addExport("board_name_link")), h += '\n\n<div class="preAction" data-component-type="', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "ComponentType"), "PIN_FEEDBACK_DIALOG_PFY", a.autoesc), a.autoesc), h += '">\n    \n    <h3 class="title">', h += d.suppressValue((f = 19, g = 24, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["About this Pin"])), a.autoesc), h += '</h3>\n    <div class="description">\n        ';
                        var q = d.makeMacro([], [], function(e) {
                            c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                            var h, i = "";
                            return h = {
                                board_name_link: d.contextOrFrameLookup(b, c, "board_name_link")
                            }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 21, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 21, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["This Pin is from a board that has similar Pins as your {{ board_name_link }} board."])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                        });
                        b.setVariable("_doTranslation", q), h += d.suppressValue((f = 21, g = 9, d.callWrap(q, "_doTranslation", [])), a.autoesc), h += '\n    </div>\n   \n    <div class="divider"></div>\n    <div class="padded">\n        <a class="action hidePin" data-element-type="', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "PIN_FEEDBACK_DIALOG_BUTTON_HIDE_PIN_PFY", a.autoesc), a.autoesc), h += '">\n            <div class="hidePinIcon"></div>';
                        var r = d.makeMacro([], [], function(e) {
                            c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                            var h, i = "";
                            return h = {}, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 31, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 31, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Hide this Pin"])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                        });
                        b.setVariable("_doTranslation", r), h += d.suppressValue((f = 31, g = 13, d.callWrap(r, "_doTranslation", [])), a.autoesc), h += '</a>\n    </div>    \n    <div class="divider"></div>\n    <div class="padded">\n        <a class="action stopShowing" data-element-type="', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "PIN_FEEDBACK_DIALOG_BUTTON_PFY_STOP_RECS_FROM_THROUGH_BOARD", a.autoesc), a.autoesc), h += '">\n            <div class="hideAllPinsIcon"></div>';
                        var s = d.makeMacro([], [], function(e) {
                            c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                            var h, i = "";
                            return h = {
                                board_name_link: d.contextOrFrameLookup(b, c, "board_name_link")
                            }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 40, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 40, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Stop showing Pins based on my board {{ board_name_link }}"])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                        });
                        b.setVariable("_doTranslation", s), h += d.suppressValue((f = 40, g = 13, d.callWrap(s, "_doTranslation", [])), a.autoesc), h += "</a>\n    </div>\n</div>", e(null, h)
                    })
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/RemovePinDialog/RemovePinDialog.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n";
                var i;
                f = 12, g = 40, i = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["recommendation_reason"]), c.set("recommendation_reason", i, !0), c.parent || (b.setVariable("recommendation_reason", i), b.addExport("recommendation_reason")), h += "\n";
                var j;
                if (f = 13, g = 29, j = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["through_id"]), c.set("through_id", j, !0), c.parent || (b.setVariable("through_id", j), b.addExport("through_id")), h += "\n", d.contextOrFrameLookup(b, c, "through_id") && d.contextOrFrameLookup(b, c, "recommendation_reason")) {
                    h += "\n    ";
                    var k;
                    k = d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "PIN_FEEDBACK_BUTTON_STATE_REASON_PFY", a.autoesc), c.set("log_element_type", k, !0), c.parent || (b.setVariable("log_element_type", k), b.addExport("log_element_type")), h += "\n"
                } else {
                    h += "\n    ";
                    var l;
                    l = d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "PIN_FEEDBACK_BUTTON_STATE_REASON_PROMOTED", a.autoesc), c.set("log_element_type", l, !0), c.parent || (b.setVariable("log_element_type", l), b.addExport("log_element_type")), h += "\n"
                }
                h += '\n<div class="removePinWrapper" data-component-type="', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "ComponentType"), "PIN_FEEDBACK_PIN_CELL_HIDDEN_NO_REASON", a.autoesc), a.autoesc), h += '">\n    <div class="askForFeedback">\n        <div class="pinRemoval">\n            ', h += d.suppressValue((f = 22, g = 14, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["You removed this Pin."])), a.autoesc), h += '\n        </div>\n\n        <a class="openPinFeedback" data-element-type="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "log_element_type"), a.autoesc), h += '">\n            ', h += d.suppressValue((f = 26, g = 14, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Why don't you want to see this?"])), a.autoesc), h += '\n        </a>\n    </div>\n\n    <div class="feedbackGiven">\n        ', h += d.suppressValue((f = 31, g = 10, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Thanks for your feedback!"])), a.autoesc), h += "\n    </div>\n</div>", e(null, h)
            } catch (m) {
                e(d.handleError(m, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/RepinSuccessToast/RepinSuccessToast.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n";
                var i;
                f = 3, g = 19, i = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "data"), "get", a.autoesc), 'data["get"]', ["pin"]), c.set("pin", i, !0), c.parent || (b.setVariable("pin", i), b.addExport("pin")), h += "\n";
                var j;
                f = 4, g = 31, j = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "data"), "get", a.autoesc), 'data["get"]', ["suggested_board"]), c.set("suggested_board", j, !0), c.parent || (b.setVariable("suggested_board", j), b.addExport("suggested_board")), h += "\n";
                var k;
                k = {}, c.set("local_options", k, !0), c.parent || (b.setVariable("local_options", k), b.addExport("local_options")), h += "\n";
                var l;
                if (f = 6, g = 24, l = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "local_options"), "update", a.autoesc), 'local_options["update"]', [{
                    title_button_url: a.getFilter("pin_url").call(b, (f = 6, g = 53, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["id"])))
                }
                ]), c.set("_temp_do", l, !0), c.parent || b.setVariable("_temp_do", l), h += "\n", d.contextOrFrameLookup(b, c, "suggested_board")) {
                    h += "\n    ";
                    var m;
                    f = 8, g = 28, m = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "local_options"), "update", a.autoesc), 'local_options["update"]', [{
                        image_url: (f = 9, g = 40, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "suggested_board"), "get", a.autoesc), 'suggested_board["get"]', ["image_thumbnail_url"])),
                        action_button_url: (f = 10, g = 48, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "suggested_board"), "get", a.autoesc), 'suggested_board["get"]', ["url"]))
                    }
                    ]), c.set("_temp_do", m, !0), c.parent || b.setVariable("_temp_do", m), h += "\n"
                } else {
                    h += "\n    ";
                    var n;
                    f = 13, g = 28, n = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "local_options"), "update", a.autoesc), 'local_options["update"]', [{
                        show_action: !1
                    }
                    ]), c.set("_temp_do", n, !0), c.parent || b.setVariable("_temp_do", n), h += "\n"
                }
                h += "\n\n", h += d.suppressValue((f = 16, g = 1, d.callWrap(d.contextOrFrameLookup(b, c, "describe"), "describe", [d.contextOrFrameLookup(b, c, "local_options")])), a.autoesc), h += d.suppressValue((f = 16, g = 1, d.callWrap(d.contextOrFrameLookup(b, c, "base"), "base", ["ToastBase"])), a.autoesc), a.getTemplate("app/common/modules/ToastBase/ToastBase.nunjucks", !0, function(f, g) {
                    if (f)
                        return void e(f);
                    for (var i in g.blocks)
                        b.addBlock(i, g.blocks[i]);
                    h += "\n\n", h += "\n\n", h += "\n\n\n", d.contextOrFrameLookup(b, c, "suggested_board") && (h += "\n    ", h += "\n"), h += "\n", g.rootRenderFunc(a, b, c, d, e)
                })
            } catch (o) {
                e(d.handleError(o, f, g))
            }
        }
        function b(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n    ";
                var i;
                f = 19, g = 34, i = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["board", {}
                ]) || {}, c.set("pinned_to_board", i, !0), c.parent || (b.setVariable("pinned_to_board", i), b.addExport("pinned_to_board")), h += "\n    ";
                var j;
                if (j = a.getFilter("escape").call(b, (f = 20, g = 51, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pinned_to_board"), "get", a.autoesc), 'pinned_to_board["get"]', ["name"]))), c.set("pinned_to_board_name", j, !0), c.parent || (b.setVariable("pinned_to_board_name", j), b.addExport("pinned_to_board_name")), h += "\n    ", d.contextOrFrameLookup(b, c, "pinned_to_board_name")) {
                    h += "\n        ";
                    var k;
                    f = 22, g = 54, k = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pinned_to_board"), "get", a.autoesc), 'pinned_to_board["get"]', ["url"]), c.set("pinned_to_board_url", k, !0), c.parent || (b.setVariable("pinned_to_board_url", k), b.addExport("pinned_to_board_url")), h += "\n        ";
                    var l = d.makeMacro([], [], function(e) {
                        c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                        var h, i = "";
                        return h = {
                            board_name: d.contextOrFrameLookup(b, c, "pinned_to_board_name"),
                            pinned_to_board_url: d.contextOrFrameLookup(b, c, "pinned_to_board_url")
                        }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 23, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 23, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ['Repinned onto <a href="{{ pinned_to_board_url }}">{{ board_name }}</a>'])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                    });
                    b.setVariable("_doTranslation", l), h += d.suppressValue((f = 23, g = 9, d.callWrap(l, "_doTranslation", [])), a.autoesc), h += "\n    "
                } else 
                    h += "  \n        ", h += d.suppressValue((f = 27, g = 10, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Repinned!"])), a.autoesc), h += "\n    ";
                h += "\n", e(null, h)
            } catch (m) {
                e(d.handleError(m, f, g))
            }
        }
        function c(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "You might also like", e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function d(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n        ";
                var i;
                f = 36, g = 56, i = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "suggested_board"), "get", a.autoesc), 'suggested_board["get"]', ["owner", {}
                ]), c.set("suggested_board_owner", i, !0), c.parent || (b.setVariable("suggested_board_owner", i), b.addExport("suggested_board_owner")), h += '\n        <a href="', h += d.suppressValue((f = 37, g = 37, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "suggested_board"), "get", a.autoesc), 'suggested_board["get"]', ["url"])), a.autoesc), h += '">', h += d.suppressValue((f = 37, g = 67, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "suggested_board"), "get", a.autoesc), 'suggested_board["get"]', ["name"])), a.autoesc), h += '</a> by <a href="/', h += d.suppressValue((f = 37, g = 120, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "suggested_board_owner"), "get", a.autoesc), 'suggested_board_owner["get"]', ["username"])), a.autoesc), h += '">', h += d.suppressValue((f = 37, g = 161, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "suggested_board_owner"), "get", a.autoesc), 'suggested_board_owner["get"]', ["full_name"])), a.autoesc), h += "</a>\n    ", e(null, h)
            } catch (j) {
                e(d.handleError(j, f, g))
            }
        }
        return {
            b_title_text: b,
            b_action_title_text: c,
            b_action_detail_text: d,
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/ShowModalButton/ShowModalButton.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += d.suppressValue((f = 0, g = 1, d.callWrap(d.contextOrFrameLookup(b, c, "base"), "base", ["Button"])), a.autoesc), a.getTemplate("app/common/modules/Button/Button.nunjucks", !0, function(f, g) {
                    if (f)
                        return void e(f);
                    for (var i in g.blocks)
                        b.addBlock(i, g.blocks[i]);
                    h += "\n", g.rootRenderFunc(a, b, c, d, e)
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/ToastBase/ToastBase.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n";
                var i;
                f = 22, g = 37, i = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["show_title_bar", !0]), c.set("show_title_bar", i, !0), c.parent || (b.setVariable("show_title_bar", i), b.addExport("show_title_bar")), h += "\n";
                var j;
                f = 23, g = 37, j = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["show_title_button", !0]), c.set("show_title_button", j, !0), c.parent || (b.setVariable("show_title_button", j), b.addExport("show_title_button")), h += "\n";
                var k;
                f = 24, g = 37, k = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["show_image", !0]), c.set("show_image", k, !0), c.parent || (b.setVariable("show_image", k), b.addExport("show_image")), h += "\n";
                var l;
                f = 25, g = 37, l = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["image_url"]), c.set("image_url", l, !0), c.parent || (b.setVariable("image_url", l), b.addExport("image_url")), h += "\n";
                var m;
                f = 26, g = 37, m = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["show_action", !0]), c.set("show_action", m, !0), c.parent || (b.setVariable("show_action", m), b.addExport("show_action")), h += "\n";
                var n;
                f = 27, g = 37, n = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["show_action_button", !0]), c.set("show_action_button", n, !0), c.parent || (b.setVariable("show_action_button", n), b.addExport("show_action_button")), h += "\n";
                var o;
                f = 28, g = 37, o = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["action_button_text", (f = 28, g = 61, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["View"]))]), c.set("action_button_text", o, !0), c.parent || (b.setVariable("action_button_text", o), b.addExport("action_button_text")), h += "\n";
                var p;
                f = 29, g = 37, p = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["action_button_url"]), c.set("action_button_url", p, !0), c.parent || (b.setVariable("action_button_url", p), b.addExport("action_button_url")), h += "\n";
                var q;
                f = 30, g = 37, q = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["title_button_text", (f = 30, g = 60, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["See Now"]))]), c.set("title_button_text", q, !0), c.parent || (b.setVariable("title_button_text", q), b.addExport("title_button_text")), h += "\n";
                var r;
                f = 31, g = 37, r = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["title_button_url"]), c.set("title_button_url", r, !0), c.parent || (b.setVariable("title_button_url", r), b.addExport("title_button_url")), h += "\n", h += d.suppressValue((f = 32, g = 5, d.callWrap(d.contextOrFrameLookup(b, c, "attr"), "attr", [{
                    "data-component-type": d.memberLookup(d.contextOrFrameLookup(b, c, "ComponentType"), "TOAST", a.autoesc)
                }
                ])), a.autoesc), h += '\n\n<div class="toastWrapper">\n    ', d.contextOrFrameLookup(b, c, "show_title_bar") && (h += '\n        <div class="titleWrapper">\n            <div class="titleTextWrapper">\n                <p class="titleText">\n                    ', b.getBlock("title_text")(a, b, c, d, function(i, j) {
                    return i ? void e(i) : (h += j, h += "\n                </p>\n            </div>\n            ", d.contextOrFrameLookup(b, c, "show_title_button") && (h += '\n                <div class="titleButtonWrapper">\n                    ', h += d.suppressValue((f = 44, g = 27, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["NavigateButton", d.makeKeywordArgs({
                        id: "toastTitleButton",
                        options: {
                            class_name: "toastButton toastTitleButton",
                            icon: !1,
                            text: d.contextOrFrameLookup(b, c, "title_button_text"),
                            url: d.contextOrFrameLookup(b, c, "title_button_url")
                        }
                    })])), a.autoesc), h += "\n                </div>\n            "), void(h += "\n        </div>\n    "))
                })), h += "\n\n    ", d.contextOrFrameLookup(b, c, "show_action") ? (h += '\n        <div class="separator"></div>\n        <div class="actionContentWrapper">\n            ', d.contextOrFrameLookup(b, c, "show_action_button") && (h += '\n                <div class="actionButtonWrapper">\n                    ', d.contextOrFrameLookup(b, c, "action_button_url") && (h += "\n                        ", h += d.suppressValue((f = 64, g = 31, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["NavigateButton", d.makeKeywordArgs({
                    id: "toastActionButton",
                    options: {
                        class_name: "toastButton toastActionButton",
                        icon: !1,
                        text: d.contextOrFrameLookup(b, c, "action_button_text"),
                        url: d.contextOrFrameLookup(b, c, "action_button_url")
                    }
                })])), a.autoesc), h += "\n                    "), h += "\n                </div>\n            "), h += "\n            ", d.contextOrFrameLookup(b, c, "show_image") && (h += '\n                <div class="actionImageWrapper">\n                    <img src="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "image_url"), a.autoesc), h += '" class="actionImage">\n                </div>\n            '), h += '\n            <div class="actionTitleDetailWrapper">\n                <p class="actionTitle">\n                    ', b.getBlock("action_title_text")(a, b, c, d, function(f, g) {
                    return f ? void e(f) : (h += g, h += '\n                </p>\n                <p class="actionDetail">\n                    ', void b.getBlock("action_detail_text")(a, b, c, d, function(a, b) {
                        return a ? void e(a) : (h += b, void(h += "\n                </p>\n            </div>\n        </div>\n    "))
                    }))
                })) : (h += "\n        ", h += d.suppressValue((f = 91, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["noAction"])), a.autoesc), h += "\n    "), h += "\n</div>\n", e(null, h)
            } catch (s) {
                e(d.handleError(s, f, g))
            }
        }
        function b(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function c(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function d(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            b_title_text: b,
            b_action_title_text: c,
            b_action_detail_text: d,
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/Toasts/Toasts.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n", e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/Token/Token.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n", e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/TokenizedInput/TokenizedInput.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n";
                var i;
                f = 14, g = 32, i = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["input_options", d.contextOrFrameLookup(b, c, "none")]), c.set("input_options", i, !0), c.parent || (b.setVariable("input_options", i), b.addExport("input_options")), h += "\n";
                var j;
                f = 15, g = 28, j = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["view_type"]), c.set("view_type", j, !0), c.parent || (b.setVariable("view_type", j), b.addExport("view_type")), h += "\n";
                var k;
                f = 16, g = 34, k = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["show_remove_all"]), c.set("show_remove_all", k, !0), c.parent || (b.setVariable("show_remove_all", k), b.addExport("show_remove_all")), h += "\n", d.contextOrFrameLookup(b, c, "view_type") && (h += "\n    ", h += d.suppressValue((f = 18, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", [d.contextOrFrameLookup(b, c, "view_type")])), a.autoesc), h += "\n"), h += '\n\n<ul class="tokensWrapper">\n    <li class="tokenizedItem inputToken">\n        ', h += d.suppressValue((f = 23, g = 15, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["ui.Input", d.makeKeywordArgs({
                    id: "input",
                    options: d.contextOrFrameLookup(b, c, "input_options")
                })])), a.autoesc), h += "\n    </li>\n</ul>\n\n", d.contextOrFrameLookup(b, c, "show_remove_all") && (h += '\n    <a class="removeAll"><em></em></a>\n'), h += "\n", e(null, h)
            } catch (l) {
                e(d.handleError(l, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/UserBase/UserBase.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n", a.getTemplate("templates/macros/format.nunjucks", function(i, j) {
                    return i ? void e(i) : void j.getExported(function(i, j) {
                        if (i)
                            return void e(i);
                        if (!j.hasOwnProperty("count_text"))
                            return void e(new Error("cannot import 'count_text'"));
                        var k = j.count_text;
                        b.setVariable("count_text", k), h += "\n\n";
                        var l;
                        f = 29, g = 32, l = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["allow_dismiss"]), c.set("allow_dismiss", l, !0), c.parent || (b.setVariable("allow_dismiss", l), b.addExport("allow_dismiss")), h += "\n";
                        var m;
                        m = d.contextOrFrameLookup(b, c, "data") ? d.contextOrFrameLookup(b, c, "data") : {}, c.set("user", m, !0), c.parent || (b.setVariable("user", m), b.addExport("user")), h += "\n";
                        var n;
                        f = 31, g = 24, n = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "get", a.autoesc), 'user["get"]', ["username", ""]), c.set("username", n, !0), c.parent || (b.setVariable("username", n), b.addExport("username")), h += "\n";
                        var o;
                        o = "/" + d.contextOrFrameLookup(b, c, "username") + "/", c.set("profile_url", o, !0), c.parent || (b.setVariable("profile_url", o), b.addExport("profile_url")), h += "\n";
                        var p;
                        f = 33, g = 24, p = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "get", a.autoesc), 'user["get"]', ["full_name", ""]), c.set("fullname", p, !0), c.parent || (b.setVariable("fullname", p), b.addExport("fullname")), h += "\n";
                        var q;
                        f = 34, g = 22, q = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["dim", !1]), c.set("dim", q, !0), c.parent || (b.setVariable("dim", q), b.addExport("dim")), h += "\n";
                        var r;
                        f = 35, g = 28, r = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["view_type", "gridItem"]), c.set("view_type", r, !0), c.parent || (b.setVariable("view_type", r), b.addExport("view_type")), h += "\n";
                        var s;
                        f = 36, g = 22, s = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["url", d.contextOrFrameLookup(b, c, "profile_url")]), c.set("url", s, !0), c.parent || (b.setVariable("url", s), b.addExport("url")), h += "\n";
                        var t;
                        f = 37, g = 35, t = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["url_element_type", d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "PROFILE_URL", a.autoesc)]), c.set("url_element_type", t, !0), c.parent || (b.setVariable("url_element_type", t), b.addExport("url_element_type")), h += "\n";
                        var u;
                        f = 38, g = 25, u = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["inline", !1]), c.set("inline", u, !0), c.parent || (b.setVariable("inline", u), b.addExport("inline")), h += "\n\n", h += d.suppressValue((f = 40, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "include_data"), "include_data", ["id"])), a.autoesc), h += "\n\n", f = 42, g = 15, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["class_name"]) && (h += "\n    ", h += d.suppressValue((f = 43, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", [(f = 43, g = 25, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["class_name"]))])), a.autoesc), h += "\n"), h += "\n\n", f = 46, g = 12, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "get", a.autoesc), 'user["get"]', ["debug"]) && (h += "\n    ", h += d.suppressValue((f = 47, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["debugWrapper"])), a.autoesc), h += "\n"), h += "\n", d.contextOrFrameLookup(b, c, "dim") && (h += "\n    ", h += d.suppressValue((f = 50, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["dim"])), a.autoesc), h += "\n"), h += "\n", d.contextOrFrameLookup(b, c, "inline") && (h += "\n    ", h += d.suppressValue((f = 53, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["inline"])), a.autoesc), h += "\n"), h += "\n\n", h += d.suppressValue((f = 56, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", [d.contextOrFrameLookup(b, c, "view_type")])), a.autoesc), h += "\n\n", "thumb" == d.contextOrFrameLookup(b, c, "view_type") ? (h += "\n    ", b.getBlock("thumb_view")(a, b, c, d, function(a, b) {
                            return a ? void e(a) : (h += b, void(h += "\n\n"))
                        })) : "followFriendsItem" == d.contextOrFrameLookup(b, c, "view_type") ? (h += "\n    ", b.getBlock("follow_friends_item_view")(a, b, c, d, function(a, b) {
                            return a ? void e(a) : (h += b, void(h += "\n\n"))
                        })) : "gridItem" == d.contextOrFrameLookup(b, c, "view_type") ? (h += "\n    ", b.getBlock("user_add_class")(a, b, c, d, function(i, j) {
                            if (i)
                                return void e(i);
                            h += j, h += "\n    ";
                            var k;
                            k = a.getFilter("named_format").call(b, (f = 129, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["More from {{ name }}"])), {
                                name: d.contextOrFrameLookup(b, c, "fullname")
                            }), c.set("title_text", k, !0), c.parent || (b.setVariable("title_text", k), b.addExport("title_text")), h += "\n    ", d.contextOrFrameLookup(b, c, "allow_dismiss") && (h += '\n        <span class="userDismiss" id="', h += d.suppressValue((f = 131, g = 47, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "get", a.autoesc), 'user["get"]', ["id"])), a.autoesc), h += '"></span>\n    '), h += '\n    <a href="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "profile_url"), a.autoesc), h += '" class="userWrapper" data-element-type="', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "PROFILE_URL", a.autoesc), a.autoesc), h += '"\n       title="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "title_text"), a.autoesc), h += '">\n        <h3 class="username">\n            ', !d.contextOrFrameLookup(b, c, "allow_dismiss") && (f = 136, g = 46, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "get", a.autoesc), 'user["get"]', ["domain_verified"])) && (h += '\n                <span class="verifiedDomainIcon"></span>\n            '), h += "\n            ", h += d.suppressValue(d.contextOrFrameLookup(b, c, "fullname"), a.autoesc), h += "\n        </h3>\n\n        ";
                            var l;
                            if (f = 142, g = 36, l = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["category"]), c.set("category", l, !0), c.parent || (b.setVariable("category", l), b.addExport("category")), h += "\n        ", d.contextOrFrameLookup(b, c, "category")) {
                                h += '\n            <p class="userStats">\n                <span class="value">\n                    ';
                                var m = d.makeMacro([], [], function(e) {
                                    c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                                    var h, i = "";
                                    return h = {
                                        category: d.contextOrFrameLookup(b, c, "category")
                                    }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 146, g = 21, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 146, g = 21, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Top Pinner in {{ category }}"])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                                });
                                b.setVariable("_doTranslation", m), h += d.suppressValue((f = 146, g = 21, d.callWrap(m, "_doTranslation", [])), a.autoesc), h += "\n                </span>\n            </p>\n        "
                            } else 
                                h += "\n            ", b.getBlock("pins_followers_count")(a, b, c, d, function(a, b) {
                                    return a ? void e(a) : (h += b, void(h += "\n        "))
                                });
                            h += '\n\n        <div class="userThumbs">\n            ';
                            var n;
                            f = 156, g = 38, n = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "get", a.autoesc), 'user["get"]', ["pin_thumbnail_urls", []]), c.set("thumbnails", n, !0), c.parent || (b.setVariable("thumbnails", n), b.addExport("thumbnails")), h += "\n            ";
                            var o;
                            o = a.getFilter("length").call(b, d.contextOrFrameLookup(b, c, "thumbnails")), c.set("num_thumbnails", o, !0), c.parent || (b.setVariable("num_thumbnails", o), b.addExport("num_thumbnails")), h += '\n            <span class="focusThumbContainer">\n                ', b.getBlock("hover_mask")(a, b, c, d, function(i, j) {
                                return i ? void e(i) : (h += j, h += "\n                ", h += d.suppressValue((f = 160, g = 26, d.callWrap(d.contextOrFrameLookup(b, c, "image_tag"), "image_tag", [d.makeKeywordArgs({
                                    src: (f = 161, g = 32, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "get", a.autoesc), 'user["get"]', ["image_large_url"])),
                                    class_name: "userFocusImage",
                                    alt: d.contextOrFrameLookup(b, c, "fullname")
                                })])), a.autoesc), h += "\n            </span>\n\n            ", void b.getBlock("user_thumbs")(a, b, c, d, function(f, g) {
                                    return f ? void e(f) : (h += g, h += "\n        </div>\n    </a>\n    ", void b.getBlock("user_follow_button")(a, b, c, d, function(f, g) {
                                        return f ? void e(f) : (h += g, h += "\n    ", void b.getBlock("debug")(a, b, c, d, function(a, b) {
                                            return a ? void e(a) : (h += b, void(h += "\n\n"))
                                        }))
                                    }))
                                }))
                            })
                        })) : "userSelect" == d.contextOrFrameLookup(b, c, "view_type") ? (h += "\n    ", b.getBlock("user_select_view")(a, b, c, d, function(a, b) {
                            return a ? void e(a) : (h += b, void(h += "\n\n"))
                        })) : "userSelectFollow" == d.contextOrFrameLookup(b, c, "view_type") ? (h += "\n    ", b.getBlock("user_select_follow_view")(a, b, c, d, function(a, b) {
                            return a ? void e(a) : (h += b, void(h += "\n\n"))
                        })) : "userCheckableSelectView" == d.contextOrFrameLookup(b, c, "view_type") && (h += "\n    ", b.getBlock("user_checkable_select_view")(a, b, c, d, function(a, b) {
                            return a ? void e(a) : (h += b, void(h += "\n\n"))
                        })), h += "\n", e(null, h)
                    })
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function b(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n        ";
                var i;
                f = 60, g = 31, i = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["size", "medium"]), c.set("size", i, !0), c.parent || (b.setVariable("size", i), b.addExport("size")), h += "\n        ", h += d.suppressValue((f = 61, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", [d.contextOrFrameLookup(b, c, "size")])), a.autoesc), h += "\n        ";
                var j;
                j = "small" == d.contextOrFrameLookup(b, c, "size") && "image_small_url" || "image_medium_url", c.set("image_key", j, !0), c.parent || (b.setVariable("image_key", j), b.addExport("image_key")), h += "\n        ";
                var k;
                f = 63, g = 40, k = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["has_via"]) || (f = 63, g = 66, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["is_via"])), c.set("has_or_is_via", k, !0), c.parent || (b.setVariable("has_or_is_via", k), b.addExport("has_or_is_via")), h += "\n        ", d.contextOrFrameLookup(b, c, "has_or_is_via") && (h += "\n            ", h += d.suppressValue((f = 65, g = 21, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["has_via"])), a.autoesc), h += "\n        "), h += "\n\n\n        ", b.getBlock("thumb_button")(a, b, c, d, function(i, j) {
                    if (i)
                        return void e(i);
                    h += j, h += "\n\n        ";
                    var k;
                    f = 71, g = 34, k = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["link", !0]), c.set("is_link", k, !0), c.parent || (b.setVariable("is_link", k), b.addExport("is_link")), h += "\n        ";
                    var l;
                    f = 72, g = 42, l = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["href_title_text"]) || (f = 72, g = 76, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["title_text"])), c.set("href_title_text", l, !0), c.parent || (b.setVariable("href_title_text", l), b.addExport("href_title_text")), h += "\n        ", d.contextOrFrameLookup(b, c, "is_link") && (h += '\n            <a href="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "url"), a.autoesc), h += '" data-element-type="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "url_element_type"), a.autoesc), h += '" title="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "href_title_text"), a.autoesc), h += '">\n        '), h += "\n\n        ";
                    var m;
                    f = 77, g = 37, m = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["title_text"]), c.set("title_text", m, !0), c.parent || (b.setVariable("title_text", m), b.addExport("title_text")), h += "\n        ";
                    var n;
                    f = 78, g = 36, n = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["title_tag", "h3"]), c.set("title_tag", n, !0), c.parent || (b.setVariable("title_tag", n), b.addExport("title_tag")), h += "\n        ";
                    var o;
                    f = 79, g = 36, o = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["show_name", !0]), c.set("show_name", o, !0), c.parent || (b.setVariable("show_name", o), b.addExport("show_name")), h += "\n        ";
                    var p;
                    f = 80, g = 40, p = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["show_location", !1]), c.set("show_location", p, !0), c.parent || (b.setVariable("show_location", p), b.addExport("show_location")), h += "\n        ";
                    var q;
                    f = 81, g = 40, q = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["subtitle_text"]), c.set("subtitle_text", q, !0), c.parent || (b.setVariable("subtitle_text", q), b.addExport("subtitle_text")), h += "\n        ";
                    var r;
                    f = 82, g = 36, r = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["is_invite"]), c.set("is_invite", r, !0), c.parent || (b.setVariable("is_invite", r), b.addExport("is_invite")), h += "\n        ";
                    var s;
                    s = d.contextOrFrameLookup(b, c, "title_text") || d.contextOrFrameLookup(b, c, "show_name") || d.contextOrFrameLookup(b, c, "show_location") || d.contextOrFrameLookup(b, c, "subtitle_text") || d.contextOrFrameLookup(b, c, "show_follow_button"), c.set("has_text", s, !0), c.parent || (b.setVariable("has_text", s), b.addExport("has_text")), h += "\n\n        ", d.contextOrFrameLookup(b, c, "has_text") && (h += "\n            ", h += d.suppressValue((f = 86, g = 21, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["hasText"])), a.autoesc), h += "\n        "), h += "\n\n        ";
                    var t;
                    if (f = 89, g = 41, t = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["show_user_icon", !0]), c.set("show_user_icon", t, !0), c.parent || (b.setVariable("show_user_icon", t), b.addExport("show_user_icon")), h += "\n        ", d.contextOrFrameLookup(b, c, "show_user_icon")) {
                        h += '\n            <div class="thumbImageWrapper">\n                ';
                        var u;
                        u = a.getFilter("named_format").call(b, (f = 92, g = 34, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["More from {{ user }}"])), {
                            user: d.contextOrFrameLookup(b, c, "fullname")
                        }), c.set("img_title", u, !0), c.parent || (b.setVariable("img_title", u), b.addExport("img_title")), h += '\n                <img src="', h += d.suppressValue((f = 93, g = 35, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "get", a.autoesc), 'user["get"]', [d.contextOrFrameLookup(b, c, "image_key"), (f = 93, g = 55, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "get", a.autoesc), 'user["get"]', ["image_medium_url"]))])), a.autoesc), h += '"\n                    alt="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "fullname"), a.autoesc), h += '" title="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "img_title"), a.autoesc), h += '"/>\n            </div>\n        '
                    }
                    if (h += "\n        ", d.contextOrFrameLookup(b, c, "title_text") && (h += "\n            <", h += d.suppressValue(d.contextOrFrameLookup(b, c, "title_tag"), a.autoesc), h += ' class="title">', h += d.suppressValue(d.contextOrFrameLookup(b, c, "title_text"), a.autoesc), h += "</", h += d.suppressValue(d.contextOrFrameLookup(b, c, "title_tag"), a.autoesc), h += ">\n        "), h += "\n        ", d.contextOrFrameLookup(b, c, "show_name") && (h += '\n            <h4 class="fullname">', h += d.suppressValue(d.contextOrFrameLookup(b, c, "fullname"), a.autoesc), h += "</h4>\n        "), h += "\n        ", d.contextOrFrameLookup(b, c, "subtitle_text") && (h += '\n            <div class="subtitle">', h += d.suppressValue(d.contextOrFrameLookup(b, c, "subtitle_text"), a.autoesc), h += "</div>\n        "), h += "\n        ", d.contextOrFrameLookup(b, c, "is_invite") && (h += '\n            <div class="inviteTypeWrapper">\n                <div class="inviteTypeIcon isPinner"></div>\n                <div class="inviteTypeName">', h += d.suppressValue((f = 109, g = 46, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Fellow Pinner"])), a.autoesc), h += "</div>\n            </div>\n        "), h += "\n        ", d.contextOrFrameLookup(b, c, "show_location")) {
                        h += "\n            ";
                        var v;
                        f = 113, g = 36, v = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "data"), "get", a.autoesc), 'data["get"]', ["location"]), c.set("location", v, !0), c.parent || (b.setVariable("location", v), b.addExport("location")), h += "\n            ", d.contextOrFrameLookup(b, c, "location") && (h += '\n                <div class="location">', h += d.suppressValue(d.contextOrFrameLookup(b, c, "location"), a.autoesc), h += "</div>\n            "), h += "\n        "
                    }
                    h += "\n\n        ", d.contextOrFrameLookup(b, c, "is_link") && (h += "\n            </a>\n        "), h += "\n    ", e(null, h)
                })
            } catch (l) {
                e(d.handleError(l, f, g))
            }
        }
        function c(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function d(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function e(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function f(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function g(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function h(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function i(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n        ", h += d.suppressValue((f = 171, g = 15, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["UserFollowButton", d.makeKeywordArgs({
                    options: {
                        user_id: (f = 173, g = 35, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "get", a.autoesc), 'user["get"]', ["id"])),
                        follow_class: "default",
                        followed: (f = 175, g = 36, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "get", a.autoesc), 'user["get"]', ["explicitly_followed_by_me"])),
                        class_name: "gridItem",
                        log_element_type: d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "USER_FOLLOW", a.autoesc)
                    }
                })])), a.autoesc), h += "\n    ", e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function j(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function k(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function l(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function m(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            b_thumb_view: b,
            b_thumb_button: c,
            b_follow_friends_item_view: d,
            b_user_add_class: e,
            b_pins_followers_count: f,
            b_hover_mask: g,
            b_user_thumbs: h,
            b_user_follow_button: i,
            b_debug: j,
            b_user_select_view: k,
            b_user_select_follow_view: l,
            b_user_checkable_select_view: m,
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/UserEducationDropdownButton/UserEducationDropdownButton.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n", h += d.suppressValue((f = 6, g = 1, d.callWrap(d.contextOrFrameLookup(b, c, "base"), "base", ["DropdownButton"])), a.autoesc), a.getTemplate("app/common/modules/DropdownButton/DropdownButton.nunjucks", !0, function(f, g) {
                    if (f)
                        return void e(f);
                    for (var h in g.blocks)
                        b.addBlock(h, g.blocks[h]);
                    g.rootRenderFunc(a, b, c, d, e)
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/UserFollowButton/UserFollowButton.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                if (h += "\n\n", h += d.suppressValue((f = 12, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "describe"), "describe", [d.makeKeywordArgs({
                    follow_text: (f = 13, g = 30, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["follow_text", (f = 13, g = 47, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Follow", "user"]))])),
                    unfollow_text: (f = 14, g = 32, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["unfollow_text", (f = 14, g = 51, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Unfollow", "user"]))])),
                    followed: (f = 15, g = 27, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["followed"])),
                    is_me: (f = 16, g = 24, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["is_me", d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "is_authenticated", a.autoesc) && d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "user", a.autoesc), "id", a.autoesc) == (f = 16, g = 93, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["user_id"]))])),
                    follow_class: (f = 17, g = 31, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["follow_class", "primary"])),
                    follow_ga_category: "user_follow",
                    unfollow_ga_category: "user_unfollow"
                })])), a.autoesc), h += "\n\n", f = 22, g = 15, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["is_me"])) {
                    h += "\n   ";
                    var i;
                    f = 23, g = 33, i = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["is_me_text", (f = 23, g = 49, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["That's you!"]))]), c.set("button_text", i, !0), c.parent || (b.setVariable("button_text", i), b.addExport("button_text")), h += "\n   ";
                    var j;
                    j = "dim", c.set("color", j, !0), c.parent || (b.setVariable("color", j), b.addExport("color")), h += "\n   ";
                    var k;
                    k=!0, c.set("disabled", k, !0), c.parent || (b.setVariable("disabled", k), b.addExport("disabled")), h += "\n"
                } else if (f = 26, g = 17, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["followed"])) {
                    h += "\n   ";
                    var l;
                    f = 27, g = 33, l = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["unfollow_text"]), c.set("button_text", l, !0), c.parent || (b.setVariable("button_text", l), b.addExport("button_text")), h += "\n   ";
                    var m;
                    m = "dim", c.set("color", m, !0), c.parent || (b.setVariable("color", m), b.addExport("color")), h += "\n   ";
                    var n;
                    n=!1, c.set("disabled", n, !0), c.parent || (b.setVariable("disabled", n), b.addExport("disabled")), h += "\n"
                } else {
                    h += "\n   ";
                    var o;
                    f = 31, g = 33, o = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["follow_text"]), c.set("button_text", o, !0), c.parent || (b.setVariable("button_text", o), b.addExport("button_text")), h += "\n   ";
                    var p;
                    f = 32, g = 27, p = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["follow_class"]), c.set("color", p, !0), c.parent || (b.setVariable("color", p), b.addExport("color")), h += "\n   ";
                    var q;
                    q=!1, c.set("disabled", q, !0), c.parent || (b.setVariable("disabled", q), b.addExport("disabled")), h += "\n"
                }
                h += "\n\n", h += d.suppressValue((f = 36, g = 1, d.callWrap(d.contextOrFrameLookup(b, c, "describe"), "describe", [{
                    text: d.contextOrFrameLookup(b, c, "button_text"),
                    color: d.contextOrFrameLookup(b, c, "color"),
                    disabled: d.contextOrFrameLookup(b, c, "disabled")
                }
                ])), a.autoesc), h += d.suppressValue((f = 36, g = 1, d.callWrap(d.contextOrFrameLookup(b, c, "base"), "base", ["ui.FollowButton"])), a.autoesc), a.getTemplate("app/common/modules/ui/FollowButton/FollowButton.nunjucks", !0, function(f, g) {
                    if (f)
                        return void e(f);
                    for (var i in g.blocks)
                        b.addBlock(i, g.blocks[i]);
                    h += "\n", g.rootRenderFunc(a, b, c, d, e)
                })
            } catch (r) {
                e(d.handleError(r, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/ui/Checkbox/Checkbox.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n";
                var i;
                i = d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "id", a.autoesc), c.set("id", i, !0), c.parent || (b.setVariable("id", i), b.addExport("id")), h += "\n";
                var j;
                f = 17, g = 29, j = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["name", ""]), c.set("name", j, !0), c.parent || (b.setVariable("name", j), b.addExport("name"));
                var k;
                f = 18, g = 29, k = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["value", ""]), c.set("value", k, !0), c.parent || (b.setVariable("value", k), b.addExport("value"));
                var l;
                f = 19, g = 29, l = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["checked", !1]), c.set("checked", l, !0), c.parent || (b.setVariable("checked", l), b.addExport("checked"));
                var m;
                f = 20, g = 29, m = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["disabled", !1]), c.set("disabled", m, !0), c.parent || (b.setVariable("disabled", m), b.addExport("disabled"));
                var n;
                f = 21, g = 29, n = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["view_type", ""]), c.set("view_type", n, !0), c.parent || (b.setVariable("view_type", n), b.addExport("view_type"));
                var o;
                if (o = d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "class_name", a.autoesc), c.set("class_name", o, !0), c.parent || (b.setVariable("class_name", o), b.addExport("class_name")), d.contextOrFrameLookup(b, c, "class_name") && (h += "\n    ", h += d.suppressValue((f = 25, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", [d.contextOrFrameLookup(b, c, "class_name")])), a.autoesc), h += "\n"), h += "\n\n", ("fancyToggle" == d.contextOrFrameLookup(b, c, "view_type") || "fancyCheckbox" == d.contextOrFrameLookup(b, c, "view_type")) && (h += "\n    ", d.contextOrFrameLookup(b, c, "view_type") && (h += "\n        ", h += d.suppressValue((f = 30, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", [d.contextOrFrameLookup(b, c, "view_type")])), a.autoesc), h += "\n    "), h += "\n\n    ", d.contextOrFrameLookup(b, c, "checked") && (h += d.suppressValue((f = 34, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["on"])), a.autoesc), h += "\n    "), d.contextOrFrameLookup(b, c, "disabled") && (h += d.suppressValue((f = 38, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["disabled"])), a.autoesc), h += "\n    ")), h += "\n\n", "fancyToggle" == d.contextOrFrameLookup(b, c, "view_type")) {
                    var p;
                    f = 43, g = 30, p = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["on_text", (f = 43, g = 43, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Yes"]))]), c.set("on_text", p, !0), c.parent || (b.setVariable("on_text", p), b.addExport("on_text"));
                    var q;
                    f = 44, g = 31, q = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["off_text", (f = 44, g = 45, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["No"]))]), c.set("off_text", q, !0), c.parent || (b.setVariable("off_text", q), b.addExport("off_text")), h += '<div class="slider"></div>\n    <p class="onText status">', h += d.suppressValue(d.contextOrFrameLookup(b, c, "on_text"), a.autoesc), h += '</p>\n    <p class="offText status">', h += d.suppressValue(d.contextOrFrameLookup(b, c, "off_text"), a.autoesc), h += "</p>\n    ", h += d.suppressValue((f = 49, g = 11, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["ui.Checkbox", d.makeKeywordArgs({
                        options: {
                            checked: d.contextOrFrameLookup(b, c, "checked"),
                            disabled: d.contextOrFrameLookup(b, c, "disabled"),
                            name: d.contextOrFrameLookup(b, c, "name"),
                            value: d.contextOrFrameLookup(b, c, "value")
                        }
                    })])), a.autoesc), h += "\n"
                } else 
                    "fancyCheckbox" == d.contextOrFrameLookup(b, c, "view_type") ? (h += '\n    <span class="visibleCheck"></span\n    >', h += d.suppressValue((f = 56, g = 12, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["ui.Checkbox", d.makeKeywordArgs({
                        options: {
                            checked: d.contextOrFrameLookup(b, c, "checked"),
                            disabled: d.contextOrFrameLookup(b, c, "disabled"),
                            name: d.contextOrFrameLookup(b, c, "name"),
                            value: d.contextOrFrameLookup(b, c, "value"),
                            id: d.contextOrFrameLookup(b, c, "id")
                        }
                    })])), a.autoesc), h += "\n") : (h += d.suppressValue((f = 63, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "tag_name"), "tag_name", ["input"])), a.autoesc), h += "\n    ", h += d.suppressValue((f = 64, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "attr"), "attr", [d.makeKeywordArgs({
                        type: "checkbox"
                    })])), a.autoesc), h += "\n    ", d.contextOrFrameLookup(b, c, "id") && (h += d.suppressValue((f = 66, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "attr"), "attr", [d.makeKeywordArgs({
                        id: d.contextOrFrameLookup(b, c, "id")
                    })])), a.autoesc), h += "\n    "), d.contextOrFrameLookup(b, c, "name") && (h += d.suppressValue((f = 69, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "attr"), "attr", [d.makeKeywordArgs({
                        name: d.contextOrFrameLookup(b, c, "name")
                    })])), a.autoesc), h += "\n    "), d.contextOrFrameLookup(b, c, "value") && (h += d.suppressValue((f = 72, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "attr"), "attr", [d.makeKeywordArgs({
                        value: d.contextOrFrameLookup(b, c, "value")
                    })])), a.autoesc), h += "\n    "), d.contextOrFrameLookup(b, c, "checked") && (h += d.suppressValue((f = 75, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "attr"), "attr", [d.makeKeywordArgs({
                        checked: "checked"
                    })])), a.autoesc), h += "\n    "), d.contextOrFrameLookup(b, c, "disabled") && (h += d.suppressValue((f = 78, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "attr"), "attr", [d.makeKeywordArgs({
                        disabled: "disabled"
                    })])), a.autoesc), h += "\n    "));
                e(null, h)
            } catch (r) {
                e(d.handleError(r, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/ui/Field/Field.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n", b.getBlock("content")(a, b, c, d, function(a, b) {
                    return a ? void e(a) : (h += b, h += "\n", void e(null, h))
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function b(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n    ";
                var i;
                if (f = 10, g = 38, i = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["currency_symbol"]), c.set("currency_symbol", i, !0), c.parent || (b.setVariable("currency_symbol", i), b.addExport("currency_symbol")), h += "\n    ", d.contextOrFrameLookup(b, c, "currency_symbol")) {
                    h += "\n        ";
                    var j;
                    f = 12, g = 26, j = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "update", a.autoesc), 'options["update"]', [{
                        class_name: "withCurrencySymbol"
                    }
                    ]), c.set("_temp_do", j, !0), c.parent || b.setVariable("_temp_do", j), h += "\n    "
                }
                h += "\n    ";
                var k;
                f = 14, g = 30, k = d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["ui.Input", d.makeKeywordArgs({
                    id: "input",
                    options: d.contextOrFrameLookup(b, c, "options")
                })]), c.set("input_module", k, !0), c.parent || (b.setVariable("input_module", k), b.addExport("input_module")), h += "\n\n    ", d.contextOrFrameLookup(b, c, "currency_symbol") ? (h += "\n        ", h += d.suppressValue((f = 19, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["withCurrencySymbol"])), a.autoesc), h += '\n        <span class="currencySymbol">\n            ', h += d.suppressValue(d.contextOrFrameLookup(b, c, "currency_symbol"), a.autoesc), h += '\n        </span>\n\n        <span class="inputWrapper">\n            ', h += d.suppressValue(d.contextOrFrameLookup(b, c, "input_module"), a.autoesc), h += "\n        </span>\n    ") : (h += "\n        ", h += d.suppressValue(d.contextOrFrameLookup(b, c, "input_module"), a.autoesc), h += "\n    "), h += "\n", e(null, h)
            } catch (l) {
                e(d.handleError(l, f, g))
            }
        }
        return {
            b_content: b,
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/ui/FollowButton/FollowButton.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n", h += d.suppressValue((f = 5, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["notNavigatable"])), a.autoesc), h += "\n", h += d.suppressValue((f = 6, g = 1, d.callWrap(d.contextOrFrameLookup(b, c, "base"), "base", ["Button"])), a.autoesc), a.getTemplate("app/common/modules/Button/Button.nunjucks", !0, function(f, g) {
                    if (f)
                        return void e(f);
                    for (var i in g.blocks)
                        b.addBlock(i, g.blocks[i]);
                    h += "\n", g.rootRenderFunc(a, b, c, d, e)
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/ui/ImageBlock/ImageBlock.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n", d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "class_name", a.autoesc) && (h += "\n    ", h += d.suppressValue((f = 29, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", [d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "class_name", a.autoesc)])), a.autoesc), h += "\n"), h += '\n\n<div>\n    <div class="left ', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "image_style", a.autoesc), a.autoesc), h += " ", h += d.suppressValue("imageSize_" + d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "image_size", a.autoesc), a.autoesc), h += '">\n        ';
                var i;
                i = d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "image_url", a.autoesc), c.set("img_url", i, !0), c.parent || (b.setVariable("img_url", i), b.addExport("img_url")), h += "\n        ", d.contextOrFrameLookup(b, c, "img_url") && (h += '\n            <a href="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "img_url"), a.autoesc), h += '">\n        '), h += "\n\n        ", d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "use_sprite_image", a.autoesc) ? h += "\n            <em></em>\n        " : d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "image_src", a.autoesc) ? (h += '\n            <img src="', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "image_src", a.autoesc), a.autoesc), h += '">\n        ') : d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "icon_letter", a.autoesc) && (h += '\n            <span class="icon', "primary" == d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "icon_color", a.autoesc) && (h += " primary"), h += '">\n                ', h += d.suppressValue(a.getFilter("upper").call(b, a.getFilter("first").call(b, d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "icon_letter", a.autoesc))), a.autoesc), h += "\n            </span>\n        "), h += "\n\n        ", d.contextOrFrameLookup(b, c, "img_url") && (h += "\n            </a>\n        "), h += '\n    </div>\n    <div class="right">\n        ', b.getBlock("content")(a, b, c, d, function(a, b) {
                    return a ? void e(a) : (h += b, h += "\n    </div>\n</div>\n", void e(null, h))
                })
            } catch (j) {
                e(d.handleError(j, f, g))
            }
        }
        function b(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n            ";
                var i;
                i = d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "title_url", a.autoesc), c.set("title_url", i, !0), c.parent || (b.setVariable("title_url", i), b.addExport("title_url")), h += "\n            ", d.contextOrFrameLookup(b, c, "title_url") && (h += '\n                <a href="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "title_url"), a.autoesc), h += '">\n            '), h += '\n\n            <h4 class="imageBlockContentTitle">', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "title", a.autoesc), a.autoesc), h += "</h4>\n\n            ", d.contextOrFrameLookup(b, c, "title_url") && (h += "\n                </a>\n            "), h += '\n            <div class="imageBlockContentBody">\n                <span>', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "body", a.autoesc), a.autoesc), h += "</span>\n            </div>\n        ", e(null, h)
            } catch (j) {
                e(d.handleError(j, f, g))
            }
        }
        return {
            b_content: b,
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/ui/Input/Input.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n", h += d.suppressValue((f = 16, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "tag_name"), "tag_name", [(f = 16, g = 21, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["element_type", "input"]))])), a.autoesc), d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "type", a.autoesc) && (h += "\n    ", h += d.suppressValue((f = 19, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "attr"), "attr", [{
                    type: d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "type", a.autoesc)
                }
                ])), a.autoesc), h += "\n"), d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "id", a.autoesc) && (h += "\n    ", h += d.suppressValue((f = 22, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "attr"), "attr", [{
                    id: d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "id", a.autoesc)
                }
                ])), a.autoesc), h += "\n"), d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "name", a.autoesc) && (h += "\n    ", h += d.suppressValue((f = 25, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "attr"), "attr", [{
                    name: d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "name", a.autoesc)
                }
                ])), a.autoesc), h += "\n"), d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "disabled", a.autoesc) && (h += "\n    ", h += d.suppressValue((f = 28, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "attr"), "attr", [{
                    disabled: ""
                }
                ])), a.autoesc), h += "\n"), d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "class_name", a.autoesc) && (h += "\n    ", h += d.suppressValue((f = 31, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", [d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "class_name", a.autoesc)])), a.autoesc), h += "\n"), d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "autofocus", a.autoesc) && (h += "\n    ", h += d.suppressValue((f = 34, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "attr"), "attr", [{
                    autofocus: ""
                }
                ])), a.autoesc), h += "\n"), d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "placeholder", a.autoesc) && (h += "\n    ", h += d.suppressValue((f = 37, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "attr"), "attr", [{
                    placeholder: d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "placeholder", a.autoesc)
                }
                ])), a.autoesc), h += "\n"), d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "value", a.autoesc) && (h += "\n    ", h += d.suppressValue((f = 40, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "attr"), "attr", [{
                    value: d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "value", a.autoesc)
                }
                ])), a.autoesc)), d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "autocomplete", a.autoesc) && (h += "\n    ", h += d.suppressValue((f = 43, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "attr"), "attr", [{
                    autocomplete: d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "autocomplete", a.autoesc)
                }
                ])), a.autoesc)), (d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "log_element_type", a.autoesc) || 0 == d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "log_element_type", a.autoesc)) && (h += d.suppressValue((f = 46, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "attr"), "attr", [{
                    "data-element-type": d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "log_element_type", a.autoesc)
                }
                ])), a.autoesc)), e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/ui/Label/Label.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "data"), "name", a.autoesc), a.autoesc), h += "\n", e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/ui/MetricPoint/MetricPoint.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n";
                var i;
                f = 15, g = 29, i = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["start_date"]), c.set("start_date", i, !0), c.parent || (b.setVariable("start_date", i), b.addExport("start_date")), h += "\n";
                var j;
                f = 16, g = 27, j = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["end_date"]), c.set("end_date", j, !0), c.parent || (b.setVariable("end_date", j), b.addExport("end_date")), h += "\n";
                var k;
                f = 17, g = 32, k = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["metric_values"]), c.set("metric_values", k, !0), c.parent || (b.setVariable("metric_values", k), b.addExport("metric_values")), h += '\n\n<table>\n    <tr class="dateContainer">\n        <td class="date" colspan="2">\n            <div>', h += d.suppressValue(d.contextOrFrameLookup(b, c, "start_date"), a.autoesc), h += "</div>\n\n            ", d.contextOrFrameLookup(b, c, "end_date") && (h += "\n                <div>- ", h += d.suppressValue(d.contextOrFrameLookup(b, c, "end_date"), a.autoesc), h += "</div>\n            "), h += "\n        </td>\n    </tr>\n    ", c = c.push();
                var l = d.contextOrFrameLookup(b, c, "metric_values");
                if (l)
                    for (var m = l.length, n = 0; n < l.length; n++) {
                        var o = l[n];
                        c.set("metric_value", o), c.set("loop.index", n + 1), c.set("loop.index0", n), c.set("loop.revindex", m - n), c.set("loop.revindex0", m - n - 1), c.set("loop.first", 0 === n), c.set("loop.last", n === m - 1), c.set("loop.length", m), h += '\n        <tr class="valueContainer">\n            <td class="value" style="', h += d.suppressValue("color:" + (f = 31, g = 65, d.callWrap(d.memberLookup(o, "get", a.autoesc), 'metric_value["get"]', ["value_color"])), a.autoesc), h += '">\n                ', h += d.suppressValue((f = 32, g = 33, d.callWrap(d.memberLookup(o, "get", a.autoesc), 'metric_value["get"]', ["value"])), a.autoesc), h += '\n            </td>\n            <td class="metric">', h += d.suppressValue((f = 34, g = 48, d.callWrap(d.memberLookup(o, "get", a.autoesc), 'metric_value["get"]', ["metric"])), a.autoesc), h += "</td>\n        </tr>\n    "
                    }
                c = c.pop(), h += "\n</table>\n", e(null, h)
            } catch (p) {
                e(d.handleError(p, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/ui/Picker/Picker.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n";
                var i;
                f = 13, g = 28, i = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["view_type", "normal"]), c.set("view_type", i, !0), c.parent || (b.setVariable("view_type", i), b.addExport("view_type")), h += "\n", h += d.suppressValue((f = 14, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", [d.contextOrFrameLookup(b, c, "view_type")])), a.autoesc), h += "\n\n";
                var j;
                f = 16, g = 37, j = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["create_suggestions"]), c.set("create_suggestions", j, !0), c.parent || (b.setVariable("create_suggestions", j), b.addExport("create_suggestions")), h += "\n\n";
                var k;
                f = 18, g = 31, k = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["allow_create", !0]), c.set("allow_create", k, !0), c.parent || (b.setVariable("allow_create", k), b.addExport("allow_create")), h += "\n\n";
                var l;
                if (f = 20, g = 35, l = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["show_top_section", !0]), c.set("show_top_section", l, !0), c.parent || (b.setVariable("show_top_section", l), b.addExport("show_top_section")), h += "\n", d.contextOrFrameLookup(b, c, "show_top_section")) {
                    h += "\n    ";
                    var m;
                    f = 22, g = 45, m = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["input_placeholder_text", (f = 22, g = 73, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Type a name"]))]), c.set("input_placeholder_text", m, !0), c.parent || (b.setVariable("input_placeholder_text", m), b.addExport("input_placeholder_text")), h += '\n    <div class="top">\n        ', d.contextOrFrameLookup(b, c, "allow_create") && (h += "\n            ", h += d.suppressValue((f = 25, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                        id: "createButton",
                        options: {
                            class_name: "createButton",
                            text: (f = 29, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Create"]))
                        }
                    })])), a.autoesc), h += "\n        "), h += '\n        <div class="nameWrapper', d.contextOrFrameLookup(b, c, "allow_create") || (h += " withoutCreate"), h += '">\n            ', h += "\n            ", h += d.suppressValue((f = 38, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["ui.Input", d.makeKeywordArgs({
                        id: "name",
                        options: {
                            name: "name",
                            class_name: "name",
                            placeholder: d.contextOrFrameLookup(b, c, "input_placeholder_text"),
                            autocomplete: "off"
                        }
                    })])), a.autoesc), h += "\n        </div>\n    </div>\n"
                }
                h += "\n\n", h += "\n\n";
                var n;
                n = [], c.set("select_list_data", n, !0), c.parent || (b.setVariable("select_list_data", n), b.addExport("select_list_data")), h += "\n", c = c.push();
                var o = d.contextOrFrameLookup(b, c, "data");
                if (o)
                    for (var p = o.length, q = 0; q < o.length; q++) {
                        var r = o[q];
                        c.set("section", r), c.set("loop.index", q + 1), c.set("loop.index0", q), c.set("loop.revindex", p - q), c.set("loop.revindex0", p - q - 1), c.set("loop.first", 0 === q), c.set("loop.last", q === p - 1), c.set("loop.length", p), h += "\n    ";
                        var s;
                        f = 55, g = 31, s = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "select_list_data"), "append", a.autoesc), 'select_list_data["append"]', [r]), c.set("_temp_do", s, !0), c.parent || b.setVariable("_temp_do", s), h += "\n"
                    }
                if (c = c.pop(), h += "\n\n", d.contextOrFrameLookup(b, c, "create_suggestions")) {
                    h += "\n    ";
                    var t;
                    t = [], c.set("create_items", t, !0), c.parent || (b.setVariable("create_items", t), b.addExport("create_items")), h += "\n    ", c = c.push();
                    var u = d.contextOrFrameLookup(b, c, "create_suggestions");
                    if (u)
                        for (var v = u.length, w = 0; w < u.length; w++) {
                            var x = u[w];
                            c.set("create_suggestion", x), c.set("loop.index", w + 1), c.set("loop.index0", w), c.set("loop.revindex", v - w), c.set("loop.revindex0", v - w - 1), c.set("loop.first", 0 === w), c.set("loop.last", w === v - 1), c.set("loop.length", v), h += "\n        ";
                            var y;
                            f = 61, g = 31, y = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "create_items"), "append", a.autoesc), 'create_items["append"]', [{
                                type: "module",
                                name: "ui.PickerItemCreate",
                                data: {
                                    name: x,
                                    is_create_suggestion: !0
                                }
                            }
                            ]), c.set("_temp_do", y, !0), c.parent || b.setVariable("_temp_do", y), h += "\n    "
                        }
                    c = c.pop(), h += "\n\n    ";
                    var z;
                    z = {
                        name: (f = 72, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Feeling stuck? Try one of these:"])),
                        items: d.contextOrFrameLookup(b, c, "create_items")
                    }, c.set("create_suggestion_section", z, !0), c.parent || (b.setVariable("create_suggestion_section", z), b.addExport("create_suggestion_section")), h += "\n    ";
                    var A;
                    f = 75, g = 31, A = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "select_list_data"), "append", a.autoesc), 'select_list_data["append"]', [d.contextOrFrameLookup(b, c, "create_suggestion_section")]), c.set("_temp_do", A, !0), c.parent || b.setVariable("_temp_do", A), h += "\n"
                }
                h += "\n\n", h += "\n";
                var B;
                f = 79, g = 27, B = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "select_list_data"), "append", a.autoesc), 'select_list_data["append"]', [{
                    name: d.contextOrFrameLookup(b, c, "none"),
                    items: []
                }
                ]), c.set("_temp_do", B, !0), c.parent || b.setVariable("_temp_do", B), h += "\n\n";
                var C;
                C = {
                    view_type: d.contextOrFrameLookup(b, c, "view_type"),
                    selected_section_index: d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "selected_section_index", a.autoesc),
                    selected_item_index: d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "selected_item_index", a.autoesc)
                }, c.set("select_list_options", C, !0), c.parent || (b.setVariable("select_list_options", C), b.addExport("select_list_options")), h += "\n\n";
                var D;
                if (f = 90, g = 30, D = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["item_module"]), c.set("item_module", D, !0), c.parent || (b.setVariable("item_module", D), b.addExport("item_module")), h += "\n", d.contextOrFrameLookup(b, c, "item_module")) {
                    h += "\n    ";
                    var E;
                    f = 92, g = 34, E = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "select_list_options"), "update", a.autoesc), 'select_list_options["update"]', [{
                        item_module: d.contextOrFrameLookup(b, c, "item_module")
                    }
                    ]), c.set("_temp_do", E, !0), c.parent || b.setVariable("_temp_do", E), h += "\n"
                }
                h += "\n\n", h += d.suppressValue((f = 95, g = 7, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["ui.SelectList", d.makeKeywordArgs({
                    id: "list",
                    options: d.contextOrFrameLookup(b, c, "select_list_options"),
                    data: d.contextOrFrameLookup(b, c, "select_list_data")
                })])), a.autoesc), h += "\n\n", e(null, h)
            } catch (F) {
                e(d.handleError(F, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/ui/PickerItemCreate/PickerItemCreate.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n";
                var i;
                f = 7, g = 28, i = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["view_type", "normal"]), c.set("view_type", i, !0), c.parent || (b.setVariable("view_type", i), b.addExport("view_type")), h += "\n", h += d.suppressValue((f = 8, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", [d.contextOrFrameLookup(b, c, "view_type")])), a.autoesc), h += '\n\n<span class="icon"></span>\n\n';
                var j;
                f = 12, g = 36, j = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["create_item_label", (f = 12, g = 59, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Create"]))]), c.set("create_item_label", j, !0), c.parent || (b.setVariable("create_item_label", j), b.addExport("create_item_label")), h += "\n\n", d.memberLookup(d.contextOrFrameLookup(b, c, "data"), "is_create", a.autoesc)&&!d.memberLookup(d.contextOrFrameLookup(b, c, "data"), "name", a.autoesc) ? (h += '\n    <span class="createLabel">', h += d.suppressValue(d.contextOrFrameLookup(b, c, "create_item_label"), a.autoesc), h += ':</span>\n    <span class="createName"></span>\n') : (h += "\n    ", h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "data"), "name", a.autoesc), a.autoesc), h += "\n"), h += "\n", e(null, h)
            } catch (k) {
                e(d.handleError(k, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/ui/SelectButton/SelectButton.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n";
                var i;
                f = 16, g = 29, i = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["class_name", "inContextDropdownButton"]), c.set("class_name", i, !0), c.parent || (b.setVariable("class_name", i), b.addExport("class_name")), h += "\n\n", h += d.suppressValue((f = 18, g = 7, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["DropdownButton", d.makeKeywordArgs({
                    id: "button",
                    options: {
                        text: (f = 21, g = 27, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["text"])),
                        class_name: d.contextOrFrameLookup(b, c, "class_name"),
                        has_icon: !0,
                        icon_on_right: !0,
                        module: {
                            name: "ui.RadioGroup",
                            options: {
                                name: (f = 28,
                                g = 35,
                                d.callWrap(d.memberLookup(d.contextOrFrameLookup(b,
                                c,
                                "options"),
                                "get",
                                a.autoesc),
                                'options["get"]',
                                ["name"])),
                                items: (f = 29,
                                g = 36,
                                d.callWrap(d.memberLookup(d.contextOrFrameLookup(b,
                                c,
                                "options"),
                                "get",
                                a.autoesc),
                                'options["get"]',
                                ["items",
                                []]))
                            }
                        }, dropdown_options : (f = 32, g = 39, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["dropdown_options", {}
                        ]))
                    }
                })])), a.autoesc), h += "\n", e(null, h)
            } catch (j) {
                e(d.handleError(j, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/ui/SelectList/SelectList.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n", h += d.suppressValue((f = 15, g = 5, d.callWrap(d.contextOrFrameLookup(b, c, "attr"), "attr", [{
                    tabindex: "0"
                }
                ])), a.autoesc), h += "\n\n";
                var i;
                f = 17, g = 28, i = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["view_type", "normal"]), c.set("view_type", i, !0), c.parent || (b.setVariable("view_type", i), b.addExport("view_type")), h += "\n", h += d.suppressValue((f = 18, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", [d.contextOrFrameLookup(b, c, "view_type")])), a.autoesc), h += "\n\n";
                var j;
                f = 20, g = 41, j = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["selected_section_index"]), c.set("selected_section_index", j, !0), c.parent || (b.setVariable("selected_section_index", j), b.addExport("selected_section_index")), h += "\n";
                var k;
                f = 21, g = 38, k = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["selected_item_index"]), c.set("selected_item_index", k, !0), c.parent || (b.setVariable("selected_item_index", k), b.addExport("selected_item_index")), h += "\n\n", h += "\n";
                var l;
                f = 24, g = 30, l = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["item_module", {
                    name: "ui.Label"
                }
                ]), c.set("item_module", l, !0), c.parent || (b.setVariable("item_module", l), b.addExport("item_module")), h += "\n";
                var m;
                f = 25, g = 41, m = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["section_heading_module", {
                    name: "ui.Label"
                }
                ]), c.set("section_heading_module", m, !0), c.parent || (b.setVariable("section_heading_module", m), b.addExport("section_heading_module")), h += "\n\n";
                var n;
                n = d.contextOrFrameLookup(b, c, "data"), c.set("sections", n, !0), c.parent || (b.setVariable("sections", n), b.addExport("sections")), h += '\n\n<div class="sections">\n    ', c = c.push();
                var o = d.contextOrFrameLookup(b, c, "sections");
                if (o)
                    for (var p = o.length, q = 0; q < o.length; q++) {
                        var r = o[q];
                        c.set("section", r), c.set("loop.index", q + 1), c.set("loop.index0", q), c.set("loop.revindex", p - q), c.set("loop.revindex0", p - q - 1), c.set("loop.first", 0 === q), c.set("loop.last", q === p - 1), c.set("loop.length", p), h += "\n        ";
                        var s;
                        f = 31, g = 37, s = d.callWrap(d.memberLookup(r, "get", a.autoesc), 'section["get"]', ["class_name", ""]), c.set("class_name", s, !0), c.parent || (b.setVariable("class_name", s), b.addExport("class_name")), h += '\n        <ul class="section ', h += d.suppressValue(d.contextOrFrameLookup(b, c, "class_name"), a.autoesc), h += '">\n            ';
                        var t;
                        t = d.memberLookup(d.contextOrFrameLookup(b, c, "loop"), "index0", a.autoesc), c.set("section_index", t, !0), c.parent || (b.setVariable("section_index", t), b.addExport("section_index")), h += "\n            ", d.memberLookup(r, "name", a.autoesc) && (h += '\n                <li class="sectionHeading">\n                    ', h += d.suppressValue((f = 36, g = 27, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", [d.memberLookup(d.contextOrFrameLookup(b, c, "section_heading_module"), "name", a.autoesc), d.makeKeywordArgs({
                            options: d.memberLookup(d.contextOrFrameLookup(b, c, "section_heading_module"), "options", a.autoesc),
                            data: r
                        })])), a.autoesc), h += "\n                </li>\n            "), h += '\n            <ul class="sectionItems">\n                ', c = c.push();
                        var u = d.memberLookup(r, "items", a.autoesc);
                        if (u)
                            for (var v = u.length, w = 0; w < u.length; w++) {
                                var x = u[w];
                                c.set("item", x), c.set("loop.index", w + 1), c.set("loop.index0", w), c.set("loop.revindex", v - w), c.set("loop.revindex0", v - w - 1), c.set("loop.first", 0 === w), c.set("loop.last", w === v - 1), c.set("loop.length", v), h += "\n                    ";
                                var y;
                                y = d.memberLookup(d.contextOrFrameLookup(b, c, "loop"), "index0", a.autoesc), c.set("item_index", y, !0), c.parent || (b.setVariable("item_index", y), b.addExport("item_index")), h += "\n                    ";
                                var z;
                                z = d.contextOrFrameLookup(b, c, "section_index") == d.contextOrFrameLookup(b, c, "selected_section_index") && d.contextOrFrameLookup(b, c, "item_index") == d.contextOrFrameLookup(b, c, "selected_item_index"), c.set("is_selected", z, !0), c.parent || (b.setVariable("is_selected", z), b.addExport("is_selected")), h += '\n                    <li class="item ', d.contextOrFrameLookup(b, c, "is_selected") && (h += "selected"), h += '">\n                        ', "module" == d.memberLookup(x, "type", a.autoesc) ? (h += "\n                            ", h += d.suppressValue((f = 48, g = 40, d.callWrap(d.contextOrFrameLookup(b, c, "ProxyModule"), "ProxyModule", [x])), a.autoesc), h += "\n                        ") : (h += "\n                            ", h += d.suppressValue((f = 50, g = 35, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", [d.memberLookup(d.contextOrFrameLookup(b, c, "item_module"), "name", a.autoesc), d.makeKeywordArgs({
                                    options: d.memberLookup(d.contextOrFrameLookup(b, c, "item_module"), "options", a.autoesc),
                                    data: x
                                })])), a.autoesc), h += "\n                        "), h += "\n                    </li>\n                "
                            }
                            c = c.pop(), h += "\n            </ul>\n        </ul>\n    "
                    }
                c = c.pop(), h += "\n</div>\n", e(null, h)
            } catch (A) {
                e(d.handleError(A, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/ui/SocialTypeaheadField/SocialTypeaheadField.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n", h += d.suppressValue((f = 11, g = 1, d.callWrap(d.contextOrFrameLookup(b, c, "base"), "base", ["ui.TypeaheadField"])), a.autoesc), a.getTemplate("app/common/modules/ui/TypeaheadField/TypeaheadField.nunjucks", !0, function(f, g) {
                    if (f)
                        return void e(f);
                    for (var i in g.blocks)
                        b.addBlock(i, g.blocks[i]);
                    h += "\n", g.rootRenderFunc(a, b, c, d, e)
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/ui/TableLookalikePicker/TableLookalikePicker.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n";
                var i;
                f = 14, g = 29, i = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["class_name"]), c.set("class_name", i, !0), c.parent || (b.setVariable("class_name", i), b.addExport("class_name")), h += "\n";
                var j;
                f = 15, g = 35, j = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["show_top_section", !0]), c.set("show_top_section", j, !0), c.parent || (b.setVariable("show_top_section", j), b.addExport("show_top_section")), h += "\n";
                var k;
                f = 16, g = 41, k = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["input_placeholder_text", (f = 16, g = 69, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Search"]))]), c.set("input_placeholder_text", k, !0), c.parent || (b.setVariable("input_placeholder_text", k), b.addExport("input_placeholder_text")), h += "\n";
                var l;
                f = 17, g = 31, l = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["allow_create", !1]), c.set("allow_create", l, !0), c.parent || (b.setVariable("allow_create", l), b.addExport("allow_create")), h += "\n";
                var m;
                f = 18, g = 26, m = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["columns"]), c.set("columns", m, !0), c.parent || (b.setVariable("columns", m), b.addExport("columns")), h += "\n";
                var n;
                f = 19, g = 29, n = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["filter_key"]), c.set("filter_key", n, !0), c.parent || (b.setVariable("filter_key", n), b.addExport("filter_key")), h += "\n\n", d.contextOrFrameLookup(b, c, "class_name") && (h += "\n    ", h += d.suppressValue((f = 22, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", [d.contextOrFrameLookup(b, c, "class_name")])), a.autoesc), h += "\n"), h += "\n\n";
                var o;
                o = {
                    show_top_section: d.contextOrFrameLookup(b, c, "show_top_section"),
                    input_placeholder_text: d.contextOrFrameLookup(b, c, "input_placeholder_text"),
                    allow_create: d.contextOrFrameLookup(b, c, "allow_create"),
                    item_module: {
                        name: "ui.TableLookalikePickerRow",
                        options: {
                            columns: d.contextOrFrameLookup(b, c, "columns")
                        }
                    }
                }, c.set("base_options", o, !0), c.parent || (b.setVariable("base_options", o), b.addExport("base_options")), h += "\n\n";
                var p;
                p = {
                    name: d.contextOrFrameLookup(b, c, "none"),
                    items: d.memberLookup(d.contextOrFrameLookup(b, c, "data"), "rows", a.autoesc)
                }, c.set("section", p, !0), c.parent || (b.setVariable("section", p), b.addExport("section")), h += "\n\n", h += "\n";
                var q;
                q = [d.contextOrFrameLookup(b, c, "section")], c.set("data", q, !0), c.parent || (b.setVariable("data", q), b.addExport("data")), h += "\n\n", h += d.suppressValue((f = 45, g = 1, d.callWrap(d.contextOrFrameLookup(b, c, "describe"), "describe", [d.contextOrFrameLookup(b, c, "base_options")])), a.autoesc), h += d.suppressValue((f = 45, g = 1, d.callWrap(d.contextOrFrameLookup(b, c, "base"), "base", ["ui.Picker"])), a.autoesc), a.getTemplate("app/common/modules/ui/Picker/Picker.nunjucks", !0, function(f, g) {
                    if (f)
                        return void e(f);
                    for (var i in g.blocks)
                        b.addBlock(i, g.blocks[i]);
                    h += "\n", g.rootRenderFunc(a, b, c, d, e)
                })
            } catch (r) {
                e(d.handleError(r, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/ui/TableLookalikePickerRow/TableLookalikePickerRow.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n";
                var i;
                f = 8, g = 26, i = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["columns"]), c.set("columns", i, !0), c.parent || (b.setVariable("columns", i), b.addExport("columns")), h += "\n\n", c = c.push();
                var j = d.contextOrFrameLookup(b, c, "columns");
                if (j)
                    for (var k = j.length, l = 0; l < j.length; l++) {
                        var m = j[l];
                        c.set("column", m), c.set("loop.index", l + 1), c.set("loop.index0", l), c.set("loop.revindex", k - l), c.set("loop.revindex0", k - l - 1), c.set("loop.first", 0 === l), c.set("loop.last", l === k - 1), c.set("loop.length", k), h += "\n    ";
                        var n;
                        f = 11, g = 32, n = d.callWrap(d.memberLookup(m, "get", a.autoesc), 'column["get"]', ["key"]), c.set("column_key", n, !0), c.parent || (b.setVariable("column_key", n), b.addExport("column_key")), h += "\n    ";
                        var o;
                        f = 12, g = 39, o = d.callWrap(d.memberLookup(m, "get", a.autoesc), 'column["get"]', ["class_name"]), c.set("column_class_name", o, !0), c.parent || (b.setVariable("column_class_name", o), b.addExport("column_class_name")), h += '\n    <div class="cell', d.contextOrFrameLookup(b, c, "column_class_name") && (h += " ", h += d.suppressValue(d.contextOrFrameLookup(b, c, "column_class_name"), a.autoesc)), h += '">\n        <span>\n            ', f = 15, g = 26, d.callWrap(d.memberLookup(m, "get", a.autoesc), 'column["get"]', ["static_value"]) ? (h += "\n                ", h += d.suppressValue((f = 16, g = 27, d.callWrap(d.memberLookup(m, "get", a.autoesc), 'column["get"]', ["static_value"])), a.autoesc), h += "\n            ") : (h += "\n                ", h += d.suppressValue((f = 18, g = 25, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "data"), "get", a.autoesc), 'data["get"]', [d.contextOrFrameLookup(b, c, "column_key")])), a.autoesc), h += "\n            "), h += "\n        </span>\n    </div>\n"
                    }
                c = c.pop(), h += "\n", e(null, h)
            } catch (p) {
                e(d.handleError(p, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/ui/TextField/TextField.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n", h += d.suppressValue((f = 14, g = 1, d.callWrap(d.contextOrFrameLookup(b, c, "base"), "base", ["ui.Field"])), a.autoesc), a.getTemplate("app/common/modules/ui/Field/Field.nunjucks", !0, function(f, g) {
                    if (f)
                        return void e(f);
                    for (var i in g.blocks)
                        b.addBlock(i, g.blocks[i]);
                    h += "\n\n", h += "\n", g.rootRenderFunc(a, b, c, d, e)
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function b(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n    ";
                var i = d.makeMacro(["disabled", "autogrow"], [], function(e, f, g) {
                    c = c.push(), g = g || {}, g.hasOwnProperty("caller") && c.set("caller", g.caller), c.set("disabled", e), c.set("autogrow", f);
                    var h = "";
                    return d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "disabled", a.autoesc) && (h += "disabled "), d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "autogrow", a.autoesc) && (h += "autogrow"), h += "\n    ", c = c.pop(), new d.SafeString(h)
                });
                b.addExport("classnames"), b.setVariable("classnames", i), h += "\n    <textarea", d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "id", a.autoesc) && (h += ' id="', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "id", a.autoesc), a.autoesc), h += '"'), d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "name", a.autoesc) && (h += ' name="', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "name", a.autoesc), a.autoesc), h += '"'), d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "autofocus", a.autoesc) && (h += ' autofocus="autofocus"'), d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "rows", a.autoesc) && (h += ' rows="', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "rows", a.autoesc), a.autoesc), h += '"'), h += '\n        class="content ', h += d.suppressValue((f = 25, g = 33, d.callWrap(i, "classnames", [d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "disabled", a.autoesc), d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "autogrow", a.autoesc)])), a.autoesc), h += '"\n        placeholder="', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "placeholder", a.autoesc), a.autoesc), h += '"\n    >', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "value", a.autoesc), a.autoesc), h += "</textarea>\n", e(null, h)
            } catch (j) {
                e(d.handleError(j, f, g))
            }
        }
        return {
            b_content: b,
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/ui/Typeahead/Typeahead.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n", f = 10, g = 15, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["view_type"]) && (h += "\n    ", h += d.suppressValue((f = 11, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", [(f = 11, g = 25, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["view_type"]))])), a.autoesc), h += "\n"), h += "\n\n", f = 14, g = 15, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["class_name"]) && (h += "\n    ", h += d.suppressValue((f = 15, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", [(f = 15, g = 25, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["class_name"]))])), a.autoesc), h += "\n"), h += "\n\n";
                var i;
                i = "expanded" == (f = 18, g = 37, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["view_type"])), c.set("show_new_typeahead", i, !0), c.parent || (b.setVariable("show_new_typeahead", i), b.addExport("show_new_typeahead")), h += "\n", d.contextOrFrameLookup(b, c, "show_new_typeahead") ? (h += "\n    ", h += d.suppressValue((f = 20, g = 11, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    id: "cancelButton",
                    options: {
                        cancelButton: !0,
                        text: (f = 24, g = 21, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["&times;"])),
                        show_text: !0,
                        borderless: !0
                    }
                })])), a.autoesc), h += '\n\n    <div class="recentQueriesHeader">\n        <span class="title">', h += d.suppressValue((f = 31, g = 30, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Recent Searches"])), a.autoesc), h += '</span>\n        <hr>\n    </div>\n\n    <ul class="results" data-component-type="', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "ComponentType"), "TYPEAHEAD_SUGGESTIONS", a.autoesc), a.autoesc), h += '">\n        <ul class="leftColumn"></ul>\n        <ul class="midColumn"></ul>\n        <ul class="rightColumn"></ul>\n    </ul>\n') : (h += '\n    <ul class="results" data-component-type="', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "ComponentType"), "TYPEAHEAD_SUGGESTIONS", a.autoesc), a.autoesc), h += '"></ul>\n'), h += "\n", e(null, h)
            } catch (j) {
                e(d.handleError(j, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/ui/Typeahead/add_pin_to_map.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                var i;
                i = "typeaheadResultEmphasized", c.set("emphasized_classname", i, !0), c.parent || (b.setVariable("emphasized_classname", i), b.addExport("emphasized_classname")), h += "\n";
                var j;
                j = "typeaheadResultMetaData", c.set("meta_classname", j, !0), c.parent || (b.setVariable("meta_classname", j), b.addExport("meta_classname")), h += "\n";
                var k;
                k = d.contextOrFrameLookup(b, c, "label") || "", c.set("label", k, !0), c.parent || (b.setVariable("label", k), b.addExport("label")), h += '\n\n<a>\n    <div class="addToMap">\n        <p class="Button btn rounded addToMap">\n            ', h += d.suppressValue((f = 7, g = 14, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Map it"])), a.autoesc), h += '\n        </p>\n    </div>\n    <h4 class="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "emphasized_classname"), a.autoesc), h += '">\n        ', h += d.suppressValue(d.contextOrFrameLookup(b, c, "label"), a.autoesc), h += "\n    </h4>\n\n    ", h += "\n    ", a.getTemplate("app/desktop/modules/AddPinToMap/pinFormMetadata.nunjucks", function(a, d) {
                    return a ? void e(a) : void d.render(b.getVariables(), c.push(), function(a, b) {
                        return a ? void e(a) : (h += b, h += "\n</a>\n", void e(null, h))
                    })
                })
            } catch (l) {
                e(d.handleError(l, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/ui/Typeahead/default_item.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                var i;
                i = d.contextOrFrameLookup(b, c, "title") || "", c.set("title", i, !0), c.parent || (b.setVariable("title", i), b.addExport("title")), h += "\n";
                var j;
                j = d.contextOrFrameLookup(b, c, "class_name") || "", c.set("class_name", j, !0), c.parent || (b.setVariable("class_name", j), b.addExport("class_name")), h += "\n";
                var k;
                k = d.contextOrFrameLookup(b, c, "emptyState") ||!1, c.set("emptyState", k, !0), c.parent || (b.setVariable("emptyState", k), b.addExport("emptyState")), h += "\n";
                var l;
                l = d.contextOrFrameLookup(b, c, "image") || "", c.set("image", l, !0), c.parent || (b.setVariable("image", l), b.addExport("image")), h += "\n";
                var m;
                m = d.contextOrFrameLookup(b, c, "resultIndex") || "", c.set("resultIndex", m, !0), c.parent || (b.setVariable("resultIndex", m), b.addExport("resultIndex")), h += "\n";
                var n;
                n = d.contextOrFrameLookup(b, c, "tag") || "", c.set("tag", n, !0), c.parent || (b.setVariable("tag", n), b.addExport("tag")), h += "\n";
                var o;
                o = d.contextOrFrameLookup(b, c, "query") || "", c.set("query", o, !0), c.parent || (b.setVariable("query", o), b.addExport("query")), h += "\n";
                var p;
                p = d.contextOrFrameLookup(b, c, "type") || "", c.set("type", p, !0), c.parent || (b.setVariable("type", p), b.addExport("type")), h += "\n";
                var q;
                q = d.contextOrFrameLookup(b, c, "enteredQuery") || "", c.set("enteredQuery", q, !0), c.parent || (b.setVariable("enteredQuery", q), b.addExport("enteredQuery")), h += "\n";
                var r;
                r = d.contextOrFrameLookup(b, c, "label") || "", c.set("label", r, !0), c.parent || (b.setVariable("label", r), b.addExport("label")), h += "\n\n<a ", d.contextOrFrameLookup(b, c, "class_name") && (h += 'class="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "class_name"), a.autoesc), h += '"'), h += ">\n    ", d.contextOrFrameLookup(b, c, "image") && (h += '\n        <span class="typeaheadImg">\n            <img src="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "image"), a.autoesc), h += '">\n        </span>\n    '), h += "\n    ", "recent_queries" == d.contextOrFrameLookup(b, c, "tag") && (h += '\n        <span data-query="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "query"), a.autoesc), h += '" class="remove">', h += d.suppressValue((f = 18, g = 52, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Remove"])), a.autoesc), h += "</span>\n    "), h += "\n\n    ";
                var s;
                s = "pins", c.set("search_mode", s, !0), c.parent || (b.setVariable("search_mode", s), b.addExport("search_mode")), h += "\n    ";
                var t;
                if (t = d.contextOrFrameLookup(b, c, "type"), c.set("autocomplete_type", t, !0), c.parent || (b.setVariable("autocomplete_type", t), b.addExport("autocomplete_type")), h += "\n    ", "pin_search" == d.contextOrFrameLookup(b, c, "type")) {
                    h += "\n        ";
                    var u;
                    u = "query", c.set("autocomplete_type", u, !0), c.parent || (b.setVariable("autocomplete_type", u), b.addExport("autocomplete_type")), h += "\n    "
                } else if ("board_search" == d.contextOrFrameLookup(b, c, "type")) {
                    h += "\n        ";
                    var v;
                    v = "boards", c.set("search_mode", v, !0), c.parent || (b.setVariable("search_mode", v), b.addExport("search_mode")), h += "\n        ";
                    var w;
                    w = "query", c.set("autocomplete_type", w, !0), c.parent || (b.setVariable("autocomplete_type", w), b.addExport("autocomplete_type")), h += "\n    "
                } else if ("people_search" == d.contextOrFrameLookup(b, c, "type")) {
                    h += "\n        ";
                    var x;
                    x = "users", c.set("search_mode", x, !0), c.parent || (b.setVariable("search_mode", x), b.addExport("search_mode")), h += "\n        ";
                    var y;
                    y = "query", c.set("autocomplete_type", y, !0), c.parent || (b.setVariable("autocomplete_type", y), b.addExport("autocomplete_type")), h += "\n    "
                }
                h += "\n    ", a.getFilter("contains").call(b, ["pin_search", "board_search", "people_search"], d.contextOrFrameLookup(b, c, "type")) && (h += '\n        <span class="typeaheadSearchIcon"><em></em></span>\n        <span class="typeaheadScope">', h += d.suppressValue(d.contextOrFrameLookup(b, c, "title"), a.autoesc), h += "</span>\n    "), h += "\n    ";
                var z;
                if (z = d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "AUTOCOMPLETE_SUGGESTION", a.autoesc), c.set("element_type", z, !0), c.parent || (b.setVariable("element_type", z), b.addExport("element_type")), h += "\n    ", "recent_query" == d.contextOrFrameLookup(b, c, "type")) {
                    h += "\n        ";
                    var A;
                    A = d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "RECENT_SEARCH_SUGGESTION", a.autoesc), c.set("element_type", A, !0), c.parent || (b.setVariable("element_type", A), b.addExport("element_type")), h += "\n    "
                }
                h += '\n    <span class="typeaheadName"\n        data-element-type="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "element_type"), a.autoesc), h += "\"\n        data-aux='", h += d.suppressValue(a.getFilter("to_json").call(b, {
                    result_index: d.contextOrFrameLookup(b, c, "resultIndex"),
                    entered_query: d.contextOrFrameLookup(b, c, "enteredQuery"),
                    selected_query: d.contextOrFrameLookup(b, c, "label"),
                    autocomplete_type: d.contextOrFrameLookup(b, c, "autocomplete_type"),
                    search_mode: d.contextOrFrameLookup(b, c, "search_mode")
                }), a.autoesc), h += "'>\n        ", "my_pins" == d.contextOrFrameLookup(b, c, "tag") && (h += '\n            <span class="myPins">', h += d.suppressValue((f = 50, g = 35, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Search your Pins:"])), a.autoesc), h += "</span>\n        "), h += "\n        ", h += d.suppressValue(d.contextOrFrameLookup(b, c, "label"), a.autoesc), h += "\n    </span>\n</a>\n", a.getFilter("contains").call(b, ["pin_search", "board_search", "people_search"], d.contextOrFrameLookup(b, c, "type"))&&!d.contextOrFrameLookup(b, c, "emptyState") && (h += "\n    <hr />\n"), h += "\n", e(null, h)
            } catch (B) {
                e(d.handleError(B, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/ui/Typeahead/hint_no_city.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += '<div class="hintWrapper">\n    <p class="hint">\n        <span class="highlighted">', h += d.suppressValue((f = 2, g = 36, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Hint!"])), a.autoesc), h += "</span>\n        ", h += d.suppressValue((f = 3, g = 10, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Type a place or place and area "])), a.autoesc), h += '\n    </p>\n\n    <p class="example">\n        ', h += d.suppressValue((f = 7, g = 10, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["e.g. Taj Mahal or Harrods near London"])), a.autoesc), h += "\n    </p>\n</div>\n", e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/ui/Typeahead/hint_specific_city.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                var i;
                i = d.contextOrFrameLookup(b, c, "locality") || "", c.set("locality", i, !0), c.parent || (b.setVariable("locality", i), b.addExport("locality")), h += "\n";
                var j;
                j = d.contextOrFrameLookup(b, c, "place") || "", c.set("place", j, !0), c.parent || (b.setVariable("place", j), b.addExport("place")), h += '\n\n<div class="hintWrapper">\n    <p class="hint">\n        <span class="highlighted">', h += d.suppressValue((f = 5, g = 36, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Hint!"])), a.autoesc), h += "</span>\n        Wrong ", h += d.suppressValue(d.contextOrFrameLookup(b, c, "locality"), a.autoesc), h += '?\n    </p>\n\n    <p class="example">\n        Help us out by being more specific. We\'re searching in ', h += d.suppressValue(d.contextOrFrameLookup(b, c, "place"), a.autoesc), h += "\n    </p>\n</div>\n", e(null, h)
            } catch (k) {
                e(d.handleError(k, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/ui/Typeahead/interest.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                var i;
                i = d.contextOrFrameLookup(b, c, "class_name") || "", c.set("class_name", i, !0), c.parent || (b.setVariable("class_name", i), b.addExport("class_name")), h += "\n";
                var j;
                j = d.contextOrFrameLookup(b, c, "image") || "", c.set("image", j, !0), c.parent || (b.setVariable("image", j), b.addExport("image")), h += "\n";
                var k;
                k = d.contextOrFrameLookup(b, c, "resultIndex") || "", c.set("resultIndex", k, !0), c.parent || (b.setVariable("resultIndex", k), b.addExport("resultIndex")), h += "\n";
                var l;
                l = d.contextOrFrameLookup(b, c, "label") || "", c.set("label", l, !0), c.parent || (b.setVariable("label", l), b.addExport("label")), h += "\n";
                var m;
                m = d.contextOrFrameLookup(b, c, "enteredQuery") || "", c.set("enteredQuery", m, !0), c.parent || (b.setVariable("enteredQuery", m), b.addExport("enteredQuery")), h += "\n";
                var n;
                n = d.contextOrFrameLookup(b, c, "follower_count") || "", c.set("follower_count", n, !0), c.parent || (b.setVariable("follower_count", n), b.addExport("follower_count")), h += "\n\n<a ", d.contextOrFrameLookup(b, c, "class_name") && (h += 'class="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "class_name"), a.autoesc), h += '"'), h += ">\n    ", d.contextOrFrameLookup(b, c, "image") && (h += '\n        <span class="typeaheadImg">\n            <img src="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "image"), a.autoesc), h += '">\n        </span>\n    '), h += '\n\n    <span class="typeaheadSummary">\n        <div class="typeaheadName"\n             data-element-type="', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "INTEREST_SUGGESTION", a.autoesc), a.autoesc), h += '"\n             data-aux=\'{\n                "result_index": ', h += d.suppressValue(d.contextOrFrameLookup(b, c, "resultIndex"), a.autoesc), h += ',\n                "entered_query": "', h += d.suppressValue(d.contextOrFrameLookup(b, c, "enteredQuery"), a.autoesc), h += '",\n                "selected_query": "', h += d.suppressValue(d.contextOrFrameLookup(b, c, "label"), a.autoesc), h += "\"\n            }'>\n            ", h += d.suppressValue(d.contextOrFrameLookup(b, c, "label"), a.autoesc), h += '\n        </div>\n        <div class="typeaheadStats">\n            <span class="numPinnersIcon"></span>\n            <span class="numPinnersStat">\n                ', h += "\n                ";
                var o = d.makeMacro([], [], function(e) {
                    c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                    var h, i = "";
                    return h = {
                        follower_count: d.contextOrFrameLookup(b, c, "follower_count")
                    }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 28, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 28, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["{{ follower_count }} Pinners"])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                });
                b.setVariable("_doTranslation", o), h += d.suppressValue((f = 28, g = 17, d.callWrap(o, "_doTranslation", [])), a.autoesc), h += '\n            </span>\n        </div>\n    </span>\n    <span class="plusIcon"></span>\n</a>\n', e(null, h)
            } catch (p) {
                e(d.handleError(p, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/ui/Typeahead/place.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                var i;
                i = d.contextOrFrameLookup(b, c, "category") || "", c.set("category", i, !0), c.parent || (b.setVariable("category", i), b.addExport("category")), h += "\n";
                var j;
                j = d.contextOrFrameLookup(b, c, "locality") || "", c.set("locality", j, !0), c.parent || (b.setVariable("locality", j), b.addExport("locality")), h += "\n";
                var k;
                k = d.contextOrFrameLookup(b, c, "class_name") || "", c.set("class_name", k, !0), c.parent || (b.setVariable("class_name", k), b.addExport("class_name")), h += "\n";
                var l;
                l = d.contextOrFrameLookup(b, c, "image") || "", c.set("image", l, !0), c.parent || (b.setVariable("image", l), b.addExport("image")), h += "\n";
                var m;
                m = d.contextOrFrameLookup(b, c, "hideLocalityAndRegion") ||!1, c.set("hideLocalityAndRegion", m, !0), c.parent || (b.setVariable("hideLocalityAndRegion", m), b.addExport("hideLocalityAndRegion")), h += "\n";
                var n;
                n = d.contextOrFrameLookup(b, c, "label") || "", c.set("label", n, !0), c.parent || (b.setVariable("label", n), b.addExport("label")), h += "\n";
                var o;
                o = d.contextOrFrameLookup(b, c, "sublabel") || "", c.set("sublabel", o, !0), c.parent || (b.setVariable("sublabel", o), b.addExport("sublabel")), h += "\n";
                var p;
                p = d.contextOrFrameLookup(b, c, "street") || "", c.set("street", p, !0), c.parent || (b.setVariable("street", p), b.addExport("street")), h += "\n";
                var q;
                q = d.contextOrFrameLookup(b, c, "region") || "", c.set("region", q, !0), c.parent || (b.setVariable("region", q), b.addExport("region")), h += "\n\n", a.getTemplate("templates/macros/image.nunjucks", function(f, g) {
                    return f ? void e(f) : void g.getExported(function(f, g) {
                        if (f)
                            return void e(f);
                        if (!g.hasOwnProperty("image_tag"))
                            return void e(new Error("cannot import 'image_tag'"));
                        var i = g.image_tag;
                        b.setVariable("image_tag", i), h += '\n\n<a class="', d.contextOrFrameLookup(b, c, "class_name") && (h += d.suppressValue(d.contextOrFrameLookup(b, c, "class_name"), a.autoesc), h += " "), d.contextOrFrameLookup(b, c, "image") && (h += "hasChildImage "), h += '">\n    <div class="content', d.contextOrFrameLookup(b, c, "image") && (h += " hasImage "), h += '">\n        <h4 class="typeaheadResultEmphasized">\n            <span class="emphasized">', h += d.suppressValue(d.contextOrFrameLookup(b, c, "label"), a.autoesc), h += "</span>\n            ", d.contextOrFrameLookup(b, c, "category") && (h += '\n                <span class="category"> <span class="bullet">&bull;</span> ', h += d.suppressValue(d.contextOrFrameLookup(b, c, "category"), a.autoesc), h += "</span>\n            "), h += '\n        </h4>\n\n        <p class="typeaheadResultMetaData">\n            <span class="typeaheadPlace">\n                ', d.contextOrFrameLookup(b, c, "sublabel") && (h += "\n                    ", h += d.suppressValue(d.contextOrFrameLookup(b, c, "sublabel"), a.autoesc), h += "\n                "), h += "\n                ", d.contextOrFrameLookup(b, c, "street") && (h += "\n                    ", h += d.suppressValue(d.contextOrFrameLookup(b, c, "street"), a.autoesc), h += "\n                "), h += "\n                ", d.contextOrFrameLookup(b, c, "hideLocalityAndRegion") || (h += "\n                    ", d.contextOrFrameLookup(b, c, "street") && d.contextOrFrameLookup(b, c, "locality") && (h += "&bull;"), h += "\n                    ", h += d.suppressValue(d.contextOrFrameLookup(b, c, "locality"), a.autoesc), d.contextOrFrameLookup(b, c, "locality") && d.contextOrFrameLookup(b, c, "region") && (h += ", "), h += "\n                    ", d.contextOrFrameLookup(b, c, "region") && (h += "\n                        ", h += d.suppressValue(d.contextOrFrameLookup(b, c, "region"), a.autoesc), h += "\n                    "), h += "\n                "), h += "\n            </span>\n        </p>\n    </div>\n</a>\n", e(null, h)
                    })
                })
            } catch (r) {
                e(d.handleError(r, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/ui/Typeahead/send_pin.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                var i;
                i = d.contextOrFrameLookup(b, c, "id") || "", c.set("id", i, !0), c.parent || (b.setVariable("id", i), b.addExport("id")), h += "\n";
                var j;
                j = d.contextOrFrameLookup(b, c, "is_pinner") ||!1, c.set("is_pinner", j, !0), c.parent || (b.setVariable("is_pinner", j), b.addExport("is_pinner")), h += "\n";
                var k;
                k = d.contextOrFrameLookup(b, c, "type") || "", c.set("type", k, !0), c.parent || (b.setVariable("type", k), b.addExport("type")), h += "\n";
                var l;
                l = d.contextOrFrameLookup(b, c, "email") || "", c.set("email", l, !0), c.parent || (b.setVariable("email", l), b.addExport("email")), h += "\n";
                var m;
                m = d.contextOrFrameLookup(b, c, "label") || "", c.set("label", m, !0), c.parent || (b.setVariable("label", m), b.addExport("label")), h += "\n";
                var n;
                n = d.contextOrFrameLookup(b, c, "send_pin_image") ||!1, c.set("send_pin_image", n, !0), c.parent || (b.setVariable("send_pin_image", n), b.addExport("send_pin_image")), h += "\n\n";
                var o;
                if (o = "", c.set("element_type", o, !0), c.parent || (b.setVariable("element_type", o), b.addExport("element_type")), h += "\n", d.contextOrFrameLookup(b, c, "is_pinner")) {
                    h += "\n    ", h += "\n    ";
                    var p;
                    p = 204, c.set("element_type", p, !0), c.parent || (b.setVariable("element_type", p), b.addExport("element_type")), h += "\n"
                } else if ("facebook_non_pinner" == d.contextOrFrameLookup(b, c, "type")) {
                    h += "\n    ", h += "\n    ";
                    var q;
                    q = 202, c.set("element_type", q, !0), c.parent || (b.setVariable("element_type", q), b.addExport("element_type")), h += "\n"
                } else if ("gplus_non_pinner" == d.contextOrFrameLookup(b, c, "type")) {
                    h += "\n    ", h += "\n    ";
                    var r;
                    r = 203, c.set("element_type", r, !0), c.parent || (b.setVariable("element_type", r), b.addExport("element_type")), h += "\n"
                }
                h += "\n\n<a ", d.contextOrFrameLookup(b, c, "id") && (h += 'class="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "id"), a.autoesc), h += '"'), h += " ", d.contextOrFrameLookup(b, c, "element_type") && (h += 'data-element-type="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "element_type"), a.autoesc), h += '"'), h += ">\n    ", d.contextOrFrameLookup(b, c, "send_pin_image") && (h += '\n        <span class="typeaheadImg">\n            <img src="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "send_pin_image"), a.autoesc), h += '" alt="">\n        </span>\n    '), h += '\n    <p class="typeaheadName">', h += d.suppressValue(d.contextOrFrameLookup(b, c, "label"), a.autoesc), h += '</p>\n    <div class="titleWrapper">\n        <i class="titleIcon ', d.contextOrFrameLookup(b, c, "is_pinner") && (h += "isPinner "), "facebook_non_pinner" == d.contextOrFrameLookup(b, c, "type") && (h += "isFacebook "), "gplus_non_pinner" == d.contextOrFrameLookup(b, c, "type") && (h += "isGplus "), h += '"></i>\n        <p class="title">\n            ', d.contextOrFrameLookup(b, c, "is_pinner") ? (h += "\n                ", h += d.suppressValue((f = 30, g = 18, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Fellow Pinner"])), a.autoesc), h += "\n            ") : d.contextOrFrameLookup(b, c, "email") ? (h += "\n                ", h += d.suppressValue(d.contextOrFrameLookup(b, c, "email"), a.autoesc), h += "\n            ") : "facebook_non_pinner" == d.contextOrFrameLookup(b, c, "type") ? (h += "\n                ", h += d.suppressValue((f = 34, g = 18, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Facebook"])), a.autoesc), h += "\n            ") : "gplus_non_pinner" == d.contextOrFrameLookup(b, c, "type") ? (h += "\n                ", h += d.suppressValue((f = 36, g = 18, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Google"])), a.autoesc), h += "\n            ") : (h += "\n                ", h += d.suppressValue((f = 38, g = 18, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Enter an email address"])), a.autoesc), h += "\n            "), h += "\n        </p>\n    </div>\n</a>\n", e(null, h)
            } catch (s) {
                e(d.handleError(s, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/ui/Typeahead/send_to_email.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                var i;
                i = d.contextOrFrameLookup(b, c, "email") || "", c.set("email", i, !0), c.parent || (b.setVariable("email", i), b.addExport("email")), h += "\n";
                var j;
                j = d.contextOrFrameLookup(b, c, "is_valid") ||!1, c.set("is_valid", j, !0), c.parent || (b.setVariable("is_valid", j), b.addExport("is_valid")), h += "\n";
                var k;
                if (k = d.contextOrFrameLookup(b, c, "invite_title") ||!1, c.set("invite_title", k, !0), c.parent || (b.setVariable("invite_title", k), b.addExport("invite_title")), h += '\n\n<div class="sendToEmail', d.contextOrFrameLookup(b, c, "is_valid") || (h += " unclickable"), h += '">\n    <a>\n        <div class="left">\n            ', d.contextOrFrameLookup(b, c, "is_valid") ? (h += '\n                <div class="icon">', h += d.suppressValue(a.getFilter("upper").call(b, a.getFilter("first").call(b, d.contextOrFrameLookup(b, c, "email"))), a.autoesc), h += "</div>\n            ") : h += '\n                <div class="icon typingEmail">\n                    <em></em>\n                </div>\n            ', h += '\n        </div>\n        <div class="right">\n            ', d.contextOrFrameLookup(b, c, "invite_title")) {
                    h += "\n                ";
                    var l;
                    l = a.getFilter("named_format").call(b, (f = 17, g = 35, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Invite {{ email }}"])), {
                        email: d.contextOrFrameLookup(b, c, "email")
                    }), c.set("title_text", l, !0), c.parent || (b.setVariable("title_text", l), b.addExport("title_text")), h += "\n            "
                } else {
                    h += "\n                ";
                    var m;
                    m = a.getFilter("named_format").call(b, (f = 19, g = 35, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Email to {{ email }}"])), {
                        email: d.contextOrFrameLookup(b, c, "email")
                    }), c.set("title_text", m, !0), c.parent || (b.setVariable("title_text", m), b.addExport("title_text")), h += "\n            "
                }
                if (h += "\n            ", d.contextOrFrameLookup(b, c, "is_valid")) {
                    h += "\n                ";
                    var n;
                    f = 22, g = 38, n = d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Click to send"]), c.set("subtitle_text", n, !0), c.parent || (b.setVariable("subtitle_text", n), b.addExport("subtitle_text")), h += "\n            "
                } else {
                    h += "\n                ";
                    var o;
                    f = 24, g = 38, o = d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Keep typing the email address"]), c.set("subtitle_text", o, !0), c.parent || (b.setVariable("subtitle_text", o), b.addExport("subtitle_text")), h += "\n            "
                }
                h += '\n            <h4 class="title">', h += d.suppressValue(d.contextOrFrameLookup(b, c, "title_text"), a.autoesc), h += '</h4>\n            <p class="subtitle">', h += d.suppressValue(d.contextOrFrameLookup(b, c, "subtitle_text"), a.autoesc), h += "</p>\n        </div>\n    </a>\n</div>\n", e(null, h)
            } catch (p) {
                e(d.handleError(p, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/ui/Typeahead/social_connect.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                var i;
                if (i = d.contextOrFrameLookup(b, c, "network") || "", c.set("network", i, !0), c.parent || (b.setVariable("network", i), b.addExport("network")), h += "\n\n", "facebook" == d.contextOrFrameLookup(b, c, "network")) {
                    h += "\n    ";
                    var j;
                    f = 3, g = 22, j = d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Find friends from Facebook"]), c.set("titleText", j, !0), c.parent || (b.setVariable("titleText", j), b.addExport("titleText")), h += "\n"
                } else if ("twitter" == d.contextOrFrameLookup(b, c, "network")) {
                    h += "\n    ";
                    var k;
                    f = 5, g = 22, k = d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Find friends from Twitter"]), c.set("titleText", k, !0), c.parent || (b.setVariable("titleText", k), b.addExport("titleText")), h += "\n"
                } else if ("gplus" == d.contextOrFrameLookup(b, c, "network")) {
                    h += "\n    ";
                    var l;
                    f = 7, g = 22, l = d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Find friends from Google+"]), c.set("titleText", l, !0), c.parent || (b.setVariable("titleText", l), b.addExport("titleText")), h += "\n"
                } else if ("yahoo" == d.contextOrFrameLookup(b, c, "network")) {
                    h += "\n    ";
                    var m;
                    f = 9, g = 22, m = d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Find friends from Yahoo"]), c.set("titleText", m, !0), c.parent || (b.setVariable("titleText", m), b.addExport("titleText")), h += "\n"
                }
                h += '\n\n<div class="socialConnect">\n    <a>\n        <div class="left">\n            <div class="icon socialConnect-', h += d.suppressValue(d.contextOrFrameLookup(b, c, "network"), a.autoesc), h += '">\n                <em></em>\n            </div>\n        </div>\n        <div class="right">\n            <h4 class="title">', h += d.suppressValue(d.contextOrFrameLookup(b, c, "titleText"), a.autoesc), h += "</h4>\n        </div>\n    </a>\n</div>\n", e(null, h)
            } catch (n) {
                e(d.handleError(n, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/ui/Typeahead/user_circle_avatar.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                var i;
                i = d.contextOrFrameLookup(b, c, "send_pin_image") || "", c.set("send_pin_image", i, !0), c.parent || (b.setVariable("send_pin_image", i), b.addExport("send_pin_image")), h += "\n";
                var j;
                j = d.contextOrFrameLookup(b, c, "is_pinner") ||!1, c.set("is_pinner", j, !0), c.parent || (b.setVariable("is_pinner", j), b.addExport("is_pinner")), h += "\n";
                var k;
                k = d.contextOrFrameLookup(b, c, "type") || "", c.set("type", k, !0), c.parent || (b.setVariable("type", k), b.addExport("type")), h += "\n";
                var l;
                l = d.contextOrFrameLookup(b, c, "email") || "", c.set("email", l, !0), c.parent || (b.setVariable("email", l), b.addExport("email")), h += "\n";
                var m;
                m = d.contextOrFrameLookup(b, c, "label") || "", c.set("label", m, !0), c.parent || (b.setVariable("label", m), b.addExport("label")), h += '\n\n<a class="userCircleAvatar">\n    <div class="left">\n        <img src="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "send_pin_image"), a.autoesc), h += '"/>\n    </div>\n    <div class="right">\n        <h4 class="title">', h += d.suppressValue(d.contextOrFrameLookup(b, c, "label"), a.autoesc), h += '</h4>\n        <p class="subtitle">\n            ', d.contextOrFrameLookup(b, c, "is_pinner") ? (h += "\n                ", h += d.suppressValue((f = 14, g = 18, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Fellow Pinner"])), a.autoesc), h += "\n            ") : d.contextOrFrameLookup(b, c, "email") ? (h += "\n                ", h += d.suppressValue(d.contextOrFrameLookup(b, c, "email"), a.autoesc), h += "\n            ") : "facebook_non_pinner" == d.contextOrFrameLookup(b, c, "type") ? (h += "\n                ", h += d.suppressValue((f = 18, g = 18, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Facebook"])), a.autoesc), h += "\n            ") : "gplus_non_pinner" == d.contextOrFrameLookup(b, c, "type") && (h += "\n                ", h += d.suppressValue((f = 20, g = 18, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Google"])), a.autoesc), h += "\n            "), h += "\n        </p>\n    </div>\n</a>\n", e(null, h)
            } catch (n) {
                e(d.handleError(n, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/common/modules/ui/TypeaheadField/TypeaheadField.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n";
                var i;
                f = 44, g = 23, i = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["type", "text"]), c.set("type", i, !0), c.parent || (b.setVariable("type", i), b.addExport("type")), h += "\n";
                var j;
                f = 45, g = 23, j = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["name", ""]), c.set("name", j, !0), c.parent || (b.setVariable("name", j), b.addExport("name")), h += "\n";
                var k;
                f = 46, g = 24, k = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["value", ""]), c.set("value", k, !0), c.parent || (b.setVariable("value", k), b.addExport("value")), h += "\n";
                var l;
                f = 47, g = 28, l = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["autofocus"]), c.set("autofocus", l, !0), c.parent || (b.setVariable("autofocus", l), b.addExport("autofocus")), h += "\n";
                var m;
                f = 48, g = 28, m = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["view_type", ""]), c.set("view_type", m, !0), c.parent || (b.setVariable("view_type", m), b.addExport("view_type")), h += "\n";
                var n;
                f = 49, g = 30, n = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["placeholder", ""]), c.set("placeholder", n, !0), c.parent || (b.setVariable("placeholder", n), b.addExport("placeholder")), h += "\n";
                var o;
                f = 50, g = 27, o = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["disabled", !1]), c.set("disabled", o, !0), c.parent || (b.setVariable("disabled", o), b.addExport("disabled")), h += "\n";
                var p;
                f = 51, g = 29, p = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["input_type", "text"]), c.set("input_type", p, !0), c.parent || (b.setVariable("input_type", p), b.addExport("input_type")), h += "\n";
                var q;
                if (f = 52, g = 31, q = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["autocomplete", "off"]), c.set("autocomplete", q, !0), c.parent || (b.setVariable("autocomplete", q), b.addExport("autocomplete")), h += "\n\n", f = 54, g = 15, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["class_name"]) && (h += "\n    ", h += d.suppressValue((f = 55, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", [(f = 55, g = 25, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["class_name"]))])), a.autoesc), h += "\n"), h += "\n\n", h += d.suppressValue((f = 58, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", [d.contextOrFrameLookup(b, c, "view_type")])), a.autoesc), h += "\n\n", "tokenized" == d.contextOrFrameLookup(b, c, "type")) {
                    h += "\n    ";
                    var r;
                    r = "field", c.set("class_name", r, !0), c.parent || (b.setVariable("class_name", r), b.addExport("class_name")), h += "\n    ";
                    var s;
                    f = 62, g = 40, s = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["handled_by_parent", !0]), c.set("handled_by_parent", s, !0), c.parent || (b.setVariable("handled_by_parent", s), b.addExport("handled_by_parent")), h += "\n    ";
                    var t;
                    f = 63, g = 38, t = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["show_remove_all"]), c.set("show_remove_all", t, !0), c.parent || (b.setVariable("show_remove_all", t), b.addExport("show_remove_all")), h += "\n    ";
                    var u;
                    f = 64, g = 43, u = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["hide_tokens_on_focus"]), c.set("hide_tokens_on_focus", u, !0), c.parent || (b.setVariable("hide_tokens_on_focus", u), b.addExport("hide_tokens_on_focus")), h += "\n    ";
                    var v;
                    if (f = 65, g = 45, v = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["input_log_element_type"]), c.set("input_log_element_type", v, !0), c.parent || (b.setVariable("input_log_element_type", v), b.addExport("input_log_element_type")), h += "\n    ", d.contextOrFrameLookup(b, c, "disabled")) {
                        h += "\n        ";
                        var w;
                        w = d.contextOrFrameLookup(b, c, "class_name") + " disabled", c.set("class_name", w, !0), c.parent || (b.setVariable("class_name", w), b.addExport("class_name")), h += "\n    "
                    }
                    h += '\n    <div class="tokenizedInputWrapper">\n        ', h += d.suppressValue((f = 70, g = 15, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["TokenizedInput", d.makeKeywordArgs({
                        id: "tokenizedInput",
                        options: {
                            handled_by_parent: d.contextOrFrameLookup(b, c, "handled_by_parent"),
                            view_type: d.contextOrFrameLookup(b, c, "view_type"),
                            token_text_strategy: "prioritized",
                            show_remove_all: d.contextOrFrameLookup(b, c, "show_remove_all"),
                            hide_tokens_on_focus: d.contextOrFrameLookup(b, c, "hide_tokens_on_focus"),
                            input_options: {
                                name: d.contextOrFrameLookup(b, c, "name"),
                                class_name: d.contextOrFrameLookup(b, c, "class_name"),
                                value: d.contextOrFrameLookup(b, c, "value"),
                                disabled: d.contextOrFrameLookup(b, c, "disabled"),
                                placeholder: d.contextOrFrameLookup(b, c, "placeholder"),
                                autofocus: d.contextOrFrameLookup(b, c, "autofocus"),
                                autocomplete: d.contextOrFrameLookup(b, c, "autocomplete"),
                                log_element_type: d.contextOrFrameLookup(b, c, "input_log_element_type")
                            }
                        }
                    })])), a.autoesc), h += "\n    </div>\n"
                } else if ("textarea" == d.contextOrFrameLookup(b, c, "type"))
                    h += "\n    ", h += d.suppressValue((f = 92, g = 11, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["ui.TextField", d.makeKeywordArgs({
                        id: "textfield",
                        options: {
                            placeholder: d.contextOrFrameLookup(b, c, "placeholder"),
                            value: d.contextOrFrameLookup(b, c, "value")
                        }
                    })])), a.autoesc), h += "\n";
                else {
                    h += "\n    ";
                    var x;
                    if (x = "field", c.set("class_name", x, !0), c.parent || (b.setVariable("class_name", x), b.addExport("class_name")), h += "\n    ", d.contextOrFrameLookup(b, c, "disabled")) {
                        h += "\n        ";
                        var y;
                        y = d.contextOrFrameLookup(b, c, "class_name") + " disabled", c.set("class_name", y, !0), c.parent || (b.setVariable("class_name", y), b.addExport("class_name")), h += "\n    "
                    }
                    h += "\n    ";
                    var z;
                    f = 101, g = 45, z = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["input_log_element_type"]), c.set("input_log_element_type", z, !0), c.parent || (b.setVariable("input_log_element_type", z), b.addExport("input_log_element_type")), h += "\n    ", h += d.suppressValue((f = 102, g = 11, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["ui.Input", d.makeKeywordArgs({
                        id: "input",
                        options: {
                            name: d.contextOrFrameLookup(b, c, "name"),
                            class_name: d.contextOrFrameLookup(b, c, "class_name"),
                            value: d.contextOrFrameLookup(b, c, "value"),
                            disabled: d.contextOrFrameLookup(b, c, "disabled"),
                            type: d.contextOrFrameLookup(b, c, "input_type"),
                            placeholder: d.contextOrFrameLookup(b, c, "placeholder"),
                            autofocus: d.contextOrFrameLookup(b, c, "autofocus"),
                            autocomplete: d.contextOrFrameLookup(b, c, "autocomplete"),
                            log_element_type: d.contextOrFrameLookup(b, c, "input_log_element_type")
                        }
                    })])), a.autoesc), h += "\n"
                }
                h += "\n\n", f = 118, g = 15, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["show_caret"]) && (h += '\n    <span class="typeaheadCaret"></span>\n'), h += "\n\n", b.getBlock("buttons")(a, b, c, d, function(i, j) {
                    if (i)
                        return void e(i);
                    h += j, h += "\n\n", h += "\n\n";
                    var k;
                    if (k = "guided expanded" == d.contextOrFrameLookup(b, c, "view_type"), c.set("show_new_typeahead_dropdown", k, !0), c.parent || (b.setVariable("show_new_typeahead_dropdown", k), b.addExport("show_new_typeahead_dropdown")), h += "\n\n", !d.contextOrFrameLookup(b, c, "show_new_typeahead_dropdown")) {
                        h += "\n    ";
                        var l;
                        l = {
                            view_type: d.contextOrFrameLookup(b, c, "view_type")
                        }, c.set("typeahead_options", l, !0), c.parent || (b.setVariable("typeahead_options", l), b.addExport("typeahead_options")), h += "\n\n    ";
                        var m;
                        if (f = 135, g = 28, m = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["count"]), c.set("value", m, !0), c.parent || (b.setVariable("value", m), b.addExport("value")), h += "\n    ", d.contextOrFrameLookup(b, c, "value") != d.contextOrFrameLookup(b, c, "none")) {
                            h += "\n        ";
                            var n;
                            f = 137, g = 36, n = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "typeahead_options"), "update", a.autoesc), 'typeahead_options["update"]', [{
                                count: d.contextOrFrameLookup(b, c, "value")
                            }
                            ]), c.set("_temp_do", n, !0), c.parent || b.setVariable("_temp_do", n), h += "\n    "
                        }
                        h += "\n\n    ";
                        var o;
                        if (f = 140, g = 28, o = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["class_name"]), c.set("value", o, !0), c.parent || (b.setVariable("value", o), b.addExport("value")), h += "\n    ", d.contextOrFrameLookup(b, c, "value") != d.contextOrFrameLookup(b, c, "none")) {
                            h += "\n        ";
                            var p;
                            f = 142, g = 36, p = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "typeahead_options"), "update", a.autoesc), 'typeahead_options["update"]', [{
                                class_name: d.contextOrFrameLookup(b, c, "value")
                            }
                            ]), c.set("_temp_do", p, !0), c.parent || b.setVariable("_temp_do", p), h += "\n    "
                        }
                        h += "\n\n    ";
                        var q;
                        if (f = 145, g = 28, q = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["enable_recent_queries"]), c.set("value", q, !0), c.parent || (b.setVariable("value", q), b.addExport("value")), h += "\n    ", d.contextOrFrameLookup(b, c, "value") != d.contextOrFrameLookup(b, c, "none")) {
                            h += "\n        ";
                            var r;
                            f = 147, g = 36, r = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "typeahead_options"), "update", a.autoesc), 'typeahead_options["update"]', [{
                                enable_recent_queries: d.contextOrFrameLookup(b, c, "value")
                            }
                            ]), c.set("_temp_do", r, !0), c.parent || b.setVariable("_temp_do", r), h += "\n    "
                        }
                        h += "\n\n    ";
                        var s;
                        if (f = 150, g = 28, s = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["should_geocode"]), c.set("value", s, !0), c.parent || (b.setVariable("value", s), b.addExport("value")), h += "\n    ", d.contextOrFrameLookup(b, c, "value") != d.contextOrFrameLookup(b, c, "none")) {
                            h += "\n        ";
                            var t;
                            f = 152, g = 36, t = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "typeahead_options"), "update", a.autoesc), 'typeahead_options["update"]', [{
                                should_geocode: d.contextOrFrameLookup(b, c, "value")
                            }
                            ]), c.set("_temp_do", t, !0), c.parent || b.setVariable("_temp_do", t), h += "\n    "
                        }
                        h += "\n\n    ";
                        var u;
                        if (f = 155, g = 28, u = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["use_tab_index"]), c.set("value", u, !0), c.parent || (b.setVariable("value", u), b.addExport("value")), h += "\n    ", d.contextOrFrameLookup(b, c, "value") != d.contextOrFrameLookup(b, c, "none")) {
                            h += "\n        ";
                            var v;
                            f = 157, g = 36, v = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "typeahead_options"), "update", a.autoesc), 'typeahead_options["update"]', [{
                                use_tab_index: d.contextOrFrameLookup(b, c, "value")
                            }
                            ]), c.set("_temp_do", v, !0), c.parent || b.setVariable("_temp_do", v), h += "\n    "
                        }
                        h += "\n\n    ";
                        var w;
                        if (f = 160, g = 28, w = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["bypass_maxheight"]), c.set("value", w, !0), c.parent || (b.setVariable("value", w), b.addExport("value")), h += "\n    ", d.contextOrFrameLookup(b, c, "value") != d.contextOrFrameLookup(b, c, "none")) {
                            h += "\n        ";
                            var x;
                            f = 162, g = 36, x = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "typeahead_options"), "update", a.autoesc), 'typeahead_options["update"]', [{
                                bypass_maxheight: d.contextOrFrameLookup(b, c, "value")
                            }
                            ]), c.set("_temp_do", x, !0), c.parent || b.setVariable("_temp_do", x), h += "\n    "
                        }
                        h += "\n\n    ";
                        var y;
                        if (f = 165, g = 28, y = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["exclude_non_followers"]), c.set("value", y, !0), c.parent || (b.setVariable("value", y), b.addExport("value")), h += "\n    ", d.contextOrFrameLookup(b, c, "value") != d.contextOrFrameLookup(b, c, "none")) {
                            h += "\n        ";
                            var z;
                            f = 167, g = 36, z = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "typeahead_options"), "update", a.autoesc), 'typeahead_options["update"]', [{
                                exclude_non_followers: d.contextOrFrameLookup(b, c, "value")
                            }
                            ]), c.set("_temp_do", z, !0), c.parent || b.setVariable("_temp_do", z), h += "\n    "
                        }
                        h += "\n\n    ";
                        var A;
                        if (f = 170, g = 28, A = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["tags"]), c.set("value", A, !0), c.parent || (b.setVariable("value", A), b.addExport("value")), h += "\n    ", d.contextOrFrameLookup(b, c, "value") != d.contextOrFrameLookup(b, c, "none")) {
                            h += "\n        ";
                            var B;
                            f = 172, g = 36, B = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "typeahead_options"), "update", a.autoesc), 'typeahead_options["update"]', [{
                                tags: d.contextOrFrameLookup(b, c, "value")
                            }
                            ]), c.set("_temp_do", B, !0), c.parent || b.setVariable("_temp_do", B), h += "\n    "
                        }
                        h += "\n\n    ";
                        var C;
                        if (f = 175, g = 28, C = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["minimum_term_character_length"]), c.set("value", C, !0), c.parent || (b.setVariable("value", C), b.addExport("value")), h += "\n    ", d.contextOrFrameLookup(b, c, "value") != d.contextOrFrameLookup(b, c, "none")) {
                            h += "\n        ";
                            var D;
                            f = 177, g = 36, D = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "typeahead_options"), "update", a.autoesc), 'typeahead_options["update"]', [{
                                minimum_term_character_length: d.contextOrFrameLookup(b, c, "value")
                            }
                            ]), c.set("_temp_do", D, !0), c.parent || b.setVariable("_temp_do", D), h += "\n    "
                        }
                        h += "\n\n    ";
                        var E;
                        if (f = 180, g = 28, E = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["bypass_lru_cache"]), c.set("value", E, !0), c.parent || (b.setVariable("value", E), b.addExport("value")), h += "\n    ", d.contextOrFrameLookup(b, c, "value") != d.contextOrFrameLookup(b, c, "none")) {
                            h += "\n        ";
                            var F;
                            f = 182, g = 36, F = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "typeahead_options"), "update", a.autoesc), 'typeahead_options["update"]', [{
                                bypass_lru_cache: d.contextOrFrameLookup(b, c, "value")
                            }
                            ]), c.set("_temp_do", F, !0), c.parent || b.setVariable("_temp_do", F), h += "\n    "
                        }
                        h += "\n\n    ";
                        var G;
                        if (f = 185, g = 28, G = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["resource_name"]), c.set("value", G, !0), c.parent || (b.setVariable("value", G), b.addExport("value")), h += "\n    ", d.contextOrFrameLookup(b, c, "value") != d.contextOrFrameLookup(b, c, "none")) {
                            h += "\n        ";
                            var H;
                            f = 187, g = 36, H = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "typeahead_options"), "update", a.autoesc), 'typeahead_options["update"]', [{
                                resource_name: d.contextOrFrameLookup(b, c, "value")
                            }
                            ]), c.set("_temp_do", H, !0), c.parent || b.setVariable("_temp_do", H), h += "\n    "
                        }
                        h += "\n\n    ";
                        var I;
                        if (f = 190, g = 28, I = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["template"]), c.set("value", I, !0), c.parent || (b.setVariable("value", I), b.addExport("value")), h += "\n    ", d.contextOrFrameLookup(b, c, "value") != d.contextOrFrameLookup(b, c, "none")) {
                            h += "\n        ";
                            var J;
                            f = 192, g = 36, J = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "typeahead_options"), "update", a.autoesc), 'typeahead_options["update"]', [{
                                template: d.contextOrFrameLookup(b, c, "value")
                            }
                            ]), c.set("_temp_do", J, !0), c.parent || b.setVariable("_temp_do", J), h += "\n    "
                        }
                        h += "\n\n    ";
                        var K;
                        if (K = "guided" == d.contextOrFrameLookup(b, c, "view_type") && (f = 196, g = 48, d.callWrap(d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "experiments", a.autoesc), "in_experiment_groups", a.autoesc), 'context["experiment"]["in_experim"]', ["search_mypins_typeahead", ["employees", "enabled"]])), c.set("enable_mypins", K, !0), c.parent || (b.setVariable("enable_mypins", K), b.addExport("enable_mypins")), h += "\n    ", d.contextOrFrameLookup(b, c, "enable_mypins")) {
                            h += "\n        ";
                            var L;
                            f = 198, g = 36, L = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "typeahead_options"), "update", a.autoesc), 'typeahead_options["update"]', [{
                                enable_mypins: d.contextOrFrameLookup(b, c, "enable_mypins")
                            }
                            ]), c.set("_temp_do", L, !0), c.parent || b.setVariable("_temp_do", L), h += "\n    "
                        }
                        h += "\n\n    ", h += d.suppressValue((f = 201, g = 11, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["ui.Typeahead", d.makeKeywordArgs({
                            id: "typeahead",
                            options: d.contextOrFrameLookup(b, c, "typeahead_options")
                        })])), a.autoesc), h += "\n"
                    }
                    h += "\n", e(null, h)
                })
            } catch (A) {
                e(d.handleError(A, f, g))
            }
        }
        function b(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n", e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            b_buttons: b,
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["templates/dialogs/api_secret.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += '\n\n<form class="standardForm">\n    <h1>', h += d.suppressValue((f = 8, g = 10, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Your API Secret"])), a.autoesc), h += '</h1>\n    <div class="body">\n        <p>\n            ';
                var i = d.makeMacro([], [], function(e) {
                    c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                    var h, i = "";
                    return h = {}, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 11, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 11, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["This is your API secret, and because it's a secret, you shouldn't let anyone see it or put it in a publicly accessible place."])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                });
                b.setVariable("_doTranslation", i), h += d.suppressValue((f = 11, g = 13, d.callWrap(i, "_doTranslation", [])), a.autoesc), h += '\n\n        </p>\n        <p class="apiSecret">', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "apiSecret", a.autoesc), a.autoesc), h += '</p>\n    </div>\n    <div class="formFooter">\n        <div class="formFooterButtons">\n            ', h += d.suppressValue((f = 21, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        cancelButton: !0,
                        text: (f = 24, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Ok"])),
                        color: "primary"
                    }
                })])), a.autoesc), h += "\n        </div>\n    </div>\n</form>\n", e(null, h)
            } catch (j) {
                e(d.handleError(j, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["templates/dialogs/autobahn_click_tip.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "<form class='standardForm'>\n    <h1>", h += d.suppressValue((f = 1, g = 10, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Don't go yet!"])), a.autoesc), h += "</h1>\n    <div class='body'>\n        <p>\n            ";
                var i = d.makeMacro([], [], function(e) {
                    c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                    var h, i = "";
                    return h = {}, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 4, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 4, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["This link won't take you anywhere until you're all done with the tour."])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                });
                b.setVariable("_doTranslation", i), h += d.suppressValue((f = 4, g = 13, d.callWrap(i, "_doTranslation", [])), a.autoesc), h += "\n        </p>\n    </div>\n    <div class='formFooter'>\n        <div class='formFooterButtons'>\n            ", h += d.suppressValue((f = 11, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        class_name: "confirm",
                        text: (f = 14, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Back to the Tour"])),
                        color: "primary"
                    }
                })])), a.autoesc), h += "\n        </div>\n    </div>\n</form>\n", e(null, h)
            } catch (j) {
                e(d.handleError(j, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["templates/dialogs/block_unblock_user_success.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += '\n\n<form class="standardForm">\n    <div class="body">\n      <p>\n          ';
                var i;
                i = a.getFilter("safe").call(b, "<strong>") + a.getFilter("escape").call(b, (f = 11, g = 51, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["name"]))) + a.getFilter("safe").call(b, "</strong>"), c.set("name", i, !0), c.parent || (b.setVariable("name", i), b.addExport("name")), h += "\n          ";
                var j;
                if (f = 12, g = 35, j = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["action"]), c.set("action", j, !0), c.parent || (b.setVariable("action", j), b.addExport("action")), h += "\n          ", "blocked" == d.contextOrFrameLookup(b, c, "action")) {
                    h += "\n              ";
                    var k = d.makeMacro([], [], function(e) {
                        c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                        var h, i = "";
                        return h = {
                            name: d.contextOrFrameLookup(b, c, "name")
                        }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 14, g = 15, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 14, g = 15, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["You've blocked {{ name }}"])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                    });
                    b.setVariable("_doTranslation", k), h += d.suppressValue((f = 14, g = 15, d.callWrap(k, "_doTranslation", [])), a.autoesc), h += "\n          "
                } else if ("unblocked" == d.contextOrFrameLookup(b, c, "action")) {
                    h += "\n              ";
                    var l = d.makeMacro([], [], function(e) {
                        c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                        var h, i = "";
                        return h = {
                            name: d.contextOrFrameLookup(b, c, "name")
                        }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 18, g = 15, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 18, g = 15, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["You've unblocked {{ name }}"])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                    });
                    b.setVariable("_doTranslation", l), h += d.suppressValue((f = 18, g = 15, d.callWrap(l, "_doTranslation", [])), a.autoesc), h += "\n          "
                }
                h += '\n      </p>\n    </div>\n    <div class="formFooter">\n        <div class="formFooterButtons">\n            ', h += d.suppressValue((f = 26, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        class_name: "confirm",
                        text: (f = 29, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["OK"])),
                        color: "primary"
                    }
                })])), a.autoesc), h += "\n        </div>\n    </div>\n</form>\n", e(null, h)
            } catch (m) {
                e(d.handleError(m, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["templates/dialogs/blocked_source.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += '<form class="standardForm">\n    <h1>', h += d.suppressValue((f = 1, g = 10, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Suspicious Link"])), a.autoesc), h += '</h1>\n    <div class="body">\n        <p>\n            ', h += d.suppressValue((f = 4, g = 14, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["We've blocked this source because it may be spam or other inappropriate content."])), a.autoesc), h += '\n            <a href="', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "settings"), "HELP_WHY_BLOCKED_FOR_INAPPROPRIATE_URL", a.autoesc), a.autoesc), h += '">\n                ', h += d.suppressValue((f = 6, g = 18, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["More Info"])), a.autoesc), h += '\n            </a>\n        </p>        \n    </div>\n    <div class="formFooter">\n        <div class="formFooterButtons">\n            ', h += d.suppressValue((f = 12, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        cancelButton: !0,
                        class_name: "primary",
                        text: (f = 16, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Back to Pinterest"]))
                    }
                })])), a.autoesc), h += "\n        </div>\n    </div>\n</form>", e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["templates/dialogs/change_password.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += '<form class="standardForm">\n    <h1>', h += d.suppressValue((f = 1, g = 10, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Please check your email"])), a.autoesc), h += '</h1>\n    <div class="body">\n        <p>\n            ', h += d.suppressValue((f = 4, g = 14, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["We'll send  instructions for changing your password in just a minute."])), a.autoesc), h += '\n        </p>\n    </div>\n    <div class="formFooter">\n        <div class="formFooterButtons">\n            ', h += d.suppressValue((f = 9, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        cancelButton: !0,
                        class_name: "primary",
                        text: (f = 13, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Okay"]))
                    }
                })])), a.autoesc), h += "\n        </div>\n    </div>\n</form>\n", e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["templates/dialogs/change_password_success.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += '<form class="standardForm">\n    <h1>', h += d.suppressValue((f = 1, g = 10, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Password Changed!"])), a.autoesc), h += '</h1>\n    <div class="body">\n        <p>\n            ', h += d.suppressValue((f = 4, g = 14, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Your password has been changed successfully."])), a.autoesc), h += '\n        </p>\n    </div>\n    <div class="formFooter">\n        <div class="formFooterButtons">\n            ', h += d.suppressValue((f = 9, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        class_name: "confirm",
                        color: "primary",
                        text: (f = 13, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Okay"]))
                    }
                })])), a.autoesc), h += "\n        </div>\n    </div>\n</form>\n", e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["templates/dialogs/change_pin_privacy.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += '<form class="standardForm">\n    <h1>', h += d.suppressValue((f = 1, g = 10, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Edit Pin"])), a.autoesc), h += '</h1>\n    <div class="body">\n        <p>', h += d.suppressValue((f = 3, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Remove this pin from your secret board? You can’t move it back later."])), a.autoesc), h += '</p>\n    </div>\n    <div class="formFooter">\n        <div class="formFooterButtons">\n            ', h += d.suppressValue((f = 7, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        cancelButton: !0,
                        text: (f = 10, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["No"]))
                    }
                })])), a.autoesc), h += "\n            ", h += d.suppressValue((f = 11, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        class_name: "confirm",
                        text: (f = 14, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Yes"])),
                        color: "primary"
                    }
                })])), a.autoesc), h += "\n        </div>\n    </div>\n</form>\n", e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["templates/dialogs/confirm_create_a_business.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += '<form class="standardForm">\n    <h1>', h += d.suppressValue((f = 1, g = 10, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Create a new business account"])), a.autoesc), h += '</h1>\n    <div class="body">\n        <p>\n            ';
                var i = d.makeMacro([], [], function(e) {
                    c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                    var h, i = "";
                    return h = {}, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 4, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 4, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["You'll need to log out of your current Pinterest account first. Log out now?"])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                });
                b.setVariable("_doTranslation", i), h += d.suppressValue((f = 4, g = 13, d.callWrap(i, "_doTranslation", [])), a.autoesc), h += '\n        </p>\n    </div>\n    <div class="formFooter">\n        <div class="formFooterButtons">\n            ', h += d.suppressValue((f = 11, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        class_name: "confirm cancelConvert",
                        text: (f = 14, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Cancel"]))
                    }
                })])), a.autoesc), h += "\n            ", h += d.suppressValue((f = 16, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        class_name: "confirm continueConvert",
                        color: "primary",
                        text: (f = 20, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Log out and Create"]))
                    }
                })])), a.autoesc), h += "\n        </div>\n    </div>\n</form>", e(null, h)
            } catch (j) {
                e(d.handleError(j, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["templates/dialogs/confirm_question_not_comment.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += '<form class="standardForm">\n    <h1>', h += d.suppressValue((f = 1, g = 10, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Trying to comment?"])), a.autoesc), h += '</h1>\n    <div class="body"><p>\n        ';
                var i = d.makeMacro([], [], function(e) {
                    c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                    var h, i = "";
                    return h = {}, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 3, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 3, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["This new space is for asking questions about a Pin. You can comment by tapping the comment icon below the Pin's description."])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                });
                b.setVariable("_doTranslation", i), h += d.suppressValue((f = 3, g = 9, d.callWrap(i, "_doTranslation", [])), a.autoesc), h += '\n    </p></div>\n    <div class="formFooter">\n        <div class="formFooterButtons">\n            ', h += d.suppressValue((f = 10, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        class_name: "confirm dialogAskQuestion",
                        text: (f = 13, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Ask anyway"]))
                    }
                })])), a.autoesc), h += "\n            ", h += d.suppressValue((f = 15, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        class_name: "confirm dialogPostComment",
                        text: (f = 18, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Comment"])),
                        color: "primary"
                    }
                })])), a.autoesc), h += "\n        </div>\n    </div>\n</form>\n", e(null, h)
            } catch (j) {
                e(d.handleError(j, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["templates/dialogs/deactivate_account_success.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += '\n\n<form class="standardForm">\n    <h1>', h += d.suppressValue((f = 8, g = 10, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Sorry to see you go!"])), a.autoesc), h += '</h1>\n    <div class="body">\n        <p>\n            ';
                var i = d.makeMacro([], [], function(e) {
                    c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                    var h, i = "";
                    return h = {
                        email: a.getFilter("safe").call(b, "<strong>") + (f = 11, g = 56, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["email"])) + a.getFilter("safe").call(b, "</strong>")
                    }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 11, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 11, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["You're welcome back any time―just log in with {{ email }} and your password."])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                });
                b.setVariable("_doTranslation", i), h += d.suppressValue((f = 11, g = 13, d.callWrap(i, "_doTranslation", [])), a.autoesc), h += '\n        </p>\n    </div>\n    <div class="formFooter">\n        <div class="formFooterButtons">\n            ', h += d.suppressValue((f = 19, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["NavigateButton", d.makeKeywordArgs({
                    options: {
                        text: (f = 21, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Okay"])),
                        url: "/"
                    }
                })])), a.autoesc), h += "\n        </div>\n    </div>\n</form>\n", e(null, h)
            } catch (j) {
                e(d.handleError(j, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["templates/dialogs/delete_account_confirm.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n";
                var i;
                if (f = 7, g = 29, i = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["is_partner"]), c.set("is_partner", i, !0), c.parent || (b.setVariable("is_partner", i), b.addExport("is_partner")), h += '\n\n<form class="standardForm">\n    <h1>', h += d.suppressValue((f = 10, g = 10, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Sorry to see you go!"])), a.autoesc), h += '</h1>\n    <div class="body">\n        ', d.contextOrFrameLookup(b, c, "is_partner")) {
                    h += "\n            <p>\n                ";
                    var j = d.makeMacro([], [], function(e) {
                        c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                        var h, i = "";
                        return h = {}, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 14, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 14, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Looks like you're a business account. To complete your request, contact our Help Center."])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                    });
                    b.setVariable("_doTranslation", j), h += d.suppressValue((f = 14, g = 17, d.callWrap(j, "_doTranslation", [])), a.autoesc), h += "\n            </p>\n        "
                } else {
                    h += "\n            <p>\n                ";
                    var k = d.makeMacro([], [], function(e) {
                        c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                        var h, i = "";
                        return h = {}, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 20, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 20, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Closing your account means you won't be able to get your Pins or boards back."])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                    });
                    b.setVariable("_doTranslation", k), h += d.suppressValue((f = 20, g = 17, d.callWrap(k, "_doTranslation", [])), a.autoesc), h += "\n            </p>\n            <p>\n                ";
                    var l = d.makeMacro([], [], function(e) {
                        c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                        var h, i = "";
                        return h = {
                            email: a.getFilter("safe").call(b, "<strong>") + (f = 25, g = 60, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["email"])) + a.getFilter("safe").call(b, "</strong>")
                        }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 25, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 25, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["If you're ready to leave forever, we'll send you a confirmation email at {{ email }}."])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                    });
                    b.setVariable("_doTranslation", l), h += d.suppressValue((f = 25, g = 17, d.callWrap(l, "_doTranslation", [])), a.autoesc), h += "\n            </p>\n        "
                }
                h += '\n    </div>\n    <div class="formFooter">\n        <div class="formFooterButtons">\n            ', h += d.suppressValue((f = 33, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        cancelButton: !0,
                        text: (f = 36, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Nevermind"]))
                    }
                })])), a.autoesc), h += "\n\n            ", d.contextOrFrameLookup(b, c, "is_partner") ? (h += "\n                ", h += d.suppressValue((f = 40, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["NavigateButton", d.makeKeywordArgs({
                    options: {
                        text: (f = 42, g = 33, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Go to the Help Center"])),
                        color: "primary",
                        url: d.memberLookup(d.contextOrFrameLookup(b, c, "settings"), "HELP_CENTER_URL", a.autoesc)
                    }
                })])), a.autoesc), h += "\n            ") : (h += "\n                ", h += d.suppressValue((f = 47, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        text: (f = 49, g = 33, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Yes, send the email"])),
                        color: "primary",
                        type: "submit"
                    }
                })])), a.autoesc), h += "\n            "), h += "\n        </div>\n    </div>\n</form>", e(null, h)
            } catch (m) {
                e(d.handleError(m, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["templates/dialogs/delete_account_success.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += '<form class="standardForm">\n    <h1>', h += d.suppressValue((f = 1, g = 10, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Check your inbox"])), a.autoesc), h += '</h1>\n    <div class="body">\n        <p>\n            ';
                var i = d.makeMacro([], [], function(e) {
                    c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                    var h, i = "";
                    return h = {}, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 4, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 4, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["To finish closing your account, check your inbox for the confirmation email we just sent you."])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                });
                b.setVariable("_doTranslation", i), h += d.suppressValue((f = 4, g = 13, d.callWrap(i, "_doTranslation", [])), a.autoesc), h += '\n        </p>\n    </div>\n    <div class="formFooter">\n        <div class="formFooterButtons">\n            ', h += d.suppressValue((f = 11, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["NavigateButton", d.makeKeywordArgs({
                    options: {
                        text: (f = 13, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Okay"])),
                        url: "/"
                    }
                })])), a.autoesc), h += "\n        </div>\n    </div>\n</form>\n", e(null, h)
            } catch (j) {
                e(d.handleError(j, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["templates/dialogs/delete_answer.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += '<form class="standardForm">\n    <h1>', h += d.suppressValue((f = 1, g = 10, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Delete Answer"])), a.autoesc), h += '</h1>\n    <div class="body">\n        <p>', h += d.suppressValue((f = 3, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Are you sure you want to delete this answer?"])), a.autoesc), h += '</p>\n    </div>\n    <div class="formFooter">\n        <div class="formFooterButtons">\n            ', h += d.suppressValue((f = 7, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        cancelButton: !0,
                        text: (f = 10, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Cancel"]))
                    }
                })])), a.autoesc), h += "\n            ", h += d.suppressValue((f = 11, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        class_name: "confirm",
                        text: (f = 14, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Delete Answer"])),
                        color: "primary"
                    }
                })])), a.autoesc), h += "\n        </div>\n    </div>\n</form>\n", e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["templates/dialogs/delete_board.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += '<form class="standardForm">\n    <h1>', h += d.suppressValue((f = 1, g = 10, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Delete this board?"])), a.autoesc), h += '</h1>\n    <div class="body">\n        <p>', h += d.suppressValue((f = 3, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Are you sure you want to permanently delete this board?"])), a.autoesc), h += '</p>\n    </div>\n    <div class="formFooter">\n        <div class="formFooterButtons">\n            ', h += d.suppressValue((f = 7, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        ga_category: "board_delete",
                        cancelButton: !0,
                        text: (f = 11, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Cancel"]))
                    }
                })])), a.autoesc), h += "\n            ", h += d.suppressValue((f = 12, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        class_name: "confirm",
                        text: (f = 15, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Delete board"])),
                        color: "primary"
                    }
                })])), a.autoesc), h += "\n        </div>\n    </div>\n</form>\n", e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["templates/dialogs/delete_board_invite.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n";
                var i;
                f = 9, g = 47, i = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["current_user_is_invited_user"]), c.set("current_user_is_invited_user", i, !0), c.parent || (b.setVariable("current_user_is_invited_user", i), b.addExport("current_user_is_invited_user")), h += "\n";
                var j;
                f = 10, g = 42, j = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["invited_user_first_name"]), c.set("invited_user_first_name", j, !0), c.parent || (b.setVariable("invited_user_first_name", j), b.addExport("invited_user_first_name")), h += "\n";
                var k;
                if (f = 11, g = 41, k = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["invited_user_full_name"]), c.set("invited_user_full_name", k, !0), c.parent || (b.setVariable("invited_user_full_name", k), b.addExport("invited_user_full_name")), h += '\n<form class="standardForm" method="post">\n    <h1>\n        ', d.contextOrFrameLookup(b, c, "current_user_is_invited_user"))
                    h += "\n            ", h += d.suppressValue((f = 15, g = 14, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Leave board?"])), a.autoesc), h += "\n        ";
                else {
                    h += "\n            ";
                    var l;
                    l = a.getFilter("named_format").call(b, (f = 17, g = 26, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Remove {{ invited_user_name }}?"])), {
                        invited_user_name: d.contextOrFrameLookup(b, c, "invited_user_full_name")
                    }), c.set("title", l, !0), c.parent || (b.setVariable("title", l), b.addExport("title")), h += "\n            ", h += d.suppressValue(d.contextOrFrameLookup(b, c, "title"), a.autoesc), h += "\n        "
                }
                if (h += '\n    </h1>\n    <div class="body">\n        <p>\n            ', d.contextOrFrameLookup(b, c, "current_user_is_invited_user")) {
                    h += "\n                ";
                    var m = d.makeMacro([], [], function(e) {
                        c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                        var h, i = "";
                        return h = {}, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 24, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 24, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Are you sure you want to leave this group board and remove it from your profile?"])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                    });
                    b.setVariable("_doTranslation", m), h += d.suppressValue((f = 24, g = 17, d.callWrap(m, "_doTranslation", [])), a.autoesc), h += "\n            "
                } else {
                    h += "\n                ";
                    var n = d.makeMacro([], [], function(e) {
                        c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                        var h, i = "";
                        return h = {}, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 28, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 28, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["This will keep them from pinning to this board. You can also:"])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                    });
                    b.setVariable("_doTranslation", n), h += d.suppressValue((f = 28, g = 17, d.callWrap(n, "_doTranslation", [])), a.autoesc), h += "\n            "
                }
                if (h += "\n        </p>\n\n        ", !d.contextOrFrameLookup(b, c, "current_user_is_invited_user")) {
                    h += '\n            <div class="banUserWrapper">\n                <label>\n                    ', h += d.suppressValue((f = 37, g = 27, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["ui.Checkbox", d.makeKeywordArgs({
                        options: {
                            name: "ban"
                        }
                    })])), a.autoesc), h += '\n                    <span class="ban">\n                        ';
                    var o;
                    o = a.getFilter("named_format").call(b, (f = 42, g = 38, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Block {{ name }}"])), {
                        name: d.contextOrFrameLookup(b, c, "invited_user_first_name")
                    }), c.set("label", o, !0), c.parent || (b.setVariable("label", o), b.addExport("label")), h += "\n                        ", h += d.suppressValue(d.contextOrFrameLookup(b, c, "label"), a.autoesc), h += '\n                    </span>\n                </label>\n                <p class="helpText">\n                    ';
                    var p = d.makeMacro([], [], function(e) {
                        c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                        var h, i = "";
                        return h = {
                            invited_user_first_name: d.contextOrFrameLookup(b, c, "invited_user_first_name")
                        }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 47, g = 21, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 47, g = 21, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["This will remove {{ invited_user_first_name }}, people {{ invited_user_first_name }} invited, and all their pins."])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                    });
                    b.setVariable("_doTranslation", p), h += d.suppressValue((f = 47, g = 21, d.callWrap(p, "_doTranslation", [])), a.autoesc), h += "\n                </p>\n            </div>\n        "
                }
                h += '\n    </div>\n    <div class="formFooter">\n        <div class="formFooterButtons">\n            ', h += d.suppressValue((f = 57, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        cancelButton: !0,
                        text: (f = 60, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Cancel"]))
                    }
                })])), a.autoesc), h += "\n            ";
                var q;
                q = d.contextOrFrameLookup(b, c, "current_user_is_invited_user") ? (f = 62, g = 40, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Leave"])) : (f = 62, g = 88, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Remove Pinner"])), c.set("confirm_button_text", q, !0), c.parent || (b.setVariable("confirm_button_text", q), b.addExport("confirm_button_text")), h += "\n            ", h += d.suppressValue((f = 63, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        text: d.contextOrFrameLookup(b, c, "confirm_button_text"),
                        type: "submit",
                        color: "primary"
                    }
                })])), a.autoesc), h += "\n        </div>\n    </div>\n</form>\n", e(null, h)
            } catch (r) {
                e(d.handleError(r, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["templates/dialogs/delete_comment.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += '<form class="standardForm">\n    <h1>', h += d.suppressValue((f = 1, g = 10, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Delete this comment?"])), a.autoesc), h += '</h1>\n    <div class="body">\n        <p>', h += d.suppressValue((f = 3, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["You won't be able to undo this."])), a.autoesc), h += '</p>\n    </div>\n    <div class="formFooter">\n        <div class="formFooterButtons">\n            ', h += d.suppressValue((f = 7, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        cancelButton: !0,
                        text: (f = 10, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Don't delete"]))
                    }
                })])), a.autoesc), h += "\n            ", h += d.suppressValue((f = 11, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        class_name: "confirm",
                        text: (f = 14, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Delete Comment"])),
                        color: "primary"
                    }
                })])), a.autoesc), h += "\n        </div>\n    </div>\n</form>\n", e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["templates/dialogs/delete_pin.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += '<form class="standardForm">\n    <h1>', h += d.suppressValue((f = 1, g = 10, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Delete Pin"])), a.autoesc), h += '</h1>\n    <div class="body">\n        <p>', h += d.suppressValue((f = 3, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Are you sure you want to permanently delete this Pin?"])), a.autoesc), h += '</p>\n    </div>\n    <div class="formFooter">\n        <div class="formFooterButtons">\n            ', h += d.suppressValue((f = 7, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        ga_category: "pin_delete",
                        cancelButton: !0,
                        text: (f = 11, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Cancel"]))
                    }
                })])), a.autoesc), h += "\n            ", h += d.suppressValue((f = 12, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        class_name: "confirm",
                        text: (f = 15, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Delete Pin"])),
                        color: "primary"
                    }
                })])), a.autoesc), h += "\n        </div>\n    </div>\n</form>", e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["templates/dialogs/delete_question.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += '<form class="standardForm">\n    <h1>', h += d.suppressValue((f = 1, g = 10, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Delete Question"])), a.autoesc), h += '</h1>\n    <div class="body">\n        <p>', h += d.suppressValue((f = 3, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Are you sure you want to delete this question?"])), a.autoesc), h += '</p>\n    </div>\n    <div class="formFooter">\n        <div class="formFooterButtons">\n            ', h += d.suppressValue((f = 7, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        cancelButton: !0,
                        text: (f = 10, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Cancel"]))
                    }
                })])), a.autoesc), h += "\n            ", h += d.suppressValue((f = 11, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        class_name: "confirm",
                        text: (f = 14, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Delete Question"])),
                        color: "primary"
                    }
                })])), a.autoesc), h += "\n        </div>\n    </div>\n</form>\n", e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["templates/dialogs/delete_reply.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += '<form class="standardForm">\n    <h1>', h += d.suppressValue((f = 1, g = 10, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Delete Reply"])), a.autoesc), h += '</h1>\n    <div class="body">\n        <p>', h += d.suppressValue((f = 3, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Are you sure you want to delete this reply?"])), a.autoesc), h += '</p>\n    </div>\n    <div class="formFooter">\n        <div class="formFooterButtons">\n            ', h += d.suppressValue((f = 7, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        cancelButton: !0,
                        text: (f = 10, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Cancel"]))
                    }
                })])), a.autoesc), h += "\n            ", h += d.suppressValue((f = 11, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        class_name: "confirm",
                        text: (f = 14, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Delete Reply"])),
                        color: "primary"
                    }
                })])), a.autoesc), h += "\n        </div>\n    </div>\n</form>\n", e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["templates/dialogs/deleted_board_redirect.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += '\n\n<form class="standardForm">\n    <h1>', h += d.suppressValue((f = 8, g = 10, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["We couldn't find that page"])), a.autoesc), h += '</h1>\n    <div class="body">\n        <p>\n            ';
                var i = d.makeMacro([], [], function(e) {
                    c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                    var h, i = "";
                    return h = {
                        user_name: (f = 11, g = 42, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["user_name"]))
                    }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 11, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 11, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["But here are some of <b>{{ user_name }}</b>'s other boards!"])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                });
                b.setVariable("_doTranslation", i), h += d.suppressValue((f = 11, g = 13, d.callWrap(i, "_doTranslation", [])), a.autoesc), h += '\n        </p>\n    </div>\n    <div class="formFooter">\n        <div class="formFooterButtons">\n            ', h += d.suppressValue((f = 18, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        class_name: "confirm",
                        text: (f = 21, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Okay"])),
                        color: "primary"
                    }
                })])), a.autoesc), h += "\n        </div>\n    </div>\n</form>\n", e(null, h)
            } catch (j) {
                e(d.handleError(j, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["templates/dialogs/disable_emails_confirm.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += '<form class="standardForm">\n    <h1>', h += d.suppressValue((f = 1, g = 10, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Turn off all email notifications?"])), a.autoesc), h += '</h1>\n    <div class="body">\n        <p>\n            ';
                var i = d.makeMacro([], [], function(e) {
                    c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                    var h, i = "";
                    return h = {}, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 4, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 4, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["We'll still send you occasional emails about important legal and privacy stuff."])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                });
                b.setVariable("_doTranslation", i), h += d.suppressValue((f = 4, g = 13, d.callWrap(i, "_doTranslation", [])), a.autoesc), h += '\n        </p>\n    </div>\n    <div class="formFooter">\n        <div class="formFooterButtons">\n            ', h += d.suppressValue((f = 11, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        cancelButton: !0,
                        text: (f = 14, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Cancel"]))
                    }
                })])), a.autoesc), h += "\n            ", h += d.suppressValue((f = 17, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        class_name: "confirm",
                        text: (f = 20, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Turn Off Emails"])),
                        color: "primary"
                    }
                })])), a.autoesc), h += "\n        </div>\n    </div>\n</form>\n", e(null, h)
            } catch (j) {
                e(d.handleError(j, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["templates/dialogs/do_not_know_answer.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += '<form class="standardForm">\n    <h1>', h += d.suppressValue((f = 1, g = 10, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Not sure about the answer?"])), a.autoesc), h += '</h1>\n    <div class="body"><p>\n        ';
                var i = d.makeMacro([], [], function(e) {
                    c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                    var h, i = "";
                    return h = {}, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 3, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 3, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["You do not have to answer this question."])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                });
                b.setVariable("_doTranslation", i), h += d.suppressValue((f = 3, g = 9, d.callWrap(i, "_doTranslation", [])), a.autoesc), h += '\n    </p></div>\n    <div class="formFooter">\n        <div class="formFooterButtons">\n            ', h += d.suppressValue((f = 9, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        class_name: "confirm dialogSkipQuestion",
                        text: (f = 12, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Skip this question"])),
                        color: "primary"
                    }
                })])), a.autoesc), h += "\n            ", h += d.suppressValue((f = 15, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        class_name: "confirm dialogPostAnswer",
                        text: (f = 18, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Answer"]))
                    }
                })])), a.autoesc), h += "\n        </div>\n    </div>\n</form>\n", e(null, h)
            } catch (j) {
                e(d.handleError(j, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["templates/dialogs/duplicate_question.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += '<form class="standardForm">\n    <h1>', h += d.suppressValue((f = 1, g = 10, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Great minds!"])), a.autoesc), h += '</h1>\n    <div class="body">\n        <p>', h += d.suppressValue((f = 3, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Someone already asked this question. Want to see it?"])), a.autoesc), h += '</p>\n    </div>\n    <div class="formFooter">\n        <div class="formFooterButtons">\n            ', h += d.suppressValue((f = 7, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        cancelButton: !0,
                        text: (f = 10, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Cancel"]))
                    }
                })])), a.autoesc), h += "\n            ", h += d.suppressValue((f = 12, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        class_name: "confirm",
                        text: (f = 15, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["See Question"])),
                        color: "primary"
                    }
                })])), a.autoesc), h += "\n        </div>\n    </div>\n</form>\n", e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["templates/dialogs/email_pin.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += '\n\n<form class="standardForm">\n    <h1>', h += d.suppressValue((f = 8, g = 10, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Pin Emailed"])), a.autoesc), h += '</h1>\n    <div class="body">\n        <p>\n            ';
                var i = d.makeMacro([], [], function(e) {
                    c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                    var h, i = "";
                    return h = {
                        name: (f = 11, g = 35, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["recipient_name"]))
                    }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 11, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 11, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["The pin has been emailed to {{ name }}."])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                });
                b.setVariable("_doTranslation", i), h += d.suppressValue((f = 11, g = 13, d.callWrap(i, "_doTranslation", [])), a.autoesc), h += '\n        </p>\n    </div>\n    <div class="formFooter">\n        <div class="formFooterButtons">\n            ', h += d.suppressValue((f = 18, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        class_name: "confirm",
                        text: (f = 21, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Continue"])),
                        color: "primary"
                    }
                })])), a.autoesc), h += "\n        </div>\n    </div>\n</form>\n", e(null, h)
            } catch (j) {
                e(d.handleError(j, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["templates/dialogs/flag_pin.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += '<form class="standardForm">\n    <h1>', h += d.suppressValue((f = 1, g = 10, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Thanks for your report!"])), a.autoesc), h += '</h1>\n    <div class="body">\n        <p>\n            ';
                var i = d.makeMacro([], [], function(e) {
                    c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                    var h, i = "";
                    return h = {
                        terms_url: d.memberLookup(d.contextOrFrameLookup(b, c, "settings"), "ABOUT_TERMS_URL", a.autoesc)
                    }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 4, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 4, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ['We’ll take a look at this Pin and delete it if it goes against our <a href="{{ terms_url }}">Terms of Service</a>.'])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                });
                b.setVariable("_doTranslation", i), h += d.suppressValue((f = 4, g = 13, d.callWrap(i, "_doTranslation", [])), a.autoesc), h += '\n        </p>\n    </div>\n    <div class="formFooter">\n        <div class="formFooterButtons">\n            ', h += d.suppressValue((f = 12, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        class_name: "confirm",
                        text: (f = 15, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Okay"])),
                        color: "primary"
                    }
                })])), a.autoesc), h += "\n        </div>\n    </div>\n</form>\n", e(null, h)
            } catch (j) {
                e(d.handleError(j, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["templates/dialogs/flag_user_success.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += '<form class="standardForm">\n    <h1>', h += d.suppressValue((f = 1, g = 10, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Report received!"])), a.autoesc), h += '</h1>\n    <div class="body">\n        <p>\n            ';
                var i = d.makeMacro([], [], function(e) {
                    c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                    var h, i = "";
                    return h = {
                        settings_url: d.memberLookup(d.contextOrFrameLookup(b, c, "settings"), "ABOUT_TERMS_URL", a.autoesc)
                    }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 4, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 4, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ['We\'ll review it and take action on anything that goes against our <a href="{{ settings_url }}">Terms of Service</a>. Thank you.'])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                });
                b.setVariable("_doTranslation", i), h += d.suppressValue((f = 4, g = 13, d.callWrap(i, "_doTranslation", [])), a.autoesc), h += '\n        </p>\n    </div>\n    <div class="formFooter">\n        <div class="formFooterButtons">\n            ', h += d.suppressValue((f = 12, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        class_name: "confirm",
                        text: (f = 15, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["OK"])),
                        color: "primary"
                    }
                })])), a.autoesc), h += "\n        </div>\n    </div>\n</form>\n", e(null, h)
            } catch (j) {
                e(d.handleError(j, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["templates/dialogs/generic.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n";
                var i;
                f = 10, g = 30, i = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["button_text"]), c.set("button_text", i, !0), c.parent || (b.setVariable("button_text", i), b.addExport("button_text")), h += "\n";
                var j;
                f = 11, g = 38, j = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["dismiss_button_text"]), c.set("dismiss_button_text", j, !0), c.parent || (b.setVariable("dismiss_button_text", j), b.addExport("dismiss_button_text")), h += "\n";
                var k;
                f = 12, g = 31, k = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["body_message"]), c.set("body_message", k, !0), c.parent || (b.setVariable("body_message", k), b.addExport("body_message")), h += "\n";
                var l;
                f = 13, g = 24, l = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["title"]), c.set("title", l, !0), c.parent || (b.setVariable("title", l), b.addExport("title")), h += '\n\n<form class="standardForm">\n    <h1>', h += d.suppressValue(d.contextOrFrameLookup(b, c, "title"), a.autoesc), h += '</h1>\n    <div class="body">\n        <p>', h += d.suppressValue(d.contextOrFrameLookup(b, c, "body_message"), a.autoesc), h += '</p>\n    </div>\n    <div class="formFooter">\n        <div class="formFooterButtons">\n            ', d.contextOrFrameLookup(b, c, "dismiss_button_text") ? (h += "\n                ", h += d.suppressValue((f = 23, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        class_name: "confirm",
                        text: d.contextOrFrameLookup(b, c, "button_text")
                    }
                })])), a.autoesc), h += "\n                ", h += d.suppressValue((f = 28, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        cancelButton: !0,
                        color: "primary",
                        text: d.contextOrFrameLookup(b, c, "dismiss_button_text")
                    }
                })])), a.autoesc), h += "\n            ") : (h += "\n                ", h += d.suppressValue((f = 35, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        class_name: "confirm",
                        color: "primary",
                        text: d.contextOrFrameLookup(b, c, "button_text")
                    }
                })])), a.autoesc), h += "\n            "), h += "\n        </div>\n    </div>\n</form>\n", e(null, h)
            } catch (m) {
                e(d.handleError(m, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["templates/dialogs/language_confirmation.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += '\n\n<form class="standardForm">\n    <h1>', h += d.suppressValue((f = 8, g = 10, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Great!"])), a.autoesc), h += '</h1>\n    <div class="body">\n        <p>\n            ';
                var i = d.makeMacro([], [], function(e) {
                    c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                    var h, i = "";
                    return h = {
                        language_name: (f = 11, g = 44, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["language_name"]))
                    }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 11, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 11, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ['You’ve switched to {{ language_name }}! If you ever want to switch back, visit your <a href="/settings/">account settings</a>.'])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                });
                b.setVariable("_doTranslation", i), h += d.suppressValue((f = 11, g = 13, d.callWrap(i, "_doTranslation", [])), a.autoesc), h += '\n       </p>\n    </div>\n    <div class="formFooter">\n        <div class="formFooterButtons">\n            ', h += d.suppressValue((f = 19, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        class_name: "confirm",
                        text: (f = 22, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Ok"])),
                        color: "primary"
                    }
                })])), a.autoesc), h += "\n        </div>\n    </div>\n</form>\n", e(null, h)
            } catch (j) {
                e(d.handleError(j, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["templates/dialogs/language_unchanged.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += '\n\n<form class="standardForm">\n    <h1>', h += d.suppressValue((f = 8, g = 10, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Got it!"])), a.autoesc), h += '</h1>\n    <div class="body">\n        <p>\n            ';
                var i = d.makeMacro([], [], function(e) {
                    c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                    var h, i = "";
                    return h = {
                        language_name: (f = 11, g = 44, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["language_name"]))
                    }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 11, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 11, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ['If you want to switch your language in the future, visit your <a href="/settings/">account settings</a>.'])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                });
                b.setVariable("_doTranslation", i), h += d.suppressValue((f = 11, g = 13, d.callWrap(i, "_doTranslation", [])), a.autoesc), h += '\n       </p>\n    </div>\n    <div class="formFooter">\n        <div class="formFooterButtons">\n            ', h += d.suppressValue((f = 19, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        class_name: "confirm",
                        text: (f = 22, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Close"])),
                        color: "primary"
                    }
                })])), a.autoesc), h += "\n        </div>\n    </div>\n</form>\n", e(null, h)
            } catch (j) {
                e(d.handleError(j, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["templates/dialogs/make_public.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += '<form class="standardForm">\n    <h1>', h += d.suppressValue((f = 1, g = 10, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Are you sure?"])), a.autoesc), h += '</h1>\n    <div class="body">\n        <p>\n            ';
                var i = d.makeMacro([], [], function(e) {
                    c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                    var h, i = "";
                    return h = {}, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 4, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 4, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["You're about to permanently make this board visible to everyone. You can't make it secret again later. Do you want to continue?"])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                });
                b.setVariable("_doTranslation", i), h += d.suppressValue((f = 4, g = 13, d.callWrap(i, "_doTranslation", [])), a.autoesc), h += '\n        </p>\n    </div>\n    <div class="formFooter">\n        <div class="formFooterButtons">\n            ', h += d.suppressValue((f = 12, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        cancelButton: !0,
                        text: (f = 15, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Cancel"]))
                    }
                })])), a.autoesc), h += "\n            ", h += d.suppressValue((f = 16, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        class_name: "confirm",
                        text: (f = 19, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Continue"])),
                        color: "primary"
                    }
                })])), a.autoesc), h += "\n          </div>\n    </div>\n</form>\n", e(null, h)
            } catch (j) {
                e(d.handleError(j, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["templates/dialogs/message_object_auth_error.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n";
                var i;
                if (f = 8, g = 25, i = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["attached_object"]), c.set("object", i, !0), c.parent || (b.setVariable("object", i), b.addExport("object")), h += '\n\n<form class="standardForm messageError">\n    ', "pin" == d.memberLookup(d.contextOrFrameLookup(b, c, "object"), "type", a.autoesc)) {
                    h += "\n        ";
                    var j;
                    j = d.memberLookup(d.contextOrFrameLookup(b, c, "object"), "board", a.autoesc), c.set("board", j, !0), c.parent || (b.setVariable("board", j), b.addExport("board")), h += "\n        <h1>", h += d.suppressValue((f = 13, g = 14, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Sorry! We couldn't send your Pin"])), a.autoesc), h += '</h1>\n        <div class="body">\n        <p>\n            ';
                    var k = d.makeMacro([], [], function(e) {
                        c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                        var h, i = "";
                        return h = {
                            board_url: d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "url", a.autoesc),
                            board_name: d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "name", a.autoesc)
                        }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 16, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 16, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ['Invite these people to your secret board <a href="{{ board_url }}">{{ board_name }}</a> so you can send this Pin.'])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                    });
                    b.setVariable("_doTranslation", k), h += d.suppressValue((f = 16, g = 13, d.callWrap(k, "_doTranslation", [])), a.autoesc), h += "\n        </p>\n    "
                } else if ("board" == d.memberLookup(d.contextOrFrameLookup(b, c, "object"), "type", a.autoesc)) {
                    h += "\n        ";
                    var l;
                    l = d.contextOrFrameLookup(b, c, "object"), c.set("board", l, !0), c.parent || (b.setVariable("board", l), b.addExport("board")), h += "\n        <h1>", h += d.suppressValue((f = 23, g = 14, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Sorry! We couldn't send your board"])), a.autoesc), h += '</h1>\n        <div class="body">\n        <p>\n            ';
                    var m = d.makeMacro([], [], function(e) {
                        c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                        var h, i = "";
                        return h = {
                            board_url: d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "url", a.autoesc),
                            board_name: d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "name", a.autoesc)
                        }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 26, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 26, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ['Invite these people to your secret board <a href="{{ board_url }}">{{ board_name }}</a> so you can send this board.'])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                    });
                    b.setVariable("_doTranslation", m), h += d.suppressValue((f = 26, g = 13, d.callWrap(m, "_doTranslation", [])), a.autoesc), h += "\n        </p>\n    "
                }
                h += "\n\n        <ul>\n            ", c = c.push();
                var n = (f = 34, g = 36, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["users", []]));
                if (n)
                    for (var o = n.length, p = 0; p < n.length; p++) {
                        var q = n[p];
                        c.set("user", q), c.set("loop.index", p + 1), c.set("loop.index0", p), c.set("loop.revindex", o - p), c.set("loop.revindex0", o - p - 1), c.set("loop.first", 0 === p), c.set("loop.last", p === o - 1), c.set("loop.length", o), h += '\n                <li><a href="/', h += d.suppressValue(d.memberLookup(q, "username", a.autoesc), a.autoesc), h += '/">', h += d.suppressValue(d.memberLookup(q, "full_name", a.autoesc), a.autoesc), h += "</a></li>\n            "
                    }
                c = c.pop(), h += "\n            ", c = c.push();
                var r = (f = 37, g = 37, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["emails", []]));
                if (r)
                    for (var s = r.length, t = 0; t < r.length; t++) {
                        var u = r[t];
                        c.set("email", u), c.set("loop.index", t + 1), c.set("loop.index0", t), c.set("loop.revindex", s - t), c.set("loop.revindex0", s - t - 1), c.set("loop.first", 0 === t), c.set("loop.last", t === s - 1), c.set("loop.length", s), h += "\n                <li>", h += d.suppressValue(u, a.autoesc), h += "</li>\n            "
                    }
                c = c.pop(), h += '\n        </ul>\n    </div>\n    <div class="formFooter">\n        <div class="formFooterButtons">\n            ', h += d.suppressValue((f = 44, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        color: "primary",
                        text: (f = 46, g = 25, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Got it"])),
                        class_name: "confirm"
                    }
                })])), a.autoesc), h += "\n        </div>\n    </div>\n</form>\n", e(null, h)
            } catch (v) {
                e(d.handleError(v, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["templates/dialogs/new_user_ready.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += '<form class="standardForm">\n    <h1>', h += d.suppressValue((f = 1, g = 10, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Thanks for taking the tour!"])), a.autoesc), h += '</h1>\n    <div class="body">\n        <p>\n            ';
                var i = d.makeMacro([], [], function(e) {
                    c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                    var h, i = "";
                    return h = {}, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 4, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 4, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Looks like you're ready to head out on your own."])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                });
                b.setVariable("_doTranslation", i), h += d.suppressValue((f = 4, g = 13, d.callWrap(i, "_doTranslation", [])), a.autoesc), h += '\n        </p>\n    </div>\n    <div class="formFooter">\n        <div class="formFooterButtons">\n            ', h += d.suppressValue((f = 11, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        class_name: "confirm",
                        text: (f = 14, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Dive In"])),
                        color: "primary"
                    }
                })])), a.autoesc), h += "\n        </div>\n    </div>\n</form>\n", e(null, h)
            } catch (j) {
                e(d.handleError(j, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["templates/dialogs/offsite_warning.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n";
                var i;
                if (i = d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "redirect_status", a.autoesc), c.set("redirect_status", i, !0), c.parent || (b.setVariable("redirect_status", i), b.addExport("redirect_status")), h += '\n\n<form class="standardForm">\n    <h1>', "suspicious" == d.contextOrFrameLookup(b, c, "redirect_status") ? (h += "\n            ", h += d.suppressValue((f = 11, g = 14, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Suspicious link"])), a.autoesc), h += "\n        ") : "blocked" == d.contextOrFrameLookup(b, c, "redirect_status") && (h += "\n            ", h += d.suppressValue((f = 13, g = 14, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Blocked Link"])), a.autoesc), h += "\n        "), h += '\n    </h1>\n    <div class="body">\n        ', "suspicious" == d.contextOrFrameLookup(b, c, "redirect_status")) {
                    h += "\n            <p>\n                ";
                    var j = d.makeMacro([], [], function(e) {
                        c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                        var h, i = "";
                        return h = {}, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 19, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 19, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["We're not sure, but it could take you to a spammy or unseemly website."])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                    });
                    b.setVariable("_doTranslation", j), h += d.suppressValue((f = 19, g = 17, d.callWrap(j, "_doTranslation", [])), a.autoesc), h += '\n                <a href="', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "settings"), "HELP_WHY_BLOCKED_FOR_INAPPROPRIATE_URL", a.autoesc), a.autoesc), h += '">\n                    ', h += d.suppressValue((f = 23, g = 22, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Learn more."])), a.autoesc), h += "\n                </a>\n            </p>\n        "
                } else if ("blocked" == d.contextOrFrameLookup(b, c, "redirect_status")) {
                    h += "\n            <p>\n                ";
                    var k = d.makeMacro([], [], function(e) {
                        c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                        var h, i = "";
                        return h = {}, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 28, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 28, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Sorry, we've blocked this link because it may lead to spam, nudity or other inappropriate stuff."])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                    });
                    b.setVariable("_doTranslation", k), h += d.suppressValue((f = 28, g = 17, d.callWrap(k, "_doTranslation", [])), a.autoesc), h += '\n                <a href="', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "settings"), "HELP_WHY_BLOCKED_FOR_INAPPROPRIATE_URL", a.autoesc), a.autoesc), h += '">\n                    ', h += d.suppressValue((f = 33, g = 22, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Learn more."])), a.autoesc), h += "\n                </a>\n            </p>\n        "
                }
                h += '\n    </div>\n    <div class="formFooter">\n        <div class="formFooterButtons">\n            ', "suspicious" == d.contextOrFrameLookup(b, c, "redirect_status") && (h += "\n                ", h += d.suppressValue((f = 41, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        class_name: "confirm",
                        text: (f = 44, g = 33, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Keep Going"]))
                    }
                })])), a.autoesc), h += "\n            "), h += "\n            ", h += d.suppressValue((f = 47, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        cancelButton: !0,
                        class_name: "primary",
                        text: (f = 51, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Go Back"]))
                    }
                })])), a.autoesc), h += "\n        </div>\n    </div>\n</form>", e(null, h)
            } catch (l) {
                e(d.handleError(l, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["templates/dialogs/password_reset_email_sent.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += '\n\n<form class="standardForm">\n    <h1>\n        ';
                var i = d.makeMacro([], [], function(e) {
                    c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                    var h, i = "";
                    return h = {
                        email: (f = 9, g = 32, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["email"]))
                    }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 9, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 9, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Email sent to {{ email }}"])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                });
                b.setVariable("_doTranslation", i), h += d.suppressValue((f = 9, g = 9, d.callWrap(i, "_doTranslation", [])), a.autoesc), h += '\n    </h1>\n    <div class="body">\n        <p>\n            ';
                var j = d.makeMacro([], [], function(e) {
                    c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                    var h, i = "";
                    return h = {
                        help_center_link: d.memberLookup(d.contextOrFrameLookup(b, c, "settings"), "HELP_PASSWORD_RESET_URL", a.autoesc)
                    }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 15, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 15, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ['Check your inbox for instructions on how to reset your password.<br><br> Didn\'t get the email? Try these <a href="{{ help_center_link }}">tips from our Help Center</a>.'])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                });
                b.setVariable("_doTranslation", j), h += d.suppressValue((f = 15, g = 13, d.callWrap(j, "_doTranslation", [])), a.autoesc), h += '\n        </p>\n    </div>\n    <div class="formFooter">\n        <div class="formFooterButtons">\n            ', h += d.suppressValue((f = 24, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        class_name: "confirm",
                        color: "primary",
                        text: (f = 28, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Okay"]))
                    }
                })])), a.autoesc), h += "\n        </div>\n    </div>\n</form>", e(null, h)
            } catch (k) {
                e(d.handleError(k, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["templates/dialogs/pin_policy.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += '<form class="standardForm">\n    <h1>', h += d.suppressValue((f = 1, g = 10, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Too Sexy?"])), a.autoesc), h += '</h1>\n    <div class="body">\n        <p>\n            ';
                var i = d.makeMacro([], [], function(e) {
                    c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                    var h, i = "";
                    return h = {
                        policies_url: d.memberLookup(d.contextOrFrameLookup(b, c, "settings"), "HELP_PIN_POLICIES_URL", a.autoesc)
                    }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 4, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 4, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ['We recently received reports saying something on your Pinterest profile goes against <a href="{{ policies_url }}">our policies</a>. We don’t allow things that are inappropriate for the general public, like sexually explicit Pins, anywhere on Pinterest. We do allow works of art and educational Pins, like you might see in a museum or classroom.'])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                });
                b.setVariable("_doTranslation", i), h += d.suppressValue((f = 4, g = 13, d.callWrap(i, "_doTranslation", [])), a.autoesc), h += "\n        </p>\n        <p>\n            ";
                var j = d.makeMacro([], [], function(e) {
                    c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                    var h, i = "";
                    return h = {}, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 12, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 12, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Could you please delete any Pins or boards that go against our policies? Or if you were reported by mistake, we're really sorry—please ignore this message."])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                });
                b.setVariable("_doTranslation", j), h += d.suppressValue((f = 12, g = 13, d.callWrap(j, "_doTranslation", [])), a.autoesc), h += '\n        </p>\n    </div>\n    <div class="formFooter">\n        <div class="formFooterButtons">\n            ', h += d.suppressValue((f = 20, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        cancelButton: !0,
                        text: (f = 23, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Cancel"]))
                    }
                })])), a.autoesc), h += "\n            ", h += d.suppressValue((f = 25, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        class_name: "confirm",
                        text: (f = 28, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["I Understand"])),
                        color: "primary"
                    }
                })])), a.autoesc), h += "\n        </div>\n    </div>\n</form>", e(null, h)
            } catch (k) {
                e(d.handleError(k, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["templates/dialogs/power_reporter_thanks.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += '<form class="standardForm">\n    <h1>', h += d.suppressValue((f = 1, g = 10, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Want to report this profile?"])), a.autoesc), h += "</h1>\n    <div class='body'>\n        <p>\n            ";
                var i = d.makeMacro([], [], function(e) {
                    c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                    var h, i = "";
                    return h = {}, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 4, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 4, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["If you’d like, you can report this profile instead of reporting lots of Pins."])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                });
                b.setVariable("_doTranslation", i), h += d.suppressValue((f = 4, g = 13, d.callWrap(i, "_doTranslation", [])), a.autoesc), h += '\n        </p>\n    </div>\n    <div class="formFooter">\n        <div class="formFooterButtons">\n            ', h += d.suppressValue((f = 11, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["NavigateButton", d.makeKeywordArgs({
                    options: {
                        class_name: "cancel",
                        text: (f = 14, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Learn How"])),
                        url: d.memberLookup(d.contextOrFrameLookup(b, c, "settings"), "HELP_REPORT_PERSON_URL", a.autoesc)
                    }
                })])), a.autoesc), h += "\n            ", h += d.suppressValue((f = 17, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        class_name: "confirm",
                        text: (f = 20, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Okay"])),
                        color: "primary"
                    }
                })])), a.autoesc), h += "\n        </div>\n    </div>\n</form>\n", e(null, h)
            } catch (j) {
                e(d.handleError(j, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["templates/dialogs/report_bug.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += '\n\n<form class="standardForm">\n    <h1>', h += d.suppressValue((f = 8, g = 10, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Bug Reported!"])), a.autoesc), h += '</h1>\n    <div class="body">\n        <p>\n            ';
                var i;
                f = 11, g = 39, i = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["task_url"]), c.set("task_url", i, !0), c.parent || (b.setVariable("task_url", i), b.addExport("task_url")), h += "\n            ";
                var j = d.makeMacro([], [], function(e) {
                    c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                    var h, i = "";
                    return h = {
                        task_url: d.contextOrFrameLookup(b, c, "task_url")
                    }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 12, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 12, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ['Sorry about that. We\'ve been <a href="{{ task_url }}">notified</a> of it, and will work on a fix! High-five for reporting.'])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                });
                b.setVariable("_doTranslation", j), h += d.suppressValue((f = 12, g = 13, d.callWrap(j, "_doTranslation", [])), a.autoesc), h += '\n        </p>\n    </div>\n    <div class="formFooter">\n        <div class="formFooterButtons">\n            ', h += d.suppressValue((f = 20, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        class_name: "confirm",
                        text: (f = 23, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Continue"])),
                        color: "primary"
                    }
                })])), a.autoesc), h += "\n        </div>\n    </div>\n</form>\n", e(null, h)
            } catch (k) {
                e(d.handleError(k, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["templates/dialogs/revoke_app_access.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += '<form class="standardForm">\n    <h1>', h += d.suppressValue((f = 1, g = 10, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Revoke access?"])), a.autoesc), h += '</h1>\n    <div class="body">\n        <p>', h += d.suppressValue((f = 3, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Are you sure you want to revoke this app's access to Pinterest?"])), a.autoesc), h += '</p>\n    </div>\n    <div class="formFooter">\n        <div class="formFooterButtons">\n            ', h += d.suppressValue((f = 7, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        cancelButton: !0,
                        text: (f = 10, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Cancel"]))
                    }
                })])), a.autoesc), h += "\n            ", h += d.suppressValue((f = 12, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        class_name: "confirm",
                        text: (f = 15, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Revoke access"])),
                        color: "primary"
                    }
                })])), a.autoesc), h += "\n        </div>\n    </div>\n</form>", e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["templates/dialogs/richpin_apply_success.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += '<form class="standardForm switchDialog">\n    <h1 class="dialogTitle">\n        Thanks for your application!\n    </h1>\n    <div class="body">\n        <p>\n            We’ll review it and email you with any questions or next steps.\n        </p>\n    </div>\n    <div class="formFooter">\n        <div class="formFooterButtons">\n            ', h += d.suppressValue((f = 11, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        class_name: "confirm",
                        text: (f = 14, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Close"])),
                        color: "primary"
                    }
                })])), a.autoesc), h += "\n        </div>\n    </div>\n</form>\n", e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["templates/dialogs/trademark_claim_success.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += '\n\n<form class="standardForm switchDialog">\n    <h1 class="dialogTitle">\n        Thank you for your report\n    </h1>\n    <div class="body">\n        Your trademark request ID: ', h += d.suppressValue((f = 12, g = 47, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["claim_id"])), a.autoesc), h += '\n    </div>\n    <div class="formFooter">\n        <div class="formFooterButtons">\n            ', h += d.suppressValue((f = 16, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        class_name: "confirm",
                        text: (f = 19, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Okay"])),
                        color: "primary"
                    }
                })])), a.autoesc), h += "\n        </div>\n    </div>\n</form>\n", e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["templates/macros/boardpicker.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                var i = d.makeMacro(["is_secret", "is_collaborative", "is_place", "show_arrow"], [], function(a, b, e, f, g) {
                    c = c.push(), g = g || {}, g.hasOwnProperty("caller") && c.set("caller", g.caller), c.set("is_secret", a), c.set("is_collaborative", b), c.set("is_place", e), c.set("show_arrow", f);
                    var h = "";
                    return h += '\n    <div class="iconWrapper">\n        <span class="placeIcon ', e || (h += "hidden"), h += '"></span>\n        <span class="secretIcon ', a || (h += "hidden"), h += '"></span>\n        <span class="collaborativeIcon ', b || (h += "hidden"), h += '"></span>\n        ', f && (h += '\n            <span class="downArrow"></span>\n        '), h += "\n    </div>\n", c = c.pop(), new d.SafeString(h)
                });
                b.addExport("icon_wrapper"), b.setVariable("icon_wrapper", i), h += "\n", e(null, h)
            } catch (j) {
                e(d.handleError(j, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["templates/macros/format.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n";
                var i = d.makeMacro(["count"], ["capitalize"], function(e, h) {
                    c = c.push(), h = h || {}, h.hasOwnProperty("caller") && c.set("caller", h.caller), c.set("count", e), c.set("capitalize", h.hasOwnProperty("capitalize") ? h.capitalize : !1);
                    var i = "";
                    i += "\n    ";
                    var j;
                    if (j = a.getFilter("numberfmt").call(b, e), c.set("formatted_count", j, !0), c.parent || (b.setVariable("formatted_count", j), b.addExport("formatted_count")), i += "\n    ", d.contextOrFrameLookup(b, c, "capitalize")) {
                        i += "\n        ";
                        var k = d.makeMacro([], [], function(h) {
                            c = c.push(), h = h || {}, h.hasOwnProperty("caller") && c.set("caller", h.caller);
                            var i, j = "";
                            return i = {
                                count: e,
                                formatted_count: d.contextOrFrameLookup(b, c, "formatted_count")
                            }, c.set("__dict", i, !0), c.parent || b.setVariable("__dict", i), j += d.suppressValue((f = 4, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 4, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_ngettext"), "_ngettext", ["<span class='value'>{{ formatted_count }}</span> <span class='label'>Board</span>", "<span class='value'>{{ formatted_count }}</span> <span class='label'>Boards</span>", d.memberLookup(d.contextOrFrameLookup(b, c, "__dict"), "count", a.autoesc)])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(j)
                        });
                        c.set("_doTranslation", k), i += d.suppressValue((f = 4, g = 9, d.callWrap(k, "_doTranslation", [])), a.autoesc), i += "\n    "
                    } else {
                        i += "\n        ";
                        var l = d.makeMacro([], [], function(h) {
                            c = c.push(), h = h || {}, h.hasOwnProperty("caller") && c.set("caller", h.caller);
                            var i, j = "";
                            return i = {
                                count: e,
                                formatted_count: d.contextOrFrameLookup(b, c, "formatted_count")
                            }, c.set("__dict", i, !0), c.parent || b.setVariable("__dict", i), j += d.suppressValue((f = 12, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 12, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_ngettext"), "_ngettext", ["<span class='value'>{{ formatted_count }}</span> <span class='label'>board</span>", "<span class='value'>{{ formatted_count }}</span> <span class='label'>boards</span>", d.memberLookup(d.contextOrFrameLookup(b, c, "__dict"), "count", a.autoesc)])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(j)
                        });
                        c.set("_doTranslation", l), i += d.suppressValue((f = 12, g = 9, d.callWrap(l, "_doTranslation", [])), a.autoesc), i += "\n    "
                    }
                    return i += "\n", c = c.pop(), new d.SafeString(i)
                });
                b.addExport("count_text_board"), b.setVariable("count_text_board", i), h += "\n\n";
                var j = d.makeMacro(["count"], ["capitalize"], function(e, h) {
                    c = c.push(), h = h || {}, h.hasOwnProperty("caller") && c.set("caller", h.caller), c.set("count", e), c.set("capitalize", h.hasOwnProperty("capitalize") ? h.capitalize : !1);
                    var i = "";
                    i += "\n    ";
                    var j;
                    if (j = a.getFilter("numberfmt").call(b, e), c.set("formatted_count", j, !0), c.parent || (b.setVariable("formatted_count", j), b.addExport("formatted_count")), i += "\n    ", d.contextOrFrameLookup(b, c, "capitalize")) {
                        i += "\n        ";
                        var k = d.makeMacro([], [], function(h) {
                            c = c.push(), h = h || {}, h.hasOwnProperty("caller") && c.set("caller", h.caller);
                            var i, j = "";
                            return i = {
                                count: e,
                                formatted_count: d.contextOrFrameLookup(b, c, "formatted_count")
                            }, c.set("__dict", i, !0), c.parent || b.setVariable("__dict", i), j += d.suppressValue((f = 25, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 25, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_ngettext"), "_ngettext", ["<span class='value'>{{ formatted_count }}</span> <span class='label'>Comment</span>", "<span class='value'>{{ formatted_count }}</span> <span class='label'>Comments</span>", d.memberLookup(d.contextOrFrameLookup(b, c, "__dict"), "count", a.autoesc)])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(j)
                        });
                        c.set("_doTranslation", k), i += d.suppressValue((f = 25, g = 9, d.callWrap(k, "_doTranslation", [])), a.autoesc), i += "\n    "
                    } else {
                        i += "\n        ";
                        var l = d.makeMacro([], [], function(h) {
                            c = c.push(), h = h || {}, h.hasOwnProperty("caller") && c.set("caller", h.caller);
                            var i, j = "";
                            return i = {
                                count: e,
                                formatted_count: d.contextOrFrameLookup(b, c, "formatted_count")
                            }, c.set("__dict", i, !0), c.parent || b.setVariable("__dict", i), j += d.suppressValue((f = 33, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 33, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_ngettext"), "_ngettext", ["<span class='value'>{{ formatted_count }}</span> <span class='label'>comment</span>", "<span class='value'>{{ formatted_count }}</span> <span class='label'>comments</span>", d.memberLookup(d.contextOrFrameLookup(b, c, "__dict"), "count", a.autoesc)])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(j)
                        });
                        c.set("_doTranslation", l), i += d.suppressValue((f = 33, g = 9, d.callWrap(l, "_doTranslation", [])), a.autoesc), i += "\n    "
                    }
                    return i += "\n", c = c.pop(), new d.SafeString(i)
                });
                b.addExport("count_text_comment"), b.setVariable("count_text_comment", j), h += "\n\n";
                var k = d.makeMacro(["count"], ["capitalize"], function(e, h) {
                    c = c.push(), h = h || {}, h.hasOwnProperty("caller") && c.set("caller", h.caller), c.set("count", e), c.set("capitalize", h.hasOwnProperty("capitalize") ? h.capitalize : !1);
                    var i = "";
                    i += "\n    ";
                    var j;
                    if (j = a.getFilter("numberfmt").call(b, e), c.set("formatted_count", j, !0), c.parent || (b.setVariable("formatted_count", j), b.addExport("formatted_count")), i += "\n    ", d.contextOrFrameLookup(b, c, "capitalize")) {
                        i += "\n        ";
                        var k = d.makeMacro([], [], function(h) {
                            c = c.push(), h = h || {}, h.hasOwnProperty("caller") && c.set("caller", h.caller);
                            var i, j = "";
                            return i = {
                                count: e,
                                formatted_count: d.contextOrFrameLookup(b, c, "formatted_count")
                            }, c.set("__dict", i, !0), c.parent || b.setVariable("__dict", i), j += d.suppressValue((f = 46, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 46, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_ngettext"), "_ngettext", ["<span class='value'>{{ formatted_count }}</span> <span class='label'>Like</span>", "<span class='value'>{{ formatted_count }}</span> <span class='label'>Likes</span>", d.memberLookup(d.contextOrFrameLookup(b, c, "__dict"), "count", a.autoesc)])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(j)
                        });
                        c.set("_doTranslation", k), i += d.suppressValue((f = 46, g = 9, d.callWrap(k, "_doTranslation", [])), a.autoesc), i += "\n    "
                    } else {
                        i += "\n        ";
                        var l = d.makeMacro([], [], function(h) {
                            c = c.push(), h = h || {}, h.hasOwnProperty("caller") && c.set("caller", h.caller);
                            var i, j = "";
                            return i = {
                                count: e,
                                formatted_count: d.contextOrFrameLookup(b, c, "formatted_count")
                            }, c.set("__dict", i, !0), c.parent || b.setVariable("__dict", i), j += d.suppressValue((f = 54, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 54, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_ngettext"), "_ngettext", ["<span class='value'>{{ formatted_count }}</span> <span class='label'>like</span>", "<span class='value'>{{ formatted_count }}</span> <span class='label'>likes</span>", d.memberLookup(d.contextOrFrameLookup(b, c, "__dict"), "count", a.autoesc)])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(j)
                        });
                        c.set("_doTranslation", l), i += d.suppressValue((f = 54, g = 9, d.callWrap(l, "_doTranslation", [])), a.autoesc), i += "\n    "
                    }
                    return i += "\n", c = c.pop(), new d.SafeString(i)
                });
                b.addExport("count_text_like"), b.setVariable("count_text_like", k), h += "\n\n";
                var l = d.makeMacro(["count"], ["capitalize"], function(e, h) {
                    c = c.push(), h = h || {}, h.hasOwnProperty("caller") && c.set("caller", h.caller), c.set("count", e), c.set("capitalize", h.hasOwnProperty("capitalize") ? h.capitalize : !1);
                    var i = "";
                    i += "\n    ";
                    var j;
                    if (j = a.getFilter("numberfmt").call(b, e), c.set("formatted_count", j, !0), c.parent || (b.setVariable("formatted_count", j), b.addExport("formatted_count")), i += "\n    ", d.contextOrFrameLookup(b, c, "capitalize")) {
                        i += "\n        ";
                        var k = d.makeMacro([], [], function(h) {
                            c = c.push(), h = h || {}, h.hasOwnProperty("caller") && c.set("caller", h.caller);
                            var i, j = "";
                            return i = {
                                count: e,
                                formatted_count: d.contextOrFrameLookup(b, c, "formatted_count")
                            }, c.set("__dict", i, !0), c.parent || b.setVariable("__dict", i), j += d.suppressValue((f = 67, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 67, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_ngettext"), "_ngettext", ["<span class='value'>{{ formatted_count }}</span> <span class='label'>Follower</span>", "<span class='value'>{{ formatted_count }}</span> <span class='label'>Followers</span>", d.memberLookup(d.contextOrFrameLookup(b, c, "__dict"), "count", a.autoesc)])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(j)
                        });
                        c.set("_doTranslation", k), i += d.suppressValue((f = 67, g = 9, d.callWrap(k, "_doTranslation", [])), a.autoesc), i += "\n    "
                    } else {
                        i += "\n        ";
                        var l = d.makeMacro([], [], function(h) {
                            c = c.push(), h = h || {}, h.hasOwnProperty("caller") && c.set("caller", h.caller);
                            var i, j = "";
                            return i = {
                                count: e,
                                formatted_count: d.contextOrFrameLookup(b, c, "formatted_count")
                            }, c.set("__dict", i, !0), c.parent || b.setVariable("__dict", i), j += d.suppressValue((f = 75, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 75, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_ngettext"), "_ngettext", ["<span class='value'>{{ formatted_count }}</span> <span class='label'>follower</span>", "<span class='value'>{{ formatted_count }}</span> <span class='label'>followers</span>", d.memberLookup(d.contextOrFrameLookup(b, c, "__dict"), "count", a.autoesc)])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(j)
                        });
                        c.set("_doTranslation", l), i += d.suppressValue((f = 75, g = 9, d.callWrap(l, "_doTranslation", [])), a.autoesc), i += "\n    "
                    }
                    return i += "\n", c = c.pop(), new d.SafeString(i)
                });
                b.addExport("count_text_follower"), b.setVariable("count_text_follower", l), h += "\n\n";
                var m = d.makeMacro(["count"], ["capitalize"], function(e, h) {
                    c = c.push(), h = h || {}, h.hasOwnProperty("caller") && c.set("caller", h.caller), c.set("count", e), c.set("capitalize", h.hasOwnProperty("capitalize") ? h.capitalize : !1);
                    var i = "";
                    i += "\n    ";
                    var j;
                    if (j = a.getFilter("numberfmt").call(b, e), c.set("formatted_count", j, !0), c.parent || (b.setVariable("formatted_count", j), b.addExport("formatted_count")), i += "\n    ", d.contextOrFrameLookup(b, c, "capitalize")) {
                        i += "\n        ";
                        var k = d.makeMacro([], [], function(h) {
                            c = c.push(), h = h || {}, h.hasOwnProperty("caller") && c.set("caller", h.caller);
                            var i, j = "";
                            return i = {
                                count: e,
                                formatted_count: d.contextOrFrameLookup(b, c, "formatted_count")
                            }, c.set("__dict", i, !0), c.parent || b.setVariable("__dict", i), j += d.suppressValue((f = 88, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 88, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_ngettext"), "_ngettext", ["<span class='value'>{{ formatted_count }}</span> <span class='label'>Following</span>", "<span class='value'>{{ formatted_count }}</span> <span class='label'>Following</span>", d.memberLookup(d.contextOrFrameLookup(b, c, "__dict"), "count", a.autoesc)])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(j)
                        });
                        c.set("_doTranslation", k), i += d.suppressValue((f = 88, g = 9, d.callWrap(k, "_doTranslation", [])), a.autoesc), i += "\n    "
                    } else {
                        i += "\n        ";
                        var l = d.makeMacro([], [], function(h) {
                            c = c.push(), h = h || {}, h.hasOwnProperty("caller") && c.set("caller", h.caller);
                            var i, j = "";
                            return i = {
                                count: e,
                                formatted_count: d.contextOrFrameLookup(b, c, "formatted_count")
                            }, c.set("__dict", i, !0), c.parent || b.setVariable("__dict", i), j += d.suppressValue((f = 96, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 96, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_ngettext"), "_ngettext", ["<span class='value'>{{ formatted_count }}</span> <span class='label'>following</span>", "<span class='value'>{{ formatted_count }}</span> <span class='label'>following</span>", d.memberLookup(d.contextOrFrameLookup(b, c, "__dict"), "count", a.autoesc)])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(j)
                        });
                        c.set("_doTranslation", l), i += d.suppressValue((f = 96, g = 9, d.callWrap(l, "_doTranslation", [])), a.autoesc), i += "\n    "
                    }
                    return i += "\n", c = c.pop(), new d.SafeString(i)
                });
                b.addExport("count_text_following"), b.setVariable("count_text_following", m), h += "\n\n";
                var n = d.makeMacro(["count"], ["capitalize"], function(e, h) {
                    c = c.push(), h = h || {}, h.hasOwnProperty("caller") && c.set("caller", h.caller), c.set("count", e), c.set("capitalize", h.hasOwnProperty("capitalize") ? h.capitalize : !1);
                    var i = "";
                    i += "\n    ";
                    var j;
                    if (j = a.getFilter("numberfmt").call(b, e), c.set("formatted_count", j, !0), c.parent || (b.setVariable("formatted_count", j), b.addExport("formatted_count")), i += "\n    ", d.contextOrFrameLookup(b, c, "capitalize")) {
                        i += "\n        ";
                        var k = d.makeMacro([], [], function(h) {
                            c = c.push(), h = h || {}, h.hasOwnProperty("caller") && c.set("caller", h.caller);
                            var i, j = "";
                            return i = {
                                count: e,
                                formatted_count: d.contextOrFrameLookup(b, c, "formatted_count")
                            }, c.set("__dict", i, !0), c.parent || b.setVariable("__dict", i), j += d.suppressValue((f = 109, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 109, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_ngettext"), "_ngettext", ["<span class='value'>{{ formatted_count }}</span> <span class='label'>Pin</span>", "<span class='value'>{{ formatted_count }}</span> <span class='label'>Pins</span>", d.memberLookup(d.contextOrFrameLookup(b, c, "__dict"), "count", a.autoesc)])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(j)
                        });
                        c.set("_doTranslation", k), i += d.suppressValue((f = 109, g = 9, d.callWrap(k, "_doTranslation", [])), a.autoesc), i += "\n    "
                    } else {
                        i += "\n        ";
                        var l = d.makeMacro([], [], function(h) {
                            c = c.push(), h = h || {}, h.hasOwnProperty("caller") && c.set("caller", h.caller);
                            var i, j = "";
                            return i = {
                                count: e,
                                formatted_count: d.contextOrFrameLookup(b, c, "formatted_count")
                            }, c.set("__dict", i, !0), c.parent || b.setVariable("__dict", i), j += d.suppressValue((f = 117, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 117, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_ngettext"), "_ngettext", ["<span class='value'>{{ formatted_count }}</span> <span class='label'>pin</span>", "<span class='value'>{{ formatted_count }}</span> <span class='label'>pins</span>", d.memberLookup(d.contextOrFrameLookup(b, c, "__dict"), "count", a.autoesc)])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(j)
                        });
                        c.set("_doTranslation", l), i += d.suppressValue((f = 117, g = 9, d.callWrap(l, "_doTranslation", [])), a.autoesc), i += "\n    "
                    }
                    return i += "\n", c = c.pop(), new d.SafeString(i)
                });
                b.addExport("count_text_pin"), b.setVariable("count_text_pin", n), h += "\n\n";
                var o = d.makeMacro(["count"], ["capitalize"], function(e, h) {
                    c = c.push(), h = h || {}, h.hasOwnProperty("caller") && c.set("caller", h.caller), c.set("count", e), c.set("capitalize", h.hasOwnProperty("capitalize") ? h.capitalize : !1);
                    var i = "";
                    i += "\n    ";
                    var j;
                    if (j = a.getFilter("numberfmt").call(b, e), c.set("formatted_count", j, !0), c.parent || (b.setVariable("formatted_count", j), b.addExport("formatted_count")), i += "\n    ", d.contextOrFrameLookup(b, c, "capitalize")) {
                        i += "\n        ";
                        var k = d.makeMacro([], [], function(h) {
                            c = c.push(), h = h || {}, h.hasOwnProperty("caller") && c.set("caller", h.caller);
                            var i, j = "";
                            return i = {
                                count: e,
                                formatted_count: d.contextOrFrameLookup(b, c, "formatted_count")
                            }, c.set("__dict", i, !0), c.parent || b.setVariable("__dict", i), j += d.suppressValue((f = 130, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 130, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_ngettext"), "_ngettext", ["<span class='value'>{{ formatted_count }}</span> <span class='label'>Repin</span>", "<span class='value'>{{ formatted_count }}</span> <span class='label'>Repins</span>", d.memberLookup(d.contextOrFrameLookup(b, c, "__dict"), "count", a.autoesc)])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(j)
                        });
                        c.set("_doTranslation", k), i += d.suppressValue((f = 130, g = 9, d.callWrap(k, "_doTranslation", [])), a.autoesc), i += "\n    "
                    } else {
                        i += "\n        ";
                        var l = d.makeMacro([], [], function(h) {
                            c = c.push(), h = h || {}, h.hasOwnProperty("caller") && c.set("caller", h.caller);
                            var i, j = "";
                            return i = {
                                count: e,
                                formatted_count: d.contextOrFrameLookup(b, c, "formatted_count")
                            }, c.set("__dict", i, !0), c.parent || b.setVariable("__dict", i), j += d.suppressValue((f = 138, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 138, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_ngettext"), "_ngettext", ["<span class='value'>{{ formatted_count }}</span> <span class='label'>repin</span>", "<span class='value'>{{ formatted_count }}</span> <span class='label'>repins</span>", d.memberLookup(d.contextOrFrameLookup(b, c, "__dict"), "count", a.autoesc)])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(j)
                        });
                        c.set("_doTranslation", l), i += d.suppressValue((f = 138, g = 9, d.callWrap(l, "_doTranslation", [])), a.autoesc), i += "\n    "
                    }
                    return i += "\n", c = c.pop(), new d.SafeString(i)
                });
                b.addExport("count_text_repin"), b.setVariable("count_text_repin", o), h += "\n\n";
                var p = d.makeMacro(["count"], ["capitalize"], function(e, h) {
                    c = c.push(), h = h || {}, h.hasOwnProperty("caller") && c.set("caller", h.caller), c.set("count", e), c.set("capitalize", h.hasOwnProperty("capitalize") ? h.capitalize : !1);
                    var i = "";
                    i += "\n    ";
                    var j;
                    if (j = a.getFilter("numberfmt").call(b, e), c.set("formatted_count", j, !0), c.parent || (b.setVariable("formatted_count", j), b.addExport("formatted_count")), i += "\n    ", d.contextOrFrameLookup(b, c, "capitalize")) {
                        i += "\n        ";
                        var k = d.makeMacro([], [], function(h) {
                            c = c.push(), h = h || {}, h.hasOwnProperty("caller") && c.set("caller", h.caller);
                            var i, j = "";
                            return i = {
                                count: e,
                                formatted_count: d.contextOrFrameLookup(b, c, "formatted_count")
                            }, c.set("__dict", i, !0), c.parent || b.setVariable("__dict", i), j += d.suppressValue((f = 151, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 151, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_ngettext"), "_ngettext", ["<span class='value'>{{ formatted_count }}</span> <span class='label'>Collaborator</span>", "<span class='value'>{{ formatted_count }}</span> <span class='label'>Collaborators</span>", d.memberLookup(d.contextOrFrameLookup(b, c, "__dict"), "count", a.autoesc)])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(j)
                        });
                        c.set("_doTranslation", k), i += d.suppressValue((f = 151, g = 9, d.callWrap(k, "_doTranslation", [])), a.autoesc), i += "\n    "
                    } else {
                        i += "\n        ";
                        var l = d.makeMacro([], [], function(h) {
                            c = c.push(), h = h || {}, h.hasOwnProperty("caller") && c.set("caller", h.caller);
                            var i, j = "";
                            return i = {
                                count: e,
                                formatted_count: d.contextOrFrameLookup(b, c, "formatted_count")
                            }, c.set("__dict", i, !0), c.parent || b.setVariable("__dict", i), j += d.suppressValue((f = 159, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 159, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_ngettext"), "_ngettext", ["<span class='value'>{{ formatted_count }}</span> <span class='label'>collaborator</span>", "<span class='value'>{{ formatted_count }}</span> <span class='label'>collaborators</span>", d.memberLookup(d.contextOrFrameLookup(b, c, "__dict"), "count", a.autoesc)])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(j)
                        });
                        c.set("_doTranslation", l), i += d.suppressValue((f = 159, g = 9, d.callWrap(l, "_doTranslation", [])), a.autoesc), i += "\n    "
                    }
                    return i += "\n", c = c.pop(), new d.SafeString(i)
                });
                b.addExport("count_text_collaborator"), b.setVariable("count_text_collaborator", p), h += "\n\n";
                var q = d.makeMacro(["count"], ["capitalize"], function(e, h) {
                    c = c.push(), h = h || {}, h.hasOwnProperty("caller") && c.set("caller", h.caller), c.set("count", e), c.set("capitalize", h.hasOwnProperty("capitalize") ? h.capitalize : !1);
                    var i = "";
                    i += "\n    ";
                    var j;
                    if (j = a.getFilter("numberfmt").call(b, e), c.set("formatted_count", j, !0), c.parent || (b.setVariable("formatted_count", j), b.addExport("formatted_count")), i += "\n    ", d.contextOrFrameLookup(b, c, "capitalize")) {
                        i += "\n        ";
                        var k = d.makeMacro([], [], function(h) {
                            c = c.push(), h = h || {}, h.hasOwnProperty("caller") && c.set("caller", h.caller);
                            var i, j = "";
                            return i = {
                                count: e,
                                formatted_count: d.contextOrFrameLookup(b, c, "formatted_count")
                            }, c.set("__dict", i, !0), c.parent || b.setVariable("__dict", i), j += d.suppressValue((f = 172, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 172, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_ngettext"), "_ngettext", ["<span class='value'>{{ formatted_count }}</span> <span class='label'>Reply</span>", "<span class='value'>{{ formatted_count }}</span> <span class='label'>Replies</span>", d.memberLookup(d.contextOrFrameLookup(b, c, "__dict"), "count", a.autoesc)])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(j)
                        });
                        c.set("_doTranslation", k), i += d.suppressValue((f = 172, g = 9, d.callWrap(k, "_doTranslation", [])), a.autoesc), i += "\n    "
                    } else {
                        i += "\n        ";
                        var l = d.makeMacro([], [], function(h) {
                            c = c.push(), h = h || {}, h.hasOwnProperty("caller") && c.set("caller", h.caller);
                            var i, j = "";
                            return i = {
                                count: e,
                                formatted_count: d.contextOrFrameLookup(b, c, "formatted_count")
                            }, c.set("__dict", i, !0), c.parent || b.setVariable("__dict", i), j += d.suppressValue((f = 180, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 180, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_ngettext"), "_ngettext", ["<span class='value'>{{ formatted_count }}</span> <span class='label'>reply</span>", "<span class='value'>{{ formatted_count }}</span> <span class='label'>replies</span>", d.memberLookup(d.contextOrFrameLookup(b, c, "__dict"), "count", a.autoesc)])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(j)
                        });
                        c.set("_doTranslation", l), i += d.suppressValue((f = 180, g = 9, d.callWrap(l, "_doTranslation", [])), a.autoesc), i += "\n    "
                    }
                    return i += "\n", c = c.pop(), new d.SafeString(i)
                });
                b.addExport("count_text_reply"), b.setVariable("count_text_reply", q), h += "\n\n";
                var r = d.makeMacro(["count", "object"], ["capitalize"], function(e, h, r) {
                    c = c.push(), r = r || {}, r.hasOwnProperty("caller") && c.set("caller", r.caller), c.set("count", e), c.set("object", h), c.set("capitalize", r.hasOwnProperty("capitalize") ? r.capitalize : !1);
                    var s = "";
                    return s += "\n    ", e || (s += "\n        ", e = 0, c.set("count", e, !0), c.parent || (b.setVariable("count", e), b.addExport("count")), s += "\n    "), s += "\n\n    ", "board" == h ? (s += "\n        ", s += d.suppressValue((f = 197, g = 25, d.callWrap(i, "count_text_board", [e, d.makeKeywordArgs({
                        capitalize: d.contextOrFrameLookup(b, c, "capitalize")
                    })])), a.autoesc), s += "\n    ") : "comment" == h ? (s += "\n        ", s += d.suppressValue((f = 199, g = 27, d.callWrap(j, "count_text_comment", [e, d.makeKeywordArgs({
                        capitalize: d.contextOrFrameLookup(b, c, "capitalize")
                    })])), a.autoesc), s += "\n    ") : "like" == h ? (s += "\n        ", s += d.suppressValue((f = 201, g = 24, d.callWrap(k, "count_text_like", [e, d.makeKeywordArgs({
                        capitalize: d.contextOrFrameLookup(b, c, "capitalize")
                    })])), a.autoesc), s += "\n    ") : "follower" == h ? (s += "\n        ", s += d.suppressValue((f = 203, g = 28, d.callWrap(l, "count_text_follower", [e, d.makeKeywordArgs({
                        capitalize: d.contextOrFrameLookup(b, c, "capitalize")
                    })])), a.autoesc), s += "\n    ") : "following" == h ? (s += "\n        ", s += d.suppressValue((f = 205, g = 29, d.callWrap(m, "count_text_following", [e, d.makeKeywordArgs({
                        capitalize: d.contextOrFrameLookup(b, c, "capitalize")
                    })])), a.autoesc), s += "\n    ") : "pin" == h ? (s += "\n        ", s += d.suppressValue((f = 207, g = 23, d.callWrap(n, "count_text_pin", [e, d.makeKeywordArgs({
                        capitalize: d.contextOrFrameLookup(b, c, "capitalize")
                    })])), a.autoesc), s += "\n    ") : "repin" == h ? (s += "\n        ", s += d.suppressValue((f = 209, g = 25, d.callWrap(o, "count_text_repin", [e, d.makeKeywordArgs({
                        capitalize: d.contextOrFrameLookup(b, c, "capitalize")
                    })])), a.autoesc), s += "\n    ") : "collaborator" == h ? (s += "\n        ", s += d.suppressValue((f = 211, g = 32, d.callWrap(p, "count_text_collaborator", [e, d.makeKeywordArgs({
                        capitalize: d.contextOrFrameLookup(b, c, "capitalize")
                    })])), a.autoesc), s += "\n    ") : "reply" == h && (s += "\n        ", s += d.suppressValue((f = 213, g = 25, d.callWrap(q, "count_text_reply", [e, d.makeKeywordArgs({
                        capitalize: d.contextOrFrameLookup(b, c, "capitalize")
                    })])), a.autoesc), s += "\n    "), c = c.pop(), new d.SafeString(s)
                });
                b.addExport("count_text"), b.setVariable("count_text", r), h += "\n", e(null, h)
            } catch (s) {
                e(d.handleError(s, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["templates/macros/geo_feature.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                var i = d.makeMacro(["feature"], [], function(b, e) {
                    c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller), c.set("feature", b);
                    var f = "";
                    return f += '\n    <div class="flag', f += d.suppressValue(d.memberLookup(b, "cc", a.autoesc), a.autoesc), f += ' flagIcon"></div>\n    <p class="featureName">', f += d.suppressValue(d.memberLookup(b, "text", a.autoesc), a.autoesc), f += "</p>\n", c = c.pop(), new d.SafeString(f)
                });
                b.addExport("geo_feature"), b.setVariable("geo_feature", i), h += "\n", e(null, h)
            } catch (j) {
                e(d.handleError(j, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["templates/macros/image.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n";
                var i = d.makeMacro([], ["src", "class_name", "width", "height", "style", "add_class_on_load", "alt", "item_prop"], function(e) {
                    c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller), c.set("src", e.hasOwnProperty("src") ? e.src : ""), c.set("class_name", e.hasOwnProperty("class_name") ? e.class_name : ""), c.set("width", e.hasOwnProperty("width") ? e.width : - 1), c.set("height", e.hasOwnProperty("height") ? e.height : - 1), c.set("style", e.hasOwnProperty("style") ? e.style : {}), c.set("add_class_on_load", e.hasOwnProperty("add_class_on_load") ? e.add_class_on_load : !1), c.set("alt", e.hasOwnProperty("alt") ? e.alt : ""), c.set("item_prop", e.hasOwnProperty("item_prop") ? e.item_prop : "");
                    var f = "";
                    f += "\n    ", f += '\n    \n\n    <img src="', f += d.suppressValue(d.contextOrFrameLookup(b, c, "src"), a.autoesc), f += '"', d.contextOrFrameLookup(b, c, "class_name") && (f += '\n        class="', f += d.suppressValue(d.contextOrFrameLookup(b, c, "class_name"), a.autoesc), f += '"\n    '), f += 'style="', - 1 != d.contextOrFrameLookup(b, c, "height") && (f += "height:", f += d.suppressValue(d.contextOrFrameLookup(b, c, "height"), a.autoesc), f += "px;"), - 1 != d.contextOrFrameLookup(b, c, "width") && (f += "width:", f += d.suppressValue(d.contextOrFrameLookup(b, c, "width"), a.autoesc), f += "px;"), c = c.push();
                    var g = a.getFilter("dictsort").call(b, d.contextOrFrameLookup(b, c, "style"));
                    if (g) {
                        var h;
                        if (d.isArray(g)) {
                            var i = g.length;
                            for (h = 0; h < g.length; h++) {
                                var j = g[h][0];
                                c.set("name", g[h][0]);
                                var k = g[h][1];
                                c.set("value", g[h][1]), c.set("loop.index", h + 1), c.set("loop.index0", h), c.set("loop.revindex", i - h), c.set("loop.revindex0", i - h - 1), c.set("loop.first", 0 === h), c.set("loop.last", h === i - 1), c.set("loop.length", i), f += d.suppressValue(j, a.autoesc), f += ":", f += d.suppressValue(k, a.autoesc), f += ";"
                            }
                        } else {
                            h =- 1;
                            var i = d.keys(g).length;
                            for (var l in g) {
                                h++;
                                var m = g[l];
                                c.set("name", l), c.set("value", m), c.set("loop.index", h + 1), c.set("loop.index0", h), c.set("loop.revindex", i - h), c.set("loop.revindex0", i - h - 1), c.set("loop.first", 0 === h), c.set("loop.last", h === i - 1), c.set("loop.length", i), f += d.suppressValue(l, a.autoesc), f += ":", f += d.suppressValue(m, a.autoesc), f += ";"
                            }
                        }
                    }
                    return c = c.pop(), f += '"', d.contextOrFrameLookup(b, c, "add_class_on_load") && (f += '\n        onload="P.lazy.onImageLoad(this)"\n    '), d.contextOrFrameLookup(b, c, "alt") && (f += '\n        alt="', f += d.suppressValue(d.contextOrFrameLookup(b, c, "alt"), a.autoesc), f += '"\n    '), d.contextOrFrameLookup(b, c, "item_prop") && (f += '\n        itemprop="', f += d.suppressValue(d.contextOrFrameLookup(b, c, "item_prop"), a.autoesc), f += '"\n    '), f += ">\n", c = c.pop(), new d.SafeString(f)
                });
                b.addExport("image_tag"), b.setVariable("image_tag", i), h += "\n", e(null, h)
            } catch (j) {
                e(d.handleError(j, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["templates/macros/link.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n";
                var i = d.makeMacro(["url", "text"], ["no_follow", "new_window", "element_type"], function(e, f, g) {
                    c = c.push(), g = g || {}, g.hasOwnProperty("caller") && c.set("caller", g.caller), c.set("url", e), c.set("text", f), c.set("no_follow", g.hasOwnProperty("no_follow") ? g.no_follow : !1), c.set("new_window", g.hasOwnProperty("new_window") ? g.new_window : !1), c.set("element_type", g.hasOwnProperty("element_type") ? g.element_type : !1);
                    var h = "";
                    return h += '<a href="', h += d.suppressValue(e, a.autoesc), h += '"\n\n        ', d.contextOrFrameLookup(b, c, "no_follow") && (h += 'rel="nofollow"'), h += "\n        ", d.contextOrFrameLookup(b, c, "new_window") && (h += 'target="_blank"'), h += "\n        ", d.contextOrFrameLookup(b, c, "element_type") && (h += 'data-element-type="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "element_type"), a.autoesc), h += '"'), h += "\n\n    >", h += d.suppressValue(f, a.autoesc), h += "</a>", c = c.pop(), new d.SafeString(h)
                });
                b.addExport("link_markup"), b.setVariable("link_markup", i), h += "\n", e(null, h)
            } catch (j) {
                e(d.handleError(j, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["templates/macros/pin_attribution.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                var i = d.makeMacro(["attribution"], ["view_type"], function(e, h) {
                    c = c.push(), h = h || {}, h.hasOwnProperty("caller") && c.set("caller", h.caller), c.set("attribution", e), c.set("view_type", h.hasOwnProperty("view_type") ? h.view_type : "summary");
                    var i = "";
                    i += '\n    <div class="pinAttribution">\n        ';
                    var j;
                    f = 2, g = 41, j = d.callWrap(d.memberLookup(e, "get", a.autoesc), 'attribution["get"]', ["author_url"]), c.set("author_url", j, !0), c.parent || (b.setVariable("author_url", j), b.addExport("author_url")), i += "\n        ";
                    var k;
                    f = 3, g = 43, k = d.callWrap(d.memberLookup(e, "get", a.autoesc), 'attribution["get"]', ["url"]), c.set("provider_url", k, !0), c.parent || (b.setVariable("provider_url", k), b.addExport("provider_url")), i += "\n        ";
                    var l;
                    f = 4, g = 51, l = d.callWrap(d.memberLookup(e, "get", a.autoesc), 'attribution["get"]', ["provider_favicon_url"]), c.set("provider_favicon_url", l, !0), c.parent || (b.setVariable("provider_favicon_url", l), b.addExport("provider_favicon_url")), i += "\n        ";
                    var m;
                    m = d.contextOrFrameLookup(b, c, "author_url") ? d.contextOrFrameLookup(b, c, "author_url") : d.contextOrFrameLookup(b, c, "provider_url"), c.set("link", m, !0), c.parent || (b.setVariable("link", m), b.addExport("link")), i += "\n        ";
                    var n;
                    f = 6, g = 42, n = d.callWrap(d.memberLookup(e, "get", a.autoesc), 'attribution["get"]', ["author_name"]), c.set("author_name", n, !0), c.parent || (b.setVariable("author_name", n), b.addExport("author_name")), i += "\n        ";
                    var o;
                    if (f = 7, g = 40, o = d.callWrap(d.memberLookup(e, "get", a.autoesc), 'attribution["get"]', ["rich_site_name"]) || (f = 7, g = 77, d.callWrap(d.memberLookup(e, "get", a.autoesc), 'attribution["get"]', ["provider_name"])), c.set("site_name", o, !0), c.parent || (b.setVariable("site_name", o), b.addExport("site_name")), i += "\n        ", "detailed" == d.contextOrFrameLookup(b, c, "view_type")) {
                        i += "\n            ";
                        var p;
                        if (f = 9, g = 40, p = d.callWrap(d.memberLookup(e, "get", a.autoesc), 'attribution["get"]', ["title"]), c.set("title", p, !0), c.parent || (b.setVariable("title", p), b.addExport("title")), i += "\n            <p class='pinAttributionText'>\n                ", d.contextOrFrameLookup(b, c, "provider_favicon_url") && (i += '\n                    <img src="', i += d.suppressValue(d.contextOrFrameLookup(b, c, "provider_favicon_url"), a.autoesc), i += '" alt="', i += d.suppressValue(d.contextOrFrameLookup(b, c, "site_name"), a.autoesc), i += '">\n                '), i += '\n                <a href="', i += d.suppressValue(d.contextOrFrameLookup(b, c, "provider_url"), a.autoesc), i += '" class=\'closeupAttributionLink\' rel="nofollow">\n                    ', i += d.suppressValue(d.contextOrFrameLookup(b, c, "title"), a.autoesc), i += "\n                </a>\n                ", d.contextOrFrameLookup(b, c, "author_name")) {
                            if (i += "\n                    ", d.contextOrFrameLookup(b, c, "author_url")) {
                                i += "\n                        ";
                                var q = d.makeMacro([], [], function(e) {
                                    c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                                    var h, i = "";
                                    return h = {
                                        author_url: d.contextOrFrameLookup(b, c, "author_url"),
                                        author_name: d.contextOrFrameLookup(b, c, "author_name"),
                                        provider_url: d.contextOrFrameLookup(b, c, "provider_url"),
                                        site_name: d.contextOrFrameLookup(b, c, "site_name")
                                    }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 19, g = 25, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 19, g = 25, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ['by <a href="{{ author_url }}" rel="nofollow">{{ author_name }}</a> on <a href="{{ provider_url }}" rel="nofollow">{{ site_name }}</a>.'])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                                });
                                c.set("_doTranslation", q), i += d.suppressValue((f = 19, g = 25, d.callWrap(q, "_doTranslation", [])), a.autoesc), i += "\n                    "
                            } else {
                                i += "\n                        ";
                                var r = d.makeMacro([], [], function(e) {
                                    c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                                    var h, i = "";
                                    return h = {
                                        author_name: d.contextOrFrameLookup(b, c, "author_name"),
                                        provider_url: d.contextOrFrameLookup(b, c, "provider_url"),
                                        site_name: d.contextOrFrameLookup(b, c, "site_name")
                                    }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 26, g = 25, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 26, g = 25, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ['by {{ author_name }} on <a href="{{ provider_url }}" rel="nofollow">{{ site_name }}</a>.'])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                                });
                                c.set("_doTranslation", r), i += d.suppressValue((f = 26, g = 25, d.callWrap(r, "_doTranslation", [])), a.autoesc), i += "\n                    "
                            }
                            i += "\n                "
                        } else {
                            i += "\n                    ";
                            var s = d.makeMacro([], [], function(e) {
                                c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                                var h, i = "";
                                return h = {
                                    provider_url: d.contextOrFrameLookup(b, c, "provider_url"),
                                    site_name: d.contextOrFrameLookup(b, c, "site_name")
                                }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 32, g = 21, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 32, g = 21, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ['from <a href="{{ provider_url }}" rel="nofollow">{{ site_name }}</a>.'])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                            });
                            c.set("_doTranslation", s), i += d.suppressValue((f = 32, g = 21, d.callWrap(s, "_doTranslation", [])), a.autoesc), i += "\n                "
                        }
                        i += "\n            </p>\n        "
                    } else {
                        if (i += "\n            ", d.contextOrFrameLookup(b, c, "provider_favicon_url") && (i += '\n                <img src="', i += d.suppressValue(d.contextOrFrameLookup(b, c, "provider_favicon_url"), a.autoesc), i += '" alt="', i += d.suppressValue(d.contextOrFrameLookup(b, c, "site_name"), a.autoesc), i += '">\n            '), i += '\n            <a href="', i += d.suppressValue(d.contextOrFrameLookup(b, c, "link"), a.autoesc), i += '" rel="nofollow">\n                ', d.contextOrFrameLookup(b, c, "author_name")) {
                            i += "\n                    ";
                            var t = d.makeMacro([], [], function(e) {
                                c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                                var h, i = "";
                                return h = {
                                    author_name: d.contextOrFrameLookup(b, c, "author_name")
                                }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 43, g = 21, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 43, g = 21, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["by {{ author_name }}"])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                            });
                            c.set("_doTranslation", t), i += d.suppressValue((f = 43, g = 21, d.callWrap(t, "_doTranslation", [])), a.autoesc), i += "\n                "
                        } else {
                            i += "\n                    ";
                            var u = d.makeMacro([], [], function(e) {
                                c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                                var h, i = "";
                                return h = {
                                    site_name: d.contextOrFrameLookup(b, c, "site_name")
                                }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 47, g = 21, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 47, g = 21, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["from {{ site_name }}"])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                            });
                            c.set("_doTranslation", u), i += d.suppressValue((f = 47, g = 21, d.callWrap(u, "_doTranslation", [])), a.autoesc), i += "\n                "
                        }
                        i += "\n            </a>\n        "
                    }
                    return i += "\n    </div>\n", c = c.pop(), new d.SafeString(i)
                });
                b.addExport("pin_attribution"), b.setVariable("pin_attribution", i), h += "\n", e(null, h)
            } catch (j) {
                e(d.handleError(j, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["templates/macros/pin_credit.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                a.getTemplate("templates/macros/image.nunjucks", function(i, j) {
                    return i ? void e(i) : void j.getExported(function(i, j) {
                        if (i)
                            return void e(i);
                        if (!j.hasOwnProperty("image_tag"))
                            return void e(new Error("cannot import 'image_tag'"));
                        var k = j.image_tag;
                        b.setVariable("image_tag", k), h += "\n\n";
                        var l = d.makeMacro(["credit_link", "thumbnail_src", "credit_title", "credit_name", "credit_image_type", "show_place_board_glyph"], ["pin_title_view", "use_link"], function(e, h, i, j, l, m, n) {
                            c = c.push(), n = n || {}, n.hasOwnProperty("caller") && c.set("caller", n.caller), c.set("credit_link", e), c.set("thumbnail_src", h), c.set("credit_title", i), c.set("credit_name", j), c.set("credit_image_type", l), c.set("show_place_board_glyph", m), c.set("pin_title_view", n.hasOwnProperty("pin_title_view") ? n.pin_title_view : !1), c.set("use_link", n.hasOwnProperty("use_link") ? n.use_link : !0);
                            var o = "";
                            if (o += '\n    <div class="creditItem">\n    ', d.contextOrFrameLookup(b, c, "pin_title_view"))
                                o += "\n        ", h && (o += "\n            ", o += d.suppressValue((f = 7, g = 22, d.callWrap(k, "image_tag", [d.makeKeywordArgs({
                                    src: h,
                                    class_name: "creditImg"
                                })])), a.autoesc), o += "\n        "), o += '\n\n        <div class="creditName"><h3>', o += d.suppressValue(j, a.autoesc), o += '</h3></div>\n            <a href="', o += d.suppressValue(e, a.autoesc), o += '">\n                <div class="creditTitle">\n                    ', m && (o += '\n                        <em class="pinCreditPlaceBoardIcon"></em>\n                    '), o += "\n                    ", o += d.suppressValue(i, a.autoesc), o += "\n                </div>\n            </a>\n    ";
                            else {
                                if (o += "\n        ", d.contextOrFrameLookup(b, c, "use_link")) {
                                    o += '\n            <a href="', o += d.suppressValue(e, a.autoesc), o += '" title="\n                ';
                                    var p = d.makeMacro([], [], function(e) {
                                        c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                                        var h, j = "";
                                        return h = {
                                            credit_title: i
                                        }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), j += d.suppressValue((f = 24, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 24, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["More from {{ credit_title }}"])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(j)
                                    });
                                    c.set("_doTranslation", p), o += d.suppressValue((f = 24, g = 17, d.callWrap(p, "_doTranslation", [])), a.autoesc), o += '\n                ">\n        '
                                } else {
                                    o += '\n            <div title="\n                ';
                                    var q = d.makeMacro([], [], function(e) {
                                        c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                                        var h, j = "";
                                        return h = {
                                            credit_title: i
                                        }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), j += d.suppressValue((f = 30, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 30, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["More from {{ credit_title }}"])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(j)
                                    });
                                    c.set("_doTranslation", q), o += d.suppressValue((f = 30, g = 17, d.callWrap(q, "_doTranslation", [])), a.autoesc), o += '\n                ">\n        '
                                }
                                if (o += "\n            ", h) {
                                    o += "\n                ";
                                    var r;
                                    if (r = "creditImg", c.set("class_name", r, !0), c.parent || (b.setVariable("class_name", r), b.addExport("class_name")), o += "\n                ", "pinner" == l) {
                                        o += "\n                    ";
                                        var s;
                                        s = d.contextOrFrameLookup(b, c, "class_name") + " user", c.set("class_name", s, !0), c.parent || (b.setVariable("class_name", s), b.addExport("class_name")), o += "\n                "
                                    }
                                    o += "\n                ", o += d.suppressValue((f = 40, g = 26, d.callWrap(k, "image_tag", [d.makeKeywordArgs({
                                        src: h,
                                        class_name: d.contextOrFrameLookup(b, c, "class_name"),
                                        alt: i
                                    })])), a.autoesc), o += "\n            "
                                }
                                o += '\n\n            <div class="creditName">', o += d.suppressValue(j, a.autoesc), o += '</div>\n            <div class="creditTitle">\n                ', m && (o += '\n                    <em class="pinCreditPlaceBoardIcon"></em>\n                '), o += "\n                ", o += d.suppressValue(i, a.autoesc), o += "\n            </div>\n        ", o += d.contextOrFrameLookup(b, c, "use_link") ? "\n            </a>\n        " : "\n            </div>\n        ", o += "\n    "
                            }
                            return o += "\n    </div>\n", c = c.pop(), new d.SafeString(o)
                        });
                        b.addExport("block_pin_credit"), b.setVariable("block_pin_credit", l), h += "\n", e(null, h)
                    })
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["templates/macros/search_debug.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                var i = d.makeMacro(["data"], [], function(e, h) {
                    c = c.push(), h = h || {}, h.hasOwnProperty("caller") && c.set("caller", h.caller), c.set("data", e);
                    var i = "";
                    if (i += "\n    ", f = 1, g = 16, d.callWrap(d.memberLookup(e, "get", a.autoesc), 'data["get"]', ["debug"])) {
                        i += "\n        ";
                        var j;
                        j = a.getFilter("safe").call(b, a.getFilter("replace").call(b, a.getFilter("trim").call(b, a.getFilter("to_json").call(b, (f = 2, g = 29, d.callWrap(d.memberLookup(e, "get", a.autoesc), 'data["get"]', ["debug", ""])))), "\\n", "<br />")), c.set("debug", j, !0), c.parent || (b.setVariable("debug", j), b.addExport("debug")), i += "\n        ";
                        var k;
                        k = a.getFilter("safe").call(b, a.getFilter("replace").call(b, a.getFilter("trim").call(b, a.getFilter("to_json").call(b, (f = 3, g = 35, d.callWrap(d.memberLookup(e, "get", a.autoesc), 'data["get"]', ["experiments", ""])))), "\\n", "<br />")), c.set("experiments", k, !0), c.parent || (b.setVariable("experiments", k), b.addExport("experiments")), i += "\n    "
                    }
                    return i += "\n    ", d.contextOrFrameLookup(b, c, "debug") && (i += "\n        <div class='debugMacro'>\n            <pre>", i += d.suppressValue(d.contextOrFrameLookup(b, c, "debug"), a.autoesc), i += "</pre>\n            <pre>", i += d.suppressValue(d.contextOrFrameLookup(b, c, "experiments"), a.autoesc), i += "</pre>\n        </div>\n    "), i += "\n", c = c.pop(), new d.SafeString(i)
                });
                b.addExport("search_debug"), b.setVariable("search_debug", i), h += "\n", e(null, h)
            } catch (j) {
                e(d.handleError(j, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["templates/macros/visual_search.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                a.getTemplate("templates/macros/image.nunjucks", function(i, j) {
                    return i ? void e(i) : void j.getExported(function(i, j) {
                        if (i)
                            return void e(i);
                        if (!j.hasOwnProperty("image_tag"))
                            return void e(new Error("cannot import 'image_tag'"));
                        var k = j.image_tag;
                        b.setVariable("image_tag", k), h += "\n\n";
                        var l = d.makeMacro(["obj", "image"], [], function(e, h, i) {
                            c = c.push(), i = i || {}, i.hasOwnProperty("caller") && c.set("caller", i.caller), c.set("obj", e), c.set("image", h);
                            var j, k = "";
                            f = 3, g = 26, j = d.callWrap(d.memberLookup(h, "get", a.autoesc), 'image["get"]', ["width", 0]), c.set("width", j, !0), c.parent || (b.setVariable("width", j), b.addExport("width")), k += "\n    ";
                            var l;
                            f = 4, g = 27, l = d.callWrap(d.memberLookup(h, "get", a.autoesc), 'image["get"]', ["height", 0]), c.set("height", l, !0), c.parent || (b.setVariable("height", l), b.addExport("height")), k += "\n    ";
                            var m;
                            f = 5, g = 26, m = d.callWrap(d.memberLookup(e, "get", a.autoesc), 'obj["get"]', ["w", 1]) * d.contextOrFrameLookup(b, c, "width"), c.set("bbwidth", m, !0), c.parent || (b.setVariable("bbwidth", m), b.addExport("bbwidth")), k += "\n    ";
                            var n;
                            f = 6, g = 27, n = d.callWrap(d.memberLookup(e, "get", a.autoesc), 'obj["get"]', ["h", 1]) * d.contextOrFrameLookup(b, c, "height"), c.set("bbheight", n, !0), c.parent || (b.setVariable("bbheight", n), b.addExport("bbheight")), k += "\n    ";
                            var o;
                            f = 7, g = 24, o = d.callWrap(d.memberLookup(e, "get", a.autoesc), 'obj["get"]', ["theta", 0]), c.set("angle", o, !0), c.parent || (b.setVariable("angle", o), b.addExport("angle")), k += "\n\n    ";
                            var p;
                            p = 0, c.set("DILATION", p, !0), c.parent || (b.setVariable("DILATION", p), b.addExport("DILATION")), k += "\n\n    ";
                            var q;
                            f = 11, g = 23, q = d.callWrap(d.memberLookup(e, "get", a.autoesc), 'obj["get"]', ["x", 0]) * d.contextOrFrameLookup(b, c, "width") - d.contextOrFrameLookup(b, c, "DILATION") * d.contextOrFrameLookup(b, c, "bbwidth"), c.set("bbx1", q, !0), c.parent || (b.setVariable("bbx1", q), b.addExport("bbx1")), k += "\n    ";
                            var r;
                            f = 12, g = 23, r = d.callWrap(d.memberLookup(e, "get", a.autoesc), 'obj["get"]', ["y", 0]) * d.contextOrFrameLookup(b, c, "height") - d.contextOrFrameLookup(b, c, "DILATION") * d.contextOrFrameLookup(b, c, "bbheight"), c.set("bby1", r, !0), c.parent || (b.setVariable("bby1", r), b.addExport("bby1")), k += "\n    ";
                            var s;
                            s = d.contextOrFrameLookup(b, c, "bbx1") + d.contextOrFrameLookup(b, c, "bbwidth") * (1 + 2 * d.contextOrFrameLookup(b, c, "DILATION")), c.set("bbx2", s, !0), c.parent || (b.setVariable("bbx2", s), b.addExport("bbx2")), k += "\n    ";
                            var t;
                            t = d.contextOrFrameLookup(b, c, "bby1") + d.contextOrFrameLookup(b, c, "bbheight") * (1 + 2 * d.contextOrFrameLookup(b, c, "DILATION")), c.set("bby2", t, !0), c.parent || (b.setVariable("bby2", t), b.addExport("bby2")), k += "\n\n    ";
                            var u;
                            u = d.contextOrFrameLookup(b, c, "bbx1") >= 0 ? d.contextOrFrameLookup(b, c, "bbx1") : 0, c.set("bbx1", u, !0), c.parent || (b.setVariable("bbx1", u), b.addExport("bbx1")), k += "\n    ";
                            var v;
                            v = d.contextOrFrameLookup(b, c, "bby1") >= 0 ? d.contextOrFrameLookup(b, c, "bby1") : 0, c.set("bby1", v, !0), c.parent || (b.setVariable("bby1", v), b.addExport("bby1")), k += "\n    ";
                            var w;
                            w = d.contextOrFrameLookup(b, c, "bbx2") < d.contextOrFrameLookup(b, c, "width") ? d.contextOrFrameLookup(b, c, "bbx2") : d.contextOrFrameLookup(b, c, "width"), c.set("bbx2", w, !0), c.parent || (b.setVariable("bbx2", w), b.addExport("bbx2")), k += "\n    ";
                            var x;
                            x = d.contextOrFrameLookup(b, c, "bby2") < d.contextOrFrameLookup(b, c, "height") ? d.contextOrFrameLookup(b, c, "bby2") : d.contextOrFrameLookup(b, c, "height"), c.set("bby2", x, !0), c.parent || (b.setVariable("bby2", x), b.addExport("bby2")), k += "\n\n    ";
                            var y;
                            y = d.contextOrFrameLookup(b, c, "bbx2") - d.contextOrFrameLookup(b, c, "bbx1"), c.set("bbwidth", y, !0), c.parent || (b.setVariable("bbwidth", y), b.addExport("bbwidth")), k += "\n    ";
                            var z;
                            z = d.contextOrFrameLookup(b, c, "bby2") - d.contextOrFrameLookup(b, c, "bby1"), c.set("bbheight", z, !0), c.parent || (b.setVariable("bbheight", z), b.addExport("bbheight")), k += "\n\n    ";
                            var A;
                            if (A = .7, c.set("SHOW_WHOLE_IMAGE_THRESHOLD", A, !0), c.parent || (b.setVariable("SHOW_WHOLE_IMAGE_THRESHOLD", A), b.addExport("SHOW_WHOLE_IMAGE_THRESHOLD")), k += "\n    ", d.contextOrFrameLookup(b, c, "bbwidth") * d.contextOrFrameLookup(b, c, "bbheight") / (d.contextOrFrameLookup(b, c, "width") * d.contextOrFrameLookup(b, c, "height")) > d.contextOrFrameLookup(b, c, "SHOW_WHOLE_IMAGE_THRESHOLD")) {
                                k += "\n        ";
                                var B;
                                B = 0, c.set("bbx1", B, !0), c.parent || (b.setVariable("bbx1", B), b.addExport("bbx1")), k += "\n        ";
                                var C;
                                C = 0, c.set("bby1", C, !0), c.parent || (b.setVariable("bby1", C), b.addExport("bby1")), k += "\n        ";
                                var D;
                                D = d.contextOrFrameLookup(b, c, "width"), c.set("bbx2", D, !0), c.parent || (b.setVariable("bbx2", D), b.addExport("bbx2")), k += "\n        ";
                                var E;
                                E = d.contextOrFrameLookup(b, c, "height"), c.set("bby2", E, !0), c.parent || (b.setVariable("bby2", E), b.addExport("bby2")), k += "\n        ";
                                var F;
                                F = d.contextOrFrameLookup(b, c, "width"), c.set("bbwidth", F, !0), c.parent || (b.setVariable("bbwidth", F), b.addExport("bbwidth")), k += "\n        ";
                                var G;
                                G = d.contextOrFrameLookup(b, c, "height"), c.set("bbheight", G, !0), c.parent || (b.setVariable("bbheight", G), b.addExport("bbheight")), k += "\n    "
                            }
                            return k += '\n\n    <div style="position: absolute;\n            left: ', k += d.suppressValue(d.contextOrFrameLookup(b, c, "bbx1"), a.autoesc), k += "px;\n            top: ", k += d.suppressValue(d.contextOrFrameLookup(b, c, "bby1"), a.autoesc), k += "px;\n            width: ", k += d.suppressValue(d.contextOrFrameLookup(b, c, "bbwidth"), a.autoesc), k += "px;\n            height: ", k += d.suppressValue(d.contextOrFrameLookup(b, c, "bbheight"), a.autoesc), k += "px;\n            transform: rotate(", k += d.suppressValue(d.contextOrFrameLookup(b, c, "angle"), a.autoesc), k += "deg);\n            -ms-transform: rotate(", k += d.suppressValue(d.contextOrFrameLookup(b, c, "angle"), a.autoesc), k += "deg);\n            -webkit-transform: rotate(", k += d.suppressValue(d.contextOrFrameLookup(b, c, "angle"), a.autoesc), k += 'deg);\n            transform-origin: 0% 0%;\n            -ms-transform-origin: 0% 0%;\n            -webkit-transform-origin: 0% 0%; ">\n        <div class="visualSearchOverlayBox">\n            <img src=', k += d.suppressValue(d.memberLookup(h, "url", a.autoesc), a.autoesc), k += ' class="visualSearchOverlayBoxContent" style="\n                    left: -', k += d.suppressValue(d.contextOrFrameLookup(b, c, "bbx1"), a.autoesc), k += "px;\n                    top: -", k += d.suppressValue(d.contextOrFrameLookup(b, c, "bby1"), a.autoesc), k += "px;\n                    width: ", k += d.suppressValue(d.contextOrFrameLookup(b, c, "width"), a.autoesc), k += "px;\n                    height: ", k += d.suppressValue(d.contextOrFrameLookup(b, c, "height"), a.autoesc), k += "px;\n                    transform: rotate(", k += d.suppressValue( - d.contextOrFrameLookup(b, c, "angle"), a.autoesc), k += "deg);\n                    -ms-transform: rotate(", k += d.suppressValue( - d.contextOrFrameLookup(b, c, "angle"), a.autoesc), k += "deg);\n                    -webkit-transform: rotate(", k += d.suppressValue( - d.contextOrFrameLookup(b, c, "angle"), a.autoesc), k += "deg);\n                    transform-origin: ", k += d.suppressValue(d.contextOrFrameLookup(b, c, "bbx1"), a.autoesc), k += "px ", k += d.suppressValue(d.contextOrFrameLookup(b, c, "bby1"), a.autoesc), k += "px;\n                    -ms-transform-origin: ", k += d.suppressValue(d.contextOrFrameLookup(b, c, "bbx1"), a.autoesc), k += "px ", k += d.suppressValue(d.contextOrFrameLookup(b, c, "bby1"), a.autoesc), k += "px;\n                    -webkit-transform-origin: ", k += d.suppressValue(d.contextOrFrameLookup(b, c, "bbx1"), a.autoesc), k += "px ", k += d.suppressValue(d.contextOrFrameLookup(b, c, "bby1"), a.autoesc), k += 'px;\n                    " />\n        </div>\n    </div>', c = c.pop(), new d.SafeString(k)
                        });
                        b.addExport("visual_search_pin_overlay"), b.setVariable("visual_search_pin_overlay", l), h += "\n", e(null, h)
                    })
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    goog.provide("P.desktopUtil"), goog.require("P.HistoryManager"), goog.require("P.interfaces.HistoryManagerProvider"), P.scrollbarWidth = _.memoize(function() {
        var a = document.createElement("div");
        $(a).css({
            height: "100px",
            left: "100px",
            overflow: "scroll",
            position: "absolute",
            width: "100px"
        }), document.body.appendChild(a);
        var b = a.offsetWidth - a.clientWidth;
        return document.body.removeChild(a), b
    }), P.preloadImage = function(a, b, c) {
        var d = new Image;
        d.src = a, d.onload = b || P.NOOP, d.onerror = c || P.NOOP
    };
    var a = function() {};
    a.prototype.navigate = function(a, b) {
        var c = P.app;
        c.getHistoryManager().navigate(a, b || {})
    }, P.setHistoryNavigator(new a), P.supportCSSTransitions = _.memoize(function() {
        var a = document.createElement("p").style, b = "transition"in a || "WebkitTransition"in a || "MozTransition"in a || "msTransition"in a || "OTransition"in a;
        return b
    })
}(), function() {
    goog.provide("P.nuxUtils"), goog.require("P.event"), P.NuxUtils = {}, P.NuxUtils.MODULE_NAME_CLOSEUP = "Closeup", P.NuxUtils.MODULE_NAME_FEEDPAGE = "FeedPage", P.NuxUtils.MODULE_NAME_SEARCHPAGE = "SearchPage", P.NuxUtils.preventNavigationIfNecessary = function(a) {
        var b = a && a.data ? a.data.url: "";
        if (P.ExperienceManager.instance().isPlacedExperience(P.Experiences.Placement.WEB_HOME_TAKEOVER, P.Experiences.Experience.WEB_MANDATORY_AUTOBAHN)) {
            var c = P.router.get().resolve(b);
            if (!c)
                return P.NuxUtils.handleAutobahnExternalClick(a), !0;
            var d = c.module;
            if (d !== P.NuxUtils.MODULE_NAME_CLOSEUP && d !== P.NuxUtils.MODULE_NAME_FEEDPAGE && d !== P.NuxUtils.MODULE_NAME_SEARCHPAGE)
                return P.NuxUtils.handleAutobahnExternalClick(a), !0
        }
        return !1
    }, P.NuxUtils.handleAutobahnExternalClick = function(a) {
        P.trackRegisterAction("autobahn_disabled_link"), a.stopPropagation();
        var b = {
            name: "ConfirmDialog",
            options: {
                template: "autobahn_click_tip"
            }
        };
        P.loadModule(b).then(function(a) {
            P.app.showInModal(a, {
                mask_type: "dark",
                can_dismiss: !1
            })
        })
    }
}(), function() {
    goog.provide("P.animateIfSupported"), function() {
        $.fn.playAnimationIfSupported = function(a, b) {
            return this.each(function(c, d) {
                if (Modernizr.csstransforms3d) {
                    var e = $(d);
                    return e.resetKeyframe(), $(d).playKeyframe(a, b)
                }
                b && b()
            }), this
        }
    }()
}(), function() {
    goog.provide("P.reportMetrics");
    var a = P.Logger.getLogger("ReportMetrics"), b = {
        reportPageLoadMetrics: function() {
            if (Pc.reportPageLoadTimings) {
                var b = {};
                window.performance && (window.performance.getEntriesByType && (b.resourceTimings = window.performance.getEntriesByType("resource")), window.performance.navigation && (b.navigation = window.performance.navigation), window.performance.timing && (b.timing = window.performance.timing), _.isEmpty(b) || (P.PAGE_ROUTE_PATTERN && (b.routePattern = P.PAGE_ROUTE_PATTERN), a.logToServer(P.interfaces.SERVER_LOG_TYPE.PAGE_LOAD_METRIC, "post", b)))
            }
        }
    };
    $(window).on("load", function() {
        b.reportPageLoadMetrics()
    }), P.Errors.wrap(b, ["reportPageLoadMetrics"])
}(), function() {
    function a() {}
    goog.provide("P.desktopWindow"), goog.require("P.interfaces.IWindowManager"), _.extend(a.prototype, {
        open: function(a, b, c, d) {
            var e = this._makeWindowOptions(c, d);
            P.debugWindow = window.open(a, b, e)
        },
        _makeWindowOptions: function(a, b) {
            var c = screen.width, d = screen.height, e = Math.round((c - a) / 2), f = d > b ? Math.round((d - b) / 2): 0;
            return "scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=" + a + ",height=" + b + ",left=" + e + ",top=" + f
        },
        shrinkWrap: function() {
            this._resizeToFit()
        },
        contain: function() {
            this._resizeToFit(!0)
        },
        _resizeToFit: function(a) {
            var b = document.documentElement, c = b.scrollWidth - b.clientWidth, d = b.scrollHeight - b.clientHeight;
            a && (c = Math.max(c, 0), d = Math.max(d, 0)), window.resizeBy(c, d)
        }
    }), P.setWindowManager(new a)
}(), function() {
    goog.provide("P.sticky");
    var a = "sticky", b = "absolute", c = "below", d = b + " " + c, e = d + " " + a, f = a, g = 0, h = 1, i = 2;
    P.Sticky = function(a, b) {
        this.$el = a, this.elementHeight = null, this.headerHeight = b.headerHeight, this.boundElementHeight = null, this.$boundTo = b.$boundTo, this.$scrollable = b.$scrollable, this.updateFixed = this.updateFixed.bind(this), this._onScroll = this._onScroll.bind(this), this.$scrollable.on("scroll.sticky", this._onScroll), this.pendingScrollRAF=!1, this.lastState = null, P.deferDomManipulation(function() {
            this.elementHeight = a.height(), this.boundElementHeight = this.$boundTo.height()
        }.bind(this))
    }, _.extend(P.Sticky.prototype, Backbone.Events), P.Sticky.prototype.destroy = function() {
        this.$scrollable.off("scroll.sticky", this.updateFixed)
    }, P.Sticky.prototype.unSticky = function() {
        this.destroy()
    }, P.Sticky.prototype._onScroll = function() {
        this.pendingScrollRAF || (P.deferDomManipulation(function() {
            return this.scrollTop = this.$scrollable.scrollTop(), this.scrollTop === this.lastScrollTop ? void(this.pendingScrollRAF=!1) : (this.updateFixed(), this.lastScrollTop = this.scrollTop, void(this.pendingScrollRAF=!1))
        }.bind(this)), this.pendingScrollRAF=!0)
    }, P.Sticky.prototype.updateFixed = function() {
        var b, c = $(window), f = c.scrollTop(), j = f, k = this.$boundTo.offset().top, l = k - this.headerHeight, m = k + this.boundElementHeight - this.headerHeight;
        b = j >= l && j <= m ? h : j >= m ? i : g, b !== this.lastState && (b === h ? (this.$el.css("top", "").addClass(a).removeClass(d), this.trigger(P.CONST.EVENT_STICKY_FIXED, !0)) : b === i ? (this.$el.removeClass(a), this.trigger(P.CONST.EVENT_STICKY_FIXED, !1), this.handleReachingBottom()) : b === g && (this.$el.removeClass(e), this.trigger(P.CONST.EVENT_STICKY_NORMAL), this.trigger(P.CONST.EVENT_STICKY_FIXED, !1))), this.lastState = b
    }, P.Sticky.prototype.handleReachingBottom = function() {
        if (!this.$el.hasClass(d)) {
            var a = this.boundElementHeight || 0, e = this.$el.css("top");
            e = e ? e.split("px")[0] : 0, e = parseInt(e, 10) || 0, this.$el.addClass(b + " " + c).css("top", a + e + 1)
        }
    }, jQuery.fn.sticky = function(b) {
        return this.each(function(c, d) {
            var e = $(d), g = e.data(f);
            if (g && (g.destroy(), e.removeData(a)), "unsticky" === b);
            else if ("object" === typeof b) {
                var h = {
                    $scrollable: b.$scrollable,
                    $boundTo: b.$boundTo,
                    headerHeight: b.headerHeight || 0
                };
                b.$scrollable && (g = new P.Sticky(e, h), e.data(f, g))
            }
        }), this
    }
}(), function() {
    goog.provide("P.overflowingText"), jQuery.fn.overflowingText = function() {
        return this.each(function(a, b) {
            if (b.offsetHeight < b.scrollHeight || b.offsetWidth < b.scrollWidth) {
                var c = $(b);
                c.addClass(P.CONST.OVERFLOWING_TEXT_OVERFLOWING_CLASS)
            }
        }), this
    }
}(), function() {
    goog.provide("P.style"), P.Style = function(a, b) {
        P.Style.addStyle(a, b)
    }, P.Style.addStyle = function(a, b) {
        var c = a + "Styles", d = document.getElementById(c);
        d || (d = document.createElement("style"), d.setAttribute("type", "text/css"), d.setAttribute("id", c), document.getElementsByTagName("head")[0].appendChild(d)), d.styleSheet ? d.styleSheet.cssText = b : d.appendChild(document.createTextNode(b))
    }
}(), function() {
    jQuery.fn.flashScrollbar = function() {
        return this.each(function() {
            var a = $(this).scrollTop();
            $(this).scrollTop(a + 1), $(this).scrollTop(a - 1)
        }), this
    }
}(), goog.require("P.resourceFactory");
var LogLevelResource = function() {};
LogLevelResource.prototype = {
    callGet: function(a) {
        a = a || {};
        var b = P.getDebugWindow(), c = P.Logger.getAll();
        b && (c = b.P.Logger.getAll()), c = _.sortBy(c, function(a) {
            return a.name.toLowerCase()
        });
        for (var d = 3, e = Math.ceil(c.length / d), f = [], g = 0; g < d; g++) {
            for (var h = [], i = 0; i < e; i++) {
                var j = g * e + i;
                if (j >= c.length)
                    break;
                h.push(c[j])
            }
            f.push(h)
        }
        var k = new P.ResourceResponse;
        return k.resource_response.data = {
            levels: _.pairs(b.P.interfaces.LOG_LEVEL),
            loggerColumns: f
        }, a.success && a.success(k.resource_response.data), a.complete && a.complete(), Promise.resolve(k)
    },
    resetBookmark: function() {}
}, P.resourceFactory.register("LogLevelResource", LogLevelResource), function() {
    goog.provide("P.pushNotifications");
    var a = "web.com.pinterest.www";
    P.requestPushNotifications = function() {
        if (P.currentUser.isAuthenticated() && window.safari && window.safari.pushNotification) {
            var b = window.safari.pushNotification.permission(a);
            "default" === b.permission && window.safari.pushNotification.requestPermission("https://" + window.location.hostname + "/_/_/push", a, {}, function() {})
        }
    }
}(), function() {
    goog.provide("P.TutorialHelper"), P.TutorialHelper.startTutorialByPlacementId = function(a) {
        var b = P.ExperienceManager.instance(), c = b.getPlacedExperience(a);
        if (c) {
            var d = P.ExperienceManager.Tutorials[c.experience_id];
            d && (P.TutorialManager.instance().startTutorial(d), b.viewPlacedExperience(a, c.experience_id))
        }
    }
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/AddInterestButton/AddInterestButton.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n", h += d.suppressValue((f = 8, g = 1, d.callWrap(d.contextOrFrameLookup(b, c, "base"), "base", ["Button"])), a.autoesc), a.getTemplate("app/common/modules/Button/Button.nunjucks", !0, function(f, g) {
                    if (f)
                        return void e(f);
                    for (var i in g.blocks)
                        b.addBlock(i, g.blocks[i]);
                    h += "\n", g.rootRenderFunc(a, b, c, d, e)
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/AddPinToMap/AddPinToMap.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n";
                var i;
                if (f = 8, g = 34, i = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["pin_id"]), c.set("is_existing_pin", i, !0), c.parent || (b.setVariable("is_existing_pin", i), b.addExport("is_existing_pin")), h += "\n\n", h += d.suppressValue((f = 10, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["isEmpty"])), a.autoesc), h += "\n\n", d.contextOrFrameLookup(b, c, "data")) {
                    h += "\n    ";
                    var j;
                    j = d.contextOrFrameLookup(b, c, "data"), c.set("pin", j, !0), c.parent || (b.setVariable("pin", j), b.addExport("pin")), h += "\n    ";
                    var k;
                    k = d.memberLookup(d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "images", a.autoesc), "136x136", a.autoesc), "url", a.autoesc), c.set("square_image_url", k, !0), c.parent || (b.setVariable("square_image_url", k), b.addExport("square_image_url")), h += "\n"
                }
                h += "\n\n";
                var l;
                f = 17, g = 20, l = d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Pick a place"]), c.set("header_text", l, !0), c.parent || (b.setVariable("header_text", l), b.addExport("header_text")), h += "\n", d.contextOrFrameLookup(b, c, "is_existing_pin") ? (h += "\n    ", h += d.suppressValue((f = 19, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["addingExistingPin"])), a.autoesc), h += "\n") : (h += "\n    ", h += d.suppressValue((f = 21, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["addingNewPin"])), a.autoesc), h += "\n"), h += '\n\n<div class="header">\n    <h2>', h += d.suppressValue(d.contextOrFrameLookup(b, c, "header_text"), a.autoesc), h += "</h2>\n    ", h += "\n    ", h += d.suppressValue((f = 31, g = 11, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    id: "closeButton",
                    options: {
                        class_name: "closeButton",
                        text: (f = 35, g = 21, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Close"])),
                        has_icon: !1,
                        cancelButton: !0
                    }
                })])), a.autoesc), h += "\n</div>\n\n", d.contextOrFrameLookup(b, c, "is_existing_pin") && (h += '\n    <div class="pinSquareImageWrapper">\n        <img src="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "square_image_url"), a.autoesc), h += '" alt="" class="pinSquareImage">\n        <p class="description">', h += d.suppressValue((f = 45, g = 39, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["description"])), a.autoesc), h += "</p>\n    </div>\n"), h += '\n\n<div class="typeaheadWrapper">\n    ', h += d.suppressValue((f = 50, g = 11, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["PlaceSelector", d.makeKeywordArgs({
                    id: "placeSelector",
                    options: {
                        set_input_value_on_selection: !0,
                        show_remove_place_button: !1,
                        show_caret: !1,
                        preserve_typeahead: !0,
                        show_hints: !1,
                        num_places: 10,
                        writable: !0
                    }
                })])), a.autoesc), h += "\n</div>\n\n<div class='emptyState'>\n    <div class='compassIcon'></div>\n    <h3 class='searchTipsHeader'>", h += d.suppressValue((f = 66, g = 35, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Search Tips"])), a.autoesc), h += "</h3>\n    <div class=\"break topBreak\"></div>\n    <div class='searchTipsContainer'>\n        <p class='searchTip'>\n            ", h += d.suppressValue((f = 70, g = 14, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Try your place name and a location:"])), a.autoesc), h += "<br>\n            ", h += "\n            ", h += d.suppressValue((f = 75, g = 14, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["e.g."])), a.autoesc), h += ' <em class="exampleQuery">Science museum near London</em>\n        </p>\n    </div>\n    <div class="break bottomBreak"></div>\n</div>\n\n<div class="noResultState">\n    <p class="noResults">', h += d.suppressValue((f = 82, g = 27, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Sorry, we couldn't find that"])), a.autoesc), h += '</p>\n    <div class="break bottomBreak topBreak"></div>\n    <div class="noResultHelperText">\n        <p class="noResultHelper">', h += d.suppressValue((f = 85, g = 36, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Double-check the spelling or try a different name."])), a.autoesc), h += '</p>\n    </div>\n</div>\n\n<div class="poweredByFoursquare">\n    <a  href="https://foursquare.com"\n        class="poweredByFoursquareLink external"\n        rel="nofollow">\n        ', h += d.suppressValue((f = 93, g = 10, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Powered by Foursquare"])), a.autoesc), h += "\n    </a>\n</div>\n", e(null, h)
            } catch (m) {
                e(d.handleError(m, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/AddPinToMap/pinFormMetadata.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                var i;
                i = d.contextOrFrameLookup(b, c, "category") || "", c.set("category", i, !0), c.parent || (b.setVariable("category", i), b.addExport("category")), h += "\n";
                var j;
                j = d.contextOrFrameLookup(b, c, "hideLocalityAndRegion") ||!1, c.set("hideLocalityAndRegion", j, !0), c.parent || (b.setVariable("hideLocalityAndRegion", j), b.addExport("hideLocalityAndRegion")), h += "\n";
                var k;
                k = d.contextOrFrameLookup(b, c, "region") || "", c.set("region", k, !0), c.parent || (b.setVariable("region", k), b.addExport("region")), h += "\n";
                var l;
                l = d.contextOrFrameLookup(b, c, "street") || "", c.set("street", l, !0), c.parent || (b.setVariable("street", l), b.addExport("street")), h += "\n";
                var m;
                m = d.contextOrFrameLookup(b, c, "locality") || "", c.set("locality", m, !0), c.parent || (b.setVariable("locality", m), b.addExport("locality")), h += '\n\n<p class="typeaheadResultMetaData">\n    ', d.contextOrFrameLookup(b, c, "category") && (h += '\n        <strong class="typeaheadPlaceType">\n            ', h += d.suppressValue(d.contextOrFrameLookup(b, c, "category"), a.autoesc), h += "\n        </strong>\n        ", (d.contextOrFrameLookup(b, c, "street") || d.contextOrFrameLookup(b, c, "locality") || d.contextOrFrameLookup(b, c, "region")) && (h += "\n            &bull;\n        "), h += "\n    "), h += '\n    <span class="typeaheadPlaceDistrict">\n        ', d.contextOrFrameLookup(b, c, "street") && (h += "\n            ", h += d.suppressValue(d.contextOrFrameLookup(b, c, "street"), a.autoesc), h += " \n        "), h += "\n        ", d.contextOrFrameLookup(b, c, "hideLocalityAndRegion") || (h += "\n                ", h += d.suppressValue(d.contextOrFrameLookup(b, c, "locality"), a.autoesc), d.contextOrFrameLookup(b, c, "locality") && d.contextOrFrameLookup(b, c, "region") && (h += ", "), h += "\n            ", d.contextOrFrameLookup(b, c, "region") && (h += "\n                ", h += d.suppressValue(d.contextOrFrameLookup(b, c, "region"), a.autoesc), h += "\n            "), h += "\n        "), h += "\n    </span>\n</p>\n", e(null, h)
            } catch (n) {
                e(d.handleError(n, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/AddPinToMap/uploadedImage.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                var i;
                i = d.contextOrFrameLookup(b, c, "image_url") || "", c.set("image_url", i, !0), c.parent || (b.setVariable("image_url", i), b.addExport("image_url")), h += '\n\n<div class="imageWrapper selected">\n    <img class="uploadedImage" src="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "image_url"), a.autoesc), h += '">\n    <div class="hoverSelectedStateIconWrapper">\n    <em class="icon"></em>\n    </div>\n</div>\n', e(null, h)
            } catch (j) {
                e(d.handleError(j, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/BoardFollowers/BoardFollowers.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n", b.getBlock("large_view")(a, b, c, d, function(a, b) {
                    return a ? void e(a) : (h += b, h += "\n", void e(null, h))
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function b(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n    ", h += d.suppressValue((f = 9, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["large"])), a.autoesc), h += '\n    <div class="standardForm">\n        <h1>\n            <span class="title">', h += d.suppressValue((f = 12, g = 34, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Followers"])), a.autoesc), h += '</span>\n            <span class="headerText">&bull;</span>\n            ', h += '\n            <span class="headerText">', h += d.suppressValue((f = 15, g = 39, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", [(f = 15, g = 51, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["follower_count"]))])), a.autoesc), h += "</span>\n        </h1>\n\n        ", h += d.suppressValue((f = 18, g = 15, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["PagedGrid", d.makeKeywordArgs({
                    options: {
                        grid_options: {
                            layout: "fixed_height",
                            minimum_num_columns: 1,
                            item_options: {
                                view_type: "thumb"
                            },
                            pad_items: !1
                        },
                        more_items_button_options: {
                            text: (f = 29, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Load More Followers"]))
                        }
                    },
                    data: d.contextOrFrameLookup(b, c, "data"),
                    resource: d.contextOrFrameLookup(b, c, "resource")
                })])), a.autoesc), h += "\n    </div>\n\n", e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            b_large_view: b,
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/BoardHeader/BoardHeader.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                a.getTemplate("templates/macros/format.nunjucks", function(i, j) {
                    return i ? void e(i) : void j.getExported(function(i, j) {
                        if (i)
                            return void e(i);
                        if (!j.hasOwnProperty("count_text_follower"))
                            return void e(new Error("cannot import 'count_text_follower'"));
                        var k = j.count_text_follower;
                        b.setVariable("count_text_follower", k), h += "\n", a.getTemplate("templates/macros/format.nunjucks", function(i, j) {
                            return i ? void e(i) : void j.getExported(function(i, j) {
                                if (i)
                                    return void e(i);
                                if (!j.hasOwnProperty("count_text_pin"))
                                    return void e(new Error("cannot import 'count_text_pin'"));
                                var l = j.count_text_pin;
                                b.setVariable("count_text_pin", l), h += "\n\n";
                                var m;
                                m = d.contextOrFrameLookup(b, c, "data"), c.set("board", m, !0), c.parent || (b.setVariable("board", m), b.addExport("board")), h += "\n";
                                var n;
                                f = 4, g = 25, n = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["id"]), c.set("board_id", n, !0), c.parent || (b.setVariable("board_id", n), b.addExport("board_id")), h += "\n";
                                var o;
                                f = 5, g = 22, o = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["owner"]), c.set("owner", o, !0), c.parent || (b.setVariable("owner", o), b.addExport("owner")), h += "\n";
                                var p;
                                f = 6, g = 28, p = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["annotations"]) || [], c.set("annotations", p, !0), c.parent || (b.setVariable("annotations", p), b.addExport("annotations")), h += "\n";
                                var q;
                                f = 7, g = 41, q = d.callWrap(k, "count_text_follower", [(f = 7, g = 51, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["follower_count"])), !0]), c.set("follower_count", q, !0), c.parent || (b.setVariable("follower_count", q), b.addExport("follower_count")), h += "\n";
                                var r;
                                f = 8, g = 31, r = d.callWrap(l, "count_text_pin", [(f = 8, g = 41, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["pin_count"])), !0]), c.set("pin_count", r, !0), c.parent || (b.setVariable("pin_count", r), b.addExport("pin_count")), h += "\n";
                                var s;
                                s = "secret" == (f = 9, g = 25, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["privacy"])), c.set("isSecret", s, !0), c.parent || (b.setVariable("isSecret", s), b.addExport("isSecret")), h += "\n";
                                var t;
                                t = a.getFilter("contains").call(b, (f = 10, g = 25, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["access", []])), "write"), c.set("can_edit", t, !0), c.parent || (b.setVariable("can_edit", t), b.addExport("can_edit")), h += "\n";
                                var u;
                                u = "places" == (f = 11, g = 31, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["layout"])), c.set("is_place_board", u, !0), c.parent || (b.setVariable("is_place_board", u), b.addExport("is_place_board")), h += "\n\n";
                                var v;
                                if (f = 13, g = 67, v = d.callWrap(d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "experiments", a.autoesc), "in_experiment_groups", a.autoesc), 'context["experiment"]["in_experim"]', ["board_fixed_design", ["enabled2", "employees"]]), c.set("in_board_header_exp", v, !0), c.parent || (b.setVariable("in_board_header_exp", v), b.addExport("in_board_header_exp")), h += "\n", d.contextOrFrameLookup(b, c, "in_board_header_exp")&&!d.contextOrFrameLookup(b, c, "is_place_board")) {
                                    h += "\n    ", h += d.suppressValue((f = 16, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["newBoardHeader"])), a.autoesc), h += "\n    ", h += d.suppressValue((f = 17, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["gridWidth"])), a.autoesc), h += "\n    ";
                                    var w;
                                    w = "centeredWithinWrapper", c.set("wrapper_classes", w, !0), c.parent || (b.setVariable("wrapper_classes", w), b.addExport("wrapper_classes")), h += "\n"
                                }
                                if (h += '\n\n\n<div class="boardHeaderWrapper ', h += d.suppressValue(d.contextOrFrameLookup(b, c, "wrapper_classes"), a.autoesc), h += '">\n\n    <h1 class="boardName">', h += d.suppressValue((f = 24, g = 36, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["name"])), a.autoesc), h += '</h1>\n    <p class="description">', h += d.suppressValue((f = 25, g = 37, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["description"])), a.autoesc), h += " </p>\n\n    ", d.contextOrFrameLookup(b, c, "isSecret") && (h += '\n            <p class="secret">\n                <span class="secretIcon">', h += d.suppressValue(a.getFilter("upper").call(b, (f = 29, g = 43, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Secret Board"]))), a.autoesc), h += "</span>\n                ", h += d.suppressValue(a.getFilter("upper").call(b, (f = 30, g = 18, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["This board is secret."]))), a.autoesc), h += "\n            </p>\n    "), h += "\n\n    ", d.contextOrFrameLookup(b, c, "is_place_board") && d.contextOrFrameLookup(b, c, "can_edit") && (h += '\n        <div class="addPinToMapButton">\n            ', h += d.suppressValue((f = 36, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["ShowModalButton", d.makeKeywordArgs({
                                    id: "addToMap",
                                    options: {
                                        text: (f = 39, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Add a place"])),
                                        has_icon: !0,
                                        show_text: !0,
                                        show_modal_options: {
                                            presentation_type: d.memberLookup(d.contextOrFrameLookup(b, c, "ModalPresentationTypes"), "PANEL", a.autoesc)
                                        },
                                        class_name: "addAPlace",
                                        submodule: {
                                            name: "AddPinToMap",
                                            options: {
                                                board_id: (f = 49, g = 49, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["id"])),
                                                pin_id: d.contextOrFrameLookup(b, c, "none")
                                            }
                                        }
                                    }
                                })])), a.autoesc), h += "\n        </div>\n    "), h += "\n\n    ", !d.contextOrFrameLookup(b, c, "in_board_header_exp") || d.contextOrFrameLookup(b, c, "is_place_board") ? (h += '\n        <div class="pinsAndFollowerCount">\n            <span class="pinCount">', h += d.suppressValue((f = 60, g = 37, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", [d.contextOrFrameLookup(b, c, "pin_count")])), a.autoesc), h += "</span>\n            ", d.contextOrFrameLookup(b, c, "isSecret") || (h += '\n                <span class="dot">&bull;</span>\n                ', h += d.suppressValue((f = 63, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["ShowModalButton", d.makeKeywordArgs({
                                    id: "followerCount",
                                    options: {
                                        ga_category: "follower_view",
                                        class_name: "followerCount",
                                        borderless: !0,
                                        has_icon: !0,
                                        text: d.contextOrFrameLookup(b, c, "follower_count"),
                                        submodule: {
                                            name: "BoardFollowers",
                                            options: {
                                                follower_count: d.contextOrFrameLookup(b, c, "follower_count")
                                            },
                                            resource: {
                                                name: "BoardFollowersResource",
                                                options: {
                                                    board_id: d.contextOrFrameLookup(b, c, "board_id"),
                                                    field_set_key: "grid_item"
                                                }
                                            }
                                        }
                                    }
                                })])), a.autoesc), h += "\n            "), h += "\n        </div>\n    ") : h += '\n        <div class="divider">\n            <hr>\n        </div>\n    ', h += "\n\n</div>\n", f = 95, g = 43, d.callWrap(d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "experiments", a.autoesc), "in_experiment_group", a.autoesc), 'context["experiment"]["in_experim"]', ["board_annotation", "enabled"])) {
                                    if (h += "\n    ", d.contextOrFrameLookup(b, c, "annotations")) {
                                        h += '\n        <div class="annotations">\n            <div class="annotationHeader">\n                ', h += d.suppressValue((f = 99, g = 18, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Related:"])), a.autoesc), h += "\n            </div>\n            ", c = c.push();
                                        var x = a.getFilter("sub").call(b, d.contextOrFrameLookup(b, c, "annotations"), 0, 8);
                                        if (x)
                                            for (var y = x.length, z = 0; z < x.length; z++) {
                                                var A = x[z];
                                                c.set("term", A), c.set("loop.index", z + 1), c.set("loop.index0", z), c.set("loop.revindex", y - z), c.set("loop.revindex0", y - z - 1), c.set("loop.first", 0 === z), c.set("loop.last", z === y - 1), c.set("loop.length", y), h += '\n                <div class="annotationText">\n                    <a href="/explore/', h += d.suppressValue(A, a.autoesc), h += '/">', h += d.suppressValue((f = 103, g = 58, d.callWrap(d.memberLookup(A, "title", a.autoesc), 'term["title"]', [])), a.autoesc), h += "</a>\n                </div>\n            "
                                            }
                                        c = c.pop(), h += "\n        </div>\n    "
                                    }
                                    h += "\n"
                                }
                                h += "\n\n", b.getBlock("info_bar")(a, b, c, d, function(a, b) {
                                    return a ? void e(a) : (h += b, h += "\n", void e(null, h))
                                })
                            })
                        })
                    })
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function b(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n    ", h += d.suppressValue((f = 111, g = 11, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["BoardInfoBar", d.makeKeywordArgs({
                    data: d.contextOrFrameLookup(b, c, "data"),
                    options: d.contextOrFrameLookup(b, c, "options"),
                    resource: d.contextOrFrameLookup(b, c, "resource")
                })])), a.autoesc), h += "\n", e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            b_info_bar: b,
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/BoardInfoBar/BoardInfoBar.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n", a.getTemplate("templates/macros/format.nunjucks", function(i, j) {
                    return i ? void e(i) : void j.getExported(function(i, j) {
                        if (i)
                            return void e(i);
                        if (!j.hasOwnProperty("count_text"))
                            return void e(new Error("cannot import 'count_text'"));
                        var k = j.count_text;
                        b.setVariable("count_text", k), h += "\n", a.getTemplate("templates/macros/format.nunjucks", function(i, j) {
                            return i ? void e(i) : void j.getExported(function(i, j) {
                                if (i)
                                    return void e(i);
                                if (!j.hasOwnProperty("count_text_follower"))
                                    return void e(new Error("cannot import 'count_text_follower'"));
                                var k = j.count_text_follower;
                                b.setVariable("count_text_follower", k), h += "\n", a.getTemplate("templates/macros/format.nunjucks", function(i, j) {
                                    return i ? void e(i) : void j.getExported(function(i, j) {
                                        if (i)
                                            return void e(i);
                                        if (!j.hasOwnProperty("count_text_pin"))
                                            return void e(new Error("cannot import 'count_text_pin'"));
                                        var k = j.count_text_pin;
                                        b.setVariable("count_text_pin", k), h += "\n\n\n";
                                        var l;
                                        l = d.contextOrFrameLookup(b, c, "data"), c.set("board", l, !0), c.parent || (b.setVariable("board", l), b.addExport("board")), h += "\n";
                                        var m;
                                        f = 15, g = 25, m = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["id"]), c.set("board_id", m, !0), c.parent || (b.setVariable("board_id", m), b.addExport("board_id")), h += "\n";
                                        var n;
                                        n = a.getFilter("contains").call(b, (f = 16, g = 25, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["access", []])), "write"), c.set("can_edit", n, !0), c.parent || (b.setVariable("can_edit", n), b.addExport("can_edit")), h += "\n\n";
                                        var o;
                                        o = "secret" == (f = 18, g = 26, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["privacy"])), c.set("is_secret", o, !0), c.parent || (b.setVariable("is_secret", o), b.addExport("is_secret")), h += "\n";
                                        var p;
                                        p = d.contextOrFrameLookup(b, c, "is_place_board") ||!1, c.set("is_place_board", p, !0), c.parent || (b.setVariable("is_place_board", p), b.addExport("is_place_board")), h += "\n\n";
                                        var q;
                                        q = "collaborators", c.set("collaborators_class", q, !0), c.parent || (b.setVariable("collaborators_class", q), b.addExport("collaborators_class")), h += "\n";
                                        var r;
                                        r=!1, c.set("hide_send_button_text", r, !0), c.parent || (b.setVariable("hide_send_button_text", r), b.addExport("hide_send_button_text")), h += "\n\n", d.contextOrFrameLookup(b, c, "is_place_board") || (h += "\n    ", h += d.suppressValue((f = 25, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["boardHeaderBackground"])), a.autoesc), h += "\n"), h += "\n\n";
                                        var s;
                                        s = d.contextOrFrameLookup(b, c, "collaborators_class") || "metaLeft", c.set("collaborators_class", s, !0), c.parent || (b.setVariable("collaborators_class", s), b.addExport("collaborators_class")), h += "\n";
                                        var t;
                                        t = d.contextOrFrameLookup(b, c, "thumb_slots") || 7, c.set("thumb_slots", t, !0), c.parent || (b.setVariable("thumb_slots", t), b.addExport("thumb_slots")), h += "\n";
                                        var u;
                                        u = d.contextOrFrameLookup(b, c, "hide_send_button_text") ||!1, c.set("hide_send_button_text", u, !0), c.parent || (b.setVariable("hide_send_button_text", u), b.addExport("hide_send_button_text")), h += "\n";
                                        var v;
                                        if (f = 31, g = 67, v = d.callWrap(d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "experiments", a.autoesc), "in_experiment_groups", a.autoesc), 'context["experiment"]["in_experim"]', ["board_fixed_design", ["enabled2", "employees"]]), c.set("in_board_header_exp", v, !0), c.parent || (b.setVariable("in_board_header_exp", v), b.addExport("in_board_header_exp")), h += "\n\n", d.contextOrFrameLookup(b, c, "in_board_header_exp")) {
                                            if (h += "\n    ", d.contextOrFrameLookup(b, c, "is_place_board"))
                                                h += "\n        ", h += d.suppressValue((f = 36, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["newPlaceBoardHeader"])), a.autoesc), h += "\n    ";
                                            else {
                                                h += "\n        ", h += d.suppressValue((f = 38, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["newBoardHeader"])), a.autoesc), h += "\n        ";
                                                var w;
                                                w = "gridWidth centeredWithinWrapper", c.set("wrapper_classes", w, !0), c.parent || (b.setVariable("wrapper_classes", w), b.addExport("wrapper_classes")), h += "\n    "
                                            }
                                            h += "\n"
                                        } else 
                                            d.contextOrFrameLookup(b, c, "is_place_board") || (h += "\n    ", h += d.suppressValue((f = 42, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["gridWidth"])), a.autoesc), h += "\n    ", h += d.suppressValue((f = 43, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["centeredWithinWrapper"])), a.autoesc), h += "\n");
                                        h += "\n\n", h += d.suppressValue((f = 46, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "include_data"), "include_data", ["id"])), a.autoesc), h += "\n\n", h += '\n<div class="infoBarWrapper ', h += d.suppressValue(d.contextOrFrameLookup(b, c, "wrapper_classes"), a.autoesc), h += '">\n    ', b.getBlock("interact_button")(a, b, c, d, function(f, g) {
                                            return f ? void e(f) : (h += g, h += "\n\n    ", void b.getBlock("send_board_pinner")(a, b, c, d, function(f, g) {
                                                return f ? void e(f) : (h += g, h += "\n\n    ", void b.getBlock("gear_menu")(a, b, c, d, function(f, g) {
                                                    return f ? void e(f) : (h += g, h += "\n\n    ", void b.getBlock("collaborators")(a, b, c, d, function(f, g) {
                                                        return f ? void e(f) : (h += g, h += "\n\n    ", void b.getBlock("board_information")(a, b, c, d, function(f, g) {
                                                            return f ? void e(f) : (h += g, h += "\n\n    ", void b.getBlock("embed_board")(a, b, c, d, function(a, b) {
                                                                return a ? void e(a) : (h += b, h += "\n</div>\n", void e(null, h))
                                                            }))
                                                        }))
                                                    }))
                                                }))
                                            }))
                                        })
                                    })
                                })
                            })
                        })
                    })
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function b(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                if (h += '\n        <div class="boardButtons">\n        ', d.contextOrFrameLookup(b, c, "can_edit"))
                    h += "\n            ", h += d.suppressValue((f = 60, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["ShowModalButton", d.makeKeywordArgs({
                        id: "editButton",
                        options: {
                            ga_category: "board_edit",
                            text: (f = 64, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Edit Board"])),
                            class_name: "boardEditButton",
                            submodule: {
                                name: "BoardEdit",
                                resource: {
                                    name: "BoardResource",
                                    options: {
                                        board_id: d.contextOrFrameLookup(b, c, "board_id"),
                                        field_set_key: "edit"
                                    }
                                },
                                options: {
                                    next_url: (f = 76, g = 49, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["url"]) + "edit/"),
                                    is_edit: !0
                                }
                            }
                        }
                    })])), a.autoesc), h += "\n        ";
                else {
                    h += "\n            ";
                    var i;
                    i = a.getFilter("named_format").call(b, (f = 83, g = 30, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["You are now following {( board_name }}."])), {
                        board_name: (f = 84, g = 96, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["name"]))
                    }), c.set("memo_text", i, !0), c.parent || (b.setVariable("memo_text", i), b.addExport("memo_text")), h += "\n            ";
                    var j;
                    f = 85, g = 38, j = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["followed_by_me"]) && "1" == (f = 85, g = 72, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["show_follow_memo"])), c.set("show_memo", j, !0), c.parent || (b.setVariable("show_memo", j), b.addExport("show_memo")), h += "\n            ", h += d.suppressValue((f = 86, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["BoardFollowButton", d.makeKeywordArgs({
                        options: {
                            board_id: d.contextOrFrameLookup(b, c, "board_id"),
                            class_name: "boardFollowUnfollowButton",
                            followed: (f = 90, g = 41, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["followed_by_me"])),
                            follow_text: (f = 91, g = 36, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Follow Board"])),
                            unfollow_text: (f = 92, g = 38, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Unfollow Board"])),
                            follow_class: "primary",
                            memo: {
                                position_point: "BOTTOM_CENTER",
                                title: d.contextOrFrameLookup(b, c, "memo_text"),
                                topic: "auto_follow",
                                show: d.contextOrFrameLookup(b, c, "show_memo")
                            }
                        }
                    })])), a.autoesc), h += "\n        "
                }
                h += "\n    ", e(null, h)
            } catch (k) {
                e(d.handleError(k, f, g))
            }
        }
        function c(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                if (h += "\n        ", d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "is_authenticated", a.autoesc)&&!d.contextOrFrameLookup(b, c, "is_secret")&&!d.contextOrFrameLookup(b, c, "can_edit")) {
                    h += "\n            ";
                    var i;
                    f = 107, g = 32, i = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["url"]), c.set("url", i, !0), c.parent || (b.setVariable("url", i), b.addExport("url")), h += "\n            ";
                    var j;
                    j = {
                        name: "SendBoard",
                        options: {
                            object_id: d.contextOrFrameLookup(b, c, "board_id"),
                            object_image_url: (f = 112, g = 49, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["image_cover_url"])),
                            object_description: (f = 113, g = 51, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["description"])),
                            object_url: d.contextOrFrameLookup(b, c, "url")
                        }
                    }, c.set("send_module", j, !0), c.parent || (b.setVariable("send_module", j), b.addExport("send_module")), h += "\n\n            ";
                    var k;
                    k=!1, c.set("display_loading", k, !0), c.parent || (b.setVariable("display_loading", k), b.addExport("display_loading")), h += "\n            ", h += d.suppressValue((f = 119, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["DropdownButton", d.makeKeywordArgs({
                        options: {
                            class_name: "sendInfoBar",
                            has_icon: !0,
                            text: (f = 123, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Send Board"])),
                            show_text: d.contextOrFrameLookup(b, c, "hide_send_button_text")?!1: !0,
                            check_limited_login: !0,
                            dropdown_options: {
                                display_while_loading: d.contextOrFrameLookup(b,
                                c,
                                "display_loading"),
                                class_name: "underneathHeader",
                                fixed: !1,
                                manually_close: !0,
                                position_point: "BOTTOM_RIGHT",
                                caret_style: "whiteWash"
                            },
                            module: {
                                name: "SendBoard",
                                options: {
                                    object_id: d.contextOrFrameLookup(b,
                                    c,
                                    "board_id"),
                                    object_image_url: (f = 138,
                                    g = 57,
                                    d.callWrap(d.memberLookup(d.contextOrFrameLookup(b,
                                    c,
                                    "board"),
                                    "get",
                                    a.autoesc),
                                    'board["get"]',
                                    ["image_cover_url"])),
                                    object_description: (f = 139,
                                    g = 59,
                                    d.callWrap(d.memberLookup(d.contextOrFrameLookup(b,
                                    c,
                                    "board"),
                                    "get",
                                    a.autoesc),
                                    'board["get"]',
                                    ["description"])),
                                    object_url: d.contextOrFrameLookup(b,
                                    c,
                                    "url")
                                }
                            }
                        }
                    })])), a.autoesc), h += "\n        "
                }
                h += "\n    ", e(null, h)
            } catch (l) {
                e(d.handleError(l, f, g))
            }
        }
        function d(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                if (h += "\n        ", d.contextOrFrameLookup(b, c, "can_edit")) {
                    if (h += "\n            ", d.contextOrFrameLookup(b, c, "in_board_header_exp")) {
                        h += "\n                ";
                        var i;
                        i = "newSettingsButton", c.set("dropdown_menu_classes", i, !0), c.parent || (b.setVariable("dropdown_menu_classes", i), b.addExport("dropdown_menu_classes")), h += "\n            "
                    } else {
                        h += "\n                ";
                        var j;
                        j = "userProfileMenu", c.set("dropdown_menu_classes", j, !0), c.parent || (b.setVariable("dropdown_menu_classes", j), b.addExport("dropdown_menu_classes")), h += "\n            "
                    }
                    h += "\n\n            ", h += d.suppressValue((f = 156, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["DropdownButton", d.makeKeywordArgs({
                        id: "boardMenu",
                        options: {
                            has_icon: !0,
                            class_name: d.contextOrFrameLookup(b, c, "dropdown_menu_classes"),
                            view_type: "guided",
                            show_text: !1,
                            text: (f = 163, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Board Menu"])),
                            dropdown_options: {
                                class_name: "userDropdown underneathHeader",
                                position_point: "BOTTOM_RIGHT",
                                view_type: "guided",
                                force_in_viewport: !0
                            },
                            module: {
                                name: "UserDropdown",
                                options: {
                                    board: d.contextOrFrameLookup(b,
                                    c,
                                    "board"),
                                    view_type: "board",
                                    user_id: d.contextOrFrameLookup(b,
                                    c,
                                    "user_id"),
                                    user: d.contextOrFrameLookup(b,
                                    c,
                                    "user")
                                }
                            }
                        }
                    })])), a.autoesc), h += "\n        "
                }
                h += "\n        </div>\n    ", e(null, h)
            } catch (k) {
                e(d.handleError(k, f, g))
            }
        }
        function e(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n        ";
                var i;
                f = 186, g = 30, i = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["owner", {}
                ]), c.set("owner", i, !0), c.parent || (b.setVariable("owner", i), b.addExport("owner")), h += "\n        ";
                var j;
                if (f = 187, g = 38, j=!d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["is_collaborative"]), c.set("show_name", j, !0), c.parent || (b.setVariable("show_name", j), b.addExport("show_name")), h += '\n\n        <div class="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "collaborators_class"), a.autoesc), d.contextOrFrameLookup(b, c, "show_name") && (h += " showName"), h += '">\n            ', d.contextOrFrameLookup(b, c, "in_board_header_exp")) {
                    h += "\n                ", h += d.suppressValue((f = 191, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["User", d.makeKeywordArgs({
                        options: {
                            view_type: "thumb",
                            inline: !0,
                            size: "small",
                            show_follow_button: !1,
                            show_name: d.contextOrFrameLookup(b, c, "show_name")
                        },
                        data: d.contextOrFrameLookup(b, c, "owner"),
                        resource: (f = 200, g = 44, d.callWrap(d.contextOrFrameLookup(b, c, "create_resource"), "create_resource", ["UserResource", d.makeKeywordArgs({
                            options: {
                                user_id: d.memberLookup(d.contextOrFrameLookup(b, c, "owner"), "id", a.autoesc),
                                field_set_key: "thumb"
                            }
                        })]))
                    })])), a.autoesc), h += "\n                ";
                    var k;
                    k = d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "user", a.autoesc) && d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "user", a.autoesc), "id", a.autoesc) == (f = 207, g = 92, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "owner"), "get", a.autoesc), 'owner["get"]', ["id"])), c.set("current_user_owns_board", k, !0), c.parent || (b.setVariable("current_user_owns_board", k), b.addExport("current_user_owns_board")), h += "\n                ";
                    var l;
                    f = 208, g = 51, l = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["collaborated_by_me"]), c.set("collaborated_by_me", l, !0), c.parent || (b.setVariable("collaborated_by_me", l), b.addExport("collaborated_by_me")), h += "\n                ";
                    var m;
                    if (m = 3, c.set("thumb_slots", m, !0), c.parent || (b.setVariable("thumb_slots", m), b.addExport("thumb_slots")), h += "\n                ", f = 210, g = 29, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["is_collaborative"]) && (h += "\n                    ", h += d.suppressValue((f = 211, g = 27, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["BoardCollaborators", d.makeKeywordArgs({
                        resource: (f = 212, g = 48, d.callWrap(d.contextOrFrameLookup(b, c, "create_resource"), "create_resource", ["BoardCollaboratorsResource", d.makeKeywordArgs({
                            options: {
                                board_id: d.contextOrFrameLookup(b, c, "board_id")
                            }
                        })])),
                        options: {
                            board_id: d.contextOrFrameLookup(b, c, "board_id"),
                            collaborator_count: (f = 219, g = 59, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["collaborator_count"])),
                            thumb_slots: d.contextOrFrameLookup(b, c, "thumb_slots"),
                            able_to_invite_users: d.contextOrFrameLookup(b, c, "current_user_owns_board") || d.contextOrFrameLookup(b, c, "collaborated_by_me")
                        }
                    })])), a.autoesc), h += "\n                "), h += "\n                ", d.contextOrFrameLookup(b, c, "can_edit")) {
                        h += "\n                    ";
                        var n;
                        n = d.contextOrFrameLookup(b, c, "is_place_board") ? (f = 227, g = 39, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Add people"])) : (f = 227, g = 78, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Add people to board"])), c.set("modal_text", n, !0), c.parent || (b.setVariable("modal_text", n), b.addExport("modal_text")), h += "\n                    ";
                        var o;
                        o = {
                            show_text: !1,
                            has_icon: !0,
                            text: d.contextOrFrameLookup(b, c, "modal_text"),
                            borderless: !0,
                            class_name: "boardAddCollaboratorsButton newBoardHeader",
                            color: "primary",
                            submodule: {
                                name: "BoardCollaboratorInviter",
                                resource: {
                                    name: "BoardResource",
                                    options: {
                                        board_id: d.contextOrFrameLookup(b, c, "board_id")
                                    }
                                },
                                options: {
                                    gbc_group: d.contextOrFrameLookup(b, c, "gbc_group")
                                }
                            }
                        }, c.set("modal_options", o, !0), c.parent || (b.setVariable("modal_options", o), b.addExport("modal_options")), h += "\n                    ", h += d.suppressValue((f = 248, g = 27, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["ShowModalButton", d.makeKeywordArgs({
                            id: "addCollaboratorButton",
                            options: d.contextOrFrameLookup(b, c, "modal_options")
                        })])), a.autoesc), h += '\n                    <h4 class="addCollaboratorText">', h += d.suppressValue((f = 252, g = 54, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Invite Pinner"])), a.autoesc), h += "</h4>\n                "
                    }
                    h += "\n            "
                } else {
                    if (h += "\n                ", d.contextOrFrameLookup(b, c, "can_edit")) {
                        h += "\n                    ";
                        var p;
                        p = d.contextOrFrameLookup(b, c, "is_place_board") ? (f = 256, g = 39, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Add people"])) : (f = 256, g = 78, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Add people to board"])), c.set("modal_text", p, !0), c.parent || (b.setVariable("modal_text", p), b.addExport("modal_text")), h += "\n                    ";
                        var q;
                        q = {
                            text: d.contextOrFrameLookup(b, c, "modal_text"),
                            class_name: "boardAddCollaboratorsButton",
                            color: "primary",
                            submodule: {
                                name: "BoardCollaboratorInviter",
                                resource: {
                                    name: "BoardResource",
                                    options: {
                                        board_id: d.contextOrFrameLookup(b, c, "board_id")
                                    }
                                },
                                options: {
                                    gbc_group: d.contextOrFrameLookup(b, c, "gbc_group")
                                }
                            }
                        }, c.set("modal_options", q, !0), c.parent || (b.setVariable("modal_options", q), b.addExport("modal_options")), h += "\n                    ", h += d.suppressValue((f = 274, g = 27, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["ShowModalButton", d.makeKeywordArgs({
                            id: "addCollaboratorButton",
                            options: d.contextOrFrameLookup(b, c, "modal_options")
                        })])), a.autoesc), h += "\n                "
                    }
                    h += "\n                ", h += d.suppressValue((f = 279, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["User", d.makeKeywordArgs({
                        options: {
                            view_type: "thumb",
                            inline: !0,
                            size: "small",
                            show_follow_button: !1,
                            show_name: d.contextOrFrameLookup(b, c, "show_name")
                        },
                        data: d.contextOrFrameLookup(b, c, "owner"),
                        resource: (f = 288, g = 44, d.callWrap(d.contextOrFrameLookup(b, c, "create_resource"), "create_resource", ["UserResource", d.makeKeywordArgs({
                            options: {
                                user_id: d.memberLookup(d.contextOrFrameLookup(b, c, "owner"), "id", a.autoesc),
                                field_set_key: "thumb"
                            }
                        })]))
                    })])), a.autoesc), h += "\n\n                ";
                    var r;
                    r = d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "user", a.autoesc) && d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "user", a.autoesc), "id", a.autoesc) == (f = 296, g = 92, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "owner"), "get", a.autoesc), 'owner["get"]', ["id"])), c.set("current_user_owns_board", r, !0), c.parent || (b.setVariable("current_user_owns_board", r), b.addExport("current_user_owns_board")), h += "\n                ";
                    var s;
                    f = 297, g = 51, s = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["collaborated_by_me"]), c.set("collaborated_by_me", s, !0), c.parent || (b.setVariable("collaborated_by_me", s), b.addExport("collaborated_by_me")), h += "\n                ", f = 298, g = 29, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["is_collaborative"]) && (h += "\n                    ", h += d.suppressValue((f = 299, g = 27, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["BoardCollaborators", d.makeKeywordArgs({
                        resource: (f = 300, g = 48, d.callWrap(d.contextOrFrameLookup(b, c, "create_resource"), "create_resource", ["BoardCollaboratorsResource", d.makeKeywordArgs({
                            options: {
                                board_id: d.contextOrFrameLookup(b, c, "board_id")
                            }
                        })])),
                        options: {
                            board_id: d.contextOrFrameLookup(b, c, "board_id"),
                            collaborator_count: (f = 307, g = 59, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["collaborator_count"])),
                            thumb_slots: d.contextOrFrameLookup(b, c, "thumb_slots"),
                            able_to_invite_users: d.contextOrFrameLookup(b, c, "current_user_owns_board") || d.contextOrFrameLookup(b, c, "collaborated_by_me")
                        }
                    })])), a.autoesc), h += "\n                "), h += "\n            "
                }
                h += "\n        </div>\n    ", e(null, h)
            } catch (t) {
                e(d.handleError(t, f, g))
            }
        }
        function f(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += '\n        <h2 class="smallBoardName centeredWithinWrapper">', h += d.suppressValue((f = 319, g = 67, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["name"])), a.autoesc), h += "</h2>\n\n        ";
                var i;
                f = 321, g = 49, i = d.callWrap(d.contextOrFrameLookup(b, c, "count_text_follower"), "count_text_follower", [(f = 321, g = 59, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["follower_count"])), !0]), c.set("follower_count", i, !0), c.parent || (b.setVariable("follower_count", i), b.addExport("follower_count")), h += "\n        ";
                var j;
                if (f = 322, g = 39, j = d.callWrap(d.contextOrFrameLookup(b, c, "count_text_pin"), "count_text_pin", [(f = 322, g = 49, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["pin_count"])), !0]), c.set("pin_count", j, !0), c.parent || (b.setVariable("pin_count", j), b.addExport("pin_count")), h += "\n        ", d.contextOrFrameLookup(b, c, "is_secret")) {
                    h += "\n            ";
                    var k;
                    k = "hideFollowCount", c.set("hide_follower_count", k, !0), c.parent || (b.setVariable("hide_follower_count", k), b.addExport("hide_follower_count")), h += "\n        "
                }
                h += '\n        <div class="pinsAndFollowerCount ', h += d.suppressValue(d.contextOrFrameLookup(b, c, "hide_follower_count"), a.autoesc), h += '">\n            <ul>\n                <li>', h += d.suppressValue((f = 328, g = 22, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", [d.contextOrFrameLookup(b, c, "pin_count")])), a.autoesc), h += "</li>\n                ", d.contextOrFrameLookup(b, c, "is_secret") || (h += "\n                    <li>\n                        ", h += d.suppressValue((f = 331, g = 31, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["ShowModalButton", d.makeKeywordArgs({
                    id: "followerCount",
                    options: {
                        ga_category: "follower_view",
                        class_name: "followerCount",
                        borderless: !0,
                        has_icon: !0,
                        text: d.contextOrFrameLookup(b, c, "follower_count"),
                        submodule: {
                            name: "BoardFollowers",
                            options: {
                                follower_count: d.contextOrFrameLookup(b, c, "follower_count")
                            },
                            resource: {
                                name: "BoardFollowersResource",
                                options: {
                                    board_id: d.contextOrFrameLookup(b, c, "board_id"),
                                    field_set_key: "grid_item"
                                }
                            }
                        }
                    }
                })])), a.autoesc), h += "\n                    </li>\n                "), h += "\n        </div>\n    ", e(null, h)
            } catch (l) {
                e(d.handleError(l, f, g))
            }
        }
        function g(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n        ";
                var i;
                i = d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "user", a.autoesc) && d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "user", a.autoesc), "id", a.autoesc) == (f = 360, g = 97, d.callWrap(d.memberLookup((f = 360, g = 84, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["owner"])), "get", a.autoesc), 'the return value of (board["get"])["get"]', ["id"])), c.set("current_user_owns_board", i, !0), c.parent || (b.setVariable("current_user_owns_board", i), b.addExport("current_user_owns_board")), h += "\n        ";
                var j;
                f = 361, g = 34, j = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["pin_count"]), c.set("pin_count", j, !0), c.parent || (b.setVariable("pin_count", j), b.addExport("pin_count")), h += "\n        ", d.contextOrFrameLookup(b, c, "current_user_owns_board") && d.contextOrFrameLookup(b, c, "pin_count") > 0&&!d.contextOrFrameLookup(b, c, "is_secret")&&!d.contextOrFrameLookup(b, c, "can_edit") && (h += "\n            ", h += d.suppressValue((f = 363, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["DropdownButton", d.makeKeywordArgs({
                    options: {
                        has_icon: !0,
                        class_name: "embed embedBoard",
                        dropdown_options: {
                            class_name: "underneathHeader",
                            display_while_loading: !0,
                            manually_close: !0,
                            position_point: "BOTTOM_RIGHT"
                        },
                        module: {
                            name: "EmbedBoard",
                            options: {
                                board: d.contextOrFrameLookup(b,
                                c,
                                "board")
                            }
                        }
                    }
                })])), a.autoesc), h += "\n        "), h += "\n    ", e(null, h)
            } catch (k) {
                e(d.handleError(k, f, g))
            }
        }
        return {
            b_interact_button: b,
            b_send_board_pinner: c,
            b_gear_menu: d,
            b_collaborators: e,
            b_board_information: f,
            b_embed_board: g,
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/BoardInvite/BoardInvite.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += d.suppressValue((f = 0, g = 1, d.callWrap(d.contextOrFrameLookup(b, c, "base"), "base", ["BoardInviteBase"])), a.autoesc), a.getTemplate("app/common/modules/BoardInviteBase/BoardInviteBase.nunjucks", !0, function(f, g) {
                    if (f)
                        return void e(f);
                    for (var i in g.blocks)
                        b.addBlock(i, g.blocks[i]);
                    h += "\n", h += "\n", g.rootRenderFunc(a, b, c, d, e)
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/BoardPage/BoardPage.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n", h += d.suppressValue((f = 7, g = 1, d.callWrap(d.contextOrFrameLookup(b, c, "base"), "base", ["BoardPageBase"])), a.autoesc), a.getTemplate("app/common/modules/BoardPageBase/BoardPageBase.nunjucks", !0, function(i, j) {
                    if (i)
                        return void e(i);
                    for (var k in j.blocks)
                        b.addBlock(k, j.blocks[k]);
                    h += "\n\n";
                    var l;
                    l = d.contextOrFrameLookup(b, c, "data"), c.set("board", l, !0), c.parent || (b.setVariable("board", l), b.addExport("board")), h += "\n";
                    var m;
                    f = 10, g = 25, m = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["id"]), c.set("board_id", m, !0), c.parent || (b.setVariable("board_id", m), b.addExport("board_id")), h += "\n";
                    var n;
                    f = 11, g = 28, n = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["is_collaborative"]), c.set("show_pinner", n, !0), c.parent || (b.setVariable("show_pinner", n), b.addExport("show_pinner")), h += "\n";
                    var o;
                    f = 12, g = 22, o = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["owner"]), c.set("owner", o, !0), c.parent || (b.setVariable("owner", o), b.addExport("owner")), h += "\n";
                    var p;
                    f = 13, g = 22, p = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["tab", "pins"]), c.set("tab", p, !0), c.parent || (b.setVariable("tab", p), b.addExport("tab")), h += "\n";
                    var q;
                    q = a.getFilter("contains").call(b, (f = 14, g = 25, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["access", []])), "write"), c.set("can_edit", q, !0), c.parent || (b.setVariable("can_edit", q), b.addExport("can_edit")), h += "\n";
                    var r;
                    f = 15, g = 23, r = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["layout"]), c.set("layout", r, !0), c.parent || (b.setVariable("layout", r), b.addExport("layout")), h += "\n\n";
                    var s;
                    if (s = "places" == d.contextOrFrameLookup(b, c, "layout"), c.set("use_places_layout", s, !0), c.parent || (b.setVariable("use_places_layout", s), b.addExport("use_places_layout")), h += "\n\n", h += "\n\n", h += "\n\n", "pins" == d.contextOrFrameLookup(b, c, "tab") || d.contextOrFrameLookup(b, c, "use_places_layout")) {
                        h += "\n    ";
                        var t;
                        t=!d.contextOrFrameLookup(b, c, "use_places_layout"), c.set("prepend", t, !0), c.parent || (b.setVariable("prepend", t), b.addExport("prepend")), h += "\n    ";
                        var u;
                        u=!d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "is_authenticated", a.autoesc) && d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "is_full_page", a.autoesc) && (a.getFilter("contains").call(b, ["en", "ja"], d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "language", a.autoesc)) || a.getFilter("contains").call(b, ["fr", "es"], d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "language", a.autoesc)) && (f = 59, g = 39, !d.callWrap(d.contextOrFrameLookup(b, c, "in_seo_experiment_group"), "in_seo_experiment_group", ["translated_vase_on_board", "control_2"]))), c.set("show_vase_v2", u, !0), c.parent || (b.setVariable("show_vase_v2", u), b.addExport("show_vase_v2")), h += "\n    ";
                        var v;
                        if (v = d.contextOrFrameLookup(b, c, "none"), c.set("page_size", v, !0), c.parent || (b.setVariable("page_size", v), b.addExport("page_size")), h += "\n    ", d.contextOrFrameLookup(b, c, "use_places_layout")) {
                            h += "\n        ";
                            var w;
                            w = 100, c.set("page_size", w, !0), c.parent || (b.setVariable("page_size", w), b.addExport("page_size")), h += "\n    "
                        }
                        h += "\n    ";
                        var x;
                        f = 64, g = 35, x = d.callWrap(d.contextOrFrameLookup(b, c, "create_resource"), "create_resource", ["BoardFeedResource", d.makeKeywordArgs({
                            options: {
                                board_id: d.contextOrFrameLookup(b, c, "board_id"),
                                board_url: (f = 66, g = 30, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["url"])),
                                board_layout: d.contextOrFrameLookup(b, c, "layout"),
                                prepend: d.contextOrFrameLookup(b, c, "prepend"),
                                page_size: d.contextOrFrameLookup(b, c, "page_size"),
                                access: (f = 70, g = 27, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["access"]))
                            }
                        })]), c.set("resource", x, !0), c.parent || (b.setVariable("resource", x), b.addExport("resource")), h += "\n    ";
                        var y;
                        y = {
                            show_pinner: d.contextOrFrameLookup(b, c, "show_pinner"),
                            squish_giraffe_pins: !1,
                            show_board: !1,
                            show_pinned_from: !0,
                            show_vase_v2: d.contextOrFrameLookup(b, c, "show_vase_v2")
                        }, c.set("item_options", y, !0), c.parent || (b.setVariable("item_options", y), b.addExport("item_options")), h += "\n\n    ";
                        var z;
                        z = {
                            scrollable: d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "is_authenticated", a.autoesc) || "pins" != d.contextOrFrameLookup(b, c, "tab"),
                            show_while_loading: !d.contextOrFrameLookup(b, c, "use_places_layout"),
                            layout: "variable_height",
                            show_grid_footer: !0,
                            item_options: d.contextOrFrameLookup(b, c, "item_options")
                        }, c.set("grid_options", z, !0), c.parent || (b.setVariable("grid_options", z), b.addExport("grid_options")), h += "\n"
                    } else if ("followers" == d.contextOrFrameLookup(b, c, "tab")) {
                        h += "\n    ";
                        var A;
                        f = 88, g = 35, A = d.callWrap(d.contextOrFrameLookup(b, c, "create_resource"), "create_resource", ["BoardFollowersResource", d.makeKeywordArgs({
                            options: {
                                board_id: d.contextOrFrameLookup(b, c, "board_id")
                            }
                        })]), c.set("resource", A, !0), c.parent || (b.setVariable("resource", A), b.addExport("resource")), h += "\n    ";
                        var B;
                        B = {
                            scrollable: !0,
                            layout: "fixed_height",
                            show_grid_footer: !1
                        }, c.set("grid_options", B, !0), c.parent || (b.setVariable("grid_options", B), b.addExport("grid_options")), h += "\n"
                    }
                    h += "\n\n", h += "\n", j.rootRenderFunc(a, b, c, d, e)
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function b(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                if (h += "\n    ", h += d.suppressValue((f = 20, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "include_data"), "include_data", ["id", "description", "privacy", "url", "layout", "category"])), a.autoesc), h += "\n    ", h += d.suppressValue((f = 21, g = 15, d.callWrap(d.contextOrFrameLookup(b, c, "extra_data"), "extra_data", [{
                    currentUsername: d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "is_authenticated", a.autoesc) && d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "user", a.autoesc), "username", a.autoesc),
                    canEdit: d.contextOrFrameLookup(b, c, "can_edit")
                }
                ])), a.autoesc), h += "\n\n    ", !d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "is_authenticated", a.autoesc) && (f = 25, g = 52, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["inviter_user_id"]))) {
                    h += "\n        ";
                    var i;
                    f = 26, g = 63, i = d.callWrap(d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "experiments", a.autoesc), "activate_and_persist_experiment", a.autoesc), 'context["experiment"]["activate_a"]', ["unauth_board_invite_modal_landing"]), c.set("_temp_do", i, !0), c.parent || b.setVariable("_temp_do", i), h += "\n        ", f = 27, g = 52, d.callWrap(d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "experiments", a.autoesc), "in_experiment_groups", a.autoesc), 'context["experiment"]["in_experim"]', ["unauth_board_invite_modal_landing", ["enabled", "employees"]]) ? (h += "\n            ", h += d.suppressValue((f = 28, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "extra_data"), "extra_data", [{
                        show_invite_modal: !0
                    }
                    ])), a.autoesc), h += "\n        ") : (h += "\n            ", h += d.suppressValue((f = 30, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "extra_data"), "extra_data", [{
                        redirect_to_signup: !0
                    }
                    ])), a.autoesc), h += "\n        "), h += "\n    "
                }
                h += "\n", e(null, h)
            } catch (j) {
                e(d.handleError(j, f, g))
            }
        }
        function c(a, b, d, e, f) {
            var g = null, h = null, i = "";
            try {
                b.getSuper(a, "header", c, d, e, function(c, j) {
                    return c ? void f(c) : (j = e.markSafe(j), i += "\n    ", e.contextOrFrameLookup(b, d, "use_places_layout") ? (i += "\n        ", i += e.suppressValue((g = 37, h = 15, e.callWrap(e.contextOrFrameLookup(b, d, "module"), "module", ["PlaceBoardHeader", e.makeKeywordArgs({
                        id: "boardHeader",
                        options: {
                            locationBoardPageHeader: !0
                        },
                        error_strategy: e.memberLookup(e.contextOrFrameLookup(b, d, "ErrorStrategy"), "BUBBLE", a.autoesc),
                        data: e.contextOrFrameLookup(b, d, "data"),
                        resource: (g = 44, h = 36, e.callWrap(e.contextOrFrameLookup(b, d, "create_resource"), "create_resource", ["BoardResource", e.makeKeywordArgs({
                            options: {
                                board_id: e.contextOrFrameLookup(b, d, "board_id"),
                                field_set_key: "detailed"
                            }
                        })]))
                    })])), a.autoesc), i += "\n    ") : (i += "\n        ", i += e.suppressValue(j, a.autoesc), i += "\n    "), i += "\n", void f(null, i))
                })
            } catch (j) {
                f(e.handleError(j, g, h))
            }
        }
        function d(a, b, c, e, f) {
            var g = null, h = null, i = "";
            try {
                b.getSuper(a, "grid_or_no_content", d, c, e, function(d, j) {
                    if (d)
                        return void f(d);
                    if (j = e.markSafe(j), i += "\n    ", e.contextOrFrameLookup(b, c, "use_places_layout")) {
                        i += "\n        ", i += "\n        ";
                        var k;
                        g = 106, h = 31, k = e.callWrap(e.memberLookup(e.contextOrFrameLookup(b, c, "grid_options"), "update", a.autoesc), 'grid_options["update"]', [{
                            centered: !1,
                            class_name: "placeBoardGrid",
                            minimum_num_columns: 2,
                            show_grid_footer: !1,
                            virtualize: !1
                        }
                        ]), c.set("_temp_do", k, !0), c.parent || b.setVariable("_temp_do", k), i += "\n\n        ";
                        var l;
                        g = 115, h = 31, l = e.callWrap(e.memberLookup(e.contextOrFrameLookup(b, c, "item_options"), "update", a.autoesc), 'item_options["update"]', [{
                            view_on_map_button: !0
                        }
                        ]), c.set("_temp_do", l, !0), c.parent || b.setVariable("_temp_do", l), i += "\n    "
                    }
                    i += "\n\n    ", i += e.suppressValue(j, a.autoesc), i += "\n", f(null, i)
                })
            } catch (j) {
                f(e.handleError(j, g, h))
            }
        }
        return {
            b_data: b,
            b_header: c,
            b_grid_or_no_content: d,
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/BoardPickerOld/BoardPickerOld.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n", a.getTemplate("templates/macros/boardpicker.nunjucks", function(i, j) {
                    return i ? void e(i) : void j.getExported(function(i, j) {
                        if (i)
                            return void e(i);
                        if (!j.hasOwnProperty("icon_wrapper"))
                            return void e(new Error("cannot import 'icon_wrapper'"));
                        var k = j.icon_wrapper;
                        b.setVariable("icon_wrapper", k), h += "\n\n", h += "\n";
                        var l;
                        l = "places", c.set("LAYOUT_PLACES", l, !0), c.parent || (b.setVariable("LAYOUT_PLACES", l), b.addExport("LAYOUT_PLACES")), h += "\n";
                        var m;
                        m = d.contextOrFrameLookup(b, c, "data"), c.set("boards", m, !0), c.parent || (b.setVariable("boards", m), b.addExport("boards")), h += "\n";
                        var n;
                        n = 0 == a.getFilter("length").call(b, d.contextOrFrameLookup(b, c, "boards")), c.set("no_boards", n, !0), c.parent || (b.setVariable("no_boards", n), b.addExport("no_boards")), h += "\n\n", h += d.suppressValue((f = 17, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", [(f = 17, g = 21, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["size", ""]))])), a.autoesc), h += "\n", d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "disabled", a.autoesc) && (h += "\n    ", h += d.suppressValue((f = 19, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["disabled"])), a.autoesc), h += "\n"), h += "\n\n";
                        var o = d.makeMacro(["board"], [], function(e, h) {
                            c = c.push(), h = h || {}, h.hasOwnProperty("caller") && c.set("caller", h.caller), c.set("board", e);
                            var i = "";
                            i += "\n    ";
                            var j;
                            f = 23, g = 28, j = d.callWrap(d.memberLookup(e, "get", a.autoesc), 'board["get"]', ["privacy", "public"]), c.set("privacy", j, !0), c.parent || (b.setVariable("privacy", j), b.addExport("privacy")), i += "\n    ";
                            var l;
                            l = "secret" == d.contextOrFrameLookup(b, c, "privacy"), c.set("is_secret", l, !0), c.parent || (b.setVariable("is_secret", l), b.addExport("is_secret")), i += "\n    ";
                            var m;
                            m = d.memberLookup(e, "layout", a.autoesc) == d.contextOrFrameLookup(b, c, "LAYOUT_PLACES"), c.set("is_place", m, !0), c.parent || (b.setVariable("is_place", m), b.addExport("is_place")), i += "\n    ";
                            var n;
                            n = d.memberLookup(e, "is_collaborative", a.autoesc), c.set("is_collaborative", n, !0), c.parent || (b.setVariable("is_collaborative", n), b.addExport("is_collaborative")), i += "\n\n    ", i += "\n    ", i += "\n    ";
                            var o;
                            if (o = "", c.set("is_collaborative_string", o, !0), c.parent || (b.setVariable("is_collaborative_string", o), b.addExport("is_collaborative_string")), i += "\n    ", d.contextOrFrameLookup(b, c, "is_collaborative")) {
                                i += "\n        ";
                                var p;
                                p = "1", c.set("is_collaborative_string", p, !0), c.parent || (b.setVariable("is_collaborative_string", p), b.addExport("is_collaborative_string")), i += "\n    "
                            }
                            return i += '\n\n    <div class="currentBoard"\n        data-id="', i += d.suppressValue(d.memberLookup(e, "id", a.autoesc), a.autoesc), i += '"\n        data-privacy="', i += d.suppressValue(d.contextOrFrameLookup(b, c, "privacy"), a.autoesc), i += '"\n        data-collaborative="', i += d.suppressValue(d.contextOrFrameLookup(b, c, "is_collaborative_string"), a.autoesc), i += '">\n            ', i += d.suppressValue((f = 40, g = 25, d.callWrap(k, "icon_wrapper", [d.contextOrFrameLookup(b, c, "is_secret"), d.contextOrFrameLookup(b, c, "is_collaborative"), d.contextOrFrameLookup(b, c, "is_place"), !0])), a.autoesc), i += '\n        <span class="currentBoardName">', i += d.suppressValue(d.memberLookup(e, "name", a.autoesc), a.autoesc), i += "</span>\n    </div>\n", c = c.pop(), new d.SafeString(i)
                        });
                        b.addExport("current_board"), b.setVariable("current_board", o), h += "\n\n", b.getBlock("board_picker")(a, b, c, d, function(a, b) {
                            return a ? void e(a) : (h += b, h += "\n", void e(null, h))
                        })
                    })
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function b(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                if (h += "\n    ", h += d.suppressValue((f = 46, g = 15, d.callWrap(d.contextOrFrameLookup(b, c, "extra_data"), "extra_data", [{
                    num_boards: a.getFilter("length").call(b, d.contextOrFrameLookup(b, c, "boards"))
                }
                ])), a.autoesc), h += "\n    ", d.contextOrFrameLookup(b, c, "no_boards")) {
                    h += "\n        ", h += d.suppressValue((f = 48, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["no_boards"])), a.autoesc), h += "\n        ", h += d.suppressValue((f = 49, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "extra_data"), "extra_data", [{
                        no_boards: d.contextOrFrameLookup(b, c, "no_boards")
                    }
                    ])), a.autoesc), h += "\n        ";
                    var i;
                    i = [(f = 51, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Places to Visit"])), (f = 52, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Stuff to Buy"])), (f = 53, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Projects to Try"])), (f = 54, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Things to Wear"])), (f = 55, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Recipes to Cook"])), (f = 56, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Ideas for the House"]))], c.set("board_name_suggestions", i, !0), c.parent || (b.setVariable("board_name_suggestions", i), b.addExport("board_name_suggestions")), h += "\n    "
                } else {
                    h += "\n        ";
                    var j;
                    j = [], c.set("board_name_suggestions", j, !0), c.parent || (b.setVariable("board_name_suggestions", j), b.addExport("board_name_suggestions")), h += "\n    "
                }
                h += '\n\n    <div class="boardPickerInnerWrapper">\n        <div class="createBoard">\n            ', h += d.suppressValue((f = 63, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    id: "createBoard",
                    options: {
                        class_name: "createBoardButton",
                        text: (f = 67, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Create"]))
                    }
                })])), a.autoesc), h += "\n            ";
                var k;
                if (f = 70, g = 37, k = d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Create New Board"]), c.set("placeholder_text", k, !0), c.parent || (b.setVariable("placeholder_text", k), b.addExport("placeholder_text")), h += "\n            ", d.contextOrFrameLookup(b, c, "no_boards")) {
                    h += "\n                ";
                    var l;
                    f = 72, g = 41, l = d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Create a Board"]), c.set("placeholder_text", l, !0), c.parent || (b.setVariable("placeholder_text", l), b.addExport("placeholder_text")), h += "\n            "
                }
                h += '\n            <div class="createBoardNameContainer">\n                <input type="text" name="name" class="createBoardName" placeholder="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "placeholder_text"), a.autoesc), h += '">\n            </div>\n        </div>\n            <div class="boardPickerInner">\n            <ul>\n                ', d.contextOrFrameLookup(b, c, "no_boards") && (h += '\n                    <li class="boardPickerHeader">\n                        <h2>\n                            ', h += d.suppressValue((f = 83, g = 30, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Feeling stuck? Try one of these:"])), a.autoesc), h += "\n                        </h2>\n                    </li>\n                "), h += "\n\n                ", c = c.push();
                var m = d.contextOrFrameLookup(b, c, "board_name_suggestions");
                if (m)
                    for (var n = m.length, o = 0; o < m.length; o++) {
                        var p = m[o];
                        c.set("board", p), c.set("loop.index", o + 1), c.set("loop.index0", o), c.set("loop.revindex", n - o), c.set("loop.revindex0", n - o - 1), c.set("loop.first", 0 === o), c.set("loop.last", o === n - 1), c.set("loop.length", n), h += '\n                    <li class="boardPickerItem" data-suggestion="', h += d.suppressValue(p, a.autoesc), h += '">\n                        ', h += d.suppressValue(p, a.autoesc), h += "\n                    </li>\n                "
                    }
                c = c.pop(), h += "\n\n                ", c = c.push();
                var q = d.contextOrFrameLookup(b, c, "boards");
                if (q)
                    for (var r = q.length, s = 0; s < q.length; s++) {
                        var t = q[s];
                        c.set("board", t), c.set("loop.index", s + 1), c.set("loop.index0", s), c.set("loop.revindex", r - s), c.set("loop.revindex0", r - s - 1), c.set("loop.first", 0 === s), c.set("loop.last", s === r - 1), c.set("loop.length", r), h += "\n                    ";
                        var u;
                        u = d.memberLookup(t, "privacy", a.autoesc), c.set("privacy", u, !0), c.parent || (b.setVariable("privacy", u), b.addExport("privacy")), h += "\n                    ";
                        var v;
                        v = d.memberLookup(t, "is_collaborative", a.autoesc), c.set("is_collaborative", v, !0), c.parent || (b.setVariable("is_collaborative", v), b.addExport("is_collaborative")), h += "\n                    ";
                        var w;
                        w = d.memberLookup(t, "layout", a.autoesc) == d.contextOrFrameLookup(b, c, "LAYOUT_PLACES"), c.set("is_place", w, !0), c.parent || (b.setVariable("is_place", w), b.addExport("is_place")), h += "\n                    ";
                        var x;
                        if (x = "", c.set("is_collaborative_string", x, !0), c.parent || (b.setVariable("is_collaborative_string", x), b.addExport("is_collaborative_string")), h += "\n                    ", d.contextOrFrameLookup(b, c, "is_collaborative")) {
                            h += "\n                        ";
                            var y;
                            y = "1", c.set("is_collaborative_string", y, !0), c.parent || (b.setVariable("is_collaborative_string", y), b.addExport("is_collaborative_string")), h += "\n                    "
                        }
                        h += "\n                    ";
                        var z;
                        z = "secret" == d.contextOrFrameLookup(b, c, "privacy"), c.set("is_secret", z, !0), c.parent || (b.setVariable("is_secret", z), b.addExport("is_secret")), h += '\n                    <li class="boardPickerItem"\n                        data-id="', h += d.suppressValue(d.memberLookup(t, "id", a.autoesc), a.autoesc), h += '"\n                        data-place="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "is_place"), a.autoesc), h += '"\n                        data-privacy="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "privacy"), a.autoesc), h += '"\n                        data-collaborative="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "is_collaborative_string"), a.autoesc), h += '">\n                            ', h += d.suppressValue((f = 108, g = 41, d.callWrap(d.contextOrFrameLookup(b, c, "icon_wrapper"), "icon_wrapper", [d.contextOrFrameLookup(b, c, "is_secret"), d.contextOrFrameLookup(b, c, "is_collaborative"), d.contextOrFrameLookup(b, c, "is_place"), !1])), a.autoesc), h += "\n                            ", h += d.suppressValue(d.memberLookup(t, "name", a.autoesc), a.autoesc), h += "\n                    </li>\n                "
                    }
                if (c = c.pop(), h += "\n            </ul>\n        </div>\n    </div>\n\n    ", d.contextOrFrameLookup(b, c, "no_boards"))
                    h += '\n        <div class="tooltipAnchor"></div>\n        <div class="boardPickerOuter primary createYourFirstBoard">\n            ', h += d.suppressValue((f = 122, g = 14, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Create your first board", "Button text that invites the user to create one board"])), a.autoesc), h += "\n        </div>\n    ";
                else {
                    h += '\n        <div class="boardPickerOuter">\n            ';
                    var A;
                    if (A = d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "default_board_id", a.autoesc), c.set("default_board_id", A, !0), c.parent || (b.setVariable("default_board_id", A), b.addExport("default_board_id")), h += "\n            ", d.contextOrFrameLookup(b, c, "default_board_id")) {
                        h += "\n                ", c = c.push();
                        var B = d.contextOrFrameLookup(b, c, "boards");
                        if (B)
                            for (var C = B.length, D = 0; D < B.length; D++) {
                                var E = B[D];
                                c.set("board", E), c.set("loop.index", D + 1), c.set("loop.index0", D), c.set("loop.revindex", C - D), c.set("loop.revindex0", C - D - 1), c.set("loop.first", 0 === D), c.set("loop.last", D === C - 1), c.set("loop.length", C), h += "\n                    ", d.contextOrFrameLookup(b, c, "default_board_id") == d.memberLookup(E, "id", a.autoesc) && (h += "\n                        ", h += d.suppressValue((f = 130, g = 38, d.callWrap(d.contextOrFrameLookup(b, c, "current_board"), "current_board", [E])), a.autoesc), h += "\n                    "), h += "\n                "
                            }
                        c = c.pop(), h += "\n            "
                    } else {
                        h += "\n                ";
                        var F;
                        F = a.getFilter("first").call(b, d.contextOrFrameLookup(b, c, "boards")), c.set("board", F, !0), c.parent || (b.setVariable("board", F), b.addExport("board")), h += "\n                ", h += d.suppressValue((f = 135, g = 30, d.callWrap(d.contextOrFrameLookup(b, c, "current_board"), "current_board", [d.contextOrFrameLookup(b, c, "board")])), a.autoesc), h += "\n            "
                    }
                    h += "\n        </div>\n    "
                }
                h += "\n", e(null, h)
            } catch (G) {
                e(d.handleError(G, f, g))
            }
        }
        return {
            b_board_picker: b,
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/EmptyConversations/EmptyConversations.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n";
                var i;
                if (f = 9, g = 29, i = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["class_name"]), c.set("class_name", i, !0), c.parent || (b.setVariable("class_name", i), b.addExport("class_name")), h += "\n\n", "conversationListDropdown" == d.contextOrFrameLookup(b, c, "class_name"))
                    h += '\n    <div class="icon"></div>\n';
                else {
                    if (h += "\n    ", 3 == a.getFilter("length").call(b, d.contextOrFrameLookup(b, c, "data"))) {
                        h += '\n        <div class="headsContainer">\n            ', c = c.push();
                        var j = d.contextOrFrameLookup(b, c, "data");
                        if (j)
                            for (var k = j.length, l = 0; l < j.length; l++) {
                                var m = j[l];
                                c.set("user", m), c.set("loop.index", l + 1), c.set("loop.index0", l), c.set("loop.revindex", k - l), c.set("loop.revindex0", k - l - 1), c.set("loop.first", 0 === l), c.set("loop.last", l === k - 1), c.set("loop.length", k), h += "\n                ", h += d.suppressValue((f = 17, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["ConversationHead", d.makeKeywordArgs({
                                    options: {
                                        show_name: !0,
                                        users: [m]
                                    }
                                })])), a.autoesc), h += "\n            "
                            }
                        c = c.pop(), h += "\n        </div>\n    "
                    }
                    h += "\n"
                }
                h += '\n\n<p class="intro">\n    ';
                var n = d.makeMacro([], [], function(e) {
                    c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                    var h, i = "";
                    return h = {}, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 29, g = 5, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 29, g = 5, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["<strong>Send messages to your friends!</strong><br> Plan projects, swap ideas and share your best discoveries."])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                });
                b.setVariable("_doTranslation", n), h += d.suppressValue((f = 29, g = 5, d.callWrap(n, "_doTranslation", [])), a.autoesc), h += "\n</p>", e(null, h)
            } catch (o) {
                e(d.handleError(o, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/FacebookShareButton/FacebookShareButton.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n\n", h += d.suppressValue((f = 11, g = 1, d.callWrap(d.contextOrFrameLookup(b, c, "describe"), "describe", [{
                    text: (f = 12, g = 23, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["text", (f = 12, g = 33, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Facebook"]))])),
                    has_icon: !0,
                    class_name: (f = 14, g = 29, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["class_name", "facebook"]))
                }
                ])), a.autoesc), h += d.suppressValue((f = 11, g = 1, d.callWrap(d.contextOrFrameLookup(b, c, "base"), "base", ["Button"])), a.autoesc), a.getTemplate("app/common/modules/Button/Button.nunjucks", !0, function(f, g) {
                    if (f)
                        return void e(f);
                    for (var i in g.blocks)
                        b.addBlock(i, g.blocks[i]);
                    h += "\n", g.rootRenderFunc(a, b, c, d, e)
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/FastFollowPinfluencers/FastFollowPinfluencers.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                if (h += "\n\n", "male" == (f = 6, g = 20, d.callWrap(d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "user", a.autoesc), "get", a.autoesc), 'context["user"]["get"]', ["gender"]))) {
                    h += "\n    ";
                    var i;
                    i = a.getFilter("random").call(b, ["design", "food_drink", "mens_fashion", "outdoors", "travel"]), c.set("selected_category", i, !0), c.parent || (b.setVariable("selected_category", i), b.addExport("selected_category")), h += "\n"
                } else if ("female" == (f = 8, g = 22, d.callWrap(d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "user", a.autoesc), "get", a.autoesc), 'context["user"]["get"]', ["gender"]))) {
                    h += "\n    ";
                    var j;
                    j = a.getFilter("random").call(b, ["diy_crafts", "food_drink", "home_decor", "travel", "womens_fashion"]), c.set("selected_category", j, !0), c.parent || (b.setVariable("selected_category", j), b.addExport("selected_category")), h += "\n"
                } else {
                    h += "\n    ";
                    var k;
                    k = a.getFilter("random").call(b, ["food_drink", "design", "diy_crafts", "home_decor", "travel"]), c.set("selected_category", k, !0), c.parent || (b.setVariable("selected_category", k), b.addExport("selected_category")), h += "\n"
                }
                h += "\n\n", h += d.suppressValue((f = 14, g = 7, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["FastFollowPinfluencersHeader", d.makeKeywordArgs({
                    data: d.contextOrFrameLookup(b, c, "data"),
                    id: "fastFollowPinfluencersHeader",
                    resource: (f = 17, g = 30, d.callWrap(d.contextOrFrameLookup(b, c, "create_resource"), "create_resource", ["UserResource", d.makeKeywordArgs({
                        options: {
                            username: (f = 19, g = 40, d.callWrap(d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "user", a.autoesc), "get", a.autoesc), 'context["user"]["get"]', ["username"])),
                            field_set_key: "fast_follow"
                        }
                    })])),
                    error_strategy: d.memberLookup(d.contextOrFrameLookup(b, c, "ErrorStrategy"), "BUBBLE", a.autoesc)
                })])), a.autoesc), h += '\n\n<div class="fastFollowContent">\n    ', h += d.suppressValue((f = 25, g = 11, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["FastFollowPinfluencersSidebar", d.makeKeywordArgs({
                    id: "fastFollowPageSidebar",
                    options: {
                        selected: d.contextOrFrameLookup(b, c, "selected_category")
                    },
                    resource: (f = 30, g = 32, d.callWrap(d.contextOrFrameLookup(b, c, "create_resource"), "create_resource", ["FastFollowPinfluencersCategoriesResource", d.makeKeywordArgs({
                        options: {}
                    })]))
                })])), a.autoesc), h += '\n\n    <div class="fastFollowGridContainer">\n        <h2 class="EmptyGridMessage">\n            ', h += d.suppressValue((f = 35, g = 14, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["You've already followed all the top Pinners in this category."])), a.autoesc), h += "<br />\n            ", h += d.suppressValue((f = 36, g = 14, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Try checking back later!"])), a.autoesc), h += "\n        </h2>\n        ", h += d.suppressValue((f = 38, g = 15, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Grid", d.makeKeywordArgs({
                    id: "categoryPinfluencersGrid",
                    resource: (f = 40, g = 36, d.callWrap(d.contextOrFrameLookup(b, c, "create_resource"), "create_resource", ["FastFollowPinfluencerUsersResource", d.makeKeywordArgs({
                        options: {
                            category: d.contextOrFrameLookup(b, c, "selected_category")
                        }
                    })])),
                    options: {
                        scrollable: !0,
                        layout: "fixed_height",
                        show_grid_footer: !1,
                        item_options: {
                            user_click_mask: !0
                        }
                    },
                    error_strategy: d.memberLookup(d.contextOrFrameLookup(b, c, "ErrorStrategy"), "SHOW", a.autoesc)
                })])), a.autoesc), h += "\n    </div>\n</div>\n", e(null, h)
            } catch (l) {
                e(d.handleError(l, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/FastFollowPinfluencersHeader/FastFollowPinfluencersHeader.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += '\n\n<h1 class="title">\n    <strong>\n        ';
                var i = d.makeMacro([], [], function(e) {
                    c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                    var h, i = "";
                    return h = {}, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 8, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 8, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Find people to follow"])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                });
                b.setVariable("_doTranslation", i), h += d.suppressValue((f = 8, g = 9, d.callWrap(i, "_doTranslation", [])), a.autoesc), h += '\n    </strong>\n    <div class="info">\n        ';
                var j = d.makeMacro([], [], function(e) {
                    c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                    var h, i = "";
                    return h = {}, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 13, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 13, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["To kickstart your home feed, follow a few boards from these top Pinners."])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                });
                b.setVariable("_doTranslation", j), h += d.suppressValue((f = 13, g = 9, d.callWrap(j, "_doTranslation", [])), a.autoesc), h += "\n    </div>\n</h1>\n", e(null, h)
            } catch (k) {
                e(d.handleError(k, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/FooterButtons/FooterButtons.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += '\n\n<div class="buttonInoutWrapper addButtonWrapper">\n', h += d.suppressValue((f = 9, g = 7, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["DropdownButton", d.makeKeywordArgs({
                    id: "addPinDropdownButton",
                    options: {
                        borderless: !0,
                        has_icon: !0,
                        class_name: "addPinFooter footerIcon",
                        text: (f = 15, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Add Pin"])),
                        show_text: !1,
                        log_element_type: d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "PIN_UPLOAD_BUTTON", a.autoesc),
                        dropdown_options: {
                            fixed: !0,
                            prefetch: !0,
                            position_point: "LEFT_BOTTOM"
                        },
                        module: {
                            name: "AddPin",
                            options: {
                                dropdown_style: !0
                            }
                        }
                    }
                })])), a.autoesc), h += '\n</div>\n\n\n<div class="buttonInoutWrapper helpButtonWrapper">\n    ', h += d.suppressValue((f = 34, g = 11, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["UserEducationDropdownButton", d.makeKeywordArgs({
                    id: "userEducationTutorialButton",
                    options: {
                        borderless: !0,
                        has_icon: !0,
                        class_name: "moreFooter footerIcon userEducationTutorialButton",
                        text: (f = 40, g = 21, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["More"])),
                        show_text: !1,
                        log_element_type: d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "MORE_INFO_BUTTON", a.autoesc),
                        dropdown_options: {
                            fixed: !0,
                            prefetch: !0,
                            view_type: "moreDropdown " + (f = 46, g = 58, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["view_type"])),
                            position_point: "LEFT_BOTTOM",
                            force_in_viewport: !0,
                            largeCaret: !1,
                            caret_style: "lightGray"
                        },
                        module: {
                            name: "UserEducationGuideDropdown"
                        }
                    }
                })])), a.autoesc), h += "\n    ", h += d.suppressValue((f = 56, g = 11, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["UserEducationDropdownButton", d.makeKeywordArgs({
                    id: "moreDropdownButton",
                    options: {
                        borderless: !0,
                        has_icon: !0,
                        class_name: "moreFooter footerIcon emptyTutorialButton",
                        text: (f = 62, g = 21, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["More"])),
                        show_text: !1,
                        log_element_type: d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "MORE_INFO_BUTTON", a.autoesc),
                        dropdown_options: {
                            fixed: !0,
                            prefetch: !0,
                            view_type: "moreDropdown " + (f = 68, g = 58, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["view_type"])),
                            position_point: "LEFT_BOTTOM",
                            force_in_viewport: !0,
                            largeCaret: !1
                        },
                        module: {
                            name: "UserEducationGuideDropdown"
                        }
                    }
                })])), a.autoesc), h += "\n</div>", e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/GeoFeatureList/GeoFeatureList.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n", a.getTemplate("templates/macros/geo_feature.nunjucks", function(i, j) {
                    return i ? void e(i) : void j.getExported(function(i, j) {
                        if (i)
                            return void e(i);
                        if (!j.hasOwnProperty("geo_feature"))
                            return void e(new Error("cannot import 'geo_feature'"));
                        var k = j.geo_feature;
                        b.setVariable("geo_feature", k), h += "\n\n";
                        var l;
                        l = d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "features", a.autoesc), c.set("features", l, !0), c.parent || (b.setVariable("features", l), b.addExport("features")), h += "\n\n";
                        var m;
                        if (m = d.memberLookup(d.contextOrFrameLookup(b, c, "features"), 0, a.autoesc), c.set("first_feature", m, !0), c.parent || (b.setVariable("first_feature", m), b.addExport("first_feature")), h += "\n", d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "active_feature", a.autoesc)) {
                            h += "\n    ";
                            var n;
                            n = d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "active_feature", a.autoesc), c.set("first_feature", n, !0), c.parent || (b.setVariable("first_feature", n), b.addExport("first_feature")), h += "\n"
                        }
                        h += '\n<div class="labelWrapper">\n    <p class="label">', h += d.suppressValue((f = 18, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Places near:"])), a.autoesc), h += '</p>\n    <div class="dropdownTarget">\n        ', h += d.suppressValue((f = 20, g = 20, d.callWrap(k, "geo_feature", [d.contextOrFrameLookup(b, c, "first_feature")])), a.autoesc), h += '\n\n        <div class="dropdownIcon"></div>\n    </div>\n</div>\n', e(null, h)
                    })
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/IncrementingNavigateButton/IncrementingNavigateButton.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n";
                var i;
                f = 11, g = 30, i = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["actionCount", 0]), c.set("actionCount", i, !0), c.parent || (b.setVariable("actionCount", i), b.addExport("actionCount")), h += "\n", d.contextOrFrameLookup(b, c, "actionCount") || (h += "\n    ", h += d.suppressValue((f = 13, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["hidden"])), a.autoesc), h += "\n"), h += "\n\n", h += d.suppressValue((f = 16, g = 11, d.callWrap(d.contextOrFrameLookup(b, c, "extra_data"), "extra_data", [{
                    actionCount: d.contextOrFrameLookup(b, c, "actionCount")
                }
                ])), a.autoesc), h += "\n\n", h += d.suppressValue((f = 19, g = 1, d.callWrap(d.contextOrFrameLookup(b, c, "base"), "base", ["NavigateButton"])), a.autoesc), a.getTemplate("app/common/modules/NavigateButton/NavigateButton.nunjucks", !0, function(f, g) {
                    if (f)
                        return void e(f);
                    for (var i in g.blocks)
                        b.addBlock(i, g.blocks[i]);
                    h += "\n", g.rootRenderFunc(a, b, c, d, e)
                })
            } catch (j) {
                e(d.handleError(j, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/InviterAnyEmail/InviterAnyEmail.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += '\n\n<div class="inviteEmail">\n    <form class="standardForm emailInviteForm">\n        <input type="text" name="email" class="emailInput" placeholder="', h += d.suppressValue((f = 6, g = 74, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Email address"])), a.autoesc), h += '"></input>\n        ', h += d.suppressValue((f = 7, g = 15, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    id: "invite",
                    options: {
                        class_name: "inviteEmailButton",
                        text: (f = 11, g = 25, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Send Invite"])),
                        size: "medium",
                        type: "submit"
                    }
                })])), a.autoesc), h += "\n    </form>\n</div>", e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/InviterEmail/InviterEmail.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n";
                var i;
                f = 10, g = 26, i = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["network"]), c.set("network", i, !0), c.parent || (b.setVariable("network", i), b.addExport("network")), h += "\n";
                var j;
                f = 11, g = 32, j = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["resource_name"]), c.set("resource_name", j, !0), c.parent || (b.setVariable("resource_name", j), b.addExport("resource_name")), h += "\n";
                var k;
                f = 12, g = 46, k = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["network_connect_button_text"]), c.set("network_connect_button_text", k, !0), c.parent || (b.setVariable("network_connect_button_text", k), b.addExport("network_connect_button_text")), h += "\n\n";
                var l;
                if (l=!1, c.set("is_connected", l, !0), c.parent || (b.setVariable("is_connected", l), b.addExport("is_connected")), h += "\n", "google" == d.contextOrFrameLookup(b, c, "network")) {
                    h += "\n    ";
                    var m;
                    m = d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "user", a.autoesc), "connected_to_google", a.autoesc), c.set("is_connected", m, !0), c.parent || (b.setVariable("is_connected", m), b.addExport("is_connected")), h += "\n"
                } else if ("yahoo" == d.contextOrFrameLookup(b, c, "network")) {
                    h += "\n    ";
                    var n;
                    n = d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "user", a.autoesc), "connected_to_yahoo", a.autoesc), c.set("is_connected", n, !0), c.parent || (b.setVariable("is_connected", n), b.addExport("is_connected")), h += "\n"
                } else if ("microsoft" == d.contextOrFrameLookup(b, c, "network")) {
                    h += "\n    ";
                    var o;
                    o = d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "user", a.autoesc), "connected_to_microsoft", a.autoesc), c.set("is_connected", o, !0), c.parent || (b.setVariable("is_connected", o), b.addExport("is_connected")), h += "\n"
                }
                h += "\n\n", d.contextOrFrameLookup(b, c, "is_connected") ? (h += "\n    ", h += d.suppressValue((f = 24, g = 11, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["InviteListEmail", d.makeKeywordArgs({
                    options: {
                        network: d.contextOrFrameLookup(b, c, "network"),
                        checkable: !0
                    },
                    resource: (f = 29, g = 32, d.callWrap(d.contextOrFrameLookup(b, c, "create_resource"), "create_resource", [d.contextOrFrameLookup(b, c, "resource_name"), d.makeKeywordArgs({
                        options: {
                            username: (f = 31, g = 44, d.callWrap(d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "user", a.autoesc), "get", a.autoesc), 'context["user"]["get"]', ["username"])),
                            filter: "not_on_pinterest"
                        }
                    })]))
                })])), a.autoesc), h += "\n") : (h += '\n    <div>\n        <div class="disconnected">\n            <span class="icon ', h += d.suppressValue(d.contextOrFrameLookup(b, c, "network"), a.autoesc), h += '"></span>\n            <br>\n            ', h += d.suppressValue((f = 40, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    id: "connect",
                    options: {
                        size: "medium",
                        text: d.contextOrFrameLookup(b, c, "network_connect_button_text")
                    }
                })])), a.autoesc), h += "  \n        </div>\n        <div>\n            ", h += d.suppressValue((f = 48, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["InviterAnyEmail", d.makeKeywordArgs({
                    id: "inviterAnyEmail",
                    options: {}
                })])), a.autoesc), h += '\n        </div>\n        <div class="panelFooter">\n            ', h += d.suppressValue((f = 53, g = 14, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Just so you know: We never email your contacts without your say so."])), a.autoesc), h += "\n        </div>\n    </div\n"), e(null, h)
            } catch (p) {
                e(d.handleError(p, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/NagBase/NagBase.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n", b.getBlock("content")(a, b, c, d, function(a, b) {
                    return a ? void e(a) : (h += b, h += "\n", void e(null, h))
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function b(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n    ", h += d.suppressValue((f = 8, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["centeredWithinWrapper"])), a.autoesc), h += "\n    ";
                var i;
                f = 9, g = 32, i = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["view_type"]), c.set("view_type", i, !0), c.parent || (b.setVariable("view_type", i), b.addExport("view_type")), h += "\n    ", d.contextOrFrameLookup(b, c, "view_type") && (h += "\n        ", h += d.suppressValue((f = 11, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", [d.contextOrFrameLookup(b, c, "view_type")])), a.autoesc), h += "\n    "), h += "\n\n    ";
                var j;
                j = d.contextOrFrameLookup(b, c, "data"), c.set("nag", j, !0), c.parent || (b.setVariable("nag", j), b.addExport("nag")), h += "\n    ", d.contextOrFrameLookup(b, c, "nag") && (h += "\n        ", h += d.suppressValue((f = 16, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "extra_data"), "extra_data", [{
                    type: d.memberLookup(d.contextOrFrameLookup(b, c, "nag"), "type", a.autoesc)
                }
                ])), a.autoesc), h += '\n        <div class="message">', h += d.suppressValue(a.getFilter("safe").call(b, d.memberLookup(d.contextOrFrameLookup(b, c, "nag"), "message", a.autoesc)), a.autoesc), h += "</div>\n    "), h += "\n\n    ", h += "\n    ", f = 21, g = 19, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["can_close", !1]) && (h += "\n        ", h += d.suppressValue((f = 22, g = 15, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    options: {
                        class_name: "nagClose",
                        borderless: !0
                    }
                })])), a.autoesc), h += "\n    "), h += "\n", e(null, h)
            } catch (k) {
                e(d.handleError(k, f, g))
            }
        }
        return {
            b_content: b,
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/Pin/Pin.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n", h += d.suppressValue((f = 30, g = 1, d.callWrap(d.contextOrFrameLookup(b, c, "base"), "base", ["PinBase"])), a.autoesc), a.getTemplate("app/common/modules/PinBase/PinBase.nunjucks", !0, function(i, j) {
                    if (i)
                        return void e(i);
                    for (var k in j.blocks)
                        b.addBlock(k, j.blocks[k]);
                    h += "\n\n", h += "\n\n", a.getTemplate("templates/macros/link.nunjucks", function(i, k) {
                        return i ? void e(i) : void k.getExported(function(i, k) {
                            if (i)
                                return void e(i);
                            if (!k.hasOwnProperty("link_markup"))
                                return void e(new Error("cannot import 'link_markup'"));
                            var l = k.link_markup;
                            b.setVariable("link_markup", l), h += "\n", a.getTemplate("templates/macros/image.nunjucks", function(i, k) {
                                return i ? void e(i) : void k.getExported(function(i, k) {
                                    if (i)
                                        return void e(i);
                                    if (!k.hasOwnProperty("image_tag"))
                                        return void e(new Error("cannot import 'image_tag'"));
                                    var l = k.image_tag;
                                    b.setVariable("image_tag", l), h += "\n", a.getTemplate("templates/macros/pin_attribution.nunjucks", function(i, k) {
                                        return i ? void e(i) : void k.getExported(function(i, k) {
                                            if (i)
                                                return void e(i);
                                            if (!k.hasOwnProperty("pin_attribution"))
                                                return void e(new Error("cannot import 'pin_attribution'"));
                                            var l = k.pin_attribution;
                                            b.setVariable("pin_attribution", l), h += "\n", a.getTemplate("templates/macros/pin_credit.nunjucks", function(i, k) {
                                                return i ? void e(i) : void k.getExported(function(i, k) {
                                                    if (i)
                                                        return void e(i);
                                                    if (!k.hasOwnProperty("block_pin_credit"))
                                                        return void e(new Error("cannot import 'block_pin_credit'"));
                                                    var l = k.block_pin_credit;
                                                    b.setVariable("block_pin_credit", l), h += "\n", a.getTemplate("templates/macros/search_debug.nunjucks", function(i, k) {
                                                        return i ? void e(i) : void k.getExported(function(i, k) {
                                                            if (i)
                                                                return void e(i);
                                                            if (!k.hasOwnProperty("search_debug"))
                                                                return void e(new Error("cannot import 'search_debug'"));
                                                            var l = k.search_debug;
                                                            b.setVariable("search_debug", l), h += "\n", a.getTemplate("templates/macros/visual_search.nunjucks", function(i, k) {
                                                                return i ? void e(i) : void k.getExported(function(i, k) {
                                                                    if (i)
                                                                        return void e(i);
                                                                    if (!k.hasOwnProperty("visual_search_pin_overlay"))
                                                                        return void e(new Error("cannot import 'visual_search_pin_overlay'"));
                                                                    var l = k.visual_search_pin_overlay;
                                                                    b.setVariable("visual_search_pin_overlay", l), h += "\n\n";
                                                                    var m;
                                                                    m = d.contextOrFrameLookup(b, c, "data"), c.set("pin", m, !0), c.parent || (b.setVariable("pin", m), b.addExport("pin")), h += "\n";
                                                                    var n;
                                                                    f = 65, g = 21, n = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["id"]), c.set("pin_id", n, !0), c.parent || (b.setVariable("pin_id", n), b.addExport("pin_id")), h += "\n";
                                                                    var o;
                                                                    f = 66, g = 23, o = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["tracked_link"]) || (f = 66, g = 50, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["link"])), c.set("pin_link", o, !0), c.parent || (b.setVariable("pin_link", o), b.addExport("pin_link")), h += "\n\n";
                                                                    var p;
                                                                    f = 68, g = 34, p = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["visual_search_attrs", {}
                                                                    ]), c.set("visual_search_attrs", p, !0), c.parent || (b.setVariable("visual_search_attrs", p), b.addExport("visual_search_attrs")), h += "\n";
                                                                    var q;
                                                                    q = a.getFilter("pin_url").call(b, d.contextOrFrameLookup(b, c, "pin_id")), c.set("pin_url", q, !0), c.parent || (b.setVariable("pin_url", q), b.addExport("pin_url")), h += "\n";
                                                                    var r;
                                                                    f = 70, g = 21, r = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["domain"]), c.set("domain", r, !0), c.parent || (b.setVariable("domain", r), b.addExport("domain")), h += "\n";
                                                                    var s;
                                                                    f = 71, g = 28, s = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["view_type", "summary"]), c.set("view_type", s, !0), c.parent || (b.setVariable("view_type", s), b.addExport("view_type")), h += "\n";
                                                                    var t;
                                                                    f = 72, g = 42, t = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["view_on_map_button", !1]), c.set("show_view_on_map_button", t, !0), c.parent || (b.setVariable("show_view_on_map_button", t), b.addExport("show_view_on_map_button")), h += "\n";
                                                                    var u;
                                                                    f = 73, g = 31, u=!d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["disable_links", !1]), c.set("use_link", u, !0), c.parent || (b.setVariable("use_link", u), b.addExport("use_link")), h += "\n";
                                                                    var v;
                                                                    f = 74, g = 32, v = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["hide_hover_UI"]), c.set("hide_hover_UI", v, !0), c.parent || (b.setVariable("hide_hover_UI", v), b.addExport("hide_hover_UI")), h += "\n";
                                                                    var w;
                                                                    f = 75, g = 72, w=!d.callWrap(d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "experiments", a.autoesc), "in_experiment_group", a.autoesc), 'context["experiment"]["in_experim"]', ["hide_comments_in_grid_v2", "enabled"]), c.set("show_comments_default", w, !0), c.parent || (b.setVariable("show_comments_default", w), b.addExport("show_comments_default")), h += "\n";
                                                                    var x;
                                                                    f = 76, g = 32, x = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["show_comments", d.contextOrFrameLookup(b, c, "show_comments_default")]), c.set("show_comments", x, !0), c.parent || (b.setVariable("show_comments", x), b.addExport("show_comments")), h += "\n\n";
                                                                    var y;
                                                                    f = 78, g = 33, y = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["send_via_modal"]), c.set("send_via_modal", y, !0), c.parent || (b.setVariable("send_via_modal", y), b.addExport("send_via_modal")), h += "\n\n";
                                                                    var z;
                                                                    f = 80, g = 37, z = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["show_social_counts", !0]), c.set("show_social_counts", z, !0), c.parent || (b.setVariable("show_social_counts", z), b.addExport("show_social_counts")), h += "\n";
                                                                    var A;
                                                                    f = 81, g = 36, A = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["show_meta", !0]), c.set("show_meta_section", A, !0), c.parent || (b.setVariable("show_meta_section", A), b.addExport("show_meta_section")), h += "\n";
                                                                    var B;
                                                                    f = 82, g = 42, B = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["show_send_button", !0]), c.set("should_show_send_button", B, !0), c.parent || (b.setVariable("should_show_send_button", B), b.addExport("should_show_send_button")), h += "\n";
                                                                    var C;
                                                                    f = 83, g = 35, C = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["default_board_id"]), c.set("default_board_id", C, !0), c.parent || (b.setVariable("default_board_id", C), b.addExport("default_board_id")), h += "\n";
                                                                    var D;
                                                                    f = 84, g = 26, D = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["attribution", {}
                                                                    ]), c.set("attribution", D, !0), c.parent || (b.setVariable("attribution", D), b.addExport("attribution")), h += "\n";
                                                                    var E;
                                                                    f = 85, g = 25, E = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["access", []]), c.set("pin_access", E, !0), c.parent || (b.setVariable("pin_access", E), b.addExport("pin_access")), h += "\n";
                                                                    var F;
                                                                    F = a.getFilter("contains").call(b, d.contextOrFrameLookup(b, c, "pin_access"), "write"), c.set("can_write", F, !0), c.parent || (b.setVariable("can_write", F), b.addExport("can_write")), h += "\n";
                                                                    var G;
                                                                    G = d.contextOrFrameLookup(b, c, "can_write") || a.getFilter("contains").call(b, d.contextOrFrameLookup(b, c, "pin_access"), "delete"), c.set("can_edit", G, !0), c.parent || (b.setVariable("can_edit", G), b.addExport("can_edit")), h += "\n";
                                                                    var H;
                                                                    f = 88, g = 26, H = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["repin_count"]), c.set("repin_count", H, !0), c.parent || (b.setVariable("repin_count", H), b.addExport("repin_count")), h += "\n";
                                                                    var I;
                                                                    f = 89, g = 25, I = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["like_count"]), c.set("like_count", I, !0), c.parent || (b.setVariable("like_count", I), b.addExport("like_count")), h += "\n";
                                                                    var J;
                                                                    f = 90, g = 28, J = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["comment_count"]), c.set("comment_count", J, !0), c.parent || (b.setVariable("comment_count", J), b.addExport("comment_count")), h += "\n";
                                                                    var K;
                                                                    f = 91, g = 48, K = d.callWrap(d.memberLookup((f = 91, g = 28, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["comments", {}
                                                                    ])), "get", a.autoesc), 'the return value of (pin["get"])["get"]', ["data", []]), c.set("comments_data", K, !0), c.parent || (b.setVariable("comments_data", K), b.addExport("comments_data")), h += "\n";
                                                                    var L;
                                                                    f = 92, g = 33, L = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["canonical_pin"]), c.set("canonical_pin_data", L, !0), c.parent || (b.setVariable("canonical_pin_data", L), b.addExport("canonical_pin_data")), h += "\n";
                                                                    var M;
                                                                    f = 93, g = 23, M = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["promoter", {}
                                                                    ]), c.set("promoter", M, !0), c.parent || (b.setVariable("promoter", M), b.addExport("promoter")), h += "\n";
                                                                    var N;
                                                                    f = 94, g = 89, N = d.callWrap(d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "experiments", a.autoesc), "in_experiment_groups_active_or_triggered", a.autoesc), 'context["experiment"]["in_experim"]', ["pin_translator_v3", ["enabled", "employees"]]), c.set("show_translate_button", N, !0), c.parent || (b.setVariable("show_translate_button", N), b.addExport("show_translate_button")), h += "\n\n";
                                                                    var O;
                                                                    f = 97, g = 21, O = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["pinner", {}
                                                                    ]), c.set("pinner", O, !0), c.parent || (b.setVariable("pinner", O), b.addExport("pinner")), h += "\n";
                                                                    var P;
                                                                    f = 98, g = 25, P = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["via_pinner", {}
                                                                    ]), c.set("via_pinner", P, !0), c.parent || (b.setVariable("via_pinner", P), b.addExport("via_pinner")), h += "\n";
                                                                    var Q;
                                                                    f = 99, g = 20, Q = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["board", {}
                                                                    ]) || {}, c.set("board", Q, !0), c.parent || (b.setVariable("board", Q), b.addExport("board")), h += "\n\n";
                                                                    var R;
                                                                    R = 800, c.set("MAX_PIN_HEIGHT_GRID", R, !0), c.parent || (b.setVariable("MAX_PIN_HEIGHT_GRID", R), b.addExport("MAX_PIN_HEIGHT_GRID")), h += "\n\n\n\n", h += "\n\n", h += "\n\n", h += "\n\n", h += "\n\n", h += "\n", j.rootRenderFunc(a, b, c, d, e)
                                                                })
                                                            })
                                                        })
                                                    })
                                                })
                                            })
                                        })
                                    })
                                })
                            })
                        })
                    })
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function b(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                if (h += "\n    ", h += "\n    ", h += d.suppressValue((f = 107, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "describe"), "describe", [d.makeKeywordArgs({
                    pin_id: d.contextOrFrameLookup(b, c, "pin_id")
                })])), a.autoesc), h += "\n    ", f = 108, g = 19, (d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["component_type"]) || 0 == (f = 108, g = 52, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["component_type"]))) && (h += "\n        ", h += d.suppressValue((f = 109, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "attr"), "attr", [{
                    "data-component-type": (f = 109, g = 49, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["component_type"]))
                }
                ])), a.autoesc), h += "\n    "), h += "\n\n    ", "detailed" == d.contextOrFrameLookup(b, c, "view_type")) {
                    h += "\n        ";
                    var i;
                    if (f = 113, g = 68, i = d.callWrap(d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "experiences", a.autoesc), "is_placed_experience", a.autoesc), 'context["experience"]["is_placed_"]', ["WEB_PIN_CLOSEUP", "WEB_PIN_CLOSEUP_AUTOBAHN"]), c.set("autobahn_pin", i, !0), c.parent || (b.setVariable("autobahn_pin", i), b.addExport("autobahn_pin")), h += "\n        ", d.contextOrFrameLookup(b, c, "autobahn_pin")) {
                        h += "\n            ";
                        var j;
                        f = 115, g = 53, j = d.callWrap(d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "experiences", a.autoesc), "experience_viewed", a.autoesc), 'context["experience"]["experience"]', ["WEB_PIN_CLOSEUP", "WEB_PIN_CLOSEUP_AUTOBAHN"]), c.set("_temp_do", j, !0), c.parent || b.setVariable("_temp_do", j), h += "\n        "
                    }
                    h += "\n\n        ";
                    var k;
                    if (k = {}, c.set("unauth_pin_closeup_display_data", k, !0), c.parent || (b.setVariable("unauth_pin_closeup_display_data", k), b.addExport("unauth_pin_closeup_display_data")), h += "\n        ", d.contextOrFrameLookup(b, c, "options") && (f = 119, g = 35, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["unauth_pin_closeup_display_data"]))) {
                        h += "\n            ";
                        var l;
                        f = 120, g = 62, l = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["unauth_pin_closeup_display_data"]), c.set("unauth_pin_closeup_display_data", l, !0), c.parent || (b.setVariable("unauth_pin_closeup_display_data", l), b.addExport("unauth_pin_closeup_display_data")), h += "\n        "
                    }
                    h += "\n        ";
                    var m;
                    if (f = 122, g = 64, m = d.callWrap(d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "experiences", a.autoesc), "is_placed_experience", a.autoesc), 'context["experience"]["is_placed_"]', ["WEB_PIN_CLOSEUP", "WEB_PIN_CLOSEUP_LITE"]) || (f = 123, g = 61, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "unauth_pin_closeup_display_data"), "get", a.autoesc), 'unauth_pin_closeup_display_data["get"]', ["lite"])), c.set("pin_lite", m, !0), c.parent || (b.setVariable("pin_lite", m), b.addExport("pin_lite")), h += "\n        ", d.contextOrFrameLookup(b, c, "pin_lite")) {
                        h += "\n            ";
                        var n;
                        f = 125, g = 53, n = d.callWrap(d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "experiences", a.autoesc), "experience_viewed", a.autoesc), 'context["experience"]["experience"]', ["WEB_PIN_CLOSEUP", "WEB_PIN_CLOSEUP_LITE"]), c.set("_temp_do", n, !0), c.parent || b.setVariable("_temp_do", n), h += "\n        "
                    }
                    h += "\n        ", d.contextOrFrameLookup(b, c, "autobahn_pin") && (h += "\n            ", h += d.suppressValue((f = 128, g = 21, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["litePlus"])), a.autoesc), h += "\n        "), h += "\n        ", (d.contextOrFrameLookup(b, c, "pin_lite") || d.contextOrFrameLookup(b, c, "autobahn_pin")) && (h += "\n            ", h += d.suppressValue((f = 131, g = 21, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["lite"])), a.autoesc), h += "\n        "), h += "\n    "
                }
                h += "\n", e(null, h)
            } catch (o) {
                e(d.handleError(o, f, g))
            }
        }
        function c(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n    ", h += d.suppressValue((f = 137, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "include_data"), "include_data", ["is_playable", "is_video", "attribution", "embed", "images", "link"])), a.autoesc), h += "\n    ", h += d.suppressValue((f = 138, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", [d.contextOrFrameLookup(b, c, "view_type")])), a.autoesc), h += '\n\n    <a href="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "pin_url"), a.autoesc), h += '" class="boardPinsGridPin"\n            data-element-type="', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "PIN_SOURCE_IMAGE", a.autoesc), a.autoesc), h += '">\n        <span class="hoverMask"></span>\n        ';
                var i;
                f = 143, g = 46, i = d.callWrap(d.memberLookup((f = 143, g = 28, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["images", {}
                ])), "get", a.autoesc), 'the return value of (pin["get"])["get"]', ["70x"]), c.set("image", i, !0), c.parent || (b.setVariable("image", i), b.addExport("image")), h += "\n        ", h += d.suppressValue((f = 144, g = 18, d.callWrap(d.contextOrFrameLookup(b, c, "image_tag"), "image_tag", [d.makeKeywordArgs({
                    src: (f = 145, g = 29, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "image"), "get", a.autoesc), 'image["get"]', ["url"])),
                    height: (f = 146, g = 32, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "image"), "get", a.autoesc), 'image["get"]', ["height"])),
                    width: 70,
                    alt: d.contextOrFrameLookup(b, c, "description")
                })])), a.autoesc), h += "\n    </a>\n", e(null, h)
            } catch (j) {
                e(d.handleError(j, f, g))
            }
        }
        function d(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n    ";
                var i;
                i = {
                    search_identifier: (f = 154, g = 53, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["search_identifier", - 1])),
                    result_index: (f = 155, g = 46, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["grid_index", - 1]))
                }, c.set("data_aux", i, !0), c.parent || (b.setVariable("data_aux", i), b.addExport("data_aux")), h += "\n\n    ", h += d.suppressValue((f = 157, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", [d.contextOrFrameLookup(b, c, "view_type")])), a.autoesc), h += "\n    ", h += d.suppressValue((f = 158, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "search_debug"), "search_debug", [d.makeKeywordArgs({
                    data: d.contextOrFrameLookup(b, c, "pin")
                })])), a.autoesc), h += "\n\n    ";
                var j;
                j = 106, c.set("visual_object_width", j, !0), c.parent || (b.setVariable("visual_object_width", j), b.addExport("visual_object_width")), h += '\n\n    <a href="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "pin_url"), a.autoesc), h += '"\n       class="visualObjectGridPin"\n       data-element-type="', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "PIN_SOURCE_IMAGE", a.autoesc), a.autoesc), h += "\"\n       data-aux='", h += d.suppressValue(a.getFilter("to_json").call(b, d.contextOrFrameLookup(b, c, "data_aux")), a.autoesc), h += '\'>\n        <span class="hoverMask"></span>\n        ';
                var k;
                f = 167, g = 46, k = d.callWrap(d.memberLookup((f = 167, g = 28, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["images", {}
                ])), "get", a.autoesc), 'the return value of (pin["get"])["get"]', ["236x"]), c.set("image", k, !0), c.parent || (b.setVariable("image", k), b.addExport("image")), h += "\n        ", h += d.suppressValue((f = 168, g = 18, d.callWrap(d.contextOrFrameLookup(b, c, "image_tag"), "image_tag", [d.makeKeywordArgs({
                    src: (f = 169, g = 29, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "image"), "get", a.autoesc), 'image["get"]', ["url"])),
                    height: (f = 170, g = 32, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "image"), "get", a.autoesc), 'image["get"]', ["height"]) / (f = 170, g = 54, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "image"), "get", a.autoesc), 'image["get"]', ["width"])) * d.contextOrFrameLookup(b, c, "visual_object_width")),
                    width: d.contextOrFrameLookup(b, c, "visual_object_width")
                })])), a.autoesc), h += "\n    </a>\n", e(null, h)
            } catch (l) {
                e(d.handleError(l, f, g))
            }
        }
        function e(a, b, c, d, f) {
            var g = null, h = null, i = "";
            try {
                b.getSuper(a, "summary_view", e, c, d, function(e, j) {
                    if (e)
                        return void f(e);
                    j = d.markSafe(j), i += "\n    ", i += d.suppressValue((g = 176, h = 17, d.callWrap(d.contextOrFrameLookup(b, c, "include_data"), "include_data", ["is_playable", "is_video", "attribution", "embed", "images", "link", "dominant_color", "place"])), a.autoesc), i += "\n\n    ", i += d.suppressValue((g = 185, h = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", [d.contextOrFrameLookup(b, c, "view_type")])), a.autoesc), i += "\n\n    ", d.contextOrFrameLookup(b, c, "hide_hover_UI") && (i += "\n        ", i += d.suppressValue((g = 188, h = 17, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["hideHoverUI"])), a.autoesc), i += "\n    "), i += "\n\n    ";
                    var k;
                    k = "PinCreate", c.set("submodule_name", k, !0), c.parent || (b.setVariable("submodule_name", k), b.addExport("submodule_name")), i += "\n    ";
                    var l;
                    l = "repin", c.set("submodule_field_set_key", l, !0), c.parent || (b.setVariable("submodule_field_set_key", l), b.addExport("submodule_field_set_key")), i += "\n    ";
                    var m;
                    m = {}, c.set("show_modal_options", m, !0), c.parent || (b.setVariable("show_modal_options", m), b.addExport("show_modal_options")), i += "\n    ";
                    var n;
                    if (n = {
                        action: "repin",
                        is_video: (g = 196, h = 27, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["is_video"])),
                        default_board_id: d.contextOrFrameLookup(b, c, "default_board_id")
                    }, c.set("submodule_options", n, !0), c.parent || (b.setVariable("submodule_options", n), b.addExport("submodule_options")), i += "\n    ", g = 199, h = 48, d.callWrap(d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "experiments", a.autoesc), "in_experiment_groups", a.autoesc), 'context["experiment"]["in_experim"]', ["web_pin_create", ["enabled_v3", "employees_v3"]])) {
                        i += "\n        ";
                        var o;
                        o = "PinCreate3", c.set("submodule_name", o, !0), c.parent || (b.setVariable("submodule_name", o), b.addExport("submodule_name")), i += "\n        ";
                        var p;
                        p = "repin", c.set("submodule_field_set_key", p, !0), c.parent || (b.setVariable("submodule_field_set_key", p), b.addExport("submodule_field_set_key")), i += "\n        ";
                        var q;
                        q=!1, c.set("transparent_modal", q, !0), c.parent || (b.setVariable("transparent_modal", q), b.addExport("transparent_modal")), i += "\n        ";
                        var r;
                        r = {
                            container_class: "webNewContentNewRepin",
                            custom_entrance_animation: !0,
                            custom_exit_animation: !0,
                            mask_type: "webNewContentNewRepin",
                            modal_style: "webNewContentNewRepin"
                        }, c.set("show_modal_options", r, !0), c.parent || (b.setVariable("show_modal_options", r), b.addExport("show_modal_options")), i += "\n        ";
                        var s;
                        g = 210, h = 45, s = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["pin_create_options", {}
                        ]), c.set("pin_create_options", s, !0), c.parent || (b.setVariable("pin_create_options", s), b.addExport("pin_create_options")), i += "\n        ";
                        var t;
                        t = {
                            action: "repin",
                            pin_id: d.contextOrFrameLookup(b, c, "pin_id"),
                            is_video: (g = 214, h = 31, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["is_video"]))
                        }, c.set("submodule_options", t, !0), c.parent || (b.setVariable("submodule_options", t), b.addExport("submodule_options")), i += "\n        ";
                        var u;
                        g = 216, h = 36, u = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "submodule_options"), "update", a.autoesc), 'submodule_options["update"]', [d.contextOrFrameLookup(b, c, "pin_create_options")]), c.set("_temp_do", u, !0), c.parent || b.setVariable("_temp_do", u), i += "\n    "
                    }
                    i += '\n    <div class="pinImageActionButtonWrapper">\n        <div class="repinSendButtonWrapper">\n            ';
                    var v;
                    v = d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "is_authenticated", a.autoesc) && "secret" != d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "privacy", a.autoesc) && d.contextOrFrameLookup(b, c, "should_show_send_button"), c.set("show_send_button", v, !0), c.parent || (b.setVariable("show_send_button", v), b.addExport("show_send_button")), i += "\n            ";
                    var w;
                    w = d.contextOrFrameLookup(b, c, "can_edit") && (g = 222, h = 64, !d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["hide_edit_button"])), c.set("show_edit_button", w, !0), c.parent || (b.setVariable("show_edit_button", w), b.addExport("show_edit_button")), i += "\n            ";
                    var x;
                    if (x=!1, c.set("show_pin_it_text", x, !0), c.parent || (b.setVariable("show_pin_it_text", x), b.addExport("show_pin_it_text")), i += "\n            ", "ja" == d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "language", a.autoesc)) {
                        i += "\n                ";
                        var y;
                        y=!0, c.set("show_pin_it_text", y, !0), c.parent || (b.setVariable("show_pin_it_text", y), b.addExport("show_pin_it_text")), i += "\n            "
                    }
                    i += "\n\n            ", i += "\n            ";
                    var z;
                    z = {
                        action: "repin",
                        is_video: (g = 231, h = 35, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["is_video"])),
                        default_board_id: d.contextOrFrameLookup(b, c, "default_board_id"),
                        transparent_modal: d.contextOrFrameLookup(b, c, "transparent_modal"),
                        show_suggestions: d.contextOrFrameLookup(b, c, "show_suggestions")
                    }, c.set("default_options", z, !0), c.parent || (b.setVariable("default_options", z), b.addExport("default_options")), i += "\n            ";
                    var A;
                    g = 236, h = 38, A = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "default_options"), "update", a.autoesc), 'default_options["update"]', [d.contextOrFrameLookup(b, c, "submodule_options")]), c.set("_temp_do", A, !0), c.parent || b.setVariable("_temp_do", A), i += "\n            ";
                    var B;
                    B = d.contextOrFrameLookup(b, c, "default_options"), c.set("submodule_options", B, !0), c.parent || (b.setVariable("submodule_options", B), b.addExport("submodule_options")), i += "\n            ", i += d.suppressValue((g = 238, h = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["ShowModalButton", d.makeKeywordArgs({
                        id: "pinItButton",
                        options: {
                            ga_category: "repin_create",
                            class_name: "repinSmall",
                            color: "primary",
                            primary_on_hover: !0,
                            has_icon: !0,
                            show_text: d.contextOrFrameLookup(b, c, "show_pin_it_text"),
                            text: (g = 247, h = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Pin it"])),
                            require_auth: !0,
                            require_auth_params: {
                                action: "pinit"
                            },
                            log_element_type: d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "PIN_REPIN_BUTTON", a.autoesc),
                            show_modal_options: d.contextOrFrameLookup(b, c, "show_modal_options"),
                            inline_signup_modal: d.contextOrFrameLookup(b, c, "inline_signup_modal_group"),
                            submodule: {
                                name: d.contextOrFrameLookup(b, c, "submodule_name"),
                                resource: {
                                    name: "PinResource",
                                    options: {
                                        id: d.contextOrFrameLookup(b, c, "pin_id"),
                                        field_set_key: d.contextOrFrameLookup(b, c, "submodule_field_set_key")
                                    }
                                },
                                options: d.contextOrFrameLookup(b, c, "submodule_options"),
                                error_strategy: d.memberLookup(d.contextOrFrameLookup(b, c, "ErrorStrategy"), "SHOW", a.autoesc)
                            }
                        }
                    })])), a.autoesc), i += "\n            ";
                    var C;
                    g = 267, h = 33, C = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["images", {}
                    ]), c.set("images", C, !0), c.parent || (b.setVariable("images", C), b.addExport("images")), i += "\n            ";
                    var D;
                    if (g = 268, h = 35, D = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "images"), "get", a.autoesc), 'images["get"]', ["236x"]), c.set("image", D, !0), c.parent || (b.setVariable("image", D), b.addExport("image")), i += "\n            ", d.contextOrFrameLookup(b, c, "show_send_button")) {
                        i += "\n                ";
                        var E;
                        if (E = {
                            manually_close: !0,
                            largeCaret: !1,
                            fixed: !1,
                            view_type: "gridShare",
                            position_point: "BOTTOM_CENTER",
                            class_name: (g = 276, h = 45, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["dropdown_class_name", "underneathHeader"])),
                            display_while_loading: !0,
                            force_in_viewport: !0,
                            caret_style: "whiteWash"
                        }, c.set("send_pin_dropdown_options", E, !0), c.parent || (b.setVariable("send_pin_dropdown_options", E), b.addExport("send_pin_dropdown_options")), i += "\n                ", g = 281, h = 31, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["send_pin_dropdown_options"])) {
                            i += "\n                    ";
                            var F;
                            g = 282, h = 56, F = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "send_pin_dropdown_options"), "update", a.autoesc), 'send_pin_dropdown_options["update"]', [(g = 282, h = 68, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["send_pin_dropdown_options"]))]), c.set("_temp_do", F, !0), c.parent || b.setVariable("_temp_do", F), i += "\n                "
                        }
                        i += "\n                ";
                        var G;
                        G = {
                            name: "SendPin",
                            options: {
                                object_id: d.contextOrFrameLookup(b, c, "pin_id"),
                                object_image_url: d.memberLookup(d.contextOrFrameLookup(b, c, "image"), "url", a.autoesc),
                                object_description: d.contextOrFrameLookup(b, c, "description"),
                                object_url: d.contextOrFrameLookup(b, c, "pin_url")
                            }
                        }, c.set("send_module", G, !0), c.parent || (b.setVariable("send_module", G), b.addExport("send_module")), i += "\n                ";
                        var H;
                        if (H = {
                            ga_category: "sendPinDropdown",
                            log_element_type: d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "PIN_SEND_BUTTON", a.autoesc),
                            class_name: "sendSmall sendPinGrid",
                            has_icon: !0,
                            text: (g = 298, h = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Send"])),
                            show_text: !0,
                            dropdown_options: d.contextOrFrameLookup(b, c, "send_pin_dropdown_options"),
                            check_write_banned: !0,
                            check_limited_login: !0
                        }, c.set("send_pin_options", H, !0), c.parent || (b.setVariable("send_pin_options", H), b.addExport("send_pin_options")), i += "\n                ", d.contextOrFrameLookup(b, c, "send_via_modal")) {
                            i += "\n                    ";
                            var I;
                            g = 305, h = 47, I = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "send_pin_options"), "update", a.autoesc), 'send_pin_options["update"]', [{
                                submodule: d.contextOrFrameLookup(b, c, "send_module")
                            }
                            ]), c.set("_temp_do", I, !0), c.parent || b.setVariable("_temp_do", I), i += "\n                    ", i += d.suppressValue((g = 308, h = 27, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["ShowModalButton", d.makeKeywordArgs({
                                id: "sendPinButton",
                                data: d.contextOrFrameLookup(b, c, "pin"),
                                options: d.contextOrFrameLookup(b, c, "send_pin_options")
                            })])), a.autoesc), i += "\n                "
                        } else {
                            i += "\n                    ";
                            var J;
                            g = 314, h = 47, J = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "send_pin_options"), "update", a.autoesc), 'send_pin_options["update"]', [{
                                module: d.contextOrFrameLookup(b,
                                c,
                                "send_module")
                            }
                            ]), c.set("_temp_do", J, !0), c.parent || b.setVariable("_temp_do", J), i += "\n                    ", i += d.suppressValue((g = 317, h = 27, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["DropdownButton", d.makeKeywordArgs({
                                id: "sendPinButton",
                                data: d.contextOrFrameLookup(b, c, "pin"),
                                options: d.contextOrFrameLookup(b, c, "send_pin_options")
                            })])), a.autoesc), i += "\n                "
                        }
                        i += "\n            "
                    }
                    i += '\n        </div>\n        <div class="likeEditButtonWrapper">\n            ', d.contextOrFrameLookup(b, c, "show_edit_button") && (i += "\n                ", i += d.suppressValue((g = 327, h = 23, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["ShowModalButton", d.makeKeywordArgs({
                        id: "editButton",
                        options: {
                            ga_category: "pin_edit",
                            class_name: "editPin",
                            text: (g = 332, h = 33, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Edit"])),
                            show_text: !1,
                            has_icon: !0,
                            submodule: {
                                name: "PinEdit",
                                resource: {
                                    name: "PinResource",
                                    options: {
                                        id: d.contextOrFrameLookup(b, c, "pin_id"),
                                        field_set_key: "edit"
                                    }
                                },
                                options: {
                                    next_url: "/pin/" + d.contextOrFrameLookup(b, c, "pin_id") + "/edit/"
                                }
                            },
                            log_element_type: d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "PIN_EDIT_BUTTON", a.autoesc)
                        }
                    })])), a.autoesc), i += "\n            "), i += "\n\n            ";
                    var K;
                    K=!(d.contextOrFrameLookup(b, c, "show_send_button") && d.contextOrFrameLookup(b, c, "show_edit_button")), c.set("show_like_button", K, !0), c.parent || (b.setVariable("show_like_button", K), b.addExport("show_like_button")), i += "\n            ";
                    var L;
                    if (g = 354, h = 35, L = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["tracked_link"]) || (g = 354, h = 62, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["link"])), c.set("nav_link", L, !0), c.parent || (b.setVariable("nav_link", L), b.addExport("nav_link")), i += "\n\n            ", d.contextOrFrameLookup(b, c, "show_like_button")) {
                        i += "\n                ";
                        var M;
                        if (g = 357, h = 46, M = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["source_interest"]), c.set("source_interest", M, !0), c.parent || (b.setVariable("source_interest", M), b.addExport("source_interest")), i += "\n                ", d.contextOrFrameLookup(b, c, "source_interest")) {
                            i += "\n                    ";
                            var N;
                            g = 359, h = 65, N = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "source_interest"), "get", a.autoesc), 'source_interest["get"]', ["id"]), c.set("source_interest_id", N, !0), c.parent || (b.setVariable("source_interest_id", N), b.addExport("source_interest_id")), i += "\n                "
                        }
                        i += "\n                ";
                        var O;
                        g = 361, h = 42, O = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["liked_by_me"]), c.set("liked_by_me", O, !0), c.parent || (b.setVariable("liked_by_me", O), b.addExport("liked_by_me")), i += "\n                ", i += d.suppressValue((g = 362, h = 23, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["PinLikeButton", d.makeKeywordArgs({
                            id: "likeButton",
                            options: {
                                ga_category: "like",
                                class_name: "likeSmall",
                                liked: d.contextOrFrameLookup(b, c, "liked_by_me"),
                                pin_id: d.contextOrFrameLookup(b, c, "pin_id"),
                                has_icon: !0,
                                inline_signup_modal: d.contextOrFrameLookup(b, c, "inline_signup_modal_group"),
                                show_text: !1,
                                source_interest_id: d.contextOrFrameLookup(b, c, "source_interest_id"),
                                text: (g = 373, h = 33, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Like"]))
                            }
                        })])), a.autoesc), i += "\n            "
                    }
                    i += "\n        </div>\n\n        ";
                    var P;
                    g = 379, h = 31, P = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "image"), "get", a.autoesc), 'image["get"]', ["height"]), c.set("height", P, !0), c.parent || (b.setVariable("height", P), b.addExport("height")), i += "\n        ";
                    var Q;
                    Q=!1, c.set("is_collapsed_giraffe", Q, !0), c.parent || (b.setVariable("is_collapsed_giraffe", Q), b.addExport("is_collapsed_giraffe")), i += "\n        ";
                    var R;
                    g = 381, h = 46, R = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["squish_giraffe_pins", !0]), c.set("should_collapse_pin", R, !0), c.parent || (b.setVariable("should_collapse_pin", R), b.addExport("should_collapse_pin")), i += "\n        ";
                    var S;
                    if (g = 382, h = 46, S = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["max_pin_height_grid", d.contextOrFrameLookup(b, c, "MAX_PIN_HEIGHT_GRID") + 100]), c.set("max_pin_height_grid", S, !0), c.parent || (b.setVariable("max_pin_height_grid", S), b.addExport("max_pin_height_grid")), i += "\n        ", d.contextOrFrameLookup(b, c, "height") >= d.contextOrFrameLookup(b, c, "max_pin_height_grid") && d.contextOrFrameLookup(b, c, "should_collapse_pin")) {
                        i += "\n            ";
                        var T;
                        T=!0, c.set("is_collapsed_giraffe", T, !0), c.parent || (b.setVariable("is_collapsed_giraffe", T), b.addExport("is_collapsed_giraffe")), i += "\n            ", i += d.suppressValue((g = 385, h = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                            id: "expandGiraffe",
                            options: {
                                class_name: "expandGiraffe",
                                icon: !1,
                                text: (g = 390, h = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Expand Pin"])),
                                borderless: !0
                            }
                        })])), a.autoesc), i += "\n        "
                    }
                    i += "\n\n        ";
                    var U;
                    U = d.contextOrFrameLookup(b, c, "pin_link") && d.contextOrFrameLookup(b, c, "domain") && (g = 396, h = 90, d.callWrap(d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "experiments", a.autoesc), "in_experiment_group", a.autoesc), 'context["experiment"]["in_experim"]', ["grid_view_navigate", "on_image_hover_with_text3"])), c.set("has_pin_nav", U, !0), c.parent || (b.setVariable("has_pin_nav", U), b.addExport("has_pin_nav")), i += "\n        ";
                    var V;
                    V = d.contextOrFrameLookup(b, c, "pin_link") && d.contextOrFrameLookup(b, c, "domain") && (g = 398, h = 102, d.callWrap(d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "experiments", a.autoesc), "in_experiment_group", a.autoesc), 'context["experiment"]["in_experim"]', ["grid_view_navigate", "on_image_hover_with_text4"])), c.set("has_pin_nav_transparent", V, !0), c.parent || (b.setVariable("has_pin_nav_transparent", V), b.addExport("has_pin_nav_transparent")), i += "\n        ";
                    var W;
                    if (W = (d.contextOrFrameLookup(b, c, "has_pin_nav") || d.contextOrFrameLookup(b, c, "has_pin_nav_transparent"))&&!d.contextOrFrameLookup(b, c, "can_edit") && (g = 401, h = 84, !d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["embed"])), c.set("show_pin_nav_onhover", W, !0), c.parent || (b.setVariable("show_pin_nav_onhover", W), b.addExport("show_pin_nav_onhover")), i += "\n        ", d.contextOrFrameLookup(b, c, "show_pin_nav_onhover")) {
                        i += "\n            ";
                        var X;
                        if (X = "pinNavLink navLinkOverlay", c.set("class_names", X, !0), c.parent || (b.setVariable("class_names", X), b.addExport("class_names")), i += "\n            ", d.contextOrFrameLookup(b, c, "has_pin_nav_transparent")) {
                            i += "\n                ";
                            var Y;
                            Y = d.contextOrFrameLookup(b, c, "class_names") + " transparentBg", c.set("class_names", Y, !0), c.parent || (b.setVariable("class_names", Y), b.addExport("class_names")), i += "\n            "
                        }
                        if (i += "\n            ", d.contextOrFrameLookup(b, c, "is_collapsed_giraffe")) {
                            i += "\n                ";
                            var Z;
                            Z = d.contextOrFrameLookup(b, c, "class_names") + " squished", c.set("class_names", Z, !0), c.parent || (b.setVariable("class_names", Z), b.addExport("class_names")), i += "\n            "
                        }
                        i += "\n            ", i += d.suppressValue((g = 410, h = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["NavigateButton", d.makeKeywordArgs({
                            options: {
                                class_name: d.contextOrFrameLookup(b, c, "class_names"),
                                url: d.contextOrFrameLookup(b, c, "pin_link"),
                                nofollow: !0,
                                has_icon: !0,
                                text: a.getFilter("named_format").call(b, (g = 416, h = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Learn more at {{ domain }}"])), {
                                    domain: d.contextOrFrameLookup(b, c, "domain")
                                }),
                                element_type: "a",
                                safe_link_pin_id: d.contextOrFrameLookup(b, c, "pin_id"),
                                log_element_type: d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "WEBSITE_BUTTON", a.autoesc),
                                log_obj_id: d.contextOrFrameLookup(b, c, "pin_id"),
                                borderless: !0
                            }
                        })])), a.autoesc), i += "\n        "
                    }
                    i += '\n\n        <div class="pinHolder">\n            ';
                    var $;
                    g = 427, h = 49, $ = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["dominant_color"]), c.set("solid_background_color", $, !0), c.parent || (b.setVariable("solid_background_color", $), b.addExport("solid_background_color")), i += "\n            ";
                    var _;
                    if (_ = "pinImageWrapper", c.set("class_name", _, !0), c.parent || (b.setVariable("class_name", _), b.addExport("class_name")), i += "\n            ", d.contextOrFrameLookup(b, c, "is_collapsed_giraffe")) {
                        i += "\n                ";
                        var ab;
                        ab = d.contextOrFrameLookup(b, c, "class_name") + " collapsed", c.set("class_name", ab, !0), c.parent || (b.setVariable("class_name", ab), b.addExport("class_name")), i += "\n            "
                    }
                    if (i += "\n            ", d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "is_authenticated", a.autoesc)) {
                        i += "\n                ";
                        var bb;
                        bb = d.contextOrFrameLookup(b, c, "class_name") + " draggable", c.set("class_name", bb, !0), c.parent || (b.setVariable("class_name", bb), b.addExport("class_name")), i += "\n            "
                    }
                    i += "\n            ", d.contextOrFrameLookup(b, c, "use_link") ? (i += '\n                <a href="', i += d.suppressValue(d.contextOrFrameLookup(b, c, "pin_url"), a.autoesc), i += '" class="', i += d.suppressValue(d.contextOrFrameLookup(b, c, "class_name"), a.autoesc), i += '"\n                    data-element-type="', i += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "PIN_SOURCE_IMAGE", a.autoesc), a.autoesc), i += '"\n                    ', d.contextOrFrameLookup(b, c, "solid_background_color") && (i += '\n                        style="background: ', i += d.suppressValue(d.contextOrFrameLookup(b, c, "solid_background_color"), a.autoesc), i += ';"\n                    '), i += "\n                    ", d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "is_authenticated", a.autoesc) || (i += '\n                        title="', i += d.suppressValue(d.contextOrFrameLookup(b, c, "title_text"), a.autoesc), i += '"\n                    '), i += ">\n            ") : (i += '\n                <div class="', i += d.suppressValue(d.contextOrFrameLookup(b, c, "class_name"), a.autoesc), i += '"\n                    data-element-type="', i += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "PIN_SOURCE_IMAGE", a.autoesc), a.autoesc), i += '"\n                    ', d.contextOrFrameLookup(b, c, "solid_background_color") && (i += '\n                        style="background: ', i += d.suppressValue(d.contextOrFrameLookup(b, c, "solid_background_color"), a.autoesc), i += ';"\n                    '), i += ">\n            "), i += "\n                ", d.contextOrFrameLookup(b, c, "seo_description") ? (i += "\n                    <h4 class='pinCanonicalDescription'>", i += d.suppressValue(d.contextOrFrameLookup(b, c, "seo_description"), a.autoesc), i += "</h4>\n                ") : d.contextOrFrameLookup(b, c, "domain") && (i += "\n                    <div class='pinDomain'>", i += d.suppressValue(d.contextOrFrameLookup(b, c, "domain"), a.autoesc), i += "</div>\n                "), i += '\n                <div class="fadeContainer">\n                    ', i += d.contextOrFrameLookup(b, c, "show_pin_nav_onhover") && d.contextOrFrameLookup(b, c, "has_pin_nav_transparent") ? '\n                        <div class="pinImageDim">\n                            <div class="dimOverlay"></div>\n                            <div class="dimGradient"></div>\n                        </div>\n                    ' : '\n                        <div class="hoverMask"></div>\n                    ', i += "\n                    ";
                    var cb;
                    g = 465, h = 40, cb = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["embed", {}
                    ]), c.set("embed", cb, !0), c.parent || (b.setVariable("embed", cb), b.addExport("embed")), i += "\n                    ";
                    var db;
                    db = d.contextOrFrameLookup(b, c, "attribution") ? (g = 466, h = 60, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "attribution"), "get", a.autoesc), 'attribution["get"]', ["embed", {}
                    ])) : {}, c.set("attribution_embed", db, !0), c.parent || (b.setVariable("attribution_embed", db), b.addExport("attribution_embed")), i += "\n                    ", (d.contextOrFrameLookup(b, c, "embed") && (g = 467, h = 43, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "embed"), "get", a.autoesc), 'embed["get"]', ["src"])) || (g = 467, h = 75, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "attribution_embed"), "get", a.autoesc), 'attribution_embed["get"]', ["src"]))) && (i += "\n                        ", i += d.suppressValue((g = 468, h = 44, d.callWrap(d.contextOrFrameLookup(b, c, "play_indicator_pill"), "play_indicator_pill", [d.contextOrFrameLookup(b, c, "embed")])), a.autoesc), i += "\n                    "), i += "\n                    ";
                    var eb;
                    eb = "pinImg", c.set("class_name", eb, !0), c.parent || (b.setVariable("class_name", eb), b.addExport("class_name")), i += "\n                    ";
                    var fb;
                    g = 471, h = 42, fb = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "image"), "get", a.autoesc), 'image["get"]', ["width"]), c.set("width", fb, !0), c.parent || (b.setVariable("width", fb), b.addExport("width")), i += "\n                    ";
                    var gb;
                    if (gb = 236 == (g = 472, h = 47, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "image"), "get", a.autoesc), 'image["get"]', ["width"])), c.set("full_bleed", gb, !0), c.parent || (b.setVariable("full_bleed", gb), b.addExport("full_bleed")), i += "\n                    ", d.contextOrFrameLookup(b, c, "full_bleed")) {
                        i += "\n                        ";
                        var hb;
                        hb = d.contextOrFrameLookup(b, c, "class_name") + " fullBleed", c.set("class_name", hb, !0), c.parent || (b.setVariable("class_name", hb), b.addExport("class_name")), i += "\n                    "
                    }
                    i += "\n\n                    ";
                    var ib;
                    if (ib=!0, c.set("add_class_on_load", ib, !0), c.parent || (b.setVariable("add_class_on_load", ib), b.addExport("add_class_on_load")), i += "\n                    ", d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "pin_no_fade", a.autoesc)) {
                        i += "\n                        ";
                        var jb;
                        g = 479, h = 42, jb = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "update", a.autoesc), 'options["update"]', [{
                            no_fade: !0
                        }
                        ]), c.set("_temp_do", jb, !0), c.parent || b.setVariable("_temp_do", jb), i += "\n                        ";
                        var kb;
                        kb=!1, c.set("add_class_on_load", kb, !0), c.parent || (b.setVariable("add_class_on_load", kb), b.addExport("add_class_on_load")), i += "\n                    "
                    }
                    if (i += "\n\n                    ", g = 483, h = 35, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["no_fade"])) {
                        i += "\n                        ";
                        var lb;
                        lb = d.contextOrFrameLookup(b, c, "class_name") + " noFade", c.set("class_name", lb, !0), c.parent || (b.setVariable("class_name", lb), b.addExport("class_name")), i += "\n                    "
                    }
                    if (i += "\n\n                    ", d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "is_retina", a.autoesc)) {
                        i += "\n                        ";
                        var mb;
                        g = 488, h = 47, mb = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "images"), "get", a.autoesc), 'images["get"]', ["474x"]), c.set("image", mb, !0), c.parent || (b.setVariable("image", mb), b.addExport("image")), i += "\n                    "
                    }
                    i += "\n                    ", i += d.suppressValue((g = 490, h = 30, d.callWrap(d.contextOrFrameLookup(b, c, "image_tag"), "image_tag", [d.makeKeywordArgs({
                        src: (g = 491, h = 41, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "image"), "get", a.autoesc), 'image["get"]', ["url"])),
                        class_name: d.contextOrFrameLookup(b, c, "class_name"),
                        width: d.contextOrFrameLookup(b, c, "width"),
                        height: d.contextOrFrameLookup(b, c, "height"),
                        add_class_on_load: d.contextOrFrameLookup(b, c, "add_class_on_load"),
                        alt: d.contextOrFrameLookup(b, c, "alt_text")
                    })])), a.autoesc), i += "\n                </div>\n            ", i += d.contextOrFrameLookup(b, c, "use_link") ? "\n                </a>\n            " : "\n                </div>\n            ", i += "\n        </div>\n    </div>\n\n    ";
                    var nb;
                    nb = (d.contextOrFrameLookup(b, c, "repin_count") || d.contextOrFrameLookup(b, c, "like_count") || d.contextOrFrameLookup(b, c, "comment_count")) && d.contextOrFrameLookup(b, c, "show_social_counts"), c.set("social_meta", nb, !0), c.parent || (b.setVariable("social_meta", nb), b.addExport("social_meta")), i += "\n    ";
                    var ob;
                    ob = (d.contextOrFrameLookup(b, c, "description_html") || d.contextOrFrameLookup(b, c, "social_meta") || d.contextOrFrameLookup(b, c, "attribution") || d.contextOrFrameLookup(b, c, "show_view_on_map_button")) && d.contextOrFrameLookup(b, c, "show_meta_section"), c.set("show_pin_meta", ob, !0), c.parent || (b.setVariable("show_pin_meta", ob), b.addExport("show_pin_meta")), i += "\n    ";
                    var pb;
                    pb=!0, c.set("has_pin_meta", pb, !0), c.parent || (b.setVariable("has_pin_meta", pb), b.addExport("has_pin_meta")), i += "\n    ";
                    var qb;
                    qb=!1, c.set("use_only_rich_title", qb, !0), c.parent || (b.setVariable("use_only_rich_title", qb), b.addExport("use_only_rich_title")), i += "\n    ";
                    var rb;
                    if (rb = a.getFilter("lower").call(b, a.getFilter("trim").call(b, d.contextOrFrameLookup(b, c, "rich_title"))) == a.getFilter("lower").call(b, a.getFilter("trim").call(b, d.contextOrFrameLookup(b, c, "description"))), c.set("description_equals_title", rb, !0), c.parent || (b.setVariable("description_equals_title", rb), b.addExport("description_equals_title")), i += "\n    ", d.contextOrFrameLookup(b, c, "description_equals_title")) {
                        i += "\n        ";
                        var sb;
                        sb=!0, c.set("use_only_rich_title", sb, !0), c.parent || (b.setVariable("use_only_rich_title", sb), b.addExport("use_only_rich_title")), i += "\n    "
                    }
                    if (i += "\n    ", !d.contextOrFrameLookup(b, c, "social_meta") && d.contextOrFrameLookup(b, c, "use_only_rich_title")) {
                        i += "\n        ";
                        var tb;
                        tb=!1, c.set("has_pin_meta", tb, !0), c.parent || (b.setVariable("has_pin_meta", tb), b.addExport("has_pin_meta")), i += "\n    "
                    }
                    if (i += "\n    ", d.contextOrFrameLookup(b, c, "show_pin_meta")) {
                        i += "\n        ";
                        var ub;
                        if (ub = d.contextOrFrameLookup(b, c, "rich_title") && d.contextOrFrameLookup(b, c, "rich_site_name"), c.set("show_rich_header", ub, !0), c.parent || (b.setVariable("show_rich_header", ub), b.addExport("show_rich_header")), i += "\n\n        ", d.contextOrFrameLookup(b, c, "place")) {
                            i += "\n            ";
                            var vb;
                            g = 524, h = 37, vb = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "place"), "get", a.autoesc), 'place["get"]', ["latitude"]), c.set("latitude", vb, !0), c.parent || (b.setVariable("latitude", vb), b.addExport("latitude")), i += "\n            ";
                            var wb;
                            g = 525, h = 38, wb = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "place"), "get", a.autoesc), 'place["get"]', ["longitude"]), c.set("longitude", wb, !0), c.parent || (b.setVariable("longitude", wb), b.addExport("longitude")), i += "\n        "
                        }
                        i += "\n\n        ";
                        var xb;
                        if (xb = d.contextOrFrameLookup(b, c, "latitude") && d.contextOrFrameLookup(b, c, "longitude"), c.set("has_geo", xb, !0), c.parent || (b.setVariable("has_geo", xb), b.addExport("has_geo")), i += "\n\n        ", d.contextOrFrameLookup(b, c, "show_rich_header") || d.contextOrFrameLookup(b, c, "show_view_on_map_button") && (d.contextOrFrameLookup(b, c, "has_geo") || d.contextOrFrameLookup(b, c, "can_write"))) {
                            if (i += '\n            <div class="richPinMeta\n                        ', d.contextOrFrameLookup(b, c, "has_pin_meta") || (i += "noPinMeta"), i += "\n                        ", d.contextOrFrameLookup(b, c, "show_view_on_map_button") && (d.contextOrFrameLookup(b, c, "can_write") || d.contextOrFrameLookup(b, c, "has_geo")) && (i += "hasMapButton"), i += '">\n\n                ', d.contextOrFrameLookup(b, c, "show_rich_header")) {
                                i += "\n                    ";
                                var yb;
                                yb=!(d.contextOrFrameLookup(b, c, "show_view_on_map_button") && d.contextOrFrameLookup(b, c, "has_geo")), c.set("should_use_anchor", yb, !0), c.parent || (b.setVariable("should_use_anchor", yb), b.addExport("should_use_anchor")), i += "\n                    ", d.contextOrFrameLookup(b, c, "should_use_anchor") ? (i += '\n                        <a href="', i += d.suppressValue(d.contextOrFrameLookup(b, c, "pin_url"), a.autoesc), i += '"\n                            class="richPinMetaLink">\n                    ') : i += '\n                        <div class="richPinMetaLink">\n                    ', i += "\n                        ", d.contextOrFrameLookup(b, c, "rich_favicon_link") && (i += '\n                            <img class="richPinIcon"\n                                src="', i += d.suppressValue(d.contextOrFrameLookup(b, c, "rich_favicon_link"), a.autoesc), i += '"\n                                alt="', i += d.suppressValue(d.contextOrFrameLookup(b, c, "rich_site_name"), a.autoesc), i += '">\n                        '), i += '\n                        <span class="richPinGridAttributionTitle">\n                            ';
                                var zb = d.makeMacro([], [], function(e) {
                                    c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                                    var f, i = "";
                                    return f = {
                                        rich_site_name: d.contextOrFrameLookup(b, c, "rich_site_name")
                                    }, c.set("__dict", f, !0), c.parent || b.setVariable("__dict", f), i += d.suppressValue((g = 549, h = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(g = 549, h = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["from {{ rich_site_name }}"])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                                });
                                b.setVariable("_doTranslation", zb), i += d.suppressValue((g = 549, h = 29, d.callWrap(zb, "_doTranslation", [])), a.autoesc), i += '\n                        </span>\n                        <h3 class="richPinGridTitle">', i += d.suppressValue(a.getFilter("smart_truncate").call(b, d.contextOrFrameLookup(b, c, "rich_title")), a.autoesc), i += "</h3>\n                    ", i += d.contextOrFrameLookup(b, c, "should_use_anchor") ? "\n                        </a>\n                    " : "\n                        </div>\n                    ", i += "\n                "
                            } else 
                                d.contextOrFrameLookup(b, c, "show_view_on_map_button")&&!d.contextOrFrameLookup(b, c, "has_geo") && (i += "\n                    ", i += d.suppressValue((g = 560, h = 27, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["ShowModalButton", d.makeKeywordArgs({
                                    id: "addToMap",
                                    options: {
                                        class_name: "addToMap addToMapContainer",
                                        text: (g = 564, h = 37, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Add a place"])),
                                        show_modal_options: {
                                            presentation_type: d.memberLookup(d.contextOrFrameLookup(b, c, "ModalPresentationTypes"), "PANEL", a.autoesc)
                                        },
                                        submodule: {
                                            name: "AddPinToMap",
                                            options: {
                                                board_id: (g = 571, h = 57, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["id"])),
                                                pin_id: d.contextOrFrameLookup(b, c, "pin_id"),
                                                pin_image: d.contextOrFrameLookup(b, c, "image")
                                            },
                                            resource: {
                                                name: "PinResource",
                                                options: {
                                                    id: d.contextOrFrameLookup(b, c, "pin_id"),
                                                    field_set_key: "add_to_map_modal"
                                                }
                                            }
                                        }
                                    }
                                })])), a.autoesc), i += "\n                ");
                            i += "\n                ", d.contextOrFrameLookup(b, c, "show_view_on_map_button") && d.contextOrFrameLookup(b, c, "has_geo") && (i += "\n                    ", i += d.suppressValue((g = 587, h = 27, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                                id: "seeOnMap",
                                options: {
                                    text: d.contextOrFrameLookup(b, c, "marker_text"),
                                    borderless: !0,
                                    has_icon: !0,
                                    show_text: !1,
                                    text: (g = 594, h = 37, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["See on map"])),
                                    class_name: "showOnMap pinMarker"
                                }
                            })])), a.autoesc), i += "\n                "), i += "\n            </div>\n        "
                        }
                        i += "\n\n        ";
                        var Ab;
                        Ab=!d.contextOrFrameLookup(b, c, "has_pin_meta"), c.set("hide_pin_meta", Ab, !0), c.parent || (b.setVariable("hide_pin_meta", Ab), b.addExport("hide_pin_meta")), i += '\n\n        <div class="pinMeta ', d.contextOrFrameLookup(b, c, "hide_pin_meta") && (i += "hidden"), i += '">\n            ', d.contextOrFrameLookup(b, c, "description_html")&&!d.contextOrFrameLookup(b, c, "use_only_rich_title") ? (i += "\n                ", i += '\n                <p class="pinDescription"', g = 613, h = 56, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["editable_description"]) && (i += '\n                    contenteditable="true"'), i += ">", i += d.suppressValue(d.contextOrFrameLookup(b, c, "description_html"), a.autoesc), i += "\n                ", d.contextOrFrameLookup(b, c, "show_vase_v2") && (i += "\n                    ", i += d.suppressValue((g = 616, h = 27, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                            id: "vaseButton",
                            options: {
                                borderless: !0,
                                class_name: "vaseButton",
                                text: (g = 621, h = 37, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["More"]))
                            }
                        })])), a.autoesc), i += '</p>\n                    <h4 class="vaseText hidden">', i += d.suppressValue(d.contextOrFrameLookup(b, c, "visual_text"), a.autoesc), i += "</h4>\n                "), i += "\n            ") : d.contextOrFrameLookup(b, c, "show_vase_v2") && (i += '\n                <h4 class="vaseText">', i += d.suppressValue(d.contextOrFrameLookup(b, c, "visual_text"), a.autoesc), i += "</h4>\n            "), i += "\n\n            ", i += d.suppressValue((g = 630, h = 25, d.callWrap(d.contextOrFrameLookup(b, c, "search_debug"), "search_debug", [d.makeKeywordArgs({
                            data: d.contextOrFrameLookup(b, c, "pin")
                        })])), a.autoesc), i += "\n            ", d.contextOrFrameLookup(b, c, "attribution") && (i += "\n                ", d.contextOrFrameLookup(b, c, "rich_title") || (i += "\n                    ", i += d.suppressValue((g = 633, h = 36, d.callWrap(d.contextOrFrameLookup(b, c, "pin_attribution"), "pin_attribution", [d.contextOrFrameLookup(b, c, "attribution"), d.makeKeywordArgs({
                            view_type: d.contextOrFrameLookup(b, c, "view_type")
                        })])), a.autoesc), i += "\n                "), i += "\n            "), i += "\n\n            ", d.contextOrFrameLookup(b, c, "social_meta") && (i += '\n                <div class="pinSocialMeta">\n                    ', i += d.suppressValue((g = 639, h = 49, d.callWrap(d.contextOrFrameLookup(b, c, "social_meta_icons_and_counts"), "social_meta_icons_and_counts", [d.makeKeywordArgs({
                            repin_count: d.contextOrFrameLookup(b, c, "repin_count"),
                            like_count: d.contextOrFrameLookup(b, c, "like_count"),
                            comment_count: d.contextOrFrameLookup(b, c, "comment_count"),
                            pin_url: d.contextOrFrameLookup(b, c, "pin_url")
                        })])), a.autoesc), i += "\n                </div>\n            "), i += "\n        </div>\n    "
                    }
                    i += "\n\n    ", g = 647, h = 23, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["hide_pin_credits"]) || (i += "\n        ", i += d.suppressValue(j, a.autoesc), i += "\n    "), i += "\n\n    ", d.contextOrFrameLookup(b, c, "show_comments") && d.contextOrFrameLookup(b, c, "comment_count")&&!d.contextOrFrameLookup(b, c, "promoter") && (i += "\n        ", i += d.suppressValue((g = 652, h = 15, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["PinCommentList", d.makeKeywordArgs({
                        id: "commentList",
                        data: d.contextOrFrameLookup(b, c, "comments_data"),
                        options: {
                            field_set_key: "pin_grid_item",
                            pin_id: d.contextOrFrameLookup(b, c, "pin_id"),
                            count: d.contextOrFrameLookup(b, c, "comment_count"),
                            type: "grid",
                            max_num_to_show: 5,
                            view_type: "summary"
                        }
                    })])), a.autoesc), i += "\n    "), i += "\n", f(null, i)
                })
            } catch (j) {
                f(d.handleError(j, g, h))
            }
        }
        function f(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n    ";
                var i;
                i = a.getFilter("humanize_timesince").call(b, a.getFilter("parse_date").call(b, (f = 668, g = 29, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["created_at"])))), c.set("time_since", i, !0), c.parent || (b.setVariable("time_since", i), b.addExport("time_since")), h += "\n    ";
                var j;
                j = a.getFilter("is_just_now").call(b, a.getFilter("parse_date").call(b, (f = 669, g = 30, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["created_at"])))), c.set("is_just_now", j, !0), c.parent || (b.setVariable("is_just_now", j), b.addExport("is_just_now")), h += "\n\n    ", h += "\n    ", h += d.suppressValue((f = 673, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "include_data"), "include_data", [!0])), a.autoesc), h += "\n    ", h += d.suppressValue((f = 674, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", [d.contextOrFrameLookup(b, c, "view_type")])), a.autoesc), h += "\n\n    ";
                var k;
                if (k=!0, c.set("show_follow_button", k, !0), c.parent || (b.setVariable("show_follow_button", k), b.addExport("show_follow_button")), h += '\n\n    <div class="closeupContentSection">\n        <div class="pinImageSourceWrapper"\n                data-element-type="', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "PIN_SOURCE_IMAGE", a.autoesc), a.autoesc), h += '">\n            ', h += d.suppressValue((f = 681, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["PaddedPin", d.makeKeywordArgs({
                    data: d.contextOrFrameLookup(b, c, "pin"),
                    resource: (f = 683, g = 40, d.callWrap(d.contextOrFrameLookup(b, c, "create_resource"), "create_resource", ["PinResource", d.makeKeywordArgs({
                        options: {
                            id: d.contextOrFrameLookup(b, c, "pin_id")
                        }
                    })])),
                    options: {
                        image_size: "LARGE",
                        fixed_width: 736
                    }
                })])), a.autoesc), h += "\n\n            ", !d.contextOrFrameLookup(b, c, "canonical_pin_data")) {
                    if (h += '\n                <div class="sourceFlagWrapper">\n                    ', d.contextOrFrameLookup(b, c, "domain")) {
                        h += '\n                        <a href="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "pin_link"), a.autoesc), h += '" rel="nofollow"\n                                data-element-type="', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "PIN_ATTRIBUTION", a.autoesc), a.autoesc), h += '">\n                            ';
                        var l = d.makeMacro([], [], function(e) {
                            c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                            var h, i = "";
                            return h = {
                                domain: d.contextOrFrameLookup(b, c, "domain")
                            }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 699, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 699, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Found on {{ domain }}"])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                        });
                        b.setVariable("_doTranslation", l), h += d.suppressValue((f = 699, g = 29, d.callWrap(l, "_doTranslation", [])), a.autoesc), h += "\n                        </a>\n                    "
                    } else {
                        if (h += "\n                        ", d.contextOrFrameLookup(b, c, "is_repin") && d.contextOrFrameLookup(b, c, "via_pinner")) {
                            h += "\n                            <p>\n                                ";
                            var m;
                            f = 706, g = 69, m = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "via_pinner"), "get", a.autoesc), 'via_pinner["get"]', ["full_name"]), c.set("via_pinner_name", m, !0), c.parent || (b.setVariable("via_pinner_name", m), b.addExport("via_pinner_name")), h += "\n                                ";
                            var n;
                            f = 707, g = 73, n = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "via_pinner"), "get", a.autoesc), 'via_pinner["get"]', ["username"]), c.set("via_pinner_username", n, !0), c.parent || (b.setVariable("via_pinner_username", n), b.addExport("via_pinner_username")), h += "\n\n                                ";
                            var o = d.makeMacro([], [], function(e) {
                                c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                                var h, i = "";
                                return h = {
                                    username_link: (f = 709, g = 64, d.callWrap(d.contextOrFrameLookup(b, c, "link_markup"), "link_markup", ["/" + d.contextOrFrameLookup(b, c, "via_pinner_username") + "/", d.contextOrFrameLookup(b, c, "via_pinner_name")]))
                                }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 709, g = 33, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 709, g = 33, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Via {{ username_link }}"])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                            });
                            b.setVariable("_doTranslation", o), h += d.suppressValue((f = 709, g = 33, d.callWrap(o, "_doTranslation", [])), a.autoesc), h += "\n                            </p>\n                        "
                        } else {
                            if (h += "\n                            ", "uploaded" != (f = 714, g = 39, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["method"]))) {
                                h += "\n                                <p>\n                                    ";
                                var p;
                                f = 716, g = 65, p = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pinner"), "get", a.autoesc), 'pinner["get"]', ["full_name"]), c.set("pinner_name", p, !0), c.parent || (b.setVariable("pinner_name", p), b.addExport("pinner_name")), h += "\n                                    ";
                                var q;
                                f = 717, g = 69, q = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pinner"), "get", a.autoesc), 'pinner["get"]', ["username"]), c.set("pinner_username", q, !0), c.parent || (b.setVariable("pinner_username", q), b.addExport("pinner_username")), h += "\n                                    ";
                                var r = d.makeMacro([], [], function(e) {
                                    c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                                    var h, i = "";
                                    return h = {
                                        username_link: (f = 718, g = 68, d.callWrap(d.contextOrFrameLookup(b, c, "link_markup"), "link_markup", ["/" + d.contextOrFrameLookup(b, c, "pinner_username") + "/", d.contextOrFrameLookup(b, c, "pinner_name")]))
                                    }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 718, g = 37, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 718, g = 37, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Pinned by {{ username_link }}"])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                                });
                                b.setVariable("_doTranslation", r), h += d.suppressValue((f = 718, g = 37, d.callWrap(r, "_doTranslation", [])), a.autoesc), h += "\n                                </p>\n                            "
                            } else 
                                h += "\n                                <p>", h += d.suppressValue((f = 723, g = 37, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Uploaded to Pinterest"])), a.autoesc), h += "</p>\n                            ";
                            h += "\n                        "
                        }
                        h += "\n                    "
                    }
                    h += "\n\n                    ", d.contextOrFrameLookup(b, c, "user")&&!d.contextOrFrameLookup(b, c, "can_edit") && (h += "\n                        ", h += d.suppressValue((f = 729, g = 31, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["ShowModalButton", d.makeKeywordArgs({
                        options: {
                            ga_category: "pin_flag",
                            has_icon: !0,
                            class_name: "pinFlag",
                            borderless: !0,
                            log_element_type: d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "PIN_FLAG_BUTTON", a.autoesc),
                            submodule: {
                                name: "FlagPin",
                                options: {
                                    pin_id: d.contextOrFrameLookup(b, c, "pin_id"),
                                    board_id: (f = 740, g = 61, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["id"]))
                                }
                            }
                        }
                    })])), a.autoesc), h += "\n                    "), h += "\n                </div>\n            "
                }
                if (h += "\n\n            ", h += d.suppressValue((f = 749, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["CloseupRichPinContent", d.makeKeywordArgs({
                    data: d.contextOrFrameLookup(b, c, "data"),
                    resource: (f = 751, g = 40, d.callWrap(d.contextOrFrameLookup(b, c, "create_resource"), "create_resource", ["PinResource", d.makeKeywordArgs({
                        options: {
                            id: d.contextOrFrameLookup(b, c, "pin_id"),
                            field_set_key: "detailed"
                        }
                    })]))
                })])), a.autoesc), h += "\n        </div>\n        ", d.contextOrFrameLookup(b, c, "canonical_pin_data")) {
                    if (h += '\n            <div class="pinDescSourceCountsWrapper">\n                ', d.contextOrFrameLookup(b, c, "user")&&!d.contextOrFrameLookup(b, c, "can_edit") && (h += "\n                    ", h += d.suppressValue((f = 762, g = 27, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["ShowModalButton", d.makeKeywordArgs({
                        options: {
                            ga_category: "pin_flag",
                            has_icon: !0,
                            class_name: "pinFlag2",
                            borderless: !0,
                            log_element_type: d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "PIN_FLAG_BUTTON", a.autoesc),
                            show_text: !1,
                            text: (f = 770, g = 37, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Report Pin"])),
                            submodule: {
                                name: "FlagPin",
                                options: {
                                    pin_id: d.contextOrFrameLookup(b, c, "pin_id"),
                                    board_id: (f = 775, g = 57, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "get", a.autoesc), 'board["get"]', ["id"]))
                                }
                            }
                        }
                    })])), a.autoesc), h += "\n                "), h += "\n\n                ", d.contextOrFrameLookup(b, c, "description_html") && (h += '\n                    <div class="pinDesc canonicalDesc">\n                        ', h += d.suppressValue(d.contextOrFrameLookup(b, c, "description_html"), a.autoesc), h += "\n                    </div>\n                    ", d.contextOrFrameLookup(b, c, "show_translate_button") && (h += "\n                        ", h += d.suppressValue((f = 787, g = 31, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                        id: "translateButton",
                        options: {
                            class_name: "translateButton hidden",
                            text: (f = 791, g = 37, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["See translation"]))
                        }
                    })])), a.autoesc), h += "\n                    "), h += "\n                "), h += '\n\n                <p class="source">\n                    ', d.contextOrFrameLookup(b, c, "domain")) {
                        h += "\n                        ";
                        var s;
                        if (s = d.contextOrFrameLookup(b, c, "pin_link"), c.set("domain_url", s, !0), c.parent || (b.setVariable("domain_url", s), b.addExport("domain_url")), h += "\n                        ", d.contextOrFrameLookup(b, c, "is_just_now")) {
                            h += "\n                            ";
                            var t = d.makeMacro([], [], function(e) {
                                c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                                var h, i = "";
                                return h = {
                                    domain_link: (f = 801, g = 58, d.callWrap(d.contextOrFrameLookup(b, c, "link_markup"), "link_markup", [d.contextOrFrameLookup(b, c, "domain_url"), d.contextOrFrameLookup(b, c, "domain"), d.makeKeywordArgs({
                                        no_follow: !0,
                                        element_type: d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "PIN_ATTRIBUTION", a.autoesc)
                                    })]))
                                }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 801, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 801, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Added just now from {{ domain_link }}"])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                            });
                            b.setVariable("_doTranslation", t), h += d.suppressValue((f = 801, g = 29, d.callWrap(t, "_doTranslation", [])), a.autoesc), h += "\n                        "
                        } else {
                            h += "\n                            ";
                            var u = d.makeMacro([], [], function(e) {
                                c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                                var h, i = "";
                                return h = {
                                    domain_link: (f = 807, g = 58, d.callWrap(d.contextOrFrameLookup(b, c, "link_markup"), "link_markup", [d.contextOrFrameLookup(b, c, "domain_url"), d.contextOrFrameLookup(b, c, "domain"), d.makeKeywordArgs({
                                        no_follow: !0,
                                        element_type: d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "PIN_ATTRIBUTION", a.autoesc)
                                    })])),
                                    time_since: d.contextOrFrameLookup(b, c, "time_since")
                                }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 807, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 807, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Added {{ time_since }} from {{ domain_link }}"])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                            });
                            b.setVariable("_doTranslation", u), h += d.suppressValue((f = 807, g = 29, d.callWrap(u, "_doTranslation", [])), a.autoesc), h += "\n                        "
                        }
                        h += "\n                    "
                    } else if ("uploaded" != (f = 813, g = 33, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["method"]))) {
                        if (h += "\n                        ", d.contextOrFrameLookup(b, c, "is_just_now")) {
                            h += "\n                            ";
                            var v = d.makeMacro([], [], function(e) {
                                c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                                var h, i = "";
                                return h = {}, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 815, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 815, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Added just now"])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                            });
                            b.setVariable("_doTranslation", v), h += d.suppressValue((f = 815, g = 29, d.callWrap(v, "_doTranslation", [])), a.autoesc), h += "\n                        "
                        } else {
                            h += "\n                            ";
                            var w = d.makeMacro([], [], function(e) {
                                c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                                var h, i = "";
                                return h = {
                                    time_since: d.contextOrFrameLookup(b, c, "time_since")
                                }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 819, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 819, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Added {{ time_since }}"])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                            });
                            b.setVariable("_doTranslation", w), h += d.suppressValue((f = 819, g = 29, d.callWrap(w, "_doTranslation", [])), a.autoesc), h += "\n                        "
                        }
                        h += "\n                    "
                    } else {
                        if (h += "\n                        ", d.contextOrFrameLookup(b, c, "is_just_now")) {
                            h += "\n                            ";
                            var x = d.makeMacro([], [], function(e) {
                                c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                                var h, i = "";
                                return h = {}, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 825, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 825, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Uploaded just now"])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                            });
                            b.setVariable("_doTranslation", x), h += d.suppressValue((f = 825, g = 29, d.callWrap(x, "_doTranslation", [])), a.autoesc), h += "\n                        "
                        } else {
                            h += "\n                            ";
                            var y = d.makeMacro([], [], function(e) {
                                c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                                var h, i = "";
                                return h = {
                                    time_since: d.contextOrFrameLookup(b, c, "time_since")
                                }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 829, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 829, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Uploaded {{ time_since }}"])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                            });
                            b.setVariable("_doTranslation", y), h += d.suppressValue((f = 829, g = 29, d.callWrap(y, "_doTranslation", [])), a.autoesc), h += "\n                        "
                        }
                        h += "\n                    "
                    }
                    h += "\n                </p>\n\n                ", h += d.suppressValue((f = 836, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["PinCounts", d.makeKeywordArgs({
                        data: d.contextOrFrameLookup(b, c, "data"),
                        options: {
                            pin_id: d.contextOrFrameLookup(b, c, "pin_id")
                        },
                        resource: (f = 841, g = 44, d.callWrap(d.contextOrFrameLookup(b, c, "create_resource"), "create_resource", ["PinResource", d.makeKeywordArgs({
                            options: {
                                id: d.contextOrFrameLookup(b, c, "pin_id"),
                                field_set_key: "summary"
                            }
                        })]))
                    })])), a.autoesc), h += '\n            </div>\n            <div class="pinnerViaPinnerCredit">\n                ', h += d.suppressValue((f = 850, g = 42, d.callWrap(d.contextOrFrameLookup(b, c, "detailed_view_pin_credits"), "detailed_view_pin_credits", [d.contextOrFrameLookup(b, c, "pinner"), d.contextOrFrameLookup(b, c, "board"), d.contextOrFrameLookup(b, c, "via_pinner"), d.contextOrFrameLookup(b, c, "is_repin"), d.contextOrFrameLookup(b, c, "show_follow_button")])), a.autoesc), h += "\n            </div>\n        "
                }
                if (h += "\n    </div>\n\n    ", d.contextOrFrameLookup(b, c, "canonical_pin_data"))
                    h += '\n        <div class="closeupContentSection pinComments">\n        ', d.contextOrFrameLookup(b, c, "show_comments") && (h += "\n            ", h += d.suppressValue((f = 883, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["PinCommentList", d.makeKeywordArgs({
                        id: "comment_list",
                        resource: (f = 885, g = 40, d.callWrap(d.contextOrFrameLookup(b, c, "create_resource"), "create_resource", ["PinCommentListResource", d.makeKeywordArgs({
                            options: {
                                pin_id: d.contextOrFrameLookup(b, c, "pin_id"),
                                field_set_key: "pin_detailed",
                                page_size: 50
                            }
                        })])),
                        options: {
                            pin_id: d.contextOrFrameLookup(b, c, "pin_id"),
                            count: d.contextOrFrameLookup(b, c, "comment_count"),
                            image_size: "medium",
                            show_actions: !0,
                            max_num_to_show: 50,
                            view_type: "detailed"
                        }
                    })])), a.autoesc), h += "\n        "), h += "\n        </div>\n    ";
                else {
                    h += '\n        <div class="closeupContentSection">\n            <div class="pinDescription ', d.contextOrFrameLookup(b, c, "comment_count") > 0 && (h += "commentListHeader"), h += '">\n                ', h += d.suppressValue((f = 858, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["PinDescriptionComment", d.makeKeywordArgs({
                        options: {
                            image_src: d.memberLookup(d.contextOrFrameLookup(b, c, "pinner"), "image_medium_url", a.autoesc),
                            username: d.memberLookup(d.contextOrFrameLookup(b, c, "pinner"), "username", a.autoesc),
                            full_name: d.memberLookup(d.contextOrFrameLookup(b, c, "pinner"), "full_name", a.autoesc),
                            content: d.contextOrFrameLookup(b, c, "description_html"),
                            subtitle: d.contextOrFrameLookup(b, c, "time_since"),
                            attribution: d.contextOrFrameLookup(b, c, "none"),
                            view_type: d.contextOrFrameLookup(b, c, "view_type"),
                            can_translate: d.contextOrFrameLookup(b, c, "show_translate_button"),
                            is_description: !0
                        }
                    })])), a.autoesc), h += "\n                ";
                    var z;
                    z=!0, c.set("show_actions", z, !0), c.parent || (b.setVariable("show_actions", z), b.addExport("show_actions")), h += "\n                ";
                    var A;
                    A = 5, c.set("max_num_to_show", A, !0), c.parent || (b.setVariable("max_num_to_show", A), b.addExport("max_num_to_show")), h += "\n                ", h += d.suppressValue((f = 873, g = 47, d.callWrap(d.contextOrFrameLookup(b, c, "detailed_view_pin_comment_list"), "detailed_view_pin_comment_list", [d.contextOrFrameLookup(b, c, "pin_id"), d.contextOrFrameLookup(b, c, "comment_count"), d.contextOrFrameLookup(b, c, "comments_data"), d.contextOrFrameLookup(b, c, "show_actions"), d.contextOrFrameLookup(b, c, "max_num_to_show")])), a.autoesc), h += '\n            </div>\n        </div>\n\n        <div class="closeupContentSection pinnerViaPinnerCredit">\n            ', h += d.suppressValue((f = 878, g = 38, d.callWrap(d.contextOrFrameLookup(b, c, "detailed_view_pin_credits"), "detailed_view_pin_credits", [d.contextOrFrameLookup(b, c, "pinner"), d.contextOrFrameLookup(b, c, "board"), d.contextOrFrameLookup(b, c, "via_pinner"), d.contextOrFrameLookup(b, c, "is_repin"), d.contextOrFrameLookup(b, c, "show_follow_button")])), a.autoesc), h += "\n        </div>\n    "
                }
                h += "\n\n", e(null, h)
            } catch (B) {
                e(d.handleError(B, f, g))
            }
        }
        return {
            b_additional_data: b,
            b_board_pins_grid_view: c,
            b_visual_object_grid_view: d,
            b_summary_view: e,
            b_detailed_view: f,
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/PinActionBar/PinActionBar.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n";
                var i;
                i = d.contextOrFrameLookup(b, c, "data"), c.set("pin", i, !0), c.parent || (b.setVariable("pin", i), b.addExport("pin")), h += "\n";
                var j;
                j = d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "id", a.autoesc), c.set("pin_id", j, !0), c.parent || (b.setVariable("pin_id", j), b.addExport("pin_id")), h += "\n";
                var k;
                k = d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "link", a.autoesc), c.set("link", k, !0), c.parent || (b.setVariable("link", k), b.addExport("link")), h += "\n";
                var l;
                f = 14, g = 21, l = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["images", {}
                ]), c.set("images", l, !0), c.parent || (b.setVariable("images", l), b.addExport("images")), h += "\n";
                var m;
                f = 15, g = 32, m = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "images"), "get", a.autoesc), 'images["get"]', ["236x", {}
                ]), c.set("grid_pin_image", m, !0), c.parent || (b.setVariable("grid_pin_image", m), b.addExport("grid_pin_image")), h += "\n";
                var n;
                n=!1, c.set("has_fullsize_image", n, !0), c.parent || (b.setVariable("has_fullsize_image", n), b.addExport("has_fullsize_image")), h += "\n";
                var o;
                o = d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "view_type", a.autoesc), c.set("view_type", o, !0), c.parent || (b.setVariable("view_type", o), b.addExport("view_type")), h += "\n\n";
                var p;
                f = 19, g = 37, p = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["unauth_pin_closeup"]), c.set("unauth_pin_closeup", p, !0), c.parent || (b.setVariable("unauth_pin_closeup", p), b.addExport("unauth_pin_closeup")), h += "\n";
                var q;
                f = 20, g = 50, q = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["unauth_pin_closeup_display_data"]), c.set("unauth_pin_closeup_display_data", q, !0), c.parent || (b.setVariable("unauth_pin_closeup_display_data", q), b.addExport("unauth_pin_closeup_display_data")), h += "\n\n", (d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "is_authenticated", a.autoesc) || (f = 22, g = 72, d.callWrap(d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "experiments", a.autoesc), "in_experiment_groups", a.autoesc), 'context["experiment"]["in_experim"]', ["guided_search_for_unauth", ["enabled", "employees"]]))) && (h += "\n    ", h += d.suppressValue((f = 24, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["guided"])), a.autoesc), h += "\n"), h += "\n\n";
                var r;
                f = 27, g = 64, r = d.callWrap(d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "experiences", a.autoesc), "is_placed_experience", a.autoesc), 'context["experience"]["is_placed_"]', ["WEB_PIN_CLOSEUP", "WEB_PIN_CLOSEUP_LITE"]), c.set("first_pin_create", r, !0), c.parent || (b.setVariable("first_pin_create", r), b.addExport("first_pin_create")), h += "\n";
                var s;
                f = 28, g = 67, s = d.callWrap(d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "experiences", a.autoesc), "is_placed_experience", a.autoesc), 'context["experience"]["is_placed_"]', ["WEB_PIN_CLOSEUP", "WEB_PIN_CLOSEUP_AUTOBAHN"]), c.set("autobahn_pin_create", s, !0), c.parent || (b.setVariable("autobahn_pin_create", s), b.addExport("autobahn_pin_create")), h += "\n";
                var t;
                f = 29, g = 70, t = d.callWrap(d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "experiences", a.autoesc), "is_placed_experience", a.autoesc), 'context["experience"]["is_placed_"]', ["WEB_PIN_SUCCESS", "WEB_FIRST_PIN_SUCCESS"]), c.set("show_first_pin_success", t, !0), c.parent || (b.setVariable("show_first_pin_success", t), b.addExport("show_first_pin_success")), h += "\n";
                var u;
                u=!1, c.set("show_pin_tip", u, !0), c.parent || (b.setVariable("show_pin_tip", u), b.addExport("show_pin_tip")), h += "\n";
                var v;
                v = d.contextOrFrameLookup(b, c, "first_pin_create") || d.contextOrFrameLookup(b, c, "autobahn_pin_create") || (f = 31, g = 94, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "unauth_pin_closeup_display_data"), "get", a.autoesc), 'unauth_pin_closeup_display_data["get"]', ["lite"])), c.set("pin_lite", v, !0), c.parent || (b.setVariable("pin_lite", v), b.addExport("pin_lite")), h += "\n";
                var w;
                f = 32, g = 33, w = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["canonical_pin"]), c.set("canonical_pin_data", w, !0), c.parent || (b.setVariable("canonical_pin_data", w), b.addExport("canonical_pin_data")), h += "\n";
                var x;
                f = 33, g = 25, x = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["access", []]), c.set("pin_access", x, !0), c.parent || (b.setVariable("pin_access", x), b.addExport("pin_access")), h += "\n\n";
                var y;
                if (y=!1, c.set("can_edit", y, !0), c.parent || (b.setVariable("can_edit", y), b.addExport("can_edit")), h += "\n", a.getFilter("contains").call(b, d.contextOrFrameLookup(b, c, "pin_access"), "write") || a.getFilter("contains").call(b, d.contextOrFrameLookup(b, c, "pin_access"), "delete")) {
                    h += "\n    ";
                    var z;
                    z=!0, c.set("can_edit", z, !0), c.parent || (b.setVariable("can_edit", z), b.addExport("can_edit")), h += "\n"
                }
                if (h += "\n\n", d.contextOrFrameLookup(b, c, "unauth_pin_closeup") || d.contextOrFrameLookup(b, c, "pin_lite") && (d.contextOrFrameLookup(b, c, "show_first_pin_success") || d.contextOrFrameLookup(b, c, "first_pin_create"))) {
                    h += "\n    ";
                    var A;
                    A=!0, c.set("show_pin_tip", A, !0), c.parent || (b.setVariable("show_pin_tip", A), b.addExport("show_pin_tip")), h += "\n"
                }
                if (h += "\n\n", d.contextOrFrameLookup(b, c, "pin_lite") && (h += "\n    ", h += d.suppressValue((f = 45, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["lite"])), a.autoesc), h += "\n"), h += "\n\n", h += d.suppressValue((f = 48, g = 11, d.callWrap(d.contextOrFrameLookup(b, c, "extra_data"), "extra_data", [{
                    lite: d.contextOrFrameLookup(b, c, "pin_lite"),
                    showPinTip: d.contextOrFrameLookup(b, c, "show_pin_tip"),
                    inUnauthPinCloseup: d.contextOrFrameLookup(b, c, "unauth_pin_closeup"),
                    unauthPinCloseupDisplayData: d.contextOrFrameLookup(b, c, "unauth_pin_closeup_display_data")
                }
                ])), a.autoesc), h += "\n\n", !d.contextOrFrameLookup(b, c, "link")) {
                    if (h += "\n    ", d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "images", a.autoesc) && d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "images", a.autoesc), "orig", a.autoesc)) {
                        h += "\n        ";
                        var B;
                        B = d.memberLookup(d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "images", a.autoesc), "orig", a.autoesc), "url", a.autoesc), c.set("link", B, !0), c.parent || (b.setVariable("link", B), b.addExport("link")), h += "\n    "
                    }
                    if (h += "\n    ", d.contextOrFrameLookup(b, c, "link")) {
                        h += "\n        ";
                        var C;
                        C=!0, c.set("has_fullsize_image", C, !0), c.parent || (b.setVariable("has_fullsize_image", C), b.addExport("has_fullsize_image")), h += "\n    "
                    }
                    h += "\n"
                }
                h += "\n";
                var D;
                D = d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "repin_count", a.autoesc), c.set("repin_count", D, !0), c.parent || (b.setVariable("repin_count", D), b.addExport("repin_count")), h += "\n";
                var E;
                E = d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "like_count", a.autoesc), c.set("like_count", E, !0), c.parent || (b.setVariable("like_count", E), b.addExport("like_count")), h += "\n\n";
                var F;
                F = "PinCreate", c.set("submodule_name", F, !0), c.parent || (b.setVariable("submodule_name", F), b.addExport("submodule_name")), h += "\n";
                var G;
                G = "repin", c.set("submodule_field_set_key", G, !0), c.parent || (b.setVariable("submodule_field_set_key", G), b.addExport("submodule_field_set_key")), h += "\n";
                var H;
                H = {}, c.set("extra_options", H, !0), c.parent || (b.setVariable("extra_options", H), b.addExport("extra_options")), h += "\n";
                var I;
                I = {}, c.set("submodule_options", I, !0), c.parent || (b.setVariable("submodule_options", I), b.addExport("submodule_options")), h += "\n";
                var J;
                if (J = {}, c.set("show_modal_options", J, !0), c.parent || (b.setVariable("show_modal_options", J), b.addExport("show_modal_options")), h += "\n", f = 70, g = 44, d.callWrap(d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "experiments", a.autoesc), "in_experiment_groups", a.autoesc), 'context["experiment"]["in_experim"]', ["web_pin_create", ["enabled_v3", "employees_v3"]])) {
                    h += "\n    ";
                    var K;
                    K = "PinCreate3", c.set("submodule_name", K, !0), c.parent || (b.setVariable("submodule_name", K), b.addExport("submodule_name")), h += "\n    ";
                    var L;
                    L = "repin", c.set("submodule_field_set_key", L, !0), c.parent || (b.setVariable("submodule_field_set_key", L), b.addExport("submodule_field_set_key")), h += "\n    ";
                    var M;
                    M=!1, c.set("transparent_modal", M, !0), c.parent || (b.setVariable("transparent_modal", M), b.addExport("transparent_modal")), h += "\n    ";
                    var N;
                    N = {
                        action: "repin",
                        render_existing_pin: !0,
                        pin_id: d.contextOrFrameLookup(b, c, "pin_id")
                    }, c.set("submodule_options", N, !0), c.parent || (b.setVariable("submodule_options", N), b.addExport("submodule_options")), h += "\n    ";
                    var O;
                    O = {
                        container_class: "webNewContentNewRepin",
                        custom_entrance_animation: !0,
                        custom_exit_animation: !0,
                        mask_type: "webNewContentNewRepin",
                        modal_style: "webNewContentNewRepin"
                    }, c.set("show_modal_options", O, !0), c.parent || (b.setVariable("show_modal_options", O), b.addExport("show_modal_options")), h += "\n"
                }
                h += '\n\n<div class="repinLike">\n    ';
                var P;
                P = " pinActionBarButton", c.set("pin_action_bar_button_classname", P, !0), c.parent || (b.setVariable("pin_action_bar_button_classname", P), b.addExport("pin_action_bar_button_classname")), h += "\n    ";
                var Q;
                Q = "medium", c.set("action_bar_button_size", Q, !0), c.parent || (b.setVariable("action_bar_button_size", Q), b.addExport("action_bar_button_size")), h += "\n    ";
                var R;
                R = "repinLikeNavigateButton ", c.set("baseIncrementButtonClass", R, !0), c.parent || (b.setVariable("baseIncrementButtonClass", R), b.addExport("baseIncrementButtonClass")), h += "\n    ";
                var S;
                S = d.contextOrFrameLookup(b, c, "baseIncrementButtonClass"), c.set("repinIncrementButtonClass", S, !0), c.parent || (b.setVariable("repinIncrementButtonClass", S), b.addExport("repinIncrementButtonClass")), h += "\n    ";
                var T;
                T = d.contextOrFrameLookup(b, c, "baseIncrementButtonClass"), c.set("likeIncrementButtonClass", T, !0), c.parent || (b.setVariable("likeIncrementButtonClass", T), b.addExport("likeIncrementButtonClass")), h += "\n\n    ";
                var U;
                if (U = "repin", c.set("repin_class_name", U, !0), c.parent || (b.setVariable("repin_class_name", U), b.addExport("repin_class_name")), h += "\n    ", d.contextOrFrameLookup(b, c, "repin_count")&&!d.contextOrFrameLookup(b, c, "canonical_pin_data")&&!d.contextOrFrameLookup(b, c, "pin_lite")) {
                    h += "\n        ";
                    var V;
                    V = d.contextOrFrameLookup(b, c, "repin_class_name") + " leftRounded", c.set("repin_class_name", V, !0), c.parent || (b.setVariable("repin_class_name", V), b.addExport("repin_class_name")), h += "\n    "
                }
                h += "\n\n    ";
                var W;
                W = "primary", c.set("repin_color", W, !0), c.parent || (b.setVariable("repin_color", W), b.addExport("repin_color")), h += "\n    ";
                var X;
                X=!0, c.set("repin_primary_on_hover", X, !0), c.parent || (b.setVariable("repin_primary_on_hover", X), b.addExport("repin_primary_on_hover")), h += "\n    ";
                var Y;
                Y=!1, c.set("repin_show_text", Y, !0), c.parent || (b.setVariable("repin_show_text", Y), b.addExport("repin_show_text")), h += "\n    ";
                var Z;
                if (f = 104, g = 23, Z = d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Pin it"]), c.set("repin_text", Z, !0), c.parent || (b.setVariable("repin_text", Z), b.addExport("repin_text")), h += "\n    ", "ja" == d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "language", a.autoesc)) {
                    h += "\n        ";
                    var $;
                    $=!0, c.set("repin_show_text", $, !0), c.parent || (b.setVariable("repin_show_text", $), b.addExport("repin_show_text")), h += "\n    "
                }
                h += "\n\n    ";
                var _;
                _ = d.contextOrFrameLookup(b, c, "repinIncrementButtonClass") + d.contextOrFrameLookup(b, c, "repin_class_name"), c.set("repinIncrementButtonClass", _, !0), c.parent || (b.setVariable("repinIncrementButtonClass", _), b.addExport("repinIncrementButtonClass")), h += "\n    ", h += "\n\n    ";
                var ab;
                ab = {
                    action: "repin",
                    is_video: (f = 114, g = 27, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["is_video"])),
                    transparent_modal: d.contextOrFrameLookup(b, c, "transparent_modal")
                }, c.set("default_options", ab, !0), c.parent || (b.setVariable("default_options", ab), b.addExport("default_options")), h += "\n    ";
                var bb;
                f = 117, g = 30, bb = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "default_options"), "update", a.autoesc), 'default_options["update"]', [d.contextOrFrameLookup(b, c, "submodule_options")]), c.set("_temp_do", bb, !0), c.parent || b.setVariable("_temp_do", bb), h += "\n    ";
                var cb;
                if (cb = d.contextOrFrameLookup(b, c, "default_options"), c.set("submodule_options", cb, !0), c.parent || (b.setVariable("submodule_options", cb), b.addExport("submodule_options")), h += "\n    ", h += d.suppressValue((f = 119, g = 11, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["ShowModalButton", d.makeKeywordArgs({
                    id: "pinItButton",
                    options: {
                        ga_category: "repin_create_closeup",
                        class_name: d.contextOrFrameLookup(b, c, "repin_class_name") + d.contextOrFrameLookup(b, c, "pin_action_bar_button_classname"),
                        color: d.contextOrFrameLookup(b, c, "repin_color"),
                        primary_on_hover: d.contextOrFrameLookup(b, c, "repin_primary_on_hover"),
                        has_icon: !0,
                        show_text: d.contextOrFrameLookup(b, c, "repin_show_text"),
                        text: d.contextOrFrameLookup(b, c, "repin_text"),
                        require_auth: !0,
                        require_auth_params: {
                            action: "pinit"
                        },
                        size: d.contextOrFrameLookup(b, c, "action_bar_button_size"),
                        log_element_type: d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "PIN_REPIN_BUTTON", a.autoesc),
                        extra_options: d.contextOrFrameLookup(b, c, "extra_options"),
                        show_modal_options: d.contextOrFrameLookup(b, c, "show_modal_options"),
                        submodule: {
                            name: d.contextOrFrameLookup(b, c, "submodule_name"),
                            resource: {
                                name: "PinResource",
                                options: {
                                    id: d.contextOrFrameLookup(b, c, "pin_id"),
                                    field_set_key: d.contextOrFrameLookup(b, c, "submodule_field_set_key")
                                }
                            },
                            options: d.contextOrFrameLookup(b, c, "default_options"),
                            error_strategy: d.memberLookup(d.contextOrFrameLookup(b, c, "ErrorStrategy"), "SHOW", a.autoesc)
                        }
                    }
                })])), a.autoesc), h += "\n\n    ", d.contextOrFrameLookup(b, c, "canonical_pin_data") || (h += "\n        ", h += d.suppressValue((f = 152, g = 15, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["IncrementingNavigateButton", d.makeKeywordArgs({
                    id: "repinsButton",
                    options: {
                        url: "/pin/" + d.contextOrFrameLookup(b, c, "pin_id") + "/repins/",
                        color: d.contextOrFrameLookup(b, c, "repin_color"),
                        actionCount: d.contextOrFrameLookup(b, c, "repin_count"),
                        class_name: "repinLikeNavigateButton" + d.contextOrFrameLookup(b, c, "pin_action_bar_button_classname"),
                        siblingButtonId: "pinItButton",
                        size: "medium",
                        text: d.contextOrFrameLookup(b, c, "repin_count"),
                        log_element_type: d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "REPINS_BUTTON", a.autoesc)
                    }
                })])), a.autoesc), h += "\n    "), h += "\n\n    ", d.contextOrFrameLookup(b, c, "like_count")&&!d.contextOrFrameLookup(b, c, "canonical_pin_data")) {
                    h += "\n        ";
                    var db;
                    db = "like leftRounded", c.set("like_class_name", db, !0), c.parent || (b.setVariable("like_class_name", db), b.addExport("like_class_name")), h += "\n    "
                } else {
                    h += "\n        ";
                    var eb;
                    eb = "like", c.set("like_class_name", eb, !0), c.parent || (b.setVariable("like_class_name", eb), b.addExport("like_class_name")), h += "\n    "
                }
                h += "\n    ";
                var fb;
                fb = d.contextOrFrameLookup(b, c, "likeIncrementButtonClass") + d.contextOrFrameLookup(b, c, "like_class_name"), c.set("likeIncrementButtonClass", fb, !0), c.parent || (b.setVariable("likeIncrementButtonClass", fb), b.addExport("likeIncrementButtonClass")), h += "\n    ", h += "\n    ";
                var gb;
                if (gb = d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "liked_by_me", a.autoesc), c.set("liked", gb, !0), c.parent || (b.setVariable("liked", gb), b.addExport("liked")), h += "\n    ", h += d.suppressValue((f = 176, g = 11, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["PinLikeButton", d.makeKeywordArgs({
                    id: "likeButton",
                    options: {
                        class_name: d.contextOrFrameLookup(b, c, "like_class_name") + d.contextOrFrameLookup(b, c, "pin_action_bar_button_classname"),
                        liked: d.contextOrFrameLookup(b, c, "liked"),
                        size: d.contextOrFrameLookup(b, c, "action_bar_button_size"),
                        has_icon: !d.contextOrFrameLookup(b, c, "liked"),
                        pin_id: d.contextOrFrameLookup(b, c, "pin_id")
                    }
                })])), a.autoesc), h += "\n\n    ", d.contextOrFrameLookup(b, c, "canonical_pin_data") || (h += "\n        ", h += d.suppressValue((f = 189, g = 15, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["IncrementingNavigateButton", d.makeKeywordArgs({
                    id: "likesButton",
                    options: {
                        siblingButtonId: "likeButton",
                        actionCount: d.contextOrFrameLookup(b, c, "like_count"),
                        url: "/pin/" + d.contextOrFrameLookup(b, c, "pin_id") + "/likes/",
                        class_name: d.contextOrFrameLookup(b, c, "likeIncrementButtonClass") + d.contextOrFrameLookup(b, c, "pin_action_bar_button_classname"),
                        text: d.contextOrFrameLookup(b, c, "like_count"),
                        size: "medium",
                        log_element_type: d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "LIKES_BUTTON", a.autoesc)
                    }
                })])), a.autoesc), h += "\n    "), h += "\n\n    ", d.contextOrFrameLookup(b, c, "link")) {
                    h += "\n        ";
                    var hb;
                    hb = "website", c.set("btn_class_name", hb, !0), c.parent || (b.setVariable("btn_class_name", hb), b.addExport("btn_class_name")), h += "\n        ";
                    var ib;
                    ib = d.contextOrFrameLookup(b, c, "has_fullsize_image") ? (f = 206, g = 25, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Image"])) : (f = 206, g = 63, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Visit Site"])), c.set("btn_text", ib, !0), c.parent || (b.setVariable("btn_text", ib), b.addExport("btn_text")), h += "\n        ";
                    var jb;
                    if (jb = d.contextOrFrameLookup(b, c, "link"), c.set("btn_url", jb, !0), c.parent || (b.setVariable("btn_url", jb), b.addExport("btn_url")), h += "\n\n        ", f = 209, g = 19, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["rich_metadata"]) && (f = 209, g = 62, d.callWrap(d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "rich_metadata", a.autoesc), "get", a.autoesc), 'pin["rich_metad"]["get"]', ["products"]))&&!d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "is_promoted", a.autoesc)) {
                        h += "\n            ", h += "\n            ";
                        var kb;
                        if (kb = d.memberLookup(d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "rich_metadata", a.autoesc), "products", a.autoesc), 0, a.autoesc), c.set("product_data", kb, !0), c.parent || (b.setVariable("product_data", kb), b.addExport("product_data")), h += "\n            ", "ebay.com" == (f = 212, g = 23, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["domain"])) && (f = 212, g = 68, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "product_data"), "get", a.autoesc), 'product_data["get"]', ["purchase_url"]))) {
                            if (h += "\n                ", h += "\n                ", f = 214, g = 36, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "product_data"), "get", a.autoesc), 'product_data["get"]', ["offer_summary"]) && (f = 214, g = 91, d.callWrap(d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "product_data"), "offer_summary", a.autoesc), "get", a.autoesc), 'product_data["offer_summ"]["get"]', ["in_stock", !0]))) {
                                if (h += "\n                    ", h += "\n                    ", f = 216, g = 64, d.callWrap(d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "experiments", a.autoesc), "in_experiment_groups", a.autoesc), 'context["experiment"]["in_experim"]', ["denzel_buy_button_ebay", ["buy_btn_product_link"]])) {
                                    h += "\n                        ";
                                    var lb;
                                    lb = "primary buy", c.set("btn_class_name", lb, !0), c.parent || (b.setVariable("btn_class_name", lb), b.addExport("btn_class_name")), h += "\n                        ";
                                    var mb;
                                    f = 219, g = 41, mb = d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Buy from Site"]), c.set("btn_text", mb, !0), c.parent || (b.setVariable("btn_text", mb), b.addExport("btn_text")), h += "\n                        ";
                                    var nb;
                                    nb = a.getFilter("urlparams").call(b, d.contextOrFrameLookup(b, c, "link"), d.makeKeywordArgs({
                                        pincsp: "tt.gbuy_desc_page_click"
                                    })), c.set("btn_url", nb, !0), c.parent || (b.setVariable("btn_url", nb), b.addExport("btn_url")), h += "\n                    "
                                } else if (f = 221, g = 66, d.callWrap(d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "experiments", a.autoesc), "in_experiment_groups", a.autoesc), 'context["experiment"]["in_experim"]', ["denzel_buy_button_ebay", ["buy_btn_purchase_link"]])) {
                                    h += "\n                        ";
                                    var ob;
                                    ob = "primary buy", c.set("btn_class_name", ob, !0), c.parent || (b.setVariable("btn_class_name", ob), b.addExport("btn_class_name")), h += "\n                        ";
                                    var pb;
                                    f = 224, g = 41, pb = d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Buy from Site"]), c.set("btn_text", pb, !0), c.parent || (b.setVariable("btn_text", pb), b.addExport("btn_text")), h += "\n                        ";
                                    var qb;
                                    qb = a.getFilter("urlparams").call(b, d.memberLookup(d.contextOrFrameLookup(b, c, "product_data"), "purchase_url", a.autoesc), d.makeKeywordArgs({
                                        pincsp: "tt.gbuy_purchase_page_click"
                                    })), c.set("btn_url", qb, !0), c.parent || (b.setVariable("btn_url", qb), b.addExport("btn_url")), h += "\n                    "
                                } else if (f = 226, g = 66, d.callWrap(d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "experiments", a.autoesc), "in_experiment_groups", a.autoesc), 'context["experiment"]["in_experim"]', ["denzel_buy_button_ebay", ["control"]])) {
                                    h += "\n                        ";
                                    var rb;
                                    rb = "website", c.set("btn_class_name", rb, !0), c.parent || (b.setVariable("btn_class_name", rb), b.addExport("btn_class_name")), h += "\n                        ";
                                    var sb;
                                    sb = d.contextOrFrameLookup(b, c, "has_fullsize_image") ? (f = 229, g = 41, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Image"])) : (f = 229, g = 79, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Visit Site"])), c.set("btn_text", sb, !0), c.parent || (b.setVariable("btn_text", sb), b.addExport("btn_text")), h += "\n                        ";
                                    var tb;
                                    tb = a.getFilter("urlparams").call(b, d.contextOrFrameLookup(b, c, "link"), d.makeKeywordArgs({
                                        pincsp: "tt.gwebsite_click"
                                    })), c.set("btn_url", tb, !0), c.parent || (b.setVariable("btn_url", tb), b.addExport("btn_url")), h += "\n                    "
                                }
                                h += "\n                "
                            }
                            h += "\n            "
                        }
                        h += "\n        "
                    }
                    h += "\n\n        ", h += d.suppressValue((f = 236, g = 15, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["NavigateButton", d.makeKeywordArgs({
                        id: "viewPinSource",
                        options: {
                            class_name: d.contextOrFrameLookup(b, c, "btn_class_name") + d.contextOrFrameLookup(b, c, "pin_action_bar_button_classname"),
                            element_type: "a",
                            has_icon: !0,
                            size: d.contextOrFrameLookup(b, c, "action_bar_button_size"),
                            text: d.contextOrFrameLookup(b, c, "btn_text"),
                            safe_link_pin_id: d.contextOrFrameLookup(b, c, "pin_id"),
                            url: d.contextOrFrameLookup(b, c, "btn_url"),
                            log_element_type: d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "WEBSITE_BUTTON", a.autoesc),
                            nofollow: !0
                        }
                    })])), a.autoesc), h += "\n    "
                }
                if (h += "\n\n    ", f = 252, g = 48, d.callWrap(d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "experiments", a.autoesc), "in_experiment_groups", a.autoesc), 'context["experiment"]["in_experim"]', ["visual_live_search_cropper", ["internal_test"]])) {
                    h += "\n        ";
                    var ub;
                    ub = "crop", c.set("btn_class_name", ub, !0), c.parent || (b.setVariable("btn_class_name", ub), b.addExport("btn_class_name")), h += "\n        ";
                    var vb;
                    f = 254, g = 25, vb = d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Flashlight"]), c.set("btn_text", vb, !0), c.parent || (b.setVariable("btn_text", vb), b.addExport("btn_text")), h += "\n            ", h += d.suppressValue((f = 255, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["VisualCropSearchButton", d.makeKeywordArgs({
                        id: "cropImage",
                        options: {
                            class_name: d.contextOrFrameLookup(b, c, "btn_class_name") + d.contextOrFrameLookup(b, c, "pin_action_bar_button_classname"),
                            element_type: "a",
                            has_icon: !0,
                            size: d.contextOrFrameLookup(b, c, "action_bar_button_size"),
                            text: d.contextOrFrameLookup(b, c, "btn_text")
                        }
                    })])), a.autoesc), h += "\n    "
                }
                if (h += '\n</div>\n\n<div class="shareGear">\n    ', d.contextOrFrameLookup(b, c, "can_edit") && (h += "\n        ", h += d.suppressValue((f = 270, g = 15, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["ShowModalButton", d.makeKeywordArgs({
                    id: "editButton",
                    options: {
                        object_id: d.contextOrFrameLookup(b, c, "pin_id"),
                        text: (f = 275, g = 25, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Edit"])),
                        ga_category: "pin_edit_closeup",
                        class_name: "pinEditDark" + d.contextOrFrameLookup(b, c, "pin_action_bar_button_classname"),
                        size: "medium",
                        has_icon: !0,
                        log_element_type: d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "PIN_EDIT_BUTTON", a.autoesc),
                        submodule: {
                            name: "PinEdit",
                            resource: {
                                name: "PinResource",
                                options: {
                                    id: d.contextOrFrameLookup(b, c, "pin_id"),
                                    field_set_key: "edit"
                                }
                            },
                            options: {
                                next_url: "/pin/" + d.contextOrFrameLookup(b, c, "pin_id") + "/edit/"
                            }
                        }
                    }
                })])), a.autoesc), h += "\n    "), h += "\n    ", "secret" != (f = 297, g = 15, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["privacy"]))) {
                    if (h += "\n        ", d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "is_authenticated", a.autoesc) && (f = 298, g = 57, d.callWrap(d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "user", a.autoesc), "get", a.autoesc), 'context["user"]["get"]', ["username"]))) {
                        h += "\n            ";
                        var wb;
                        wb = d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "description", a.autoesc), c.set("description", wb, !0), c.parent || (b.setVariable("description", wb), b.addExport("description")), h += "\n            ";
                        var xb;
                        xb = "/pin/" + d.contextOrFrameLookup(b, c, "pin_id") + "/", c.set("pin_url", xb, !0), c.parent || (b.setVariable("pin_url", xb), b.addExport("pin_url")), h += "\n            ", h += d.suppressValue((f = 301, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["DropdownButton", d.makeKeywordArgs({
                            data: d.contextOrFrameLookup(b, c, "data"),
                            options: {
                                size: d.contextOrFrameLookup(b, c, "action_bar_button_size"),
                                class_name: "send" + d.contextOrFrameLookup(b, c, "pin_action_bar_button_classname"),
                                has_icon: !0,
                                text: (f = 308, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Send"])),
                                log_element_type: d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "PIN_SEND_BUTTON", a.autoesc),
                                dropdown_options: {
                                    largeCaret: !0,
                                    manually_close: !0,
                                    fixed: !1,
                                    position_point: "BOTTOM_RIGHT",
                                    view_type: "closeupShare",
                                    display_while_loading: !0,
                                    caret_style: "whiteWash"
                                },
                                module: {
                                    name: "SendPin",
                                    options: {
                                        object_id: d.contextOrFrameLookup(b,
                                        c,
                                        "pin_id"),
                                        object_image_url: d.memberLookup(d.contextOrFrameLookup(b,
                                        c,
                                        "grid_pin_image"),
                                        "url",
                                        a.autoesc),
                                        object_description: d.contextOrFrameLookup(b,
                                        c,
                                        "description"),
                                        object_url: d.contextOrFrameLookup(b,
                                        c,
                                        "pin_url")
                                    }
                                }, check_write_banned : !0, check_limited_login : !0
                            }
                        })])), a.autoesc), h += "\n        "
                    }
                    h += "\n    "
                }
                h += "\n    ";
                var yb;
                yb = "/pin/" + d.contextOrFrameLookup(b, c, "pin_id") + "/", c.set("pin_url", yb, !0), c.parent || (b.setVariable("pin_url", yb), b.addExport("pin_url")), h += "\n    ";
                var zb;
                f = 335, g = 62, zb = d.callWrap(d.memberLookup((f = 335, g = 46, d.callWrap(d.memberLookup((f = 335, g = 28, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["images", {}
                ])), "get", a.autoesc), 'the return value of (pin["get"])["get"]', ["236x", {}
                ])), "get", a.autoesc), 'the return value of (the return value of (pin["get"])["get"])["get"]', ["url"]), c.set("pin_image", zb, !0), c.parent || (b.setVariable("pin_image", zb), b.addExport("pin_image")), h += "\n    ";
                var Ab;
                f = 336, g = 34, Ab = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "get", a.autoesc), 'pin["get"]', ["description"]), c.set("pin_description", Ab, !0), c.parent || (b.setVariable("pin_description", Ab), b.addExport("pin_description")), h += "\n\n    ", h += d.suppressValue((f = 338, g = 11, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["FacebookShareButton", d.makeKeywordArgs({
                    options: {
                        object_id: d.contextOrFrameLookup(b, c, "pin_id"),
                        text: (f = 342, g = 21, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Share"])),
                        dialog_options: {
                            object_type: "pin",
                            object_id: d.contextOrFrameLookup(b, c, "pin_id"),
                            description: d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "description", a.autoesc),
                            path: d.contextOrFrameLookup(b, c, "pin_url"),
                            picture: d.contextOrFrameLookup(b, c, "pin_image")
                        },
                        ga_category: "pin_share_facebook",
                        class_name: "facebookShare" + d.contextOrFrameLookup(b, c, "pin_action_bar_button_classname"),
                        size: "medium"
                    }
                })])), a.autoesc), h += "\n</div>\n", e(null, h)
            } catch (Bb) {
                e(d.handleError(Bb, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/PinComment/PinComment.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n", h += "\n";
                var i;
                i = d.contextOrFrameLookup(b, c, "data"), c.set("pin_comment", i, !0), c.parent || (b.setVariable("pin_comment", i), b.addExport("pin_comment")), h += "\n";
                var j;
                f = 11, g = 28, j = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["view_type"]), c.set("view_type", j, !0), c.parent || (b.setVariable("view_type", j), b.addExport("view_type")), h += "\n";
                var k;
                f = 12, g = 31, k = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["show_actions"]), c.set("show_actions", k, !0), c.parent || (b.setVariable("show_actions", k), b.addExport("show_actions")), h += "\n";
                var l;
                f = 13, g = 38, l = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin_comment"), "get", a.autoesc), 'pin_comment["get"]', ["deletable_by_me"]), c.set("deletable_by_me", l, !0), c.parent || (b.setVariable("deletable_by_me", l), b.addExport("deletable_by_me")), h += "\n\n";
                var m;
                f = 15, g = 33, m = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin_comment"), "get", a.autoesc), 'pin_comment["get"]', ["id"]), c.set("comment_id", m, !0), c.parent || (b.setVariable("comment_id", m), b.addExport("comment_id")), h += "\n";
                var n;
                f = 16, g = 25, n = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["pin_id"]), c.set("pin_id", n, !0), c.parent || (b.setVariable("pin_id", n), b.addExport("pin_id")), h += "\n";
                var o;
                o = a.getFilter("safe").call(b, (f = 17, g = 40, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin_comment"), "get", a.autoesc), 'pin_comment["get"]', ["text"]))), c.set("comment_text_html", o, !0), c.parent || (b.setVariable("comment_text_html", o), b.addExport("comment_text_html")), h += "\n";
                var p;
                f = 18, g = 32, p = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "pin_comment"), "get", a.autoesc), 'pin_comment["get"]', ["commenter"]) || {}, c.set("commenter", p, !0), c.parent || (b.setVariable("commenter", p), b.addExport("commenter")), h += "\n";
                var q;
                f = 19, g = 35, q = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "commenter"), "get", a.autoesc), 'commenter["get"]', ["full_name"]), c.set("commenter_name", q, !0), c.parent || (b.setVariable("commenter_name", q), b.addExport("commenter_name")), h += "\n";
                var r;
                if (f = 20, g = 29, r = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["image_size", "small"]), c.set("image_size", r, !0), c.parent || (b.setVariable("image_size", r), b.addExport("image_size")), h += "\n\n\n", f = 23, g = 15, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["view_type"]) && (h += "\n    ", h += d.suppressValue((f = 24, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", [(f = 24, g = 25, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["view_type"]))])), a.autoesc), h += "\n"), h += "\n\n", d.contextOrFrameLookup(b, c, "show_actions") && (h += "\n    ", d.contextOrFrameLookup(b, c, "deletable_by_me") ? (h += "\n        ", h += d.suppressValue((f = 29, g = 15, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["PinDeleteCommentButton", d.makeKeywordArgs({
                    options: {
                        pin_id: d.contextOrFrameLookup(b, c, "pin_id"),
                        comment_id: d.contextOrFrameLookup(b, c, "comment_id")
                    }
                })])), a.autoesc), h += "\n    ") : (h += "\n        ", h += d.suppressValue((f = 36, g = 15, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["PinFlagCommentButton", d.makeKeywordArgs({
                    options: {
                        pin_id: d.contextOrFrameLookup(b, c, "pin_id"),
                        comment_id: d.contextOrFrameLookup(b, c, "comment_id")
                    }
                })])), a.autoesc), h += "\n    "), h += "\n"), h += "\n\n", "small" == d.contextOrFrameLookup(b, c, "image_size")) {
                    h += "\n    ";
                    var s;
                    f = 46, g = 34, s = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "commenter"), "get", a.autoesc), 'commenter["get"]', ["image_small_url"]), c.set("image_src", s, !0), c.parent || (b.setVariable("image_src", s), b.addExport("image_src")), h += "\n"
                } else {
                    h += "\n    ";
                    var t;
                    f = 48, g = 34, t = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "commenter"), "get", a.autoesc), 'commenter["get"]', ["image_medium_url"]), c.set("image_src", t, !0), c.parent || (b.setVariable("image_src", t), b.addExport("image_src")), h += "\n"
                }
                h += "\n\n", h += d.suppressValue((f = 51, g = 7, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["PinDescriptionComment", d.makeKeywordArgs({
                    options: {
                        image_src: d.contextOrFrameLookup(b, c, "image_src"),
                        username: d.memberLookup(d.contextOrFrameLookup(b, c, "commenter"), "username", a.autoesc),
                        full_name: d.memberLookup(d.contextOrFrameLookup(b, c, "commenter"), "full_name", a.autoesc),
                        content: d.contextOrFrameLookup(b, c, "comment_text_html"),
                        subtitle: a.getFilter("humanize_timesince").call(b, a.getFilter("parse_date").call(b, d.memberLookup(d.contextOrFrameLookup(b, c, "pin_comment"), "created_at", a.autoesc))),
                        view_type: d.contextOrFrameLookup(b, c, "view_type"),
                        is_description: !1
                    }
                })])), a.autoesc), h += "\n", e(null, h)
            } catch (u) {
                e(d.handleError(u, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/PinCommentList/PinCommentList.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n";
                var i;
                f = 13, g = 28, i = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["view_type", ""]), c.set("view_type", i, !0), c.parent || (b.setVariable("view_type", i), b.addExport("view_type")), h += "\n", d.contextOrFrameLookup(b, c, "view_type") && (h += "\n    ", h += d.suppressValue((f = 15, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", [d.contextOrFrameLookup(b, c, "view_type")])), a.autoesc), h += "\n"), h += "\n\n", 0 == (f = 18, g = 15, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["count"])) && (h += "\n    ", h += d.suppressValue((f = 19, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["empty"])), a.autoesc), h += "\n"), h += "\n", h += '\n<div class="commentsContainer ', h += d.suppressValue((f = 22, g = 42, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["comments_container_extra_class"])), a.autoesc), h += '">\n\n', f = 24, g = 15, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["count"]) > 0 && (h += "\n    ", h += d.suppressValue((f = 25, g = 11, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["List", d.makeKeywordArgs({
                    resource: (f = 26, g = 32, d.callWrap(d.contextOrFrameLookup(b, c, "create_resource"), "create_resource", ["PinCommentListResource", d.makeKeywordArgs({
                        options: {
                            field_set_key: (f = 27, g = 40, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["field_set_key"])),
                            pin_id: (f = 28, g = 33, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["pin_id"])),
                            page_size: (f = 29, g = 36, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["max_num_to_show", 5]))
                        }
                    })])),
                    data: d.contextOrFrameLookup(b, c, "data"),
                    options: {
                        item_options: d.contextOrFrameLookup(b, c, "options")
                    }
                })])), a.autoesc), h += "\n"), h += "\n</div>\n\n";
                var j;
                f = 37, g = 26, j = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["max_num_to_show", 5]), c.set("max_num", j, !0), c.parent || (b.setVariable("max_num", j), b.addExport("max_num")), h += "\n";
                var k;
                if (f = 38, g = 31, k = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["count"]), c.set("num_comments", k, !0), c.parent || (b.setVariable("num_comments", k), b.addExport("num_comments")), h += "\n", d.contextOrFrameLookup(b, c, "max_num") && d.contextOrFrameLookup(b, c, "num_comments") > d.contextOrFrameLookup(b, c, "max_num")) {
                    h += '\n    <a href="#" class="showAll">\n        ';
                    var l = d.makeMacro([], [], function(e) {
                        c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                        var h, i = "";
                        return h = {
                            num_comments: d.contextOrFrameLookup(b, c, "num_comments")
                        }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 41, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 41, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_ngettext"), "_ngettext", ["See all {{ num_comments }} comment", "See all {{ num_comments }} comments", d.memberLookup(d.contextOrFrameLookup(b, c, "__dict"), "count", a.autoesc)])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                    });
                    b.setVariable("_doTranslation", l), h += d.suppressValue((f = 41, g = 9, d.callWrap(l, "_doTranslation", [])), a.autoesc), h += "\n    </a>\n"
                }
                h += "\n\n", d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "is_authenticated", a.autoesc) && (h += '\n    <div class="pinDescriptionCommentItem pinUserCommentBox">\n        ', h += d.suppressValue((f = 51, g = 15, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["PinDescriptionComment", d.makeKeywordArgs({
                    id: "pinDescriptionComment",
                    options: {
                        image_src: d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "user", a.autoesc), "image_medium_url", a.autoesc),
                        username: d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "user", a.autoesc), "username", a.autoesc),
                        full_name: d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "user", a.autoesc), "full_name", a.autoesc),
                        content: d.contextOrFrameLookup(b, c, "none"),
                        show_comment_form: !0,
                        view_type: d.contextOrFrameLookup(b, c, "view_type"),
                        subtitle: (f = 60, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["That's you!"])),
                        pin_id: (f = 61, g = 37, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["pin_id"])),
                        is_description: !1
                    }
                })])), a.autoesc), h += "\n    </div>\n"), h += "\n", e(null, h)
            } catch (m) {
                e(d.handleError(m, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/PinCreate/PinCreate.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n";
                var i;
                i = d.contextOrFrameLookup(b, c, "data"), c.set("pin", i, !0), c.parent || (b.setVariable("pin", i), b.addExport("pin")), h += "\n";
                var j;
                j = d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "action", a.autoesc), c.set("action", j, !0), c.parent || (b.setVariable("action", j), b.addExport("action")), h += "\n";
                var k;
                k = d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "description", a.autoesc), c.set("description", k, !0), c.parent || (b.setVariable("description", k), b.addExport("description")), h += "\n\n", "fluid" == d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "view_type", a.autoesc) && (h += "\n    ", h += d.suppressValue((f = 19, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["fluid", "inModal"])), a.autoesc), h += "\n"), h += "\n\n";
                var l;
                if (l=!0, c.set("show_cancel_button", l, !0), c.parent || (b.setVariable("show_cancel_button", l), b.addExport("show_cancel_button")), h += "\n", "create" == d.contextOrFrameLookup(b, c, "action") && d.contextOrFrameLookup(b, c, "description")) {
                    h += "\n    ", h += "\n    ";
                    var m;
                    m = 500, c.set("MAX_DESCRIPTION_LENGTH", m, !0), c.parent || (b.setVariable("MAX_DESCRIPTION_LENGTH", m), b.addExport("MAX_DESCRIPTION_LENGTH")), h += "\n    ";
                    var n;
                    n = d.contextOrFrameLookup(b, c, "MAX_DESCRIPTION_LENGTH") - 3, c.set("TRUNCATE_AT", n, !0), c.parent || (b.setVariable("TRUNCATE_AT", n), b.addExport("TRUNCATE_AT")), h += "\n    ";
                    var o;
                    o = a.getFilter("truncate").call(b, d.contextOrFrameLookup(b, c, "description"), d.contextOrFrameLookup(b, c, "TRUNCATE_AT")), c.set("description", o, !0), c.parent || (b.setVariable("description", o), b.addExport("description")), h += "\n"
                } else if ("pin_create_ignition" == d.contextOrFrameLookup(b, c, "action")) {
                    h += "\n    ";
                    var p;
                    p=!1, c.set("show_cancel_button", p, !0), c.parent || (b.setVariable("show_cancel_button", p), b.addExport("show_cancel_button")), h += "\n"
                }
                h += "\n\n", h += "\n";
                var q;
                q = d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "is_video", a.autoesc), c.set("is_video_option", q, !0), c.parent || (b.setVariable("is_video_option", q), b.addExport("is_video_option")), h += "\n";
                var r;
                r = d.contextOrFrameLookup(b, c, "pin") && d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "is_video", a.autoesc) || d.contextOrFrameLookup(b, c, "is_video_option") && "false" != d.contextOrFrameLookup(b, c, "is_video_option"), c.set("is_video", r, !0), c.parent || (b.setVariable("is_video", r), b.addExport("is_video")), h += "\n\n", h += d.suppressValue((f = 39, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "include_data"), "include_data", ["id"])), a.autoesc), h += "\n\n", h += d.suppressValue((f = 41, g = 7, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["PinForm", d.makeKeywordArgs({
                    data: d.contextOrFrameLookup(b, c, "pin"),
                    id: "pinForm",
                    options: {
                        cancel_text: (f = 45, g = 24, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Close"])),
                        description: d.contextOrFrameLookup(b, c, "description") || "",
                        heading: (f = 47, g = 20, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Pick a board"])),
                        image_url: d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "image_url", a.autoesc),
                        default_board_id: d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "default_board_id", a.autoesc),
                        is_video: d.contextOrFrameLookup(b, c, "is_video"),
                        link: (f = 51, g = 27, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["link", ""])),
                        show_uploader: !1,
                        pin_it_script_button: !0,
                        show_cancel_button: d.contextOrFrameLookup(b, c, "show_cancel_button")
                    },
                    resource: d.contextOrFrameLookup(b, c, "resource"),
                    error_strategy: d.memberLookup(d.contextOrFrameLookup(b, c, "ErrorStrategy"), "BUBBLE", a.autoesc)
                })])), a.autoesc), h += "\n", e(null, h)
            } catch (s) {
                e(d.handleError(s, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/PinCreate3/PinCreate3.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n";
                var i;
                i = {
                    view_type: "summary",
                    show_meta: (f = 15, g = 28, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["show_pin_meta", !0])),
                    disable_links: !0,
                    hide_hover_UI: !0,
                    editable_description: !0,
                    hide_pin_credits: (f = 19, g = 35, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["hide_pin_credits"]))
                }, c.set("pin_options", i, !0), c.parent || (b.setVariable("pin_options", i), b.addExport("pin_options")), h += "\n\n";
                var j;
                if (f = 22, g = 31, j = d.callWrap(d.contextOrFrameLookup(b, c, "create_resource"), "create_resource", ["NoopResource", d.makeKeywordArgs({
                    options: {}
                })]), c.set("resource", j, !0), c.parent || (b.setVariable("resource", j), b.addExport("resource")), h += "\n", f = 23, g = 15, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["pin_id"])) {
                    h += "\n    ";
                    var k;
                    f = 24, g = 35, k = d.callWrap(d.contextOrFrameLookup(b, c, "create_resource"), "create_resource", ["PinResource", d.makeKeywordArgs({
                        options: {
                            id: (f = 25, g = 25, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["pin_id"])),
                            field_set_key: "grid_item"
                        }
                    })]), c.set("resource", k, !0), c.parent || (b.setVariable("resource", k), b.addExport("resource")), h += "\n"
                }
                h += '\n\n<div class="pinContainer">\n    ', d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "render_existing_pin", a.autoesc) && (h += "\n        ", h += d.suppressValue((f = 32, g = 15, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Pin", d.makeKeywordArgs({
                    id: "pin",
                    options: d.contextOrFrameLookup(b, c, "pin_options"),
                    resource: d.contextOrFrameLookup(b, c, "resource"),
                    data: d.contextOrFrameLookup(b, c, "data")
                })])), a.autoesc), h += "\n    "), h += '\n</div>\n\n<div class="boardsWrapper">\n    <p class="title">', h += d.suppressValue((f = 42, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Pick a board"])), a.autoesc), h += "</p>\n    ", h += d.suppressValue((f = 43, g = 11, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["BoardPicker", d.makeKeywordArgs({
                    id: "boardPicker",
                    options: {
                        allow_create: !0,
                        view_type: "pinCreate3",
                        skip_append_created_item: !0,
                        show_all_boards_class_name: !0,
                        show_recent_boards_class_name: !0
                    },
                    resource: (f = 52, g = 32, d.callWrap(d.contextOrFrameLookup(b, c, "create_resource"), "create_resource", ["BoardPickerBoardsResource", d.makeKeywordArgs({
                        options: {
                            filter: "all",
                            field_set_key: "board_picker"
                        }
                    })]))
                })])), a.autoesc), h += "\n</div>\n", e(null, h)
            } catch (l) {
                e(d.handleError(l, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/PinCreateSuccessBoardBoxed/PinCreateSuccessBoardBoxed.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n", h += d.suppressValue((f = 4, g = 1, d.callWrap(d.contextOrFrameLookup(b, c, "base"), "base", ["PinCreateSuccessPromoBase"])), a.autoesc), a.getTemplate("app/desktop/modules/PinCreateSuccessPromoBase/PinCreateSuccessPromoBase.nunjucks", !0, function(f, g) {
                    if (f)
                        return void e(f);
                    for (var i in g.blocks)
                        b.addBlock(i, g.blocks[i]);
                    h += "\n\n";
                    var j;
                    j = d.contextOrFrameLookup(b, c, "data"), c.set("board", j, !0), c.parent || (b.setVariable("board", j), b.addExport("board")), h += "\n", d.contextOrFrameLookup(b, c, "board") && (h += "\n    ", h += "\n    ", h += "\n"), h += "\n", g.rootRenderFunc(a, b, c, d, e)
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function b(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n        ";
                var i = d.makeMacro([], [], function(e) {
                    c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                    var h, i = "";
                    return h = {}, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 9, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 9, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Planning something? <strong> The Pin It button </strong> lets you <strong> Pin things wherever you go </strong> on the web."])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                });
                b.setVariable("_doTranslation", i), h += d.suppressValue((f = 9, g = 9, d.callWrap(i, "_doTranslation", [])), a.autoesc), h += "\n    ", e(null, h)
            } catch (j) {
                e(d.handleError(j, f, g))
            }
        }
        function c(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n        ", h += d.suppressValue((f = 15, g = 15, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Board", d.makeKeywordArgs({
                    data: d.contextOrFrameLookup(b, c, "board"),
                    id: "board",
                    options: {
                        allow_buttons: !1,
                        show_board_context: !1
                    },
                    resource: d.contextOrFrameLookup(b, c, "resource")
                })])), a.autoesc), h += "\n    ", e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            b_promo_title: b,
            b_promo_content: c,
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/PinCreateSuccessBoardEdit/PinCreateSuccessBoardEdit.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n", h += d.suppressValue((f = 1, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["BoardEditBase"])), a.autoesc), h += "\n", h += d.suppressValue((f = 2, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "include_data"), "include_data", ["id", "board", "owner", "privacy"])), a.autoesc), h += "\n\n";
                var i;
                i = d.contextOrFrameLookup(b, c, "invites_will_be_pending") ||!1, c.set("invites_will_be_pending", i, !0), c.parent || (b.setVariable("invites_will_be_pending", i), b.addExport("invites_will_be_pending")), h += "\n";
                var j;
                j = d.contextOrFrameLookup(b, c, "map_view_checked") || d.contextOrFrameLookup(b, c, "map_view_checked"), c.set("map_view_checked", j, !0), c.parent || (b.setVariable("map_view_checked", j), b.addExport("map_view_checked")), h += "\n";
                var k;
                k = d.contextOrFrameLookup(b, c, "async") ||!1, c.set("async", k, !0), c.parent || (b.setVariable("async", k), b.addExport("async")), h += '\n\n<div class="standardForm">\n    <h1>';
                var l = d.makeMacro([], [], function(e) {
                    c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                    var h, i = "";
                    return h = {
                        name: d.memberLookup(d.contextOrFrameLookup(b, c, "data"), "name", a.autoesc)
                    }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 9, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 9, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["<span>You just made a new board:</span> {{ name }}"])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                });
                b.setVariable("_doTranslation", l), h += d.suppressValue((f = 9, g = 9, d.callWrap(l, "_doTranslation", [])), a.autoesc), h += '</h1>\n\n    <ul>\n        <li>\n            <h3><label for="place">', h += d.suppressValue((f = 13, g = 37, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Add a map?"])), a.autoesc), h += "</label></h3>\n            <div>\n                ", h += d.suppressValue((f = 15, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["ui.Checkbox", d.makeKeywordArgs({
                    id: "placeLayoutCheckbox",
                    options: {
                        name: "layout",
                        checked: d.contextOrFrameLookup(b, c, "map_view_checked"),
                        disabled: !1,
                        view_type: "fancyToggle"
                    }
                })])), a.autoesc), h += "\n            </div>\n        </li>\n        <li>\n            <h3>\n                <label>", h += d.suppressValue((f = 28, g = 25, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Invite friends to Pin"])), a.autoesc), h += '</label>\n                <a href="', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "settings"), "HELP_BOARD_INVITE_URL", a.autoesc), a.autoesc), h += '" class="learnMore learnAboutBoardInvites">\n                    ', h += d.suppressValue((f = 30, g = 22, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Learn more"])), a.autoesc), h += "\n                </a>\n            </h3>\n            <div>\n                ", h += d.suppressValue((f = 34, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["BoardInviteForm", d.makeKeywordArgs({
                    id: "boardInviteForm",
                    options: {
                        board_id: d.memberLookup(d.contextOrFrameLookup(b, c, "data"), "id", a.autoesc),
                        email_supported: !0,
                        fillWidth: !0,
                        pending: d.contextOrFrameLookup(b, c, "invites_will_be_pending"),
                        field_options: {
                            view_type: "userSelect",
                            tags: "pinners_and_contacts",
                            template: "userSelect"
                        }
                    }
                })])), a.autoesc), h += '\n                <div class="boardInvites">\n                    ', h += d.suppressValue((f = 49, g = 27, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["BoardInvites", d.makeKeywordArgs({
                    id: "boardInvites",
                    resource: (f = 51, g = 48, d.callWrap(d.contextOrFrameLookup(b, c, "create_resource"), "create_resource", ["BoardInvitesResource", d.makeKeywordArgs({
                        options: {
                            board_id: d.memberLookup(d.contextOrFrameLookup(b, c, "data"), "id", a.autoesc),
                            sort: "viewer_first",
                            field_set_key: "boardEdit",
                            status_filters: "new,accepted",
                            include_inactive: !0
                        }
                    })])),
                    async: d.contextOrFrameLookup(b, c, "async")
                })])), a.autoesc), h += '\n                </div>\n            </div>\n        </li>\n    </ul>\n\n    <div class="formFooter">\n        <div class="formFooterButtons">\n            ', h += d.suppressValue((f = 69, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    id: "doneButton",
                    options: {
                        color: "primary",
                        size: "small",
                        cancelButton: !0,
                        text: (f = 75, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Done"]))
                    }
                })])), a.autoesc), h += "\n        </div>\n    </div>\n</div>\n", e(null, h)
            } catch (m) {
                e(d.handleError(m, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/PinCreateSuccessCategoryBoxed/PinCreateSuccessCategoryBoxed.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n", a.getTemplate("templates/macros/image.nunjucks", function(i, j) {
                    return i ? void e(i) : void j.getExported(function(i, j) {
                        if (i)
                            return void e(i);
                        if (!j.hasOwnProperty("image_tag"))
                            return void e(new Error("cannot import 'image_tag'"));
                        var k = j.image_tag;
                        b.setVariable("image_tag", k), h += "\n\n", h += d.suppressValue((f = 10, g = 1, d.callWrap(d.contextOrFrameLookup(b, c, "base"), "base", ["PinCreateSuccessPromoBase"])), a.autoesc), a.getTemplate("app/desktop/modules/PinCreateSuccessPromoBase/PinCreateSuccessPromoBase.nunjucks", !0, function(i, j) {
                            if (i)
                                return void e(i);
                            for (var k in j.blocks)
                                b.addBlock(k, j.blocks[k]);
                            h += "\n\n";
                            var l;
                            l = d.contextOrFrameLookup(b, c, "data"), c.set("pins", l, !0), c.parent || (b.setVariable("pins", l), b.addExport("pins")), h += "\n";
                            var m;
                            m = a.getFilter("length").call(b, d.contextOrFrameLookup(b, c, "pins")), c.set("num_pins", m, !0), c.parent || (b.setVariable("num_pins", m), b.addExport("num_pins")), h += "\n";
                            var n;
                            f = 14, g = 33, n = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["board_category"]), c.set("board_category", n, !0), c.parent || (b.setVariable("board_category", n), b.addExport("board_category")), h += "\n", d.contextOrFrameLookup(b, c, "board_category") && d.contextOrFrameLookup(b, c, "num_pins") >= 3 && (h += "\n    ", h += "\n\n    ", h += "\n"), h += "\n", j.rootRenderFunc(a, b, c, d, e)
                        })
                    })
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function b(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n        ";
                var i = d.makeMacro([], [], function(e) {
                    c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                    var h, i = "";
                    return h = {
                        board_category_display_name: a.getFilter("category_display_name").call(b, d.contextOrFrameLookup(b, c, "board_category"))
                    }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 17, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 17, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Did you know the <strong> Pin It button </strong> lets you <strong> Pin {{ board_category_display_name }} </strong> and more that you find on the web?"])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                });
                b.setVariable("_doTranslation", i), h += d.suppressValue((f = 17, g = 9, d.callWrap(i, "_doTranslation", [])), a.autoesc), h += "\n    ", e(null, h)
            } catch (j) {
                e(d.handleError(j, f, g))
            }
        }
        function c(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n        ", h += d.suppressValue((f = 24, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "extra_data"), "extra_data", [{
                    pinCount: d.contextOrFrameLookup(b, c, "num_pins")
                }
                ])), a.autoesc), h += '\n        <div class="browserImg"></div>\n        <div class="cards">\n            <div class="leftCard card">\n                ', h += d.suppressValue((f = 28, g = 26, d.callWrap(d.contextOrFrameLookup(b, c, "image_tag"), "image_tag", [d.makeKeywordArgs({
                    src: d.memberLookup(d.memberLookup(d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "pins"), 0, a.autoesc), "images", a.autoesc), "236x", a.autoesc), "url", a.autoesc)
                })])), a.autoesc), h += '\n            </div>\n            <div class="centerCard card">\n                ', h += d.suppressValue((f = 33, g = 26, d.callWrap(d.contextOrFrameLookup(b, c, "image_tag"), "image_tag", [d.makeKeywordArgs({
                    src: d.memberLookup(d.memberLookup(d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "pins"), 1, a.autoesc), "images", a.autoesc), "236x", a.autoesc), "url", a.autoesc)
                })])), a.autoesc), h += '\n            </div>\n            <div class="rightCard card">\n                ', h += d.suppressValue((f = 38, g = 26, d.callWrap(d.contextOrFrameLookup(b, c, "image_tag"), "image_tag", [d.makeKeywordArgs({
                    src: d.memberLookup(d.memberLookup(d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "pins"), 2, a.autoesc), "images", a.autoesc), "236x", a.autoesc), "url", a.autoesc)
                })])), a.autoesc), h += "\n            </div>\n        </div>\n    ", e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            b_promo_title: b,
            b_promo_content: c,
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/PinCreateSuccessDomain/PinCreateSuccessDomain.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n", a.getTemplate("templates/macros/image.nunjucks", function(i, j) {
                    return i ? void e(i) : void j.getExported(function(i, j) {
                        if (i)
                            return void e(i);
                        if (!j.hasOwnProperty("image_tag"))
                            return void e(new Error("cannot import 'image_tag'"));
                        var k = j.image_tag;
                        b.setVariable("image_tag", k), h += "\n\n", h += d.suppressValue((f = 10, g = 1, d.callWrap(d.contextOrFrameLookup(b, c, "base"), "base", ["PinCreateSuccessPromoBase"])), a.autoesc), a.getTemplate("app/desktop/modules/PinCreateSuccessPromoBase/PinCreateSuccessPromoBase.nunjucks", !0, function(i, j) {
                            if (i)
                                return void e(i);
                            for (var k in j.blocks)
                                b.addBlock(k, j.blocks[k]);
                            h += "\n\n";
                            var l;
                            l = d.contextOrFrameLookup(b, c, "data"), c.set("pins", l, !0), c.parent || (b.setVariable("pins", l), b.addExport("pins")), h += "\n";
                            var m;
                            if (m = a.getFilter("length").call(b, d.contextOrFrameLookup(b, c, "pins")), c.set("num_pins", m, !0), c.parent || (b.setVariable("num_pins", m), b.addExport("num_pins")), h += "\n", d.contextOrFrameLookup(b, c, "num_pins") >= 5) {
                                h += "\n    ";
                                var n;
                                f = 15, g = 33, n = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["pin_domain"]), c.set("pin_domain", n, !0), c.parent || (b.setVariable("pin_domain", n), b.addExport("pin_domain")), h += "\n    ", d.contextOrFrameLookup(b, c, "pin_domain") && (h += "\n        ", h += "\n\n        ", h += "\n    "), h += "\n"
                            }
                            h += "\n", j.rootRenderFunc(a, b, c, d, e)
                        })
                    })
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function b(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n            ";
                var i = d.makeMacro([], [], function(e) {
                    c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                    var h, i = "";
                    return h = {
                        pin_domain: d.contextOrFrameLookup(b, c, "pin_domain")
                    }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 18, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 18, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Did you know you can <strong> Pin directly </strong> from {{ pin_domain }} with the <strong> Pin It button? </strong>"])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                });
                b.setVariable("_doTranslation", i), h += d.suppressValue((f = 18, g = 13, d.callWrap(i, "_doTranslation", [])), a.autoesc), h += "\n        ", e(null, h)
            } catch (j) {
                e(d.handleError(j, f, g))
            }
        }
        function c(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n            ", h += d.suppressValue((f = 25, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "extra_data"), "extra_data", [{
                    pinCount: d.contextOrFrameLookup(b, c, "num_pins")
                }
                ])), a.autoesc), h += '\n            <div class="browserImg"></div>\n            <div class="coverImg">\n                ', h += d.suppressValue((f = 28, g = 26, d.callWrap(d.contextOrFrameLookup(b, c, "image_tag"), "image_tag", [d.makeKeywordArgs({
                    src: d.memberLookup(d.memberLookup(d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "pins"), 0, a.autoesc), "images", a.autoesc), "236x", a.autoesc), "url", a.autoesc)
                })])), a.autoesc), h += '\n            </div>\n            <div class="thumbnails">\n                ', c = c.push();
                var i = d.contextOrFrameLookup(b, c, "pins");
                if (i)
                    for (var j = i.length, k = 0; k < i.length; k++) {
                        var l = i[k];
                        c.set("pin", l), c.set("loop.index", k + 1), c.set("loop.index0", k), c.set("loop.revindex", j - k), c.set("loop.revindex0", j - k - 1), c.set("loop.first", 0 === k), c.set("loop.last", k === j - 1), c.set("loop.length", j), h += "\n                    ", d.memberLookup(d.contextOrFrameLookup(b, c, "loop"), "index", a.autoesc) <= 4 && (h += "\n                        ", d.memberLookup(d.contextOrFrameLookup(b, c, "loop"), "index", a.autoesc)%2 == 0 && (h += '\n                            <div class="thumbnailRow">\n                        '), h += '\n                        <div class="thumbnailImg">\n                            ', h += d.suppressValue((f = 39, g = 38, d.callWrap(d.contextOrFrameLookup(b, c, "image_tag"), "image_tag", [d.makeKeywordArgs({
                            src: d.memberLookup(d.memberLookup(d.memberLookup(l, "images", a.autoesc), "75x75", a.autoesc), "url", a.autoesc)
                        })])), a.autoesc), h += "\n                        </div>\n                        ", d.memberLookup(d.contextOrFrameLookup(b, c, "loop"), "index", a.autoesc)%2 == 0 && (h += "\n                            </div>\n                        "), h += "\n                    "), h += "\n                "
                    }
                c = c.pop(), h += '\n               <div class="domainInfo">\n                    ', h += d.suppressValue((f = 49, g = 22, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Also on"])), a.autoesc), h += " ", h += d.suppressValue(d.contextOrFrameLookup(b, c, "pin_domain"), a.autoesc), h += "\n                </div>\n            </div>\n        ", e(null, h)
            } catch (m) {
                e(d.handleError(m, f, g))
            }
        }
        return {
            b_promo_title: b,
            b_promo_content: c,
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/PinCreateSuccessExtensionUpsell/PinCreateSuccessExtensionUpsell.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n", h += d.suppressValue((f = 4, g = 1, d.callWrap(d.contextOrFrameLookup(b, c, "base"), "base", ["PinCreateSuccessPromoBase"])), a.autoesc), a.getTemplate("app/desktop/modules/PinCreateSuccessPromoBase/PinCreateSuccessPromoBase.nunjucks", !0, function(f, g) {
                    if (f)
                        return void e(f);
                    for (var i in g.blocks)
                        b.addBlock(i, g.blocks[i]);
                    h += "\n\n", h += "\n\n", h += "\n", g.rootRenderFunc(a, b, c, d, e)
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function b(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n    ";
                var i = d.makeMacro([], [], function(e) {
                    c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                    var h, i = "";
                    return h = {}, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 7, g = 5, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 7, g = 5, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Add <strong> The Pin It button </strong> to your browser so you can save things you find on other sites, too."])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                });
                b.setVariable("_doTranslation", i), h += d.suppressValue((f = 7, g = 5, d.callWrap(i, "_doTranslation", [])), a.autoesc), h += "\n", e(null, h)
            } catch (j) {
                e(d.handleError(j, f, g))
            }
        }
        function c(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += '\n    <div class="zoomImg"></div>\n', e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            b_promo_title: b,
            b_promo_content: c,
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/PinCreateSuccessOddContents/PinCreateSuccessOddContents.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n", h += d.suppressValue((f = 4, g = 1, d.callWrap(d.contextOrFrameLookup(b, c, "base"), "base", ["PinCreateSuccessPromoBase"])), a.autoesc), a.getTemplate("app/desktop/modules/PinCreateSuccessPromoBase/PinCreateSuccessPromoBase.nunjucks", !0, function(f, g) {
                    if (f)
                        return void e(f);
                    for (var i in g.blocks)
                        b.addBlock(i, g.blocks[i]);
                    h += "\n\n", h += "\n\n", h += "\n", g.rootRenderFunc(a, b, c, d, e)
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function b(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n    ";
                var i = d.makeMacro([], [], function(e) {
                    c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                    var h, i = "";
                    return h = {}, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 7, g = 5, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 7, g = 5, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Did you know the <strong> Pin It button </strong> lets you Pin <strong> videos, GIFs, recipes </strong> and more from anywhere?"])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                });
                b.setVariable("_doTranslation", i), h += d.suppressValue((f = 7, g = 5, d.callWrap(i, "_doTranslation", [])), a.autoesc), h += "\n", e(null, h)
            } catch (j) {
                e(d.handleError(j, f, g))
            }
        }
        function c(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += '\n    <div class="browserImg"></div>\n    <div class="contentTypesImg"></div>\n', e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            b_promo_title: b,
            b_promo_content: c,
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/PinCreateSuccessPromoBase/PinCreateSuccessPromoBase.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += '\n\n<div class="promoWrapper">\n    <div class="promoHeader">\n        <div class="alertImg"></div>\n        <div class="promoTitle">\n            ', b.getBlock("promo_title")(a, b, c, d, function(f, g) {
                    return f ? void e(f) : (h += g, h += '\n        </div>\n        <div class="promoFill"></div>\n    </div>\n    <div class="browserWrapper">\n        ', void b.getBlock("promo_content")(a, b, c, d, function(a, b) {
                        return a ? void e(a) : (h += b, h += "\n    </div>\n</div>\n", void e(null, h))
                    }))
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function b(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n            ", e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function c(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n        ", e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            b_promo_title: b,
            b_promo_content: c,
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/PinDupWarning/PinDupWarning.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                a.getTemplate("templates/macros/link.nunjucks", function(i, j) {
                    return i ? void e(i) : void j.getExported(function(i, j) {
                        if (i)
                            return void e(i);
                        if (!j.hasOwnProperty("link_markup"))
                            return void e(new Error("cannot import 'link_markup'"));
                        var k = j.link_markup;
                        b.setVariable("link_markup", k), h += "\n\n";
                        var l;
                        if (l = d.memberLookup(d.contextOrFrameLookup(b, c, "data"), "pinned_to_board", a.autoesc), c.set("board", l, !0), c.parent || (b.setVariable("board", l), b.addExport("board")), h += "\n", d.contextOrFrameLookup(b, c, "board")) {
                            h += '\n    <div class="pinnedToBoardWarning">\n        <strong>', h += d.suppressValue((f = 5, g = 18, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Pssst!"])), a.autoesc), h += "</strong>\n        ";
                            var m = d.makeMacro([], [], function(e) {
                                c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                                var h, i = "";
                                return h = {
                                    link: (f = 6, g = 31, d.callWrap(k, "link_markup", [d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "url", a.autoesc), d.memberLookup(d.contextOrFrameLookup(b, c, "board"), "name", a.autoesc)]))
                                }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 6, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 6, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Looks like this is already on {{ link }}."])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                            });
                            b.setVariable("_doTranslation", m), h += d.suppressValue((f = 6, g = 9, d.callWrap(m, "_doTranslation", [])), a.autoesc), h += "\n    </div>\n"
                        }
                        h += "\n", e(null, h)
                    })
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/PinForm/PinForm.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n";
                var i;
                i = d.contextOrFrameLookup(b, c, "data"), c.set("pin", i, !0), c.parent || (b.setVariable("pin", i), b.addExport("pin")), h += "\n", h += d.suppressValue((f = 27, g = 5, d.callWrap(d.contextOrFrameLookup(b, c, "attr"), "attr", [{
                    "data-component-type": "MODAL_REPIN"
                }
                ])), a.autoesc), h += "\n";
                var j;
                if (j=!1, c.set("writable_place", j, !0), c.parent || (b.setVariable("writable_place", j), b.addExport("writable_place")), h += "\n", d.contextOrFrameLookup(b, c, "pin")) {
                    h += "\n    ";
                    var k;
                    k = d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "id", a.autoesc), c.set("pin_id", k, !0), c.parent || (b.setVariable("pin_id", k), b.addExport("pin_id")), h += "\n    ";
                    var l;
                    l = d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "description", a.autoesc), c.set("description", l, !0), c.parent || (b.setVariable("description", l), b.addExport("description")), h += "\n    ", h += "\n    ";
                    var m;
                    m = d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "images", a.autoesc) && d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "images", a.autoesc), "236x", a.autoesc) && d.memberLookup(d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "images", a.autoesc), "236x", a.autoesc), "url", a.autoesc), c.set("image_url", m, !0), c.parent || (b.setVariable("image_url", m), b.addExport("image_url")), h += "\n    ";
                    var n;
                    n = d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "is_video", a.autoesc), c.set("is_video", n, !0), c.parent || (b.setVariable("is_video", n), b.addExport("is_video")), h += "\n    ";
                    var o;
                    o = d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "link", a.autoesc), c.set("link", o, !0), c.parent || (b.setVariable("link", o), b.addExport("link")), h += "\n    ";
                    var p;
                    if (p = d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "place_summary", a.autoesc), c.set("place", p, !0), c.parent || (b.setVariable("place", p), b.addExport("place")), h += "\n    ", !d.contextOrFrameLookup(b, c, "place") || d.contextOrFrameLookup(b, c, "place") && a.getFilter("contains").call(b, d.memberLookup(d.contextOrFrameLookup(b, c, "place"), "access", a.autoesc), "write")) {
                        h += "\n        ";
                        var q;
                        q=!0, c.set("writable_place", q, !0), c.parent || (b.setVariable("writable_place", q), b.addExport("writable_place")), h += "\n    "
                    }
                    h += "\n"
                } else {
                    h += "\n    ";
                    var r;
                    r = d.contextOrFrameLookup(b, c, "none"), c.set("pin_id", r, !0), c.parent || (b.setVariable("pin_id", r), b.addExport("pin_id")), h += "\n    ";
                    var s;
                    f = 42, g = 34, s = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["description", ""]), c.set("description", s, !0), c.parent || (b.setVariable("description", s), b.addExport("description")), h += "\n    ";
                    var t;
                    f = 43, g = 34, t = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["image_url", ""]), c.set("image_url", t, !0), c.parent || (b.setVariable("image_url", t), b.addExport("image_url")), h += "\n    ";
                    var u;
                    f = 44, g = 34, u = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["is_video", !1]), c.set("is_video", u, !0), c.parent || (b.setVariable("is_video", u), b.addExport("is_video")), h += "\n    ";
                    var v;
                    f = 45, g = 34, v = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["link", ""]), c.set("link", v, !0), c.parent || (b.setVariable("link", v), b.addExport("link")), h += "\n    ";
                    var w;
                    w = {}, c.set("place", w, !0), c.parent || (b.setVariable("place", w), b.addExport("place")), h += "\n"
                }
                h += "\n\n";
                var x;
                x = d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "show_link", a.autoesc), c.set("show_link", x, !0), c.parent || (b.setVariable("show_link", x), b.addExport("show_link")), h += "\n";
                var y;
                y = d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "show_place", a.autoesc), c.set("show_place", y, !0), c.parent || (b.setVariable("show_place", y), b.addExport("show_place")), h += "\n";
                var z;
                if (f = 51, g = 27, z = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["writable", !0]), c.set("writable", z, !0), c.parent || (b.setVariable("writable", z), b.addExport("writable")), h += "\n", d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "is_authenticated", a.autoesc)) {
                    h += "\n    ";
                    var A;
                    A = d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "user", a.autoesc), "facebook_id", a.autoesc), c.set("facebook_id", A, !0), c.parent || (b.setVariable("facebook_id", A), b.addExport("facebook_id")), h += "\n    ";
                    var B;
                    B = d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "user", a.autoesc), "facebook_url", a.autoesc), c.set("facebook_url", B, !0), c.parent || (b.setVariable("facebook_url", B), b.addExport("facebook_url")), h += "\n    ";
                    var C;
                    C = d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "user", a.autoesc), "facebook_timeline_enabled", a.autoesc), c.set("facebook_timeline_enabled", C, !0), c.parent || (b.setVariable("facebook_timeline_enabled", C), b.addExport("facebook_timeline_enabled")), h += "\n    ";
                    var D;
                    D = d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "user", a.autoesc), "facebook_publish_stream_enabled", a.autoesc), c.set("facebook_stream_enabled", D, !0), c.parent || (b.setVariable("facebook_stream_enabled", D), b.addExport("facebook_stream_enabled")), h += "\n    ";
                    var E;
                    E = d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "user", a.autoesc), "twitter_url", a.autoesc), c.set("twitter_url", E, !0), c.parent || (b.setVariable("twitter_url", E), b.addExport("twitter_url")), h += "\n    ";
                    var F;
                    F = d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "user", a.autoesc), "twitter_publish_enabled", a.autoesc), c.set("twitter_publish_enabled", F, !0), c.parent || (b.setVariable("twitter_publish_enabled", F), b.addExport("twitter_publish_enabled")), h += "\n    ", h += d.suppressValue((f = 59, g = 15, d.callWrap(d.contextOrFrameLookup(b, c, "extra_data"), "extra_data", [{
                        facebookId: d.contextOrFrameLookup(b, c, "facebook_id"),
                        facebookUrl: d.contextOrFrameLookup(b, c, "facebook_url"),
                        facebookTimelineEnabled: d.contextOrFrameLookup(b, c, "facebook_timeline_enabled"),
                        facebookStreamEnabled: d.contextOrFrameLookup(b, c, "facebook_stream_enabled"),
                        twitterUrl: d.contextOrFrameLookup(b, c, "twitter_url"),
                        twitterPublishEnabled: d.contextOrFrameLookup(b, c, "twitter_publish_enabled")
                    }
                    ])), a.autoesc), h += "\n"
                }
                if (h += '\n\n<form class="standardForm" method="post">\n    <h1 class="pinFormHeader">', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "heading", a.autoesc), a.autoesc), h += "</h1>\n\n    ", h += d.suppressValue((f = 71, g = 11, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["PinDupWarning", d.makeKeywordArgs({
                    data: {
                        pinned_to_board: d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "pinned_to_board", a.autoesc)
                    },
                    resource: (f = 75, g = 32, d.callWrap(d.contextOrFrameLookup(b, c, "create_resource"), "create_resource", ["PinResource", d.makeKeywordArgs({
                        options: {
                            id: d.contextOrFrameLookup(b, c, "pin_id"),
                            field_set_key: "faster_repin"
                        }
                    })]))
                })])), a.autoesc), h += "\n\n    ", h += d.suppressValue((f = 83, g = 11, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["ui.PinPreview", d.makeKeywordArgs({
                    id: "pinPreview",
                    options: {
                        image_url: d.contextOrFrameLookup(b, c, "image_url"),
                        is_video: d.contextOrFrameLookup(b, c, "is_video")
                    }
                })])), a.autoesc), h += "\n\n    <ul>\n        ", d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "show_pinner", a.autoesc)) {
                    h += "\n            <li>\n                <h3><label>", h += d.suppressValue((f = 94, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Pinner"])), a.autoesc), h += "</label></h3>\n                <div>\n                    ";
                    var G;
                    G = d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "pinner", a.autoesc), c.set("pinner", G, !0), c.parent || (b.setVariable("pinner", G), b.addExport("pinner")), h += "\n                    ";
                    var H;
                    H = "/" + d.memberLookup(d.contextOrFrameLookup(b, c, "pinner"), "username", a.autoesc) + "/", c.set("pinner_url", H, !0), c.parent || (b.setVariable("pinner_url", H), b.addExport("pinner_url")), h += '\n                    <a href="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "pinner_url"), a.autoesc), h += '">\n                        <img src="', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "pinner"), "image_small_url", a.autoesc), a.autoesc), h += '" />\n                    </a>\n                    <a href="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "pinner_url"), a.autoesc), h += '">\n                        ', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "pinner"), "full_name", a.autoesc), a.autoesc), h += "\n                    </a>\n                </div>\n            </li>\n        "
                }
                if (h += '\n        <li class="boardWrapper">\n            <h3><label>', h += d.suppressValue((f = 108, g = 25, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Board"])), a.autoesc), h += "</label></h3>\n            <div>\n                ", f = 110, g = 60, d.callWrap(d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "experiments", a.autoesc), "in_experiment_groups", a.autoesc), 'context["experiment"]["in_experim"]', ["web_pin_create", ["enabled_filter", "enabled_separator", "employees_separator"]]))
                    h += "\n                    ", h += d.suppressValue((f = 112, g = 27, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["BoardPickerDropdownButton", d.makeKeywordArgs({
                        id: "boardPicker",
                        options: {
                            selected_board_id: d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "default_board_id", a.autoesc),
                            selected_index: 0,
                            view_type: "compact"
                        },
                        resource: (f = 119, g = 48, d.callWrap(d.contextOrFrameLookup(b, c, "create_resource"), "create_resource", ["BoardPickerBoardsResource", d.makeKeywordArgs({
                            options: {
                                filter: "all",
                                field_set_key: "board_picker"
                            }
                        })])),
                        error_strategy: d.memberLookup(d.contextOrFrameLookup(b, c, "ErrorStrategy"), "BUBBLE", a.autoesc)
                    })])), a.autoesc), h += "\n                ";
                else {
                    h += "\n                    ";
                    var I;
                    if (I = d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "default_board_id", a.autoesc), c.set("default_board_id", I, !0), c.parent || (b.setVariable("default_board_id", I), b.addExport("default_board_id")), h += "\n                    ", d.contextOrFrameLookup(b, c, "default_board_id")) {
                        h += "\n                        ";
                        var J;
                        J = "alphabetical", c.set("board_sort", J, !0), c.parent || (b.setVariable("board_sort", J), b.addExport("board_sort")), h += "\n                    "
                    } else {
                        h += "\n                        ";
                        var K;
                        f = 132, g = 53, K = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["board_sort", "board_picker"]), c.set("board_sort", K, !0), c.parent || (b.setVariable("board_sort", K), b.addExport("board_sort")), h += "\n                    "
                    }
                    if (h += "\n                    ", d.contextOrFrameLookup(b, c, "show_link")) {
                        h += "\n                        ";
                        var L;
                        L = "large", c.set("size", L, !0), c.parent || (b.setVariable("size", L), b.addExport("size")), h += "\n                    "
                    } else {
                        h += "\n                        ";
                        var M;
                        M = "medium", c.set("size", M, !0), c.parent || (b.setVariable("size", M), b.addExport("size")), h += "\n                    "
                    }
                    h += "\n                    ", h += d.suppressValue((f = 139, g = 27, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["BoardPickerOld", d.makeKeywordArgs({
                        id: "boardPicker",
                        options: {
                            default_board_id: d.contextOrFrameLookup(b, c, "default_board_id") || "",
                            size: d.contextOrFrameLookup(b, c, "size"),
                            disabled: !d.contextOrFrameLookup(b, c, "writable")
                        },
                        resource: (f = 146, g = 48, d.callWrap(d.contextOrFrameLookup(b, c, "create_resource"), "create_resource", ["BoardsResource", d.makeKeywordArgs({
                            options: {
                                username: d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "user", a.autoesc), "username", a.autoesc),
                                filter: (f = 149, g = 53, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["board_filter", "all"])),
                                field_set_key: "board_picker",
                                sort: d.contextOrFrameLookup(b, c, "board_sort"),
                                default_board_id: d.contextOrFrameLookup(b, c, "default_board_id")
                            }
                        })])),
                        error_strategy: d.memberLookup(d.contextOrFrameLookup(b, c, "ErrorStrategy"), "BUBBLE", a.autoesc)
                    })])), a.autoesc), h += "\n                "
                }
                if (h += '\n            </div>\n        </li>\n        <li>\n            <h3><label for="pinFormDescription">', h += d.suppressValue((f = 161, g = 50, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Description"])), a.autoesc), h += "</label></h3>\n            <div>\n                ", h += d.suppressValue((f = 163, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["ui.TextField", d.makeKeywordArgs({
                    id: "pinDescriptionField",
                    options: {
                        id: "pinFormDescription",
                        name: "description",
                        value: d.contextOrFrameLookup(b, c, "description"),
                        disabled: !d.contextOrFrameLookup(b, c, "writable"),
                        placeholder: (f = 170, g = 40, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["What's this Pin all about?"])),
                        mentions: !0,
                        pin_id: d.contextOrFrameLookup(b, c, "pin_id")
                    }
                })])), a.autoesc), h += "\n            </div>\n        </li>\n        ", d.contextOrFrameLookup(b, c, "show_link") && (h += "\n            ", h += d.suppressValue((f = 177, g = 21, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["showLink"])), a.autoesc), h += '\n            <li>\n                <h3><label for="pinFormLink">', h += d.suppressValue((f = 179, g = 47, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Source"])), a.autoesc), h += '</label></h3>\n                <div>\n                    <input type="url"\n                        name="link"\n                        id="pinFormLink"\n                        value="', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "pin"), "link", a.autoesc), a.autoesc), h += '"\n                        ', d.contextOrFrameLookup(b, c, "writable") || (h += 'disabled class="disabled"'), h += " />\n                </div>\n            </li>\n        "), h += "\n\n        ", d.contextOrFrameLookup(b, c, "pin") && d.contextOrFrameLookup(b, c, "show_place")) {
                    if (h += '\n            <li class="placeWrapper">\n                    <h3><label>', h += d.suppressValue((f = 192, g = 33, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Place"])), a.autoesc), h += '</label></h3>\n                    <div>\n                        <input type="hidden" class="pinPlaceId" value="', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "place"), "id", a.autoesc), a.autoesc), h += '">\n                        ', !d.contextOrFrameLookup(b, c, "place") || d.contextOrFrameLookup(b, c, "writable") && d.contextOrFrameLookup(b, c, "writable_place")) {
                        h += "\n                            ", h += d.suppressValue((f = 196, g = 35, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["PlaceSelector", d.makeKeywordArgs({
                            id: "placeSelector",
                            options: {
                                place: d.contextOrFrameLookup(b, c, "place")
                            }
                        })])), a.autoesc), h += "\n                            ";
                        var N;
                        if (N = "removePlaceButton", c.set("button_class_name", N, !0), c.parent || (b.setVariable("button_class_name", N), b.addExport("button_class_name")), h += "\n                            ", !d.contextOrFrameLookup(b, c, "place")) {
                            h += "\n                                ";
                            var O;
                            O = d.contextOrFrameLookup(b, c, "button_class_name") + " hidden", c.set("button_class_name", O, !0), c.parent || (b.setVariable("button_class_name", O), b.addExport("button_class_name")), h += "\n                            "
                        }
                        h += "\n                            ", h += d.suppressValue((f = 206, g = 35, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                            id: "removePlaceButton",
                            options: {
                                borderless: !0,
                                class_name: d.contextOrFrameLookup(b, c, "button_class_name"),
                                log_element_type: d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "REMOVE_PLACE_BUTTON", a.autoesc),
                                text: (f = 212, g = 45, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Remove Place"]))
                            }
                        })])), a.autoesc), h += "\n                        "
                    } else 
                        h += '\n                            <input type="text"\n                                disabled\n                                class="disabled"\n                                value="', h += d.suppressValue((f = 219, g = 49, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "place"), "get", a.autoesc), 'place["get"]', ["name", ""])), a.autoesc), h += '">\n                        ';
                    h += "\n                    </div>\n                </li>\n            </li>\n        "
                }
                h += '\n    </ul>\n\n    <div class="formFooter">\n        ';
                var P;
                f = 228, g = 46, P = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["show_explicit_share", !0]), c.set("show_explicit_share", P, !0), c.parent || (b.setVariable("show_explicit_share", P), b.addExport("show_explicit_share")), h += "\n        ", d.contextOrFrameLookup(b, c, "show_explicit_share") && (h += '\n            <div class="socialShareWrapper">\n                ', d.contextOrFrameLookup(b, c, "facebook_url")&&!d.contextOrFrameLookup(b, c, "facebook_timeline_enabled") && (h += '\n                    <label class="facebookInput">\n                        ', h += d.suppressValue((f = 233, g = 31, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["ui.Checkbox", d.makeKeywordArgs({
                    options: {
                        name: "share_facebook",
                        checked: d.contextOrFrameLookup(b, c, "facebook_stream_enabled"),
                        view_type: d.contextOrFrameLookup(b, c, "none")
                    }
                })])), a.autoesc), h += "\n                        <span>", h += d.suppressValue((f = 237, g = 32, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Post to Facebook"])), a.autoesc), h += "</span>\n                    </label>\n                "), h += "\n                ", d.contextOrFrameLookup(b, c, "twitter_url") && (h += '\n                    <label class="twitterInput">\n                        ', h += d.suppressValue((f = 242, g = 31, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["ui.Checkbox", d.makeKeywordArgs({
                    options: {
                        name: "share_twitter",
                        checked: d.contextOrFrameLookup(b, c, "twitter_publish_enabled"),
                        view_type: d.contextOrFrameLookup(b, c, "none")
                    }
                })])), a.autoesc), h += "\n                        <span>", h += d.suppressValue((f = 246, g = 32, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Post to Twitter"])), a.autoesc), h += "</span>\n                    </label>\n                "), h += "\n            </div>\n        "), h += "\n        ", d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "show_delete", a.autoesc) ? (h += '\n            <div class="formFooterDelete">\n                ', h += d.suppressValue((f = 253, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    id: "deleteButton",
                    options: {
                        class_name: "deleteButton",
                        text: (f = 257, g = 33, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Delete Pin"])),
                        ga_category: "pin_delete"
                    }
                })])), a.autoesc), h += "\n            </div>\n        ") : d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "show_uploader", a.autoesc) && (h += "\n            ", h += d.suppressValue((f = 264, g = 22, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["ui.ImageUploader", d.makeKeywordArgs({
                    id: "uploader",
                    options: {
                        placeholder: d.contextOrFrameLookup(b, c, "image_url"),
                        button_options: {
                            text: (f = 269, g = 37, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Choose File"])),
                            class_name: "leftRounded",
                            size: "large",
                            element_type: "div",
                            rounded: !1
                        }
                    }
                })])), a.autoesc), h += "\n        "), h += '\n\n        <div class="formFooterButtons">\n            ', f = 281, g = 27, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["show_cancel_button", !0]) && (h += "\n                ", h += d.suppressValue((f = 282, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    id: "cancelButton",
                    options: {
                        cancelButton: !0,
                        text: (f = 286, g = 43, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["cancel_text", (f = 286, g = 60, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Cancel"]))]))
                    }
                })])), a.autoesc), h += "\n            "), h += "\n\n            ";
                var Q;
                Q=!d.contextOrFrameLookup(b, c, "writable"), c.set("disabled", Q, !0), c.parent || (b.setVariable("disabled", Q), b.addExport("disabled")), h += "\n            ";
                var R;
                R = "submitButton", c.set("submit_button_id", R, !0), c.parent || (b.setVariable("submit_button_id", R), b.addExport("submit_button_id")), h += "\n            ";
                var S;
                S = "primary", c.set("button_color", S, !0), c.parent || (b.setVariable("button_color", S), b.addExport("button_color")), h += "\n            ";
                var T;
                if (T = "submit", c.set("button_type", T, !0), c.parent || (b.setVariable("button_type", T), b.addExport("button_type")), h += "\n            ", d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "pin_it_script_button", a.autoesc)) {
                    h += "\n                ";
                    var U;
                    U = {
                        class_name: "repinSmall pinIt",
                        type: d.contextOrFrameLookup(b, c, "button_type"),
                        show_text: "ja" == d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "language", a.autoesc),
                        text: (f = 308, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Pin it"])),
                        has_icon: !0,
                        disabled: d.contextOrFrameLookup(b, c, "disabled"),
                        color: d.contextOrFrameLookup(b, c, "button_color")
                    }, c.set("button_options", U, !0), c.parent || (b.setVariable("button_options", U), b.addExport("button_options")), h += "\n            "
                } else {
                    h += "\n                ";
                    var V;
                    V = {
                        class_name: "savePinButton",
                        color: d.contextOrFrameLookup(b, c, "button_color"),
                        disabled: d.contextOrFrameLookup(b, c, "disabled"),
                        text: (f = 300, g = 39, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["submit_text", (f = 300, g = 56, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Save Changes"]))])),
                        type: d.contextOrFrameLookup(b, c, "button_type")
                    }, c.set("button_options", V, !0), c.parent || (b.setVariable("button_options", V), b.addExport("button_options")), h += "\n            "
                }
                h += "\n\n            ", h += d.suppressValue((f = 315, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    id: d.contextOrFrameLookup(b, c, "submit_button_id"),
                    options: d.contextOrFrameLookup(b, c, "button_options")
                })])), a.autoesc), h += "\n        </div>\n    </div>\n\n    ", d.contextOrFrameLookup(b, c, "show_link") || (h += '\n        <input type="hidden" name="link" id="pinFormLink" value="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "link"), a.autoesc), h += '">\n    '), h += "\n</form>\n", e(null, h)
            } catch (W) {
                e(d.handleError(W, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/PlaceSelector/PlaceSelector.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n";
                var i;
                f = 14, g = 24, i = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["place"]) || {}, c.set("place", i, !0), c.parent || (b.setVariable("place", i), b.addExport("place")), h += "\n";
                var j;
                f = 15, g = 23, j = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "place"), "get", a.autoesc), 'place["get"]', ["access", []]), c.set("access", j, !0), c.parent || (b.setVariable("access", j), b.addExport("access")), h += "\n";
                var k;
                if (k = a.getFilter("contains").call(b, d.contextOrFrameLookup(b, c, "access"), "write"), c.set("writable", k, !0), c.parent || (b.setVariable("writable", k), b.addExport("writable")), h += "\n", d.contextOrFrameLookup(b, c, "place") == {}) {
                    h += "\n    ";
                    var l;
                    l=!0, c.set("writable", l, !0), c.parent || (b.setVariable("writable", l), b.addExport("writable")), h += "\n"
                }
                if (h += "\n", f = 20, g = 15, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["writable"])) {
                    h += "\n    ";
                    var m;
                    m = d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "writable", a.autoesc), c.set("writable", m, !0), c.parent || (b.setVariable("writable", m), b.addExport("writable")), h += "\n"
                }
                h += "\n\n";
                var n;
                f = 24, g = 42, n = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["show_remove_place_button", !0]), c.set("show_remove_place_button", n, !0), c.parent || (b.setVariable("show_remove_place_button", n), b.addExport("show_remove_place_button")), h += '\n\n<div class="placeFieldWrapper">\n    <em class="searchIcon"></em>\n    ', h += d.suppressValue((f = 28, g = 11, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["ui.TypeaheadField", d.makeKeywordArgs({
                    id: "placeField",
                    options: {
                        class_name: "addPlaceToPinFormField",
                        disabled: !d.contextOrFrameLookup(b, c, "writable"),
                        enable_recent_queries: !1,
                        name: "q",
                        count: 10,
                        template: "place",
                        placeholder: (f = 37, g = 28, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Name and city?"])),
                        populate_on_result_highlight: !1,
                        preserve_typeahead: (f = 39, g = 45, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["preserve_typeahead"])),
                        prevent_default_on_enter: !0,
                        set_input_value_on_selection: (f = 41, g = 55, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["set_input_value_on_selection"])),
                        use_tab_index: !1,
                        search_delay: 300,
                        show_caret: (f = 44, g = 37, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["show_caret", !0])),
                        should_geocode: !0,
                        spinner: {
                            enable: !1
                        },
                        tags: "places",
                        num_places: (f = 50, g = 37, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["num_places", 5])),
                        minimum_term_character_length: 1,
                        value: (f = 52, g = 30, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "place"), "get", a.autoesc), 'place["get"]', ["name"])),
                        view_type: "addPlaceToPinForm"
                    }
                })])), a.autoesc), h += "\n</div>\n", e(null, h)
            } catch (o) {
                e(d.handleError(o, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/PresenterButton/PresenterButton.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += d.suppressValue((f = 0, g = 1, d.callWrap(d.contextOrFrameLookup(b, c, "base"), "base", ["DropdownButton"])), a.autoesc), a.getTemplate("app/common/modules/DropdownButton/DropdownButton.nunjucks", !0, function(f, g) {
                    if (f)
                        return void e(f);
                    for (var i in g.blocks)
                        b.addBlock(i, g.blocks[i]);
                    h += "\n", g.rootRenderFunc(a, b, c, d, e)
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/QAPinQuestion/QAPinQuestion.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n";
                var i;
                i = d.contextOrFrameLookup(b, c, "data"), c.set("question", i, !0), c.parent || (b.setVariable("question", i), b.addExport("question")), h += "\n";
                var j;
                f = 5, g = 53, j = d.callWrap(d.memberLookup((f = 5, g = 34, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "question"), "get", a.autoesc), 'question["get"]', ["context_pin"])), "get", a.autoesc), 'the return value of (question["get"])["get"]', ["id"]), c.set("context_pin_id", j, !0), c.parent || (b.setVariable("context_pin_id", j), b.addExport("context_pin_id")), h += "\n\n", h += d.suppressValue((f = 7, g = 7, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Pin", d.makeKeywordArgs({
                    resource: (f = 8, g = 28, d.callWrap(d.contextOrFrameLookup(b, c, "create_resource"), "create_resource", ["PinResource", d.makeKeywordArgs({
                        options: {
                            id: d.contextOrFrameLookup(b, c, "context_pin_id"),
                            field_set_key: "summary"
                        }
                    })])),
                    options: {
                        show_comments: !1,
                        show_meta: !1,
                        show_social_counts: !1,
                        show_pinner: !0,
                        squish_giraffe_pins: !0,
                        max_pin_height_grid: 306
                    },
                    error_strategy: d.memberLookup(d.contextOrFrameLookup(b, c, "ErrorStrategy"), "REMOVE", a.autoesc)
                })])), a.autoesc), h += "\n\n\n", h += d.suppressValue((f = 26, g = 7, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Question", d.makeKeywordArgs({
                    data: d.contextOrFrameLookup(b, c, "question"),
                    resource: (f = 28, g = 28, d.callWrap(d.contextOrFrameLookup(b, c, "create_resource"), "create_resource", ["QuestionResource", d.makeKeywordArgs({
                        options: {
                            question_id: (f = 30, g = 39, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "question"), "get", a.autoesc), 'question["get"]', ["id"])),
                            field_set_key: "domain_list_item"
                        }
                    })])),
                    options: {
                        context_pin_id: d.contextOrFrameLookup(b, c, "context_pin_id")
                    }
                })])), a.autoesc), h += "\n", e(null, h)
            } catch (k) {
                e(d.handleError(k, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/RelatedBoards/RelatedBoards.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n", a.getTemplate("templates/macros/image.nunjucks", function(i, j) {
                    return i ? void e(i) : void j.getExported(function(i, j) {
                        if (i)
                            return void e(i);
                        if (!j.hasOwnProperty("image_tag"))
                            return void e(new Error("cannot import 'image_tag'"));
                        var k = j.image_tag;
                        b.setVariable("image_tag", k), h += "\n\n", h += "\n\n";
                        var l;
                        f = 12, g = 25, l = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["boards"]), c.set("boards", l, !0), c.parent || (b.setVariable("boards", l), b.addExport("boards")), h += "\n\n<h2>", h += d.suppressValue((f = 14, g = 6, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Related Boards"])), a.autoesc), h += "</h2>\n", h += d.suppressValue((f = 15, g = 5, d.callWrap(d.contextOrFrameLookup(b, c, "attr"), "attr", [{
                            "data-component-type": d.memberLookup(d.contextOrFrameLookup(b, c, "ComponentType"), "RELATED_BOARDS", a.autoesc)
                        }
                        ])), a.autoesc), h += "\n\n<ul>\n    ", c = c.push();
                        var m = d.contextOrFrameLookup(b, c, "boards");
                        if (m)
                            for (var n = m.length, o = 0; o < m.length; o++) {
                                var p = m[o];
                                c.set("board", p), c.set("loop.index", o + 1), c.set("loop.index0", o), c.set("loop.revindex", n - o), c.set("loop.revindex0", n - o - 1), c.set("loop.first", 0 === o), c.set("loop.last", o === n - 1), c.set("loop.length", n), h += "\n        <li>\n            ";
                                var q;
                                f = 20, g = 39, q = d.callWrap(d.memberLookup(p, "get", a.autoesc), 'board["get"]', ["description"]) || (f = 20, g = 67, d.callWrap(d.memberLookup(p, "get", a.autoesc), 'board["get"]', ["name"])), c.set("board_info", q, !0), c.parent || (b.setVariable("board_info", q), b.addExport("board_info")), h += "\n            ";
                                var r;
                                r = a.getFilter("named_format").call(b, (f = 21, g = 31, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["More from {{ board }}"])), {
                                    board: d.contextOrFrameLookup(b, c, "board_info")
                                }), c.set("title_text", r, !0), c.parent || (b.setVariable("title_text", r), b.addExport("title_text")), h += '\n            <a href="', h += d.suppressValue((f = 22, g = 31, d.callWrap(d.memberLookup(p, "get", a.autoesc), 'board["get"]', ["url"])), a.autoesc), h += '" class="relatedBoard" data-board-id="', h += d.suppressValue((f = 22, g = 87, d.callWrap(d.memberLookup(p, "get", a.autoesc), 'board["get"]', ["id"])), a.autoesc), h += '"\n               data-element-type="', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "BOARD_RELATED_BOARD", a.autoesc), a.autoesc), h += '" title="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "title_text"), a.autoesc), h += '">\n                <span class="thumbImageWrapper">\n                    ', h += d.suppressValue((f = 25, g = 30, d.callWrap(k, "image_tag", [d.makeKeywordArgs({
                                    src: (f = 26, g = 82, d.callWrap(d.memberLookup((f = 26, g = 65, d.callWrap(d.memberLookup((f = 26, g = 41, d.callWrap(d.memberLookup(p, "get", a.autoesc), 'board["get"]', ["cover_images", {}
                                    ])), "get", a.autoesc), 'the return value of (board["get"])["get"]', ["30x30", {}
                                    ])), "get", a.autoesc), 'the return value of (the return value of (board["get"])["get"])["get"]', ["url"])),
                                    alt: d.contextOrFrameLookup(b, c, "board_info")
                                })])), a.autoesc), h += '\n                </span>\n                <span class="itemTitle">', h += d.suppressValue((f = 30, g = 50, d.callWrap(d.memberLookup(p, "get", a.autoesc), 'board["get"]', ["name"])), a.autoesc), h += "</span>\n            </a>\n        </li>\n    "
                            }
                        c = c.pop(), h += "\n</ul>\n", e(null, h)
                    })
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/RelatedEditorials/RelatedEditorials.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n", a.getTemplate("templates/macros/image.nunjucks", function(i, j) {
                    return i ? void e(i) : void j.getExported(function(i, j) {
                        if (i)
                            return void e(i);
                        if (!j.hasOwnProperty("image_tag"))
                            return void e(new Error("cannot import 'image_tag'"));
                        var k = j.image_tag;
                        b.setVariable("image_tag", k), h += "\n\n";
                        var l;
                        if (l = d.contextOrFrameLookup(b, c, "data"), c.set("editorials", l, !0), c.parent || (b.setVariable("editorials", l), b.addExport("editorials")), h += "\n\n", d.contextOrFrameLookup(b, c, "editorials")) {
                            h += "\n    ";
                            var m;
                            f = 12, g = 59, m = d.callWrap(d.memberLookup(d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "experiments", a.autoesc), "activate_and_persist_experiment", a.autoesc), 'context["experiment"]["activate_a"]', ["editorial_category"]), c.set("_temp_do", m, !0), c.parent || b.setVariable("_temp_do", m), h += "\n    <h2>", h += d.suppressValue((f = 13, g = 10, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Recent Editorials"])), a.autoesc), h += "</h2>\n\n    <ul>\n        ", c = c.push();
                            var n = d.contextOrFrameLookup(b, c, "editorials");
                            if (n)
                                for (var o = n.length, p = 0; p < n.length; p++) {
                                    var q = n[p];
                                    c.set("editorial", q), c.set("loop.index", p + 1), c.set("loop.index0", p), c.set("loop.revindex", o - p), c.set("loop.revindex0", o - p - 1), c.set("loop.first", 0 === p), c.set("loop.last", p === o - 1), c.set("loop.length", o), h += "\n            <li>\n                ";
                                    var r;
                                    f = 18, g = 42, r = d.callWrap(d.memberLookup(q, "get", a.autoesc), 'editorial["get"]', ["title"]), c.set("title", r, !0), c.parent || (b.setVariable("title", r), b.addExport("title")), h += "\n                ";
                                    var s;
                                    if (f = 19, g = 45, s = d.callWrap(d.memberLookup(q, "get", a.autoesc), 'editorial["get"]', ["content_header"]), c.set("subtitle", s, !0), c.parent || (b.setVariable("subtitle", s), b.addExport("subtitle")), h += "\n                ", "MESSAGE_WITH_PINS" == (f = 20, g = 33, d.callWrap(d.memberLookup(q, "get", a.autoesc), 'editorial["get"]', ["email_type"])) && (f = 20, g = 88, d.callWrap(d.memberLookup(q, "get", a.autoesc), 'editorial["get"]', ["pins"]))) {
                                        h += "\n                    ";
                                        var t;
                                        f = 21, g = 98, t = d.callWrap(d.memberLookup((f = 21, g = 81, d.callWrap(d.memberLookup((f = 21, g = 63, d.callWrap(d.memberLookup(d.memberLookup((f = 21, g = 48, d.callWrap(d.memberLookup(q, "get", a.autoesc), 'editorial["get"]', ["pins"])), 0, a.autoesc), "get", a.autoesc), 'the return value of (editorial["get"])["0"]["get"]', ["images", {}
                                        ])), "get", a.autoesc), 'the return value of (the return value of (editorial["get"])["0"]["get"])["get"]', ["30x30", {}
                                        ])), "get", a.autoesc), 'the return value of (the return value of (the return value of (editorial["get"])["0"]["get"])["get"])["get"]', ["url"]), c.set("img_src", t, !0), c.parent || (b.setVariable("img_src", t), b.addExport("img_src")), h += "\n                "
                                    } else if ("MESSAGE_WITH_BOARDS" == (f = 22, g = 35, d.callWrap(d.memberLookup(q, "get", a.autoesc), 'editorial["get"]', ["email_type"])) && (f = 22, g = 92, d.callWrap(d.memberLookup(q, "get", a.autoesc), 'editorial["get"]', ["boards"]))) {
                                        h += "\n                    ";
                                        var u;
                                        f = 23, g = 106, u = d.callWrap(d.memberLookup((f = 23, g = 89, d.callWrap(d.memberLookup((f = 23, g = 65, d.callWrap(d.memberLookup(d.memberLookup((f = 23, g = 48, d.callWrap(d.memberLookup(q, "get", a.autoesc), 'editorial["get"]', ["boards"])), 0, a.autoesc), "get", a.autoesc), 'the return value of (editorial["get"])["0"]["get"]', ["cover_images", {}
                                        ])), "get", a.autoesc), 'the return value of (the return value of (editorial["get"])["0"]["get"])["get"]', ["30x30", {}
                                        ])), "get", a.autoesc), 'the return value of (the return value of (the return value of (editorial["get"])["0"]["get"])["get"])["get"]', ["url"]), c.set("img_src", u, !0), c.parent || (b.setVariable("img_src", u), b.addExport("img_src")), h += "\n                "
                                    }
                                    h += '\n\n                <a href="/editorial', h += d.suppressValue((f = 26, g = 49, d.callWrap(d.memberLookup(q, "get", a.autoesc), 'editorial["get"]', ["id"])), a.autoesc), h += '" title="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "title"), a.autoesc), h += '">\n                    <span class="thumbImageWrapper">\n                        ', h += d.suppressValue((f = 28, g = 34, d.callWrap(k, "image_tag", [d.makeKeywordArgs({
                                        src: d.contextOrFrameLookup(b, c, "img_src"),
                                        alt: d.contextOrFrameLookup(b, c, "subtitle")
                                    })])), a.autoesc), h += '\n                    </span>\n                    <span class="itemTitle">', h += d.suppressValue(d.contextOrFrameLookup(b, c, "title"), a.autoesc), h += "</span>\n                </a>\n            </li>\n        "
                                }
                            c = c.pop(), h += "\n    </ul>\n"
                        }
                        h += "\n", e(null, h)
                    })
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/RelatedItemsSlideshow/RelatedItemsSlideshow.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                if (h += "\n", f = 9, g = 15, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["seed_image"]) && (h += '\n    <img src="', h += d.suppressValue((f = 10, g = 44, d.callWrap(d.memberLookup((f = 10, g = 26, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["seed_image"])), "get", a.autoesc), 'the return value of (options["get"])["get"]', ["url"])), a.autoesc), h += '">\n'), h += "\n\n", h += "\n", h += "\n", 5 == a.getFilter("length").call(b, d.contextOrFrameLookup(b, c, "data"))) {
                    h += "\n    ", h += d.suppressValue((f = 16, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["animate"])), a.autoesc), h += "\n\n    ", c = c.push();
                    var i = d.contextOrFrameLookup(b, c, "data");
                    if (i)
                        for (var j = i.length, k = 0; k < i.length; k++) {
                            var l = i[k];
                            c.set("item", l), c.set("loop.index", k + 1), c.set("loop.index0", k), c.set("loop.revindex", j - k), c.set("loop.revindex0", j - k - 1), c.set("loop.first", 0 === k), c.set("loop.last", k === j - 1), c.set("loop.length", j), h += "\n        ";
                            var m;
                            f = 19, g = 36, m = d.callWrap(d.memberLookup(d.memberLookup(l, "images", a.autoesc), "get", a.autoesc), 'item["images"]["get"]', ["736x", {}
                            ]), c.set("image", m, !0), c.parent || (b.setVariable("image", m), b.addExport("image")), h += '\n        <img src="', h += d.suppressValue((f = 20, g = 28, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "image"), "get", a.autoesc), 'image["get"]', ["url"])), a.autoesc), h += '">\n    '
                        }
                    c = c.pop(), h += "\n"
                }
                h += "\n", e(null, h)
            } catch (n) {
                e(d.handleError(n, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/RemoveUserFromBoardDialog/RemoveUserFromBoardDialog.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += d.suppressValue((f = 0, g = 1, d.callWrap(d.contextOrFrameLookup(b, c, "base"), "base", ["ConfirmDialog"])), a.autoesc), a.getTemplate("app/common/modules/ConfirmDialog/ConfirmDialog.nunjucks", !0, function(f, g) {
                    if (f)
                        return void e(f);
                    for (var i in g.blocks)
                        b.addBlock(i, g.blocks[i]);
                    h += "\n", g.rootRenderFunc(a, b, c, d, e)
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/SearchInputToken/SearchInputToken.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n\n\n";
                var i;
                f = 8, g = 23, i = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["term"]), c.set("term", i, !0), c.parent || (b.setVariable("term", i), b.addExport("term")), h += '\n\n<div class="tokenContainer">\n    <span data-element-type="', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "SEARCH_BOX_TEXT_INPUT", a.autoesc), a.autoesc), h += '">', h += d.suppressValue(d.contextOrFrameLookup(b, c, "term"), a.autoesc), h += '</span>\n    <span data-element-type="', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "SEARCH_TOKEN", a.autoesc), a.autoesc), h += '" class="remove"><em></em></span>\n</div>\n', e(null, h)
            } catch (j) {
                e(d.handleError(j, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/SearchScopeBar/SearchScopeBar.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n";
                var i;
                f = 12, g = 24, i = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["query"]), c.set("query", i, !0), c.parent || (b.setVariable("query", i), b.addExport("query")), h += "\n";
                var j;
                f = 13, g = 24, j = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["scope"]), c.set("scope", j, !0), c.parent || (b.setVariable("scope", j), b.addExport("scope")), h += "\n";
                var k;
                k = a.getFilter("urlencode").call(b, d.contextOrFrameLookup(b, c, "query")), c.set("query_encoded", k, !0), c.parent || (b.setVariable("query_encoded", k), b.addExport("query_encoded")), h += '\n\n<div class="centeredWithinWrapper">\n    ', h += d.suppressValue((f = 17, g = 11, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["NavigateButton", d.makeKeywordArgs({
                    id: "navAllPins",
                    options: {
                        class_name: "leftRounded navScopeBtn" + ("pins" == d.contextOrFrameLookup(b, c, "scope") && " selected" || ""),
                        text: (f = 21, g = 21, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["All Pins"])),
                        element_type: "a",
                        url: "/search/pins/?q=" + d.contextOrFrameLookup(b, c, "query_encoded"),
                        force_refresh: !0,
                        rounded: !1
                    }
                })])), a.autoesc), h += "\n\n    ", h += d.suppressValue((f = 29, g = 11, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["NavigateButton", d.makeKeywordArgs({
                    id: "navMyPins",
                    options: {
                        class_name: "navScopeBtn" + ("my_pins" == d.contextOrFrameLookup(b, c, "scope") && " selected" || ""),
                        text: (f = 33, g = 21, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Your Pins"])),
                        element_type: "a",
                        url: "/search/my_pins/?q=" + d.contextOrFrameLookup(b, c, "query_encoded"),
                        force_refresh: !0,
                        rounded: !1
                    }
                })])), a.autoesc), h += "\n\n    ", h += d.suppressValue((f = 41, g = 11, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["NavigateButton", d.makeKeywordArgs({
                    id: "navBoards",
                    options: {
                        class_name: "navScopeBtn" + ("boards" == d.contextOrFrameLookup(b, c, "scope") && " selected" || ""),
                        text: (f = 45, g = 21, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Boards"])),
                        element_type: "a",
                        url: "/search/boards/?q=" + d.contextOrFrameLookup(b, c, "query_encoded"),
                        force_refresh: !0,
                        rounded: !1
                    }
                })])), a.autoesc), h += "\n\n    ", h += d.suppressValue((f = 53, g = 11, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["NavigateButton", d.makeKeywordArgs({
                    id: "navPinners",
                    options: {
                        class_name: "rightRounded navScopeBtn" + ("people" == d.contextOrFrameLookup(b, c, "scope") && " selected" || ""),
                        text: (f = 57, g = 21, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Pinners"])),
                        element_type: "a",
                        url: "/search/people/?q=" + d.contextOrFrameLookup(b, c, "query_encoded"),
                        force_refresh: !0,
                        rounded: !1
                    }
                })])), a.autoesc), h += "\n</div>\n", e(null, h)
            } catch (l) {
                e(d.handleError(l, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/SendBoard/SendBoard.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n", h += d.suppressValue((f = 11, g = 1, d.callWrap(d.contextOrFrameLookup(b, c, "base"), "base", ["SendObjectBase"])), a.autoesc), a.getTemplate("app/desktop/modules/SendObjectBase/SendObjectBase.nunjucks", !0, function(i, j) {
                    if (i)
                        return void e(i);
                    for (var k in j.blocks)
                        b.addBlock(k, j.blocks[k]);
                    h += "\n\n", "newBoardHeaderStyle" == (f = 13, g = 15, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["class_name"])) && (h += "\n    ", h += d.suppressValue((f = 14, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["newBoardHeaderStyle"])), a.autoesc), h += "\n"), h += "\n\n", h += "\n", j.rootRenderFunc(a, b, c, d, e)
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function b(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n    ", h += d.suppressValue((f = 18, g = 6, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Send this Board"])), a.autoesc), h += "\n", e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            b_title: b,
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/SendInvitationEmail/SendInvitationEmail.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n";
                var i;
                f = 9, g = 29, i = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["text_value", ""]), c.set("text_value", i, !0), c.parent || (b.setVariable("text_value", i), b.addExport("text_value")), h += "\n";
                var j;
                j = d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "is_valid_email", a.autoesc) ||!1, c.set("is_valid_email", j, !0), c.parent || (b.setVariable("is_valid_email", j), b.addExport("is_valid_email")), h += '\n\n<div class="sendInvitationEmail">\n    <a ', d.contextOrFrameLookup(b, c, "is_valid_email") || (h += 'class= "unclickable"'), h += '>\n        <div class="left">\n            ', d.contextOrFrameLookup(b, c, "is_valid_email") ? (h += '\n                <div class="icon">', h += d.suppressValue(a.getFilter("upper").call(b, a.getFilter("first").call(b, d.contextOrFrameLookup(b, c, "text_value"))), a.autoesc), h += "</div>\n            ") : h += '\n                <div class="icon typingEmail">\n                    <em></em>\n                </div>\n            ', h += '\n        </div>\n        <div class="right">\n            ';
                var k;
                if (k = a.getFilter("named_format").call(b, (f = 24, g = 31, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Email to {{ text_value }}"])), {
                    text_value: d.contextOrFrameLookup(b, c, "text_value")
                }), c.set("title_text", k, !0), c.parent || (b.setVariable("title_text", k), b.addExport("title_text")), h += "\n            ", d.contextOrFrameLookup(b, c, "is_valid_email")) {
                    h += "\n                ";
                    var l;
                    f = 26, g = 38, l = d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Click to send"]), c.set("subtitle_text", l, !0), c.parent || (b.setVariable("subtitle_text", l), b.addExport("subtitle_text")), h += "\n            "
                } else {
                    h += "\n                ";
                    var m;
                    f = 28, g = 38, m = d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Keep typing the email address"]), c.set("subtitle_text", m, !0), c.parent || (b.setVariable("subtitle_text", m), b.addExport("subtitle_text")), h += "\n            "
                }
                h += '\n            <h4 class="title">', h += d.suppressValue(d.contextOrFrameLookup(b, c, "title_text"), a.autoesc), h += '</h4>\n            <p class="subtitle">', h += d.suppressValue(d.contextOrFrameLookup(b, c, "subtitle_text"), a.autoesc), h += "</p>\n        </div>\n    </a>\n</div>\n", e(null, h)
            } catch (n) {
                e(d.handleError(n, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/SendObjectBase/SendObjectBase.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n\n", h += d.suppressValue((f = 8, g = 5, d.callWrap(d.contextOrFrameLookup(b, c, "attr"), "attr", [{
                    "data-component-type": d.memberLookup(d.contextOrFrameLookup(b, c, "ComponentType"), "SEND_OBJECT", a.autoesc)
                }
                ])), a.autoesc), h += '\n\n<div class="sendObjectFilter">\n    <textarea class="message" placeholder="', h += d.suppressValue((f = 11, g = 45, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Add a message?"])), a.autoesc), h += '"></textarea>\n    ', h += d.suppressValue((f = 12, g = 11, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["ui.SocialTypeaheadField", d.makeKeywordArgs({
                    id: "typeaheadField",
                    options: {
                        name: "name",
                        tags: "pinners_and_email_contacts",
                        view_type: "userCircleSelect",
                        autofocus: !0,
                        search_delay: 0,
                        preserve_typeahead: !0,
                        bypass_maxheight: !0,
                        bypass_lru_cache: !0,
                        template: "user_circle_avatar",
                        prefetch_on_focus: !0,
                        prevent_default_on_enter: !0,
                        class_name: "searchBox",
                        placeholder: (f = 27, g = 28, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Search"])),
                        autocomplete: "off",
                        allow_email: !0
                    }
                })])), a.autoesc), h += '\n\n    <div class="spinner"></div>\n    ', h += d.suppressValue((f = 34, g = 11, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["ConversationsList", d.makeKeywordArgs({
                    id: "conversationsList",
                    options: {
                        hide_system_message: !0,
                        list_item_options: {
                            show_is_pinner: !0,
                            log_element_type: d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "CONVERSATION_LIST_ITEM", a.autoesc)
                        }
                    },
                    resource: (f = 43, g = 32, d.callWrap(d.contextOrFrameLookup(b, c, "create_resource"), "create_resource", ["ConversationsResource"]))
                })])), a.autoesc), h += "\n</div>\n", e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/SendPin/SendPin.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n", h += d.suppressValue((f = 7, g = 1, d.callWrap(d.contextOrFrameLookup(b, c, "base"), "base", ["SendObjectBase"])), a.autoesc), a.getTemplate("app/desktop/modules/SendObjectBase/SendObjectBase.nunjucks", !0, function(f, g) {
                    if (f)
                        return void e(f);
                    for (var i in g.blocks)
                        b.addBlock(i, g.blocks[i]);
                    h += "\n\n", h += "\n", g.rootRenderFunc(a, b, c, d, e)
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function b(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n    ", h += d.suppressValue((f = 10, g = 6, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Send this Pin"])), a.autoesc), h += "\n", e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            b_title: b,
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/SendPinner/SendPinner.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n", h += d.suppressValue((f = 11, g = 1, d.callWrap(d.contextOrFrameLookup(b, c, "base"), "base", ["SendObjectBase"])), a.autoesc), a.getTemplate("app/desktop/modules/SendObjectBase/SendObjectBase.nunjucks", !0, function(i, j) {
                    if (i)
                        return void e(i);
                    for (var k in j.blocks)
                        b.addBlock(k, j.blocks[k]);
                    h += "\n\n", "newBoardHeaderStyle" == (f = 13, g = 15, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["class_name"])) && (h += "\n    ", h += d.suppressValue((f = 14, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["newBoardHeaderStyle"])), a.autoesc), h += "\n"), h += "\n\n", h += "\n", j.rootRenderFunc(a, b, c, d, e)
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function b(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n    ", h += d.suppressValue((f = 18, g = 6, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Send this Pinner"])), a.autoesc), h += "\n", e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            b_title: b,
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/UrlPreview/UrlPreview.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                if (h += "\n\n", f = 2, g = 12, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "data"), "get", a.autoesc), 'data["get"]', ["imgsrc"])) {
                    h += "\n    ";
                    var i;
                    f = 3, g = 26, i = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "data"), "get", a.autoesc), 'data["get"]', ["imgsrc"]), c.set("imgsrc", i, !0), c.parent || (b.setVariable("imgsrc", i), b.addExport("imgsrc")), h += "\n"
                } else if (f = 4, g = 14, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "data"), "get", a.autoesc), 'data["get"]', ["images"])) {
                    h += "\n    ";
                    var j;
                    f = 5, g = 55, j = d.callWrap(d.memberLookup((f = 5, g = 40, d.callWrap(d.memberLookup((f = 5, g = 26, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "data"), "get", a.autoesc), 'data["get"]', ["images"])), "get", a.autoesc), 'the return value of (data["get"])["get"]', ["136x136"])), "get", a.autoesc), 'the return value of (the return value of (data["get"])["get"])["get"]', ["url"]), c.set("imgsrc", j, !0), c.parent || (b.setVariable("imgsrc", j), b.addExport("imgsrc")), h += "\n"
                }
                h += "\n";
                var k;
                f = 7, g = 20, k = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "data"), "get", a.autoesc), 'data["get"]', ["url"]), c.set("link", k, !0), c.parent || (b.setVariable("link", k), b.addExport("link")), h += '\n\n<div class="imageBox">\n    ', d.contextOrFrameLookup(b, c, "imgsrc") && (h += '\n        <a href="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "link"), a.autoesc), h += '" rel="nofollow">\n            <img class="attachmentImage" src="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "imgsrc"), a.autoesc), h += '" />\n            <div class="borderMask"></div>\n        </a>\n    '), h += '\n</div>\n<div class="detailBox', d.contextOrFrameLookup(b, c, "imgsrc") && (h += " hasImage"), h += '">\n    <div class="attachmentTitle">\n        <a href="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "link"), a.autoesc), h += '" rel="nofollow">\n            ', h += d.suppressValue((f = 20, g = 20, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "data"), "get", a.autoesc), 'data["get"]', ["title"])), a.autoesc), h += '\n        </a>\n    </div>\n    <div class="attachmentDesc">', h += d.suppressValue((f = 23, g = 40, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "data"), "get", a.autoesc), 'data["get"]', ["description"])), a.autoesc), h += '</div>\n    <div class="attachmentDomain">\n        <a class="sitename" href="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "link"), a.autoesc), h += '" rel="nofollow">\n            ', h += d.suppressValue((f = 26, g = 21, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "data"), "get", a.autoesc), 'data["get"]', ["site_name"])), a.autoesc), h += "\n        </a>\n    </div>\n</div>\n", e(null, h)
            } catch (l) {
                e(d.handleError(l, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/User/User.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n", h += d.suppressValue((f = 11, g = 1, d.callWrap(d.contextOrFrameLookup(b, c, "base"), "base", ["UserBase"])), a.autoesc), a.getTemplate("app/common/modules/UserBase/UserBase.nunjucks", !0, function(i, j) {
                    if (i)
                        return void e(i);
                    for (var k in j.blocks)
                        b.addBlock(k, j.blocks[k]);
                    h += "\n", h += "\n\n", a.getTemplate("templates/macros/image.nunjucks", function(i, k) {
                        return i ? void e(i) : void k.getExported(function(i, k) {
                            if (i)
                                return void e(i);
                            if (!k.hasOwnProperty("image_tag"))
                                return void e(new Error("cannot import 'image_tag'"));
                            var l = k.image_tag;
                            b.setVariable("image_tag", l), h += "\n", a.getTemplate("templates/macros/search_debug.nunjucks", function(i, k) {
                                return i ? void e(i) : void k.getExported(function(i, k) {
                                    if (i)
                                        return void e(i);
                                    if (!k.hasOwnProperty("search_debug"))
                                        return void e(new Error("cannot import 'search_debug'"));
                                    var l = k.search_debug;
                                    b.setVariable("search_debug", l), h += "\n\n";
                                    var m;
                                    m = d.contextOrFrameLookup(b, c, "data") ? d.contextOrFrameLookup(b, c, "data") : {}, c.set("user", m, !0), c.parent || (b.setVariable("user", m), b.addExport("user")), h += "\n";
                                    var n;
                                    f = 33, g = 24, n = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "get", a.autoesc), 'user["get"]', ["username", ""]), c.set("username", n, !0), c.parent || (b.setVariable("username", n), b.addExport("username")), h += "\n";
                                    var o;
                                    o = "/" + d.contextOrFrameLookup(b, c, "username") + "/", c.set("profile_url", o, !0), c.parent || (b.setVariable("profile_url", o), b.addExport("profile_url")), h += "\n";
                                    var p;
                                    f = 35, g = 24, p = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "get", a.autoesc), 'user["get"]', ["full_name", ""]), c.set("fullname", p, !0), c.parent || (b.setVariable("fullname", p), b.addExport("fullname")), h += "\n";
                                    var q;
                                    f = 36, g = 22, q = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["url", d.contextOrFrameLookup(b, c, "profile_url")]), c.set("url", q, !0), c.parent || (b.setVariable("url", q), b.addExport("url")), h += "\n\n", h += "\n\n", h += "\n\n", h += "\n\n", h += "\n\n", h += "\n\n", h += "\n\n", h += "\n\n", h += "\n\n", h += "\n", j.rootRenderFunc(a, b, c, d, e)
                                })
                            })
                        })
                    })
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function b(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n    ";
                var i;
                f = 39, g = 36, i = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["has_via"]) || (f = 39, g = 62, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["is_via"])), c.set("has_or_is_via", i, !0), c.parent || (b.setVariable("has_or_is_via", i), b.addExport("has_or_is_via")), h += "\n    ";
                var j;
                f = 40, g = 41, j = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["show_follow_button", !0]), c.set("show_follow_button", j, !0), c.parent || (b.setVariable("show_follow_button", j), b.addExport("show_follow_button")), h += "\n    ";
                var k;
                f = 41, g = 41, k = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["show_remove_button", !1]), c.set("show_remove_button", k, !0), c.parent || (b.setVariable("show_remove_button", k), b.addExport("show_remove_button")), h += "\n    ", d.contextOrFrameLookup(b, c, "has_or_is_via") && (h += "\n        ", h += d.suppressValue((f = 43, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["has_via"])), a.autoesc), h += "\n    "), h += "\n    ", d.contextOrFrameLookup(b, c, "show_follow_button") && d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "is_authenticated", a.autoesc) && (h += "\n        ", h += d.suppressValue((f = 46, g = 15, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["UserFollowButton", d.makeKeywordArgs({
                    options: {
                        user_id: (f = 48, g = 35, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "get", a.autoesc), 'user["get"]', ["id"])),
                        follow_class: "default",
                        followed: (f = 50, g = 36, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "get", a.autoesc), 'user["get"]', ["explicitly_followed_by_me"])),
                        log_element_type: d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "USER_FOLLOW", a.autoesc)
                    }
                })])), a.autoesc), h += "\n    "), h += "\n    ", d.contextOrFrameLookup(b, c, "show_remove_button") && (h += "\n        ", h += d.suppressValue((f = 56, g = 15, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                    id: "removeButton",
                    options: {
                        user_id: d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "id", a.autoesc),
                        text: (f = 60, g = 25, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Remove"])),
                        has_icon: !1,
                        color: "default",
                        size: "small"
                    }
                })])), a.autoesc), h += "\n    "), h += "\n", e(null, h)
            } catch (l) {
                e(d.handleError(l, f, g))
            }
        }
        function c(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n    ", c = c.push();
                var i = (f = 71, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "range"), "range", [4]));
                if (i)
                    for (var j = i.length, k = 0; k < i.length; k++) {
                        var l = i[k];
                        c.set("index", l), c.set("loop.index", k + 1), c.set("loop.index0", k), c.set("loop.revindex", j - k), c.set("loop.revindex0", j - k - 1), c.set("loop.first", 0 === k), c.set("loop.last", k === j - 1), c.set("loop.length", j), h += "\n        ";
                        var m;
                        m = l < d.contextOrFrameLookup(b, c, "num_thumbnails") && d.memberLookup(d.contextOrFrameLookup(b, c, "thumbnails"), l, a.autoesc) || "", c.set("thumb", m, !0), c.parent || (b.setVariable("thumb", m), b.addExport("thumb")), h += '\n        <span class="thumbContainer ', (1 == l || 3 == l) && (h += " rightWrap"), h += ' ">\n            <span class="hoverMask"></span>\n            ', d.contextOrFrameLookup(b, c, "thumb") ? (h += "\n                ", h += d.suppressValue((f = 76, g = 26, d.callWrap(d.contextOrFrameLookup(b, c, "image_tag"), "image_tag", [d.makeKeywordArgs({
                            src: d.contextOrFrameLookup(b, c, "thumb"),
                            class_name: "userPin thumb"
                        })])), a.autoesc), h += "\n            ") : h += '\n                <span class="userPin"></span>\n            ', h += "\n        </span>\n    "
                    }
                c = c.pop(), h += "\n", e(null, h)
            } catch (n) {
                e(d.handleError(n, f, g))
            }
        }
        function d(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += '\n    <p class="userStats">\n        ', h += d.suppressValue((f = 89, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "count_text"), "count_text", [(f = 89, g = 28, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "get", a.autoesc), 'user["get"]', ["pin_count"])), "pin", !0])), a.autoesc), h += "\n        &bull;\n        ", h += d.suppressValue((f = 91, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "count_text"), "count_text", [(f = 91, g = 28, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "get", a.autoesc), 'user["get"]', ["follower_count"])), "follower", !0])), a.autoesc), h += "\n    </p>\n", e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function e(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n    ", h += d.suppressValue((f = 96, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["small"])), a.autoesc), h += '\n    <div class="content">\n        <a href="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "url"), a.autoesc), h += '">\n            <span class="thumbImageWrapper">\n                    <img src="', h += d.suppressValue((f = 100, g = 39, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "get", a.autoesc), 'user["get"]', ["image_medium_url"])), a.autoesc), h += '"\n                    alt="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "fullname"), a.autoesc), h += '" />\n            </span>\n        </a>\n        <div class="contactUser">\n            <a href="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "url"), a.autoesc), h += '" class="contactUsername">', h += d.suppressValue(d.contextOrFrameLookup(b, c, "fullname"), a.autoesc), h += "</a>\n            <br>\n            ";
                var i;
                f = 107, g = 49, i = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["show_follow_button", !0]), c.set("show_follow_button", i, !0), c.parent || (b.setVariable("show_follow_button", i), b.addExport("show_follow_button")), h += "\n            ", h += d.suppressValue((f = 108, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["UserFollowButton", d.makeKeywordArgs({
                    id: "followButton",
                    options: {
                        user_id: (f = 111, g = 43, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "get", a.autoesc), 'user["get"]', ["id"])),
                        follow_class: "default",
                        borderless: !0,
                        followed: !1
                    }
                })])), a.autoesc), h += '\n        </div>\n        <i class="dismiss"></i>\n    </div>\n    <div class="contactConfirmation">\n        ';
                var j = d.makeMacro([], [], function(e) {
                    c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                    var h, i = "";
                    return h = {
                        first_name: (f = 121, g = 34, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "get", a.autoesc), 'user["get"]', ["first_name"]))
                    }, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 121, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 121, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Now following {{ first_name }}'s Pins!"])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                });
                b.setVariable("_doTranslation", j), h += d.suppressValue((f = 121, g = 9, d.callWrap(j, "_doTranslation", [])), a.autoesc), h += "\n    </div>\n", e(null, h)
            } catch (k) {
                e(d.handleError(k, f, g))
            }
        }
        function f(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n    ";
                var i;
                if (f = 128, g = 38, i = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["user_click_mask", !1]), c.set("user_click_mask", i, !0), c.parent || (b.setVariable("user_click_mask", i), b.addExport("user_click_mask")), h += "\n    ", d.contextOrFrameLookup(b, c, "user_click_mask")) {
                    h += '\n        <div class="wholeUserMask mask', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "id", a.autoesc), a.autoesc), h += '"\n                data-element-type="', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "USER_FOLLOW", a.autoesc), a.autoesc), h += '">\n            <div class="check">&nbsp;</div>\n            <div class="mask">&nbsp;</div>\n            <div class="mask">&nbsp;</div>\n            <span class="message">\n                <h4>', h += d.suppressValue((f = 136, g = 22, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Nice choice!"])), a.autoesc), h += "</h4>\n                <span>\n                    ";
                    var j = d.makeMacro([], [], function(e) {
                        c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                        var h, i = "";
                        return h = {}, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 138, g = 21, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 138, g = 21, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["This user's pins will now<br> show up on your home feed."])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                    });
                    b.setVariable("_doTranslation", j), h += d.suppressValue((f = 138, g = 21, d.callWrap(j, "_doTranslation", [])), a.autoesc), h += "\n                </span>\n            </span>\n        </div>\n    "
                }
                h += "\n\n    ", d.memberLookup(d.contextOrFrameLookup(b, c, "context"), "is_authenticated", a.autoesc) && (h += "\n        ", h += d.suppressValue((f = 148, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["draggable"])), a.autoesc), h += "\n    "), h += "\n", e(null, h)
            } catch (k) {
                e(d.handleError(k, f, g))
            }
        }
        function g(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n    ", b.getBlock("hover_mask")(a, b, c, d, function(f, g) {
                    return f ? void e(f) : (h += g, h += "\n\n    ", void b.getBlock("debug")(a, b, c, d, function(a, b) {
                        return a ? void e(a) : (h += b, h += "\n", void e(null, h))
                    }))
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function h(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += '\n        <span class="hoverMask"></span>\n    ', e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function i(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n        ", h += d.suppressValue((f = 158, g = 21, d.callWrap(d.contextOrFrameLookup(b, c, "search_debug"), "search_debug", [d.makeKeywordArgs({
                    data: d.contextOrFrameLookup(b, c, "user")
                })])), a.autoesc), h += "\n    ", e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function j(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n    ", h += d.suppressValue((f = 163, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "include_data"), "include_data", [!0])), a.autoesc), h += "\n    ";
                var i;
                f = 164, g = 29, i = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "get", a.autoesc), 'user["get"]', ["image_large_url", a.getFilter("cdn_version_url").call(b, "webapp/style/app/desktop/images/sendPinAvatar-76x.png")]), c.set("image_src", i, !0), c.parent || (b.setVariable("image_src", i), b.addExport("image_src")), h += '\n    <div class="userSelectImageWrapper">\n        ';
                var j;
                if (f = 167, g = 34, j = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "get", a.autoesc), 'user["get"]', ["first_name"]), c.set("first_name", j, !0), c.parent || (b.setVariable("first_name", j), b.addExport("first_name")), h += "\n        ", d.contextOrFrameLookup(b, c, "first_name")) {
                    h += "\n            ";
                    var k;
                    f = 169, g = 29, k = d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["%s's profile image"])%d.contextOrFrameLookup(b, c, "first_name"), c.set("alt_text", k, !0), c.parent || (b.setVariable("alt_text", k), b.addExport("alt_text")), h += '\n            <span class="hoverMask"></span>\n        '
                } else {
                    h += "\n            ", h += d.suppressValue((f = 172, g = 21, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["fakeUser"])), a.autoesc), h += "\n            ";
                    var l;
                    f = 173, g = 29, l = d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Profile image"]), c.set("alt_text", l, !0), c.parent || (b.setVariable("alt_text", l), b.addExport("alt_text")), h += "\n        "
                }
                h += '\n        <img src="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "image_src"), a.autoesc), h += '" alt="', h += d.suppressValue((f = 175, g = 38, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Profile image"])), a.autoesc), h += '" class="profileImage">\n    </div>\n    <p class="userName">\n        ', h += d.suppressValue((f = 178, g = 17, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "get", a.autoesc), 'user["get"]', ["first_name", (f = 178, g = 33, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Recent"]))])), a.autoesc), h += "\n    </p>\n", e(null, h)
            } catch (m) {
                e(d.handleError(m, f, g))
            }
        }
        function k(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n    ", h += d.suppressValue((f = 183, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "include_data"), "include_data", [!0])), a.autoesc), h += "\n    ";
                var i;
                f = 184, g = 29, i = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "get", a.autoesc), 'user["get"]', ["image_large_url", a.getFilter("cdn_version_url").call(b, "webapp/style/app/desktop/images/sendPinAvatar-76x.png")]), c.set("image_src", i, !0), c.parent || (b.setVariable("image_src", i), b.addExport("image_src")), h += "\n    ";
                var j;
                f = 186, g = 30, j = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "get", a.autoesc), 'user["get"]', ["first_name"]), c.set("first_name", j, !0), c.parent || (b.setVariable("first_name", j), b.addExport("first_name")), h += "\n    ";
                var k;
                f = 187, g = 29, k = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "get", a.autoesc), 'user["get"]', ["last_name"]), c.set("last_name", k, !0), c.parent || (b.setVariable("last_name", k), b.addExport("last_name")), h += '\n    <div class="profile">\n        <div class=\'selectCheck\'/>\n        <img src="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "image_src"), a.autoesc), h += '" alt="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "alt_text"), a.autoesc), h += '"\n             class="profileImage">\n            <div class="profileName">\n                ', d.contextOrFrameLookup(b, c, "first_name") && d.contextOrFrameLookup(b, c, "last_name") ? (h += "\n                    <p>\n                        ", h += d.suppressValue(d.contextOrFrameLookup(b, c, "first_name"), a.autoesc), h += "\n                    </p>\n                    <p>\n                        ", h += d.suppressValue(d.contextOrFrameLookup(b, c, "last_name"), a.autoesc), h += "\n                    </p>\n                ") : (h += "\n                    <p>\n                        ", h += d.suppressValue((f = 202, g = 33, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "get", a.autoesc), 'user["get"]', ["full_name", (f = 202, g = 55, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "get", a.autoesc), 'user["get"]', ["first_name", (f = 202, g = 71, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Recent"]))]))])), a.autoesc), h += "\n                    </p>\n                "), h += "\n            </div>\n    </div>\n", e(null, h)
            } catch (l) {
                e(d.handleError(l, f, g))
            }
        }
        function l(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n    ";
                var i;
                f = 210, g = 29, i = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "get", a.autoesc), 'user["get"]', ["image_large_url", a.getFilter("cdn_version_url").call(b, "webapp/style/app/desktop/images/sendPinAvatar-76x.png")]), c.set("image_src", i, !0), c.parent || (b.setVariable("image_src", i), b.addExport("image_src")), h += "\n    ";
                var j;
                f = 212, g = 30, j = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "get", a.autoesc), 'user["get"]', ["first_name"]), c.set("first_name", j, !0), c.parent || (b.setVariable("first_name", j), b.addExport("first_name")), h += "\n    ";
                var k;
                if (f = 213, g = 29, k = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "get", a.autoesc), 'user["get"]', ["last_name"]), c.set("last_name", k, !0), c.parent || (b.setVariable("last_name", k), b.addExport("last_name")), h += "\n\n    ", d.contextOrFrameLookup(b, c, "first_name")) {
                    h += "\n        ";
                    var l;
                    f = 216, g = 25, l = d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["%s's profile image"])%d.contextOrFrameLookup(b, c, "first_name"), c.set("alt_text", l, !0), c.parent || (b.setVariable("alt_text", l), b.addExport("alt_text")), h += "\n    "
                } else {
                    h += "\n        ", h += d.suppressValue((f = 218, g = 17, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["fakeUser"])), a.autoesc), h += "\n        ";
                    var m;
                    f = 219, g = 25, m = d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Profile image"]), c.set("alt_text", m, !0), c.parent || (b.setVariable("alt_text", m), b.addExport("alt_text")), h += "\n    "
                }
                h += "\n\n    ", h += d.suppressValue((f = 222, g = 11, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["UserFollowButton", d.makeKeywordArgs({
                    options: {
                        user_id: (f = 224, g = 31, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "get", a.autoesc), 'user["get"]', ["id"])),
                        follow_class: "default",
                        followed: (f = 226, g = 32, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "get", a.autoesc), 'user["get"]', ["explicitly_followed_by_me"])),
                        class_name: "userSelectFollow",
                        log_element_type: d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "USER_FOLLOW", a.autoesc)
                    }
                })])), a.autoesc), h += '\n    <img src="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "image_src"), a.autoesc), h += '" alt="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "alt_text"), a.autoesc), h += '"\n         class="profileImage" width="85px" height="85px">\n    <a class="profileLink" href="', h += d.suppressValue(d.contextOrFrameLookup(b, c, "profile_url"), a.autoesc), h += '">\n        <p class="firstName">\n            ', h += d.suppressValue((f = 235, g = 21, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "get", a.autoesc), 'user["get"]', ["first_name", ""])), a.autoesc), h += '\n        </p>\n        <p class="lastName">\n            ', h += d.suppressValue((f = 238, g = 21, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "get", a.autoesc), 'user["get"]', ["last_name", ""])), a.autoesc), h += '\n        </p>\n    </a>\n    <p class="numPins">', h += d.suppressValue((f = 241, g = 34, d.callWrap(d.contextOrFrameLookup(b, c, "count_text"), "count_text", [(f = 241, g = 43, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "get", a.autoesc), 'user["get"]', ["pin_count"])), "pin", !0])), a.autoesc), h += "</p>\n\n", e(null, h)
            } catch (n) {
                e(d.handleError(n, f, g))
            }
        }
        return {
            b_thumb_button: b,
            b_user_thumbs: c,
            b_pins_followers_count: d,
            b_follow_friends_item_view: e,
            b_user_add_class: f,
            b_grid_item_view: g,
            b_hover_mask: h,
            b_debug: i,
            b_user_select_view: j,
            b_user_checkable_select_view: k,
            b_user_select_follow_view: l,
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/UserEducationGuideDropdown/UserEducationGuideDropdown.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n";
                var i;
                if (f = 8, g = 25, i = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["guides"]), c.set("guides", i, !0), c.parent || (b.setVariable("guides", i), b.addExport("guides")), h += "\n\n", h += d.suppressValue((f = 10, g = 5, d.callWrap(d.contextOrFrameLookup(b, c, "attr"), "attr", [{
                    "data-component-type": d.memberLookup(d.contextOrFrameLookup(b, c, "ComponentType"), "USER_EDUCATION_DROPDOWN", a.autoesc)
                }
                ])), a.autoesc), h += "\n\n", 0 == a.getFilter("length").call(b, d.contextOrFrameLookup(b, c, "guides"))) {
                    h += "\n    ", h += d.suppressValue((f = 13, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", ["noGuides"])), a.autoesc), h += '\n    <div class="helpCenterText">\n        ';
                    var j = d.makeMacro([], [], function(e) {
                        c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                        var h, i = "";
                        return h = {}, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 15, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 15, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Need help with something? Check out our Help Center."])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                    });
                    b.setVariable("_doTranslation", j), h += d.suppressValue((f = 15, g = 9, d.callWrap(j, "_doTranslation", [])), a.autoesc), h += '\n    </div>\n    <a class="external" data-element-type="', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "HELP_CENTER_BUTTON", a.autoesc), a.autoesc), h += '" href="', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "settings"), "HELP_CENTER_URL", a.autoesc), a.autoesc), h += '">\n        ', h += d.suppressValue((f = 21, g = 15, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                        id: "helpCenterButton",
                        options: {
                            color: "primary",
                            text: (f = 25, g = 25, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Visit the Help Center"]))
                        }
                    })])), a.autoesc), h += "\n    </a>\n"
                } else {
                    h += '\n    <div class="guides">\n        ', c = c.push();
                    var k = d.contextOrFrameLookup(b, c, "guides");
                    if (k)
                        for (var l = k.length, m = 0; m < k.length; m++) {
                            var n = k[m];
                            c.set("guide", n), c.set("loop.index", m + 1), c.set("loop.index0", m), c.set("loop.revindex", l - m), c.set("loop.revindex0", l - m - 1), c.set("loop.first", 0 === m), c.set("loop.last", m === l - 1), c.set("loop.length", l), h += '\n            <div data-name="', h += d.suppressValue((f = 32, g = 38, d.callWrap(d.memberLookup(n, "get", a.autoesc), 'guide["get"]', ["tutorialName"])), a.autoesc), h += '" class="guide recommended">\n                <p class="title">', h += d.suppressValue((f = 33, g = 43, d.callWrap(d.memberLookup(n, "get", a.autoesc), 'guide["get"]', ["title"])), a.autoesc), h += '</h2>\n                <p class="subtitle">', h += d.suppressValue((f = 34, g = 46, d.callWrap(d.memberLookup(n, "get", a.autoesc), 'guide["get"]', ["subtitle"])), a.autoesc), h += '</p>\n                <p class="recommendedBadge">Recommended</p>\n            </div>\n        '
                        }
                    c = c.pop(), h += '\n    </div>\n\n    <a href="', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "settings"), "HELP_CENTER_URL", a.autoesc), a.autoesc), h += '" class="footer">\n        ';
                    var o = d.makeMacro([], [], function(e) {
                        c = c.push(), e = e || {}, e.hasOwnProperty("caller") && c.set("caller", e.caller);
                        var h, i = "";
                        return h = {}, c.set("__dict", h, !0), c.parent || b.setVariable("__dict", h), i += d.suppressValue((f = 41, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_interpolate"), "_interpolate", [(f = 41, g = 9, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Still stuck? Visit the <strong>Help Center</strong>"])), d.contextOrFrameLookup(b, c, "__dict")])), a.autoesc), c = c.pop(), new d.SafeString(i)
                    });
                    b.setVariable("_doTranslation", o), h += d.suppressValue((f = 41, g = 9, d.callWrap(o, "_doTranslation", [])), a.autoesc), h += "\n    </a>\n\n"
                }
                e(null, h)
            } catch (p) {
                e(d.handleError(p, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/UserEducationGuideStacked/UserEducationGuideStacked.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n", h += d.suppressValue((f = 8, g = 1, d.callWrap(d.contextOrFrameLookup(b, c, "base"), "base", ["UserEducationGuideStep"])), a.autoesc), a.getTemplate("app/desktop/modules/UserEducationGuideStep/UserEducationGuideStep.nunjucks", !0, function(i, j) {
                    if (i)
                        return void e(i);
                    for (var k in j.blocks)
                        b.addBlock(k, j.blocks[k]);
                    h += "\n\n";
                    var l;
                    f = 10, g = 32, l = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["stacked_cards", []]), c.set("stacked_cards", l, !0), c.parent || (b.setVariable("stacked_cards", l), b.addExport("stacked_cards")), h += "\n";
                    var m;
                    m = 10, c.set("max_steps", m, !0), c.parent || (b.setVariable("max_steps", m), b.addExport("max_steps")), h += "\n\n", h += "\n", j.rootRenderFunc(a, b, c, d, e)
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function b(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n    ";
                var i;
                i = 1, c.set("i", i, !0), c.parent || (b.setVariable("i", i), b.addExport("i")), h += "\n    ", c = c.push();
                var j = d.contextOrFrameLookup(b, c, "stacked_cards");
                if (j)
                    for (var k = j.length, l = 0; l < j.length; l++) {
                        var m = j[l];
                        c.set("stacked_card", m), c.set("loop.index", l + 1), c.set("loop.index0", l), c.set("loop.revindex", k - l), c.set("loop.revindex0", k - l - 1), c.set("loop.first", 0 === l), c.set("loop.last", l === k - 1), c.set("loop.length", k), h += "\n        ";
                        var n;
                        n = d.contextOrFrameLookup(b, c, "i"), c.set("card_number", n, !0), c.parent || (b.setVariable("card_number", n), b.addExport("card_number")), h += "\n        ";
                        var o;
                        if (o = "step-" + a.getFilter("string").call(b, d.contextOrFrameLookup(b, c, "card_number")), c.set("step_class", o, !0), c.parent || (b.setVariable("step_class", o), b.addExport("step_class")), h += "\n        ", d.contextOrFrameLookup(b, c, "card_number") > d.contextOrFrameLookup(b, c, "max_steps")) {
                            h += "\n            ";
                            var p;
                            p = d.contextOrFrameLookup(b, c, "step_class") + " limitStep", c.set("step_class", p, !0), c.parent || (b.setVariable("step_class", p), b.addExport("step_class")), h += "\n        "
                        }
                        h += '\n        <div class="guideStepContent ', h += d.suppressValue(d.contextOrFrameLookup(b, c, "step_class"), a.autoesc), h += '">\n            <p class="educationText">\n                ', h += d.suppressValue(a.getFilter("safe").call(b, (f = 23, g = 33, d.callWrap(d.memberLookup(m, "get", a.autoesc), 'stacked_card["get"]', ["body_html"]))), a.autoesc), h += "\n            </p>\n            ", "endStep" == (f = 25, g = 32, d.callWrap(d.memberLookup(m, "get", a.autoesc), 'stacked_card["get"]', ["step_type"])) ? (h += "\n                ", h += d.suppressValue((f = 26, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                            id: "nextButton",
                            options: {
                                class_name: "tutorialButton next",
                                text: (f = 30, g = 33, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Done"]))
                            }
                        })])), a.autoesc), h += "\n            ") : "continueStep" == (f = 32, g = 34, d.callWrap(d.memberLookup(m, "get", a.autoesc), 'stacked_card["get"]', ["step_type"])) && (h += "\n                ", h += d.suppressValue((f = 33, g = 23, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                            id: "nextButton",
                            options: {
                                class_name: "tutorialButton next",
                                text: (f = 37, g = 33, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Next"]))
                            }
                        })])), a.autoesc), h += "\n            "), h += "\n        </div>\n        ";
                        var q;
                        q = d.contextOrFrameLookup(b, c, "i") + 1, c.set("i", q, !0), c.parent || (b.setVariable("i", q), b.addExport("i")), h += "\n    "
                    }
                c = c.pop(), h += "\n", e(null, h)
            } catch (r) {
                e(d.handleError(r, f, g))
            }
        }
        return {
            b_stacked: b,
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/UserEducationGuideStep/UserEducationGuideStep.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n";
                var i;
                f = 11, g = 28, i = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["step_type"]), c.set("step_type", i, !0), c.parent || (b.setVariable("step_type", i), b.addExport("step_type")), h += '\n\n<div class="cardPosition">\n    <div class="guideStepContent">\n        ', b.getBlock("caret")(a, b, c, d, function(i, j) {
                    return i ? void e(i) : (h += j, h += '\n        <p class="educationText">\n            ', h += d.suppressValue(a.getFilter("safe").call(b, (f = 17, g = 24, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["body_html"]))), a.autoesc), h += "\n        </p>\n        ", "beginningStep" == d.contextOrFrameLookup(b, c, "step_type") && (h += "\n            ", h += d.suppressValue((f = 20, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                        id: "dismissButton",
                        options: {
                            class_name: "tutorialButton later",
                            text: (f = 24, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Later"]))
                        }
                    })])), a.autoesc), h += "\n\n            ", h += d.suppressValue((f = 27, g = 19, d.callWrap(d.contextOrFrameLookup(b, c, "module"), "module", ["Button", d.makeKeywordArgs({
                        id: "nextButton",
                        options: {
                            class_name: "tutorialButton learnMore",
                            text: (f = 31, g = 29, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Learn more"]))
                        }
                    })])), a.autoesc), h += "\n        "), h += "\n    </div>\n    ", void b.getBlock("stacked")(a, b, c, d, function(a, b) {
                        return a ? void e(a) : (h += b, h += '\n</div>\n\n<div class="cardPositionAnimation cardPosition" />', void e(null, h))
                    }))
                })
            } catch (j) {
                e(d.handleError(j, f, g))
            }
        }
        function b(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function c(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            b_caret: b,
            b_stacked: c,
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/UserEducationGuideTooltip/UserEducationGuideTooltip.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n", h += d.suppressValue((f = 11, g = 1, d.callWrap(d.contextOrFrameLookup(b, c, "base"), "base", ["UserEducationGuideStep"])), a.autoesc), a.getTemplate("app/desktop/modules/UserEducationGuideStep/UserEducationGuideStep.nunjucks", !0, function(f, g) {
                    if (f)
                        return void e(f);
                    for (var i in g.blocks)
                        b.addBlock(i, g.blocks[i]);
                    h += "\n\n", g.rootRenderFunc(a, b, c, d, e)
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        function b(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += '\n    <div class="caret" />\n', e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            b_caret: b,
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/UserEducationTriggerCard/UserEducationTriggerCard.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n";
                var i;
                f = 8, g = 24, i = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["guide"]), c.set("guide", i, !0), c.parent || (b.setVariable("guide", i), b.addExport("guide")), h += '\n\n<div class="title">\n    ', h += d.suppressValue((f = 11, g = 14, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "guide"), "get", a.autoesc), 'guide["get"]', ["triggerCardTitle"])), a.autoesc), h += "\n</div>", e(null, h)
            } catch (j) {
                e(d.handleError(j, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/UserMenu/UserMenu.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n", h += d.suppressValue((f = 7, g = 5, d.callWrap(d.contextOrFrameLookup(b, c, "attr"), "attr", [{
                    "data-element-type": d.memberLookup(d.contextOrFrameLookup(b, c, "ElementType"), "PROFILE_BUTTON", a.autoesc)
                }
                ])), a.autoesc), h += "\n\n";
                var i;
                f = 9, g = 28, i = d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["view_type", ""]), c.set("view_type", i, !0), c.parent || (b.setVariable("view_type", i), b.addExport("view_type")), h += "\n", d.contextOrFrameLookup(b, c, "view_type") && (h += "\n    ", h += d.suppressValue((f = 11, g = 13, d.callWrap(d.contextOrFrameLookup(b, c, "addclass"), "addclass", [d.contextOrFrameLookup(b, c, "view_type")])), a.autoesc), h += "\n"), h += "\n\n";
                var j;
                j = d.contextOrFrameLookup(b, c, "data"), c.set("user", j, !0), c.parent || (b.setVariable("user", j), b.addExport("user")), h += "\n", h += d.suppressValue((f = 15, g = 11, d.callWrap(d.contextOrFrameLookup(b, c, "extra_data"), "extra_data", [{
                    userId: d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "id", a.autoesc)
                }
                ])), a.autoesc), h += "\n\n", f = 17, g = 15, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["show_caret"]) && (h += '\n    <span class="caret"></span>\n'), h += '\n<div class="usernameLink">\n    <span class="profileImage" style="background-image:url(', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "image_small_url", a.autoesc), a.autoesc), h += ')"></span>\n    <span class="profileName">', h += d.suppressValue(d.memberLookup(d.contextOrFrameLookup(b, c, "user"), "first_name", a.autoesc), a.autoesc), h += "</span>\n</div>\n", e(null, h)
            } catch (k) {
                e(d.handleError(k, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/VisualCropSearchButton/VisualCropSearchButton.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n", h += d.suppressValue((f = 5, g = 1, d.callWrap(d.contextOrFrameLookup(b, c, "base"), "base", ["Button"])), a.autoesc), a.getTemplate("app/common/modules/Button/Button.nunjucks", !0, function(f, g) {
                    if (f)
                        return void e(f);
                    for (var i in g.blocks)
                        b.addBlock(i, g.blocks[i]);
                    h += "\n", g.rootRenderFunc(a, b, c, d, e)
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/tutorials/BuildingHomeFeedSpinner/BuildingHomeFeedSpinner.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += '\n\n<span class="buildingFeedImg"></span>\n', f = 10, g = 15, d.callWrap(d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "get", a.autoesc), 'options["get"]', ["show_text"]) && (h += '\n    <h1 class="buildingTitle">', h += d.suppressValue((f = 11, g = 32, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["All done!"])), a.autoesc), h += '</h1>\n    <p class="buildingText">', h += d.suppressValue((f = 12, g = 30, d.callWrap(d.contextOrFrameLookup(b, c, "_"), "_", ["Sit tight, we're finding Pins for you right now..."])), a.autoesc), h += "</p>\n"), h += "\n", e(null, h)
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), function() {
    (window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["app/desktop/modules/ui/PinPreview/PinPreview.nunjucks"] = function() {
        function a(a, b, c, d, e) {
            var f = null, g = null, h = "";
            try {
                h += "\n\n", a.getTemplate("templates/macros/image.nunjucks", function(i, j) {
                    return i ? void e(i) : void j.getExported(function(i, j) {
                        if (i)
                            return void e(i);
                        if (!j.hasOwnProperty("image_tag"))
                            return void e(new Error("cannot import 'image_tag'"));
                        var k = j.image_tag;
                        b.setVariable("image_tag", k), h += "\n\n";
                        var l;
                        l = d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "image_url", a.autoesc), c.set("image_url", l, !0), c.parent || (b.setVariable("image_url", l), b.addExport("image_url")), h += "\n\n", h += d.suppressValue((f = 11, g = 10, d.callWrap(k, "image_tag", [d.makeKeywordArgs({
                            src: d.contextOrFrameLookup(b, c, "image_url"),
                            class_name: "pinPreviewImg"
                        })])), a.autoesc), h += "\n\n", h += "\n", d.memberLookup(d.contextOrFrameLookup(b, c, "options"), "is_video", a.autoesc) && (h += "\n    <div class='videoIndicator'></div>\n"), h += "\n", e(null, h)
                    })
                })
            } catch (i) {
                e(d.handleError(i, f, g))
            }
        }
        return {
            root: a
        }
    }()
}(), goog.provide("P.modules.AboutLinks"), goog.require("P.Module"), P.modules.AboutLinks = P.Module.extend({}), P.modules.AboutLinks.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ActiveConversations"), goog.require("P.Module"), P.modules.ActiveConversations = P.Module.extend({
    getConversationHeads: function() {
        return this.$(".ConversationHead")
    }
}), P.modules.ActiveConversations.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.AddressForm"), goog.require("P.Module"), P.modules.AddressForm = P.Module.extend({}), P.modules.AddressForm.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.AnimationPlaces"), goog.require("P.Module"), P.modules.AnimationPlaces = P.Module.extend({
    events: {
        "mouseenter .balloonLayer": "activateBalloon",
        "mouseleave .balloonLayer": "deactivateBalloon"
    },
    onContentReady: function() {
        this.$balloon = this.$(".balloon")
    },
    activateBalloon: function() {
        var a = this.$(".balloonAudio").get(0);
        a.play(), this.$balloon.hide()
    },
    deactivateBalloon: function() {
        this.$balloon.show()
    }
}), P.modules.AnimationPlaces.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.AnswerBase"), goog.require("P.Module");
var ANSWER_CLASS_LIKED = "liked";
P.modules.AnswerBase = P.Module.extend({
    onContentReady: function() {},
    _getLikeCountEl: function() {
        return this.$(".answerLikesCount")
    },
    _getLikeCount: function() {
        var a = $.trim(this._getLikeCountEl().text());
        return a ? parseInt(a, 10) : 0
    },
    _getReplyButton: function() {
        return this.getChildById("replyBtn")
    },
    _getReplies: function() {
        return this.getChildById("replies")
    },
    _setLikeCount: function(a) {
        this._getLikeCountEl().text(a || "")
    },
    _onAnswerLiked: function() {
        this._setLikeCount(this._getLikeCount() + 1), this._getLikeCountEl().addClass(ANSWER_CLASS_LIKED);
        var a = {
            name: "OldToast",
            options: {
                position_mode: "ANCHORED",
                position_point: "RIGHT_TOP",
                template: "like_answer_success",
                created_by_user_name: this.data.created_by_user.first_name
            }
        };
        P.loadModule(a).then(function(a) {
            this.addChild(a), a.render().then(function() {
                a.options.anchor = this.$el, a.positionModule()
            }.bind(this))
        }.bind(this))
    },
    _onAnswerUnliked: function() {
        this._setLikeCount(this._getLikeCount() - 1), this._getLikeCountEl().removeClass(ANSWER_CLASS_LIKED)
    }
}), P.modules.AnswerBase.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.AppUpsellPin"), goog.require("P.Module"), P.modules.AppUpsellPin = P.Module.extend({
    events: {
        "click .installApp": "showAppInstallModal",
        "click .imageContainer": "showAppInstallModal",
        "click .noThanksText": "dismissPin"
    },
    onContentReady: function() {
        this.placementId = Number(this.extraData && this.extraData.placement_id), this.experienceId = Number(this.extraData && this.extraData.experience_id), this.placedExperienceId = this.extraData && this.extraData.placed_experience_id, this.options.type = P.Experiences.ExperienceReverse[String(this.experienceId)], P.ExperienceManager.instance().viewPlacedExperienceId(this.placedExperienceId), P.trackRegisterAction("fake_pin_app_upsell_displayed")
    },
    showAppInstallModal: function() {
        var a = this, b = {
            name: "AppInstallModal",
            options: {
                placedExperienceId: a.placedExperienceId
            }
        };
        P.loadModule(b).then(function(a) {
            P.getModalManager().showInModal(a)
        })
    },
    dismissPin: function() {
        P.ExperienceManager.instance().completePlacedExperienceId(this.placedExperienceId), P.trackRegisterAction("app_install_pin_closed"), P.app.getChildById("mainModule").render()
    }
}), P.modules.AppUpsellPin.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.AutoFollow"), goog.require("P.Module"), P.modules.AutoFollow = P.Module.extend({
    events: {},
    onContentReady: function() {
        var a = {
            username: this.options.username,
            username_and_slug: this.options.username_and_slug
        }, b = "UserAutoFollowResource", c = "/" + this.options.username + "/", d = "user_auto_follow";
        this.options.username_and_slug && (b = "BoardAutoFollowResource", c = "/" + this.options.username_and_slug + "/", d = "board_auto_follow");
        var e = P.resourceFactory.create(b, a);
        e.callCreate().then(function() {
            P.trackGAEvent(d, P.CONST.GA_ACTION_SUCCESS)
        }, function() {
            P.trackGAEvent(d, P.CONST.GA_ACTION_ERROR)
        }).fin(function() {
            this.navigate(c + "?auto_follow=1")
        }.bind(this))
    }
}), P.modules.AutoFollow.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.AuxiliarySiteHeader"), goog.require("P.Module"), P.modules.AuxiliarySiteHeader = P.Module.extend({}), P.modules.AuxiliarySiteHeader.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.BackgroundImage"), goog.require("P.Module"), P.modules.BackgroundImage = P.Module.extend({
    setNewImage: function(a, b) {
        this.options.image_preload_bg = a, this.options.image_url = b, this.$el.css("background-color", this.options.image_preload_bg), this.background.removeClass("loaded"), this.holderImage.attr("src", this.options.image_url)
    },
    onContentReady: function() {
        this.holderImage = this.$(".holderImage"), this.background = this.$(".background"), this.holderImage.load(this.onImageLoaded.bind(this)), this.setNewImage(this.options.image_preload_bg, this.options.image_url)
    },
    onImageLoaded: function() {
        this.background.css("background-image", "url('" + this.options.image_url + "')"), setTimeout(function() {
            this.background.addClass("loaded")
        }.bind(this), 100)
    },
    setActive: function(a) {
        this.$el.toggleClass("active", a)
    }
}), P.modules.BackgroundImage.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.BoardCollaboratorInvitesBase"), goog.require("P.Module"), P.modules.BoardCollaboratorInvitesBase = P.Module.extend({
    onCreated: function() {
        this.childListen(P.CONST.EVENT_INVITE_USER, this.onChildInviteUser), this.childListen(P.CONST.EVENT_INVITE_EMAIL, this.onChildInviteEmail)
    },
    onInviteAdded: function() {},
    onChildInviteUser: function(a) {
        var b, c = this.getChildById("boardInviteForm");
        c.showLoading();
        var d = a.data.userId, e = a.data.type, f = this.getBoardId();
        "user" === e ? (b = P.resourceFactory.create("BoardInviteResource", {
            board_id: f,
            invited_user_id: d
        }), b.callCreate().then(function() {
            this.onInviteAdded(d, a.data.pending), c.clearTypeahead()
        }.bind(this)).fin(function() {
            c.hideLoading()
        })) : e === P.CONST.TYPEAHEAD_TYPE_FB_NON_PINNER ? (b = P.resourceFactory.create("BoardFacebookInviteResource", {
            board_id: f
        }), b.callGet({
            showError: !1
        }).then(function(a) {
            var e = a.resource_response.data;
            c.hideLoading(), P.FacebookDialog.open({
                type: "send",
                path: e.url,
                to: d,
                callback: function(a) {
                    a && a.success && (b = P.resourceFactory.create("BoardFacebookInviteResource", {
                        board_id: this.getBoardId(),
                        invite_code: e.invite_code
                    }), b.callUpdate())
                }.bind(this)
            })
        }.bind(this), function(a) {
            c.hideLoading(), P.showError(a.message)
        })) : this._inviteEmail(d)
    },
    _inviteEmail: function(a) {
        var b = this.getChildById("boardInviteForm"), c = {
            board_id: this.getBoardId(),
            emails: [a]
        }, d = P.resourceFactory.create("BoardEmailInviteResource", c);
        d.callCreate().then(function() {
            b.clearTypeahead();
            var c = P.string.format(P.string.common.successInviteSentToEmail, {
                email: a
            }), d = $("<div class='alert'>" + c + "</div>").hide();
            this.insertAfterModule(d, b), d.fadeIn(function() {
                d.delay(5e3).fadeOut(function() {
                    d.remove()
                })
            })
        }.bind(this)).fin(function() {
            b.hideLoading()
        })
    },
    getBoardId: function() {
        return this.resource.options.board_id
    },
    onChildInviteEmail: function(a) {
        var b = this.getChildById("boardInviteForm");
        b.showLoading();
        var c = a.data.email;
        this._inviteEmail(c)
    }
}), P.modules.BoardCollaboratorInvitesBase.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.BoardCollaboratorsBase"), goog.require("P.Module"), P.modules.BoardCollaboratorsBase = P.Module.extend({
    events: {}
}), P.modules.BoardCollaboratorsBase.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.BoardIcons"), goog.require("P.Module"), P.modules.BoardIcons = P.Module.extend({
    setLightColor: function(a) {
        this.$el.toggleClass("light", a)
    }
}), P.modules.BoardIcons.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/BoardIcons/BoardIcons.nunjucks"), goog.provide("P.modules.BoardInviteBase"), goog.require("P.Module");
var showSuccessMs = 5e3;
P.modules.BoardInviteBase = P.Module.extend({
    onContentReady: function() {
        this.declineButton = this.getChildById("declineButton"), this.removeButton = this.getChildById("removeButton"), this.acceptButton = this.getChildById("acceptButton"), this.approveButton = this.getChildById("approveButton"), this.declineButton && this.listen(this.declineButton, P.CONST.EVENT_BUTTON_CLICK, this.onClickDecline), this.removeButton && this.listen(this.removeButton, P.CONST.EVENT_BUTTON_CLICK, this.onClickRemove), this.acceptButton && this.listen(this.acceptButton, P.CONST.EVENT_BUTTON_CLICK, this.onClickAccept), this.approveButton && this.listen(this.approveButton, P.CONST.EVENT_BUTTON_CLICK, this.onClickApprove)
    },
    getConfirmBoardInvite: function() {
        return "boardEdit" === this.options.view_type
    },
    deleteBoardInvite: function(a) {
        var b, c = this._getCurrentUserIsInvitedUser();
        b = c ? "collaborator_decline_invite" : "collaborator_delete_invite", P.trackGAEvent(b, P.CONST.GA_ACTION_CLICK), this.removeButton && this.removeButton.showLoading();
        var d=!1;
        if (a) {
            var e = a.data.formData;
            d = e && e.ban
        }
        var f = this._getRemoveResource(d);
        f.callDelete({
            showError: !1
        }).then(function() {
            P.trackGAEvent(b, P.CONST.GA_ACTION_SUCCESS);
            var a = this.data.board.id;
            this.fadeOut(function() {
                this.destroy(), P.pubsub.publish(a, P.CONST.PUBSUB_TOPIC_BOARD_WRITE_ACCESS_UPDATED), d && this.extraData.has_delete_permission && P.pubsub.publish(a, P.CONST.PUBSUB_TOPIC_BOARD_BANNED_COLLABORATOR)
            }.bind(this)), c && (P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_CURRENT_USER, P.CONST.PUBSUB_TOPIC_BOARD_REMOVED_COLLABORATOR_SELF), P.pubsub.publish(a, P.CONST.PUBSUB_TOPIC_BOARD_REMOVED_COLLABORATOR_SELF))
        }.bind(this), function() {
            P.trackGAEvent(b, P.CONST.GA_ACTION_ERROR)
        }).fin(function() {
            this.removeButton.hideLoading()
        }.bind(this))
    },
    onClickDecline: function() {},
    onClickRemove: function() {},
    onClickAccept: function() {
        var a = "collaborator_invite_accept";
        P.trackGAEvent(a, P.CONST.GA_ACTION_CLICK), this.acceptButton && this.acceptButton.showLoading();
        var b = P.resourceFactory.clone(this.resource);
        b.callUpdate().then(function() {
            P.trackGAEvent(a, P.CONST.GA_ACTION_SUCCESS);
            var b = this.$(".pending"), c = this.$(".success");
            if (this.data.board) {
                var d = this.data.board.id;
                P.pubsub.publish(d, P.CONST.PUBSUB_TOPIC_BOARD_WRITE_ACCESS_UPDATED)
            }
            b.fadeOut(function() {
                c.fadeIn(function() {
                    c.delay(showSuccessMs).fadeOut(function() {
                        this.destroy()
                    }.bind(this))
                }.bind(this))
            }.bind(this))
        }.bind(this), function() {
            P.trackGAEvent(a, P.CONST.GA_ACTION_ERROR)
        }).fin(function() {
            this.acceptButton.hideLoading()
        }.bind(this))
    },
    onClickApprove: function() {
        var a = "collaborator_approve_invite", b = P.resourceFactory.create("BoardInviteResource", this.resource.copyOptions(!0));
        this.approveButton && this.approveButton.showLoading(), b.callUpdate().then(function() {
            P.trackGAEvent(a, P.CONST.GA_ACTION_SUCCESS), this.fadeOut(function() {
                this.destroy()
            }.bind(this));
            var b = this.data.board.id;
            P.pubsub.publish(b, P.CONST.PUBSUB_TOPIC_BOARD_APPROVED_COLLABORATOR_INVITE, {
                userId: this._getInviteUserId()
            })
        }.bind(this), function() {
            P.trackGAEvent(a, P.CONST.GA_ACTION_ERROR)
        }).fin(function() {
            this.approveButton.hideLoading()
        }.bind(this))
    },
    _getRemoveResource: function(a) {
        var b = this.extraData.accepted, c = b ? "BoardCollaboratorResource": "BoardInviteResource", d = this.resource.copyOptions(!0);
        b && this.getConfirmBoardInvite() && (d.ban = a);
        var e = P.resourceFactory.create(c, d);
        return e
    },
    _getInviteUserId: function() {
        return this.extraData.invitedUserId
    },
    _getCurrentUserIsInvitedUser: function() {
        return this.extraData.currentUserIsInvitedUser
    },
    _getInvitedUserFullName: function() {
        return this.extraData.invitedUserFullName
    }
}), P.modules.BoardInviteBase.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/BoardInviteBase/BoardInviteBase.nunjucks"), goog.provide("P.modules.BoardInviteForm"), goog.require("P.Module"), P.modules.BoardInviteForm = P.Module.extend({
    onCreated: function() {
        this.childListen(P.CONST.EVENT_ITEM_SELECTED, this.onChildItemSelected), this.childListen(P.CONST.EVENT_ENTER_PRESSED, this.onChildEnterPressed), this.childListen(P.CONST.EVENT_BUTTON_CLICK, this.onClickInviteButton), this.childListen(P.CONST.EVENT_CONTENT_CHANGED, this.onChildContentChanged), this.childListen(P.CONST.EVENT_CONTACT_SELECTED, this.onRecentContactSelected)
    },
    onChildItemSelected: function(a) {
        P.trackGAEvent("collaborator_invite_user", P.CONST.GA_ACTION_SELECT_SUBMIT);
        var b = a.data.item, c = b.attributes;
        this._inviteUser(c), a.stopPropagation()
    },
    onRecentContactSelected: function(a) {
        var b = a.data.type;
        "emailcontact" === b ? (P.trackGAEvent("collaborator_invite_email", P.CONST.GA_ACTION_SELECT_SUBMIT), this._inviteEmail(a.data.email_address)) : "user" === b && (P.trackGAEvent("collaborator_invite_user", P.CONST.GA_ACTION_SELECT_SUBMIT), this._inviteUser({
            type: a.data.type,
            id: a.data.id,
            username: a.data.username
        })), a.stopPropagation()
    },
    onChildEnterPressed: function(a) {
        P.trackGAEvent("collaborator_invite_email", P.CONST.GA_ACTION_ENTER_SUBMIT), this.submit(), a.stopPropagation()
    },
    onClickInviteButton: function(a) {
        P.trackGAEvent("collaborator_invite_email", P.CONST.GA_ACTION_CLICK_SUBMIT), this.submit(), a.stopPropagation()
    },
    onChildContentChanged: function(a) {
        a.stopPropagation()
    },
    submit: function() {
        var a = this.getChildById("typeaheadField"), b = a.getValue(), c = a.getField();
        if (this.options.email_supported) {
            var d = new P.Validator(c, [P.Validator.Length({
                min: 1
            }), P.Validator.Email()]);
            d.validate(function(a) {
                a.errors.length > 0 ? this.log.debug(a.errors) : this._inviteEmail(b)
            }.bind(this))
        }
        return !1
    },
    setTypeaheadFieldValue: function(a) {
        var b = this.getChildById("typeaheadField");
        b.setValue(a)
    },
    clearTypeahead: function() {
        var a = this.getChildById("typeaheadField");
        a.clear()
    },
    _inviteEmail: function(a) {
        this.triggerEvent(P.CONST.EVENT_INVITE_EMAIL, {
            email: a
        }, !0)
    },
    _inviteUser: function(a) {
        var b = a.type, c = a.email ? a.email: a.id;
        this.triggerEvent(P.CONST.EVENT_INVITE_USER, {
            userId: c,
            type: b,
            pending: this.options.pending,
            attributes: a
        }, !0)
    }
}), P.modules.BoardInviteForm.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.BoardLabel"), goog.require("P.Module"), P.modules.BoardLabel = P.Module.extend({
    setSelectedStyle: function(a) {
        this.getChildById("boardIcons").setLightColor(a)
    }
}), P.modules.BoardLabel.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/BoardLabel/BoardLabel.nunjucks"), goog.provide("P.modules.BoardPageBase"), goog.require("P.Module");
var ID_ADD_TO_MAP_BUTTON = "addToMap";
P.modules.BoardPageBase = P.Module.extend({
    events: {},
    onCreated: function() {
        this.map = null
    },
    onContentReady: function() {
        this.map = this.getChildById("map"), this.map && (this.childListen(P.CONST.EVENT_MAP_READY, this.onMapReady), this.childListen(P.CONST.EVENT_PIN_DELETED, this.onPinDeleted))
    },
    getGrid: function() {
        return this.getChildById("grid")
    },
    showAddToMapButtonIfPossible: function() {
        var a = this._getAddToMapButton();
        a && a.getContent().removeClass("hidden")
    },
    onMapReady: function() {
        this.showAddToMapButtonIfPossible(), this.setMapPaddingTopLeft(), this.addMarkersToMap()
    },
    _removePinFromMap: function(a) {
        if (this.map) {
            var b = a.getId();
            this.map.removeMarkerForPinId(b)
        }
    },
    onPinDeleted: function(a) {
        var b = a.data;
        this._removePinFromMap(b)
    },
    addMarkersToMap: function() {
        var a = this.getPins();
        this._pinCount = a.length;
        var b = _.filter(a, function(a) {
            return null !== a.getCoordinates()
        }), c = b.length > 0;
        this._pinCount && c ? (this.map.addMarkersToMap(a), this.map.fitViewToPinMarkers()) : this.map.fitWorld()
    },
    getPins: function() {
        var a = this.getGrid();
        if (!a)
            return [];
        var b = a.getGridItemsChildren();
        return b.length ? b : []
    },
    _getAddToMapButton: function() {
        return this.getChildById(ID_ADD_TO_MAP_BUTTON)
    },
    setMapPaddingTopLeft: function() {}
}), P.modules.BoardPageBase.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/BoardPageBase/BoardPageBase.nunjucks"), goog.provide("P.modules.BusinessAccountCreateBaseV1"), goog.require("P.Module"), P.modules.BusinessAccountCreateBaseV1 = P.Module.extend({
    onContentReady: function() {
        if (P.trackRegisterAction("create_business_account_loaded"), P.currentUser.isAuthenticated())
            if (P.currentUser.attributes.is_partner)
                this.navigate("/business/getstarted/");
            else {
                var a = {
                    name: "ConfirmDialog",
                    options: {
                        template: "confirm_create_a_business"
                    }
                };
                P.loadModule(a).then(function(a) {
                    this.showInModal(a), this.listen(a, P.CONST.EVENT_DIALOG_BUTTON_CLICKED, this.onConfirmClick)
                }.bind(this))
            }
        var b = P.getQueryStringParams().email;
        b && this.$("#email").val(b)
    },
    onConfirmClick: function(a) {
        var b = $(a.data), c = "";
        b.hasClass("cancelConvert") ? c = "/" : b.hasClass("continueConvert") && (c = "/logout/?next=/business/create/"), this.navigate(c)
    }
}), P.modules.BusinessAccountCreateBaseV1.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.BusinessAccountCreateBaseV2"), goog.require("P.Module"), goog.require("P.modules.BackgroundImage"), P.modules.BusinessAccountCreateBaseV2 = P.Module.extend({}), P.modules.BusinessAccountCreateBaseV2.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.BusinessTOS"), goog.require("P.Module"), P.modules.BusinessTOS = P.Module.extend({}), P.modules.BusinessTOS.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.Button"), goog.require("P.Module");
var ButtonStates = {
    ATTR_DISABLED: "disabled",
    CLASS_DISABLED: "disabled",
    CLASS_ACTIVE: "active",
    CLASS_BADGED: "badged",
    SELECTOR_BUTTON_TEXT: ".buttonText",
    SELECTOR_BUTTON_BADGE: ".buttonBadge",
    CLASS_SELECTED: "selected"
};
P.modules.Button = P.Module.extend({
    events: {
        click: "onClick"
    },
    onClick: function(a) {
        return a && this.isDisabled() ? (a.preventDefault(), !1) : void this.triggerEvent(P.CONST.EVENT_BUTTON_CLICK, null, !0)
    },
    disable: function() {
        this.$el.attr(ButtonStates.ATTR_DISABLED, !0).addClass(ButtonStates.CLASS_DISABLED)
    },
    enable: function() {
        this.$el.removeAttr(ButtonStates.ATTR_DISABLED).removeClass(ButtonStates.CLASS_DISABLED)
    },
    setEnabled: function(a) {
        a ? this.enable() : this.disable()
    },
    setHighlight: function(a) {
        this.$el.toggleClass(P.CONST.CLASS_BUTTON_HIGHLIGHTED, a)
    },
    isDisabled: function() {
        return this.$el.is(":disabled")
    },
    isCancelButton: function() {
        return this.options.cancelButton
    },
    isSegmentedControlButton: function() {
        return this.options.segmented_control_button
    },
    getText: function() {
        var a = this.$(ButtonStates.SELECTOR_BUTTON_TEXT).text();
        return $.trim(a)
    },
    setText: function(a) {
        var b = $.trim(a);
        this.$(ButtonStates.SELECTOR_BUTTON_TEXT).text(b)
    },
    setStyles: function(a) {
        var b = this.$el;
        _.each(a, function(a, c) {
            b.toggleClass(c, a)
        })
    },
    getLoadingSpinnerOptions: function() {
        return _.extend(P.Module.prototype.getLoadingSpinnerOptions.call(this), {
            size: P.Spinner.Size.SMALL
        })
    },
    setBadge: function(a) {
        var b = $.trim(a);
        this.$(ButtonStates.SELECTOR_BUTTON_BADGE).text(b), this.$el.addClass(ButtonStates.CLASS_BADGED)
    },
    getBadgeCount: function() {
        var a = $.trim(this.$(ButtonStates.SELECTOR_BUTTON_BADGE).text());
        return a && void 0 !== a || (a = 0), parseInt(a, 10)
    },
    clearBadge: function() {
        this.$(ButtonStates.SELECTOR_BUTTON_BADGE).text(""), this.$el.removeClass(ButtonStates.CLASS_BADGED)
    },
    setBadgeCount: function(a) {
        a <= 0 ? this.clearBadge() : this.setBadge(a)
    },
    setActiveStyle: function(a) {
        this.$el.toggleClass(ButtonStates.CLASS_ACTIVE, a)
    },
    setSelectedStyle: function(a) {
        this.$el.toggleClass(ButtonStates.CLASS_SELECTED, a)
    },
    isActive: function() {
        return this.$el.hasClass(ButtonStates.CLASS_ACTIVE)
    },
    showLoading: function() {
        this.disable(), (!this.options.borderless || this.options.show_spinner) && P.Module.prototype.showLoading.call(this)
    },
    hideLoading: function() {
        this.enable(), (!this.options.borderless || this.options.show_spinner) && P.Module.prototype.hideLoading.call(this)
    },
    getLoggingObjectIdStr: function() {
        return this.parent ? this.parent.getLoggingObjectIdStr() : null
    },
    _getLabelModule: function() {
        return this.getChildById("label")
    }
}), P.modules.Button.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/Button/Button.nunjucks"), goog.provide("P.modules.CategoriesSelect"), goog.require("P.Module"), P.modules.CategoriesSelect = P.Module.extend({
    getValue: function() {
        return $.trim(this.$("option:selected").val())
    }
}), P.modules.CategoriesSelect.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ClippedPinVisualObject"), goog.require("P.Module"), P.modules.ClippedPinVisualObject = P.Module.extend({}), P.modules.ClippedPinVisualObject.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.CloseupRichPinContentBase"), goog.require("P.Module"), P.modules.CloseupRichPinContentBase = P.Module.extend({
    getLoggingObjectIdStr: function() {
        return this.resource.id
    },
    onCreated: function() {
        this.childListen(P.CONST.EVENT_MAP_READY, this.onMapReady)
    },
    onMapReady: function() {
        var a = this.getChildById("map");
        a && a.addMarkerToCloseupMap()
    }
}), P.modules.CloseupRichPinContentBase.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ConfirmDialog"), goog.require("P.form"), goog.require("P.Module"), P.modules.ConfirmDialog = P.Module.extend({
    events: {
        "click .cancelButton": "onCloseClick",
        "click .confirm": "onConfirmClick",
        "change #confirmCheckbox": "onConfirmCheckboxChange"
    },
    returnData: null,
    onContentReady: function() {
        var a = this.$("form");
        a && (this.formListener && this.removeListener(this.formListener), this.form = new P.Form(a, this.formConfig), this.formListener = this.listen(this.form, P.CONST.EVENT_SUBMIT_VALIDATED, this.onSubmitValidated));
        var b = this.options.auto_close_delay_ms;
        b && this.closeOnDelay(b)
    },
    onConfirmCheckboxChange: function() {
        this.$("#confirmCheckbox").is(":checked") ? this.$(".confirm").removeAttr("disabled") : this.$(".confirm").attr("disabled", "disabled")
    },
    onSubmitValidated: function(a) {
        a.errors[0] || (this.formData = {}, _.each(this.returnData, function(a) {
            this.formData[a] = this.form.getValue(a)
        }.bind(this)), this.confirm())
    },
    onCloseClick: function(a) {
        return this.triggerEvent(P.CONST.EVENT_DIALOG_BUTTON_CLICKED, a.currentTarget, !0), this.close(), !1
    },
    close: function() {
        this.triggerEvent(P.CONST.EVENT_CLOSE, this), this.destroy()
    },
    closeOnDelay: function(a) {
        this.closeTimer && clearTimeout(this.closeTimer), this.closeTimer = P.setTimeout(function() {
            this.closeTimer = null, this.destroy()
        }.bind(this), a)
    },
    open: function() {
        this.triggerEvent(P.CONST.EVENT_OPEN, this)
    },
    onConfirmClick: function(a) {
        return this.triggerEvent(P.CONST.EVENT_DIALOG_BUTTON_CLICKED, a.currentTarget, !0), this.confirm(), !1
    },
    confirm: function() {
        this.showLoading(!0), this.triggerEvent(P.CONST.EVENT_CONFIRM, this, !0), this.destroy()
    },
    setPrimaryButtonText: function(a) {
        this.$(".primary .buttonText").text(a)
    },
    onDestroyed: function() {
        this.closeTimer && clearTimeout(this.closeTimer)
    }
}), P.modules.ConfirmDialog.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/ConfirmDialog/ConfirmDialog.nunjucks"), goog.provide("P.modules.ContactsList"), goog.require("P.Module"), P.modules.ContactsList = P.Module.extend({
    onContentReady: function() {
        this.childListen(P.CONST.EVENT_IMAGE_BLOCK_CLICKED, this.onListItemClick), P.pubsub.subscribe(P.CONST.PUBSUB_CHANNEL_CURRENT_USER, P.CONST.PUBSUB_TOPIC_SOCIAL_NETWORK_UPDATED, function() {
            this.renderExistingData()
        }.bind(this))
    },
    onListItemClick: function(a) {
        var b = $(a.target), c = a.data.network;
        if (c) {
            var d = {
                success: function() {
                    b.parents("li").remove()
                }
            };
            P.SocialNetworkSettingsManager.instance().handleConnect(c, !0, d)
        } else 
            this.triggerEvent(P.CONST.EVENT_CONTACT_SELECTED, a.data, !0)
    }
}), P.modules.ContactsList.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/ContactsList/ContactsList.nunjucks"), goog.provide("P.modules.ConversationEventMessageBase"), goog.require("P.Module"), P.modules.ConversationEventMessageBase = P.Module.extend({}), P.modules.ConversationEventMessageBase.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/ConversationEventMessageBase/ConversationEventMessageBase.nunjucks"), goog.provide("P.modules.ConversationListItem"), goog.require("P.Module");
var CONVERSATION_LIST_ITEM_ACTIVE_CLASS = "active", CLASS_ANIMATING_OUT = "animatingOut", CLASS_ANIMATED_OUT = "animatedOut";
P.modules.ConversationListItem = P.Module.extend({
    events: {
        click: "onListItemClick"
    },
    onListItemClick: function(a) {
        var b = this.getChildById("hideConversation");
        if (b) {
            var c = $(a.target);
            if (c.closest(b.getContent()).length) {
                var d = {
                    conversation_id: this.data.id
                };
                this.triggerEvent(P.CONST.EVENT_CONVERSATIONS_PREVENT_CONVERSATIONS_RENDERING_ON_CHANGE, !0, !0);
                var e = P.resourceFactory.create("ConversationResource", d);
                e.callDelete({
                    showError: !1
                });
                var f = this.$el;
                return f.addClass(CLASS_ANIMATING_OUT), void f.one("animationend webkitAnimationEnd MSAnimationEnd oAnimationEnd", function() {
                    f.addClass(CLASS_ANIMATED_OUT), window.setTimeout(function() {
                        this.destroy(), this.remove(), this.triggerEvent(P.CONST.EVENT_CONVERSATIONS_PREVENT_CONVERSATIONS_RENDERING_ON_CHANGE, !1, !0), P.getConversationsManager().removeConversationById(this.data.id), P.getConversationsManager().logContextEvent(P.ContextLogging.EventType.CONVERSATION_HIDE, this.data.id, null, f)
                    }.bind(this), 200)
                }.bind(this))
            }
        }
        var g = this.data;
        if (this.triggerEvent(P.CONST.EVENT_CONVERSATION_LIST_ITEM_CLICKED, g, !0), this.options.open_conversation_on_click) {
            this.data.unread && this.triggerEvent(P.CONST.EVENT_UNREAD_CONVERSATION_LIST_ITEM_CLICK, null, !0), this.$el.removeClass("unread");
            var h = this.getChildById("conversationHead").getContent();
            P.getConversationsManager().addConversation(g, !0, h), this.triggerEvent(P.CONST.EVENT_DISMISS, null, !0)
        }
    },
    setActive: function(a) {
        this.$el.toggleClass(CONVERSATION_LIST_ITEM_ACTIVE_CLASS, a)
    },
    isActive: function() {
        return this.$el.hasClass(CONVERSATION_LIST_ITEM_ACTIVE_CLASS)
    },
    getUsers: function() {
        return this.data.users
    },
    getUserIds: function() {
        return _.pluck(this.getUsers(), "id")
    },
    getOtherUsers: function() {
        var a = this.getUsers();
        return _.reject(a, function(a) {
            return a.id === P.currentUser.get("id")
        })
    },
    getEmails: function() {
        return this.data.emails
    },
    getFirstUser: function() {
        var a = this.getOtherUsers();
        return a.length > 0 ? a[0] : {
            id: this.getEmails()[0]
        }
    }
}), P.modules.ConversationListItem.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/ConversationListItem/ConversationListItem.nunjucks"), goog.provide("P.modules.ConversationMessage"), goog.require("P.Module"), P.modules.ConversationMessage = P.Module.extend({
    onContentReady: function() {
        this.childListen(P.CONST.EVENT_PIN_DELETED, this.onAttachedObjectDeleted), this.childListen(P.CONST.EVENT_BOARD_DELETED, this.onAttachedObjectDeleted)
    },
    onAttachedObjectDeleted: function() {
        this.$(".msgObjectSent").remove(), this.destroy()
    }
}), P.modules.ConversationMessage.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/ConversationMessage/ConversationMessage.nunjucks"), goog.provide("P.modules.ConversationMessages"), goog.require("P.Module"), goog.require("P.modules.ConversationMessage"), goog.require("P.ModuleRenderType");
var ADDITIONAL_MESSAGES_TO_FETCH = 5;
P.modules.ConversationMessages = P.Module.extend({
    onCreated: function() {
        this._clientMessages = []
    },
    onContentReady: function() {
        this.triggerEvent(P.CONST.EVENT_CONVERSATION_MESSAGES_SCROLL, null, !0), this._lastMessage = this.data[this.data.length - 1], this.resource.set("peek", !1)
    },
    appendTextMessage: function(a, b) {
        var c = this._createMessageWrapper(), d = {
            is_own_message: !0,
            text: a,
            pending: !0
        }, e = new P.modules.ConversationMessage({
            options: d
        });
        e.render().then(function() {
            this._appendMessage(c, e), b && b()
        }.bind(this))
    },
    _appendMessage: function(a, b) {
        b.getContent().appendTo(a), a.appendTo(this.$el), this.removeEmptyState(), this._clientMessages.push(b)
    },
    removeEmptyState: function() {
        this.$(".emptyState").remove(), this.$el.removeClass("empty")
    },
    _deleteClientMessage: function(a) {
        if (!a.destroyed) {
            var b = a.getParentElement();
            a.destroy(), b.remove()
        }
    },
    _deleteAllClientMessages: function() {
        this._clientMessages.forEach(function(a) {
            this._deleteClientMessage(a)
        }.bind(this)), this._clientMessages = []
    },
    deleteLastClientMessage: function() {
        this._deleteClientMessage(this._clientMessages[this._clientMessages.length - 1]), this._clientMessages.pop()
    },
    _createMessageWrapper: function() {
        return $('<li class="messageWrapper"></li>')
    },
    getBottomPosition: function(a) {
        var b = this.children[this.children.length - a], c = b.getContent(), d = c.parent(), e = d.position().top;
        return e
    },
    fetchPrevMessages: function(a, b, c) {
        if (this.acquireRenderLock()) {
            var d = function() {
                this.releaseRenderLock(), this.setPreventEmpty(!0), c && c()
            }.bind(this);
            this.resetLastMessageTime(), this.renderAdditional(P.ModuleRenderType.PREPEND).then(a, b).fin(d)
        }
    },
    fetchNewMessages: function(a, b, c) {
        if (this.acquireRenderLock()) {
            var d = this.resource, e = P.resourceFactory.clone(this.resource);
            e.resetBookmark(), this._lastMessage ? (e.set("last_message_id", this._lastMessage.id), e.set("page_size", a + ADDITIONAL_MESSAGES_TO_FETCH)) : e.set("page_size", a), e.set("peek", b ||!1), this.setResource(e), this.setPreventEmpty(!0), this.setLastMessageTime(), this.renderAdditional(P.ModuleRenderType.APPEND).then(function() {
                this.data.length && (this._lastMessage = this.data[this.data.length - 1]), this._deleteAllClientMessages(), c && c()
            }.bind(this)).fin(function() {
                this.releaseRenderLock(), this.setResource(d)
            }.bind(this))
        }
    },
    setPreventEmpty: function(a) {
        this.options.prevent_empty = a
    },
    setLastMessageTime: function() {
        this._lastMessage && (this.options.last_message_time = this._lastMessage.created_at)
    },
    resetLastMessageTime: function() {
        this.options.last_message_time = 0
    },
    renderMessages: function(a) {
        this.acquireRenderLock() && (this.setPreventEmpty(!0), this.resetLastMessageTime(), this.render().then(function() {
            this._deleteAllClientMessages(), a && a()
        }.bind(this)).fin(function() {
            this.releaseRenderLock()
        }.bind(this)))
    },
    markMessagesAsRead: function(a) {
        var b = P.resourceFactory.clone(this.resource);
        b.resetBookmark(), b.set("page_size", a), b.set("peek", !1), b.callGet()
    },
    acquireRenderLock: function() {
        return this._rendering?!1 : (this._rendering=!0, !0)
    },
    releaseRenderLock: function() {
        this._rendering=!1
    },
    appendObjectMessage: function(a, b) {
        var c = $('<li class="messageWrapper"></li>'), d = {
            is_own_message: !0,
            pending: !0
        }, e = new P.modules.ConversationMessage({
            options: d
        });
        e.render().then(function() {
            this._appendMessage(c, e), e.getContent().append(a).addClass("hasObject").appendTo(c), b && b()
        }.bind(this))
    },
    updateTimestamps: function() {
        var a = this.getChildrenByModuleName("ConversationMessage");
        a.forEach(function(a) {
            var b = a.getParentElement().next(".timeSeparator");
            b.length && b.text(P.getHumanizedTimesince(a.data.created_at))
        })
    }
}), P.modules.ConversationMessages.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/ConversationMessages/ConversationMessages.nunjucks"), goog.provide("P.modules.ConversationPinLikeMessage"), goog.require("P.Module"), P.modules.ConversationPinLikeMessage = P.Module.extend({}), P.modules.ConversationPinLikeMessage.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/ConversationPinLikeMessage/ConversationPinLikeMessage.nunjucks"), goog.provide("P.modules.ConversationPopup"), goog.require("P.Module");
var MIN_REQUEST_MORE_SCROLL_THRESHOLD = 220, MAX_SCROLL_DISTANCE_TO_SCROLL_TO_BOTTOM_AFTER_MESSAGE = 35;
P.modules.ConversationPopup = P.Module.extend({
    mixins: [P.Mixins.PreventScroll],
    events: {
        "click .convosHeader": "onHeaderClick"
    },
    onCreated: function() {
        this._unseenMessageCount = 0
    },
    onHeaderClick: function() {
        P.getConversationsManager().closeConversationById(this.options.id)
    },
    onContentReady: function() {
        this.childListen(P.CONST.EVENT_BUTTON_CLICK, this.onButtonClick), this.childListen(P.CONST.EVENT_ENTER_PRESSED, this.onInputEnterPressed), this.childListen(P.CONST.EVENT_TEXT_INPUT_RESIZED, this.onInputSizeChanged), this.childListen(P.CONST.EVENT_CONVERSATION_MESSAGES_SCROLL, this.onConversationMessagesReady), this.startPreventingScroll(), this.listen(this, P.CONST.EVENT_DROPDOWN_CONTAINER_SHOWN, this.onShownInDropdown), this.onMessagesScroll = this.onMessagesScroll.bind(this), this.onMessagesScroll = _.throttle(this.onMessagesScroll, 200), this.scrollToLatest(), this._scrollListener = this.listen(this.getConversationMessagesList(), "scroll", this.onMessagesScroll)
    },
    onConversationMessagesReady: function() {
        this.options.peek && this.data.unread && (this._shouldMarkAsReadOnOpen=!0), this.showEmailSentIfNecessary(), this.scrollToLatest()
    },
    showEmailSentIfNecessary: function() {
        var a = this.data.emails || [], b = 1 === a.length && a[0] === P.currentUser.get("email"), c = this.$(".ConversationMessage").length;
        if (a.length > 0&&!b && c > 0 && c <= 3) {
            var d = this.$(".emailSentText");
            d.show()
        }
    },
    getConversationMessagesList: function() {
        return this.$(".conversationMessagesList")
    },
    getConversationMessagesModule: function() {
        return this.getChildByModuleName("ConversationMessages")
    },
    onInputSizeChanged: function(a) {
        if ("textField" === a.target.id) {
            var b = this.getChildById("textField").getHeight(), c = this.$(".messagesContainer");
            c.css("bottom", b + "px"), this.isScrolledToBottom() && this.scrollToLatest()
        }
    },
    startPreventingScroll: function() {
        var a = this.getConversationMessagesModule();
        a && this.startPreventScroll(this.getConversationMessagesList(), this.$(".messagesContent"))
    },
    _getSpinner: function() {
        return this.$(".spinner")
    },
    setUnseenMessageCount: function(a) {
        this._unseenMessageCount = this._unseenMessageCount + a
    },
    onMessagesScroll: function() {
        if (this._unseenMessageCount) {
            var a = this.getConversationMessagesModule(), b = a.getBottomPosition(this._unseenMessageCount);
            b <= this.getConversationMessagesList().height() && (this._unseenMessageCount = Math.max(this._unseenMessageCount - 1, 0), P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_SITE, P.CONST.PUBSUB_TOPIC_CONVERSATION_UNREAD_COUNT_DECREASE, 1), this.triggerEvent(P.CONST.EVENT_CONVERSATION_DECREMENT_BADGE, null, !0))
        }
        if (this.getConversationMessagesList().scrollTop() <= MIN_REQUEST_MORE_SCROLL_THRESHOLD) {
            this._getSpinner().addClass("visible");
            var c = this.getConversationMessagesModule(), d = c.getHeight();
            c.fetchPrevMessages(function() {
                var a = c.getHeight();
                a !== d && (this.startPreventingScroll(), this.getConversationMessagesList().scrollTop(a - d))
            }.bind(this), null, function() {
                this._getSpinner().removeClass("visible")
            }.bind(this))
        }
    },
    onShownInDropdown: function() {
        var a = this.$(".ConversationMessages");
        a.off("click", $.proxy(this._focusInput, this)), a.on("click", $.proxy(this._focusInput, this)), this.scrollToLatest();
        var b = this.getConversationMessagesModule();
        b && (b.updateTimestamps(), this._shouldMarkAsReadOnOpen && (b.markMessagesAsRead(this.data.unread), this._shouldMarkAsReadOnOpen=!1))
    },
    getDropTarget: function() {
        return this.$(".dropTarget")
    },
    scrollToLatest: function() {
        this.getConversationMessagesModule() && (this.getConversationMessagesList().scrollTop(this.getConversationMessagesModule().getHeight()), this.startPreventingScroll())
    },
    setDropTargetText: function(a) {
        var b = this.getDropTarget(), c = b.find("p");
        c.text(a)
    },
    focus: function() {
        return this._focusInput()
    },
    _focusInput: function() {
        var a = this.getChildById("textField");
        a && a.focus()
    },
    onInputEnterPressed: function(a) {
        a.stopPropagation();
        var b = $.trim(a.target.getValue());
        b.length && (this.sendMessage(b, null), this.clearInput())
    },
    clearInput: function() {
        var a = this.getChildById("textField");
        a.setValue("")
    },
    showDropTarget: function() {
        this.getDropTarget().addClass("visible")
    },
    hideDropTarget: function() {
        this.getDropTarget().removeClass("visible")
    },
    sendMessage: function(a, b) {
        if (a ||!_.isEmpty(b)) {
            var c = this.options.id, d = {};
            if (a && (d.text = a), b) {
                var e = b.data;
                d.object_type = e.type, d.object_id = e.id
            }
            if (P.currentUser&&!P.currentUser.isWriteBanned()) {
                var f = this.getConversationMessagesModule(), g = this.isScrolledToBottom() ? this.scrollToLatest.bind(this): P.NOOP;
                b ? f.appendObjectMessage(b.getContent().clone(), g) : f.appendTextMessage(a, g)
            }
            P.getConversationsManager().sendMessageToConversation(c, d).then(function() {
                this.fetchNewMessages(1), this.focus(), P.getConversationsManager().logContextEvent(P.ContextLogging.EventType.CONVERSATION_MESSAGE_SEND, c, b ? b.data.id : null, this.$el)
            }.bind(this), function() {
                this.getConversationMessagesModule().deleteLastClientMessage()
            }.bind(this))
        }
    },
    isScrolledToBottom: function() {
        var a = this.getConversationMessagesList(), b = this.getConversationMessagesModule(), c = a.scrollTop(), d = a.height(), e = b.getHeight(), f = c + d + MAX_SCROLL_DISTANCE_TO_SCROLL_TO_BOTTOM_AFTER_MESSAGE;
        return f >= e
    },
    fetchNewMessages: function(a, b) {
        var c = this.getConversationMessagesModule();
        if (c) {
            var d = this.isScrolledToBottom();
            b && (this._shouldMarkAsReadOnOpen=!0), c.fetchNewMessages(a, b, function() {
                this.showEmailSentIfNecessary(), d ? this.scrollToLatest() : this.ensureScrollbarFlash()
            }.bind(this))
        }
    },
    ensureScrollbarFlash: function() {
        var a = this.getConversationMessagesList();
        a.flashScrollbar()
    },
    renderMessages: function() {
        var a = this.getConversationMessagesModule();
        a && a.renderMessages(function() {
            this.showEmailSentIfNecessary(), this.scrollToLatest()
        }.bind(this))
    },
    onButtonClick: function(a) {
        var b = a.target;
        ("closeChatButton" === b.id || "joinToReplyButton" === b.id) && (P.getConversationsManager().closeConversationById(this.options.id), a.stopPropagation())
    }
}), P.modules.ConversationPopup.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/ConversationPopup/ConversationPopup.nunjucks"), goog.provide("P.modules.ConversationRepinMessage"), goog.require("P.Module"), P.modules.ConversationRepinMessage = P.Module.extend({}), P.modules.ConversationRepinMessage.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/ConversationRepinMessage/ConversationRepinMessage.nunjucks"), goog.provide("P.modules.ConversationsList"), goog.require("P.Module"), P.modules.ConversationsList = P.Module.extend({
    onCreated: function() {
        this._preventRenderOnChange=!1, this.childListen(P.CONST.EVENT_CONVERSATIONS_PREVENT_CONVERSATIONS_RENDERING_ON_CHANGE, this.onPreventConversationsRenderingOnChange)
    },
    onPreventConversationsRenderingOnChange: function(a) {
        this._preventRenderOnChange = a.data
    },
    onContentReady: function() {
        var a=!this.options.no_rerender;
        a&&!this.modelListener && (this.modelUpdateHandler = _.debounce(this.onCollectionAddRemoveChange.bind(this), 100), this.initialModel = this.model, this.modelListener = this.initialModel.on("add change remove", this.modelUpdateHandler)), this.data.length || this.triggerEvent(P.CONST.EVENT_CONVERSATIONS_IS_EMPTY, null, !0)
    },
    onRemovedFromDom: function() {
        this.modelListener && this.modelUpdateHandler && this.model.off("add change remove", this.modelUpdateHandler)
    },
    onCollectionAddRemoveChange: function() {
        this.options.no_rerender || this._preventRenderOnChange || this._fetchingMore || (this.model !== this.initialModel && (this.model = this.initialModel, this.resource.resetBookmark()), this.renderExistingData())
    },
    setListItemWithUserId: function(a, b) {
        var c = this.getChildById("list");
        if (c) {
            var d = c.children;
            _.each(d, function(c, e) {
                _.each(c.data.users, function(c) {
                    c.id === a && d[e].setActive(b)
                }), _.each(c.data.emails, function(c) {
                    c === a && d[e].setActive(b)
                })
            })
        }
    },
    fetchMore: function() {
        this._fetchingMore || this.resource.atEnd() || (this.resource.get("bookmarks") || this.resource.setBookmarks(P.getConversationsManager().getConversationsBookmarks()), this._fetchingMore=!0, this.renderAdditional(P.ModuleRenderType.APPEND).then(function() {
            P.setTimeout(function() {
                this._fetchingMore=!1
            }.bind(this), 200)
        }.bind(this)))
    }
}), P.modules.ConversationsList.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/ConversationsList/ConversationsList.nunjucks"), goog.provide("P.modules.ConversationsListDropdown"), goog.require("P.Module");
var CONVERSATION_LIST_ID = "conversationList";
P.modules.ConversationsListDropdown = P.Module.extend({
    onCreated: function() {
        this.onConversationsScroll = this.onConversationsScroll.bind(this), this.onConversationsScroll = _.throttle(this.onConversationsScroll, 200)
    },
    onContentReady: function() {
        this._scrollListener = this.listen(this.$(".convosContent"), "scroll", this.onConversationsScroll)
    },
    onConversationsScroll: function(a) {
        var b = $(a.target).scrollTop(), c = this._getList(), d = c.getHeight();
        d - b <= this.$(".convosContent").height() + 10 && c.fetchMore()
    },
    _getList: function() {
        return this.getChildById(CONVERSATION_LIST_ID)
    }
}), P.modules.ConversationsListDropdown.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/ConversationsListDropdown/ConversationsListDropdown.nunjucks"), goog.provide("P.modules.Counter"), goog.require("P.Module"), P.modules.Counter = P.Module.extend({
    setCount: function(a) {
        this.options.count = a, this.render()
    }
}), P.modules.Counter.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/Counter/Counter.nunjucks"), goog.provide("P.modules.DomainFeedPageBase"), goog.require("P.Module"), P.modules.DomainFeedPageBase = P.Module.extend({}), P.modules.DomainFeedPageBase.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.Editorial"), goog.require("P.Module"), P.modules.Editorial = P.Module.extend({}), P.modules.Editorial.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.EmailVerificationError"), goog.require("P.Module"), P.modules.EmailVerificationError = P.Module.extend({}), P.modules.EmailVerificationError.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.FeedPageBase"), goog.require("P.Module"), P.modules.FeedPageBase = P.Module.extend({
    events: {}
}), P.modules.FeedPageBase.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.FollowingSwitcher"), goog.require("P.Module"), P.modules.FollowingSwitcher = P.Module.extend({
    onContentReady: function() {
        this.listen(this.getChildById("navFollowedInterests"), P.CONST.EVENT_BUTTON_CLICK, this.onButtonTabClick), this.listen(this.getChildById("navFollowedPinners"), P.CONST.EVENT_BUTTON_CLICK, this.onButtonTabClick), this.listen(this.getChildById("navFollowedBoards"), P.CONST.EVENT_BUTTON_CLICK, this.onButtonTabClick)
    },
    onButtonTabClick: function(a) {
        var b = a.target.id, c = this.getChildById("navFollowedInterests"), d = this.getChildById("navFollowedPinners"), e = this.getChildById("navFollowedBoards");
        c.setSelectedStyle("navFollowedInterests" === b), d.setSelectedStyle("navFollowedPinners" === b), e.setSelectedStyle("navFollowedBoards" === b), this.triggerEvent(P.CONST.EVENT_REFRESH_FOLLOWING_GRID, {
            following_tab: b
        }, !0)
    }
}), P.modules.FollowingSwitcher.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.GplusConnectButton"), goog.require("P.Module"), goog.require("P.modules.Button");
var GPLUS_LOGIN_FAIL = function() {
    return P._("Oops! Log in with your Pinterest email and password first, then follow <a href='{{ help_link }}'>these instructions</a> to link your account to Google+.")
}, GPLUS_ACCOUNT_NOT_LINKED = 180, GPLUS_REDIRECT_URI = "postmessage", SIGNUP_ACTION = "signup";
P.modules.GplusConnectButton = P.modules.Button.extend({
    onContentReady: function() {
        this.readyForConnect=!1, P.gapi.get(function(a) {
            a.signin.render(this.$el.get(0), {
                scope: this.extraData.gplusScope,
                clientid: this.extraData.gplusClientId,
                apppackagename: this.extraData.gplusAppPackageName,
                redirecturi: GPLUS_REDIRECT_URI,
                accesstype: "offline",
                cookiepolicy: "single_host_origin",
                callback: function(a) {
                    this.readyForConnect && this.onSignInCallback(a), this.readyForConnect=!0
                }.bind(this)
            })
        }.bind(this))
    },
    onSignInCallback: function(a) {
        var b = {
            gplus_id_token: a.id_token
        }, c = a.status;
        P.trackRegisterAction("register_gplus_attempt"), c.signed_in && P.currentUser.login(b).then(function() {
            this.showLoading(), this.onLoginSuccess(a)
        }.bind(this), function(b) {
            this.onLoginError(b, a)
        }.bind(this))
    },
    onLoginSuccess: function() {
        window.location.reload()
    },
    onLoginError: function(a, b) {
        if (a.api_error_code === GPLUS_ACCOUNT_NOT_LINKED) {
            var c = P.string.format(GPLUS_LOGIN_FAIL(), {
                help_link: this.extraData.gplusErrorLink
            });
            P.showHtmlError(c)
        } else 
            this.options.action === SIGNUP_ACTION && (P.SessionStorage.setItem(P.CONST.SESSION_GPLUS_CODE, b.code), P.SessionStorage.setItem(P.CONST.SESSION_GPLUS_REDIRECT_URI, GPLUS_REDIRECT_URI), P.navigate("/join/register/gplus/"))
    }
}), P.modules.GplusConnectButton.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.GridFooter"), goog.require("P.Module");
var SHOW_GRID_LOADING_CLASS = "showGridLoading";
P.modules.GridFooter = P.Module.extend({
    events: {
        "click .gridError .Button": "onTryAgainClick"
    },
    onTryAgainClick: function(a) {
        this.triggerEvent(P.CONST.EVENT_BUTTON_CLICK, a, !0)
    },
    show: function() {
        this.$el.css("display", "block")
    },
    _getErrorDiv: function() {
        return this.$el.find(".gridError")
    },
    showError: function() {
        var a = this._getErrorDiv();
        a.css("display", "block")
    },
    hideError: function() {
        var a = this._getErrorDiv();
        a.css("display", "none")
    },
    showGridLoading: function() {
        this.$el.addClass(SHOW_GRID_LOADING_CLASS)
    },
    hideGridLoading: function() {
        this.$el.removeClass(SHOW_GRID_LOADING_CLASS)
    }
}), P.modules.GridFooter.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/GridFooter/GridFooter.nunjucks"), goog.provide("P.modules.GridItems"), goog.require("P.Module");
var CLASS_ACTIVE_ITEM = "activeItem", DEFAULT_MINIMUM_NUM_COLUMNS = P.CONST.MIN_COLUMNS, ITEM_HIDE_BUFFER = 3e3, SORTABLE_ZINDEX = 1e3, SORTABLE_ITEM_CLASS = "gridSortable", MODULE_NAME_PIN = "Pin", INITIAL_IMPRESSION_LOGGING_INTERVAL_MS = 1e4, sortManagerLog = P.Logger.getLogger("SortManager"), Direction = {
    UP: 0,
    DOWN: 1
}, pxToInt = function(a) {
    var b = parseInt(a.replace("px", ""), 10);
    return isNaN(b) ? 0 : b
}, ItemInfo = function(a) {
    this.childModule = a, this.top = null, this.height = null, this.bottom = null, this.$itemWrapper = a.getParentElement().closest(".item"), this.columnIndex = null, this.inDom=!0, this.initialImpressionReported=!1, this.impressionStart = null
};
ItemInfo.prototype = {
    log: P.Logger.getLogger("ItemInfo"),
    _logHeightError: _.throttle(function() {}, 1e3),
    _logHeightRecovery: _.throttle(function() {
        this.log.warn("recovered from unexpected height value")
    }, 1e3),
    _calculateHeight: function() {
        this.height = this.$itemWrapper.height(), this.height <= 0 && (this.$itemWrapper.appendTo(this.$itemWrapper.parent()), this.height = this.$itemWrapper.height(), this.height <= 0 ? this._logHeightError() : this._logHeightRecovery())
    },
    ensureHeightCalculated: function() {
        null === this.height && this._calculateHeight()
    },
    recalculateHeight: function() {
        this.inDom ? this._calculateHeight() : this.log.debug("Cannot calculate height because this item is not inDom")
    },
    setPosition: function(a, b) {
        this.top = a, this.bottom = b
    },
    hasPosition: function() {
        return null !== this.top
    }
};
var ILayoutManager = function() {};
ILayoutManager.prototype = {
    resizeGrid: function() {},
    onChildContentChanged: function() {},
    onChildDimsChanged: function() {},
    onChildRendered: function() {},
    onChildAdded: function() {},
    positionGridChildren: function() {},
    empty: function() {},
    recalculateItemMeasurements: function() {},
    positionGrid: function() {},
    hideAndShowItems: function() {},
    onChildRemoved: function() {},
    getFilledHeight: function() {},
    logImpressions: function() {},
    flushImpressions: function() {},
    logInitialImpressions: function() {}
};
var VariableHeightLayoutManager = function(a, b) {
    this.gridItems = a, this.options = b, this.shortestColumnIndex = 0, this.columnLengths = [], this.childCidToItemInfo = {}, _.each(this.gridItems.children, function(a) {
        this.childCidToItemInfo[a.cid] = new ItemInfo(a)
    }.bind(this)), this._flushItemsToShow = this._flushItemsToShow.bind(this), this._flushItemsToHide = this._flushItemsToHide.bind(this), this.lastKnownItemInfosInViewport = [], this._itemsToHide = {}, this._itemsToShow = {}, this._ITEMS_TO_HIDE_THRESHOLD = 50
};
VariableHeightLayoutManager.prototype = {
    getFilledHeight: function() {
        return this.columnLengths[this.shortestColumnIndex]
    },
    onChildRendered: function(a) {
        this._reflowOnChildChanged(a)
    },
    onChildAdded: function(a) {
        this.childCidToItemInfo[a.cid] = new ItemInfo(a)
    },
    onChildRemoved: function(a, b) {
        if (!this.gridItems.isEmptying) {
            b.remove();
            var c = this.childCidToItemInfo[a.cid], d = c.columnIndex;
            delete this.childCidToItemInfo[a.cid], this._reflowColumnContent(d)
        }
    },
    empty: function() {
        this.childCidToItemInfo = {}
    },
    recalculateItemMeasurements: function() {
        for (var a in this.childCidToItemInfo)
            this.childCidToItemInfo[a].recalculateHeight()
    },
    onChildContentChanged: function(a) {
        this._reflowOnChildChanged(a)
    },
    onChildDimsChanged: function(a) {
        this._reflowOnChildChanged(a, !1)
    },
    _reflowOnChildChanged: function(a, b) {
        var c = this.childCidToItemInfo[a.cid];
        c.recalculateHeight(), this._reflowColumnContent(c.columnIndex, b)
    },
    _reflowColumnContent: function(a, b) {
        void 0 === b && (b = this.options.reflow_all), b ? this.positionGrid() : this._repositionItemsInColumn(a)
    },
    _calculateNumColumns: function() {
        var a = this.options.minimum_num_columns || DEFAULT_MINIMUM_NUM_COLUMNS;
        if (!this.itemWidth)
            return a;
        this.options.centered || this.gridItems.$el.css("width", "auto");
        var b = this.gridItems.getWidth(!1), c = Math.floor(b / this.itemWidth);
        return Math.max(a, c)
    },
    _positionItemInColumn: function(a, b) {
        if (this.gridItems.isReady()) {
            var c = this.childCidToItemInfo[a.cid], d = c.$itemWrapper;
            b = Math.max(0, b), b = Math.min(this.columnLengths.length - 1, b);
            var e = this.columnLengths[b];
            d.css({
                top: e + "px",
                left: b * this.itemWidth + "px",
                visibility: "visible"
            }), c.columnIndex = b;
            var f = c.height + this.topBuffer + this.bottomBuffer, g = e + f;
            c.setPosition(e, g), this.columnLengths[b] = g, this._setShortestColumnIndex()
        }
    },
    _positionItem: function(a) {
        if (this.gridItems.isReady()) {
            if (0 === this.columnLengths.length) {
                if (!this.itemWidth) {
                    var b = this.childCidToItemInfo[a.cid], c = b.$itemWrapper;
                    this.itemWidth = c.outerWidth(!0);
                    var d = c.css("margin-top"), e = c.css("padding-top"), f = c.css("margin-bottom"), g = c.css("padding-bottom");
                    this.topBuffer = pxToInt(d) + pxToInt(e), this.bottomBuffer = pxToInt(f) + pxToInt(g)
                }
                var h = this._calculateNumColumns();
                this.options.centered || this.gridItems.$el.css("width", h * this.itemWidth), this.columnLengths = new Array(h), this._setShortestColumnIndex()
            }
            var i = this.shortestColumnIndex;
            this._positionItemInColumn(a, i)
        }
    },
    _setShortestColumnIndex: function() {
        this.shortestColumnIndex = 0;
        for (var a = 0; a < this.columnLengths.length; a++)
            this.columnLengths[a] = this.columnLengths[a] || 0, this.columnLengths[a] < this.columnLengths[this.shortestColumnIndex] && (this.shortestColumnIndex = a)
    },
    _repositionItemsInColumn: function(a) {
        if (this.gridItems.isReady()) {
            this.columnLengths[a] = 0;
            var b = _.filter(this.childCidToItemInfo, function(b) {
                return b.columnIndex === a
            }), c = _.sortBy(b, function(a) {
                return a.top
            });
            _.each(c, function(b) {
                this._positionItemInColumn(b.childModule, a)
            }.bind(this)), this.resizeContainer()
        }
    },
    resizeGrid: function() {
        var a = this.columnLengths.length, b = this._calculateNumColumns();
        a !== b && (this.positionGridChildren(), this.gridItems.rearrangeItems(!0), this.gridItems.scheduleImpressionLogging())
    },
    resizeContainer: function() {
        var a = Math.max.apply(Math, this.columnLengths);
        this.gridItems.$el.css("height", a + "px"), this.gridItems.triggerEvent(P.CONST.EVENT_CONTENT_CHANGED, null, !0)
    },
    positionGrid: function() {
        this.gridItems.isReady() && (this.positionGridChildren(), this.gridItems.rearrangeItems(), this.gridItems.scheduleImpressionLogging())
    },
    positionGridChildren: function(a) {
        this.gridItems.isReady() && (a || (this.columnLengths = []), _.each(this.gridItems.children, function(a) {
            var b = this.childCidToItemInfo[a.cid];
            b.ensureHeightCalculated()
        }.bind(this)), _.each(this.gridItems.children, function(b) {
            var c = this.childCidToItemInfo[b.cid];
            a && c.hasPosition() || this._positionItem(c.childModule)
        }.bind(this)), this.resizeContainer())
    },
    hideAndShowItems: function(a, b, c, d, e) {
        var f;
        for (f in this.childCidToItemInfo) {
            var g = this.childCidToItemInfo[f], h = g.$itemWrapper[0];
            g.bottom < d ? a && g.inDom && (b || c !== Direction.DOWN || (this._itemsToHide[f] = h, delete this._itemsToShow[f], g.inDom=!1)) : g.top > e ? a && g.inDom && (b || c !== Direction.UP || (this._itemsToHide[f] = h, delete this._itemsToShow[f], g.inDom=!1)) : g.inDom || (this._itemsToShow[f] = h, delete this._itemsToHide[f], g.inDom=!0)
        }
        Object.keys(this._itemsToShow).length && P.deferDomManipulation(this._flushItemsToShow), Object.keys(this._itemsToHide).length > this._ITEMS_TO_HIDE_THRESHOLD && P.deferDomManipulation(this._flushItemsToHide)
    },
    _flushItemsToShow: function() {
        var a;
        this.gridItems.log.debug("_flushItemsToShow: showing ", Object.keys(this._itemsToShow).length);
        var b = document.createDocumentFragment();
        for (a in this._itemsToShow)
            b.appendChild(this._itemsToShow[a]);
        this.gridItems.$el[0].appendChild(b), this._itemsToShow = {}
    },
    _flushItemsToHide: function() {
        var a;
        this.gridItems.log.debug("_flushItemsToHide: hiding ", Object.keys(this._itemsToHide).length);
        for (a in this._itemsToHide) {
            var b = this._itemsToHide[a];
            b.parentNode && b.parentNode.removeChild(b)
        }
        this._itemsToHide = {}
    },
    logImpressions: function(a, b) {
        var c = this._getItemsInViewport(a, b), d = _.difference(this.lastKnownItemInfosInViewport, c);
        this.lastKnownItemInfosInViewport = c, this._reportImpressions(d, !1)
    },
    logInitialImpressions: function(a, b) {
        var c = this._getItemsInViewport(a, b), d = _.intersection(this.knownItemInfosInLastInterval, c);
        this.knownItemInfosInLastInterval = c, this._reportImpressions(d, !0)
    },
    _getItemsInViewport: function(a, b) {
        var c = [];
        return _.each(this.childCidToItemInfo, function(d) {
            var e = d.top + this.topBuffer, f = d.bottom - this.bottomBuffer, g=!(e >= b || f <= a);
            g && (c.push(d), null == d.impressionStart && (d.impressionStart = Date.now()))
        }.bind(this)), c
    },
    flushImpressions: function() {
        this._reportImpressions(this.lastKnownItemInfosInViewport, !1)
    },
    _reportImpressions: function(a, b) {
        function c(a) {
            var b = new Image;
            b.src = a, b.onload = function() {
                b = null
            }
        }
        var d = a;
        b && (d = _.filter(d, function(a) {
            return !a.initialImpressionReported
        }));
        for (var e = [], f = 0; f < d.length; f++) {
            var g = d[f], h = g.childModule.data ? g.childModule.data.view_tags: [];
            if (g.childModule.className === MODULE_NAME_PIN) {
                var i = g.childModule.getLoggingObjectIdStr();
                if (i) {
                    var j = g.childModule.getGridIndex();
                    e.push({
                        time: 1e6 * g.impressionStart,
                        pinIdStr: i,
                        endTime: 1e6 * Date.now(),
                        yPosition: g.top,
                        columnIndex: g.columnIndex,
                        slotIndex: j
                    }), b && (g.initialImpressionReported=!0)
                }
                h ? h.forEach(c) : g.log.warn("view_tags field is missing")
            }
        }
        if (e.length) {
            var k = this.options.impression_event_type || P.ContextLogging.EventType.PIN_IMPRESSION_ONE_PIXEL, l = P.ContextEvent.fromEventType(k);
            l.setPinImpressions(e), this.options.impression_metadata && l.updateAuxData(this.options.impression_metadata), P.ContextLogger.getInstance().addEvent(l)
        }
    }
};
var FixedHeightLayoutManager = function(a, b) {
    this.gridItems = a, this.options = b
};
FixedHeightLayoutManager.prototype = {
    resizeGrid: function() {},
    onChildContentChanged: function() {},
    onChildDimsChanged: function() {},
    onChildRendered: function() {},
    onChildAdded: function() {},
    positionGridChildren: function() {},
    empty: function() {},
    recalculateItemMeasurements: function() {},
    positionGrid: function() {
        this.gridItems.isReady() && this.gridItems._requestMoreItemsIfNeeded()
    },
    hideAndShowItems: function() {},
    onChildRemoved: function(a, b) {
        b.remove(), this.gridItems.triggerEvent(P.CONST.EVENT_CONTENT_CHANGED, null, !0)
    },
    getFilledHeight: function() {
        var a = this.gridItems.getWidth(!1), b = this.gridItems.children.length;
        if (0 === b)
            return 0;
        var c = this.gridItems.children[0], d = c.$el.outerWidth(!0), e = c.$el.outerHeight(!0), f = Math.floor(a / d), g = Math.ceil(b / f), h = b%f !== 0, i = g * e;
        return h && (i -= e), i
    },
    logImpressions: P.NOOP,
    flushImpressions: P.NOOP,
    logInitialImpressions: P.NOOP
};
var CloudGridLayoutManager = function(a, b) {
    this.gridItems = a, this.options = b, this.$gridEl = this.gridItems.$el, this.$gridEl.grid({
        children: [],
        gridGutter: this.options.layout_manager_options.grid_gutter,
        gridSize: this.options.layout_manager_options.grid_size,
        setChildPosition: function(a, b) {
            var c = a.parent();
            c.css(b)
        },
        unsetChildPosition: function(a) {
            var b = a.parent();
            b.css({
                left: "auto",
                top: "auto"
            })
        },
        setChildProperties: function(a, b) {
            a.css(b);
            var c = a.parent();
            c.css({
                visibility: "visible"
            })
        },
        unsetChildProperties: function(a) {
            var b = a.parent();
            b.css({
                visibility: "hidden"
            })
        },
        maxRows: this.options.layout_manager_options.max_rows
    }), _.each(this.gridItems.children, function(a) {
        this.$gridEl.grid("appendChild", a.$el, !0)
    }.bind(this))
};
CloudGridLayoutManager.prototype = {
    resizeGrid: function() {
        this.positionGridChildren(!1)
    },
    onChildContentChanged: function() {
        this.positionGridChildren(!1)
    },
    onChildDimsChanged: function() {
        this.positionGridChildren(!1)
    },
    onChildRendered: function() {},
    onChildAdded: function(a) {
        this.$gridEl.grid("appendChild", a.$el, !0)
    },
    positionGridChildren: function(a) {
        this.$gridEl.grid("reflowContent", a)
    },
    empty: function() {},
    recalculateItemMeasurements: function() {},
    positionGrid: function() {
        this.positionGridChildren(!1)
    },
    hideAndShowItems: function() {},
    onChildRemoved: function() {},
    getFilledHeight: function() {
        return this.$gridEl.grid("getFilledHeight")
    },
    logImpressions: P.NOOP,
    flushImpressions: P.NOOP,
    logInitialImpressions: P.NOOP
};
var DragManager = function(a, b) {
    var c = this;
    this.gridItems = a, b || (b = {}), b = _.extend({
        appendTo: $(".App"),
        cursor: "move",
        distance: 3,
        helper: "clone",
        scroll: !1,
        handle: ".draggable",
        revert: !1,
        drag: function(a, b) {
            var c = parseInt($(this).data("startingScrollTop"), 10);
            b.position.top -= c;
            var d = a.clientX - b.position.left, e = window.pageYOffset + a.clientY - b.position.top, f = b.helper.height(), g = b.helper.width(), h = d / g * 100, i = e / f * 100, j = "" + h + "% " + i + "%";
            b.helper.css("transformOrigin", j)
        },
        start: function(a) {
            var b = c.gridItems.getChildByElement($(a.target).find(".Module"));
            b && P.getConversationsManager().setDraggedObject(b), $(this).data("startingScrollTop", window.pageYOffset - P.CONST.PIN_MARGIN)
        },
        stop: function(a, b) {
            var c = parseInt($(this).data("startingScrollTop"), 10);
            P.getConversationsManager().setDraggedObject(null), b.position.top -= c
        }
    }, b), void 0 !== $.fn.draggable && this.gridItems.$(".item").draggable(b)
};
DragManager.prototype = {
    enable: function() {
        void 0 !== $.fn.draggable && this.gridItems.$(".item").draggable("enable")
    },
    disable: function() {
        void 0 !== $.fn.draggable && this.gridItems.$(".item").draggable("disable")
    }
};
var SortManager = function(a, b, c, d) {
    this.gridItems = a, b || (b = {}), b = _.extend({
        containment: "parent",
        cursor: "move",
        helper: "clone",
        items: "." + SORTABLE_ITEM_CLASS,
        tolerance: "pointer",
        zIndex: SORTABLE_ZINDEX
    }, b), this.gridItems.$el.sortable(b), this.childModuleName = c, this.idFn = d, this._setSortableMetadata(), this._hasNewElements=!0
};
SortManager.prototype = {
    _setSortableMetadata: function() {
        _.each(this.gridItems.getChildrenByModuleName(this.childModuleName), function(a) {
            this._addSortableItemClass(a)
        }.bind(this))
    },
    _addSortableItemClass: function(a) {
        var b = a.getParentElement();
        b.addClass(SORTABLE_ITEM_CLASS)
    },
    onChildAdded: function(a) {
        this._addSortableItemClass(a), this._hasNewElements=!0
    },
    getSortOrder: function() {
        var a = this.idFn, b = [];
        return this._hasNewElements && (_.each(this.gridItems.getChildrenByModuleName(this.childModuleName), function(b) {
            b.$el.attr("data-sort-id") || b.$el.attr("data-sort-id", a(b))
        }), this._hasNewElements=!1), _.each(this.gridItems.$el.find("." + this.childModuleName), function(a) {
            var c = $(a).attr("data-sort-id");
            c ? b.push(c) : sortManagerLog.error("child module's data-sort-id is null or undefined", {
                boardHtml: a.parentNode.innerHTML
            })
        }), b
    }
};
var GridItems = P.Module.extend({
    events: {
        "click .trackActiveItem .item": "onTrackItemClick",
        "click .itemClickMask": "onItemMaskClick"
    },
    mixins: [P.Mixins.PreventScroll],
    onChildNavigate: function(a) {
        var b = a.currentTarget;
        this.updateActiveItem(b.getParentElement())
    },
    onItemMaskClick: function(a) {
        var b = $(a.currentTarget), c = b.next(), d = this.getChildByElement(c[0]);
        return d ? void this.triggerEvent(P.CONST.EVENT_GRID_ITEM_SELECTED, {
            module : d
        },
        !0): void this.log.error("cannot find selected child module.")
    }, onTrackItemClick : function(a) {
        var b = a.currentTarget;
        this.updateActiveItem($(b))
    }, updateActiveItem: function(a) {
        var b = this.$(".activeItem");
        b.removeClass(CLASS_ACTIVE_ITEM), a.addClass(CLASS_ACTIVE_ITEM)
    }, onCreated: function() {
        this._scrollListener = null, this._scrollStopListener = null, this.alreadyInitialized=!1, this.scrollTop = 0, this.lastScrollTop = null, this.viewableHeight = null, this.lastTopBorder = null, this.lastBottomBorder = null, this.layoutManager = null, this.childListen(P.CONST.EVENT_CONTENT_CHANGED, this.onChildContentChanged), this.childListen(P.CONST.EVENT_DIMS_CHANGED, this.onChildDimsChanged)
    }, initializeSortManager: function(a, b, c) {
        this.sortManager = new SortManager(this, a, b, c)
    }, initializeDragManager: function(a) {
        this.dragManager = new DragManager(this, a)
    }, enableDragging: function() {
        this.dragManager && this.dragManager.enable()
    }, disableDragging: function() {
        this.dragManager && this.dragManager.disable()
    }, getSortOrder: function(a, b) {
        return this.sortManager ? this.sortManager.getSortOrder(a, b) : void 0
    }, getChildModuleAtIndex: function(a, b) {
        var c = this.children[a];
        return c && c.className === b ? c : null
    }, getChildren: function() {
        return this.children
    }, onOptionsChanged: function() {
        this._setScrollableElement(), this.alreadyInitialized=!1
    }, onResourceChanged: function() {
        this.alreadyInitialized=!1
    }, prependChildItem: function(a) {
        var b = 0;
        this.children.length > 0 && this.children[0].options.anchored && (b = 1);
        var c;
        this.children.length > b && (c = this.children[b].$el.parent()), this.insertChildBefore(a, this.$el, b, c), this.layoutManager.positionGrid()
    }, prependNewItems: function(a, b) {
        var c = 0, d = P.resourceFactory.clone(this.resource);
        d.resetBookmark(), d.set("prepend", !1), d.set("page_size", a);
        var e = new GridItems({
            resource: d
        });
        this.children.length > 0 && this.children[0].options.anchored && (c = 1), e.options = this.options, e.render().then(function() {
            _.each(e.children.reverse(), function(a) {
                a.remove(), this.insertChild(a, this.$el, c)
            }.bind(this)), this.layoutManager.positionGrid(), b && b()
        }.bind(this))
    }, requestMoreItems: function() {
        this.isReady() && this._requestMoreItems()
    }, hasMoreItems: function() {
        return this.resource&&!this.resource.atEnd()
    }, _triggerIfItemsEnd: function() {
        this.hasMoreItems() || this.triggerEvent(P.CONST.EVENT_ITEMS_END, null, !0)
    }, setPageSize: function(a) {
        this.resource && this.resource.set("page_size", a)
    }, setHasScroll: function(a) {
        this.$el.toggleClass("hasScroll", a)
    }, onAddedToDom: function() {
        this.resizeListener = this.listen(P.Viewport, P.CONST.EVENT_RESIZE, this.onResize), this.navigateListener = this.childListen(P.CONST.EVENT_NAVIGATE, this.onChildNavigate), this._setUpGrid(), this.isReady() && this.layoutManager.recalculateItemMeasurements(), this.onResize()
    }, onResize: function() {
        this.isReady() && this.layoutManager.resizeGrid()
    }, hasItems: function() {
        return this.children.length > 0
    }, onContentReady: function() {
        this.$el.removeClass("loadingItems");
        var a = this.options.layout;
        if (a && "variable_height" !== a)
            if ("fixed_height" === a)
                this.layoutManager = new FixedHeightLayoutManager(this, this.options);
            else {
                if ("cloud_grid" !== a)
                    return void this.log.error('GridItems invalid value for "layout"', a);
                    this.layoutManager = new CloudGridLayoutManager(this, this.options)
            } else 
                this.layoutManager = new VariableHeightLayoutManager(this, this.options);
        this._setUpGrid(), this._triggerIfItemsEnd(), P.setInterval(this.scheduleInitialImpressions.bind(this), INITIAL_IMPRESSION_LOGGING_INTERVAL_MS)
    }, onRemovedFromDom: function() {
        this._scrollListener && (this.removeListener(this._scrollListener), this._scrollListener = null), this._scrollStopListener && (this.removeListener(this._scrollStopListener), this._scrollStopListener = null), this.stopPreventScroll(), this.layoutManager && this.layoutManager.flushImpressions(), this.navigateListener && this.removeListener(this.navigateListener), this.resizeListener && this.removeListener(this.resizeListener)
    }, scrollToActiveItem: function(a) {
        var b = a.height(), c = this.$(".activeItem"), d = c.offset().top;
        a.scrollTop(d - b)
    }, onChildContentChanged: function(a) {
        a.stopPropagation();
        var b = a.currentTarget;
        this.isReady() && (this.layoutManager.onChildContentChanged(b), this.rearrangeItems(!0), this.scheduleImpressionLogging())
    }, onChildDimsChanged: function(a) {
        a.stopPropagation();
        var b = a.currentTarget;
        this.isReady() && this.layoutManager.onChildDimsChanged(b)
    }, onChildRendered: function(a) {
        this.isReady() && this.layoutManager.onChildRendered(a)
    }, onChildAdded: function(a) {
        a && a.data && (a.data.grid_index = this.children.length - 1);
        var b = a.getParentElement();
        if (!b.hasClass("item")) {
            var c = $("<div></div>").addClass("item");
            c.insertBefore(a.$el), c.append(a.$el), b = c
        }
        this.layoutManager && this.layoutManager.onChildAdded(a), this.sortManager && this.sortManager.onChildAdded(a)
    }, onChildRemoved: function(a, b) {
        this.layoutManager && this.layoutManager.onChildRemoved(a, b)
    }, empty: function() {
        this.isEmptying=!0, P.Module.prototype.empty.call(this), this.alreadyInitialized=!1, this.contentReady=!1, this.layoutManager && this.layoutManager.empty(), this.isEmptying=!1
    }, handleError: function(a) {
        this.pendingMoreRequest ? this.$(".errorMessage").remove() : P.Module.prototype.handleError.call(this, a)
    }, _setUpGrid: function() {
        this._setScrollableElement(), this.isReady()&&!this.alreadyInitialized && (this.layoutManager.positionGrid(), this.alreadyInitialized=!0, this._computeScrollableHeightAndOffset())
    }, _setScrollableElement: function() {
        var a = _.throttle(this._onScroll, 16), b = _.debounce(this._onScrollStop, 2e3);
        this._scrollListener && (this.removeListener(this._scrollListener), this._scrollListener = null), this._scrollStopListener && (this.removeListener(this._scrollStopListener), this._scrollStopListener = null), this.scrollableElement = this.getScrollableElement(), this.options.scrollable && (this._scrollListener = this.listen(this.scrollableElement, "scroll", a), this._scrollStopListener = this.listen(this.scrollableElement, "scroll", b)), this._preventDefaultIfNeeded()
    }, isReady: function() {
        return this.inDom && this.contentReady
    }, rearrangeItems: function(a) {
        this._requestMoreItemsIfNeeded(), this._hideAndShowItems(a)
    }, _onScroll: function() {
        this.lastScrollTop = this.scrollTop, this.scrollTop = this.getScrollableElement().scrollTop(), this.lastScrollTop !== this.scrollTop && (this.rearrangeItems(!0), this.scheduleImpressionLogging())
    }, _onScrollStop: function() {
        this.layoutManager._flushItemsToHide && P.deferDomManipulation(this.layoutManager._flushItemsToHide)
    }, scheduleImpressionLogging: function() {
        this.options.track_item_impressions && (this._impressionLoggingScheduled || (this._impressionLoggingScheduled=!0, P.deferDomManipulation(function() {
            this._impressionLoggingScheduled=!1;
            var a = this.scrollTop - this.offsetFromScrollElement, b = a + this.viewableHeight;
            this.layoutManager.logImpressions(a, b)
        }.bind(this))))
    }, scheduleInitialImpressions: function() {
        if (this.options.track_item_impressions) {
            var a = this.scrollTop - this.offsetFromScrollElement, b = a + this.viewableHeight;
            this.layoutManager.logInitialImpressions(a, b)
        }
    }, _hideAndShowItems: function(a) {
        if (this.options.virtualize) {
            a = a ||!1;
            var b=!this.lastScrollTop || this.scrollTop >= this.lastScrollTop ? Direction.DOWN : Direction.UP, c = this.scrollTop - this.offsetFromScrollElement, d = c + this.viewableHeight, e = c - ITEM_HIDE_BUFFER, f = d + ITEM_HIDE_BUFFER, g = null === this.lastTopBorder || null === this.lastBottomBorder || c < this.lastTopBorder || d > this.lastBottomBorder;
            (g || a) && (this.layoutManager.hideAndShowItems(a, this.pendingMoreRequest, b, e, f), this.lastTopBorder = e, this.lastBottomBorder = f)
        }
    }, onRendered: function() {
        this._requestMoreItemsIfNeeded(), P.Module.prototype.onRendered()
    }, _computeScrollableHeightAndOffset: function() {
        this.viewableHeight = this.scrollableElement.height(), this.offsetFromScrollElement = this.$el.positionAncestor(this.scrollableElement).top
    }, _requestMoreItemsIfNeeded: function() {
        if (this.isReady() && this.options.scrollable&&!this.pendingMoreRequest&&!this.hasError && this.hasMoreItems()) {
            this._computeScrollableHeightAndOffset();
            var a = this.offsetFromScrollElement + this.layoutManager.getFilledHeight();
            a - (this.viewableHeight + this.scrollTop) > 2 * this.viewableHeight || this._requestMoreItems()
        }
    }, _requestMoreItems: function(a) {
        _.isUndefined(a) && (a = 2), this.pendingMoreRequest || (this.triggerEvent(P.CONST.EVENT_ITEMS_REQUEST_START, null, !0), this.pendingMoreRequest=!0, this.renderAdditional(P.ModuleRenderType.APPEND).then(function() {
            this.layoutManager.positionGridChildren(!0), this.pendingMoreRequest=!1, this.hasError && (this.triggerEvent(P.CONST.EVENT_ERROR_RESOLVED, null, !0), this.hasError=!1), this.triggerEvent(P.CONST.EVENT_ITEMS_REQUEST_SUCCESS, null, !0), this._requestMoreItemsIfNeeded(), this._triggerIfItemsEnd(), this.scheduleImpressionLogging()
        }.bind(this), function() {
            a > 0 ? this._requestMoreItems(a - 1) : (this.hasError=!0, this.triggerEvent(P.CONST.EVENT_ERROR, null, !0), this._triggerIfItemsEnd())
        }.bind(this)))
    }, _preventDefaultIfNeeded: function() {
        this.options.prevent_default_scroll && this.startPreventScroll(this.scrollableElement, this.$el)
    }
});
P.modules.GridItems = GridItems, P.modules.GridItems.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/GridItems/GridItems.nunjucks"), goog.provide("P.modules.HeroHelperBase"), goog.require("P.Module");
var BUTTON_ID_CLOSE = "close", HIDE_DELAY_MILLISECONDS = 1e3;
P.modules.HeroHelperBase = P.Module.extend({
    onContentReady: function() {
        this.childListen(P.CONST.EVENT_BUTTON_CLICK, this._onButtonClick), this.placementId = Number(this.options.placement_id), this.experienceId = Number(this.options.experience_id), this.placedExperienceId = this.options.placed_experience_id, this.setExperienceViewed()
    },
    hide: function() {
        this.fadeOut(function() {
            this.destroy()
        }.bind(this))
    },
    dismiss: function(a) {
        P.trackGAEvent("hero_helper_" + this.options.type, P.CONST.GA_ACTION_CLICK_CLOSE), this.dismissPlacedExperience(), a || this.hide()
    },
    complete: function(a) {
        P.trackGAEvent("hero_helper_" + this.options.type, P.CONST.GA_ACTION_CLICK_CONFIRM), this.completePlacedExperience(), a || (this.options.delay_hide ? P.setTimeout(function() {
            this.hide()
        }.bind(this), HIDE_DELAY_MILLISECONDS) : this.hide())
    },
    setExperienceViewed: function() {
        P.trackGAEvent("hero_helper_" + this.options.type, "viewed");
        var a = P.ExperienceManager.instance();
        this.placedExperienceId ? a.viewPlacedExperienceId(this.placedExperienceId) : a.viewPlacedExperience(this.placementId, this.experienceId)
    },
    completePlacedExperience: function() {
        var a = P.ExperienceManager.instance();
        return this.placedExperienceId ? a.completePlacedExperienceId(this.placedExperienceId) : a.completePlacedExperience(this.placementId, this.experienceId)
    },
    dismissPlacedExperience: function() {
        var a = P.ExperienceManager.instance();
        return this.placedExperienceId ? a.dismissPlacedExperienceId(this.placedExperienceId) : a.dismissPlacedExperience(this.placementId, this.experienceId)
    },
    onButtonClick: function() {},
    _onButtonClick: function(a) {
        this.onButtonClick(a);
        var b = a.target;
        b.id === BUTTON_ID_CLOSE && this.dismiss()
    }
}), P.modules.HeroHelperBase.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.HeroPlacePinsBase"), goog.require("P.Module"), goog.require("P.modules.HeroHelperBase"), P.modules.HeroPlacePinsBase = P.modules.HeroHelperBase.extend({}), P.modules.HeroPlacePinsBase.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.HeroPlacePinsExamplesBase"), goog.require("P.Module"), goog.require("P.modules.HeroHelperBase"), P.modules.HeroPlacePinsExamplesBase = P.modules.HeroHelperBase.extend({}), P.modules.HeroPlacePinsExamplesBase.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.HeroScooterPinnerStory"), goog.require("P.Module"), goog.require("P.modules.HeroHelperBase"), P.modules.HeroScooterPinnerStory = P.modules.HeroHelperBase.extend({
    onContentReady: function() {
        P.modules.HeroHelperBase.prototype.onContentReady.apply(this, arguments), this.placedExperienceId = P.ExperienceManager.instance().constructPlacedExperienceId(this.placementId, this.experienceId)
    }
}), P.modules.HeroScooterPinnerStory.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.Image"), goog.require("P.Module"), P.modules.Image = P.Module.extend({}), P.modules.Image.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ImagesFeedPageBase"), goog.require("P.Module"), P.modules.ImagesFeedPageBase = P.Module.extend({}), P.modules.ImagesFeedPageBase.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.Interest"), goog.require("P.Module"), P.modules.Interest = P.Module.extend({
    events: {
        click: "onClick"
    },
    onClick: function() {
        this.triggerEvent(P.CONST.EVENT_ITEM_CLICK, this.data, !0), this.options.show_mask && this.$(".wholeInterestMask").toggle(), this.options.checkable && this.$(".selectCheck").toggleClass("checked")
    },
    onContentReady: function() {
        var a = parseInt(this.$el.attr("class").replace(/^.*size([0-9]+).*$/, "$1"), 10).toString().split(""), b = "N" === a[0] ? 1: parseFloat(a[0]);
        this.state = b, $.data(this.$el, "grid-columns", this.state), $.data(this.$el, "grid-rows", this.state)
    }
}), P.modules.Interest.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/Interest/Interest.nunjucks"), goog.provide("P.modules.InterestFeedPageBase"), goog.require("P.Module"), P.modules.InterestFeedPageBase = P.Module.extend({}), P.modules.InterestFeedPageBase.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.LikeButton"), goog.require("P.Module"), goog.require("P.modules.Button");
var CLASS_UNLIKE = "unlike";
P.modules.LikeButton = P.modules.Button.extend({
    onClick: function() {
        this.ensureAuthentication() && this._toggle()
    },
    getAuthRedirectUrl: function() {
        P.trackRegisterAction("inline_signup_landing");
        var a = P.resourceFactory.create("InlineSignupModalResource", {});
        a.callCreate().then(function(a) {
            var b = a.resource_response.data, c = b.inline_signup_modal;
            if (!P.currentUser.isAuthenticated()) {
                if ("mixed_https_enabled" === c || "employees" === c)
                    return P.trackRegisterAction("show_inline_signup"), P.UserRegistration.showSignupModal(null, {
                        redirect_to_signup: !0,
                        can_dismiss: !1,
                        show_skip_button: !0,
                        inline_signup_modal: c
                    });
                if ("giftwrap" === c || "employees_gw" === c)
                    return P.UserRegistration.showSignupModal(null, {
                        extra_class: "redesign",
                        redirect_to_signup: !0,
                        can_dismiss: !1,
                        prev: window.location.pathname,
                        tagline: P._("Sign up to get more details about this Pin and discover more great ideas!")
                    })
            }
            P.changeWindowLocation(P.getRegisterUrl({
                action: "like"
            }), !1)
        })
    },
    setState: function(a) {
        var b = this.$el;
        this.options.liked = a, a ? (b.addClass(CLASS_UNLIKE), this.$(".buttonText").html(b.data("text-unlike"))) : (b.removeClass(CLASS_UNLIKE), this.$(".buttonText").html(b.data("text-like")))
    },
    getLikeResource: function() {
        throw new Error("must be overridden")
    },
    onOptimisticToggle: function() {},
    onToggleSuccess: function() {},
    _toggle: function() {
        var a=!this.options.liked, b = this.getLikeResource(a);
        if (b) {
            var c = a ? b.callCreate(): b.callDelete();
            this.options.optimistic ? (this.setState(a), this.onOptimisticToggle(a), c.then(function() {
                this.onToggleSuccess(a)
            }.bind(this), function() {
                this.setState(!a)
            }.bind(this))) : (this.showLoading(), c.then(function() {
                this.setState(a), this.onToggleSuccess(a)
            }.bind(this)).fin(function() {
                this.hideLoading()
            }.bind(this)))
        }
    }
}), P.modules.LikeButton.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/LikeButton/LikeButton.nunjucks"), goog.provide("P.modules.List"), goog.require("P.Module"), P.modules.List = P.Module.extend({
    events: {
        "click li": "onItemClick"
    },
    onItemClick: function(a) {
        this.triggerEvent(P.CONST.EVENT_LIST_ITEM_CLICK, a.target, !1)
    },
    onChildRemoved: function(a, b) {
        b.remove()
    },
    hasMoreItems: function() {
        return this.resource&&!this.resource.atEnd()
    },
    requestMoreItems: function() {
        this._requestMoreItems()
    },
    _requestMoreItems: function(a) {
        _.isUndefined(a) && (a = 2), this.triggerEvent(P.CONST.EVENT_ITEMS_REQUEST_START, null, !0), this.renderAdditional(P.ModuleRenderType.APPEND).then(function() {
            this.triggerEvent(P.CONST.EVENT_ITEMS_REQUEST_SUCCESS, null, !0)
        }.bind(this), function() {
            a > 0 && this._requestMoreItems(a - 1), this.triggerEvent(P.CONST.EVENT_ITEMS_REQUEST_ERROR, null, !0)
        }.bind(this))
    },
    onChildAdded: function(a) {
        var b = a.getContent(), c = b.parent(), d = this.options.list_item_class_name || "";
        if ("LI" !== c.prop("tagName") || d&&!c.hasClass(d)) {
            var e = $("<li></li>").addClass(d);
            e.insertBefore(b), e.append(b)
        }
    },
    setPageSize: function(a) {
        this.resource && this.resource.set("page_size", a)
    }
}), P.modules.List.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/List/List.nunjucks"), goog.provide("P.modules.LoginBase"), goog.require("P.Module"), P.modules.LoginBase = P.Module.extend({
    events: {},
    onContentReady: function() {
        var a = P.getQueryStringParams().message;
        if (a) {
            var b;
            "reactivate" === a ? b = P._("Your account has been reactivated! Please log in to continue.") : "permanent_account_closure" === a && (b = P._("Thanks for giving Pinterest a try. Your account will be closed soon.")), this.showError(b)
        }
        this.setupForm(), this.listen(this.form, P.CONST.EVENT_SUBMIT_VALIDATED, this.onSubmitValidated), this.getChildById("facebookLogin") && this.listen(this.getChildById("facebookLogin"), P.CONST.EVENT_BUTTON_CLICK, this.facebookConnect), this.getChildById("twitterLogin") && this.listen(this.getChildById("twitterLogin"), P.CONST.EVENT_BUTTON_CLICK, this.twitterConnect), this.getChildById("rakutenLogin") && this.listen(this.getChildById("rakutenLogin"), P.CONST.EVENT_BUTTON_CLICK, this.rakutenConnect), this.getChildById("emailSignup") && this.listen(this.getChildById("emailSignup"), P.CONST.EVENT_BUTTON_CLICK, this.onEmailSignup), this.getChildById("facebookSignup") && this.listen(this.getChildById("facebookSignup"), P.CONST.EVENT_BUTTON_CLICK, this.onFacebookSignup), this.getChildById("twitterSignup") && this.listen(this.getChildById("twitterSignup"), P.CONST.EVENT_BUTTON_CLICK, this.onTwitterSignup), this.getChildById("rakutenSignup") && this.listen(this.getChildById("rakutenSignup"), P.CONST.EVENT_BUTTON_CLICK, this.onRakutenSignup), P.trackRegisterAction("register_landing")
    },
    setupForm: function() {
        this.$form = this.$("form"), this.form = new P.Form(this.$form, {
            username_or_email: [P.Validator.Required(), P.Validator.Email()],
            password: [P.Validator.Required()]
        }, {})
    },
    onSubmitValidated: function(a) {
        if (!a["errors[0]"]) {
            var b = this.form.getValue("username_or_email");
            this.login({
                username_or_email: b,
                password: this.form.getValue("password")
            }).then(void 0, function(a) {
                if (this.showError(a.message), a.api_error_code === P.CONST.AUTO_PASSWORD_RESET_ERROR_CODE) {
                    var c = P.getResetPasswordOneClickUrl({
                        username_or_email: b
                    });
                    this.navigate(c)
                }
            }.bind(this))
        }
    },
    twitterConnect: function(a) {
        a.stopPropagation(), this.connect(P.SocialConnect.TWITTER, this.onTwitterConnectSuccess.bind(this))
    },
    facebookConnect: function(a) {
        a.stopPropagation(), this.connect(P.SocialConnect.FACEBOOK, this.onFacebookConnectSuccess.bind(this))
    },
    rakutenConnect: function(a) {
        a.stopPropagation(), this.connect(P.SocialConnect.RAKUTEN, this.onRakutenConnectSuccess.bind(this))
    },
    onEmailSignup: function() {
        P.trackRegisterAction("register_email")
    },
    onFacebookSignup: function(a) {
        a.stopPropagation(), P.trackRegisterAction("register_facebook_attempt"), this.facebookConnect(a)
    },
    onTwitterSignup: function(a) {
        a.stopPropagation(), P.trackRegisterAction("register_twitter_attempt"), this.twitterConnect(a)
    },
    onRakutenSignup: function(a) {
        a.stopPropagation(), P.trackRegisterAction("register_rakuten_attempt"), this.rakutenConnect(a)
    },
    onFacebookConnectSuccess: function(a) {
        var b = this.getChildById("facebookSignup");
        this.login({
            facebook_id: a.id,
            facebook_token: a.access_token
        }).then(void 0, function(a) {
            this.options.register ? (b.showLoading(), P.UserRegistration.fastTrackSocialRegistration(P.SocialConnect.FACEBOOK).then(function() {
                var a = "/";
                this.options.auto_follow_interest && (a = P.url.appendQueryString(a, {
                    auto_follow_interest: this.options.auto_follow_interest
                })), P.changeWindowLocation(a, !1)
            }.bind(this), function() {
                this.navigate("/join/register/facebook/")
            }.bind(this)).fin(function() {
                b.hideLoading()
            })) : P.showError(a.message)
        }.bind(this))
    },
    onTwitterConnectSuccess: function(a) {
        P.SessionStorage.setItem(P.CONST.SESSION_TWITTER_ID, a.id), P.SessionStorage.setItem(P.CONST.SESSION_TWITTER_TOKEN, a.oauth_token), P.SessionStorage.setItem(P.CONST.SESSION_TWITTER_TOKEN_SECRET, a.oauth_secret), P.SessionStorage.setItem(P.CONST.SESSION_TWITTER_FIRST_NAME, a.first_name), P.SessionStorage.setItem(P.CONST.SESSION_TWITTER_LAST_NAME, a.last_name), P.SessionStorage.setItem(P.CONST.SESSION_TWITTER_USERNAME, a.screen_name), P.SessionStorage.setItem(P.CONST.SESSION_TWITTER_IMAGE_URL, a.image_url), this.options.register ? this.navigate("/join/register/twitter/") : this.login({
            twitter_id: a.id,
            twitter_token: a.oauth_token,
            twitter_token_secret: a.oauth_secret
        }).then(void 0, function(a) {
            P.showError(a.message)
        })
    },
    onRakutenConnectSuccess: function(a) {
        P.SessionStorage.setItem(P.CONST.SESSION_RAKUTEN_ID, a.id), P.SessionStorage.setItem(P.CONST.SESSION_RAKUTEN_TOKEN, a.access_token), P.SessionStorage.setItem(P.CONST.SESSION_RAKUTEN_REFRESH_TOKEN, a.refresh_token), P.SessionStorage.setItem(P.CONST.SESSION_RAKUTEN_FIRST_NAME, a.first_name), P.SessionStorage.setItem(P.CONST.SESSION_RAKUTEN_GENDER, a.gender), P.SessionStorage.setItem(P.CONST.SESSION_RAKUTEN_EMAIL, a.email), this.login({
            rakuten_id: a.id,
            rakuten_token: a.access_token,
            rakuten_refresh_token: a.refresh_token
        }).then(void 0, function(a) {
            if (this.options.register) {
                var b = this.getChildById("rakutenSignup");
                b.showLoading(), P.UserRegistration.fastTrackSocialRegistration(P.SocialConnect.RAKUTEN).then(function() {
                    P.changeWindowLocation("/", !1)
                }, function() {
                    this.navigate("/join/register/rakuten/")
                }.bind(this)).fin(function() {
                    b.hideLoading()
                })
            } else 
                P.showError(a.message)
        }.bind(this))
    },
    showError: function(a) {
        this.$(".loginError").html("<p>" + a + "</p>").show()
    },
    connect: function(a, b) {
        return P.SocialConnect.instance().connect(a, {
            success: function(a) {
                b(a)
            },
            error: function(a) {
                a.alertedUpstream || P.showError(P.string.common.connectError)
            }
        }), !1
    },
    autoFollowInterest: function(a) {
        var b = {
            interest_list: "favorited",
            interest_id: a
        }, c = "InterestFollowResource", d = "interest_auto_follow", e = P.resourceFactory.create(c, b);
        e.callCreate({
            showError: !1
        }).then(function() {
            P.trackGAEvent(d, P.CONST.GA_ACTION_SUCCESS)
        }, function() {
            P.trackGAEvent(d, P.CONST.GA_ACTION_ERROR)
        })
    },
    login: function(a) {
        var b = this.getChildById("loginButton");
        b && b.showLoading();
        var c = P.SessionStorage.getItem(P.CONST.SESSION_KEY_INVITE_FOLLOW);
        return P.currentUser.login(a).then(function() {
            this.showLoading(!0), this.options.auto_follow_interest && this.autoFollowInterest(this.options.auto_follow_interest), this.redirect(c)
        }.bind(this)).fin(function() {
            b && b.hideLoading()
        })
    },
    redirect: function(a) {
        var b = "/";
        a && (a.invite_follow_user ? b = "/" + a.invite_follow_user + "/" : a.invite_follow_board && (b = "/" + a.invite_follow_board + "/"), P.SessionStorage.removeItem(P.CONST.SESSION_KEY_INVITE_FOLLOW));
        var c = this.options.next || b;
        this.options.auto_follow_interest && (c = P.url.appendQueryString("/explore/" + this.options.auto_follow_interest, {
            auto_follow: "true"
        })), P.navigateAfterLoginStatusChange(c)
    }
}), P.modules.LoginBase.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.LoginPageBase"), goog.require("P.Module"), P.modules.LoginPageBase = P.Module.extend({
    events: {}
}), P.modules.LoginPageBase.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.LogoutPage"), goog.require("P.Module"), P.modules.LogoutPage = P.Module.extend({
    events: {},
    onContentReady: function() {
        this.logout()
    },
    logout: function() {
        var a = P.resourceFactory.create("UserSessionResource", {
            disable_auth_failure_redirect: !0
        }), b = this.options.next || "/", c = P.currentUser.get("username");
        a.callDelete().then(function() {
            P.SessionStorage.clear(), P.LocalStorage.clear(), P.currentUser.logout().then(function() {
                if ("/" !== b)
                    P.navigateAfterLoginStatusChange(b);
                else {
                    var a = b + "?username=" + c;
                    P.trackRegisterAction("app_install_logout"), P.navigateAfterLoginStatusChange(a)
                }
            })
        })
    }
}), P.modules.LogoutPage.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.Map"), goog.require("P.Module"), goog.require("P.versionedFileLoader");
var SAFE_ZONE_MIN_PADDING_VALUE = 70;
P.MarkerOptions = function() {
    this.pin = null, this.highlighted=!1, this.animated=!1, this.placeholder=!1, this.latitude=!1, this.longitude=!1
}, P.MarkerOptionsFactory = {}, P.MarkerOptionsFactory.fromPlainObject = function(a) {
    var b = new P.MarkerOptions;
    return "pin"in a && (b.pin = a.pin), "highlighted"in a && (b.highlighted = a.highlighted), "animated"in a && (b.animated = a.animated), "placeholder"in a && (b.placeholder = a.placeholder), "latitude"in a && (b.latitude = a.latitude), "longitude"in a && (b.longitude = a.longitude), "type"in a && "place" === a.type && (b.place = a), b
};
var VIEW_TYPE_BOARD_PAGE = "board_page", VIEW_TYPE_CLOSEUP = "closeup", CLASS_FADE_OUT_UP = "fadeOutUp", CLASS_TOP_ZINDEX = "topZIndex", NUNJUCKS_TEMPLATE_DIRECTORY = "app/common/modules/Map/", TEMPLATE_POPUP_DEFAULT = NUNJUCKS_TEMPLATE_DIRECTORY + "markerPopup.nunjucks", MARKER_CLUSTER_TEMPLATE = NUNJUCKS_TEMPLATE_DIRECTORY + "markerCluster.nunjucks", MARKER_TEMPLATE = NUNJUCKS_TEMPLATE_DIRECTORY + "marker.nunjucks", TEMPLATE_POPUP_TOAST = NUNJUCKS_TEMPLATE_DIRECTORY + "addToMapToast.nunjucks", MAX_ZOOM_LEVEL = 17, DEFAULT_POPUP_WIDTH = 270, TIME_UNTIL_TOAST_REMOVES_SELF = 3e3, TIME_MARKER_ANIMATION = 500, TIME_TOAST_FADE_ANIMATION = 300;
P.modules.Map = P.Module.extend({
    setup: function() {
        this.map || (this._generateMap(this.options.map_id), this._initializeMapHandlers(), this._paddingTopLeft = L.point(0, 0)), this.triggerEvent(P.CONST.EVENT_MAP_READY, null, !0)
    },
    _isBoardView: function() {
        return this.options.view_type === VIEW_TYPE_BOARD_PAGE
    },
    _isCloseupView: function() {
        return this.options.view_type === VIEW_TYPE_CLOSEUP
    },
    addMarkerToCloseupMap: function() {
        var a = this.options.pin_geo;
        if (a) {
            var b = [a.latitude, a.longitude], c = this.map, d = {
                highlighted: !0,
                animated: !1,
                pin: this.options.pin
            }, e = this._generateDivIcon(d), f = L.marker(b, {
                icon: e
            });
            f.addTo(c);
            var g = f.getLatLng();
            c.setView(g, 15)
        }
    },
    replaceToastWithDefaultPopup: function(a) {
        var b = a._source, c = b.options;
        c.template = TEMPLATE_POPUP_DEFAULT;
        var d = this._generatePopup(c);
        b.bindPopup(d, {
            closeButton: !1,
            autoPan: !1,
            maxWidth: DEFAULT_POPUP_WIDTH,
            minWidth: DEFAULT_POPUP_WIDTH
        })
    },
    addMarkerToMap: function(a) {
        var b = this._generateMarker(a), c = a.placeholder ? this.placeholderMarkerLayer: this.markerLayer;
        if (!a.placeholder) {
            a.animated && (a.template = TEMPLATE_POPUP_TOAST);
            var d = this._generatePopup(a);
            _.extend(b.options, a), b.bindPopup(d, {
                closeButton: !!a.animated,
                autoPan: !1,
                maxWidth: P.CONST.PIN_WIDTH,
                minWidth: P.CONST.PIN_WIDTH
            })
        }
        b.addTo(c), a.placeholder ? b._bringToFront() : this.map.fire("moveend")
    },
    toggleTranslucentMarkers: function(a) {
        var b = this.markerLayer.getLayers();
        _.each(b, function(b) {
            var c = this.markerLayer.getVisibleParent(b);
            c && $(c._icon).toggleClass("fadeOut notActionable", a)
        }.bind(this))
    },
    _generateMarker: function(a) {
        var b = a.pin, c = a.highlighted, d = a.animated, e = a.coordinates || b.getCoordinates(), f = a.name, g = a.placeholder, h = {
            highlighted: c,
            animated: d,
            placeholder: g,
            pin: b
        };
        f && (h.name = f);
        var i, j;
        if (b) {
            i = b.getPinId();
            var k = b.getPlaceData();
            k && (j = k.id)
        }
        "place"in a && (j = a.place.id);
        var l = this._generateDivIcon(h), m = L.marker(e, {
            icon: l,
            riseOnHover: !0,
            pin_id: i,
            place: j
        });
        return i && (m.pin_id = i), m
    },
    _generatePopup: function(a) {
        var b = a.pin, c = a.name || b.getPlaceName(), d = b.getPlaceData() || a, e = a.template || TEMPLATE_POPUP_DEFAULT, f = P.renderNunjucks(e, {
            name: c,
            place: d,
            url: d.url
        });
        return f
    },
    _generateDivIcon: function(a) {
        var b = this._getDivIconOptions(a), c = L.divIcon(b);
        return c
    },
    clearMarkers: function() {
        this.markerLayer.clearLayers()
    },
    getCityBoundsFromCenter: function(a) {
        var b = .05;
        return this.makeLatLngBoundsFromLatLngAndPadding(a, b)
    },
    makeLatLngBoundsFromLatLngAndPadding: function(a, b) {
        var c = L.latLng(a.lat - b, a.lng - b), d = L.latLng(a.lat + b, a.lng + b);
        return L.latLngBounds(c, d)
    },
    getCenter: function() {
        var a = this.map && this.map.getCenter();
        return a ? a : null
    },
    setPaddingTopLeft: function(a) {
        this._paddingTopLeft = a
    },
    getZoom: function() {
        return this.map ? this.map.getZoom() : null
    },
    getBounds: function() {
        return this.map ? this.map.getBounds() : null
    },
    highlightMarkerForPinId: function(a) {
        this._setHighlightMarkerForPinId(a, !0)
    },
    showOnlyPlaceholderMarkerAtIndex: function(a) {
        var b = this.placeholderMarkerLayer.getLayers();
        _.each(b, function(b, c) {
            c !== a ? $(b._icon).hide() : $(b._icon).show()
        })
    },
    showAllPlaceholderMarkers: function() {
        var a = this.placeholderMarkerLayer.getLayers();
        _.each(a, function(a) {
            $(a._icon).show()
        })
    },
    unHighlightMarkerForPinId: function(a) {
        this._setHighlightMarkerForPinId(a, !1);
        var b = this.getMarkerForPin(a);
        b && b.closePopup()
    },
    removeMarkerForPinId: function(a) {
        var b = this.getMarkerForPin(a);
        b && this.markerLayer.removeLayer(b)
    },
    _setHighlightMarkerForPinId: function(a, b) {
        var c = this.getMarkerForPin(a);
        if (this.markerLayer) {
            var d = this.markerLayer.getVisibleParent(c);
            b ? this.highlightMarker(d) : this.unHighlightMarker(d)
        }
    },
    unHighlightMarker: function(a) {
        var b = this.markerLayer.getVisibleParent(a), c = this._getIconElement(b);
        c.removeClass("highlightedMarkerIcon"), this._highlightedPinMarker = null
    },
    _getIconElement: function(a) {
        var b = $(a._icon);
        return b.find(".markerCluster, .markerIcon").first()
    },
    highlightMarker: function(a) {
        var b = this.markerLayer.getVisibleParent(a), c = this._getIconElement(b);
        c.addClass("highlightedMarkerIcon"), this._highlightedPinMarker = b
    },
    _setHighlightMarker: function(a, b, c) {
        var d = this._generateDivIcon({
            highlighted: b,
            animated: !1,
            placeholder: c
        });
        a.setIcon(d), a._highlighted = b, b && a._bringToFront()
    },
    getHighlightedMarker: function() {
        return this._highlightedPinMarker
    },
    _initializeMapHandlers: function() {
        this._isBoardView() && (this.map.markerLayer.on("mousedown", function() {
            this._triggerBodyMousedown()
        }.bind(this)), this.map.on("mousedown", function() {
            this._triggerBodyMousedown()
        }.bind(this)), this.map.on("dragend", function() {
            this.onDragEnd()
        }.bind(this)), this.map.on("zoomend", function() {
            this.onZoomEnd()
        }.bind(this)), this.markerLayer.on("popupopen", function(a) {
            var b = a.popup;
            this.onPopupOpen(b)
        }.bind(this)), this.markerLayer.on("popupclose", function(a) {
            var b = a.popup;
            this.onPopupClose(b)
        }.bind(this)), this.markerLayer.on("clusterclick", function() {
            this.onClusterClick()
        }.bind(this)))
    },
    onClusterClick: function(a) {
        this.closeAllMarkerPopups(), this.triggerEvent(P.CONST.EVENT_MAP_CLUSTER_CLICK, a, !0)
    },
    onPopupOpen: function(a) {
        var b = a._wrapper, c = a._source, d = c._icon, e = this.clientRectToBounds(b.getBoundingClientRect()), f = this.clientRectToBounds(d.getBoundingClientRect()), g = this.mergeBounds(e, f);
        this.ensureBoundsInSafeBounds(g);
        var h = c.options.pin_id;
        this.triggerEvent(P.CONST.EVENT_MAP_POPUP_OPENED, h, !0), c._bringToFront(), $(d).addClass(CLASS_TOP_ZINDEX)
    },
    onPopupClose: function(a) {
        var b = a._source, c = b._icon, d = b.__parent, e = this.markerLayer.getVisibleParent(d);
        b.options.animated && (this.replaceToastWithDefaultPopup(a), b.options.animated=!1), this.unHighlightMarker(b), e && "unspiderfy"in e && b === this._singleMarkerSpiderfied ? (this._singleMarkerSpiderfied = null, e.unspiderfy(), P.setTimeout(function() {
            e._group._unspiderfyLayer(b), this.unHighlightMarker(e)
        }.bind(this), 180)) : this.unHighlightMarker(b), this.resetPinButtons(), $(c).removeClass(CLASS_TOP_ZINDEX)
    },
    getSafeZonePaddingTopLeft: function() {
        return this._paddingTopLeft
    },
    unHighlightPlaceholderMarker: function(a) {
        var b = this.placeholderMarkerLayer.getLayers()[a];
        b && this._setHighlightMarker(b, !1, !0)
    },
    getSafeZonePaddingBottomRight: function() {
        var a = SAFE_ZONE_MIN_PADDING_VALUE, b = SAFE_ZONE_MIN_PADDING_VALUE;
        return L.point(a, b)
    },
    clientRectToBounds: function(a) {
        var b = L.point(a.left, a.top), c = L.point(a.right, a.bottom);
        return L.bounds(b, c)
    },
    inflateBounds: function(a, b) {
        var c = L.bounds(a.min.clone(), a.max.clone());
        return c.min.x -= b, c.min.y -= b, c.max.x += b, c.max.y += b, c
    },
    mergeBounds: function(a, b) {
        var c = Math.min(a.min.x, b.min.x), d = Math.min(a.min.y, b.min.y), e = Math.max(a.max.x, b.max.x), f = Math.max(a.max.y, b.max.y);
        return L.bounds(L.point(c, d), L.point(e, f))
    },
    ensureBoundsInSafeBounds: function(a) {
        var b = this.getSafeZoneBounds(), c = 5, d = this.inflateBounds(b, - 1 * c), e = 0;
        a.min.x < d.min.x ? e = a.min.x - d.min.x : a.max.x > d.max.x && (e = a.max.x - d.max.x);
        var f = 0;
        a.min.y < d.min.y ? f = a.min.y - d.min.y : a.max.y > d.max.y && (f = a.max.y - d.max.y), (0 !== e || 0 !== f) && this.panBy(L.point(e, f))
    },
    getRawView: function() {
        return {
            center: this.map.getCenter(),
            zoom: this.map.getZoom()
        }
    },
    setRawView: function(a) {
        this.map.setView(a.center, a.zoom)
    },
    panTo: function(a) {
        this.setView(a, this.map.getZoom())
    },
    setView: function(a, b) {
        var c = this.getSafeZonePaddingTopLeft(), d = this.getSafeZonePaddingBottomRight(), e = d.subtract(c).divideBy(2), f = this.map.project(a, b), g = this.map.unproject(f.add(e), b);
        this.map.setView(g, b)
    },
    panBy: function(a) {
        this.map.panBy(a)
    },
    fitBounds: function(a) {
        var b = this.getSafeZonePaddingTopLeft(), c = this.getSafeZonePaddingBottomRight();
        this.map.fitBounds(a, {
            paddingTopLeft: b,
            paddingBottomRight: c
        })
    },
    fitWorld: function() {
        this.map.fitWorld().panTo([40.58, - 36.91])
    },
    getMinZoomToCover: function(a, b) {
        for (var c = L.CRS.EPSG3857, d = 1; d <= MAX_ZOOM_LEVEL; d++) {
            var e = L.latLng(90, - 180), f = L.latLng( - 90, 180), g = c.latLngToPoint(e, d), h = c.latLngToPoint(f, d), i = h.x - g.x, j = h.y - g.y, k = i > a && j > b;
            if (k)
                return d
        }
        return MAX_ZOOM_LEVEL
    },
    getMinZoom: function(a) {
        var b = $(a), c = b.width(), d = b.height();
        return this.getMinZoomToCover(c, d)
    },
    updateMinZoom: function() {
        var a = this.map.getContainer(), b = this.getMinZoom(a);
        this.map.options.minZoom = b, this.map._updateZoomLevels()
    },
    zoomIn: function() {
        this.map.zoomIn()
    },
    getAttributionElement: function() {
        return this.$(".attribution")
    },
    zoomOut: function() {
        this.map.zoomOut()
    },
    _generateMap: function(a) {
        var b = "", c = this._isBoardView();
        b = c ? "mapbox_board_page" : "mapbox_closeup";
        var d = this.$("#" + b)[0], e = this.getMinZoom(document.getElementById(b)), f = {
            detectRetina: !0
        };
        $(".ielt9").length || (f.format = "png64"), this.map = L.mapbox.map(d, a, {
            maxZoom: MAX_ZOOM_LEVEL,
            minZoom: e,
            worldCopyJump: !0,
            keyboard: !1,
            zoomControl: !1,
            attributionControl: !1,
            inertiaThreshold: 75,
            inertiaDeceleration: 5e3,
            tileLayer: f
        }), this.markerLayer = new L.MarkerClusterGroup({
            mapModule: this,
            showCoverageOnHover: !1,
            removeOutsideVisibleBounds: !1,
            maxClusterRadius: 65,
            iconCreateFunction: function(a) {
                a = a;
                var b = a.getAllChildMarkers(), c = b[0].options.pin, d = null, e = a.getChildCount();
                c && (d = c.getImageUrl("236x"));
                var f = {};
                return f.markerClusterPinImage = d, f.clusterChildCount = e, new L.DivIcon({
                    html: P.renderNunjucks(MARKER_CLUSTER_TEMPLATE, f),
                    iconSize: [52, 74],
                    iconAnchor: [24, 66]
                })
            }
        }).addTo(this.map), this.placeholderMarkerLayer = L.featureGroup().addTo(this.map), this.map.scrollWheelZoom.disable(), c ? this.options.is_mobile || (new L.Control.CustomMapZoomControl).addTo(this.map) : new L.Control.Zoom({
            position: "bottomright"
        }).addTo(this.map)
    },
    onResize: function() {
        this.updateMinZoom()
    },
    addPermanentMarkerFromTypeahead: function(a) {
        var b = a.pin, c = b.getId();
        this.addMarkerToMap(a), P.setTimeout(function() {
            this.openPopupForPin(c), P.setTimeout(function() {
                var a = this.getMarkerForPin(c), b = this.$(".leaflet-popup-content-wrapper, .leaflet-popup-tip-container");
                b.addClass(CLASS_FADE_OUT_UP), P.setTimeout(function() {
                    a.closePopup(), b.removeClass(CLASS_FADE_OUT_UP)
                }, TIME_TOAST_FADE_ANIMATION)
            }.bind(this), TIME_UNTIL_TOAST_REMOVES_SELF)
        }.bind(this), TIME_MARKER_ANIMATION)
    },
    clearPlaceholderMarkers: function() {
        this.placeholderMarkerLayer.clearLayers()
    },
    setPlaceholderMarkers: function(a, b) {
        this.clearPlaceholderMarkers();
        for (var c = 0, d = a.length; c < d; c++) {
            var e = a[c];
            this.addMarkerToMap(e)
        }
        b && this.fitViewToPlaceholderMarkers()
    },
    clearPlaceholderHighlights: function() {
        _.each(this.placeholderMarkerLayer.getLayers(), function(a) {
            this._setHighlightMarker(a, !1, !0)
        }.bind(this))
    },
    highlightPlaceholderMarker: function(a) {
        var b = this.placeholderMarkerLayer.getLayers()[a];
        if (b) {
            this._setHighlightMarker(b, !0, !0);
            var c = this.getSafeZoneBounds(), d = b.getLatLng(), e = this.map.latLngToContainerPoint(d);
            if (!c.contains(e)) {
                var f = this.map.getZoom();
                this.setView(d, f)
            }
        }
    },
    onAddedToDom: function() {
        var a = this.setup.bind(this);
        P.VersionedFileLoader.instance.loadScript("webapp/js/app/common/bundle-mapbox.js", function() {
            a()
        })
    },
    fitViewToPlaceholderMarkers: function() {
        this.fitViewToMarkers(!0)
    },
    fitViewToPinMarkers: function() {
        this.fitViewToMarkers(!1)
    },
    closeAllMarkerPopups: function() {
        var a = this.markerLayer.getLayers();
        _.each(a, function(a) {
            a.closePopup()
        })
    },
    fitViewToMarkers: function(a) {
        if (this.map) {
            var b = a ? this.placeholderMarkerLayer: this.markerLayer, c = b.getBounds();
            c&&!_.isEmpty(c) && (this.fitBounds(c), a || this._ensureMarkersAreInBounds())
        }
    },
    _ensureMarkersAreInBounds: function() {
        var a = this.markerLayer.getLayers();
        if (a.length) {
            var b = this.getSafeZoneBounds(), c=!1;
            if (_.each(a, function(a) {
                var d = a.getLatLng(), e = this.map.latLngToContainerPoint(d);
                b.contains(e) && (c=!0)
            }.bind(this)), !c) {
                var d = this.markerLayer.getLayers()[0];
                this.panTo(d.getLatLng())
            }
        }
    },
    resetPinButtons: function() {
        this.triggerEvent(P.CONST.EVENT_RESET_SHOW_PIN_ON_MAP_BUTTON, null, !0)
    },
    getSafeZoneBounds: function() {
        var a = this.getSafeZonePaddingTopLeft(), b = this.map.getSize().subtract(this.getSafeZonePaddingBottomRight());
        return L.bounds(a, b)
    },
    getSafeZoneLatLngBounds: function() {
        var a = this.getSafeZonePaddingTopLeft(), b = this.map.getSize().subtract(this.getSafeZonePaddingBottomRight()), c = this.map.containerPointToLatLng(a), d = this.map.containerPointToLatLng(b);
        return new L.LatLngBounds(c, d)
    },
    openPopupForMarker: function(a) {
        var b = this.markerLayer.getVisibleParent(a);
        if (b && "getChildCount"in b && b.getChildCount() > 1) {
            var c = this.map.latLngToLayerPoint(a._latlng);
            c.y += 10;
            var d = b._generatePointsCircle(1, c);
            b._animationSpiderfy([a], d), this._singleMarkerSpiderfied = a
        }
        a.openPopup()
    },
    openPopupForPin: function(a) {
        var b = this.getMarkerForPin(a);
        this.openPopupForMarker(b)
    },
    getMarkerForPin: function(a) {
        if (this.markerLayer) {
            var b = _.find(this.markerLayer.getLayers(), function(b) {
                return b.pin_id === a
            });
            return b
        }
    },
    onCreated: function() {
        this._pinIdToMarkerIndex = {}, this._highlightedPinMarker = null, this.resizeListener = null, this._mapCardinalDirectionToNearestMoreMarker = {}, this.childListen(P.CONST.EVENT_BUTTON_CLICK, this.onChildButtonClick)
    },
    _getDivIconOptions: function(a) {
        var b = a.highlighted, c = a.animated, d = a.placeholder, e = [0, - 55], f = "markerIconWrapper";
        c && (f += " animated");
        var g = "markerIcon";
        b && (g += " highlightedMarkerIcon");
        var h, i, j, k, l;
        d ? (g += " placeholder", h = 9, i = 9, j = [h, i], k = [h / 2, i / 2]) : (g += " pin", h = 52, i = 70, j = [h, i], k = [17, 70], l = a.pin);
        var m = {
            iconSize: [h, i],
            iconAnchor: [h / 2, i],
            popupAnchor: e,
            pin: l
        }, n = null;
        l&&!d && (n = "getImageUrl"in l ? l.getImageUrl("236x") : l.images["236x"].url);
        var o = {};
        return o.markerWrapperClassName = f, o.markerClassName = g, o.pinImage = [n], m.html = P.renderNunjucks(MARKER_TEMPLATE, o), m
    },
    addMarkersToMap: function(a) {
        _.each(a, function(a) {
            var b = a.getCoordinates();
            if (b) {
                var c = {
                    pin: a,
                    highlighted: !1,
                    animated: !1
                };
                this.addMarkerToMap(c)
            }
        }.bind(this))
    },
    _triggerBodyMousedown: function() {
        $("body").trigger("mousedown")
    },
    onDragEnd: function() {
        this.triggerEvent(P.CONST.EVENT_MAP_DRAG_END, null, !0)
    },
    onZoomEnd: function() {
        this.triggerEvent(P.CONST.EVENT_MAP_ZOOM_END, null, !0)
    }
}), P.modules.Map.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/Map/Map.nunjucks"), goog.provide("P.modules.MobileLandingPageBase"), goog.require("P.Module"), P.modules.MobileLandingPageBase = P.Module.extend({}), P.modules.MobileLandingPageBase.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ModalTrigger"), goog.require("P.Module"), P.modules.ModalTrigger = P.Module.extend({
    showModal: function() {
        return this.options.ga_category && P.trackGAEvent(this.options.ga_category, P.CONST.GA_ACTION_OPEN_MODAL), this.showLoading(), P.loadModule(this.options.submodule).then(function(a) {
            this.hideLoading(), this.showInModal(a, this.options.show_modal_options)
        }.bind(this))
    }
}), P.modules.ModalTrigger.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.NavigateButton"), goog.require("P.Module"), goog.require("P.modules.Button"), P.modules.NavigateButton = P.modules.Button.extend({
    getNavigateUrl: function() {
        return this.options.url
    },
    onClick: function(a) {
        this.options.ga_category && P.trackGAEvent(this.options.ga_category, P.CONST.GA_ACTION_CLICK), this._logContextEvent(a), a.stopPropagation(), a.preventDefault();
        var b = this.getNavigateUrl();
        P.modules.Button.prototype.onClick.call(this), this.navigate(b, null, this.options.force_refresh, {
            pinId: this.options.safe_link_pin_id,
            useNewTab: this.options.use_new_tab
        })
    },
    getLoggingObjectIdStr: function() {
        return this.options.log_obj_id ? this.options.log_obj_id : P.modules.Button.prototype.getLoggingObjectIdStr.call(this)
    }
}), P.modules.NavigateButton.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/NavigateButton/NavigateButton.nunjucks"), goog.provide("P.modules.NuxProgressBase"), goog.require("P.Module"), goog.require("P.tutorialManager"), P.modules.NuxProgressBase = P.Module.extend({
    onCreated: function() {
        this.childListen(P.CONST.EVENT_BUTTON_CLICK, this.onButtonClick), this.options.auto_follow_interest && this.autoFollowInterest(this.options.auto_follow_interest);
        var a = {};
        a[P.CONST.PUBSUB_TOPIC_TUTORIAL_NEXT] = this.triggerNextEvent, this.pubsubSubscribe(P.CONST.PUBSUB_CHANNEL_TUTORIAL, a)
    },
    endMandatoryFlow: function() {},
    setStepTexts: function() {},
    initializeProgress: function(a) {
        this.module = a ? a.module : null, this.tutorialManager.isTutorialActive() || this.tutorialManager.startTutorial(this.getNuxTutorialName(), {
            renderModule: !1
        }), this.tutorialManager.setProgressModule(this)
    },
    onContentReady: function() {
        this.tutorialManager = P.TutorialManager.instance(), this.$header1 = this.$(".headerTitle1"), this.$header2 = this.$(".headerTitle2"), this.$skip = this.$(".skip"), this.nextButton = this.getChildById("nextButton"), this.progressData = this.extraData ? this.extraData.progressData : null, this.nextStep(1), this.initializeProgress()
    },
    nextStep: function(a) {
        this.currentStep = a, this.setStepTexts(a)
    },
    onButtonClick: function(a) {
        var b = a.target;
        b && ("previousButton" === b.id ? (a.stopPropagation(), this.triggerPreviousEvent()) : "nextButton" === b.id && (a.stopPropagation(), this.triggerNextEvent()))
    },
    getNextButton: function() {
        return this.nextButton
    },
    _handleSkipButton: function(a) {
        a&&!_.isEmpty(a) ? (this.$skip.removeClass("hidden"), this.$skip.bind("click", function() {
            this._launchSkipConfirmDialog(a)
        }.bind(this))) : this.$skip.addClass("hidden")
    },
    _updateHeaders: function(a, b) {
        a && this.$header1.html(a), b && this.$header2.html(b)
    },
    _launchSkipConfirmDialog: function(a) {
        var b = {
            name: "ConfirmDialog",
            options: {
                button_text: a.button_text,
                dismiss_button_text: a.dismiss_button_text,
                body_message: a.body_message,
                title: a.title,
                template: "generic"
            }
        };
        P.loadModule(b).then(function(a) {
            this.showInModal(a, {
                mask_type: "dark",
                can_dismiss: !1
            }), this.listen(a, P.CONST.EVENT_CONFIRM, function() {
                this.triggerEvent(P.CONST.EVENT_NEXT, null, !1)
            })
        }.bind(this))
    },
    getNuxTutorialName: function() {
        return this.extraData ? this.extraData.tutorialName : "interestsNuxMweb"
    },
    getNuxTutorialStep: function() {
        return this.currentStep ? this.currentStep : 1
    },
    triggerPreviousEvent: function() {
        this.triggerEvent(P.CONST.EVENT_PREVIOUS, null, !1)
    },
    triggerNextEvent: function() {
        this.triggerEvent(P.CONST.EVENT_NEXT, null, !1)
    }
}), P.modules.NuxProgressBase.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/NuxProgressBase/NuxProgressBase.nunjucks"), goog.provide("OAuthDialog"), goog.require("P.Module"), P.modules.OAuthDialog = P.Module.extend({
    events: {},
    onContentReady: function() {
        this.resizeWindowToFit()
    },
    onChildRemoved: function() {
        this.children.length ? this.resizeWindowToFit() : window.close()
    },
    resizeWindowToFit: function() {
        P.getWindowManager().shrinkWrap()
    }
}), P.modules.OAuthDialog.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.OAuthPageBase"), goog.require("P.Module");
var REDIRECT_DELAY = 2e3;
P.modules.OAuthPageBase = P.Module.extend({
    getOAuthResource: function(a) {
        var b = _.extend(this.resource.copyOptions(!0), a);
        return P.resourceFactory.create("OAuthAuthorizationResource", b)
    },
    makeAuthorizationDecision: function(a, b, c) {
        var d = this.getOAuthResource({
            authorized: a
        });
        d.callCreate().then(function(a) {
            this.tryRedirect(a.resource_response.data, c)
        }.bind(this)).fin(function() {
            b && b.hideLoading()
        })
    },
    tryRedirect: function(a, b) {
        if (a.redirect) {
            var c = a.redirect_uri, d = {};
            a.access_token ? (c += "#", d = {
                access_token: a.access_token,
                expires_at: a.expires_at,
                token_type: a.token_type
            }) : a.code && (c += "?", d = {
                code: a.code
            }), a.state && (d.state = a.state), c += $.param(d), b ? (this.showRedirectScreen(), P.setTimeout(function() {
                P.changeWindowLocation(c)
            }, REDIRECT_DELAY)) : P.changeWindowLocation(c)
        }
    },
    onContentReady: function() {
        this.setupForm(), this.$("form input").first().focus()
    },
    setupForm: function() {
        if (0 !== this.$(".loginForm").length) {
            var a = {
                username_or_email: [P.Validator.Required(), P.Validator.Email()],
                password: [P.Validator.Required()]
            };
            this.loginForm = new P.Form(this.$("form"), a), this.loginFormListener = this.listen(this.loginForm, P.CONST.EVENT_SUBMIT_VALIDATED, this.onSubmitValidated)
        }
    },
    onSubmitValidated: function(a) {
        a.errors && a.errors.length || P.currentUser.login(this.loginForm.getData()).then(function() {
            this.authorizeApp()
        }.bind(this), function(a) {
            if (this.$(".loginError").html(a.message).show(), a.api_error_code === P.CONST.AUTO_PASSWORD_RESET_ERROR_CODE) {
                var b = P.getResetPasswordOneClickUrl({
                    username_or_email: this.loginForm.email
                });
                this.navigate(b)
            }
        }.bind(this))
    },
    authorizeApp: function() {
        var a = this.getChildById("authorizeButton");
        a.showLoading(), this.makeAuthorizationDecision(!0, a, !0)
    },
    onAuthorizeButtonClicked: function(a) {
        this.loginForm ? this.loginForm.onSubmit(a) : this.authorizeApp()
    },
    showRedirectScreen: function() {
        this.$(".body").hide(), this.$(".loading").show()
    }
}), P.modules.OAuthPageBase.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.OffsitePage"), goog.require("P.Module"), P.modules.OffsitePage = P.Module.extend({
    onContentReady: function() {
        var a = function() {
            window.close()
        };
        if (P.currentUser.isWriteBanned())
            P.writeban.showWriteBanned(this), this.listen(this, P.CONST.EVENT_DISMISS, a);
        else {
            var b = {
                name: "ConfirmDialog",
                options: {
                    template: "offsite_warning",
                    sanitized_url: this.options.sanitized_url,
                    redirect_status: this.options.redirect_status
                }
            };
            P.loadModule(b).then(function(b) {
                b.render().then(function() {
                    P.getModalManager().showInModal(b), b.on(P.CONST.EVENT_CONFIRM, function() {
                        window.location.replace(this.options.sanitized_url), b.off(P.CONST.EVENT_DESTROYED, a)
                    }.bind(this)), b.on(P.CONST.EVENT_DESTROYED, a)
                }.bind(this))
            }.bind(this))
        }
    }
}), P.modules.OffsitePage.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.PagedCollection"), goog.require("P.Module"), P.modules.PagedCollection = P.Module.extend({
    onContentReady: function() {
        this._moreItemsButtonClickListener && this.removeListener(this._moreItemsButtonClickListener), this._moreItemsButtonClickListener = this.listen(this.getMoreItemsButton(), P.CONST.EVENT_BUTTON_CLICK, this._onMoreItemsButtonClick)
    },
    _onMoreItemsButtonClick: function(a) {
        a.stopPropagation(), this.requestMore()
    },
    getMoreItemsContainer: function() {
        return this.$el.children(".moreItemsContainer")
    },
    getMoreItemsButton: function() {
        return this.getChildById("moreItems")
    },
    _hasBorderedButton: function() {
        var a = this.getMoreItemsButton();
        return a&&!a.options.borderless
    },
    showMoreItemsLoading: function() {
        if (this._hasBorderedButton())
            this.getMoreItemsButton().showLoading();
        else if (!this._moreItemsSpinner) {
            var a = this.getMoreItemsContainer();
            a.addClass("loading"), this._moreItemsSpinner = new P.Spinner({
                size: P.Spinner.Size.SMALL
            }), this._moreItemsSpinner.spin(a)
        }
    },
    hideMoreItemsLoading: function() {
        this._hasBorderedButton() ? this.getMoreItemsButton().hideLoading() : this._moreItemsSpinner && (this.getMoreItemsContainer().removeClass("loading"), this._moreItemsSpinner.stop(), this._moreItemsSpinner = null)
    },
    requestMore: P.NOOP
}), P.modules.PagedCollection.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/PagedCollection/PagedCollection.nunjucks"), goog.provide("P.modules.PagedGrid"), goog.require("P.modules.PagedCollection");
var DEFAULT_AJAX_PAGE_SIZE = 9, HIDE_CLASS = "hide";
P.modules.PagedGrid = P.modules.PagedCollection.extend({
    onAddedToDom: function() {
        this.contentReady && this._setUpGrid()
    },
    onContentReady: function() {
        P.modules.PagedCollection.prototype.onContentReady.call(this), this.inDom && this._setUpGrid()
    },
    _getGrid: function() {
        return this.getChildById("grid")
    },
    prependChildItem: function(a) {
        var b = this._getGrid();
        b.prependChildItem(a)
    },
    _setUpGrid: function() {
        var a = this._getGrid(), b = this.options.ajax_page_size || DEFAULT_AJAX_PAGE_SIZE;
        a.setPageSize(b), a.hasMoreItems() || this.getMoreItemsButton().getContent().addClass(HIDE_CLASS), this.childListen(P.CONST.EVENT_CONTENT_CHANGED, this.onChildContentChanged), this.childListen(P.CONST.EVENT_ERROR, this.onChildError)
    },
    hasItems: function() {
        var a = this._getGrid();
        return a.hasItems()
    },
    requestMore: function() {
        if (this.contentReady) {
            this.showMoreItemsLoading();
            var a = this._getGrid();
            a.requestMoreItems()
        }
    },
    onChildContentChanged: function() {
        this.hideMoreItemsLoading();
        var a = this.getMoreItemsButton();
        if (a) {
            if (this.gridHasError)
                return a.hide(), void(this.gridHasError=!1);
            var b = this._getGrid();
            b.hasMoreItems() ? a.show() : a.destroy()
        }
    },
    onChildError: function(a) {
        this.log.debug("Child error!", a), a.target === this._getGrid() && (this.gridHasError=!0)
    }
}), P.modules.PagedGrid.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/PagedGrid/PagedGrid.nunjucks"), goog.provide("P.modules.PagedList"), goog.require("P.modules.PagedCollection"), P.modules.PagedList = P.modules.PagedCollection.extend({
    onContentReady: function() {
        P.modules.PagedCollection.prototype.onContentReady.call(this), this._hideMoreItemsContainerIfAtEnd(), this._moreItemsRequestStartListener && this.removeListener(this._moreItemsRequestStartListener), this._moreItemsRequestSuccessListener && this.removeListener(this._moreItemsRequestSuccessListener), this._moreItemsRequestErrorListener && this.removeListener(this._moreItemsRequestErrorListener);
        var a = this._getList();
        this._moreItemsRequestStartListener = this.listen(a, P.CONST.EVENT_ITEMS_REQUEST_START, this._onItemsRequestStart), this._moreItemsRequestSuccessListener = this.listen(a, P.CONST.EVENT_ITEMS_REQUEST_SUCCESS, this._onItemsRequestSuccess), this._moreItemsRequestErrorListener = this.listen(a, P.CONST.EVENT_ITEMS_REQUEST_ERROR, this._onItemsRequestError)
    },
    _onItemsRequestStart: function() {
        this.showMoreItemsLoading()
    },
    _onItemsRequestSuccess: function() {
        this._onItemsRequestEnd()
    },
    _onItemsRequestError: function() {
        this._onItemsRequestEnd()
    },
    _getList: function() {
        return this.getChildById("list")
    },
    _hideMoreItemsContainerIfAtEnd: function() {
        this.hasMoreItems() || this.getMoreItemsContainer().hide()
    },
    _onItemsRequestEnd: function() {
        this.hideMoreItemsLoading(), this.hasMoreItems() || this.triggerEvent(P.CONST.EVENT_ITEMS_END, null, !0), this._hideMoreItemsContainerIfAtEnd()
    },
    requestMore: function() {
        var a = this.getChildById("list");
        a.requestMoreItems()
    },
    hasMoreItems: function() {
        return this._getList().hasMoreItems()
    },
    appendToList: function(a) {
        this._getList().appendChild(a)
    },
    getModuleItems: function() {
        return this._getList().children
    },
    setPageSize: function(a) {
        this.resource && this.resource.set("page_size", a), this._getList().setPageSize(a)
    }
}), P.modules.PagedList.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.PinBase"), goog.require("P.Module");
var CLASS_MAP_FOCUS = "mapFocus";
P.modules.PinBase = P.Module.extend({
    onContentReady: function() {
        P.Module.prototype.onContentReady.call(this);
        var a = this.data.id;
        if (a) {
            var b = {};
            b[P.CONST.PUBSUB_TOPIC_PIN_DELETED] = this.onPinDeleted, b[P.CONST.PUBSUB_TOPIC_PIN_HIDDEN] = this.onPinHidden, b[P.CONST.PUBSUB_TOPIC_PIN_HIDDEN_STOP_THROUGH_BOARD] = this.onPinHiddenStopThroughBoard, this.pubsubSubscribe(a, b)
        }
    },
    onPinDeleted: function() {
        this.triggerEvent(P.CONST.EVENT_PIN_DELETED, this, !0), this.destroy()
    },
    onPinHidden: function() {
        var a = this.data, b = {
            pin_id: a.id,
            feedback_type: P.CONST.PinFeedbackTypes.BLOCK_SINGLE_PFY_PIN
        }, c = a.recommendation_reason;
        if (c) {
            var d = c.board;
            b.through_board_id = d.id, b.recommendation_reason_id = c.reason_id
        }
        this._sendHidePinFeedback(b), this._showRemovePinDialog(P.CONST.PinFeedbackTypes.BLOCK_SINGLE_PFY_PIN)
    },
    onPinHiddenStopThroughBoard: function() {
        var a = this.data, b = a.recommendation_reason, c = b.board, d = {
            pin_id: a.id,
            feedback_type: P.CONST.PinFeedbackTypes.BLOCK_PFY_THROUGH_BOARD,
            through_board_id: c.id,
            recommendation_reason_id: b.reason_id
        };
        this._sendHidePinFeedback(d), this._showRemovePinDialog(P.CONST.PinFeedbackTypes.BLOCK_PFY_THROUGH_BOARD)
    },
    _sendHidePinFeedback: function(a) {
        var b = P.resourceFactory.create("PinFeedbackResource", a);
        b.callUpdate({
            showError: !0
        })
    },
    _showRemovePinDialog: function(a) {
        var b = this.data, c = {
            pin_id: b.id,
            recommendation_reason: b.recommendation_reason,
            promoter: b.promoter,
            feedback_type: a
        }, d = new P.modules.RemovePinDialog({
            options: c
        });
        d.render().then(function() {
            d.getContent().insertBefore(this.getContent()), this.getContent().hide(), this.triggerEvent(P.CONST.EVENT_CONTENT_CHANGED, null, !0)
        }.bind(this))
    },
    getLoggingObjectIdStr: function() {
        return this.getPinId()
    },
    getPinId: function() {
        return this.resource.get("id")
    },
    getPlaceName: function() {
        var a = this.getPlaceData();
        return a ? a.name : null
    },
    getLink: function() {
        return this.data.link || null
    },
    getPlaceProvider: function() {
        var a = this.getPlaceData();
        return a ? a.source_name : null
    },
    getPlaceProviderImage: function() {
        var a = this.getPlaceData();
        return a ? a.source_icon : null
    },
    getImageUrl: function(a) {
        if (!a)
            return "";
        var b = this.data.images;
        return b[a] ? b[a].url : a === P.CONST.IMAGE_SIZE_ORIG && b.originals ? b.originals.url : ""
    },
    getCoordinates: function() {
        var a = this.getPlaceData();
        return a ? [a.latitude, a.longitude] : null
    },
    getPlaceData: function() {
        return this.data.place || null
    },
    getLocality: function() {
        var a = this.getPlaceData();
        if (!a)
            return null;
        var b = a.address;
        return b ? b.locality : null
    },
    _highlightMarkerOnMap: function() {
        var a = this.getPinId();
        this.triggerEvent(P.CONST.EVENT_PIN_PLACE_CLICK, a, !0)
    },
    scrollIntoView: function() {
        this._forceSeeOnMap=!0;
        var a, b = this.$el, c = b.offset().top, d = b.height(), e = P.Viewport.height, f = $(".headerBackground").height();
        a = d >= e - f ? c - d / 2 + P.Viewport.height / 2 - f - 1.5 * P.CONST.PIN_MARGIN : c - e / 2 - f / 2 + d / 2, this.$el.addClass(CLASS_MAP_FOCUS);
        var g = this.getChildById("seeOnMap");
        g && g.setHighlight(!0), this._highlightMarkerOnMap();
        var h = function() {
            this._highlightMarkerOnMap()
        }.bind(this);
        P.scrollToTop({
            $scroller: null,
            newScrollOffset: a,
            callback: h
        })
    },
    resetShowOnMapButton: function() {
        var a = this.getChildById("seeOnMap");
        this.$el.removeClass(CLASS_MAP_FOCUS), a && (a.setHighlight(!1), this._forceSeeOnMap=!1)
    }
}), P.modules.PinBase.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/PinBase/PinBase.nunjucks"), goog.provide("P.modules.PinCommentListBase"), goog.require("P.Module"), P.modules.PinCommentListBase = P.Module.extend({
    events: {
        "click .showAll": "onShowAll",
        "focus .content": "onFocusCommentInput",
        "click .addComment": "addComment"
    },
    onCreated: function() {
        this.commentContentHeight = null, this.prePopulate = this.options.pre_populate
    },
    onContentReady: function() {
        var a = this.options.pin_id;
        if (a) {
            var b = {};
            b[P.CONST.PUBSUB_TOPIC_PIN_COMMENT_CREATED] = this.onPinCommentCreated, this.pubsubSubscribe(a, b)
        }
        this.prePopulate && (this.populateComment(this.prePopulate), delete this.prePopulate), this._visible=!0
    },
    _setOptionsForShowingAll: function() {
        var a = this.options.count;
        this.options.max_num_to_show = a, this.resource && (this.resource.options.page_size = a)
    },
    onShowAll: function(a) {
        a.stopPropagation(), a.preventDefault(), this._setOptionsForShowingAll(), this.render()
    },
    populateComment: function(a) {
        var b = this.getChildById("pinCommentField");
        b.setValue(a), b.focus()
    },
    addComment: function() {
        P.trackGAEvent("comment_create", P.CONST.GA_ACTION_CLICK_SUBMIT);
        var a = this.getChildById("pinDescriptionComment").getPinCommentInputValue(), b = this.options.pin_id, c = P.resourceFactory.create("PinCommentResource", {
            pin_id: b,
            text: a
        }), d = this.getChildById("pinDescriptionComment").getAddCommentButton();
        d.showLoading(), c.callCreate().then(function() {
            P.trackGAEvent("comment_create", P.CONST.GA_ACTION_SUCCESS), P.pubsub.publish(b, P.CONST.PUBSUB_TOPIC_PIN_COMMENT_CREATED)
        }).fin(function() {
            d.hideLoading()
        })
    },
    onPinCommentCreated: function() {
        this.options.count++, this.render()
    },
    onFocusCommentInput: function() {
        var a = this.$el.find(".addComment");
        this.options.type && "closeup" === this.options.type ? a.css("display", "block") : a.show(), this.triggerEvent(P.CONST.EVENT_DIMS_CHANGED, null, !0)
    },
    toggle: function() {
        this._visible ? this.hide() : this.show(), this._visible=!this._visible
    }
}), P.modules.PinCommentListBase.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.PinCount"), goog.require("P.Module"), P.modules.PinCount = P.Module.extend({
    onContentReady: function() {
        if (this.options.can_update_count && this.data.id) {
            var a = {};
            "UserResource" === this.resource.name && (a[P.CONST.PUBSUB_TOPIC_BOARD_DELETED] = this.onCountUpdated), a[P.CONST.PUBSUB_TOPIC_PIN_CREATED] = this.onCountUpdated, a[P.CONST.PUBSUB_TOPIC_PIN_DELETED] = this.onCountUpdated, this.pubsubSubscribe(this.data.id, a)
        }
    },
    onCountUpdated: function(a, b) {
        var c = 1e3;
        b === P.CONST.PUBSUB_TOPIC_PIN_DELETED && (c = 0), setTimeout(this.render.bind(this), c)
    }
}), P.modules.PinCount.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/PinCount/PinCount.nunjucks"), goog.provide("P.modules.PinDescriptionComment"), goog.require("P.Module"), P.modules.PinDescriptionComment = P.Module.extend({
    getPinCommentInputValue: function() {
        return this.getChildById("pinCommentField").getValue()
    },
    getAddCommentButton: function() {
        return this.getChildById("addCommentButton")
    }
}), P.modules.PinDescriptionComment.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/PinDescriptionComment/PinDescriptionComment.nunjucks"), goog.provide("P.modules.PinEditBase"), goog.require("P.Module"), P.modules.PinEditBase = P.Module.extend({
    _onButtonClick: function(a) {
        var b = a.target;
        switch (b.id) {
        case"submitButton":
            P.trackGAEvent(P.CONST.GA_CATEGORY_PIN_EDIT, P.CONST.GA_ACTION_CLICK_SUBMIT);
            break;
        case"cancelButton":
            P.trackGAEvent(P.CONST.GA_CATEGORY_PIN_EDIT, P.CONST.GA_ACTION_CLICK_CANCEL);
            break;
        case"deleteButton":
            P.trackGAEvent(P.CONST.GA_CATEGORY_PIN_DELETE, P.CONST.GA_ACTION_OPEN_MODAL), this.showConfirmation();
            break;
        default:
            this.onButtonClick(a)
        }
    },
    savePin: function() {
        var a = this.data.id, b = this.pinForm.getData();
        b.id = a;
        var c = P.resourceFactory.create("PinResource", b);
        this.showLoading(!0), c.callUpdate().then(function(c) {
            P.trackGAEvent(P.CONST.GA_CATEGORY_PIN_EDIT, P.CONST.GA_ACTION_SUCCESS);
            var d = c.resource_response.data;
            if (!this.refreshOnSave && this.isInModal()) {
                P.pubsub.publish(a, P.CONST.PUBSUB_TOPIC_PIN_UPDATED, d);
                var e = b.board_id, f = this.data.board.id;
                e !== f && (P.pubsub.publish(e, P.CONST.PUBSUB_TOPIC_PIN_CREATED), P.pubsub.publish(f, P.CONST.PUBSUB_TOPIC_PIN_DELETED)), this.destroy()
            } else {
                var g = "/pin/" + a + "/";
                this.navigate(g)
            }
        }.bind(this), function() {
            P.trackGAEvent(P.CONST.GA_CATEGORY_PIN_EDIT, P.CONST.GA_ACTION_ERROR)
        }).fin(function() {
            this.hideLoading()
        }.bind(this))
    },
    onDeleteConfirm: function() {
        P.trackGAEvent(P.CONST.GA_CATEGORY_PIN_DELETE, P.CONST.GA_ACTION_CLICK_SUBMIT), this.deletePin()
    },
    onButtonClick: function() {},
    deletePin: function() {
        var a = this.data.id, b = {
            id: a
        }, c = P.resourceFactory.create("PinResource", b);
        this.showLoading(!0), c.callDelete().then(function() {
            if (P.trackGAEvent(P.CONST.GA_CATEGORY_PIN_DELETE, P.CONST.GA_ACTION_SUCCESS), P.pubsub.publish(this.data.board.id, P.CONST.PUBSUB_TOPIC_PIN_DELETED), P.pubsub.publish(this.data.pinner.id, P.CONST.PUBSUB_TOPIC_PIN_DELETED), !this.refreshOnSave && this.isInModal())
                P.pubsub.publish(a, P.CONST.PUBSUB_TOPIC_PIN_DELETED), this.destroy();
            else {
                var b = this.data.board.url;
                this.navigate(b)
            }
        }.bind(this), function() {
            P.trackGAEvent(P.CONST.GA_CATEGORY_PIN_DELETE, P.CONST.GA_ACTION_ERROR)
        }).fin(function() {
            this.hideLoading()
        }.bind(this))
    },
    showConfirmation: function() {},
    showPrivacyChangeConfirmation: function() {}
}), P.modules.PinEditBase.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.PinFeedbackDialog"), goog.require("P.Module"), P.modules.PinFeedbackDialog = P.Module.extend({
    events: {
        "change input": "onChange"
    },
    onContentReady: function() {
        var a = {
            reason: [P.Validator.Required()]
        };
        this.form = new P.Form(this.$("form"), a), this.listen(this.form, P.CONST.EVENT_SUBMIT_VALIDATED, this.onSubmitValidated), this.submitButton = this.getChildById("submitButton"), this.submitButton.disable()
    },
    onSubmitValidated: function(a) {
        a.errors[0] || this.sendPinFeedback()
    },
    onChange: function(a) {
        this.submitButton.enable();
        var b = $(a.target).parent();
        this._selected && this._selected.removeClass("selected"), b.addClass("selected"), this._selected = b
    },
    sendPinFeedback: function() {
        this.submitButton.showLoading();
        var a = this.$('[name="reason"]:checked').val(), b = {
            complaint_reason: P.CONST.RecommendationComplaintReason[a],
            pin_id: this.options.pin_id,
            feedback_type: this.options.feedback_type
        };
        this.options.rec_reason_id && (b.through_id = this.options.through_id, b.rec_reason_id = this.options.rec_reason_id);
        var c = P.resourceFactory.create("PinFeedbackResource", b);
        c.callUpdate().fin(function() {
            this.destroy(), this.triggerEvent(P.CONST.EVENT_PIN_FEEDBACK_SUBMITTED, this, !0)
        }.bind(this)).fail(function(a) {
            P.showError(a.message)
        }).always(function() {
            this.submitButton.hideLoading()
        }.bind(this))
    }
}), P.modules.PinFeedbackDialog.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/PinFeedbackDialog/PinFeedbackDialog.nunjucks"), goog.provide("P.modules.PinLikeButton"), goog.require("P.Module"), goog.require("P.modules.LikeButton"), P.modules.PinLikeButton = P.modules.LikeButton.extend({
    getLikeResource: function() {
        var a = "PinLikeResource2";
        return P.resourceFactory.create(a, {
            pin_id: this.options.pin_id,
            source_interest_id: this.options.source_interest_id
        })
    },
    _getGACategory: function(a) {
        return a ? "pin_like" : "pin_unlike"
    },
    onClick: function() {
        var a=!this.options.liked;
        P.modules.LikeButton.prototype.onClick.call(this);
        var b = this._getGACategory(a);
        P.trackGAEvent(b, P.CONST.GA_ACTION_CLICK)
    },
    onToggleSuccess: function(a) {
        var b = this._getGACategory(a), c = a ? P.CONST.PUBSUB_TOPIC_PIN_LIKED: P.CONST.PUBSUB_TOPIC_PIN_UNLIKED;
        P.trackGAEvent(b, P.CONST.GA_ACTION_SUCCESS), P.pubsub.publish(this.options.pin_id, c)
    }
}), P.modules.PinLikeButton.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/PinLikeButton/PinLikeButton.nunjucks"), goog.provide("P.modules.PinPicksDetail"), goog.require("P.Module"), P.modules.PinPicksDetail = P.Module.extend({
    events: {},
    onContentReady: function() {
        P.trackRegisterAction("pin_picks_visit")
    }
}), P.modules.PinPicksDetail.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.PinfluencerOptOutConfirmationPage"), goog.require("P.Module"), P.modules.PinfluencerOptOutConfirmationPage = P.Module.extend({}), P.modules.PinfluencerOptOutConfirmationPage.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/PinfluencerOptOutConfirmationPage/PinfluencerOptOutConfirmationPage.nunjucks"), goog.provide("P.modules.PinnableBase"), goog.require("P.Module"), P.modules.PinnableBase = P.Module.extend({
    events: {
        click: "onClick"
    },
    onCreated: function() {
        this.onImageLoad = this.onImageLoad.bind(this), this.onImageError = this.onImageError.bind(this)
    },
    onAdded: function() {
        this.updateImage()
    },
    updateImage: function() {
        var a = this.$(".pinImageWrapper"), b = this.$img = $("<img>");
        b.on("load", this.onImageLoad), b.on("error", this.onImageError), b.attr("src", this.options.url), a.append(b)
    },
    onImageLoad: function() {
        this.$img.width() < P.CONST.MIN_PINNABLE_IMAGE_WIDTH || this.$img.height() < P.CONST.MIN_PINNABLE_IMAGE_HEIGHT ? (this.log.debug("Too small!", this.$img.width(), this.$img.height()), this.destroy()) : this.$el.css("visibility", "visible"), this.triggerEvent(P.CONST.EVENT_CONTENT_CHANGED, null, !0)
    },
    onImageError: function() {
        this.destroy()
    }
}), P.modules.PinnableBase.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.PositionModule"), goog.require("P.Module"), goog.require("P.viewport");
var CLASS_CARET = "positionModuleCaret", MIN_CARET_OFFSET = 5, POINT = P.CONST.PositionPoint, POINT_FLAG = P.CONST.PositionPointFlag, MAP_FLAG_TO_CLASS = {};
MAP_FLAG_TO_CLASS[POINT_FLAG.FLAG_HORIZONTAL_LEFT] = "positionLeft", MAP_FLAG_TO_CLASS[POINT_FLAG.FLAG_HORIZONTAL_RIGHT] = "positionRight", MAP_FLAG_TO_CLASS[POINT_FLAG.FLAG_VERTICAL_TOP] = "positionTop", MAP_FLAG_TO_CLASS[POINT_FLAG.FLAG_VERTICAL_BOTTOM] = "positionBottom", MAP_FLAG_TO_CLASS[POINT_FLAG.FLAG_VERTICAL_CENTER] = "positionCenter", P.modules.PositionModule = P.Module.extend({
    positionMode: P.CONST.PositionMode.ANCHORED,
    onCreated: function() {
        var a = this.positionModule.bind(this);
        this.childListen(P.CONST.EVENT_CONTENT_CHANGED, a), this.listen(this, P.CONST.EVENT_DIMS_CHANGED, a), this.listen(this, P.CONST.EVENT_NAVIGATE, a), this.listen(P.Viewport, P.CONST.EVENT_RESIZE, a), this.listen(P.Viewport, P.CONST.EVENT_BODY_COLUMN_CHANGE, a)
    },
    getPositionMode: function() {
        return P.CONST.PositionMode[this.options.position_mode] || this.positionMode
    },
    onOptionsChanged: function() {
        this.updateFixed()
    },
    getPositionElement: function() {
        return this.$el
    },
    getPositionAnchor: function() {
        return $(this.options.anchor)
    },
    getPositionPoint: function() {
        return POINT[this.options.position_point] || POINT.BOTTOM_LEFT
    },
    getPositionFixed: function() {
        return !!this.options.fixed
    },
    getPositionCaret: function() {
        return this.getCaret()
    },
    getCaret: function() {
        return this.$("." + CLASS_CARET)
    },
    _getPositionType: function() {
        return this.getPositionFixed ? "fixed" : "absolute"
    },
    positionModuleAtAnchor: function(a, b) {
        P.deferDomManipulation(function() {
            var c = this.getPositionElement();
            c.addClass("positionModuleElement"), c.toggleClass("positionFixed", this.getPositionFixed()), _.each(MAP_FLAG_TO_CLASS, function(a) {
                c.removeClass(a)
            }), b = P.Positioning.positionElementAtAnchor(c, a, b, this.getPositionFixed(), this.options.force_in_viewport);
            var d = _.find(MAP_FLAG_TO_CLASS, function(a, c) {
                return b & c?!0 : void 0
            });
            c.addClass(d)
        }.bind(this)), this.positionCaret(a, b)
    },
    positionCaret: function(a, b) {
        P.deferDomManipulation(function() {
            var c = this.$("." + CLASS_CARET);
            if (c.length) {
                var d = P.CONST.PositionPointFlag, e = this.getPositionElement();
                e.addClass(this.options.largeCaret ? "bigCaret" : "defaultCaret"), this.options.caret_style ? c.addClass(this.options.caret_style + "CaretStyle") : c.attr("class", CLASS_CARET);
                var f = "left", g = "outerWidth", h = "width";
                b & d.FLAG_HORIZONTAL && (f = "top", g = "outerHeight", h = "height");
                var i = 0, j = b & (d.FLAG_HORIZONTAL_CENTER | d.FLAG_VERTICAL_CENTER), k = c[h]() > a[h]() - MIN_CARET_OFFSET;
                k&&!j && (i = (c[h]() - a[h]()) / 2 + MIN_CARET_OFFSET, (b & d.FLAG_VERTICAL_RIGHT || b & d.FLAG_HORIZONTAL_BOTTOM) && (i =- i));
                var l = e.offset()[f], m = l + e[g](), n = a.offset()[f], o = n + a[g](), p = l;
                p < n && (p = n);
                var q = m;
                q > o && (q = o);
                var r = (p + q) / 2 - c[g]() / 2 + i, s = {};
                if (s[f] = r, c.offset(s), i) {
                    var t = parseInt(e.css(f), 10);
                    e.css(f, t - i)
                }
            }
        }.bind(this))
    },
    positionModule: function() {
        this.cleanPositionModuleElement(), this.getPositionMode() === P.CONST.PositionMode.MANUAL ? this._positionManually() : this.getPositionMode() === P.CONST.PositionMode.ANCHORED ? this.positionModuleAtAnchor(this.getPositionAnchor(), this.getPositionPoint()) : this._positionAbsoluteCenter()
    },
    _positionAbsoluteCenter: function() {
        var a = this.getScrollableElement().outerHeight(), b = this.getContent().outerHeight();
        if (!this.options.full_screen) {
            var c = Math.floor((a - b) / 2), d = Math.max(0, c);
            P.deferDomManipulation(function() {
                this.getPositionElement().css({
                    marginTop: d
                })
            }.bind(this))
        }
        if (!this.options.auto_width&&!this.options.full_screen) {
            var e = this.getModule().getWidth(!0);
            P.deferDomManipulation(function() {
                this.getContent().css({
                    width: e
                })
            }.bind(this))
        }(b >= P.Viewport.height || this.options.full_screen) && P.deferDomManipulation(function() {
            this.$el.addClass("fullScreen")
        }.bind(this))
    },
    _positionManually: function() {
        P.deferDomManipulation(function() {
            var a = this.getPositionElement();
            a.addClass("positionModuleElement"), a.toggleClass("positionFixed", this.getPositionFixed())
        }.bind(this))
    },
    cleanPositionModuleElement: function() {
        P.deferDomManipulation(function() {
            var a = this.getPositionElement();
            a.removeClass("positionModuleElement"), a.css({
                top: "",
                left: "",
                margin: ""
            })
        }.bind(this))
    },
    updateFixed: function() {
        P.deferDomManipulation(function() {
            this.$el.toggleClass("positionModuleFixed", this.getPositionFixed())
        }.bind(this))
    },
    renderContainer: function() {
        this.empty();
        var a = this.$el;
        if (a.addClass("PositionModule"), a.addClass(this.options.class_name), this.updateFixed(), this.options.view_type && a.addClass(this.options.view_type), !this.options.hide_caret) {
            var b = $('<span class="' + CLASS_CARET + '"></span>');
            a.prepend(b)
        }
    },
    render: function() {
        var a = this._renderInternal2();
        return a
    },
    _renderInternal2: function() {
        return new Promise(function(a) {
            var b = function() {
                this.onContentReady(), this.onRendered(), a()
            }.bind(this);
            this.options.module ? P.loadModule(this.options.module).then(function(a) {
                this._renderSelf().then(function() {
                    this.insertChild(a, this.getPositionElement()), a.render().then(b)
                }.bind(this))
            }.bind(this)) : b()
        }.bind(this))
    },
    _renderSelf: function() {
        return this.options.render_self ? P.Module.prototype.render.call(this) : Promise.resolve(void 0)
    }
}), P.modules.PositionModule.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.PromotedPinInfo"), goog.require("P.Module"), P.modules.PromotedPinInfo = P.Module.extend({
    HIDDEN_CLASS: "hidden",
    HIDE_DELAY: 3e3,
    events: {
        "click .hideThis": "onClickHideThis"
    },
    onClickHideThis: function() {
        var a = this.options.pin_id;
        this._hidePin(a)
    },
    _hidePin: function(a) {
        this.showLoading();
        var b = this._getResource(a);
        b.callUpdate().fin(function() {
            this.hideLoading()
        }.bind(this)).then(function() {
            this.$(".preAction").addClass(this.HIDDEN_CLASS), this.$(".confirmHideThis").removeClass(this.HIDDEN_CLASS), this.triggerEvent(P.CONST.EVENT_CONTENT_CHANGED, null, !0), P.setTimeout(function() {
                this.triggerEvent(P.CONST.EVENT_DISMISS, null, !0), P.pubsub.publish(a, P.CONST.PUBSUB_TOPIC_PIN_DELETED)
            }.bind(this), this.HIDE_DELAY)
        }.bind(this))
    },
    _getResource: function(a) {
        var b = P.resourceFactory.create("PromotedPinHideResource", {
            pin_id: a
        });
        return b
    }
}), P.modules.PromotedPinInfo.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.PromotedPinInfo2"), goog.require("P.Module"), P.modules.PromotedPinInfo2 = P.Module.extend({
    HIDDEN_CLASS: "hidden",
    HIDE_DELAY: 100,
    events: {
        "click .hidePin": "hidePin"
    },
    hidePin: function() {
        var a = this.options.pin_id;
        this.$(".preAction").addClass(this.HIDDEN_CLASS), this.triggerEvent(P.CONST.EVENT_CONTENT_CHANGED, null, !0), P.setTimeout(function() {
            this.triggerEvent(P.CONST.EVENT_DISMISS, null, !0), P.pubsub.publish(a, P.CONST.PUBSUB_TOPIC_PIN_HIDDEN)
        }.bind(this), this.HIDE_DELAY)
    }
}), P.modules.PromotedPinInfo2.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/PromotedPinInfo2/PromotedPinInfo2.nunjucks"), goog.provide("P.modules.QALikeButton"), goog.require("P.modules.LikeButton"), P.modules.QALikeButton = P.modules.LikeButton.extend({}), P.modules.QALikeButton.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/QALikeButton/QALikeButton.nunjucks"), goog.provide("P.modules.QAList"), goog.require("P.Module"), P.modules.QAList = P.Module.extend({
    onContentReady: function() {
        this.initPubsub(), this._listItemsEndListener && this.removeListener(this._listItemsEndListener), this._listItemsEndListener = this.listen(this._getPagedList(), P.CONST.EVENT_ITEMS_END, this._onListItemsEnd), this._showCreateIfAtEnd(), this._getPagedList().setPageSize(this.getAjaxPageSize())
    },
    _getPagedList: function() {
        return this.getChildById("list")
    },
    _getCreate: function() {
        return this.getChildById("create")
    },
    _hasMoreItems: function() {
        return this._getPagedList().hasMoreItems()
    },
    _showCreateIfAtEnd: function() {
        if (!this._hasMoreItems()) {
            var a = this._getCreate();
            a && a.show()
        }
    },
    _onListItemsEnd: function() {
        this._showCreateIfAtEnd()
    },
    initPubsub: P.NOOP,
    getAjaxPageSize: function() {
        return 10
    },
    addItem: function(a) {
        this._getPagedList().appendToList(a);
        var b = a.render();
        return b.then(function() {
            a.fadeIn()
        }), b
    }
}), P.modules.QAList.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.QuestionBase"), goog.require("P.Module");
var QUESTION_CLASS_LIKED = "liked";
P.modules.QuestionBase = P.Module.extend({
    onContentReady: function() {},
    _getLikeCountEl: function() {
        return this.$(".questionLikesCount")
    },
    _getLikeCount: function() {
        var a = $.trim(this._getLikeCountEl().text());
        return a ? parseInt(a, 10) : 0
    },
    _setLikeCount: function(a) {
        this._getLikeCountEl().text(a || "")
    },
    _onQuestionLiked: function() {
        this._setLikeCount(this._getLikeCount() + 1), this._getLikeCountEl().addClass(QUESTION_CLASS_LIKED);
        var a = {
            name: "OldToast",
            options: {
                position_mode: "ANCHORED",
                position_point: "RIGHT_TOP",
                template: "like_question_success"
            }
        };
        P.loadModule(a).then(function(a) {
            this.addChild(a), a.render().then(function() {
                a.options.anchor = this.$el, a.positionModule()
            }.bind(this))
        }.bind(this))
    },
    _onQuestionUnliked: function() {
        this._setLikeCount(this._getLikeCount() - 1), this._getLikeCountEl().removeClass(QUESTION_CLASS_LIKED)
    }
}), P.modules.QuestionBase.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.QuestionLikeButton"), goog.require("P.modules.QALikeButton"), P.modules.QuestionLikeButton = P.modules.QALikeButton.extend({
    getLikeResource: function(a) {
        var b = {
            question_id: this.options.question_id
        };
        return a && (b.context_pin_id = this.options.context_pin_id), P.resourceFactory.create("QuestionLikeResource", b)
    },
    onToggleSuccess: function(a) {
        var b = a ? P.CONST.PUBSUB_TOPIC_QUESTION_LIKED: P.CONST.PUBSUB_TOPIC_QUESTION_UNLIKED;
        P.pubsub.publish(this.options.question_id, b)
    }
}), P.modules.QuestionLikeButton.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/QuestionLikeButton/QuestionLikeButton.nunjucks"), goog.provide("P.modules.QuestionsBase"), goog.require("P.modules.QAList"), P.modules.QuestionsBase = P.modules.QAList.extend({
    onCreated: function() {
        this.childListen(P.CONST.EVENT_SEE_QUESTION, this._onSeeQuestion)
    },
    initPubsub: function() {},
    scrollToQuestions: function(a, b) {
        var c = {
            $el: this.$el,
            callback: b,
            scrollOffset: a || P.CONST.SCROLL_TO_ELEMENT_OFFSET
        };
        this.triggerEvent(P.CONST.EVENT_SCROLL_TO_ELEMENT, c, !0)
    },
    _getQuestionById: function(a) {
        var b = this._getPagedList().getModuleItems(), c = _.find(b, function(b) {
            return "Question" === b.className && b.data.id === a
        });
        return c
    },
    _onSeeQuestion: function() {},
    _hasValidCanonicalPinId: function() {
        var a = this.options.canonical_pin_id;
        return a && "0" !== a
    },
    _onPinQuestionCreated: function() {}
}), P.modules.QuestionsBase.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.QuizSignupFlow"), goog.require("P.modules.LoginBase"), P.modules.QuizSignupFlow = P.modules.LoginBase.extend({
    events: {
        "click .saveBoardButton": "onClickSaveBoard"
    },
    onContentReady: function() {},
    onClickSaveBoard: function() {
        P.currentUser.isAuthenticated() ? this.createBoard({}).then(function(a) {
            window.FB.ui({
                method: "share",
                href: a
            }, function() {
                P.changeWindowLocation(a, !1)
            })
        }) : this.connect(P.SocialConnect.FACEBOOK, this.onFacebookConnectSuccess.bind(this))
    },
    onFacebookConnectSuccess: function(a) {
        var b = this.getChildById("facebookSignup");
        P.currentUser.login({
            facebook_id: a.id,
            facebook_token: a.access_token
        }).then(void 0, function() {
            b.showLoading(), P.UserRegistration.fastTrackSocialRegistration(P.SocialConnect.FACEBOOK).then(this.createBoard, this.navigate.bind(this, "/join/register/facebook/")).then(function(a) {
                window.FB.ui({
                    method: "share",
                    href: a
                }, function() {
                    var a = "/";
                    this.options.auto_follow_interest && (a = P.url.appendQueryString(a, {
                        auto_follow_interest: this.options.auto_follow_interest
                    })), P.changeWindowLocation(a, !1)
                }.bind(this))
            }.bind(this)).fin(function() {
                b.hideLoading()
            })
        }.bind(this))
    },
    createBoard: function() {
        return Promise.resolve("https://developers.facebook.com/docs/")
    }
}), P.modules.QuizSignupFlow.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/QuizSignupFlow/QuizSignupFlow.nunjucks"), goog.provide("P.modules.RecipeFeedPage"), goog.require("P.Module"), P.modules.RecipeFeedPage = P.Module.extend({}), P.modules.RecipeFeedPage.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.RelatedPinInfo"), goog.require("P.Module"), P.modules.RelatedPinInfo = P.Module.extend({
    HIDDEN_CLASS: "hidden",
    HIDE_DELAY: 3e3,
    onCreated: function() {
        this.childListen(P.CONST.EVENT_BUTTON_CLICK, this.onChildButtonClick)
    },
    onChildButtonClick: function(a) {
        var b = a.target.id;
        "downvote" === b ? this._doVote(!1) : "upvote" === b && this._doVote(!0)
    },
    _getResource: function(a) {
        var b = this.options.pin_id, c = {
            pin_id: b,
            feedback_type: a ? "positive": "negative"
        }, d = this.options.recommendation_reason;
        if (d) {
            c.reason = d.reason;
            var e = d.board;
            e && (c.through_board_id = e.id)
        }
        var f = P.resourceFactory.create("RecommendedPinFeedbackResource", c);
        return f
    },
    _doVote: function(a) {
        var b = this.options.pin_id;
        this.showLoading();
        var c = this._getResource(a);
        c.callCreate().fin(function() {
            this.hideLoading()
        }.bind(this)).then(function() {
            this.$(".preAction").addClass(this.HIDDEN_CLASS);
            var c = a ? ".confirmUpvote": ".confirmDownvote";
            this.$(c).removeClass(this.HIDDEN_CLASS), this.triggerEvent(P.CONST.EVENT_CONTENT_CHANGED, null, !0), P.setTimeout(function() {
                this.triggerEvent(P.CONST.EVENT_DISMISS, null, !0), a || P.pubsub.publish(b, P.CONST.PUBSUB_TOPIC_PIN_DELETED)
            }.bind(this), this.HIDE_DELAY)
        }.bind(this))
    }
}), P.modules.RelatedPinInfo.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.RelatedPinInfo2"), goog.require("P.Module"), P.modules.RelatedPinInfo2 = P.Module.extend({
    HIDDEN_CLASS: "hidden",
    HIDE_DELAY: 100,
    events: {
        "click .hidePin": "hidePin",
        "click .stopShowing": "stopShowing"
    },
    hidePin: function() {
        var a = this.options.pin_id;
        this.$(".preAction").addClass(this.HIDDEN_CLASS), this.triggerEvent(P.CONST.EVENT_CONTENT_CHANGED, null, !0), P.setTimeout(function() {
            this.triggerEvent(P.CONST.EVENT_DISMISS, null, !0), P.pubsub.publish(a, P.CONST.PUBSUB_TOPIC_PIN_HIDDEN)
        }.bind(this), this.HIDE_DELAY)
    },
    stopShowing: function() {
        var a = this.options.pin_id;
        this.$(".preAction").addClass(this.HIDDEN_CLASS), this.triggerEvent(P.CONST.EVENT_CONTENT_CHANGED, null, !0), P.setTimeout(function() {
            this.triggerEvent(P.CONST.EVENT_DISMISS, null, !0), P.pubsub.publish(a, P.CONST.PUBSUB_TOPIC_PIN_HIDDEN_STOP_THROUGH_BOARD)
        }.bind(this), this.HIDE_DELAY)
    }
}), P.modules.RelatedPinInfo2.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/RelatedPinInfo2/RelatedPinInfo2.nunjucks"), goog.provide("P.modules.RemovePinDialog"), goog.require("P.Module"), P.modules.RemovePinDialog = P.Module.extend({
    SUBMITTED_CLASS: "submitted",
    events: {
        "click .openPinFeedback": "openPinFeedback"
    },
    openPinFeedback: function() {
        var a = {
            pin_id: this.options.pin_id,
            feedback_type: this.options.feedback_type
        }, b = this.options.recommendation_reason, c = this.options.through_id;
        b && c && (a.through_id = c, a.recommendation_reason = b);
        var d = {
            name: "PinFeedbackDialog",
            options: a
        };
        P.loadModule(d).then(function(a) {
            this.showInModal(a), this.listen(a, P.CONST.EVENT_PIN_FEEDBACK_SUBMITTED, this.onFeedbackSubmitted)
        }.bind(this))
    },
    onFeedbackSubmitted: function() {
        this.getContent().addClass(this.SUBMITTED_CLASS)
    }
}), P.modules.RemovePinDialog.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/RemovePinDialog/RemovePinDialog.nunjucks"), goog.provide("P.modules.RepinsLikesFeedPage"), goog.require("P.Module"), P.modules.RepinsLikesFeedPage = P.Module.extend({}), P.modules.RepinsLikesFeedPage.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.RepliesBase"), goog.require("P.modules.QAList"), P.modules.RepliesBase = P.modules.QAList.extend({
    initPubsub: function() {
        var a, b = {}, c = this.options.answer_id;
        c ? (a = c, b[P.CONST.PUBSUB_TOPIC_ANSWER_REPLY_CREATED] = this._onAnswerReplyCreated) : (a = this.options.question_id, b[P.CONST.PUBSUB_TOPIC_QUESTION_REPLY_CREATED] = this._onQuestionReplyCreated), this.pubsubSubscribe(a, b)
    },
    _onQuestionReplyCreated: function(a, b, c) {
        this._onReplyCreated(c)
    },
    _onAnswerReplyCreated: function(a, b, c) {
        this._onReplyCreated(c)
    }
}), P.modules.RepliesBase.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ReplyBase"), goog.require("P.Module"), P.modules.ReplyBase = P.Module.extend({}), P.modules.ReplyBase.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ReportedContent"), goog.require("P.Module"), P.modules.ReportedContent = P.Module.extend({}), P.modules.ReportedContent.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ResetPasswordPage"), goog.require("P.Module"), goog.require("P.router");
var resetPasswordButtonId = "resetPasswordSubmit";
P.modules.ResetPasswordPage = P.Module.extend({
    onContentReady: function() {
        if (this.data.is_link_valid) {
            var a = {
                new_password: [P.Validator.Required(), P.Validator.ContainsOnlyAscii({
                    message: P.string.common.asciiPasswordError
                }), P.Validator.Password()],
                new_password_confirm: [P.Validator.Required(), P.Validator.EqualTo({
                    targetFieldName: "new_password",
                    message: P._("Passwords don't match")
                })]
            };
            this.formListener && this.removeListener(this.formListener), this.form = new P.Form(this.$("form"), a), this.formListener = this.listen(this.form, P.CONST.EVENT_SUBMIT_VALIDATED, this.onSubmitValidated)
        }
    },
    onSubmitValidated: function(a) {
        var b = this.getChildById(resetPasswordButtonId);
        a.errors[0] || (b.showLoading(!0), this.resetPassword())
    },
    resetPassword: function() {
        this.hideLoading(!0);
        var a = {
            new_password: this.form.getValue("new_password"),
            new_password_confirm: this.form.getValue("new_password_confirm")
        }, b = $.extend(_.clone(this.options), a), c = P.resourceFactory.create("ResetPasswordFromEmailResource", b);
        c.callUpdate().then(function(a) {
            var b = a.resource_response.data;
            if (b.password_changed) {
                var c = {
                    name: "ConfirmDialog",
                    options: {
                        template: "change_password_success"
                    }
                }, d = function() {
                    P.changeWindowLocation("/", !1)
                };
                P.loadModule(c).then(function(a) {
                    this.showInModal(a), this.listen(a, P.CONST.EVENT_CONFIRM, d)
                }.bind(this))
            }
        }.bind(this)).fin(function() {
            var a = this.getChildById(resetPasswordButtonId);
            a.hideLoading()
        }.bind(this))
    }
}), P.modules.ResetPasswordPage.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.SearchPageContent"), goog.require("P.Module"), P.modules.SearchPageContent = P.Module.extend({
    events: {}
}), P.modules.SearchPageContent.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.SegmentedController"), goog.require("P.Module");
var CLASS_ACTIVE_SEGMENT = "activeSegment", TAB_IDX = 0;
P.modules.SegmentedController = P.Module.extend({
    onCreated: function() {
        this.childListen(P.CONST.EVENT_BUTTON_CLICK, this.onButtonClick)
    },
    onContentReady: function() {
        var a = this.getButtons();
        this.activeModule = this.children[a.length]
    },
    resetActiveButton: function() {
        var a = this.getButtons();
        _.each(a, function(a) {
            a.getContent().removeClass(CLASS_ACTIVE_SEGMENT), a.enable()
        })
    },
    onButtonClick: function(a) {
        var b = a.target;
        if (b.isSegmentedControlButton()) {
            var c = this.getButtons();
            this.onButtonSelected(_.indexOf(c, b))
        }
    },
    onButtonSelected: function(a) {
        TAB_IDX = a, this.resetActiveButton();
        var b = this.getButtons();
        b[a].getContent().addClass(CLASS_ACTIVE_SEGMENT);
        var c = this.getModules(), d = c[a];
        _.isEqual(this.activeModule, d) || this.makeActiveModule(d)
    },
    getActiveModule: function() {
        return this.activeModule
    },
    makeActiveModuleFromIndex: function(a) {
        var b = this.getModules()[a];
        this.makeActiveButtonFromIndex(a), this.makeActiveModule(b)
    },
    makeActiveButtonFromIndex: function(a) {
        var b = this.getButtons()[a];
        this.resetActiveButton(), b.getContent().addClass(CLASS_ACTIVE_SEGMENT)
    },
    makeActiveModule: function(a) {
        this.activeModule.remove(), this.showLoading(), P.loadModule(a).then(function(a) {
            a.render().then(function() {
                var b = this.$(".content");
                this.hideLoading(), this.activeModule = a, this.insertChild(a, b)
            }.bind(this))
        }.bind(this))
    },
    getModules: function() {
        return this.options.modules
    },
    getButtons: function() {
        return this.getChildrenByModuleName("Button")
    },
    getSelectedTab: function() {
        return TAB_IDX
    }
}), P.modules.SegmentedController.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ShoppingButtonBar"), goog.require("P.Module"), P.modules.ShoppingButtonBar = P.Module.extend({}), P.modules.ShoppingButtonBar.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ShowModalButton"), goog.require("P.Module"), goog.require("P.modules.Button"), goog.require("P.modules.ModalTrigger"), P.modules.ShowModalButton = P.modules.Button.extend({
    onClick: function(a) {
        if (P.currentUser.isWriteBanned())
            P.writeban.showWriteBanned(this);
        else if (P.currentUser.isLimitedLogin())
            P.limitedLogin.showLogin(this);
        else {
            if (P.modules.Button.prototype.onClick.call(this, a), this.options.require_auth&&!this.ensureAuthentication())
                return a.preventDefault(), !1;
            if (this.showModal(), "a" === this.options.element_type)
                return !1
        }
    }
}), _.extend(P.modules.ShowModalButton.prototype, P.modules.ModalTrigger.prototype), _.extend(P.modules.ShowModalButton.prototype, {
    getAuthRedirectUrl: function() {
        var a = {};
        this.options.require_auth_params && _.extend(a, this.options.require_auth_params), P.trackRegisterAction("inline_signup_landing");
        var b = P.resourceFactory.create("InlineSignupModalResource", {});
        b.callCreate().then(function(a) {
            var b = a.resource_response.data, c = b.inline_signup_modal;
            if (!P.currentUser.isAuthenticated()) {
                if ("mixed_https_enabled" === c || "employees" === c)
                    return P.trackRegisterAction("show_inline_signup"), P.UserRegistration.showSignupModal(null, {
                        redirect_to_signup: !0,
                        can_dismiss: !1,
                        show_skip_button: !0,
                        inline_signup_modal: c
                    });
                if ("giftwrap" === c || "employees_gw" === c)
                    return P.UserRegistration.showSignupModal(null, {
                        extra_class: "redesign",
                        redirect_to_signup: !0,
                        can_dismiss: !1,
                        prev: window.location.pathname,
                        tagline: P._("Sign up to get more details about this Pin and discover more great ideas!")
                    })
            }
            P.changeWindowLocation(P.getRegisterUrl({}), !1)
        })
    },
    toString: function() {
        return this.className + "(module=" + this.options.submodule.name + ")"
    },
    getLoggingObjectIdStr: function() {
        return this.parent ? this.parent.getLoggingObjectIdStr() : null
    }
}), P.modules.ShowModalButton.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/ShowModalButton/ShowModalButton.nunjucks"), goog.provide("P.modules.SignedEmailDisassociatePage"), goog.require("P.Module"), P.modules.SignedEmailDisassociatePage = P.Module.extend({}), P.modules.SignedEmailDisassociatePage.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.SignedEmailSettingsPage"), goog.require("P.Module"), P.modules.SignedEmailSettingsPage = P.Module.extend({}), P.modules.SignedEmailSettingsPage.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.SignedEmailUnsubscribePage"), goog.require("P.Module"), P.modules.SignedEmailUnsubscribePage = P.Module.extend({}), P.modules.SignedEmailUnsubscribePage.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.TakedownFormBase"), goog.require("P.Module");
var MAX_REPORTED_ITEMS = 100, MAX_CONTEXT_NOTES_CHARS = 800, MAX_MISC_FIELD_CHARS = 128;
P.modules.TakedownFormBase = P.Module.extend({
    events: {
        "click .addAnotherButton": "onAddAnotherClick",
        "click .removeItemButton": "onRemoveItemClick",
        "click .sameInfoButton": "onSameInfoClicked"
    },
    onCreated: function() {
        this.numReportedItems = 1
    },
    onRemoveItemClick: function() {
        if (this.numReportedItems > 1) {
            var a = this.$(".ReportedContent:last");
            a.remove(), this.numReportedItems -= 1
        } else {
            var b = {
                name: "ConfirmDialog",
                options: {
                    message: "You must report at least one item."
                }
            };
            P.loadModule(b).then(function(a) {
                this.showInModal(a)
            }.bind(this))
        }
    },
    onAddAnotherClick: function() {
        var a = new P.modules.ReportedContent({
            options: {
                view_type: this.extraData.view_type
            }
        }), b = this.$(".reportedContent");
        a.render().then(function() {
            if (this.numReportedItems < MAX_REPORTED_ITEMS)
                this.insertChild(a, b), this.numReportedItems += 1, this.onContentReady();
            else {
                var c = {
                    name: "ConfirmDialog",
                    options: {
                        message: "No more than " + MAX_REPORTED_ITEMS + " reported items per form, please."
                    }
                };
                P.loadModule(c).then(function(a) {
                    this.showInModal(a)
                }.bind(this))
            }
        }.bind(this))
    },
    onSameInfoClicked: function() {
        for (var a = this.$(".contentReporter"), b = this.$(".rightsOwner"), c = 0; c < a.length; c++)
            b[c].value = a[c].value;
        var d = this.form.getField("owner_name");
        this.form.validateField(d);
        var e = this.form.getField("owner_email");
        this.form.validateField(e)
    },
    onContentReady: function() {
        var a = {
            agent_name: [P.Validator.Required()],
            agent_street_address: [P.Validator.Length({
                max: MAX_MISC_FIELD_CHARS
            })],
            agent_city: [P.Validator.Length({
                max: MAX_MISC_FIELD_CHARS
            })],
            agent_state: [P.Validator.Length({
                max: MAX_MISC_FIELD_CHARS
            })],
            agent_zipcode: [P.Validator.Length({
                max: MAX_MISC_FIELD_CHARS
            })],
            agent_country: [],
            agent_phone: [P.Validator.PhoneNumber()],
            agent_email: [P.Validator.Email({}), P.Validator.Required()],
            owner_name: [P.Validator.Required()],
            owner_street_address: [P.Validator.Length({
                max: MAX_MISC_FIELD_CHARS
            })],
            owner_city: [P.Validator.Length({
                max: MAX_MISC_FIELD_CHARS
            })],
            owner_state: [P.Validator.Length({
                max: MAX_MISC_FIELD_CHARS
            })],
            owner_zipcode: [P.Validator.Length({
                max: MAX_MISC_FIELD_CHARS
            })],
            owner_country: [],
            owner_phone: [P.Validator.PhoneNumber()],
            owner_email: [P.Validator.Email({}), P.Validator.Required()],
            is_accurate: [P.Validator.Required()],
            is_good_faith: [P.Validator.Required()],
            is_authorized_agent: [P.Validator.Required()],
            signed_name: [P.Validator.Required(), P.Validator.EqualTo({
                targetFieldName: "agent_name",
                message: "Electronic signature doesn't match your name."
            })]
        };
        this.$(".owner_website_url") && (a.owner_website_url = [P.Validator.Required(), P.Validator.URL()]), this.$(".reported_content_url") && (a.reported_content_url = [P.Validator.Required(), P.Validator.URL()]), this.$(".context_notes") && (a.context_notes = [P.Validator.Length({
            max: MAX_CONTEXT_NOTES_CHARS
        })]), this.$(".exact_string") && (a.exact_string = [P.Validator.Required()]), this.$(".remove_all") && (a.remove_all = []), this.$("strike") && (a.strike = []);
        var b = {
            prevalidate: !0
        };
        this.$form = this.$("form"), this.form = new P.Form(this.$form, a, b), this.formListener && this.removeListener(this.formListener), this.formListener = this.listen(this.form, P.CONST.EVENT_SUBMIT_VALIDATED, this.onSubmitValidated)
    },
    getFormData: function() {
        var a = [], b = {}, c = this.form.$el.serializeArray(), d = ["owner_website_url", "reported_content_url", "context_notes", "exact_string", "remove_all", "strike"], e = [], f = {};
        return _.each(c, function(c) {
            - 1 !== d.indexOf(c.name) ? ( - 1 !== e.indexOf(c.name) && (a.push(f), e = [], f = {}), f[c.name] = c.value, e.push(c.name)) : b[c.name] = b[c.name] = "on" === c.value?!0 : c.value
        }), a.push(f), b.reported_content = a, b
    },
    onSubmitValidated: function(a) {
        var b;
        if (!a.errors[0]) {
            var c = this.getChildById("submitButton");
            c.showLoading(), b = "dmcapin" === this.extraData.view_type ? this.form.getData() : this.getFormData(), b.form_type = this.extraData.view_type, b.num_reported_items = this.numReportedItems;
            var d = P.resourceFactory.create("TakedownRequestResource", b);
            d.options = b, d.callCreate({
                showError: !0
            }).then(function(a) {
                c.hideLoading();
                var b = a.resource_response.data, d = "Thanks for submitting. Your confirmation number is " + b + ".", e = {
                    name: "ConfirmDialog",
                    options: {
                        button_text: "Got it!",
                        body_message: d,
                        title: "Request Submitted",
                        template: "generic"
                    }
                };
                P.loadModule(e).then(function(a) {
                    this.showInModal(a)
                }.bind(this))
            }.bind(this)).fin(function() {
                c.hideLoading()
            })
        }
    }
}), P.modules.TakedownFormBase.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ToastBase"), goog.require("P.Module");
var DEFAULT_TOAST_VISIBLE_TIME = 3e3;
P.modules.ToastBase = P.Module.extend({
    onAdded: function() {
        var a = this;
        this.$el.transition({
            y: 200,
            opacity: 0,
            duration: 1
        }, function() {
            a.$el.addClass("visible")
        }).transition({
            y: 0,
            easing: "cubic-bezier(.19, 1.15, .48, 1)",
            opacity: .85,
            duration: 450
        })
    },
    animateOut: function() {
        this.$el.transition({
            scale: 1.1,
            opacity: 0,
            duration: 200
        }, function() {
            this.destroy()
        }.bind(this))
    },
    attachTimer: function(a) {
        this._timer = P.setTimeout(function() {
            return this.$el.isHovering() ? (clearTimeout(this._timer), void this.$el.on("mouseleave", function() {
                this.attachTimer(DEFAULT_TOAST_VISIBLE_TIME / 2)
            }.bind(this))) : void this.animateOut()
        }.bind(this), a)
    },
    onContentReady: function() {
        this.$el.initHovering(), this.attachTimer(DEFAULT_TOAST_VISIBLE_TIME)
    }
}), P.modules.ToastBase.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/ToastBase/ToastBase.nunjucks"), goog.provide("P.modules.Toasts"), goog.require("P.Module"), P.modules.Toasts = P.Module.extend({}), P.modules.Toasts.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/Toasts/Toasts.nunjucks"), goog.provide("P.modules.Token"), goog.require("P.Module"), P.modules.Token = P.Module.extend({
    getTokenData: function() {
        return {}
    }
}), P.modules.Token.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/Token/Token.nunjucks"), goog.provide("P.modules.TokenizedInput"), goog.require("P.Module"), goog.require("P.modules.Token");
var MIN_INPUT_FIELD_WIDTH = 100;
P.modules.TokenizedInput = P.Module.extend({
    events: {
        "keyup input": "onInputKeyup",
        "keydown input": "onInputKeydown",
        "click .tokenWrapper": "onTokenModuleWrapperClick",
        "click .inputToken": "onInputTokenClick",
        "click .removeAll": "onRemoveAll"
    },
    onCreated: function() {
        this.options.handled_by_parent || this.childListen(P.CONST.EVENT_ITEM_SELECTED, this.onTypeaheadItemSelected), this.tokens = [], this.savedTokens = [], this.selectedToken = null, this.childListen(P.CONST.EVENT_REMOVE_TOKEN, this.onRemoveToken), this.listen(P.Viewport, P.CONST.EVENT_BODY_COLUMN_CHANGE, this.onBodyColumnChange), this.updateTokenizedInputView = this.updateTokenizedInputView.bind(this)
    },
    onRemoveToken: function(a) {
        var b = a.data, c = _.indexOf(this.tokens, b), d = this.tokens[c].getTokenData();
        this.removeToken(b), this.triggerEvent(P.CONST.EVENT_TOKEN_REMOVED_BY_USER, d, !0)
    },
    onInputTokenClick: function() {
        this.selectedToken && this.unselectSelectedToken(), this.options.hide_tokens_on_focus && this.setEditingTokenText()
    },
    setEditingTokenText: function() {
        var a = this.getTokens();
        if (a.length > 0) {
            var b = this.constructTokenTextLeftToRight();
            this.savedTokens = $.extend(!0, [], a);
            var c = _.clone(a);
            _.each(c, function(a) {
                this.removeToken(a)
            }.bind(this)), this.getInputField().setValue(b), _.defer(function() {
                this.getInputField().setCursorPosition(b.length)
            }.bind(this))
        }
    },
    onBodyColumnChange: function() {
        this.updateTokenizedInputView()
    },
    constructTokenText: function() {
        return "prioritized" === this.options.token_text_strategy ? this.constructTokenTextBasedOnPriority() : this.constructTokenTextLeftToRight()
    },
    _getTokensWidth: function(a, b) {
        for (var c = this.getTokens(), d = 0, e = a; e <= b; e++)
            d += c[e].getWidth(!0);
        return d
    },
    updateTokenizedInputView: function() {
        var a = this.getWidth(), b = this.getTokens(), c = this._getTokensWidth(0, b.length - 1), d = this.$(".inputToken"), e = this.$(".tokensWrapper"), f = a - c;
        if (f >= MIN_INPUT_FIELD_WIDTH)
            e.css("left", 0), e.css("width", a + "px"), d.css("width", f + "px");
        else {
            var g = c + MIN_INPUT_FIELD_WIDTH;
            if (e.css("width", g + "px"), d.css("width", MIN_INPUT_FIELD_WIDTH + "px"), this.selectedToken) {
                var h = _.indexOf(b, this.selectedToken), i = Math.abs(parseInt(e.css("left"), 10)), j = this._getTokensWidth(0, h - 1);
                j - i >= 0 ? j - i > a && e.css("left", a - g + "px") : e.css("left", 0)
            } else 
                e.css("left", a - g + "px")
        }
    },
    constructTokenTextBasedOnPriority: function() {
        var a = this.getTokens(), b = "";
        return _.each(a, function(a) {
            var c = a.getTokenData(), d = c.text, e = c.priority;
            "0" === e ? b = d + " " + b : b += " " + d, b = $.trim(b)
        }), b
    },
    constructTokenTextLeftToRight: function() {
        var a = this.getTokens(), b = "";
        return _.each(a, function(a) {
            var c = a.getTokenData(), d = c.text;
            b += " " + d, b = $.trim(b)
        }), b
    },
    getTokenInputValue: function() {
        var a = this.constructTokenText();
        return $.trim(a + " " + this.getInputValue())
    },
    getInputValue: function() {
        return $.trim(this.getInputField().getValue())
    },
    setTokenValue: function(a) {
        var b = a;
        if (this.savedTokens.length > 0)
            return this.clearTokens(), this.addTokensAndUpdateInputView(this.savedTokens), this.clearSavedTokens(), "";
        var c = this.getTokens(), d = _.clone(c);
        return _.each(d, function(a) {
            var c = a.getTokenData(), d = c.text, e = new RegExp("(^|\\s)" + d + "(?=\\s|$)");
            b.match(e) ? b = b.replace(d, "") : this.removeToken(a), b = $.trim(b)
        }.bind(this)), $.trim(b)
    },
    setInputValue: function(a) {
        this.getInputField().setValue(a)
    },
    onTokenModuleWrapperClick: function(a) {
        var b = $(a.currentTarget), c = b.find(".Module").first(), d = this.getChildByElement(c);
        if (d && (d === this.selectedToken ? this.unselectSelectedToken() : this.selectToken(d), a.stopPropagation()), this.options.hide_tokens_on_focus) {
            var e = this._findIndexSelectedToken();
            this.setEditingTokenText(), e >= 0 && (_.defer(function() {
                this.getInputField().focus(), this.getInputField().setCursorPosition(e)
            }.bind(this)), this.unselectSelectedToken())
        }
    },
    getTokens: function() {
        return this.tokens
    },
    onInputKeydown: function(a) {
        var b = a.keyCode, c = $(a.target), d = c[0].selectionEnd, e = _.indexOf(this.tokens, this.selectedToken);
        switch (b) {
        case P.keyCode.LEFT:
            if (0 !== d)
                break;
            if (!this.tokens.length)
                break;
            this.selectedToken ? 0 !== e ? this.selectAdjacentToken(!0) : this.unselectSelectedToken() : this._handleNoSelectedTokenKeydown(!1);
            break;
        case P.keyCode.RIGHT:
            this.selectedToken && (e !== this.tokens.length - 1 ? this.selectAdjacentToken(!1) : this.unselectSelectedToken(), a.preventDefault());
            break;
        case P.keyCode.BACKSPACE:
            if (0 === d)
                if (a.preventDefault(), this.selectedToken) {
                    var f = this.selectedToken;
                    this.unselectSelectedToken(), this.removeToken(f), this._shouldSelectOnBackspaceKeydown=!1, this.getInputField().focus()
                } else 
                    this.removeToken(_.last(this.tokens))
        }
    },
    onInputKeyup: function(a) {
        var b = a.keyCode;
        return b !== P.keyCode.LEFT && b !== P.keyCode.RIGHT && b !== P.keyCode.BACKSPACE ? void this.unselectSelectedToken() : (a.preventDefault(), this._shouldSelectOnBackspaceKeydown=!0, void a.stopPropagation())
    },
    _handleNoSelectedTokenKeydown: function(a) {
        var b;
        b = a ? _.first(this.tokens) : _.last(this.tokens), this.selectToken(b)
    },
    selectAdjacentToken: function(a) {
        var b, c = _.indexOf(this.tokens, this.selectedToken);
        b =- 1 !== c ? a ? this.tokens[c - 1] : this.tokens[c + 1] : a ? _.last(this.tokens) : _.first(this.tokens), b || (b = null), this.selectToken(b)
    },
    getInputFieldValue: function() {
        var a = this.getInputField(), b = a.getValue();
        return b
    },
    selectToken: function(a) {
        this.selectedToken && this.selectedToken.getContent().removeClass("tokenSelected"), this.selectedToken = a, a && this.selectedToken.getContent().addClass("tokenSelected"), this.updateTokenizedInputView()
    },
    _findIndexSelectedToken: function() {
        if (this.selectedToken) {
            for (var a = _.indexOf(this.tokens, this.selectedToken), b = "", c = 0; c <= a; c++)
                b += " " + this.tokens[c].getTokenData().text;
            return $.trim(b).length
        }
        return - 1
    },
    unselectSelectedToken: function() {
        this.selectedToken && (this.selectedToken.getContent().removeClass("tokenSelected"), this.selectedToken = null, this.updateTokenizedInputView())
    },
    getInputField: function() {
        return this.getChildById("input")
    },
    onTypeaheadItemSelected: function(a) {
        var b = $.extend(!0, {}, this.options.token_module), c = a.data.item.attributes;
        if (b.data = c, !b)
            throw new Error("TokenizedInput module needs a `token_module` option.");
        P.loadModule(b).then(function(a) {
            a.renderExistingData(), this.addToken(a);
            var b = this.getInputField();
            b.clear(), b.focus()
        }.bind(this))
    },
    updateInputPlaceholder: function() {
        this.tokens && this.tokens.length > 0 ? this.getInputField().clearPlaceholder() : this.getInputField().restorePlaceholder()
    },
    addTokensAndUpdateInputView: function(a) {
        var b = a.map(function(a) {
            return this.addToken(a)
        }.bind(this));
        Promise.all(b).then(this.updateTokenizedInputView)
    },
    addToken: function(a) {
        var b = $('<li class="tokenizedItem tokenWrapper"></li>'), c = this.$(".inputToken");
        return b.insertBefore(c), this.insertChild(a, b), this.tokens.push(a), this.triggerEvent(P.CONST.EVENT_TOKEN_ADDED, a, !0), this.updateInputPlaceholder(), this.options.show_remove_all && this.updateRemoveAll(), a.render()
    },
    removeToken: function(a) {
        var b = _.indexOf(this.tokens, a);
        this.triggerEvent(P.CONST.EVENT_TOKEN_REMOVED, a, !0), - 1 !== b && (this.tokens.splice(b, 1), this.$(".tokenWrapper").eq(b).remove(), a.destroy()), this.updateInputPlaceholder(), this.updateTokenizedInputView(), this.options.show_remove_all && this.updateRemoveAll()
    },
    clearTokens: function() {
        var a = this.getTokens();
        if (a.length > 0) {
            var b = _.clone(a);
            _.each(b, function(a) {
                this.removeToken(a)
            }.bind(this))
        }
    },
    clearSavedTokens: function() {
        this.savedTokens = []
    },
    onRemoveAll: function(a) {
        this.clearTokens(), this.clearSavedTokens(), this.getInputField().clear(), this.triggerEvent(P.CONST.EVENT_TOKEN_REMOVED_BY_USER, null, !0), a.stopPropagation()
    },
    updateRemoveAll: function() {
        this.tokens.length > 0 ? this.$(".removeAll").show() : this.$(".removeAll").hide()
    }
}), P.modules.TokenizedInput.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/TokenizedInput/TokenizedInput.nunjucks"), goog.provide("P.modules.Tutorial"), goog.require("P.Module"), P.modules.Tutorial = P.Module.extend({
    onContentReady: function() {
        this.manager = P.TutorialManager.instance(), this.childListen(P.CONST.EVENT_NEXT, this.manager._next.bind(this.manager)), this.childListen(P.CONST.EVENT_PREVIOUS, this.manager._previous.bind(this.manager)), this.manager.startTutorial(this.options.tutorial_name, {
            moduleContainer: this
        })
    },
    onDestroyed: function() {
        this.manager.stopTutorial()
    }
}), P.modules.Tutorial.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.UnauthHomePageBase"), goog.require("P.Module"), goog.require("P.modules.BackgroundImage"), P.modules.UnauthHomePageBase = P.Module.extend({
    onContentReady: function() {
        P.trackRegisterAction("unauth_home"), this.setupInspiredWall(), this.setupSavePinitLanding(), this.appUpsellSetup(), this.multiStepSignupSetup()
    },
    setupSavePinitLanding: function() {
        var a = P.getQueryStringParams(this.options.next), b = a.media, c = this.$(".savePinImg").get(0);
        c && (c.src = b, this.$(".savePinText").addClass("hasImage"))
    },
    multiStepSignupSetup: function() {
        this.titleDiv = this.$(".title"), this.subtitleDiv = this.$(".subtitle"), this.homeUnauthNumbers = this.$(".homeUnauthNumbers"), this.businessSignupDiv = this.$(".businessSignup"), this.fbButton = this.$(".unAuthFacebookConnect"), this.emailLogin = this.$(".emailLogin"), this.rakutenButton = this.$(".unAuthRakutenConnect"), this.buttonContainer = this.$(".registerButtons"), this.tosFooter = this.$(".termsOfServiceFooter"), this.defaultDelay = 200, this.childListen("transitionToSecondStep", function() {
            this.transitionToSecondStep()
        }), this.childListen("fadeOutConnectOptions", function() {
            this.buttonContainer.width(this.buttonContainer.width()), this.rakutenButton.fadeOut(this.defaultDelay), this.fbButton.fadeOut(this.defaultDelay)
        }), P.trackRegisterAction("register_multi_screen_username_pass_loaded")
    },
    appUpsellSetup: function() {
        var a = P.getQueryStringParams().username;
        a && (this.appUpsellButton = this.getChildById("appUpsellButton"), this.appUpsellButton && this.listen(this.appUpsellButton, P.CONST.EVENT_BUTTON_CLICK, this.installAppEmail), this.$(".maskInput").show(), P.trackRegisterAction("app_install_show_banner"))
    },
    onFailure: function() {
        this.appUpsellButton.hideLoading(), this.$(".failureText").text("We are unable to send the email again because we've already sent you one today!"), this.$(".maskInput").hide(), this.$(".maskFailure").show()
    },
    onSuccess: function(a) {
        this.$(".successText").text(a), this.$(".maskInput").hide(), this.$(".maskSuccess").show()
    },
    installAppEmail: function() {
        var a = P.getQueryStringParams().username, b = P.resourceFactory.create("AppUpsellResource", {
            username: a
        });
        P.trackRegisterAction("app_install_click_button"), b.callCreate({
            showError: !1
        }).then(function(a) {
            P.trackRegisterAction("app_install_sent_email");
            var b = a.resource_response.data, c = b.message;
            this.onSuccess(c)
        }.bind(this), this.onFailure.bind(this))
    },
    transitionToSecondStep: function() {
        this.$(".fbText").fadeOut(), this.$(".spacer").fadeOut(), this.homeUnauthNumbers.animate({
            opacity: 0
        }), this.titleDiv.text(this.extraData.secondStepMessage).fadeIn(), this.subtitleDiv.animate({
            opacity: 0
        }), this.businessSignupDiv.fadeIn(), this.tosFooter.fadeOut(), this.emailLogin.fadeOut(), P.trackRegisterAction("register_multi_screen_username_pass_complete")
    },
    setupInspiredWall: function() {
        this.story = this.extraData.story, this.inspiredSearchContentWrapper = this.$(".inspiredSearchContentWrapper"), this.setInspiredStory()
    },
    setInspiredStory: function() {
        var a = this.getChildById("bgImage_" + this.story.story_id);
        a.setActive(!0), this.loadedBackgrounds || (this.loadedBackgrounds=!0, a.setNewImage(this.story.bg_color, this.story.bg_image), this.inspiredSearchContentWrapper.css("background-image", "url(" + this.story.bg_dialog_image + ")"))
    }
}), P.modules.UnauthHomePageBase.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.UserBase"), goog.require("P.Module"), P.modules.UserBase = P.Module.extend({}), P.modules.UserBase.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/UserBase/UserBase.nunjucks"), goog.provide("P.modules.UserProfileContentBase"), goog.require("P.Module"), P.modules.UserProfileContentBase = P.Module.extend({
    events: {}
}), P.modules.UserProfileContentBase.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.UserProfilePage"), goog.require("P.Module"), P.modules.UserProfilePage = P.Module.extend({
    events: {},
    _tabs_to_resource: {
        boards: "BoardsResource",
        pins: "UserPinsResource",
        likes: "UserLikesResource",
        followers: "UserFollowersResource",
        following: "UserFollowingResource"
    },
    getLoggingObjectIdStr: function() {
        return this.data.id
    },
    onAddedToDom: function() {
        this.childListen(P.CONST.EVENT_NAVIGATE, this.onChildNavigate)
    },
    onRemovedFromDom: function() {
        this._removeListeners()
    },
    onContentReady: function() {
        var a = {};
        a[P.CONST.PUBSUB_TOPIC_USER_BLOCKED] = this.onAccessChange, a[P.CONST.PUBSUB_TOPIC_USER_UNBLOCKED] = this.onAccessChange, this.pubsubSubscribe(this.data.id, a), "1" === this.options.show_redirected_memo && this.showRedirectDialog()
    },
    showRedirectDialog: function() {
        var a = {
            name: "ConfirmDialog",
            options: {
                template: "deleted_board_redirect",
                user_name: this.data.full_name,
                auto_close_delay_ms: 7e3
            }
        };
        P.loadModule(a).then(function(a) {
            P.getModalManager().showInModal(a)
        })
    },
    onAccessChange: function() {
        this.render()
    },
    onChildNavigate: function(a) {
        this.log.debug("UserProfilePage got navigate event from child", a.target, "for url:", a.data.url);
        var b = P.router.get() && P.router.get().resolve(a.data.url);
        if (b) {
            var c = b.module, d = b.options, e = b.resource, f = e.options && e.options.username, g = this.data;
            if (this.contentReady && c === this.className && f === (g && g.username)) {
                this.setOptions(d), this.setResource(e);
                var h = this.$el.height();
                this.$el.css("min-height", h);
                var i = this.getScrollableElement(), j = i.scrollTop(), k = d.tab, l = this.getChildByModuleName("UserProfileContent"), m = this.getChildByModuleName("UserInfoBar");
                m.setOptions({
                    tab: k,
                    spinner: {
                        enable: !1
                    }
                }), m.render(), l.setOptions({
                    tab: k
                }), l.showLoading(), l.render(function() {
                    l.hideLoading(), this.$el.css("min-height", "");
                    var a = i.height(), b = this.$el.positionAncestor(i).top, c = this.$el.height(), d = j + a - c + b;
                    d > 0 && (this.$el.css("min-height", c + d), i.scrollTop(j))
                }.bind(this)), a.data.handled=!0
            }
        }
    }
}), P.modules.UserProfilePage.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.UserRegisterBase"), goog.require("P.Module"), goog.require("P.modules.LoginBase");
var USER_REGISTER_BASE_CLASS_HIDDEN = "hidden";
P.modules.UserRegisterBase = P.modules.LoginBase.extend({
    events: {
        "blur #userFirstName,#userLastName,#userEmail": "computeUsernameSuggestion",
        "keyup #userEmail": "computeUsernameSuggestion",
        "focus #userUserName": "onSuggestUsername",
        "keyup #userUserName": "onUsernameChanged",
        "keyup #userAge": "onAgeChanged",
        'change select[name="country"]': "onCountryChanged",
        "blur input[name=email]": "onBlurEmail",
        "click .suggestionEmail": "onClickSuggestionEmail",
        'click input[name="facebook_timeline_enabled"]': "onCheckboxChanged"
    },
    onCreated: function() {
        this.usernameSuggestionResource = null, this.fieldValues = {}, this.currentUsernameSuggestion = "", this.userModifiedUsername=!1, this.fbAccess=!1
    },
    onCountryChanged: function(a) {
        var b = this.$(".termsWrapper"), c = this.$(".helpText");
        "FR" === $(a.target).val() ? (b.removeClass(USER_REGISTER_BASE_CLASS_HIDDEN), c.addClass(USER_REGISTER_BASE_CLASS_HIDDEN)) : (b.addClass(USER_REGISTER_BASE_CLASS_HIDDEN), c.removeClass(USER_REGISTER_BASE_CLASS_HIDDEN))
    },
    onBlurEmail: function() {
        if (this.extraData.show_email_suggestion) {
            var a = this.$inputEmail.val(), b = _.extend({}, {
                email: a,
                email_filter: "unused"
            }), c = P.resourceFactory.create("EmailSuggestionResource", b);
            c.callGet({
                showError: !1
            }).then(function(b) {
                var c = b.resource_response.data;
                c.length > 0 ? (this.$inputEmail.val(c[0]), this.$suggestionEmail.text(a), this.$suggestion.slideDown()) : this.$suggestion.slideUp()
            }.bind(this), function() {
                this.$suggestion.slideUp()
            }.bind(this))
        }
    },
    onClickSuggestionEmail: function(a) {
        var b = this.$suggestionEmail.text();
        this.$inputEmail.val(b), this.$suggestion.slideUp(), a.preventDefault()
    },
    onContentReady: function() {
        if (P.currentUser.isAuthenticated())
            return void this.redirect();
        if (Cookie.get(P.CONST.COOKIE_REGISTER_RESTRICT))
            return void this.redirect();
        P.FbUtil.checkFbTimelinePermission({
            success: function() {
                this.toggleFbTimelinePermission(!0)
            }.bind(this),
            error: function() {
                this.toggleFbTimelinePermission(!1)
            }.bind(this)
        });
        var a = {
            first_name: [P.Validator.Required()],
            email: [P.Validator.Required(), P.Validator.Email()],
            age: [P.Validator.Number()]
        };
        this.$suggestion = this.$(".suggestion"), this.$suggestionEmail = this.$(".suggestionEmail"), this.$inputEmail = this.$("input[name=email]"), this.extraData.show_password && (a.password = [P.Validator.ContainsOnlyAscii({
            message: P._("English letters, numbers, basic symbols only.")
        }), P.Validator.Password()]), this.extraData.inlineForm && (a = {
            email: [P.Validator.Required({
                message: P._("<b>You missed a spot!</b> Don't forget to add your email.")
            }), P.Validator.Email({
                message: P._("<b>Hmm...</b>that doesn't look like an email address.")
            })],
            age: [P.Validator.Age({
                message: P._("Please enter a valid number.")
            })],
            password: [P.Validator.ContainsOnlyAscii({
                message: P._("<b>Oh @*&#!</b> No zany characters allowed.")
            }), P.Validator.Password({
                shortPassStr: P._("<b>Your password is too short!</b> You need 6+ characters."),
                badPassStyle: P._("Your password does not have the proper style."),
                samePasswordStr: P._("Please make your username and password different."),
                blackPassStr: P._("Please make a stronger password.")
            })],
            full_name: [P.Validator.Name({
                message: P._("<b>And your name is...?</b>")
            })]
        }), this.formListener && this.removeListener(this.formListener), this.form = new P.Form(this.$("form"), a), this.formListener = this.listen(this.form, P.CONST.EVENT_SUBMIT_VALIDATED, this.onSubmitValidated);
        var b = this.options.network&&!this.options.network_data;
        b && (this.showLoading(), P.UserRegistration.fetchNetworkData(this.options.network).then(function(a) {
            this.populateForm(a)
        }.bind(this)).fin(function() {
            this.hideLoading()
        }.bind(this)));
        var c = {};
        this.options.network === P.SocialConnect.GPLUS ? (c.gplus_code = P.SessionStorage.getItem(P.CONST.SESSION_GPLUS_CODE), c.gplus_redirect_uri = P.SessionStorage.getItem(P.CONST.SESSION_GPLUS_REDIRECT_URI), this.populateForm(c), P.SessionStorage.removeItem(P.CONST.SESSION_GPLUS_CODE), P.SessionStorage.removeItem(P.CONST.SESSION_GPLUS_REDIRECT_URI)) : this.options.network === P.SocialConnect.TWITTER ? (c.twitter_id = P.SessionStorage.getItem(P.CONST.SESSION_TWITTER_ID), c.twitter_token = P.SessionStorage.getItem(P.CONST.SESSION_TWITTER_TOKEN), c.twitter_token_secret = P.SessionStorage.getItem(P.CONST.SESSION_TWITTER_TOKEN_SECRET), c.first_name = P.SessionStorage.getItem(P.CONST.SESSION_TWITTER_FIRST_NAME), c.last_name = P.SessionStorage.getItem(P.CONST.SESSION_TWITTER_LAST_NAME), c.username = P.SessionStorage.getItem(P.CONST.SESSION_TWITTER_USERNAME), c.image_url = P.SessionStorage.getItem(P.CONST.SESSION_TWITTER_IMAGE_URL), this.populateForm(c), P.SessionStorage.removeItem(P.CONST.SESSION_TWITTER_ID), P.SessionStorage.removeItem(P.CONST.SESSION_TWITTER_TOKEN), P.SessionStorage.removeItem(P.CONST.SESSION_TWITTER_TOKEN_SECRET), P.SessionStorage.removeItem(P.CONST.SESSION_TWITTER_FIRST_NAME), P.SessionStorage.removeItem(P.CONST.SESSION_TWITTER_LAST_NAME), P.SessionStorage.removeItem(P.CONST.SESSION_TWITTER_USERNAME), P.SessionStorage.removeItem(P.CONST.SESSION_TWITTER_IMAGE_URL)) : this.options.network === P.SocialConnect.RAKUTEN && (c.rakuten_id = P.SessionStorage.getItem(P.CONST.SESSION_RAKUTEN_ID), c.rakuten_token = P.SessionStorage.getItem(P.CONST.SESSION_RAKUTEN_TOKEN), c.rakuten_refresh_token = P.SessionStorage.getItem(P.CONST.SESSION_RAKUTEN_REFRESH_TOKEN), c.first_name = P.SessionStorage.getItem(P.CONST.SESSION_RAKUTEN_FIRST_NAME), c.email = P.SessionStorage.getItem(P.CONST.SESSION_RAKUTEN_EMAIL), c.gender = P.SessionStorage.getItem(P.CONST.SESSION_RAKUTEN_GENDER), this.populateForm(c), P.SessionStorage.removeItem(P.CONST.SESSION_RAKUTEN_ID), P.SessionStorage.removeItem(P.CONST.SESSION_RAKUTEN_TOKEN), P.SessionStorage.removeItem(P.CONST.SESSION_RAKUTEN_REFRESH_TOKEN), P.SessionStorage.removeItem(P.CONST.SESSION_RAKUTEN_FIRST_NAME), P.SessionStorage.removeItem(P.CONST.SESSION_RAKUTEN_EMAIL), P.SessionStorage.removeItem(P.CONST.SESSION_RAKUTEN_GENDER)), this.fieldValues = this.getFieldValues(), this.currentUsernameSuggestion = this.$("#userUserName").val(), this.currentUsernameSuggestion && this.addUsernameAsSuggestionMessage(), this.firstStep = "first_step", this.secondStep = "second_step", this.emailInput = this.$("input[name='email']"), this.passwordInput = this.$("input[name='password']"), this.emailSignupButton = this.$("#emailSignupButton"), this.userFullNameInput = this.$("#userFullName"), this.userAgeInput = this.$("#userAge"), this.userFullNameField = this.$("input[name='full_name']"), this.userAgeField = this.$("input[name='age']"), this.userGenderField = this.$(".genderFormItem"), this.finalSignupButton = this.$(".signup"), this.step1Div = this.$(".step1"), this.step1DivTop = this.$(".step1Top"), this.firstErrorTooltip = this.$("#firstStepTooltip"), this.secondErrorTooltip = this.$("#secondStepTooltip"), this.firstStepButton = this.$(".continueButton"), this.secondStepButton = this.finalSignupButton, this.groupSeparatorWrapper = this.$(".groupSeparatorWrapper"), this.firstStepComplete=!1, this.getChildById("emailSignup") && this.listen(this.getChildById("emailSignup"), P.CONST.EVENT_BUTTON_CLICK, function() {
            this.emailSignupButton.fadeOut(200), this.triggerEvent("emailSignupClick", null, !0)
        }), this.getChildById("emailCompleteFirstStep") && this.listen(this.getChildById("emailCompleteFirstStep"), P.CONST.EVENT_BUTTON_CLICK, this.validateFirstStep), this.businessCheckbox = this.$(".businessCheckboxIcon"), this.businessText = this.$(".businessSignupMulti"), this.businessText.click(function() {
            this.businessCheckbox.click()
        }.bind(this)), this.businessCheckbox.click(function() {
            this.businessCheckbox.toggleClass("checked")
        }.bind(this)), this.getChildById("submitButton") && this.listen(this.getChildById("submitButton"), P.CONST.EVENT_BUTTON_CLICK, this.validateSecondStep), this.$(".inlineEmailForm").keypress(function(a) {
            13 === a.keyCode && (this.firstStepComplete ? this.secondStepButton.click() : this.firstStepButton.click())
        }.bind(this))
    },
    facebookConnect: function(a) {
        a.stopPropagation(), this.connect(P.SocialConnect.FACEBOOK, this.onFacebookConnectSuccess)
    },
    getErrorMessage: function(a, b) {
        return a in this.extraData && b in this.extraData[a] ? this.extraData[a][b] : this.extraData.other.other
    },
    validateFirstStep: function() {
        this.form.validateField(this.emailInput, function(a) {
            0 !== a.errors.length ? this.validateComplete(a.errors[0], "emailError") : this.form.validateField(this.passwordInput, function(a) {
                if (0 !== a.errors.length)
                    this.validateComplete(a.errors[0], "passwordError");
                else {
                    var b = P.resourceFactory.create("EmailExistsResource", {
                        email: this.emailInput.val()
                    });
                    b.callGet({
                        showError: !1
                    }).then(function(a) {
                        if (a.resource_response.data===!1)
                            this.validateComplete(null, "emailError", this.emailInput.val(), this.form.getValue("password"));
                        else {
                            var b = {
                                username_or_email: this.form.getValue("email"),
                                password: this.form.getValue("password")
                            };
                            this.login(b).then(function() {
                                P.trackRegisterAction("multi_step_login"), this.redirect(P.SessionStorage.getItem(P.CONST.SESSION_KEY_INVITE_FOLLOW))
                            }.bind(this), function() {
                                this.validateComplete(P._("<b>Deja vu!</b> That email's taken. Forget your password?"), "emailError")
                            }.bind(this))
                        }
                    }.bind(this), function() {
                        this.validateComplete(P._("Hmm... that doesn't look like an email address."), "emailError")
                    }.bind(this))
                }
            }.bind(this))
        }.bind(this))
    },
    validateSecondStep: function() {
        return this.firstStepComplete ? void this.form.validateField(this.userFullNameField, function(a) {
            if (0 !== a.errors.length) {
                var b = this.businessCheckbox.hasClass("checked");
                b ? this.finalSignupButton.submit() : this.validateComplete(a.errors[0], "nameError")
            } else "" === this.userAgeInput.val().trim() ? this.finalSignupButton.submit(): this.form.validateField(this.userAgeField,
            function(a) {
                0 !== a.errors.length ? this.validateComplete(a.errors[0],
                "ageError"): this.finalSignupButton.submit()
            }.bind(this))
        }.bind(this)) : void this.validateFirstStep()
    }, validateComplete: function(a, b, c, d) {
        if (!P.getQueryStringParams().email) {
            var e;
            if ("emailError" === b || "passwordError" === b)
                e = this.firstErrorTooltip;
            else {
                if ("nameError" !== b && "ageError" !== b)
                    throw "invalid error type";
                e = this.secondErrorTooltip
            }
            var f = 200;
            if (a)
                this.$(".errorIcon").hide(), this.$("input.hasError").siblings("em").fadeIn(), e.attr("class", "errorTooltip " + b), e.html(a).fadeIn();
            else if ("emailError" === b || "passwordError" === b) {
                this.triggerEvent("fadeOutConnectOptions", null, !0);
                var g = P.resourceFactory.create("EmailSignupLaterResource", {
                    page: window.location.href,
                    email: c,
                    password: d
                });
                if (g.callCreate(), this.firstStepComplete=!0, this.extraData.multiStepNux) {
                    P.trackRegisterAction("register_multi_screen_username_pass_complete");
                    var h = {
                        name: "UserRegisterDetails",
                        options: {}
                    };
                    P.loadModule(h).then(function(a) {
                        this.showInModal(a, {
                            modal_style: "registerNux",
                            can_dismiss: !1
                        }), this.listen(a, P.CONST.EVENT_CONFIRM, function(a) {
                            this.onSubmitValidated(a.data)
                        })
                    }.bind(this))
                } else 
                    this.triggerEvent("transitionToSecondStep", null, !0), this.step1Div.fadeOut(f).next(".step2").delay(1.5 * f).fadeIn(f, function() {
                        this.extraData.disableAutofocus || this.$("input[name='full_name']").focus()
                    }.bind(this))
                }
        }
    }, toggleFbTimelinePermission: function(a) {
        this.fbAccess = a;
        var b = this.$('input[name="facebook_timeline_enabled"]');
        b.prop("checked", a)
    }, getFieldValues: function() {
        var a = {
            first_name: this.$("#userFirstName").val(),
            last_name: this.$("#userLastName").val()
        }, b = this.$("#userEmail").val();
        return b && b.match("@") && (a.email = b.replace(/@.*/, "@")), a
    }, computeUsernameSuggestion: function() {
        if (!this.userModifiedUsername) {
            var a = this.getFieldValues();
            if (!_.isEqual(this.fieldValues, a)) {
                this.fieldValues = a;
                var b = _.extend({}, this.fieldValues, {
                    limit: 1
                });
                null == this.usernameSuggestionResource && (this.usernameSuggestionResource = P.resourceFactory.create("UsernameSuggestionResource", b)), this.usernameSuggestionResource.options = b, this.usernameSuggestionResource.callGet({
                    success: function(a) {
                        this.currentUsernameSuggestion = a.resource_response.data[0]
                    }.bind(this),
                    error: P.NOOP
                })
            }
        }
    }, onSuggestUsername: function() {
        if (!this.userModifiedUsername && this.currentUsernameSuggestion) {
            var a = this.$("#userUserName");
            a.val() !== this.currentUsernameSuggestion && (a.val(this.currentUsernameSuggestion), this.form.validateField(a), this.addUsernameAsSuggestionMessage())
        }
    }, onUsernameChanged: function() {
        var a = this.$("#userUserName");
        a.val().length ? this.currentUsernameSuggestion !== a.val() && (this.userModifiedUsername=!0, this.removeUsernameAsSuggestionMessage()) : (this.userModifiedUsername=!1, this.computeUsernameSuggestion(), this.removeUsernameAsSuggestionMessage())
    }, onAgeChanged: function() {
        var a = this.$("#userAge");
        this.$(".ageLabel .hiddenValue").text(a.val()), a.val().length ? this.$(".ageLabel").addClass("active") : this.$(".ageLabel").removeClass("active")
    }, addUsernameAsSuggestionMessage: function() {
        var a = this.$("#userUserName");
        if (0 === a.nextAll(".formHelpMessage").length) {
            var b = P._("Suggested username");
            a.after('<p class="formHelpMessage">' + b + "</p>")
        }
    }, removeUsernameAsSuggestionMessage: function() {
        var a = this.$("#userUserName"), b = a.nextAll(".formHelpMessage");
        b.remove()
    }, onCheckboxChanged: function(a) {
        var b = $(a.target);
        if (b.prop("checked")&&!this.fbAccess) {
            var c = {
                success: function() {
                    this.fbAccess=!0
                }.bind(this),
                error: function() {
                    b.prop("checked", !1)
                }
            };
            P.FbUtil.fbLogin(c)
        }
    }, populateForm: function(a) {
        this.options.network_data = a;
        var b = {
            first_name: a.first_name,
            last_name: a.last_name,
            email: a.email,
            social_username: a.username,
            limit: 1
        };
        this.resource = P.resourceFactory.create("UsernameSuggestionResource", b), this.render().fin(function() {
            this.hideLoading()
        }.bind(this))
    }, onSubmitValidated: function(a) {
        if (this.extraData && this.extraData.multiStepNux ||!a.errors[0] || this.businessCheckbox.hasClass("checked")) {
            if (this.businessCheckbox && this.businessCheckbox.hasClass("checked"))
                return this.userFullNameField.val(""), void P.changeWindowLocation("/business/create/?email=" + this.getFormData().email, !1);
            if (this.extraData && this.extraData.inlineForm && this.userFullNameInput&&!this.extraData.multiStepNux && "" === this.userFullNameInput.val().trim())
                return;
            var b, c, d = this.extraData && this.extraData.networkCredentials || {};
            this.extraData.multiStepNux ? (b = a.getChildById("submitButton"), c = _.extend(this.getNuxFormData(a), d)) : (b = this.getChildById("submitButton"), c = _.extend(this.getFormData(), d)), P.UserRegistration.addExtraSocialParams(this.options.network, c), this.options.network_data && (c.social_username = this.options.network_data.username), b.showLoading(), P.UserRegistration.register(this.options.network, c).then(function() {
                this.redirect()
            }.bind(this), function(a) {
                b.hideLoading(), a.api_error_code === P.CONST.API_ERROR_UNDERAGE_REGISTER_ATTEMPT && this.redirect()
            }.bind(this))
        }
    }, redirect: function() {
        if (Cookie.get(P.CONST.COOKIE_REGISTER_RESTRICT))
            return void P.changeWindowLocation("/join/restricted/age/", !1);
        if (this.triggerEvent(P.CONST.EVENT_USER_REGISTER, {}, !0)) {
            var a = "/";
            if (this.options.auto_follow_interest)
                a = P.url.appendQueryString(a, {
                    auto_follow_interest: this.options.auto_follow_interest
                });
            else {
                var b = P.getQueryStringParams();
                b && (a = P.url.appendQueryString(a, b))
            }
            P.navigateAfterLoginStatusChange(a)
        }
    }, getFormData: function() {
        var a = this.$("form").serializeArray(), b = {}, c = "";
        if (_.each(a, function(a) {
            "full_name" === a.name ? c = a.value.trim() : b[a.name] = "on" === a.value?!0 : a.value
        }), c) {
            var d = c.split(" ");
            "" === d[0] && d.shift(), d.length > 0 && (b.first_name = d[0] || ""), d.length > 1 && (b.last_name = d[1] || "")
        }
        return b
    }, getNuxFormData: function(a) {
        var b = this.$("form").serializeArray(), c = {}, d = a.form.getField("full_name").val();
        if (c.age = a.form.getField("age").val(), c.gender = a.form.getField("gender").val(), _.each(b, function(a) {
            c[a.name] = "on" === a.value?!0 : a.value
        }), d) {
            var e = d.split(" ");
            "" === e[0] && e.shift(), e.length > 0 && (c.first_name = e[0] || ""), e.length > 1 && (c.last_name = e[1] || "")
        }
        return c
    }
}), P.modules.UserRegisterBase.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.UserRegisterPageBase"), goog.require("P.Module"), P.modules.UserRegisterPageBase = P.Module.extend({}), P.modules.UserRegisterPageBase.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.UserRegisterRestricted"), goog.require("P.Module"), P.modules.UserRegisterRestricted = P.Module.extend({
    onAddedToDom: function() {
        P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_SITE, P.CONST.PUBSUB_TOPIC_NAG_STATE, !1)
    },
    onRemovedFromDom: function() {
        P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_SITE, P.CONST.PUBSUB_TOPIC_NAG_STATE, !0)
    }
}), P.modules.UserRegisterRestricted.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.promo.PlacesBoardExamples"), goog.require("P.Module"), P.modules.promo.PlacesBoardExamples = P.Module.extend({}), P.modules.promo.PlacesBoardExamples.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.tutorials.StepBase"), goog.require("P.interfaces.TutorialStep"), goog.require("P.Module"), P.modules.tutorials.StepBase = P.Module.extend({
    onCreated: function() {
        this.childListen(P.CONST.EVENT_BUTTON_CLICK, this._onButtonClick);
        var a = {};
        a[P.CONST.PUBSUB_TOPIC_TUTORIAL_NEXT] = function() {
            this.triggerEvent(P.CONST.EVENT_NEXT, null, !0)
        }, this.pubsubSubscribe(P.CONST.PUBSUB_CHANNEL_TUTORIAL, a), this.initializeStep(), this.isContextualExperience=!1
    },
    initializeStep: P.NOOP,
    onEnter: function(a) {
        a && a()
    },
    onShow: function(a) {
        a && a()
    },
    onRemoved: P.NOOP,
    onExit: function(a) {
        a && a()
    },
    onButtonClick: function() {},
    _onButtonClick: function(a) {
        var b = a.target;
        b && (this.onButtonClick(a), a.shouldPropagate() && ("previousButton" === b.id ? (a.stopPropagation(), this.onPreviousButtonClicked()) : "nextButton" === b.id ? (a.stopPropagation(), this.onNextButtonClicked()) : "dismissButton" === b.id && (a.stopPropagation(), this.onDismissButtonClicked())))
    },
    onDismissButtonClicked: function() {
        this.triggerEvent(P.CONST.EVENT_DISMISS, null, !0)
    },
    onPreviousButtonClicked: function() {
        this.triggerEvent(P.CONST.EVENT_PREVIOUS, null, !0)
    },
    onNextButtonClicked: function() {
        this.triggerEvent(P.CONST.EVENT_NEXT, null, !0)
    },
    getExperienceId: function() {
        return null
    },
    getPlacementId: function() {
        return null
    },
    getPlacedExperienceId: function() {
        return this.isContextualExperience ? P.ExperienceManager.instance().constructPlacedExperienceId(this.getPlacementId(), this.getExperienceId()) : null
    },
    completePlacedExperience: function() {
        var a = P.ExperienceManager.instance();
        return this.getPlacedExperienceId() ? a.completePlacedExperienceId(this.getPlacedExperienceId()) : a.completePlacedExperience(this.getPlacementId(), this.getExperienceId())
    },
    dismissPlacedExperience: function() {
        var a = P.ExperienceManager.instance();
        return this.getPlacedExperienceId() ? a.dismissPlacedExperienceId(this.getPlacedExperienceId()) : a.dismissPlacedExperience(this.getPlacementId(), this.getExperienceId())
    },
    onTutorialComplete: P.NOOP,
    setExperienceViewed: function() {
        var a = P.ExperienceManager.instance();
        this.getPlacedExperienceId() ? a.viewPlacedExperienceId(this.getPlacedExperienceId()) : a.viewPlacedExperience(this.getPlacementId(), this.getExperienceId())
    }
}), P.modules.tutorials.StepBase.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.tutorials.UserEducationGuideStepBase"), goog.require("P.Module"), goog.require("P.modules.tutorials.StepBase"), goog.require("P.CONST"), P.modules.tutorials.UserEducationGuideStepBase = P.modules.tutorials.StepBase.extend({
    onContentReady: function() {
        var a = this.options.step_type, b = a === P.CONST.StepTypes.TOOLTIP, c = b ? "UserEducationGuideTooltip": "UserEducationGuideStacked", d = this.getCardModuleLoadOptions(c), e = this.getCardPositionModuleLoadOptions(c), f = b ? e: d;
        P.loadModule(f).then(function(a) {
            this.guideModule = a, this.appendChild(a), a.render()
        }.bind(this)), this.options.anchor && (this.loadPulser(), this.childListen(P.CONST.EVENT_PULSER_CLICKED, function() {
            this.goToNextStep(), $(this.options.anchor).click()
        }), $(this.options.anchor).on("click.userEducationGuideAnchor", function() {
            this.goToNextStep()
        }.bind(this)))
    },
    goToNextStep: function() {
        $(this.options.anchor).off("click.userEducationGuideAnchor"), this.guideModule.$el.find(".guideStepContent").addClass("hideCard"), window.setTimeout(function() {
            this.triggerEvent(P.CONST.EVENT_NEXT, null, !0)
        }.bind(this), 200)
    },
    onShow: function(a) {
        this.isContextualExperience=!0, a && a()
    },
    getCardModuleLoadOptions: function(a) {
        var b = {
            name: a,
            options: {
                body_html: this.options.body_html,
                stacked_cards: this.options.stacked_cards,
                step_type: this.options.step_type,
                anchor: this.options.anchor
            }
        };
        return b
    },
    getCardPositionModuleLoadOptions: function(a) {
        var b = {
            name: "PositionModule",
            options: {
                module: this.getCardModuleLoadOptions(a),
                anchor: this.options.anchor,
                position_mode: "ANCHORED",
                position_point: this.options.position_point,
                hide_caret: !0,
                class_name: "active",
                render_self: !0,
                fixed: !!this.options.fixed
            }
        };
        return b
    },
    loadPulser: function() {
        var a = {
            name: "Pulser",
            options: {
                anchor: this.options.anchor,
                fixed: !!this.options.fixed
            }
        };
        P.loadModule(a).then(function(a) {
            this.appendChild(a), a.render()
        }.bind(this))
    },
    getExperienceId: function() {
        return this.options.experienceID
    },
    getPlacementId: function() {
        return this.options.placementID
    }
}), P.modules.tutorials.UserEducationGuideStepBase.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ui.Checkbox"), goog.require("P.Module");
var CLASS_ON = "on", PROP_CHECKED = "checked";
P.modules.ui.Checkbox = P.Module.extend({
    onContentReady: function() {
        this.$input = this.$el, "fancyToggle" === this.options.view_type || "fancyCheckbox" === this.options.view_type ? (this.$input = this.$("input"), this.$el.on("click", this.onFancyToggleCheckboxClick.bind(this))) : this.$el.on("change", this.toggle.bind(this))
    },
    onFancyToggleCheckboxClick: function(a) {
        var b = $(a.currentTarget).parent()[0].tagName, c = "label" === b.toLowerCase(), d=!c || c && $(a.target).is(":checkbox");
        d && this.toggle()
    },
    toggle: function() {
        this.setChecked(!this.options.checked, !0)
    },
    setChecked: function(a, b) {
        void 0 === b && (b=!0), a === this.options.checked || this.options.disabled || (this.options.checked = a, this.$el.toggleClass(CLASS_ON, a), this.$input.prop(PROP_CHECKED, a), b && this.triggerEvent(P.CONST.EVENT_CHANGE, {
            checked: a
        }, !0))
    },
    isChecked: function() {
        return !!this.options.checked
    },
    getCheckboxName: function() {
        return this.options.name
    }
}), P.modules.ui.Checkbox.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/ui/Checkbox/Checkbox.nunjucks"), goog.provide("P.modules.ui.CheckboxGroup"), goog.require("P.Module"), P.modules.ui.CheckboxGroup = P.Module.extend({
    onContentReady: function() {
        this.childListen(P.CONST.EVENT_CHANGE, this.onInputChange), this.checkboxModules = this.getChildrenByModuleName("ui.Checkbox");
        var a = {};
        _.each(this.options.items, function(b) {
            var c = b.name;
            a[c] = {
                name: c,
                label: b.label
            }
        }), this._checkboxes = a
    },
    onInputChange: function(a) {
        a.stopPropagation(), this.triggerEvent(P.CONST.EVENT_CHANGE, null, !0)
    },
    getValue: function() {
        var a = [], b = this._checkboxes, c = 0;
        return _.each(this.checkboxModules, function(d) {
            var e = d.getCheckboxName();
            d.isChecked() && (a[c++] = {
                name: e,
                label: b[e].label
            })
        }), a
    }
}), P.modules.ui.CheckboxGroup.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ui.DateField"), goog.require("P.Module");
var DF_ACTIVE_CLASS = "active", DF_VALUE_CLASS = "hasValue", DF_ERROR_FIELD_CLASS = "errorField", DF_ERROR_CLASS = "hasError";
P.modules.ui.DateField = P.Module.extend({
    events: {
        click: "onFocus",
        "click input": "onContentClick",
        "click .dateSeparator": "onContentClick",
        "focus .dateComponent": "onContentFocus",
        "blur .dateComponent": "onContentBlur"
    },
    onContentReady: function() {
        this.$month = this.$(".mm"), this.$day = this.$(".dd"), this.$year = this.$(".yyyy")
    },
    onContentFocus: function() {
        this.$el.addClass(DF_ACTIVE_CLASS), this.triggerEvent("focus", null, !0), this.validate(!0)
    },
    onContentBlur: function() {
        this.$el.removeClass(DF_ACTIVE_CLASS), this.hasDate() ? this.$el.addClass(DF_VALUE_CLASS) : this.$el.removeClass(DF_VALUE_CLASS), this.validate(!1)
    },
    onContentClick: function() {
        return !1
    },
    onFocus: function() {
        this.$month.focus()
    },
    validate: function(a) {
        var b, c, d, e;
        this.$month.removeClass(DF_ERROR_FIELD_CLASS), this.$day.removeClass(DF_ERROR_FIELD_CLASS), this.$year.removeClass(DF_ERROR_FIELD_CLASS), this.$el.removeClass(DF_ERROR_CLASS), (this.$month.val() || this.$day.val() || this.$year.val()) && (this.$month.val() ? (c = parseInt(this.$month.val(), 10), (!c || c < 1 || c > 12) && (b=!0, this.$month.addClass(DF_ERROR_FIELD_CLASS))) : a || (b=!0), this.$day.val() ? (e = parseInt(this.$day.val(), 10), (!e || e < 1 || e > 31) && (b=!0, this.$day.addClass(DF_ERROR_FIELD_CLASS))) : a || (b=!0), this.$year.val() ? (d = parseInt(this.$year.val(), 10), (!d || d < 1900 || d > (new Date).getFullYear()) && (b=!0, this.$year.addClass(DF_ERROR_FIELD_CLASS))) : a || (b=!0)), b ? (this.$el.addClass(DF_ERROR_CLASS), this.$(".selectedDate").val("error")) : this.$(".selectedDate").val(this.getDateString())
    },
    hasDate: function() {
        return !!this.$month.val()||!!this.$day.val()||!!this.$year.val()
    },
    getTimeStamp: function() {
        var a = this.getDate();
        return a ? Math.round(a / 1e3) : 0
    },
    getDateString: function() {
        var a = this.getDate();
        return a ? a.getFullYear() + "-" + (a.getMonth() + 1) + "-" + a.getDate() : ""
    },
    getDate: function() {
        if (!this.hasDate())
            return null;
        var a = this.$month.val() + "/" + this.$day.val() + "/" + this.$year.val(), b = Date.parse(a);
        return isNaN(b)===!1 ? new Date(b) : null
    }
}), P.modules.ui.DateField.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ui.DatePicker"), goog.require("P.Module");
var PICKER_CONTAINER_CLASS = ".pickerContainer";
P.modules.ui.DatePicker = P.Module.extend({
    onContentReady: function() {
        this.minDate = this._normalizeDate(this.options.min_date, this.getDate(2012, 10, 1), !0), this.maxDate = this._normalizeDate(this.options.max_date, this.getYesterday(), !0), this.setupPicker(), this.setupQuickSelect()
    },
    getDate: function(a) {
        return this.options.utc ? P.date.UTCDate(a) : new Date(a)
    },
    _normalizeDate: function(a, b, c) {
        if (a===!1)
            return null;
        if (c) {
            if ("today" === a)
                return this.getToday();
            if ("tomorrow" === a)
                return this.getTomorrow()
        }
        var d;
        return a && (d = this.getDate(a), d.getDate()) ? d : b
    },
    getDatePicker: function() {
        return this.$(PICKER_CONTAINER_CLASS)
    },
    setupQuickSelect: function() {
        var a = {
            yesterday: this.onYesterdayClick,
            lastWeek: this.onWeekClick,
            lastTwoWeeks: this.onTwoWeekClick,
            lastMonth: this.onMonthClick
        };
        _.each(a, function(a, b) {
            var c = this.getChildById(b);
            c && this.listen(c, P.CONST.EVENT_BUTTON_CLICK, a)
        }.bind(this))
    },
    updateUsingQuickSelect: function(a, b) {
        var c = this.getDatePicker();
        "single" === this.options.selection_mode && 2 === a.length ? c.DatePickerSetDate(a[0], !0) : c.DatePickerSetDate(a, !0);
        var d = c.DatePickerGetDate(!0), e = c.DatePickerGetDate(!1);
        this.onChange(d, e, b)
    },
    onYesterdayClick: function() {
        this.updateUsingQuickSelect(this.getYesterday(), "yesterday")
    },
    onWeekClick: function() {
        var a = this.maxDate, b = this.getDaysAgo(6, this.maxDate), c = [b, a];
        this.updateUsingQuickSelect(c, "lastWeek")
    },
    onTwoWeekClick: function() {
        var a = this.maxDate, b = this.getDaysAgo(13, this.maxDate), c = [b, a];
        this.updateUsingQuickSelect(c, "lastTwoWeeks")
    },
    onMonthClick: function() {
        var a = this.maxDate, b = this.getDaysAgo(29, this.maxDate), c = [b, a];
        this.updateUsingQuickSelect(c, "lastMonth")
    },
    getDaysAgo: function(a, b) {
        var c;
        return c = b ? new Date(b) : this.getToday(), c.setDate(c.getDate() - a), c
    },
    getYesterday: function() {
        return this.getDaysAgo(1)
    },
    getTomorrow: function() {
        return this.getDaysAgo( - 1)
    },
    getToday: function() {
        return this.options.utc ? P.date.UTCToday() : P.date.today()
    },
    setupPicker: function() {
        this.getDatePicker().DatePicker({
            flat: !0,
            date: this.options.selected_date || this.getYesterday(),
            calendars: 1,
            mode: this.options.selection_mode || "range",
            starts: 1,
            onChange: function(a, b) {
                return this.onChange(a, b)
            }.bind(this),
            onRender: function(a) {
                return this.onDateRender(a)
            }.bind(this)
        })
    },
    setSelectedDate: function(a) {
        var b = this.getDatePicker(), c = this._normalizeDate(a);
        c ? b.DatePickerSetDate(c, !0) : b.DatePickerClear()
    },
    onDateRender: function(a) {
        var b=!1;
        return this.maxDate && (b = a.valueOf() > this.maxDate.valueOf()), !b && this.minDate && (b = a.valueOf() < this.minDate.valueOf()), {
            disabled: b
        }
    },
    onChange: function(a, b, c) {
        var d = {
            formatted: a,
            dates: b,
            quickSelectOption: c
        };
        this.triggerEvent(P.CONST.EVENT_DATEPICKER_DATE_SELECTED, d, !0), a.length > 1 && a[0] !== a[1] && this.triggerEvent(P.CONST.EVENT_DATEPICKER_RANGE_SELECTED, d, !0)
    },
    hidePicker: function() {
        this.parent.hide()
    }
}), P.modules.ui.DatePicker.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ui.DateRangeButton"), goog.require("P.Module"), P.modules.ui.DateRangeButton = P.Module.extend({
    onContentReady: function() {
        this._button = this.getChildById("button"), this.childListen(P.CONST.EVENT_DATEPICKER_RANGE_SELECTED, this.onDatePickerRangeSelected)
    },
    onDatePickerRangeSelected: function(a) {
        var b = a.data;
        if (b) {
            var c = b.formatted;
            c && this._button.setText(c[0] + " - " + c[1])
        }
    }
}), P.modules.ui.DateRangeButton.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ui.ExpandableTable"), goog.require("P.Module"), P.modules.ui.ExpandableTable = P.Module.extend({
    onContentReady: function() {
        this.childListen(P.CONST.EVENT_BUTTON_CLICK, this.onButtonClick)
    },
    onButtonClick: function(a) {
        var b = a.currentTarget;
        if ("showMoreButton" === b.id) {
            var c = this.getChildById("uiTable");
            c.options.max_num_to_show = null, c.render().then(function() {
                b.hide()
            })
        }
    }
}), P.modules.ui.ExpandableTable.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ui.Field"), goog.require("P.Module"), P.modules.ui.Field = P.Module.extend({
    events: {
        "focus input": "onInputFocus",
        "blur input": "onInputBlur",
        "keyup input": "onInputKeyup"
    },
    onContentReady: function() {
        this.$input = this.$("input"), this._value = this.options.value || "", this._field = this.getChildById("input"), this.options.currency_symbol && this.format_as_currency()
    },
    onInputFocus: function(a) {
        if (this.options.currency_symbol) {
            var b = $(a.currentTarget);
            b.length && b.val((this._value || "").toString())
        }
    },
    onInputBlur: function() {
        this.options.currency_symbol && this.format_as_currency()
    },
    format_as_currency: function() {
        if (this.$input.length) {
            var a = this.$input.val(), b = parseFloat(a), c = P.number.quantize(b, 2);
            this._value = c, this.$input.val(c ? c.toFixed(2) : a)
        }
    },
    disable: function() {
        this.$input.attr({
            disabled: ""
        })
    },
    enable: function() {
        this.$input.removeAttr("disabled")
    },
    isDisabled: function() {
        return this.$input.is(":disabled")
    },
    onInputKeyup: function() {},
    setValue: function(a) {
        this._field.setValue(a), this.options.currency_symbol && (this._value = a)
    },
    getValue: function() {
        return this.options.currency_symbol ? this._value.toString() || "0" : this._field.getValue()
    },
    setPlaceholder: function(a) {
        this.$input.attr("placeholder", a)
    }
}), P.modules.ui.Field.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/ui/Field/Field.nunjucks"), goog.provide("P.modules.ui.FormItemGroup"), goog.require("P.Module"), P.modules.ui.FormItemGroup = P.Module.extend({}), P.modules.ui.FormItemGroup.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ui.GraphEmptyState"), goog.require("P.Module"), P.modules.ui.GraphEmptyState = P.Module.extend({}), P.modules.ui.GraphEmptyState.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ui.ImageBlock"), goog.require("P.Module"), P.modules.ui.ImageBlock = P.Module.extend({
    events: {
        click: "onClick"
    },
    onClick: function() {
        this.triggerEvent(P.CONST.EVENT_IMAGE_BLOCK_CLICKED, this.data, !0)
    }
}), P.modules.ui.ImageBlock.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/ui/ImageBlock/ImageBlock.nunjucks"), goog.provide("P.modules.ui.Input"), goog.require("P.Module"), P.modules.ui.Input = P.Module.extend({
    onContentReady: function() {
        this._value = this.options.value || "", this.options.placeholder && this.$el.placeholder()
    },
    setValue: function(a) {
        this.$el.val(a)
    },
    getValue: function() {
        return this.$el.val()
    },
    focus: function() {
        this.$el.focus()
    },
    clear: function() {
        this.setValue("")
    },
    clearPlaceholder: function() {
        this.options.placeholder && (this.$el.attr("placeholder", ""), this.$el.val(""))
    },
    restorePlaceholder: function() {
        this.options.placeholder && this.$el.attr("placeholder", this.options.placeholder)
    },
    setCursorPosition: function(a) {
        this.$el[0].setSelectionRange(a, a)
    }
}), P.modules.ui.Input.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/ui/Input/Input.nunjucks"), goog.provide("P.modules.ui.Label"), goog.require("P.Module"), P.modules.ui.Label = P.Module.extend({}), P.modules.ui.Label.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/ui/Label/Label.nunjucks"), goog.provide("P.modules.ui.MetricControl"), goog.require("P.Module"), P.modules.ui.MetricControl = P.Module.extend({
    onCreated: function() {
        this.childListen(P.CONST.EVENT_CHANGE, this.onChildChange)
    },
    onChildChange: function() {}
}), P.modules.ui.MetricControl.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ui.MetricPoint"), goog.require("P.Module"), P.modules.ui.MetricPoint = P.Module.extend({
    formatDate: function(a, b) {
        var c = a.days[a.getUTCDay()], d = a.getMonthName(), e = d + " " + a.getUTCDate() + ", " + a.getFullYear();
        return b ? c + " " + e : e
    }
}), P.modules.ui.MetricPoint.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/ui/MetricPoint/MetricPoint.nunjucks"), goog.provide("P.modules.ui.MultipleSelectButton"), goog.require("P.Module"), P.modules.ui.MultipleSelectButton = P.Module.extend({
    onContentReady: function() {
        this._button = this.getChildById("button"), this.childListen(P.CONST.EVENT_CHANGE, this.onCheckboxChanged)
    },
    onCheckboxChanged: function(a) {
        var b = a.target, c = b.getValue(), d = [];
        _.each(c, function(a) {
            d.push(a.label)
        }), this._button.setText(d.join(", ")), a.stopPropagation(), this.triggerEvent(P.CONST.EVENT_CHANGE, c, !0)
    }
}), P.modules.ui.MultipleSelectButton.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ui.Pagination"), goog.require("P.Module"), P.modules.ui.Pagination = P.Module.extend({
    onCreated: function() {
        this.childListen(P.CONST.EVENT_BUTTON_CLICK, this._onButtonClick)
    },
    _onButtonClick: function(a) {
        var b = a.target, c = b.options.page_number, d = this.options.current_page;
        if (c || ("next" === b.id ? c = Math.min(this.options.page_count, d + 1) : "prev" === b.id && (c = Math.max(1, d - 1))), c) {
            var e = {
                pageNumber: c
            };
            this.triggerEvent(P.CONST.EVENT_PAGE_NUMBER_CLICK, e, !0)
        }
    }
}), P.modules.ui.Pagination.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ui.PickerItemCreate"), goog.require("P.Module"), P.modules.ui.PickerItemCreate = P.Module.extend({
    setCreateName: function(a) {
        this.$(".createName").text(a)
    }
}), P.modules.ui.PickerItemCreate.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/ui/PickerItemCreate/PickerItemCreate.nunjucks"), goog.provide("P.modules.ui.Progress"), goog.require("P.Module");
var PROGRESS_ACTIVE_CLASS = "active";
P.modules.ui.Progress = P.Module.extend({
    moveStep: function(a) {
        this.setStep(this.options.current_step + a)
    },
    setStep: function(a) {
        a < 0 || a > this.options.steps || (this.options.current_step = a, this._localRender(), a === this.options.steps && this.triggerEvent(P.CONST.EVENT_PROGRESS_COMPLETED, null, !0))
    },
    setMiniStepProgress: function(a, b) {
        var c = this.getChildrenByModuleName("ui.ProgressMinistep"), d = 0;
        _.each(c, function(c) {
            c.options.ministep_type === a && (d < b ? (c.setActive(), d++) : c.setInactive())
        })
    },
    updateStepWidths: function() {
        var a = this.$el.width(), b = this.$el.find("li").length;
        if (b > 1) {
            var c = Math.floor(a / b);
            c && this.$el.find("li").width(c + "px")
        }
    },
    _localRender: function() {
        var a = this.$el.children("li"), b = this.options.current_step;
        $.each(a, function(a, c) {
            $(c).toggleClass(PROGRESS_ACTIVE_CLASS, b >= a + 1)
        })
    }
}), P.modules.ui.Progress.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ui.ProgressMinistep"), goog.require("P.Module"), P.modules.ui.ProgressMinistep = P.Module.extend({
    setActive: function() {
        var a = this.$el.children("li");
        a.hasClass("active") || a.addClass("active")
    },
    setInactive: function() {
        var a = this.$el.children("li");
        a.hasClass("active") && a.removeClass("active")
    }
}), P.modules.ui.ProgressMinistep.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ui.RadioButton"), goog.require("P.Module"), P.modules.ui.RadioButton = P.Module.extend({
    events: {
        click: "_onClick"
    },
    onContentReady: function() {
        this.$input = this.$("input"), this.input = this.$input[0], this.listen(this.$input, "change", this._onChange)
    },
    _onChange: function(a) {
        this.triggerEvent(P.CONST.EVENT_CHANGE, a, !0), this.refreshLayout()
    },
    _onClick: function(a) {
        a.target === this.el && (this.input.checked=!0), this.triggerEvent(P.CONST.EVENT_CHANGE, a, !0), this.refreshLayout()
    },
    refreshLayout: function() {
        this.options.fancy && this.$el.toggleClass("fancySelected", this.input.checked)
    }
}), P.modules.ui.RadioButton.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ui.RadioGroup"), goog.require("P.Module"), P.modules.ui.RadioGroup = P.Module.extend({
    onContentReady: function() {
        this.childListen(P.CONST.EVENT_CHANGE, this.onChildChanged)
    },
    onChildChanged: function(a) {
        a.stopPropagation();
        var b = this.getChildrenByModuleName("ui.RadioButton");
        _.each(b, function(a) {
            a.refreshLayout()
        }), this.triggerEvent(P.CONST.EVENT_CHANGE, null, !0)
    },
    getCurrentLabel: function() {
        var a = this.getCheckedRadioButton();
        return a ? a.parents("label").find(".labelContent").text() : null
    },
    getCheckedRadioButton: function() {
        return this.$("input:checked")
    },
    val: function() {
        var a = this.getCheckedRadioButton();
        return a ? a.attr("value") : void 0
    }
}), P.modules.ui.RadioGroup.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ui.SectionedTable"), goog.require("P.Module"), P.modules.ui.SectionedTable = P.Module.extend({
    events: {
        "click th.sortable": "onSortableHeadingClick"
    },
    onContentReady: function() {
        this.body = this.getChildById("body"), this.currentSortByKey = null, this.reverseSort = null
    },
    onSortableHeadingClick: function(a) {
        var b = a.currentTarget.getAttribute("data-key");
        this.currentSortByKey !== b ? (this.$(".sectionRow [data-column-key=" + this.currentSortByKey + "]").removeClass("bold"), this.$(".sectionRow [data-column-key=" + b + "]").addClass("bold"), this.currentSortByKey = b, this.reverseSort=!1) : this.reverseSort=!this.reverseSort, this.body.sortByColumnKey(b, this.reverseSort), this.$(".sortable.active").removeClass("active"), this.$(".sortable[data-key=" + b + "]").addClass("active").toggleClass("reversed", this.reverseSort)
    }
}), P.modules.ui.SectionedTable.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ui.SectionedTableBody"), goog.require("P.Module"), P.modules.ui.SectionedTableBody = P.Module.extend({
    events: {
        "click tr.sectionHeader": "onSectionHeaderClicked"
    },
    onSectionHeaderClicked: function(a) {
        var b = a.currentTarget.getAttribute("data-section-index");
        this.$(a.target).find("em").toggleClass("collapsed"), this.$("tr.sectionRow[data-section-index=" + b + "]").toggleClass("hidden")
    },
    sortByColumnKey: function(a, b) {
        var c = _.groupBy(this.children, function(a) {
            return a.options.section_index
        });
        _.each(this.$("tr.sectionHeader"), function(d) {
            var e = d.getAttribute("data-section-index"), f = c[e] || [];
            _.each(f, function(a) {
                a.remove()
            }), f = _.sortBy(f, function(b) {
                var c = b.options.data[a];
                return "object" === typeof c ? c.data : c
            }), b && f.reverse();
            var g, h;
            for (g = f.length - 1; g >= 0; g--)
                h = f[g], this.insertChild(h, null, null, d)
        }.bind(this))
    }
}), P.modules.ui.SectionedTableBody.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ui.Select"), goog.require("P.Module"), P.modules.ui.Select = P.Module.extend({}), P.modules.ui.Select.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ui.SelectButton"), goog.require("P.Module"), goog.require("P.modules.ui.RadioGroup"), P.modules.ui.SelectButton = P.Module.extend({
    onContentReady: function() {
        this.$button = this.$("button"), this.buttonModule = this.getChildById("button"), this.selectedValue = this.options.value, this.childListen(P.CONST.EVENT_CHANGE, this.onChange)
    },
    onChange: function(a) {
        var b = a.target, c = b.getCurrentLabel() || this.options.text;
        this.selectedValue = b.val() || this.options.value, this.buttonModule.setText(c)
    },
    disable: function() {
        this.$button.prop("disabled", !0)
    },
    enable: function() {
        this.$button.removeProp("disabled")
    }
}), P.modules.ui.SelectButton.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/ui/SelectButton/SelectButton.nunjucks"), goog.provide("P.modules.ui.SelectList"), goog.require("P.Module"), goog.require("P.loader"), goog.require("P.dom"), P.modules.ui.SelectList = P.Module.extend({
    events: {
        "click .item": "_onClickItem",
        "mouseenter .item": "_onHoverItemStart",
        "mouseleave .item": "_onHoverItemEnd",
        keydown: "_onKeydown"
    },
    onCreated: function() {
        this._itemVisibilityFn = null
    },
    onContentReady: function() {
        var a = this._getSelectedItemElement();
        a.length > 0 && this._selectItem(a)
    },
    appendItem: function(a, b) {
        return this._appendItem(a, !!b)
    },
    hasVisibleItems: function() {
        return this.$(".item:not(.hidden)").length > 0
    },
    highlightUp: function() {
        this._highlightDirection(!0)
    },
    highlightDown: function() {
        this._highlightDirection(!1)
    },
    getSelectedItemData: function() {
        var a = this._getSelectedItemElement();
        return a.length > 0 ? this._getItemData(a) : null
    },
    scrollSelectedItemElementIntoView: function() {
        var a = this._getSelectedItemElement();
        if (0 !== a.length) {
            var b = this.$el;
            P.dom.scrollIntoView(a, b)
        }
    },
    setItemVisibilityCallback: function(a) {
        this._itemVisibilityFn = a, this._updateItemVisibility()
    },
    _appendItem: function(a, b) {
        var c = this.options.item_module || {
            name: "ui.Label"
        }, d = null;
        d = "module" === a.type ? a : {
            name: c.name,
            options: c.options,
            data: a
        }, P.loadModule(d).then(function(a) {
            a.renderExistingData().then(function() {
                var c = $('<li class="item"></li>');
                this.$(".sectionItems").last().append(c), this.insertChild(a, c), b && this._selectItem(c), this._updateItemVisibility()
            }.bind(this))
        }.bind(this))
    },
    _getSelectedItemElement: function() {
        var a = this.$(".item.selected:not(.hidden)");
        return a
    },
    _getItemData: function(a) {
        var b = this._getItemModule(a);
        return b ? b.data : null
    },
    _getItemModule: function(a) {
        var b = a.children()[0];
        return this.getChildByElement(b)
    },
    _highlightDirection: function(a) {
        var b = this._getSelectedItemElement();
        if (0 === b.length)
            a ? this._selectLastVisibleItem() : this._selectFirstVisibleItem();
        else {
            var c = b;
            do {
                if (c = a ? c.prev() : c.next(), c.is(".item:not(.hidden)")) {
                    this._selectItem(c);
                    break
                }
                if (0 === c.length) {
                    var d;
                    a ? (d = b.parents(".section").prev(), d.length || (d = this.$(".section").last())) : (d = b.parents(".section").next(), d.length || (d = this.$(".section").first()));
                    var e = d.find(".item:not(.hidden)"), f = a ? e.last(): e.first();
                    this._selectItem(f)
                }
            }
            while (c.length > 0)
            }
    }, _onClickItem: function(a) {
        a.stopPropagation();
        var b = $(a.currentTarget);
        this._selectItem(b);
        var c = this._getItemData(b);
        c && this.triggerEvent(P.CONST.EVENT_ITEM_CLICK, c, !0)
    }, _onHoverItemStart: function(a) {
        var b = $(a.currentTarget);
        this._selectItem(b)
    }, _onHoverItemEnd: function() {
        this._selectItem(null)
    }, _onKeydown: function(a) {
        if (this.hasVisibleItems())
            switch (a.keyCode) {
            case P.keyCode.UP:
                a.preventDefault(), a.stopPropagation(), this.highlightUp();
                break;
            case P.keyCode.DOWN:
                a.preventDefault(), a.stopPropagation(), this.highlightDown()
            }
    }, _selectFirstVisibleItem: function() {
        this._selectItemAtEnd(!0)
    }, _selectItemAtEnd: function(a) {
        var b = this.$(".item:not(.hidden)"), c = a ? b.first(): b.last();
        c.length > 0 && this._selectItem(c)
    }, _selectLastVisibleItem: function() {
        this._selectItemAtEnd(!1)
    }, _selectItem: function(a) {
        var b = this.$(".item.selected");
        a && (b = b.add(a)), b.each(function(b, c) {
            var d = a ? c === a[0]: !1, e = $(c);
            e.toggleClass("selected", d);
            var f = this._getItemModule(e);
            f && f.setSelectedState && f.setSelectedState(d)
        }.bind(this)), this.scrollSelectedItemElementIntoView()
    }, _updateItemVisibility: function() {
        if (this._itemVisibilityFn) {
            var a = [], b = [];
            this.children.forEach(function(c) {
                var d = c.$el.parent();
                d.hasClass("item") && (a.push(c), b.push(d))
            });
            for (var c = this._itemVisibilityFn(a), d = 0; d < c.length; d++) {
                var e = c[d], f = b[d];
                f.toggleClass("hidden", !e)
            }
            this.$(".section").each(function(a, b) {
                var c = $(b), d = c.find(".item:not(.hidden)").length > 0;
                c.find(".sectionHeading").toggleClass("hidden", !d)
            }), this._selectFirstVisibleItem()
        }
    }
}),
P.modules.ui.SelectList.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/ui/SelectList/SelectList.nunjucks"),
goog.provide("P.modules.ui.Table"),
goog.require("P.modules.ui.SectionedTable"),
P.modules.ui.Table = P.modules.ui.SectionedTable.extend({}), P.modules.ui.Table.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ui.TableHeader"), goog.require("P.Module"), P.modules.ui.TableHeader = P.Module.extend({}), P.modules.ui.TableHeader.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ui.TableLookalikePickerRow"), goog.require("P.Module"), P.modules.ui.TableLookalikePickerRow = P.Module.extend({}), P.modules.ui.TableLookalikePickerRow.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/ui/TableLookalikePickerRow/TableLookalikePickerRow.nunjucks"), goog.provide("P.modules.ui.TableRow"), goog.require("P.Module"), P.modules.ui.TableRow = P.Module.extend({
    events: {
        click: "onRowClick"
    },
    onRowClick: function(a) {
        this.triggerEvent(P.CONST.EVENT_ROW_CLICKED, null, !0), a.stopPropagation()
    }
}), P.modules.ui.TableRow.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ui.Tabs"), goog.require("P.Module"), P.modules.ui.Tabs = P.Module.extend({
    events: {
        "click .tab": "_onClick"
    },
    onContentReady: function() {
        P.Module.prototype.onContentReady.apply(this, arguments), this.modulePromises = {};
        var a = this.getChildById("firstModule");
        a && (this.modulePromises[0] = Promise.resolve(a), this.setSelectedTabIndex(0))
    },
    setSelectedTabIndex: function(a) {
        if (this.modulePromises[a])
            this._setNewIndex(a), this.modulePromises[this.currentIndex].then(function(a) {
                a.show()
            });
        else {
            var b = this.options.tabs[a].content_module, c = P.loadModule(b);
            this.modulePromises[a] = c, c.then(function(b) {
                this.insertChild(b, this.$(".content")), this._setNewIndex(a), b.showLoading(), b.render().then(function() {
                    b.hideLoading(), a === this.currentIndex ? b.show() : b.hide()
                }.bind(this))
            }.bind(this))
        }
    },
    _setNewIndex: function(a) {
        void 0 !== this.currentIndex && this.modulePromises[this.currentIndex].then(function(a) {
            a.hide()
        }), this.currentIndex = a, this._setTabActive(this.currentIndex)
    },
    _onClick: function(a) {
        var b = a.currentTarget.getAttribute("data-tab-index");
        this.setSelectedTabIndex(b)
    },
    _setTabActive: function(a) {
        var b = this.$(".header > .tab > div");
        b.removeClass("active"), b.eq(a).addClass("active")
    }
}), P.modules.ui.Tabs.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ui.TextField"), goog.require("P.Module");
var ACTIVE_CLASS = "active", VALUE_CLASS = "has-value", MENTION_TEMPLATE = "<li data-value='${name}'><img src='${img}' /> ${name} <span>(${fullName})</span></li>";
P.modules.ui.TextField = P.Module.extend({
    events: {
        click: "_onClick",
        "focus .content": "_onContentFocus",
        "blur .content": "_onContentBlur",
        "input .content": "_onContentInput",
        "keydown .content": "_onContentKeydown",
        "keyup .content": "_onContentKeyup",
        "paste .content": "_onContentPaste"
    },
    onContentReady: function() {
        this.options.mentions && this.initAtMentions(), this._getContent().placeholder()
    },
    initAtMentions: function() {
        this.typeahead = new P.TypeaheadProvider({
            tags: "mentions",
            pin_id: this.options.pin_id
        }), this._getContent().atwho("@", {
            data: "/",
            tpl: MENTION_TEMPLATE,
            callbacks: {
                remote_filter: this.onAtMentionFilter.bind(this)
            }
        }), this.atwho = this._getContent().data("atwho")
    },
    onAtMentionFilter: function(a, b, c) {
        a.q && this.typeahead.search(a.q, function(a) {
            var b = _.map(a.items, function(a) {
                return {
                    name: P.stripTags(a.username),
                    fullName: P.stripTags(a.label),
                    img: a.image
                }
            });
            c(b), this.atwho.settings["@"].data = "/"
        }.bind(this))
    },
    _getContent: function() {
        return this.$content || (this.$content = this.$(".content")), this.$content
    },
    getValue: function() {
        return this.log.debug("value:", $.trim(this._getContent().val()), this._getContent()), $.trim(this._getContent().val())
    },
    getUntrimmedValue: function() {
        return this._getContent().val()
    },
    setValue: function(a) {
        this._getContent().val(a)
    },
    focus: function() {
        this._getContent().focus()
    },
    _onClick: function() {
        this.focus()
    },
    _onContentFocus: function() {
        this.$el.addClass(ACTIVE_CLASS), this.triggerEvent(P.CONST.EVENT_FOCUS, null, !0)
    },
    _onContentBlur: function() {
        var a = this.getValue().length;
        a ? this.$el.addClass(VALUE_CLASS) : this.$el.removeClass(VALUE_CLASS), this.$el.removeClass(ACTIVE_CLASS), this.triggerEvent(P.CONST.EVENT_BLUR, {
            hasValue: a
        }, !0)
    },
    _onContentInput: function() {
        this.options.autogrow && this._updateInputSize(), this.triggerEvent(P.CONST.EVENT_CONTENT_CHANGED, null, !0)
    },
    _shouldListenToKeyup: function() {
        return "onpropertychange"in this.$el[0]&&!("oninput"in this.$el[0])
    },
    _onContentKeydown: function(a) {
        var b = a.keyCode;
        b === P.keyCode.ENTER && (this.triggerEvent(P.CONST.EVENT_ENTER_PRESSED, null, !0), this.options.prevent_default_on_enter && (a.preventDefault(), this._onContentInput()))
    },
    _onContentKeyup: function() {
        this._shouldListenToKeyup() && this._onContentInput()
    },
    _updateInputSize: function() {
        var a = this._estimateInputSize(), b = this._getContent();
        if (b.height() !== a) {
            var c = this.options.maxheight;
            c && c < a ? (b.height(c), b.addClass("maxheight")) : (b.removeClass("maxheight"), b.height(this._estimateInputSize())), this.triggerEvent(P.CONST.EVENT_TEXT_INPUT_RESIZED, null, !0)
        }
    },
    _estimateInputSize: function() {
        var a = this._getContent();
        if (!this.$_mirrorInput) {
            var b = '<div class="invisibleElemContainer"><textarea class="content invisibleElem"></textarea></div>';
            this.$el.append(b), this.$_mirrorInput = this.$(".invisibleElem"), this.$_mirrorInput.width(a.width()), a.attr("rows") && this.$_mirrorInput.attr("rows", a.attr("rows")), this._initInputHeight = a.height()
        }
        var c = this._getContent().val();
        this.$_mirrorInput.val(c);
        var d = parseInt(a.css("padding-top"), 10) || 0, e = Math.max(this.$_mirrorInput[0].scrollHeight - 2 * d, this._initInputHeight);
        return this.$_mirrorInput.val(""), e
    },
    _onContentPaste: function() {
        this.triggerEvent(P.CONST.EVENT_PASTE, null, !0)
    }
}), P.modules.ui.TextField.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/ui/TextField/TextField.nunjucks"), goog.provide("P.modules.ui.Typeahead"), goog.require("P.Module");
var DATA_MODEL_CID = "cid", MODEL_ATTR_HIGHLIGHTED = "highlighted", CLASS_SHOW_RECENT_QUERIES = "showRecentQueries", CLASS_BUTTON_TEXT = "buttonText", templateMap = {
    search: "default_item",
    userSelect: "send_pin",
    map: "add_pin_to_map",
    place: "place",
    hint_no_city: "hint_no_city",
    hint_specific_city: "hint_specific_city",
    user_circle_avatar: "user_circle_avatar",
    interest: "interest",
    emailSelect: "send_to_email",
    socialConnect: "social_connect"
}, ItemView = Backbone.View.extend({
    tagName: "li",
    initialize: function(a) {
        this.options = a, this.$el.attr("tabindex", this.options.tabIndex ? 1 : !1);
        var b = this.options.template;
        this.templateName = b, this.model.bind("change", this.onChange, this)
    },
    appendToElement: function(a) {
        this.render(), a.append(this.$el)
    },
    onChange: function() {
        return this.render(), this.model.attributes.type === P.CONST.TYPEAHEAD_TYPE_GPLUS_NON_PINNER && this.options.container.triggerEvent(P.CONST.EVENT_TYPEAHEAD_RENDER_DONE, this.model.attributes.id, !0), this
    },
    _getTemplateFilePath: function() {
        return "app/common/modules/ui/Typeahead/" + this.templateName + ".nunjucks"
    },
    render: function() {
        var a = this._getTemplateFilePath(), b = P.renderNunjucks(a, this.model.toJSON());
        return this.$el.html(b).toggleClass(P.CONST.CLASS_TYPEAHEAD_HIGHLIGHTED, !!this.model.get(MODEL_ATTR_HIGHLIGHTED)).data(DATA_MODEL_CID, this.model.cid), this
    }
});
P.modules.ui.Typeahead = P.Module.extend({
    events: {
        "click .results li": "onResultClick",
        "click .results .remove": "onRemoveResult",
        mousedown: "onMousedown",
        "mouseenter .results li": "onResultMouseEnter",
        mouseleave: "onMouseleave",
        onchange: "onChange"
    },
    _isOpen: !1,
    items: [],
    appendedStaticItems: [],
    prependedStaticItems: [],
    onCreated: function() {
        this.typeahead = new P.TypeaheadProvider(this.options), this.listen(this.typeahead, P.CONST.EVENT_DATA, this.onTypeaheadData), this.listen(this.typeahead, P.CONST.EVENT_TYPEAHEAD_SEARCH_START, this.onSearchStart), this.showNewTypeahead = "expanded" === this.options.view_type, this.showNewTypeahead && this.childListen(P.CONST.EVENT_BUTTON_CLICK, this.onChildButtonClick)
    },
    onChildButtonClick: function(a) {
        var b = a.target;
        b && b.isCancelButton() && (a.stopPropagation(), this.hide())
    },
    onSearchStart: function(a) {
        this.triggerEvent(P.CONST.EVENT_TYPEAHEAD_SEARCH_START, a, !0)
    },
    removeCacheForTerm: function(a) {
        this.typeahead.removeCacheForTerm(a)
    },
    getResource: function() {
        return this.typeahead.getResource()
    },
    setPrependedStaticItems: function(a, b) {
        this.prependedStaticItems = a, this._updateItemsToRender(), b && this.renderResults()
    },
    resetPrependStaticItems: function(a) {
        this.setPrependedStaticItems([], a)
    },
    setAppendedStaticItems: function(a, b) {
        this.appendedStaticItems = a, this._updateItemsToRender(), b && this.renderResults()
    },
    resetAppendedStaticItems: function(a) {
        this.setAppendedStaticItems([], a)
    },
    onContentReady: function() {
        this.$results = this.$(".results"), this.showNewTypeahead && (this.$leftColumn = this.$(".leftColumn"), this.$midColumn = this.$(".midColumn"), this.$rightColumn = this.$(".rightColumn"))
    },
    getItemCount: function() {
        return this.itemsToRender.count
    },
    highlightItemWithAttributeAndValue: function(a, b) {
        var c = this.itemsToRender, d = _.find(c, function(c) {
            return c.get(a) === b
        });
        d && this.highlight(d)
    },
    focusHighlighted: function() {
        this.$("." + P.CONST.CLASS_TYPEAHEAD_HIGHLIGHTED).focus()
    },
    getHighlightedItem: function() {
        return this.highlightedItem
    },
    search: function(a) {
        this.lastTerm = a, this.typeahead.search(a)
    },
    setAutocompleteScope: function(a) {
        this.typeahead.setAutocompleteScope(a)
    },
    _getColumnIndexForItem: function(a) {
        var b = a.attributes, c = b.type;
        switch (c) {
        case"recent_query":
            return b.resultIndex%3;
        case"pin_search":
        case"query":
            return 0;
        case"board_search":
        case"board":
            return 1;
        case"people_search":
        case"user":
            return 2
        }
        return 0
    },
    separateColumns: function() {
        var a = [[], [], []];
        return _.each(this.itemsToRender, function(b) {
            var c = this._getColumnIndexForItem(b);
            a[c].push(this.createItemView(b))
        }.bind(this)), {
            type: this.itemsToRender[0].attributes.type,
            leftItemViews: a[0],
            midItemViews: a[1],
            rightItemViews: a[2]
        }
    },
    renderResults: function() {
        var a;
        if (this.showNewTypeahead) {
            if (!this.itemsToRender.length)
                return void this.hide();
            a = this.separateColumns(), this.$leftColumn.empty(), this.$midColumn.empty(), this.$rightColumn.empty();
            var b = "recent_query" === a.type;
            b ? this.$el.addClass(CLASS_SHOW_RECENT_QUERIES) : this.$el.removeClass(CLASS_SHOW_RECENT_QUERIES), _.each(a.leftItemViews, function(a) {
                a.appendToElement(this.$leftColumn)
            }.bind(this)), _.each(a.midItemViews, function(a) {
                a.appendToElement(this.$midColumn)
            }.bind(this)), _.each(a.rightItemViews, function(a) {
                a.appendToElement(this.$rightColumn)
            }.bind(this))
        } else {
            if (a = _.map(this.itemsToRender, function(a) {
                return this.createItemView(a)
            }.bind(this)), !a.length)
                return void this.hide();
            this.$results.empty(), _.each(a, function(a) {
                a.appendToElement(this.$results)
            }.bind(this))
        }
        if (!this.options.bypass_maxheight) {
            var c = this.getScrollableElement().scrollTop(), d = P.Viewport.height - P.CONST.PIN_MARGIN - this.$results.offset().top + c;
            this.$results.css({
                "max-height": d,
                "overflow-y": "auto"
            })
        }
        this.show()
    },
    emptyResults: function() {
        this.itemsToRender = [], this.showNewTypeahead ? (this.$leftColumn.empty(), this.$midColumn.empty(), this.$rightColumn.empty()) : this.$results.empty()
    },
    createItemView: function(a) {
        var b = this.options.template ? templateMap[this.options.template]: templateMap.search, c = this.options.use_tab_index;
        a.attributes && a.attributes.template && (b = templateMap[a.attributes.template]);
        var d = new ItemView({
            model: a,
            container: this,
            template: b,
            tabIndex: c
        });
        return d
    },
    hide: function() {
        this._isOpen=!1, this.highlightedItem = null, this.select(null), this.$el.removeClass("open"), this.triggerEvent(P.CONST.EVENT_TYPEAHEAD_HIDDEN, null, !0)
    },
    show: function() {
        this._isOpen=!0, this.$el.addClass("open"), this.triggerEvent(P.CONST.EVENT_TYPEAHEAD_SHOWN, null, !0)
    },
    isOpen: function() {
        return this._isOpen
    },
    getLastTerm: function() {
        return this.lastTerm
    },
    selectElement: function(a) {
        var b = this.getItemByElement(a);
        return this.select(b)
    },
    getSelectedItem: function() {
        return this.selectedItem
    },
    select: function(a) {
        return a = a || this.highlightedItem, a && a.get("selectable")===!1 ? null : (a && this.triggerEvent(P.CONST.EVENT_ITEM_SELECTED, {
            item: a
        }, !0), this.selectedItem = a, a)
    },
    highlightUp: function() {
        var a = this.highlightedItem, b = this.itemsToRender, c = a ? _.indexOf(b, a) - 1: b.length - 1, d = b[c];
        return d && d.get("selectable")===!1 && (--c, c < 0 && (c = b.length - 1)), this.highlight(b[c])
    },
    highlightDown: function() {
        var a, b = this.highlightedItem, c = this.itemsToRender;
        if (b) {
            var d = _.indexOf(c, b);
            a = d === c.length - 1 ? 0 : d + 1
        } else 
            a = 0;
        var e = c[a];
        return e && e.get("selectable")===!1&&++a, this.highlight(c[a])
    },
    highlightElement: function(a) {
        var b = null;
        return a && a[0] && (b = this.getItemByElement(a)), this.highlight(b)
    },
    highlight: function(a) {
        return a = a || null, a === this.highlightedItem ? a : (this.highlightedItem && this.highlightedItem.set(MODEL_ATTR_HIGHLIGHTED, !1), this.highlightedItem = a, a && a.set(MODEL_ATTR_HIGHLIGHTED, !0), this.triggerEvent(P.CONST.EVENT_ITEM_HIGHLIGHTED, {
            item: a
        }, !0), a)
    },
    getItemByElement: function(a) {
        var b = a.data(DATA_MODEL_CID);
        return _.find(this.itemsToRender, function(a) {
            return a.cid === b
        })
    },
    abortSearch: function() {
        this.typeahead.abortSearch()
    },
    prefetch: function() {
        this.typeahead.prefetch()
    },
    onMousedown: function(a) {
        $(a.target).is("." + CLASS_BUTTON_TEXT) ? a.stopPropagation() : this.triggerEvent(P.CONST.EVENT_TYPEAHEAD_MOUSEDOWN, null, !0)
    },
    onMouseleave: function() {
        this.isOpen() && this.highlightElement()
    },
    onRemoveResult: function(a) {
        a.stopPropagation(), a.preventDefault();
        var b = $(a.currentTarget), c = b.parents("li").data(DATA_MODEL_CID), d = b.attr("data-query");
        if (d) {
            var e = P.resourceFactory.create("TypeaheadClearRecentResource", {
                query: d
            });
            e.callDelete(), b.parents("li").remove(), this.items = this.items.filter(function(a) {
                return a.query !== d
            }), this.itemsToRender = this.itemsToRender.filter(function(a) {
                return a.cid !== c
            }), 0 === this.itemsToRender.length && this.hide()
        }
    },
    onResultClick: function(a) {
        this.selectElement($(a.currentTarget)), a.stopPropagation()
    },
    onResultMouseEnter: function(a) {
        this.highlightElement($(a.currentTarget))
    },
    _updateItemsToRender: function() {
        var a = this.getLastTerm();
        if ("" !== a && this.options.enable_mypins) {
            var b = [{
                link: "/search/my_pins/?q=" + a,
                query: a,
                raw_query: a,
                send_pin_image: !1,
                tag: "my_pins",
                id: a,
                is_pinner: !1,
                label: a,
                vertical: "pins",
                entered_query: a,
                image: "",
                url: "/search/my_pins/?q=" + a
            }
            ];
            this.appendedStaticItems = b
        }
        var c = this.prependedStaticItems.concat(this.items, this.appendedStaticItems);
        this.itemsToRender = _.map(c, function(b, c) {
            return b.tag = b.tag || "", b.resultIndex = c, b.enteredQuery = a, new Backbone.Model(b)
        })
    },
    onTypeaheadData: function(a) {
        this.items = a.items, this._updateItemsToRender();
        var b = a.hint;
        this.hint = b, this.triggerEvent(P.CONST.EVENT_TYPEAHEAD_HINT, b, !0), this.renderResults(), this._triggerEvents()
    },
    _triggerEvents: function() {
        var a = this.getLastTerm(), b = 0;
        a && (b = a.length);
        var c = this.options.enable_recent_queries;
        if (0 === this.itemsToRender.length || 0 === b) {
            if (c)
                return void this.renderResults();
            this.hide(), this._triggerNoResultsReturned()
        } else 
            this._triggerResultsReturned(), this.renderResults()
    },
    _renderEmptyState: function() {
        var a = [], b = {}, c = P.CONST.TYPEAHEAD_ATTRIBUTE_EMPTY_STATE;
        b[c]=!0, a.push(b), this.items = a, this._updateItemsToRender(), this._triggerEvents(), this.renderResults()
    },
    _triggerNoResultsReturned: function(a) {
        this.triggerEvent(P.CONST.EVENT_TYPEAHEAD_NO_RESULTS_RETURNED, null, !0), a && this._renderEmptyState()
    },
    _triggerResultsReturned: function() {
        var a = {
            count: this.itemsToRender.length,
            items: this.itemsToRender
        };
        this.triggerEvent(P.CONST.EVENT_TYPEAHEAD_RESULTS_RETURNED, a, !0)
    },
    focus: function() {}
}), P.modules.ui.Typeahead.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/ui/Typeahead/Typeahead.nunjucks"), goog.provide("P.modules.AddInterestButton"), goog.require("P.Module"), goog.require("P.modules.Button"), P.modules.AddInterestButton = P.modules.Button.extend({
    onContentReady: function() {
        $.data(this.$el, "grid-columns", 1), $.data(this.$el, "grid-rows", 1)
    }
}), P.modules.AddInterestButton.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/AddInterestButton/AddInterestButton.nunjucks"), goog.provide("P.modules.AddPin"), goog.require("P.Module"), goog.require("P.modules.Button");
var BUTTON_ID_UPLOAD = "upload_button", BUTTON_ID_URL = "url_button";
P.modules.AddPin = P.Module.extend({
    onContentReady: function() {
        this.childListen(P.CONST.EVENT_BUTTON_CLICK, this.onButtonClick), Modernizr.fileinput || this.$(".pinUpload").remove()
    },
    onButtonClick: function(a) {
        var b, c = a.target, d = c.id, e=!1, f = this.options.board_id;
        c.showLoading(), d === BUTTON_ID_UPLOAD ? b = {
            name: "PinUploader",
            options: {
                default_board_id: f
            }
        } : d === BUTTON_ID_URL && (b = {
            name: "AddPinURL",
            options: {
                show_title: !0
            }
        }), b && P.loadModule(b).then(function(a) {
            this.modal.setModule(a), e && this.modal.setTransparentContent(!0)
        }.bind(this))
    }
}), P.modules.AddPin.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.AddPinRep"), goog.require("P.Module"), goog.require("P.modules.ModalTrigger"), P.modules.AddPinRep = P.modules.ModalTrigger.extend({
    events: {
        click: "onClick"
    },
    onClick: function(a) {
        a.stopPropagation(), a.preventDefault(), P.currentUser.isLimitedLogin() ? P.limitedLogin.showLogin(this) : this.showModal()
    }
}), P.modules.AddPinRep.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.AddPinURL"), goog.require("P.Module"), P.modules.AddPinURL = P.Module.extend({
    onContentReady: function() {
        var a = this.$(".standardForm"), b = {
            prevalidate: !0,
            message: P._("Where do you want to Pin from?")
        }, c = {
            url: [P.Validator.Required(b), P.Validator.URL()]
        };
        this.form = new P.Form(a, c, b), this.form.getField("url").placeholder(), this.listen(this.form, P.CONST.EVENT_SUBMIT_VALIDATED, this.onSubmitValidated)
    },
    onSubmitValidated: function(a) {
        if (!a.errors[0]) {
            var b = this.form.getValue("url");
            this.navigate("/pin/find/?" + $.param({
                url: b
            }))
        }
    }
}), P.modules.AddPinURL.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.AdhocFeedIndexPage"), goog.require("P.Module"), P.modules.AdhocFeedIndexPage = P.Module.extend({}), P.modules.AdhocFeedIndexPage.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.AdhocFeedPage"), goog.require("P.Module"), P.modules.AdhocFeedPage = P.Module.extend({}), P.modules.AdhocFeedPage.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.Answer"), goog.require("P.modules.AnswerBase"), P.modules.Answer = P.modules.AnswerBase.extend({
    onContentReady: function() {
        var a = this.data.id, b = {};
        b[P.CONST.PUBSUB_TOPIC_ANSWER_DELETED] = this._onAnswerDeleted, b[P.CONST.PUBSUB_TOPIC_ANSWER_REPORTED] = this._onAnswerReported, b[P.CONST.PUBSUB_TOPIC_ANSWER_LIKED] = this._onAnswerLiked, b[P.CONST.PUBSUB_TOPIC_ANSWER_UNLIKED] = this._onAnswerUnliked, b[P.CONST.PUBSUB_TOPIC_ANSWER_UPDATED] = this._onAnswerUpdated, this.pubsubSubscribe(a, b), this._replyButtonClickListener && this.removeListener(this._replyButtonClickListener);
        var c = this._getReplyButton();
        c && (this._replyButtonClickListener = this.listen(c, P.CONST.EVENT_BUTTON_CLICK, this._onReplyButtonClick))
    },
    _onAnswerDeleted: function() {
        this.destroy()
    },
    _onAnswerReported: function() {
        this.destroy()
    },
    _onAnswerUpdated: function() {
        this.render()
    },
    _onReplyButtonClick: function() {
        if (!this._getReplies()) {
            var a = new P.modules.Replies({
                id: "replies",
                options: {
                    context_pin_id: this.options.context_pin_id,
                    question_id: this.options.question_id,
                    answer_id: this.data.id
                }
            });
            this.insertChild(a, this.$(".answerRepliesWrapper")), a.render()
        }
    }
}), P.modules.Answer.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.AnswerCreate"), goog.require("P.Module"), P.modules.AnswerCreate = P.Module.extend({
    events: {
        "focus .content": "_onContentFocus"
    },
    onContentReady: function() {
        this.$form = this.$("form");
        var a = {
            content: [P.Validator.Required()]
        }, b = {
            prevalidate: !0
        };
        this.form = new P.Form(this.$form, a, b), this.listen(this.form, P.CONST.EVENT_SUBMIT_VALIDATED, this.onSubmitValidated), this.childListen(P.CONST.EVENT_ITEMS_REQUEST_START, this.showContentLoading), this.childListen(P.CONST.EVENT_ITEMS_REQUEST_SUCCESS, this.hideContentLoading), this.childListen(P.CONST.EVENT_ITEMS_REQUEST_ERROR, this.hideContentLoading)
    },
    onSubmitValidated: function(a) {
        a.errors[0] || this.saveAnswer(!0)
    },
    _getSubmitButton: function() {
        return this.getChildById("submitButton")
    },
    _getContentField: function() {
        return this.getChildById("answerTextField")
    },
    saveAnswer: function(a) {
        var b = this.getChildById("answerTextField"), c = b.getContent(), d = this.options.question_id, e = this.options.context_pin_id, f = P.resourceFactory.create("AnswerResource", {
            question_id: d,
            content: c,
            context_pin_id: e,
            attached_url: b.getAttachmentUrl(),
            validate: a
        }), g = this._getSubmitButton();
        g.showLoading(), f.callCreate({
            showError: !1
        }).then(function(a) {
            var c = a.resource_response.data;
            P.pubsub.publish(d, P.CONST.PUBSUB_TOPIC_QUESTION_ANSWER_CREATED, c), this.$form[0].reset(), this.$el.removeClass("expanded"), b.reset()
        }.bind(this), function(a) {
            if (a.api_error_code === P.CONST.API_ERROR_DO_NOT_KNOW_TYPE_ANSWER) {
                var b = {
                    name: "ConfirmDialog",
                    options: {
                        template: "do_not_know_answer"
                    }
                };
                P.loadModule(b).then(function(a) {
                    this.showInModal(a), this.listen(a, P.CONST.EVENT_DIALOG_BUTTON_CLICKED, function(a) {
                        var b = $(a.data);
                        b.hasClass("dialogPostAnswer") ? this.saveAnswer(!1) : b.hasClass("dialogSkipQuestion") && (this.$form[0].reset(), this.form.validate())
                    })
                }.bind(this))
            } else 
                P.showError(a.message)
        }.bind(this)).fin(function() {
            g.hideLoading()
        })
    },
    _onContentFocus: function() {
        this.$el.addClass("expanded")
    },
    showContentLoading: function() {
        this.$(".loadingIcon").removeClass("hiddenElem")
    },
    hideContentLoading: function() {
        this.$(".loadingIcon").addClass("hiddenElem")
    }
}), P.modules.AnswerCreate.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.AppInstallModal"), goog.require("P.Module"), P.modules.AppInstallModal = P.Module.extend({
    events: {
        "click .leftArrow": "shiftPanelLeft",
        "click .rightArrow": "shiftPanelRight",
        "click .leftHalf": "shiftPanelLeft",
        "click .rightHalf": "shiftPanelRight",
        "click .leftFooter": "shiftPanelLeft",
        "click .rightFooter": "shiftPanelRight",
        "click .playStoreScreenshot": "openCompletionPanel",
        "click .appStoreScreenshot": "openCompletionPanel",
        "click .dismissModal": "dismissModal"
    },
    onContentReady: function() {
        this.MIDDLE_PANEL = "middle", this.LEFT_PANEL = "left", this.RIGHT_PANEL = "right", this.currentPanel = this.MIDDLE_PANEL, this.childListen(P.CONST.EVENT_BUTTON_CLICK, this.openCompletionPanel), P.trackRegisterAction("app_install_modal_opened")
    },
    shiftPanelLeft: function() {
        var a;
        this.currentPanel === this.MIDDLE_PANEL ? (this.currentPanel = this.LEFT_PANEL, a = "150%", this.$(".leftArrow").fadeOut()) : this.currentPanel === this.RIGHT_PANEL && (this.currentPanel = this.MIDDLE_PANEL, a = "50%", this.$(".rightArrow").fadeIn()), a && (this.$(".container").animate({
            left: a
        }, {
            queue: !1
        }), P.trackRegisterAction("app_install_modal_ios_selected"))
    },
    shiftPanelRight: function() {
        var a;
        this.currentPanel === this.LEFT_PANEL ? (this.currentPanel = this.MIDDLE_PANEL, a = "50%", this.$(".leftArrow").fadeIn()) : this.currentPanel === this.MIDDLE_PANEL && (this.currentPanel = this.RIGHT_PANEL, a = "-50%", this.$(".rightArrow").fadeOut()), a && (this.$(".container").animate({
            left: a
        }, {
            queue: !1
        }), P.trackRegisterAction("app_install_modal_android_selected"))
    },
    openCompletionPanel: function() {
        setTimeout(function() {
            P.trackRegisterAction("app_install_modal_store_opened"), this.$(".completedPanel").fadeIn()
        }.bind(this), 1e3)
    },
    dismissModal: function() {
        this.options.placedExperienceId && P.ExperienceManager.instance().completePlacedExperienceId(this.options.placedExperienceId), P.trackRegisterAction("app_install_modal_experience_completed"), this.triggerEvent(P.CONST.EVENT_DISMISS, null, !1), this.destroy(), P.app.getChildById("mainModule").render()
    }
}), P.modules.AppInstallModal.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.AuthHomePage"), goog.require("P.Module"), P.modules.AuthHomePage = P.Module.extend({
    onContentReady: function() {
        this.grid = this.getChildById("feedGrid"), this.grid.hasItems() || P.logFrontEndEvent("auth_home_page_empty_grid"), this.extraData && this.extraData.emailUpdated && this.showUpdateEmailSuccess(), this._setUpFastFollow(), this.setRecentPinId(), _.defer(this.addTutorials.bind(this))
    },
    showUpdateEmailSuccess: function() {
        if (Cookie.get(P.CONST.COOKIE_EMAIL_ADDRESS_UPDATED)) {
            if (Cookie.unset(P.CONST.COOKIE_EMAIL_ADDRESS_UPDATED), !this.extraData ||!this.extraData.email)
                return;
            var a = P.string.format(P._("You updated your address! Now you just need to confirm it. Look for the message we sent to {{ new_email }}."), {
                new_email: this.extraData.email
            }), b = {
                name: "ConfirmDialog",
                options: {
                    button_text: P._("Ok"),
                    body_message: a,
                    title: P._("Email updated"),
                    template: "generic"
                }
            };
            return void P.loadModule(b).then(function(a) {
                this.showInModal(a)
            }.bind(this))
        }
    },
    _setUpFastFollow: function() {},
    addTutorials: function() {
        var a = P.ExperienceManager.instance(), b = P.Experiences.Placement.WEB_HOME_TAKEOVER;
        a.getPlacedExperienceWithContext(b).then(function(c) {
            if (c) {
                c.experience_id === P.Experiences.Experience.WEB_BLANK_SESSION && a.viewPlacedExperience(b, P.Experiences.Experience.WEB_BLANK_SESSION);
                var d = P.ExperienceManager.Tutorials[c.experience_id];
                d && (P.TutorialManager.instance().startTutorial(d, {
                    display_data: c.display_data
                }), a.viewPlacedExperience(b, c.experience_id))
            }
        })
    },
    onBoardInteraction: function() {
        this.render()
    },
    onAddedToDom: function() {
        this._setUpFastFollow(), this.setRecentPinId()
    },
    onRemovedFromDom: function() {
        P.Updater.instance().setRecentPinId(null)
    },
    setRecentPinId: function() {
        P.Updater.instance().setRecentPinId(this.getRecentPinId())
    },
    getRecentPinId: function() {
        if (!this.grid)
            return null;
        var a = this.grid.getFirstGridItem("Pin");
        return a ? a.getPinId() : void 0
    }
}), P.modules.AuthHomePage.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.BlendedCookieHomeFeedPage"), goog.require("P.Module"), P.modules.BlendedCookieHomeFeedPage = P.Module.extend({}), P.modules.BlendedCookieHomeFeedPage.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.BlendedHomeFeedPage"), goog.require("P.Module"), P.modules.BlendedHomeFeedPage = P.Module.extend({}), P.modules.BlendedHomeFeedPage.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.BoardCollaborators"), goog.require("P.Module"), goog.require("P.modules.BoardCollaboratorInvitesBase"), P.modules.BoardCollaborators = P.modules.BoardCollaboratorInvitesBase.extend({
    onContentReady: function() {
        this.boardInviteForm = this.getChildById("boardInviteForm");
        var a = this.getBoardId();
        if (a) {
            var b = {};
            b[P.CONST.PUBSUB_TOPIC_BOARD_UPDATED] = this.onBoardUpdated, this.pubsubSubscribe(a, b)
        }
    },
    onBoardUpdated: function() {
        this.render()
    }
}), P.modules.BoardCollaborators.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.BoardCount"), goog.require("P.Module"), P.modules.BoardCount = P.Module.extend({
    onContentReady: function() {
        var a = {};
        a[P.CONST.PUBSUB_TOPIC_BOARD_CREATED] = this.onBoardCountUpdate, a[P.CONST.PUBSUB_TOPIC_BOARD_DELETED] = this.onBoardCountUpdate, a[P.CONST.PUBSUB_TOPIC_BOARD_UPDATED] = this.onBoardCountUpdate, this.pubsubSubscribe(P.CONST.PUBSUB_CHANNEL_CURRENT_USER, a), P.modules.NavigateButton.prototype.onContentReady.call(this)
    },
    onBoardCountUpdate: function(a, b, c) {
        c.privacy !== P.CONST.BOARD_PRIVACY_SECRET && this.render()
    }
}), P.modules.BoardCount.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.BoardCoverEditPage"), goog.require("P.Module"), P.modules.BoardCoverEditPage = P.Module.extend({
    events: {
        "click .save": "save",
        "click .cancel": "cancel"
    },
    save: function() {
        P.trackGAEvent("board_edit_cover", P.CONST.GA_ACTION_CLICK_SUBMIT);
        var a = this.getChildByModuleName("BoardCoverEdit"), b = a.getBoardCoverData(), c = this.getChildById("saveCover");
        c.showLoading();
        var d = _.extend(b, {
            board_id: this.extraData.boardId,
            url: this.$(".in").attr("src")
        }), e = P.resourceFactory.create("BoardResource", d), f = Math.round(b.nativeWidth * b.scale), g = Math.round(b.width), h = Math.round(b.nativeHeight * b.scale), i = Math.round(b.height);
        if (h !== i && f !== g) {
            var j = _.extend({}, b, {
                userAgent: window.navigator.userAgent
            });
            this.log.error("Invalid cover data (crop box bound error)", j)
        }
        e.callUpdate().then(function() {
            P.trackGAEvent("board_edit_cover", P.CONST.GA_ACTION_SUCCESS), this.destroy(), P.pubsub.publish(this.extraData.boardId, P.CONST.PUBSUB_TOPIC_BOARD_COVER_UPDATED, d)
        }.bind(this)).fin(function() {
            c.hideLoading()
        })
    },
    cancel: function() {
        P.trackGAEvent("board_edit_cover", P.CONST.GA_ACTION_CLICK_CANCEL), this.destroy()
    }
}), P.modules.BoardCoverEditPage.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.BoardCreateRep"), goog.require("P.Module"), goog.require("P.modules.ModalTrigger"), P.modules.BoardCreateRep = P.modules.ModalTrigger.extend({
    events: {
        click: "onClick"
    },
    onClick: function(a) {
        a.stopPropagation(), a.preventDefault(), P.currentUser.isLimitedLogin() ? P.limitedLogin.showLogin(this) : this.showModal()
    }
}), P.modules.BoardCreateRep.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.BoardFollowers"), goog.require("P.Module"), P.modules.BoardFollowers = P.Module.extend({}), P.modules.BoardFollowers.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/BoardFollowers/BoardFollowers.nunjucks"), goog.provide("P.modules.BoardHeader"), goog.require("P.Module");
var BOARD_INFO_BAR_MODULE_NAME = "BoardInfoBar";
P.modules.BoardHeader = P.Module.extend({
    showEditModal: function() {
        var a = this.getChildByModuleName(BOARD_INFO_BAR_MODULE_NAME);
        return a.showEditModal()
    }
}), P.modules.BoardHeader.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/BoardHeader/BoardHeader.nunjucks"), goog.provide("P.modules.BoardInfoBar"), goog.require("P.Module");
var EDIT_BUTTON_ID = "editButton";
P.modules.BoardInfoBar = P.Module.extend({
    onContentReady: function() {
        var a = {};
        a[P.CONST.PUBSUB_TOPIC_BOARD_WRITE_ACCESS_UPDATED] = this.onWriteAccessChange, this.pubsubSubscribe(this.data.id, a), this.$el.hasClass("newBoardHeader") && (this.scrollListener = this.listen(this.getScrollableElement(), P.CONST.EVENT_SCROLL, this.onScroll)), this.fixedHeader=!1
    },
    onWriteAccessChange: function() {
        this.render()
    },
    showEditModal: function() {
        var a = this.getChildById(EDIT_BUTTON_ID);
        return a ? (a.showModal(), !0) : !1
    },
    onAddedToDom: function() {
        this.infoBarPosition = this.$el.position().top
    },
    onScroll: function() {
        var a = this.getScrollableElement().scrollTop();
        a < 0 || (a >= this.infoBarPosition&&!this.fixedHeader ? (this.$el.toggleClass("fixedHeader"), this.fixedHeader=!0) : a < this.infoBarPosition && this.fixedHeader && (this.$el.toggleClass("fixedHeader"), this.fixedHeader=!1))
    }
}), P.modules.BoardInfoBar.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/BoardInfoBar/BoardInfoBar.nunjucks"), goog.provide("P.modules.BoardInvite"), goog.require("P.Module"), goog.require("P.modules.BoardInviteBase"), P.modules.BoardInvite = P.modules.BoardInviteBase.extend({
    onClickRemove: function() {
        var a = this.options.view_type;
        "boardCreate" === a ? (this.triggerEvent(P.CONST.EVENT_BOARD_CREATE_USER_REMOVED, {
            type: "pinner",
            identifier: this.options.identifier
        }, !0), this.destroy()) : "email" === a ? (this.triggerEvent(P.CONST.EVENT_BOARD_CREATE_USER_REMOVED, {
            type: "email",
            identifier: this.options.identifier
        }, !0), this.destroy()) : "facebook" === a ? (this.triggerEvent(P.CONST.EVENT_BOARD_CREATE_USER_REMOVED, {
            type: "facebook",
            identifier: this.options.identifier
        }, !0), this.destroy()) : this.getConfirmBoardInvite() ? this.confirmDeleteBoardInvite() : this.deleteBoardInvite()
    },
    confirmDeleteBoardInvite: function() {
        var a = this._getCurrentUserIsInvitedUser(), b = this._getInvitedUserFullName(), c = {
            name: "RemoveUserFromBoardDialog",
            options: {
                template: "delete_board_invite",
                current_user_is_invited_user: a,
                invited_user_first_name: this.extraData.invitedUserFirstName,
                invited_user_full_name: b
            }
        };
        P.loadModule(c).then(function(a) {
            this.showInModal(a), this.listen(a, P.CONST.EVENT_CONFIRM, this.deleteBoardInvite)
        }.bind(this))
    }
}), P.modules.BoardInvite.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/BoardInvite/BoardInvite.nunjucks"), goog.provide("P.modules.BoardPickerOld"), goog.require("P.Module"), goog.require("P.modules.PositionModule");
var BOARD_COLLAB_ATTR = "data-collaborative", BOARD_PLACE_ATTR = "data-place", BOARD_ID_ATTR = "data-id", BOARD_PRIVACY_ATTR = "data-privacy", BOARD_SUGGESTION_ATTR = "data-suggestion", CLASS_ACTIVE = "active", CLASS_VISIBLE = "visible";
P.modules.BoardPickerOld = P.Module.extend({
    events: {
        "click .boardPickerOuter": "onOuterClick",
        "click .boardPickerItem": "onItemClick",
        "keydown .createBoardName": "onCreateBoardKeydown",
        "input .createBoardName": "onCreateBoardContentChange"
    },
    onCreateBoardKeydown: function(a) {
        var b = P.keyCode;
        return a.keyCode === b.ENTER ? (this.createBoard(), !1) : void 0
    },
    onCreateBoardContentChange: function() {
        var a = this.getChildById("createBoard"), b = this.$(".createBoardName").val();
        b ? a.enable() : a.disable()
    },
    onButtonClick: function(a) {
        var b = a.target;
        b && "createBoard" === b.id && this.createBoard()
    },
    onCreated: function() {
        this.$boardOuter = null, this.$boardMenuWrapper = null, this.childListen(P.CONST.EVENT_BUTTON_CLICK, this.onButtonClick), this.childListen(P.CONST.EVENT_CONTENT_CHANGED, this.onCreateBoardContentChange)
    },
    onItemClick: function(a) {
        var b = $(a.target), c = b.attr(BOARD_SUGGESTION_ATTR);
        if (c)
            return this.createBoard(c), void a.stopImmediatePropagation();
        var d = b.attr(BOARD_ID_ATTR);
        if (!d)
            return void a.stopImmediatePropagation();
        this._selectedBoardId = d;
        var e = b.text(), f = b.attr(BOARD_PRIVACY_ATTR), g=!!b.attr(BOARD_COLLAB_ATTR), h = "True" === b.attr(BOARD_PLACE_ATTR);
        this.setSelectedBoard(d, e, f, g, h), this.triggerChangeEvent(), this.closeMenu()
    },
    triggerChangeEvent: function() {
        var a = this.getSelectedBoardPrivacy();
        this.triggerEvent(P.CONST.EVENT_CHANGE, {
            privacy: a
        }, !0)
    },
    createBoard: function(a) {
        var b = this.getChildById("createBoard"), c = a || this.$(".createBoardName").val(), d = P.resourceFactory.create("BoardResource", {
            name: c
        });
        b.showLoading(), d.callCreate().then(function(a) {
            var b = a.resource_response.data;
            this.options.default_board_id = b.id, this.render().then(function() {
                this.triggerChangeEvent()
            }.bind(this)), this.triggerEvent(P.CONST.EVENT_BOARD_SELECTED, null, !0), this.triggerEvent(P.CONST.EVENT_BOARD_CREATED, b, !0), P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_CURRENT_USER, P.CONST.PUBSUB_TOPIC_BOARD_CREATED, b)
        }.bind(this)).fin(function() {
            b.hideLoading()
        })
    },
    getSelectedBoardId: function() {
        return $(".currentBoard", this.$boardOuter).attr(BOARD_ID_ATTR)
    },
    getSelectedBoardPrivacy: function() {
        return this.$(".currentBoard").attr(BOARD_PRIVACY_ATTR)
    },
    getBoardCount: function() {
        return this.extraData.num_boards || 0
    },
    setSelectedBoardAttributes: function(a, b, c) {
        var d = this.$(".currentBoard", this.$boardOuter);
        d.attr(BOARD_PRIVACY_ATTR, a), d.attr(BOARD_COLLAB_ATTR, b), d.attr(BOARD_PLACE_ATTR, c)
    },
    setSelectedBoardIcons: function(a, b, c) {
        var d = this.$(".currentBoard", this.$boardOuter), e = d.find(".secretIcon"), f = d.find(".collaborativeIcon"), g = d.find(".placeIcon"), h = "hidden";
        e.toggleClass(h, !a), f.toggleClass(h, !b), g.toggleClass(h, !c)
    },
    setSelectedBoard: function(a, b, c, d, e) {
        var f = this.$(".currentBoard", this.$boardOuter), g = d, h = c === P.CONST.BoardPrivacy.SECRET;
        this._selectedBoardId = a, this.setSelectedBoardAttributes(c, d, e), this.setSelectedBoardIcons(h, g, e), f.attr(BOARD_ID_ATTR, this._selectedBoardId), this.$(".currentBoardName", f).text(b)
    },
    onContentReady: function() {
        P.Module.prototype.onContentReady.apply(this, arguments), this.$boardOuter = this.$(".boardPickerOuter"), this.$boardMenuWrapper = this.$(".boardPickerInnerWrapper"), this.$(".createBoardName").placeholder(), this._selectedBoardId = this.$boardOuter.attr(BOARD_ID_ATTR), this.model && this.listenToOnce(this.model, "change add remove", function() {
            P.setTimeout(function() {
                this.renderExistingData().then(function() {
                    this.triggerChangeEvent()
                }.bind(this))
            }.bind(this), 1)
        }.bind(this)), this.extraData && this.extraData.no_boards && P.deferDomManipulation(function() {
            var a = this.$(".tooltipAnchor");
            P.boardPickerUtil.showNoBoardsTooltip(a)
        }.bind(this))
    },
    onOuterClick: function(a) {
        var b = this.getChildById("createBoard"), c = this.$(".createBoardName").val();
        this.options.disabled || (c || b.disable(), this._selectedBoardId = $(a.target).attr(BOARD_ID_ATTR), this.openMenu())
    },
    openMenu: function() {
        var a = $("<div></div>").addClass("boardPickerMask");
        this.$el.append(a);
        var b = this._selectedBoardId || this.$(".currentBoard").attr(BOARD_ID_ATTR), c = this.$(".boardPickerInner").find("[" + BOARD_ID_ATTR + "=" + b + "]");
        c.addClass(CLASS_ACTIVE), a.on("click.boardpicker", function(a) {
            this.closeMenu(), a.stopPropagation(), a.stopImmediatePropagation()
        }.bind(this)), this.$boardMenuWrapper.addClass(CLASS_VISIBLE)
    },
    closeMenu: function() {
        var a = this.$(".boardPickerMask");
        a.off("click.boardpicker"), a.detach(), this.$(".boardPickerInner").find("." + CLASS_ACTIVE).removeClass(CLASS_ACTIVE), this.$boardMenuWrapper.removeClass(CLASS_VISIBLE)
    }
}), P.modules.BoardPickerOld.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/BoardPickerOld/BoardPickerOld.nunjucks"), goog.provide("P.modules.BoardRecFeedHomePage"), goog.require("P.Module"), P.modules.BoardRecFeedHomePage = P.Module.extend({
    onContentReady: function() {
        var a = this.getChildById("grid"), b = "none";
        a&&!a.hasItems() && (a.remove(), b = "block"), this.$(".noResults").css("display", b)
    }
}), P.modules.BoardRecFeedHomePage.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.BoardRecommendationsModule"), goog.require("P.Module"), P.modules.BoardRecommendationsModule = P.Module.extend({
    onContentReady: function() {
        this.destroyIfEmpty()
    },
    isEmpty: function() {
        if (!this.contentReady)
            return !1;
        var a = this.getChildById("relatedBoardsFeed");
        return !a ||!a.hasItems()
    }
}), P.modules.BoardRecommendationsModule.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.BusinessAccountCreate"), goog.require("P.Module"), P.modules.BusinessAccountCreate = P.Module.extend({}), P.modules.BusinessAccountCreate.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.BusinessAccountCreateFormV1"), goog.require("P.Module"), P.modules.BusinessAccountCreateFormV1 = P.modules.BusinessAccountCreateBaseV1.extend({
    onContentReady: function() {
        var a = {
            first_name: [P.Validator.Required()],
            last_name: [P.Validator.Required()],
            email: [P.Validator.Email({}), P.Validator.Required()],
            account_type: [P.Validator.Required()],
            business_name: [P.Validator.Required()],
            about: [P.Validator.Length({
                max: P.CONST.MAX_CHARS_FOR_USER_DESCRIPTION
            })],
            accept_terms: [P.Validator.Required()],
            website_url: [P.Validator.URL()]
        };
        this.$(".password") && (a.password = [P.Validator.Password(), P.Validator.Required()]), this.$(".email") && (a.email = [P.Validator.Email({}), P.Validator.Required()]), this.$(".username") && (a.username = [P.Validator.Required()]);
        var b = {};
        this.$(".aboutText").keyup(), this.$form = this.$("form"), this.form = new P.Form(this.$form, a, b), this.listen(this.form, P.CONST.EVENT_SUBMIT_VALIDATED, this.onSubmitValidated)
    },
    getFormData: function() {
        var a = this.$("form").serializeArray(), b = {};
        return _.each(a, function(a) {
            b[a.name] = "on" === a.value?!0 : a.value
        }), b
    },
    onSubmitValidated: function(a) {
        if (P.trackRegisterAction("create_business_submit_clicked"), !a.errors[0]) {
            var b = this.getChildById("submitButton"), c = this.getFormData();
            b.showLoading(), P.UserRegistration.register("partner", c).then(function(a) {
                P.trackRegisterAction("create_business_signup_success"), this.log.debug("Signup success:", a), this.triggerEvent(P.CONST.EVENT_USER_REGISTER, {}, !0) && (window.location = "/")
            }.bind(this)).fin(function() {
                b.hideLoading()
            })
        }
    }
}), P.modules.BusinessAccountCreateFormV1.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.BusinessAccountCreateFormV2"), goog.require("P.Module"), P.modules.BusinessAccountCreateFormV2 = P.Module.extend({
    onContentReady: function() {
        if (P.trackRegisterAction("create_business_account_loaded"), P.currentUser.isAuthenticated())
            if (P.currentUser.attributes.is_partner)
                this.navigate("/business/getstarted/");
            else {
                var a = {
                    name: "ConfirmDialog",
                    options: {
                        template: "confirm_create_a_business"
                    }
                };
                P.loadModule(a).then(function(a) {
                    this.showInModal(a), this.listen(a, P.CONST.EVENT_DIALOG_BUTTON_CLICKED, this.onConfirmClick)
                }.bind(this))
            } else {
            this.setupInspiredWall();
            var b = {
                email: [P.Validator.Email({}), P.Validator.Required()],
                account_type: [P.Validator.Required()],
                business_name: [P.Validator.Required()],
                about: [P.Validator.Length({
                    max: P.CONST.MAX_CHARS_FOR_USER_DESCRIPTION
                })],
                website_url: [P.Validator.URL()]
            };
            this.$(".password") && (b.password = [P.Validator.Password(), P.Validator.Required()]), this.$(".email") && (b.email = [P.Validator.Email({}), P.Validator.Required()]), this.$(".username") && (b.username = [P.Validator.Required()]);
            var c = {};
            this.$(".aboutText").keyup(), this.$form = this.$("form"), this.form = new P.Form(this.$form, b, c), this.listen(this.form, P.CONST.EVENT_SUBMIT_VALIDATED, this.onSubmitValidated)
        }
        var d = P.getQueryStringParams().email;
        d && this.$("#email").val(d)
    },
    onSubmitValidated: function(a) {
        if (P.trackRegisterAction("create_business_submit_clicked"), !a.errors[0]) {
            var b = this.getChildById("submitButton"), c = this.form.getData();
            b.showLoading(), P.UserRegistration.register("partner", c).then(function(a) {
                P.trackRegisterAction("create_business_signup_success"), this.log.debug("Signup success:", a), this.triggerEvent(P.CONST.EVENT_USER_REGISTER, {}, !0) && (window.location = "/")
            }.bind(this)).fin(function() {
                b.hideLoading()
            })
        }
    },
    setupInspiredWall: function() {
        this.story = this.extraData.story, this.setInspiredStory()
    },
    setInspiredStory: function() {
        var a = this.getChildById("bgImage_" + this.story.story_id);
        a.setActive(!0), this.loadedBackgrounds || (this.loadedBackgrounds=!0, a.setNewImage(this.story.bg_color, this.story.bg_image))
    },
    onConfirmClick: function(a) {
        var b = $(a.data), c = "";
        b.hasClass("cancelConvert") ? c = "/" : b.hasClass("continueConvert") && (c = "/logout/?next=/business/create/"), this.navigate(c)
    }
}), P.modules.BusinessAccountCreateFormV2.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.BusinessGetStartedCards"), goog.require("P.Module"), P.modules.BusinessGetStartedCards = P.Module.extend({
    events: {
        "click .dismiss": "onDismissClick"
    },
    onContentReady: function() {
        var a = document.getElementsByTagName("script")[0], b = window._fbq || (window._fbq = []), c = document.createElement("script");
        b.loaded || (c.async=!0, c.src = "//connect.facebook.net/en_US/fbds.js", a.parentNode.insertBefore(c, a), b.loaded=!0), window._fbq = window._fbq || [], window._fbq.push(["track", "6013056087942", {
            value: "0.00",
            currency: "USD"
        }
        ]), window.google_conversion_id = 983308403, window.google_conversion_language = "en", window.google_conversion_format = "3", window.google_conversion_color = "ffffff", window.google_conversion_label = "nI29CKvQyVcQ87Dw1AM", window.google_remarketing_only=!1, c.src = "//www.googleadservices.com/pagead/conversion.js", c.async=!1, a.parentNode.insertBefore(c, a)
    },
    onDismissClick: function(a) {
        var b = $(a.target), c = b.parents(".getStartedCard"), d = c.data("card-name"), e = P.resourceFactory.create("PartnerCardResource", {
            card_name: d
        });
        e.callDelete(), c.remove()
    }
}), P.modules.BusinessGetStartedCards.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.BusinessGetStartedHeader"), goog.require("P.Module"), P.modules.BusinessGetStartedHeader = P.Module.extend({}), P.modules.BusinessGetStartedHeader.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.CanonicalPin"), goog.require("P.Module"), P.modules.CanonicalPin = P.Module.extend({}), P.modules.CanonicalPin.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.CategoriesMenu"), goog.require("P.Module");
var CLASS_SELECTED = "selected";
P.modules.CategoriesMenu = P.Module.extend({
    getItemByCategory: function(a) {
        return this.$("a[data-category=" + a + "]")
    },
    mixins: [P.Mixins.PreventScroll],
    onCategoryUpdated: function(a, b, c) {
        if (this.$("a").removeClass(CLASS_SELECTED), c) {
            var d = this.getItemByCategory(c);
            d.length ? (d.addClass(CLASS_SELECTED), this.waitingMessage = null) : this.waitingMessage = c
        }
    },
    onContentReady: function() {
        var a = {};
        a[P.CONST.PUBSUB_TOPIC_CURRENT_CATEGORY] = this.onCategoryUpdated, this.pubsubSubscribe(P.CONST.PUBSUB_CHANNEL_SITE, a), this.waitingMessage && this.getItemByCategory(this.waitingMessage).addClass(CLASS_SELECTED)
    },
    getHeight: function() {
        var a = this.$(".categoriesWrapper").children(), b = 0;
        _.each(a, function(a) {
            var c = $(a).outerHeight();
            c > b && (b = c)
        });
        var c = this.getChildByModuleName("AboutLinks");
        return c && (b += c.getHeight()), b
    }
}), P.modules.CategoriesMenu.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.CategoriesPage"), goog.require("P.Module"), P.modules.CategoriesPage = P.Module.extend({}), P.modules.CategoriesPage.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.Category"), goog.require("P.Module"), P.modules.Category = P.Module.extend({
    onContentReady: function() {
        this.listen(this, P.CONST.EVENT_NAVIGATE, this.onNavigate)
    },
    onNavigate: function(a) {
        if (a.target === this) {
            var b = this.triggerEvent("showAll", {
                title: this.data.name,
                category: this.data.key,
                resource: P.resourceFactory.create("BoardRecommendationsByCategoryFeedResource", {
                    category: this.data.key
                })
            }, !0);
            b || a.stopPropagation()
        }
    }
}), P.modules.Category.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.CloseupBottom"), goog.require("P.Module");
var MODULE_ID_RELATED_PINS = "relatedPins", MODULE_ID_RELATED_BOARDS = "relatedBoards";
P.modules.CloseupBottom = P.Module.extend({
    onChildRendered: function(a) {
        var b, c, d = a.id === MODULE_ID_RELATED_PINS, e = a.id === MODULE_ID_RELATED_BOARDS;
        if (d && (b = a.getChildByModuleName("Grid"), c = this.$(".relatedPinsWrapper")), e && (b = a.getChildByModuleName("PagedGrid"), c = this.$(".relatedBoardsWrapper")), b && c.length) {
            var f = b.hasItems(), g = f ? "visible": "hidden";
            c.css("visibility", g)
        }
    },
    setMinHeight: function(a) {
        this.$el.css("min-height", null !== a ? a : "")
    }
}), P.modules.CloseupBottom.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.CloseupContent"), goog.require("P.Module");
var TUTORIAL_SCROLL_OFFSET = 200;
P.modules.CloseupContent = P.Module.extend({
    getPin: function() {
        return this.getChildById("pin")
    },
    showEditModal: function() {
        var a = this.getPin();
        return a.showEditModal()
    },
    onContentReady: function() {
        if (this.data.id) {
            var a = {};
            a[P.CONST.PUBSUB_TOPIC_PIN_DELETED] = this.onPinDeleted, this.pubsubSubscribe(this.data.id, a)
        }
    },
    onPinDeleted: function() {
        this.destroy()
    },
    getQuestions: function() {
        return this.getChildById("questions")
    },
    addTutorials: function() {
        if (this.extraData && this.getPin()) {
            var a, b = this.getPin().getFirstVisualObject() && P.Viewport.numColumns > 3, c = this.getQuestions();
            if (this.extraData.showQuestionNotificationTutorial && c)
                c.showNotificationTutorial();
            else if (this.extraData.showQuestionsTutorial && c)
                c.showQATutorial();
            else if (this.extraData.showVisualObjectSearchTutorial && b)
                a = P.ExperienceManager.Tutorials[P.Experiences.Experience.WEB_VISUAL_OBJECT_SEARCH_CLOSEUP_USER_ED], a && this.triggerEvent(P.CONST.EVENT_SCROLL_TO_ELEMENT, {
                    $el: this.getPin().getFirstVisualObject(),
                    callback: function() {
                        P.TutorialManager.instance().startTutorial(a)
                    },
                    scrollOffset: TUTORIAL_SCROLL_OFFSET
                }, !0);
            else {
                var d = P.ExperienceManager.instance(), e = P.Experiences.Placement.WEB_PIN_CLOSEUP;
                d.getPlacedExperienceWithContext(e, {
                    pin_id: this.data.id
                }).then(function(a) {
                    if (a) {
                        var b = P.ExperienceManager.Tutorials[a.experience_id];
                        b && (P.TutorialManager.instance().startTutorial(b, {
                            display_data: a.display_data
                        }), d.viewPlacedExperience(e, a.experience_id))
                    }
                })
            }
        }
    }
}), P.modules.CloseupContent.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.CloseupRelatedBoards"), goog.require("P.Module"), P.modules.CloseupRelatedBoards = P.Module.extend({
    onContentReady: function() {
        this.destroyIfEmpty();
        var a = this.getChildById("relatedBoardsFeed");
        a && (a.resource.options.page_size = 4)
    },
    isEmpty: function() {
        if (!this.contentReady)
            return !1;
        var a = this.getChildById("relatedBoardsFeed");
        return !a ||!a.hasItems()
    }
}), P.modules.CloseupRelatedBoards.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.CloseupRelatedPins"), goog.require("P.Module");
var ANNOTATION_BUTTON_CLASS = "annotationButton";
P.modules.CloseupRelatedPins = P.Module.extend({
    onContentReady: function() {
        this.destroyIfEmpty(), this.childListen(P.CONST.EVENT_BUTTON_CLICK, this.onTypeClick)
    },
    isEmpty: function() {
        if (!this.contentReady)
            return !1;
        var a = this.getChildById("relatedPinsFeed");
        return !a ||!a.hasItems()
    },
    getGrid: function() {
        return this.getChildById("relatedPinsFeed")
    },
    hideGrid: function() {
        this.getGrid().hide()
    },
    showGrid: function() {
        this.getGrid().show()
    },
    onTypeClick: function(a) {
        var b = a.target;
        if (b.options.class_name === ANNOTATION_BUTTON_CLASS&&!b.isActive()) {
            _.each(this.getChildrenByModuleName("Button"), function(a) {
                a.setStyles({
                    active: a === b
                })
            }), b.showLoading();
            var c = b.hideLoading.bind(b);
            b.options.annotation ? this.showAnnotatedPins(b.options.annotation, c) : this.showRelatedPins(c)
        }
    },
    showRelatedPins: function(a) {
        this.updateRelatedPinsGrid(P.resourceFactory.create("RelatedPinFeedResource", {
            pin: this.options.pin_id
        }), a)
    },
    showAnnotatedPins: function(a, b) {
        this.updateRelatedPinsGrid(P.resourceFactory.create("InterestsFeedResource", {
            interest: a
        }), b)
    },
    updateRelatedPinsGrid: function(a, b) {
        var c = this.getGrid();
        this.$el.css("height", this.$el.height()), c.emptyItems(), c.setItemsResource(a);
        var d = function() {
            (b || P.NOOP)(), this.$el.css("height", "auto")
        }.bind(this);
        c.renderItems(d, d)
    }
}), P.modules.CloseupRelatedPins.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.CloseupRichPinContent"), goog.require("P.Module"), goog.require("P.modules.CloseupRichPinContentBase"), P.modules.CloseupRichPinContent = P.modules.CloseupRichPinContentBase.extend({}), P.modules.CloseupRichPinContent.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.Consumer"), goog.require("P.Module"), P.modules.Consumer = P.Module.extend({
    events: {
        "click .consumerSecretText": "consumerSecretTextClicked"
    },
    consumerSecretTextClicked: function() {
        this.showConfirmation(this.extraData["secret-key"])
    },
    showConfirmation: function(a) {
        var b = {
            name: "ConfirmDialog",
            options: {
                template: "api_secret",
                apiSecret: a
            }
        };
        P.loadModule(b).then(function(a) {
            this.showInModal(a)
        }.bind(this))
    }
}), P.modules.Consumer.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ConsumerManagePage"), goog.require("P.Module"), P.modules.ConsumerManagePage = P.Module.extend({
    onContentReady: function() {
        var a = {};
        a[P.CONST.PUBSUB_TOPIC_CONSUMER_LIST_UPDATED] = this.onListUpdated, this.pubsubSubscribe(P.CONST.PUBSUB_CHANNEL_CURRENT_USER, a)
    },
    showNewDialog: function() {
        P.loadModule({
            name: "ConsumerNewDialog"
        }).then(function(a) {
            this.showInModal(a, {})
        }.bind(this))
    },
    onListUpdated: function() {
        this.render()
    }
}), P.modules.ConsumerManagePage.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ConsumerNewDialog"), goog.require("P.Module"), P.modules.ConsumerNewDialog = P.Module.extend({
    onContentReady: function() {
        var a = {
            name: [P.Validator.Required()],
            description: [P.Validator.Required()]
        };
        this.formListener && this.removeListener(this.formListener), this.form = new P.Form(this.$("form"), a), this.formListener = this.listen(this.form, P.CONST.EVENT_SUBMIT_VALIDATED, this.onSubmitValidated)
    },
    onSubmitValidated: function(a) {
        a.errors[0] || this.createConsumer()
    },
    getFormData: function() {
        var a = this.$("form").serializeArray(), b = {};
        return _.each(a, function(a) {
            b[a.name] = a.value
        }), b
    },
    getSaveResource: function(a) {
        return P.resourceFactory.create("ConsumerResource", a)
    },
    createConsumer: function() {
        var a = this.getFormData(), b = this.getChildById("submitButton");
        b.showLoading(), this.getSaveResource(a).callCreate().then(function() {
            P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_CURRENT_USER, P.CONST.PUBSUB_TOPIC_CONSUMER_LIST_UPDATED), this.destroy()
        }.bind(this)).fin(function() {
            b.hideLoading()
        })
    }
}), P.modules.ConsumerNewDialog.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.CookieRecFeedHomePage"), goog.require("P.Module"), P.modules.CookieRecFeedHomePage = P.Module.extend({}), P.modules.CookieRecFeedHomePage.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.CsrfErrorPage"), goog.require("P.Module"), P.modules.CsrfErrorPage = P.Module.extend({}), P.modules.CsrfErrorPage.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.DeactivateAccount"), goog.require("P.Module"), P.modules.DeactivateAccount = P.Module.extend({
    events: {
        "change input": "onChange"
    },
    onContentReady: function() {
        var a = {
            reason: [P.Validator.Required()]
        };
        this.form = new P.Form(this.$("form"), a), this.listen(this.form, P.CONST.EVENT_SUBMIT_VALIDATED, this.onSubmitValidated), this.childListen(P.CONST.EVENT_BUTTON_CLICK, this.onButtonClick), this.submitButton = this.getChildById("submitButton"), this.submitButton.disable()
    },
    onButtonClick: function(a) {
        var b = a.target;
        "deleteButton" === b.id && this.deleteAccountConfirm()
    },
    onSubmitValidated: function(a) {
        a.errors[0] || this.deactivateAccount()
    },
    onChange: function(a) {
        this.submitButton.enable();
        var b = $(a.target);
        this._reason = b.attr("value"), this.hideShowDetails()
    },
    hideAll: function() {
        this.$(".hiddenText").hide(), this.$("#otherText").hide()
    },
    hideShowDetails: function() {
        switch (this.hideAll(), this._reason) {
        case"emails":
            this.$("#emailSettings").show();
            break;
        case"other":
            this.$("#otherText").show();
            break;
        case"hacked":
            this.$("#resetPassword").show();
            break;
        case"pins":
            this.$("#explore").show();
            break;
        case"break":
            this.$("#access").show()
        }
    },
    deactivateAccount: function() {
        this.submitButton.showLoading();
        var a = {
            user_id: P.currentUser.id,
            reason: this.$('input:radio[name="reason"]:checked').val()
        };
        "other" === a.reason && (a.explanation = this.$('textarea[name="otherText"]').val());
        var b = P.currentUser.get("email"), c = {
            name: "ConfirmDialog",
            options: {
                template: "deactivate_account_success",
                view_type: "mediumWide",
                email: b
            }
        }, d = P.resourceFactory.create("DeactivateAccountResource", a);
        d.callCreate().fin(function() {
            P.loadModule(c).then(function(a) {
                this.showInModal(a), this.listen(a, P.CONST.EVENT_CONFIRM, this.destroy), this.listen(a, P.CONST.EVENT_DESTROYED, this.successCancel)
            }.bind(this))
        }.bind(this)).fail(function(a) {
            P.showError(a.message)
        }).always(function() {
            this.submitButton.hideLoading()
        }.bind(this))
    },
    successCancel: function() {
        this.navigate("/"), this.destroy()
    },
    deleteAccountConfirm: function() {
        var a = {
            name: "ConfirmDialog",
            options: {
                email: P.currentUser.get("email"),
                is_partner: P.currentUser.get("is_partner"),
                template: "delete_account_confirm",
                view_type: "mediumWide"
            }
        };
        P.loadModule(a).then(function(a) {
            this.showInModal(a), this.listen(a, P.CONST.EVENT_CONFIRM, this.destroy), this.listen(a, P.CONST.EVENT_CONFIRM, this.deleteAccount)
        }.bind(this))
    },
    deleteAccount: function() {
        var a = {
            name: "ConfirmDialog",
            options: {
                template: "delete_account_success",
                view_type: "mediumWide"
            }
        }, b = {
            user_id: P.currentUser.id
        }, c = P.resourceFactory.create("DeleteAccountResource", b);
        c.callUpdate().fin(function() {
            P.loadModule(a).then(function(a) {
                this.showInModal(a), this.listen(a, P.CONST.EVENT_CONFIRM, this.destroy), this.listen(a, P.CONST.EVENT_DESTROYED, this.successCancel)
            }.bind(this))
        }.bind(this)).fail(function(a) {
            P.showError(a.message)
        })
    }
}), P.modules.DeactivateAccount.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.Developer"), goog.require("P.Module"), P.modules.Developer = P.Module.extend({}), P.modules.Developer.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.Domain"), goog.require("P.Module"), P.modules.Domain = P.Module.extend({
    getLoggingObjectIdStr: function() {
        return this.data.id
    }
}), P.modules.Domain.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.DomainBoardRecommendationsPage"), goog.require("P.Module"), P.modules.DomainBoardRecommendationsPage = P.Module.extend({}), P.modules.DomainBoardRecommendationsPage.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.DomainFeedPage"), goog.require("P.Module"), P.modules.DomainFeedPage = P.Module.extend({
    onContentReady: function() {
        this.checkGridContent()
    },
    checkGridContent: function() {
        var a = this.getChildById("feedGrid");
        a.hasItems() || this.$(".noData").show()
    }
}), P.modules.DomainFeedPage.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.DomainInfoBar"), goog.require("P.Module"), P.modules.DomainInfoBar = P.Module.extend({}), P.modules.DomainInfoBar.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.DomainOwnerInfoBar"), goog.require("P.Module"), P.modules.DomainOwnerInfoBar = P.Module.extend({}), P.modules.DomainOwnerInfoBar.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.DomainOwnerInfoTabsContainer"), goog.require("P.Module"), P.modules.DomainOwnerInfoTabsContainer = P.Module.extend({}), P.modules.DomainOwnerInfoTabsContainer.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.DomainQuestionsPage"), goog.require("P.Module"), P.modules.DomainQuestionsPage = P.Module.extend({}), P.modules.DomainQuestionsPage.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.DomainVerify"), goog.require("P.Module"), P.modules.DomainVerify = P.Module.extend({
    events: {
        "click .helpText a": "onClickType"
    },
    onCreated: function() {
        this.METATAG = "metatag", this.FILENAME = "filename", this.verificationType = this.METATAG
    },
    onContentReady: function() {
        this.formListener && this.removeListener(this.formListener), this.form = new P.Form(this.$("form"), []), this.formListener = this.listen(this.form, P.CONST.EVENT_SUBMIT_VALIDATED, this.onSubmitValidated), this.downloadButton = this.getChildById("downloadButton"), this.downloadButton && this.listen(this.downloadButton, P.CONST.EVENT_BUTTON_CLICK, this.onClickDownload)
    },
    onClickType: function() {
        this.swapVerificationType()
    },
    onClickDownload: function() {
        P.downloadFile("/website/verify/download/")
    },
    onSubmitValidated: function(a) {
        a.errors[0] || this.verifyDomain()
    },
    swapVerificationType: function() {
        this.$(".filename, .metaTag").toggle(), this.verificationType = this.verificationType === this.METATAG ? this.FILENAME : this.METATAG
    },
    showError: function(a) {
        this.$(".errorReason").text(a), this.$(".errorSection").show()
    },
    hideError: function() {
        this.$(".errorSection").hide()
    },
    waitForVerification: function(a) {
        return new Promise(function(b, c) {
            var d = P._("Trouble verifying your domain. Please try again later."), e = P.currentUser.attributes.domain_url, f = P.resourceFactory.create("DomainResource", {
                field_set_key: "owner",
                domain: e
            });
            a = a || 3;
            var g = 0, h = function() {
                return g >= a ? (P.showError(d), void c(void 0)) : (g += 1, void f.callGet().then(function(a) {
                    var e = a.resource_response;
                    if (!e.error)
                        if (e.data.official_user) {
                            if (e.data.official_user.id !== P.currentUser.attributes.id)
                                return P.showError(d), void c(void 0);
                                this.isInModal() ? (P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_CURRENT_USER, P.CONST.PUBSUB_TOPIC_USER_UPDATED), P.pubsub.publish(P.currentUser.attributes.id, P.CONST.PUBSUB_TOPIC_USER_UPDATED), this.destroy()) : this.navigate("/"), b(void 0)
                        } else 
                            P.setTimeout(h, 200)
                }.bind(this), function() {
                    c(void 0)
                }))
            }.bind(this);
            P.setTimeout(h, 200)
        }.bind(this))
    },
    verifyDomain: function() {
        var a = this.getChildById("submitButton");
        a.showLoading(), this.hideError();
        var b = {
            type: this.verificationType
        }, c = P.resourceFactory.create("DomainVerifyResource", b);
        c.callUpdate().then(function() {
            return this.waitForVerification()
        }.bind(this)).fin(function() {
            a.hideLoading()
        })
    }
}), P.modules.DomainVerify.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.DomainVerifyByLink"), goog.require("P.Module"), P.modules.DomainVerifyByLink = P.Module.extend({
    onContentReady: function() {
        var a, b = "", c = "", d = "";
        null !== this.options.domain ? (b = P.string.format(P._("Congratulations! Check out your analytics page to see how  popular your Pins are on Pinterest.")), c = P._("Go To Analytics"), d = P._("Website verified")) : (b = P.string.format(P._("Oops! We weren't able to verify your website. Write to us at the help center for more information.")), c = P._("Go to the help center"), d = P._("Trouble verifying your website")), a = {
            name: "ConfirmDialog",
            options: {
                body_message: b,
                button_text: c,
                template: "generic",
                title: d
            }
        }, P.loadModule(a).then(function(a) {
            this.showInModal(a), this.listen(a, P.CONST.EVENT_CONFIRM, this.onConfirmClick)
        }.bind(this))
    },
    onConfirmClick: function() {
        var a = "";
        a = null === this.options.domain ? "/_/_/help/" : "/source/" + this.options.domain + "/analytics/", this.navigate(a)
    }
}), P.modules.DomainVerifyByLink.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.EmailContact"), goog.require("P.Module"), P.modules.EmailContact = P.Module.extend({
    events: {
        "click .check": "_onClickCheck",
        click: "_onClick"
    },
    _onClickCheck: function(a) {
        a.stopPropagation()
    },
    _onClick: function() {
        this.getChildById("check").setChecked(!this.isChecked(), !0)
    },
    setChecked: function(a) {
        this.getChildById("check").setChecked(a, !1)
    },
    isChecked: function() {
        return this.getChildById("check").isChecked()
    },
    getEmail: function() {
        return this.options.email_contact.id
    }
}), P.modules.EmailContact.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.Embed"), goog.require("P.Module"), P.modules.Embed = P.Module.extend({
    onContentReady: function() {
        $("head").append($("<script></script>").attr({
            async: !0,
            src: "//assets.pinterest.com/js/pinit.js"
        }));
        var a = this.$(".sampleCode textarea");
        a.focus(), a.select()
    }
}), P.modules.Embed.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.EmbedBoard"), goog.require("P.modules.Embed"), P.modules.EmbedBoard = P.modules.Embed.extend({}), P.modules.EmbedBoard.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.EmbedPinner"), goog.require("P.modules.Embed"), P.modules.EmbedPinner = P.modules.Embed.extend({}), P.modules.EmbedPinner.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.EmptyConversations"), goog.require("P.Module"), P.modules.EmptyConversations = P.Module.extend({
    onContentReady: function() {
        var a = this.getChildrenByModuleName("ConversationHead");
        _.each(a, function(a) {
            this.listen(a, P.CONST.EVENT_CONVERSATION_HEAD_CLICKED, this.onConversationHeadClick)
        }.bind(this)), (!this.data || this.data.length < 3) && this.triggerEvent(P.CONST.EVENT_CONVERSATIONS_IS_EMPTY_WITHOUT_FRIENDS, null, !0)
    },
    onConversationHeadClick: function(a) {
        var b = a.target;
        b.showLoading();
        var c = b.getUserIds(), d = P.resourceFactory.create("ConversationsResource", {
            user_ids: c
        });
        d.callCreate().then(function(a) {
            var c = a.resource_response.data;
            P.getConversationsManager().addConversation(c), b.hideLoading(), this.triggerEvent(P.CONST.EVENT_DISMISS, null, !0), this.render()
        }.bind(this))
    }
}), P.modules.EmptyConversations.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/EmptyConversations/EmptyConversations.nunjucks"), goog.provide("P.modules.EntityEdit"), goog.require("P.Module"), P.modules.EntityEdit = P.Module.extend({
    onContentReady: function() {
        this.$form = this.$("form");
        var a = this.getFormValidationRules(), b = this.getFormValidationOptions();
        this.form = new P.Form(this.$form, a, b), this.listen(this.form, P.CONST.EVENT_SUBMIT_VALIDATED, this._onSubmitValidated), this.childListen(P.CONST.EVENT_BUTTON_CLICK, this._onButtonClick)
    },
    getFormValidationRules: function() {
        return {}
    },
    getFormValidationOptions: function() {
        return {}
    },
    getEditResource: function() {
        throw new Error("not implemented")
    },
    onEditSuccess: P.NOOP,
    getDeleteConfirmTemplate: function() {
        return ""
    },
    getDeleteResource: function() {
        throw new Error("not implemented")
    },
    onDeleteSuccess: P.NOOP,
    _onButtonClick: function(a) {
        var b = a.target;
        "deleteButton" === b.id && this._showDeleteConfirmDialog()
    },
    _onSubmitValidated: function(a) {
        a.errors[0] || this._saveEntity()
    },
    _saveEntity: function() {
        var a = this.getEditResource(), b = this.getChildById("submitButton");
        b.showLoading(), a.callUpdate({
            success: function() {
                this.onEditSuccess(), this.destroy()
            }.bind(this),
            complete: function() {
                b.hideLoading()
            }
        })
    },
    _showDeleteConfirmDialog: function() {
        var a = this.getDeleteConfirmTemplate();
        if (!a)
            return void this._deleteEntity();
        var b = {
            name: "ConfirmDialog",
            options: {
                template: a
            }
        };
        P.loadModule(b).then(function(a) {
            this.showInModal(a), this.listen(a, P.CONST.EVENT_CONFIRM, this._onDeleteConfirm)
        }.bind(this))
    },
    _onDeleteConfirm: function() {
        this._deleteEntity()
    },
    _deleteEntity: function() {
        var a = this.getDeleteResource();
        this.showLoading(!0), a.callDelete().then(function() {
            this.onDeleteSuccess(), this.destroy()
        }.bind(this)).fin(function() {
            this.hideLoading()
        }.bind(this))
    }
}), P.modules.EntityEdit.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.EntityReport"), goog.require("P.Module"), P.modules.EntityReport = P.Module.extend({
    onContentReady: function() {
        var a = this.$("form"), b = {
            reason: [P.Validator.Required()]
        }, c = {
            prevalidate: !0
        };
        this.form = new P.Form(a, b, c), this.listen(this.form, P.CONST.EVENT_SUBMIT_VALIDATED, this._onSubmitValidated), this.childListen(P.CONST.EVENT_REPORT_REASON_SELECTED, this._onReportReasonSelected);
        var d = this.getChildById("submitButton");
        d.disable()
    },
    _onSubmitValidated: function(a) {
        a.errors[0] || this._reportEntity()
    },
    _onReportReasonSelected: function(a) {
        var b = this.getChildById("submitButton");
        "harasses-category" === a.currentTarget._reason ? b.disable() : b.enable()
    },
    getReportResourceName: function() {
        throw new Error("not implemented")
    },
    getCustomReportResourceOptions: function() {
        return {}
    },
    onReportSuccess: P.NOOP,
    _reportEntity: function() {
        var a = this.getReportResourceName();
        if (a) {
            var b = this.$("form :checked").attr("value");
            if (b && "harasses-category" !== b) {
                var c = {
                    reason: b
                };
                "other" === c.reason && (c.explanation = this.$("textarea").val()), _.extend(c, this.getCustomReportResourceOptions());
                var d = this.getChildById("submitButton");
                d.showLoading();
                var e = P.resourceFactory.create(a, c);
                e.callCreate().then(function() {
                    this.onReportSuccess(), this.destroy()
                }.bind(this)).fin(function() {
                    d.hideLoading()
                })
            }
        }
    }
}), P.modules.EntityReport.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ExperienceNag"), goog.require("P.Module"), goog.require("P.modules.HeroHelperBase"), P.modules.ExperienceNag = P.modules.HeroHelperBase.extend({
    events: {
        "click .nagClose": "onCloseButtonClick"
    },
    onCloseButtonClick: function() {
        this.destroy(), P.trackGAEvent("nag", P.CONST.GA_ACTION_CLICK_CLOSE, "type", this.extraData.type)
    },
    onContentReady: function() {
        this.placementId = Number(this.extraData && this.extraData.placement_id), this.experienceId = Number(this.extraData && this.extraData.experience_id), this.placedExperienceId = this.extraData && this.extraData.placed_experience_id, this.options.type = P.Experiences.ExperienceReverse[String(this.experienceId)], this.setExperienceViewed()
    }
}), P.modules.ExperienceNag.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.Explore"), goog.require("P.Module");
var GRID_GUTTER = P.CONST.PIN_MARGIN, GRID_SIZE = 136, MINIMUM_NUM_COLUMNS = 2 * P.CONST.MIN_COLUMNS;
P.modules.Explore = P.Module.extend({
    onAddedToDom: function() {
        this._setContentWidth(), this.resizeListener = this.listen(P.Viewport, P.CONST.EVENT_RESIZE, this.onResize)
    },
    onContentReady: function() {
        this.sections = [];
        var a = this.getChildById("exploreInterests");
        a && this.sections.push(a);
        var b = this.getChildById("exploreRelatedInterests");
        b && this.sections.push(b);
        var c = this.getChildById("exploreCategories");
        c && this.sections.push(c), this._setContentWidth()
    },
    onResize: function() {
        this._setContentWidth()
    },
    _calculateNumColumns: function() {
        var a = this.getWidth(!1), b = GRID_SIZE + GRID_GUTTER, c = Math.floor(a / b);
        return c = Math.max(MINIMUM_NUM_COLUMNS, c), c%2 !== 0 && c--, c
    },
    _setContentWidth: function() {
        var a = this._calculateNumColumns(), b = a * (GRID_SIZE + GRID_GUTTER);
        _.each(this.sections, function(a) {
            a.setContentWidth(b)
        })
    }
}), P.modules.Explore.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ExploreCategories"), goog.require("P.Module"), P.modules.ExploreCategories = P.Module.extend({
    setContentWidth: function(a) {
        this.$(".content").css("width", a);
        var b = this.getChildById("categoriesGrid");
        b.onResize()
    }
}), P.modules.ExploreCategories.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ExploreInterests"), goog.require("P.Module"), P.modules.ExploreInterests = P.Module.extend({
    setContentWidth: function(a) {
        this.$(".content").css("width", a);
        var b = this.getChildById("interestsGrid");
        b.onResize()
    }
}), P.modules.ExploreInterests.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ExploreRelatedInterest"), goog.require("P.Module"), P.modules.ExploreRelatedInterest = P.Module.extend({
    setContentWidth: function(a) {
        this.$(".content").css("width", a);
        var b = this.getChildById("relatedInterestsGrid");
        b.onResize()
    }
}), P.modules.ExploreRelatedInterest.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ExploreRelatedInterests"), goog.require("P.Module"), P.modules.ExploreRelatedInterests = P.Module.extend({
    setContentWidth: function(a) {
        this.$(".content").css("width", a), _.each(this.getChildrenByModuleName("ExploreRelatedInterest"), function(b) {
            b.setContentWidth(a / 2)
        })
    }
}), P.modules.ExploreRelatedInterests.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.FacebookConnectButton"), goog.require("P.modules.Button"), P.modules.FacebookConnectButton = P.modules.Button.extend({
    onContentReady: function() {
        this.listen(this, P.CONST.EVENT_BUTTON_CLICK, this.onButtonClick)
    },
    onButtonClick: function(a) {
        a.stopPropagation();
        var b = P.SocialConnect.instance();
        P.trackRegisterAction("register_facebook_attempt"), this.showLoading(), b.connect("facebook", {
            success: function(a) {
                this.hideLoading(), this.login({
                    facebook_id: a.id,
                    facebook_token: a.access_token
                })
            }.bind(this),
            error: function() {
                this.hideLoading()
            }.bind(this)
        })
    },
    login: function(a) {
        P.currentUser.login(a).then(function() {
            this.onLoginSuccess(a)
        }.bind(this), function() {
            this.onLoginError(a)
        }.bind(this))
    },
    onLoginSuccess: function(a) {
        this.triggerEvent(P.CONST.FACEBOOK_LOGIN_SUCCESS, a, !0) && window.location.reload()
    },
    onLoginError: function(a) {
        this.triggerEvent(P.CONST.FACEBOOK_LOGIN_FAILURE, a, !0)
    }
}), P.modules.FacebookConnectButton.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.FacebookContact"), goog.require("P.Module"), P.modules.FacebookContact = P.Module.extend({
    events: {
        click: "_onClick"
    },
    _onClick: function() {
        this.getChildById("invite").showLoading(), P.Invite.userInviteFacebook(this.options.facebook_contact.id, this._onInvite.bind(this))
    },
    _onInvite: function(a) {
        this.getChildById("invite").hideLoading(), a && this.triggerEvent(P.CONST.EVENT_INVITE_USER, null, !0)
    }
}), P.modules.FacebookContact.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.FacebookShareButton"), goog.require("P.Module"), goog.require("P.modules.Button"), P.modules.FacebookShareButton = P.modules.Button.extend({
    onClick: function() {
        if (P.currentUser.isWriteBanned())
            P.writeban.showWriteBanned(this);
        else {
            var a = this.options.ga_category || "share_facebook";
            P.trackGAEvent(a, P.CONST.GA_ACTION_CLICK);
            var b = this.options.dialog_options || {};
            b.callback = function() {
                var a = P.ContextEvent.fromEventType(P.ContextLogging.EventType.PIN_SHARE_FACEBOOK);
                this.options && this.options.object_id && a.setObjectIdStr(this.options.object_id), P.ContextLogger.getInstance().addEvent(a)
            }.bind(this), "sharer_php" === this.options.fb_sharer && (b.type = "sharer_php"), P.FacebookDialog.open(b), this.triggerEvent(P.CONST.EVENT_BUTTON_CLICK, null, !0)
        }
        return !1
    }
}), P.modules.FacebookShareButton.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/FacebookShareButton/FacebookShareButton.nunjucks"), goog.provide("P.modules.FastFollowHeader"), goog.require("P.Module");
var FAST_FOLLOW_PROGRESS_ID = "followPageProgress";
P.modules.FastFollowHeader = P.Module.extend({
    stepProgress: function(a) {
        var b = this.getChildById(FAST_FOLLOW_PROGRESS_ID);
        b && b.moveStep(a)
    }
}), P.modules.FastFollowHeader.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.FastFollowPinfluencersHeader"), goog.require("P.Module"), P.modules.FastFollowPinfluencersHeader = P.Module.extend({}), P.modules.FastFollowPinfluencersHeader.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/FastFollowPinfluencersHeader/FastFollowPinfluencersHeader.nunjucks"), goog.provide("P.modules.FastFollowPinfluencersSidebar"), goog.require("P.Module");
var FAST_FOLLOW_PINFLUENCER_SELECTED_CLASS = "selected";
P.modules.FastFollowPinfluencersSidebar = P.Module.extend({
    events: {
        "click .followPinfluencersSidebarCategory": "onCategoryClick"
    },
    onCategoryClick: function(a) {
        var b = $(a.currentTarget);
        if (b.length) {
            var c = b.attr("data-category");
            c.length && (this.highlightCategory(c), this.triggerEvent(P.CONST.EVENT_FAST_FOLLOW_PINFLUENCER_CATEGORY_SELECTED, c, !0))
        }
    },
    unhighlightCategory: function() {
        this.$("." + FAST_FOLLOW_PINFLUENCER_SELECTED_CLASS).removeClass(FAST_FOLLOW_PINFLUENCER_SELECTED_CLASS)
    },
    highlightCategory: function(a) {
        this.unhighlightCategory(), this.$("[data-category=" + a + "]").addClass(FAST_FOLLOW_PINFLUENCER_SELECTED_CLASS)
    }
}), P.modules.FastFollowPinfluencersSidebar.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.FastFollowSidebar"), goog.require("P.Module");
var FAST_FOLLOW_SIDEBAR_SELECTED_CLASS = "selected";
P.modules.FastFollowSidebar = P.Module.extend({
    events: {
        "click .followPageSidebarCategory": "onCategoryClick"
    },
    onCreated: function() {
        var a = {};
        a[P.CONST.PUBSUB_TOPIC_SEARCH_QUERY_UPDATED] = this.onSearchQueryUpdated, this.pubsubSubscribe(P.CONST.PUBSUB_CHANNEL_SITE, a), this.childListen(P.CONST.EVENT_BUTTON_CLICK, this.toggleShowMoreCategories)
    },
    onCategoryClick: function(a) {
        var b = $(a.currentTarget);
        if (b.length) {
            var c = b.attr("data-category");
            c.length && (this.highlightCategory(c), this.triggerEvent(P.CONST.EVENT_FAST_FOLLOW_CATEGORY_SELECTED, c, !0))
        }
    },
    onSearchQueryUpdated: function(a, b, c) {
        var d = c || "";
        this.unhighlightCategory(), this.triggerEvent(P.CONST.EVENT_FAST_FOLLOW_SEARCH_QUERY_UPDATED, d, !0)
    },
    unhighlightCategory: function() {
        this.$("." + FAST_FOLLOW_SIDEBAR_SELECTED_CLASS).removeClass(FAST_FOLLOW_SIDEBAR_SELECTED_CLASS)
    },
    highlightCategory: function(a) {
        this.unhighlightCategory(), this.$("[data-category=" + a + "]").addClass(FAST_FOLLOW_SIDEBAR_SELECTED_CLASS)
    },
    toggleShowMoreCategories: function() {
        return this.$el.toggleClass("expand"), !1
    }
}), P.modules.FastFollowSidebar.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.FeedPage"), goog.require("P.Module"), P.modules.FeedPage = P.Module.extend({
    onAddedToDom: function() {
        P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_SITE, P.CONST.PUBSUB_TOPIC_CURRENT_CATEGORY, this.options.feed)
    },
    _resetCategory: function() {
        P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_SITE, P.CONST.PUBSUB_TOPIC_CURRENT_CATEGORY, null)
    },
    onRemoved: function() {
        this._resetCategory()
    },
    onEmpty: function() {
        this._resetCategory()
    }
}), P.modules.FeedPage.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.FeedUsers"), goog.require("P.Module"), P.modules.FeedUsers = P.Module.extend({
    unusedPinfluencers: [],
    onContentReady: function() {
        var a = this.data ? _.pluck(this.data, "id"): [], b = this.resource.options.num_featured_users;
        this.unusedPinfluencers = a.length > b ? a.slice(b) : [], this.destroyIfEmpty() || this.childListen(P.CONST.EVENT_USER_FOLLOW, this.onChildActionTaken)
    },
    onChildActionTaken: function(a) {
        var b = a.target;
        this.dismissUser(b)
    },
    dismissUser: function(a) {
        a && a.fadeOut(function() {
            this.unusedPinfluencers.length ? this.replaceUser(a) : this.removeUser(a)
        }.bind(this))
    },
    replaceUser: function(a) {
        var b = this.unusedPinfluencers.pop();
        if (b) {
            var c = new P.modules.User({
                resource: {
                    name: "UserResource",
                    options: {
                        field_set_key: "grid_item",
                        user_id: b
                    }
                }
            });
            c.render().then(function() {
                c.show(), this.removeChild(a), this.appendChild(c), c.fadeIn()
            }.bind(this))
        }
    },
    removeUser: function(a) {
        this.removeChild(a);
        var b = this.getChildByModuleName("User");
        b || this.remove(), this.triggerEvent(P.CONST.EVENT_CONTENT_CHANGED, null, !0)
    }
}), P.modules.FeedUsers.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.FillHomeFeed"), goog.require("P.Module"), P.modules.FillHomeFeed = P.Module.extend({}), P.modules.FillHomeFeed.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.FindFriends"), goog.require("P.Module"), P.modules.FindFriends = P.Module.extend({}), P.modules.FindFriends.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.FindFriendsContent"), goog.require("P.Module"), P.modules.FindFriendsContent = P.Module.extend({
    onCreated: function() {
        this.childListen(P.CONST.EVENT_BUTTON_CLICK, this.onButtonClick), P.ExperienceManager.instance().refreshPlacedExperiences()
    },
    onButtonClick: function(a) {
        var b = a.target, c = null;
        switch (b.id) {
        case"facebookConnectButton":
            c = P.SocialConnect.FACEBOOK;
            break;
        case"twitterConnectButton":
            c = P.SocialConnect.TWITTER;
            break;
        default:
            return 
        }
        this.startNetworkConnect(c)
    },
    startNetworkConnect: function(a) {
        var b;
        switch (a) {
        case P.SocialConnect.FACEBOOK:
            b = this.getChildById("facebookConnectButton");
            break;
        case P.SocialConnect.TWITTER:
            b = this.getChildById("twitterConnectButton");
            break;
        default:
            return 
        }
        b.showLoading();
        var c = P.SocialNetworkSettingsManager.instance(), d = {
            success: function() {
                var d = {
                    username: this.options.username
                }, e = {
                    success: function(c) {
                        b.hideLoading(), this.resource = c, this.render(), this.triggerEvent(P.CONST.EVENT_SOCIAL_NETWORK_CONNECTION, {
                            network: a
                        }, !0)
                    }.bind(this),
                    error: function() {
                        b.hideLoading(), this.hideLoading(), this.render()
                    }.bind(this),
                    resourceOptions: d
                };
                c.pollForFriends(a, e)
            }.bind(this),
            error: function() {
                b.hideLoading(), this.hideLoading()
            }.bind(this)
        };
        c.handleConnect(a, !0, d)
    }
}), P.modules.FindFriendsContent.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.FindFriendsInfoBar"), goog.require("P.Module"), P.modules.FindFriendsInfoBar = P.Module.extend({
    onContentReady: function() {
        "invite" === this.options.focus && this.getChildById("inviteFriends").getDropdown().show()
    }
}), P.modules.FindFriendsInfoBar.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.FindFriendsNotConnected"), goog.require("P.Module"), P.modules.FindFriendsNotConnected = P.Module.extend({}), P.modules.FindFriendsNotConnected.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.FindFriendsPage"), goog.require("P.Module"), P.modules.FindFriendsPage = P.Module.extend({}), P.modules.FindFriendsPage.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.FindFriendsRep"), goog.require("P.Module"), P.modules.FindFriendsRep = P.Module.extend({
    events: {
        click: "onClick"
    },
    onClick: function(a) {
        a.stopPropagation(), a.preventDefault(), P.currentUser.isLimitedLogin() && P.limitedLogin.showLogin(this)
    }
}), P.modules.FindFriendsRep.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.FindFriendsWhosHere"), goog.require("P.Module"), P.modules.FindFriendsWhosHere = P.Module.extend({}), P.modules.FindFriendsWhosHere.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.FlagComment"), goog.require("P.Module"), P.modules.FlagComment = P.Module.extend({
    onContentReady: function() {
        var a = this.$("form"), b = {
            reason: [P.Validator.Required()]
        }, c = {
            prevalidate: !0
        };
        this.form = new P.Form(a, b, c), this.listen(this.form, P.CONST.EVENT_SUBMIT_VALIDATED, this.onSubmitValidated), this.childListen(P.CONST.EVENT_REPORT_REASON_SELECTED, this._onReportReasonSelected);
        var d = this.getChildById("submitButton");
        d.disable()
    },
    onSubmitValidated: function(a) {
        a.errors[0] || this.flagComment()
    },
    _onReportReasonSelected: function() {
        var a = this.getChildById("submitButton");
        a.enable()
    },
    flagComment: function() {
        var a = this.getChildById("submitButton");
        a.showLoading();
        var b = {
            pin_id: this.options.pin_id,
            comment_id: this.options.comment_id,
            reason: this.$("form :checked").attr("value")
        };
        "other" === b.reason && (b.explanation = this.$("textarea").val()), P.trackGAEvent("comment_flag", P.CONST.GA_ACTION_CLICK_SUBMIT, "reason", b.reason);
        var c = P.resourceFactory.create("CommentFlagResource", b);
        c.callCreate().then(function() {
            P.trackGAEvent("comment_flag", P.CONST.GA_ACTION_SUCCESS), this.destroy()
        }.bind(this), function() {
            P.trackGAEvent("comment_flag", P.CONST.GA_ACTION_ERROR)
        }).fin(function() {
            a.hideLoading()
        })
    }
}), P.modules.FlagComment.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.FlagContent"), goog.require("P.Module");
var FLAG_CONTENT_ACTIVE_CLASS = "active";
P.modules.FlagContent = P.Module.extend({
    events: {
        "change input": "onChange"
    },
    onCreated: function() {
        this.listen(this, "change", this.checkIfOtherIsSelected)
    },
    onChange: function(a) {
        var b = this.options, c = $(a.target), d = c.siblings("label");
        if (this._reason = c.attr("id"), this._reasonNoun = d.text(), this.checkIfOtherIsSelected(), this.triggerEvent("change", this, !0), "blockInput" === b.class_name && this.updateLabel(c), b.reason = this._reason, b.reason_noun = this._reasonNoun, this.options.show_confirmation_on_change) {
            var e = {
                name: "FlagContentConfirm",
                options: b
            };
            P.loadModule(e).then(function(a) {
                var c;
                "user" === b.object_flagged ? c = "user_flag" : "pin" === b.object_flagged ? c = "pin_flag" : "comment" === b.object_flagged && (c = "comment_flag"), c && P.trackGAEvent(c, P.CONST.GA_ACTION_OPEN_MODAL, "reason", this._reason), this.hideLoading(), this.showInModal(a)
            }.bind(this))
        }
    },
    updateLabel: function(a) {
        var b = $(a), c = b.siblings("label");
        this.$("." + FLAG_CONTENT_ACTIVE_CLASS).removeClass(FLAG_CONTENT_ACTIVE_CLASS), c.addClass(FLAG_CONTENT_ACTIVE_CLASS)
    },
    checkIfOtherIsSelected: function() {
        "harasses-category" === this._reason && this.$(".reportCategoryItems").show(), "harasses-category" !== this._reason && "harasses-mechildren" !== this._reason && "harasses-someoneelse" !== this._reason && "hateful-togroup" !== this._reason && this.$(".reportCategoryItems").hide(), this.triggerEvent(P.CONST.EVENT_REPORT_REASON_SELECTED, this.$el, this._reason)
    }
}), P.modules.FlagContent.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.FlagContentConfirm"), goog.require("P.Module");
var GA_CATEGORY = "user_flag";
P.modules.FlagContentConfirm = P.Module.extend({
    onContentReady: function() {
        var a = this.$("form"), b = {};
        this.options.show_explanation && (b = {
            explanation: [P.Validator.Required(), P.Validator.Length({
                max: P.CONST.MAX_CHARS_FOR_BOARD_TITLE
            })]
        });
        var c = {
            prevalidate: !0
        };
        this.form = new P.Form(a, b, c), this.listen(this.form, P.CONST.EVENT_SUBMIT_VALIDATED, this.onSubmitValidated), this.childListen(P.CONST.EVENT_BUTTON_CLICK, this.onButtonClick)
    },
    onButtonClick: function(a) {
        var b = a.target;
        b && ("cancelButton" === b.id ? P.trackGAEvent(GA_CATEGORY, P.CONST.GA_ACTION_CLICK_CANCEL) : "reportButton" === b.id && P.trackGAEvent(GA_CATEGORY, P.CONST.GA_ACTION_CLICK_SUBMIT))
    },
    onSubmitValidated: function(a) {
        if (!a.errors[0]) {
            var b = this.options.object_flagged;
            "user" === b ? this.reportUser() : "conversation" === b && this.reportConversation()
        }
    },
    onReportUserSuccess: function() {
        var a = {
            name: "ConfirmDialog",
            options: {
                template: "flag_user_success"
            }
        };
        P.loadModule(a).then(function(a) {
            this.showInModal(a), this.listen(a, P.CONST.EVENT_CONFIRM, this.onFlagConfirm)
        }.bind(this))
    },
    onFlagConfirm: function() {
        this.destroy()
    },
    removeConversation: function(a) {
        var b = {
            conversation_id: a
        }, c = P.resourceFactory.create("ConversationResource", b);
        c.callDelete().then(function() {
            P.getConversationsManager().scaleConversationDownAndRemove(a)
        })
    },
    reportConversation: function() {
        var a = this.options;
        a.conversation_id = a.conversation.id;
        var b = P.resourceFactory.create("ConversationReportResource", a);
        b.callCreate().then(function() {
            this.onReportUserSuccess(), this.removeConversation(a.conversation_id), P.getModalManager().removeAllModals(), this.destroy()
        }.bind(this), function() {
            P.getModalManager().removeAllModals(), this.destroy()
        }.bind(this))
    },
    reportUser: function() {
        var a = this.options.user_id, b = {
            reported_user: a,
            reason: this.options.reason
        };
        this.options.show_explanation && (b.explanation = this.$("textarea").val());
        var c = P.resourceFactory.create("UserReportResource", b);
        c.callCreate().then(function() {
            P.trackGAEvent(GA_CATEGORY, P.CONST.GA_ACTION_SUCCESS), this.onReportUserSuccess()
        }.bind(this), function() {
            P.trackGAEvent(GA_CATEGORY, P.CONST.GA_ACTION_ERROR)
        }).fin(function() {
            P.getModalManager().removeAllModals(), this.destroy()
        }.bind(this))
    }
}), P.modules.FlagContentConfirm.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.FlagConversation"), goog.require("P.Module"), P.modules.FlagConversation = P.Module.extend({}), P.modules.FlagConversation.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.FlagPin"), goog.require("P.Module");
var FLAG_PIN_GA_CATEGORY = "pin_flag";
P.modules.FlagPin = P.Module.extend({
    onContentReady: function() {
        var a = this.$("form"), b = {
            reason: [P.Validator.Required()]
        }, c = {
            prevalidate: !0
        };
        this.form = new P.Form(a, b, c), this.listen(this.form, P.CONST.EVENT_SUBMIT_VALIDATED, this.onSubmitValidated), this.childListen(P.CONST.EVENT_REPORT_REASON_SELECTED, this._onReportReasonSelected);
        var d = this.getChildById("submitButton");
        d.disable()
    },
    onSubmitValidated: function(a) {
        a.errors[0] || this.flagPin()
    },
    _onReportReasonSelected: function() {
        var a = this.getChildById("submitButton");
        a.enable()
    },
    flagPin: function() {
        var a = this.getChildById("submitButton");
        a.showLoading();
        var b = "Unlabeled", c = null, d = null, e = P.app.backgroundModule, f = 0, g = "BoardPage";
        e && (b = e.className, "SearchPage" === b ? (c = e.options.scope, d = e.options.query) : b === g ? (c = e.options.tab, f = e.getNumPinsFlagged()) : "FeedPage" === b ? c = e.options.feed : "DomainFeedPage" === b && (c = e.options.feed_item_type, d = e.options.domain));
        var h = {
            pin_id: this.options.pin_id,
            reason: this.$("form :checked").attr("value"),
            source: b,
            sourceDetail1: c,
            sourceDetail2: d
        };
        "other" === h.reason && (h.explanation = this.$("textarea").val());
        var i = 3, j = "flag_pin";
        f >= i && (j = "power_reporter_thanks");
        var k = {
            name: "ConfirmDialog",
            options: {
                template: j
            }
        };
        P.trackGAEvent(FLAG_PIN_GA_CATEGORY, P.CONST.GA_ACTION_CLICK_SUBMIT, "reason", h.reason);
        var l = P.resourceFactory.create("PinFlagResource", h);
        l.callCreate().then(function() {
            P.trackGAEvent(FLAG_PIN_GA_CATEGORY, P.CONST.GA_ACTION_SUCCESS), P.loadModule(k).then(function(a) {
                this.showInModal(a), this.listen(a, P.CONST.EVENT_CONFIRM, this.destroy)
            }.bind(this)), b === g && P.pubsub.publish(this.options.board_id, P.CONST.PUBSUB_TOPIC_PIN_FLAGGED, {})
        }.bind(this), function() {
            P.trackGAEvent(FLAG_PIN_GA_CATEGORY, P.CONST.GA_ACTION_ERROR)
        }).fin(function() {
            a.hideLoading()
        })
    }
}), P.modules.FlagPin.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.FlagUser"), goog.require("P.Module"), P.modules.FlagUser = P.Module.extend({}), P.modules.FlagUser.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.FollowerCount"), goog.require("P.Module"), P.modules.FollowerCount = P.Module.extend({
    onContentReady: function() {
        var a = {};
        a[P.CONST.PUBSUB_TOPIC_USER_FOLLOW] = this.onFollowerChange, a[P.CONST.PUBSUB_TOPIC_USER_UNFOLLOW] = this.onFollowerChange, this.pubsubSubscribe(this.data.id, a), P.modules.NavigateButton.prototype.onContentReady.call(this)
    },
    onFollowerChange: function() {
        this.render()
    }
}), P.modules.FollowerCount.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.FooterButtons"), goog.require("P.Module"), P.modules.FooterButtons = P.Module.extend({
    onContentReady: function() {
        this.options.hidden || window.setTimeout(function() {
            this.setVisible(!0)
        }.bind(this), 2e3), P.pubsub.subscribe(P.CONST.PUBSUB_CHANNEL_TUTORIAL, P.CONST.PUBSUB_TOPIC_TUTORIAL_TRIGGER_ACTIVE, function(a, b, c) {
            if (this.tutorialInfo = c, !this.tutorialInfo)
                return void this.$el.removeClass("hasGuides");
            if (this.$el.addClass("hasGuides"), c.showFlyout) {
                var d = {
                    name: "UserEducationTriggerCard",
                    options: {
                        guide: c
                    }
                };
                this.flyout && (this.flyout.destroy(), this.flyout = null), P.loadModule(d).then(function(a) {
                    this.flyout = a, a.render().then(function() {
                        this.appendChild(a), this.setVisible(!0), this.$el.removeClass("guideWasRecommended").addClass("guideIsRecommended"), window.setTimeout(function() {
                            this.dismissOnScroll=!0
                        }.bind(this), 3e3)
                    }.bind(this))
                }.bind(this))
            } else 
                this.setVisible(!0)
        }.bind(this)), P.pubsub.subscribe(P.CONST.PUBSUB_CHANNEL_SITE, P.CONST.PUBSUB_TOPIC_DEEP_LINK, this.onNavigate.bind(this)), this.childListen(P.CONST.EVENT_TRIGGER_FLYOUT_CLICKED, this.onTriggerFlyoutClicked), this.childListen(P.CONST.EVENT_TUTORIAL_TRIGGER_CLICKED, this.onTriggerClicked), this.listen(this.getScrollableElement(), P.CONST.EVENT_SCROLL, _.throttle(this.onScroll, 100))
    },
    onTriggerClicked: function() {
        this.tutorialInfo && (this.$el.hasClass("guideIsRecommended") && this.$el.removeClass("guideIsRecommended").addClass("guideWasRecommended"), this.$el.find(".userEducationTutorialButton").addClass("triggerActive"))
    },
    onTriggerFlyoutClicked: function() {
        this.onTriggerClicked(), P.TutorialManager.instance().startTutorial(this.tutorialInfo.tutorialName, {
            display_data: {
                automatic_trigger: !0
            }
        })
    },
    onNavigate: function() {
        this.$el.removeClass("guideIsRecommended").removeClass("guideWasRecommended"), this.dismissOnScroll=!1, this.$el.find(".moreFooter").removeClass("triggerActive"), P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_TUTORIAL, P.CONST.PUBSUB_TOPIC_TUTORIAL_TRIGGER_ACTIVE, null)
    },
    onScroll: function() {
        this.dismissOnScroll && (this.onTriggerClicked(), this.dismissOnScroll=!1)
    },
    setVisible: function(a) {
        a&&!this.visible ? (this.visible=!0, this.$el.addClass("visible")) : !a && this.visible && (this.visible=!1, this.$el.removeClass("visible"))
    }
}), P.modules.FooterButtons.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/FooterButtons/FooterButtons.nunjucks"), goog.provide("P.modules.FriendCenter"), goog.require("P.Module"), P.modules.FriendCenter = P.Module.extend({}), P.modules.FriendCenter.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.GroupBoardEmailSettings"), goog.require("P.Module"), P.modules.GroupBoardEmailSettings = P.Module.extend({
    onCreated: function() {
        this.childListen("change", this.onChildChange)
    },
    onSubmitValidated: function() {
        return this.save(), !1
    },
    save: function() {
        var a = {}, b = [];
        this.$form.find("input[name=collab_board_email]:checked").each(function() {
            b.push(this.value)
        }), a.email_collaborative_board_ids = b;
        var c = this.getChildById("submitButton"), d = P.resourceFactory.create("UserSettingsResource", a);
        c.showLoading(), d.callUpdate().then(function() {
            this.destroy()
        }.bind(this)).fin(function() {
            c.hideLoading()
        })
    },
    onContentReady: function() {
        P.Module.prototype.onContentReady.apply(this, arguments);
        var a = {};
        this.$form = this.$("form"), this.form = new P.Form(this.$form, a), this.listen(this.form, "submitValidated", this.onSubmitValidated)
    },
    onChildChange: function(a) {
        var b = a.target;
        if ("toggleAll" === b.id) {
            var c;
            c = b.isChecked() ? function(a) {
                a.setChecked(!0)
            } : function(a) {
                a.setChecked(!1)
            };
            var d = this.getChildrenByModuleName("ui.Checkbox");
            _.each(d, c)
        }
    }
}), P.modules.GroupBoardEmailSettings.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.HeroBasicWrapper"), goog.require("P.Module"), P.modules.HeroBasicWrapper = P.Module.extend({}), P.modules.HeroBasicWrapper.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.HeroConvertToBusiness"), goog.require("P.Module"), goog.require("P.modules.HeroHelperBase"), P.modules.HeroConvertToBusiness = P.modules.HeroHelperBase.extend({}), P.modules.HeroConvertToBusiness.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.HeroFriendsInvite"), goog.require("P.Module"), goog.require("P.modules.HeroHelperBase");
var BUTTON_ID_INVITE = "invite";
P.modules.HeroFriendsInvite = P.modules.HeroHelperBase.extend({
    onButtonClick: function(a) {
        var b = a.target;
        if (b.id === BUTTON_ID_INVITE) {
            var c = {
                name: "MultiInviter"
            };
            P.loadModule(c).then(function(a) {
                P.getModalManager().showInModal(a)
            })
        }
    }
}), P.modules.HeroFriendsInvite.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.HeroInstallApp"), goog.require("P.Module"), goog.require("P.modules.HeroHelperBase");
var BUTTON_ID_INSTALL_APP = "install_app";
P.modules.HeroInstallApp = P.modules.HeroHelperBase.extend({
    onContentReady: function() {
        this.formListener && this.removeListener(this.formListener);
        var a;
        a = {
            phoneNumber: [P.Validator.Required(), P.Validator.PhoneNumber()]
        }, this.form = new P.Form(this.$("form"), a), this.formListener = this.listen(this.form, P.CONST.EVENT_SUBMIT_VALIDATED, this.onSubmitValidated), this.installAppButton = this.getChildById(BUTTON_ID_INSTALL_APP), P.modules.HeroHelperBase.prototype.onContentReady.call(this)
    },
    onSubmitValidated: function(a) {
        a.errors[0] || this.installAppSms()
    },
    onSuccess: function() {
        this.complete(), this.installAppButton.hideLoading(), this.installAppButton.setText(this.options.sent_text), this.installAppButton.disable()
    },
    onFailure: function() {
        this.installAppButton.hideLoading()
    },
    installAppSms: function() {
        var a = this.form.getValue("phoneNumber"), b = this.form.getValue("country"), c = P.resourceFactory.create("SmsAppInstall", {
            number: a,
            country: b
        });
        this.installAppButton.showLoading(), c.callCreate({
            showError: !1
        }).then(function() {
            this.onSuccess()
        }.bind(this), function() {
            this.onFailure()
        }.bind(this))
    }
}), P.modules.HeroInstallApp.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.HeroLanguagePicker"), goog.require("P.modules.HeroHelperBase"), P.modules.HeroLanguagePicker = P.modules.HeroHelperBase.extend({
    events: {
        "click .showEnglish": "showEnglish"
    },
    showEnglish: function() {
        this.options.show_english=!0, this.render()
    },
    _onButtonClick: function(a) {
        var b = a.target, c = b.id;
        "switch" === c ? this._switch() : "close" === c && this._close(!0)
    },
    _close: function(a) {
        var b = a ? "language_unchanged": "language_confirmation", c = {
            name: "ConfirmDialog",
            options: {
                template: b,
                language_name: this.extraData.language_name
            }
        };
        P.modules.HeroHelperBase.prototype.dismiss.call(this, !0), P.loadModule(c).then(function(b) {
            this.showInModal(b), this.listen(b, P.CONST.EVENT_DESTROYED, this.dismiss.bind(this, !1, a))
        }.bind(this))
    },
    dismiss: function(a, b) {
        b || window.location.reload(!0), this.destroy()
    },
    _switch: function() {
        var a = {
            locale: this.resource.options.locale
        }, b = P.resourceFactory.create("UserSettingsResource", a);
        b.callUpdate({
            success: this._close.bind(this, !1)
        })
    }
}), P.modules.HeroLanguagePicker.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.HeroPinItButton"), goog.require("P.Module"), goog.require("P.browserExtension"), goog.require("P.modules.HeroHelperBase");
var BUTTON_ID_PINIT_BUTTON = "pinitButton";
P.modules.HeroPinItButton = P.modules.HeroHelperBase.extend({
    onContentReady: function() {
        P.browserExtension.instance.isExtensionInstalled() && this.dismiss(), P.modules.HeroHelperBase.prototype.onContentReady.call(this)
    },
    onButtonClick: function(a) {
        var b = a.target;
        b.id === BUTTON_ID_PINIT_BUTTON && P.browserExtension.instance.handleExtensionInstall(P.NOOP, P.NOOP)
    }
}), P.modules.HeroPinItButton.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.HeroPinItWeb"), goog.require("P.Module"), goog.require("P.modules.HeroHelperBase");
var BUTTON_ID_PINIT_BUTTON_WEB = "pinitButton";
P.modules.HeroPinItWeb = P.modules.HeroHelperBase.extend({
    onButtonClick: function(a) {
        var b = a.target;
        b.id === BUTTON_ID_PINIT_BUTTON_WEB && (P.changeWindowLocation(this.extraData.url, this.extraData.newWindow), this.complete(!0))
    }
}), P.modules.HeroPinItWeb.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.HeroPlacePinsExamples"), goog.require("P.Module"), goog.require("P.modules.HeroPlacePinsExamplesBase"), P.modules.HeroPlacePinsExamples = P.modules.HeroPlacePinsExamplesBase.extend({}), P.modules.HeroPlacePinsExamples.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.HeroPromoteAPin"), goog.require("P.modules.HeroHelperBase");
var ID_BUTTON_GET_STARTED = "get_started", URL_PROMOTE_A_PIN = "";
P.modules.HeroPromoteAPin = P.modules.HeroHelperBase.extend({
    onButtonClick: function(a) {
        var b = a.target;
        b.id === ID_BUTTON_GET_STARTED && (P.changeWindowLocation(URL_PROMOTE_A_PIN, !0), this.complete(!0))
    }
}), P.modules.HeroPromoteAPin.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.HeroVerifyWebsite"), goog.require("P.Module"), goog.require("P.modules.HeroHelperBase"), P.modules.HeroVerifyWebsite = P.modules.HeroHelperBase.extend({}), P.modules.HeroVerifyWebsite.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.HomePage"), goog.require("P.Module"), P.modules.HomePage = P.Module.extend({}), P.modules.HomePage.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.HomefeedCarouselBase"), goog.require("P.Module");
var MIN_VISIBLE_PINNERS = 4, MIN_PINNERS_TO_FOLLOW = 5, FAST_TRANSITION = 500, SLOW_TRANSITION = 2e3;
P.modules.HomefeedCarouselBase = P.Module.extend({
    onContentReady: function() {
        this.numberFollowed = 0, this.numberDismissed = 0, this.totalPinners = $(this.el).find(".container").length, this.destroyIfEmpty() || (this.childListen(P.CONST.EVENT_USER_FOLLOW, this.onFollowActionTaken), this.childListen(P.CONST.EVENT_BUTTON_CLICK, this.onButtonClick), this.placementId = P.Experiences.Placement.WEB_HERO, this.experienceId = P.Experiences.Experience.WEB_HOMEFEED_CAROUSEL, this.$(".userDismiss").on("click", function(a) {
            var b = $(a.target).attr("id"), c = this.getChildrenByModuleName("User").filter(function(a) {
                return a.id === b
            });
            this.onUserDismiss(c[0])
        }.bind(this)))
    },
    onButtonClick: function(a) {
        var b = a.target, c = $(b.el).hasClass("disabled");
        c || this.dismiss()
    },
    dismiss: function() {
        P.ExperienceManager.instance().completePlacedExperience(this.placementId, this.experienceId), this.remove()
    },
    onFollowActionTaken: function(a) {
        var b = a.target;
        this.followUserAnimation(b)
    },
    followUserAnimation: function(a) {
        if (a) {
            this.numberFollowed++;
            var b = this.$("#" + a.data.id), c = b.find(".userMask");
            c.addClass("maskLoaded");
            var d = this.$(".homefeedCarouselWrapper").width();
            if (this.visibleUsers = Math.floor(d / (P.CONST.PIN_WIDTH + P.CONST.PIN_MARGIN)) - 1, this.remainingUsers = this.totalPinners - this.visibleUsers - this.numberFollowed - this.numberDismissed, this.remainingUsers > 0 && this.visibleUsers + this.remainingUsers > MIN_VISIBLE_PINNERS) {
                c.delay(SLOW_TRANSITION).fadeOut(FAST_TRANSITION);
                var e = this.$(".container").last(), f = e.find(".userMask"), g = this.getChildrenByModuleName("User").filter(function(a) {
                    return a.id === e.attr("id")
                })[0];
                e.detach(), $(a.el).addClass("userFollowed").delay(SLOW_TRANSITION).queue(function() {
                    var c = $(g.el);
                    a.remove(), c.hide(), g.appendToElement(b), b.attr("id", g.data.id), b.prepend(f), c.addClass("userVisible"), c.show(), c.parent().find(".maskLoaded").remove()
                })
            } else 
                this.$(".userDismiss").addClass("hiddenElement"), $(a.el).addClass("userFollowed").delay(SLOW_TRANSITION).queue(function() {
                    a.remove()
                });
            if (this.numberFollowed <= MIN_PINNERS_TO_FOLLOW && this.$(".progressPinner").eq(this.numberFollowed - 1).addClass("progressPinnerLoaded"), this.numberFollowed === MIN_PINNERS_TO_FOLLOW) {
                var h = this.$(".cardContainer");
                h.find("h1").text(P._("Take a look")), h.find("h3").text(P._("Let's see how your home feed looks now...")), h.find("button").toggleClass("disabled primary"), P.ExperienceManager.instance().completePlacedExperience(this.placementId, this.experienceId)
            }
        }
    },
    onUserDismiss: function(a) {
        if (a) {
            this.numberDismissed++;
            var b = this.$(".homefeedCarouselWrapper").width();
            if (this.visibleUsers = Math.floor(b / (P.CONST.PIN_WIDTH + P.CONST.PIN_MARGIN)) - 1, this.remainingUsers = this.totalPinners - this.visibleUsers - this.numberFollowed - this.numberDismissed, this.remainingUsers < 0)
                return void this.$(".userDismiss").fadeOut(FAST_TRANSITION);
            var c = this.$(".container").last(), d = this.getChildrenByModuleName("User").filter(function(a) {
                return a.id === c.attr("id")
            })[0];
            c.detach(), $(a.el).addClass("userDismissed").delay(FAST_TRANSITION).queue(function() {
                var b = this.$("#" + a.data.id), c = $(d.el);
                a.remove(), c.hide(), d.appendToElement(b), b.attr("id", d.data.id), c.show(), c.addClass("userVisible")
            }.bind(this)), this.remainingUsers <= 0 && this.$(".userDismiss").fadeOut(FAST_TRANSITION)
        }
    }
}), P.modules.HomefeedCarouselBase.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.IframeEmbed"), goog.require("P.Module"), P.modules.IframeEmbed = P.Module.extend({}), P.modules.IframeEmbed.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ImagesFeedPage"), goog.require("P.Module"), P.modules.ImagesFeedPage = P.Module.extend({
    onContentReady: function() {
        var a = this.getChildById("domainPinsGrid");
        a && 0 === a.children.length ? a.destroy() : this.$(".domainPinsHolder").css("visibility", "visible")
    }
}), P.modules.ImagesFeedPage.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.IncrementingNavigateButton"), goog.require("P.Module"), goog.require("P.modules.NavigateButton");
var INCREMENTING_NAVIGATE_BUTTON_CLASS_HIDDEN = "hidden";
P.modules.IncrementingNavigateButton = P.modules.NavigateButton.extend({
    onContentReady: function() {
        this.listen(this, P.CONST.EVENT_INCREMENT_BUTTON_CREATE, this.makeVisible), this.listen(this, P.CONST.EVENT_INCREMENT_BUTTON_DESTROY, this.makeInvisible)
    },
    getValue: function() {
        if (this.extraData && this.extraData.actionCount)
            return this.extraData.actionCount;
        var a = $.trim(this.$el.text()), b = parseInt(a, 10);
        return b
    },
    setValue: function(a) {
        this.extraData.actionCount = a, this.$el.text(a)
    },
    isHidden: function() {
        return this.$el.hasClass(INCREMENTING_NAVIGATE_BUTTON_CLASS_HIDDEN)
    },
    makeVisible: function() {
        var a = this.isHidden();
        a && this.$el.removeClass(INCREMENTING_NAVIGATE_BUTTON_CLASS_HIDDEN)
    },
    makeInvisible: function() {
        var a = this.isHidden();
        a || this.$el.addClass(INCREMENTING_NAVIGATE_BUTTON_CLASS_HIDDEN)
    },
    increment: function() {
        var a = this.getValue();
        isNaN(a) && (a = 0), this.triggerEvent(P.CONST.EVENT_INCREMENT_BUTTON_CREATE, this.options.siblingButtonId, !0), a += 1, this.setValue(a)
    },
    decrement: function() {
        var a = this.getValue();
        return a -= 1, 0 === a ? void this.triggerEvent(P.CONST.EVENT_INCREMENT_BUTTON_DESTROY, this.options.siblingButtonId, !0) : void this.setValue(a)
    }
}), P.modules.IncrementingNavigateButton.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/IncrementingNavigateButton/IncrementingNavigateButton.nunjucks"), goog.provide("P.modules.InfoBarBase"), goog.require("P.Module");
var INFO_BAR_ACTIVE_CLASS = "active";
P.modules.InfoBarBase = P.Module.extend({
    onCreated: function() {
        this.listen(this, P.CONST.EVENT_NAVIGATE, this.onTabClick), this.childListen(P.CONST.EVENT_NAVIGATE, this.onTabClick)
    },
    onTabClick: function(a) {
        var b = a.data.url;
        b && this.selectTab(b)
    },
    selectTab: function(a) {
        this.$("a").each(function() {
            var b = $(this);
            b.attr("href") === a ? b.addClass(INFO_BAR_ACTIVE_CLASS) : b.removeClass(INFO_BAR_ACTIVE_CLASS)
        })
    }
}), P.modules.InfoBarBase.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.InitiatePasswordReset"), goog.require("P.Module"), P.modules.InitiatePasswordReset = P.Module.extend({
    onContentReady: function() {
        this.$form = this.$("form"), this.form = new P.Form(this.$form, {
            email: [P.Validator.Required(), P.Validator.Email()]
        }, {}), this.listen(this.form, P.CONST.EVENT_SUBMIT_VALIDATED, this.onSubmitValidated)
    },
    onSubmitValidated: function(a) {
        if (!a.errors[0]) {
            var b = this.form.getValue("email");
            this.resetPassword(b)
        }
    },
    resetPassword: function(a) {
        var b = {
            username_or_email: a
        }, c = P.resourceFactory.create("UserResetPasswordResource", b), d = this.getChildById("resetPasswordButton");
        d.showLoading(), c.callCreate({
            showError: !1
        }).then(function() {
            this.onSuccess(a)
        }.bind(this)).fin(function() {
            d.hideLoading()
        })
    },
    onSuccess: function(a) {
        this.$form.hide();
        var b = P.string.format(P._("We'll send a message to <strong>{{ email }}</strong> so you can pick your new password."), {
            email: a
        });
        this.$(".messageText").html(b), this.$(".successMessage").show()
    }
}), P.modules.InitiatePasswordReset.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.InlineHoverButton"), goog.require("P.Module"), P.modules.InlineHoverButton = P.Module.extend({}), P.modules.InlineHoverButton.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.InterestFeedPage"), goog.require("P.Module"), P.modules.InterestFeedPage = P.Module.extend({
    _hexToRGB: function(a) {
        var b = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);
        return b ? {
            r: parseInt(b[1], 16),
            g: parseInt(b[2], 16),
            b: parseInt(b[3], 16)
        } : {
            r: 150,
            g: 156,
            b: 157
        }
    },
    onContentReady: function() {
        var a = this.$(".headerBackground");
        if (a.length) {
            var b = "left", c = a.attr("style").replace("background-color: ", "");
            a.hasClass("backwards") && (b = "right");
            var d = this._hexToRGB(c), e = d.r, f = d.g, g = d.b, h = "rgba(" + e + "," + f + "," + g + ",1) 0%,", i = h + " rgba(" + e + "," + f + "," + g + ",0) 17%,", j = i + " rgba(" + e + "," + f + "," + g + ",0) 17%,", k = j + " rgba(" + e + "," + f + "," + g + ",1) 35%,", l = k + " rgba(" + e + "," + f + "," + g + ",1) 100%", m = "background: linear-gradient(to " + b + ", " + l + ");";
            this.$(".bgGradient").attr("style", "background-color: " + c + ";" + m), this.$(".rightImage").delay(1e3).animate({
                opacity: .7
            }, {
                duration: 500
            })
        }
    }
}), P.modules.InterestFeedPage.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.InterestModal"), goog.require("P.Module"), P.modules.InterestModal = P.Module.extend({
    onContentReady: function() {
        $(".InterestPage").css({
            visibility: "hidden"
        }), $(".loading").fadeOut(400).remove(), this.parent.$(".closeModal").addClass("visible close")
    }
}), P.modules.InterestModal.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.InterestRelatedPins"), goog.require("P.Module"), P.modules.InterestRelatedPins = P.Module.extend({
    onContentReady: function() {
        this.extraData.empty && this.destroy()
    }
}), P.modules.InterestRelatedPins.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.InterestsSelector"), goog.require("P.Module");
var INTEREST_SELECTOR_MIN_THRESHOLD = 300;
P.modules.InterestsSelector = P.Module.extend({
    onCreated: function() {
        this.onInterestGridScroll = this.onInterestGridScroll.bind(this), this.onInterestGridScroll = _.throttle(this.onInterestGridScroll, 200)
    },
    onContentReady: function() {
        this.interestsPagedGrid = this.getChildById("interestsPagedGrid"), this.interestsGrid = this.interestsPagedGrid.getChildByModuleName("Grid"), this.scrollableElement = this.$(".interestsGridWrapper"), this._scrollListener = this.listen(this.scrollableElement, P.CONST.EVENT_SCROLL, this.onInterestGridScroll), this.childListen(P.CONST.EVENT_CONTENT_CHANGED, this.onContentChanged), this.childListen(P.CONST.EVENT_ITEMS_END, this.onItemsEnd)
    },
    onInterestGridScroll: function() {
        if (!this.rendering) {
            var a = this.$(".interestsGrid"), b = a.height() + a.position().top - this.scrollableElement.height();
            b <= INTEREST_SELECTOR_MIN_THRESHOLD && this.fetchMore()
        }
    },
    fetchMore: function() {
        if (!this.rendering) {
            if (this.resource.atEnd())
                return void this.removeListener(this._scrollListener);
            this.rendering=!0, this.interestsPagedGrid.requestMore()
        }
    },
    onContentChanged: function(a) {
        var b = a.target.id;
        "items" === b && (this.interestsPagedGrid.hideMoreItemsLoading(), this.redrawSelector(), this.rendering=!1)
    },
    onItemsEnd: function() {
        this.removeListener(this._scrollListener)
    },
    prependInterest: function(a) {
        var b = {
            name: "Interest",
            options: {
                view_type: "interestMenuGridItem"
            },
            resource: {
                name: "InterestResource",
                options: {
                    interest: a
                }
            }
        };
        return P.loadModule(b).then(function(a) {
            a.render().then(function() {
                this.interestsGrid.prependChildItem(a)
            }.bind(this))
        }.bind(this))
    },
    redrawSelector: function() {
        this.interestsGrid.onResize()
    }
}), P.modules.InterestsSelector.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.InternationalSubdomains"), goog.require("P.Module"), P.modules.InternationalSubdomains = P.Module.extend({}), P.modules.InternationalSubdomains.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.InviteFriendsRep"), goog.require("P.Module"), P.modules.InviteFriendsRep = P.Module.extend({
    events: {
        click: "onClick"
    },
    onClick: function() {
        return "facebook" === this.options.network && P.FacebookDialog.open({
            type: "send",
            name: this.extraData.name,
            description: this.extraData.description,
            path: "/",
            picture: this.extraData.picture
        }), !1
    }
}), P.modules.InviteFriendsRep.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.InviteLanding"), goog.require("P.Module"), P.modules.InviteLanding = P.Module.extend({
    onContentReady: function() {
        P.trackRegisterAction("web_invite_landing"), P.Invite.trackInviteFunnelAction("invite_landing"), P.Invite.trackInviteFunnelAction("recipient_invite_landing", !0), this.options.show_invite_modal && P.modules.InviteModal.showInviteModal(this.options.inviter_user_id, "generic")
    }
}), P.modules.InviteLanding.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.InviteListBase"), goog.require("P.Module"), goog.require("P.typeaheadProvider");
var MIN_SCROLL_THRESHOLD = 2500, EMAIL_NETWORKS = ["google", "yahoo", "microsoft"];
P.modules.InviteListBase = P.Module.extend({
    events: {
        "click .inviteAllLabel": "_onClickInviteAll",
        'textchange input[type="text"]': "_onTextChange"
    },
    onContentReady: function() {
        P.Module.prototype.onContentReady.apply(this, arguments), this.scrollableElement = this.$(".inviteContent"), this._scrollListener = this.listen(this.scrollableElement, "scroll", this._onInviteScroll), this.inviteList = this.getChildById("inviteList"), this.emptyResultsFooter = this.$(".emptyResultsFooterContainer"), this.sendButton = this.getChildById("inviteButton"), this.options.checkable && (this.inviteAllCheck = this.getChildById("inviteAllCheck")), this._reset()
    },
    _reset: function() {
        this.checkedContacts = {}, this.options.checkable && (this.sendButton.setEnabled(!1), this.childListen(P.CONST.EVENT_CHANGE, this._onChange)), this.childListen(P.CONST.EVENT_BUTTON_CLICK, this._onClick), this._onInviteScroll = this._onInviteScroll.bind(this), this._onInviteScroll = _.throttle(this._onInviteScroll, 200);
        var a = {
            name: "invite",
            tags: this.options.network,
            count: 50
        };
        this.typeahead = new P.TypeaheadProvider(a), this.typeahead.prefetch(), this.listen(this.typeahead, P.CONST.EVENT_DATA, this.onTypeaheadData)
    },
    _onInviteScroll: function() {
        if (!this.rendering && this._searchIsEmpty()) {
            var a = this.$(".List");
            if (a.position()) {
                var b = a.height() + a.position().top - this.scrollableElement.height();
                b <= MIN_SCROLL_THRESHOLD && this._fetchMore()
            }
            return !1
        }
    },
    _onChange: function(a) {
        var b = a.target;
        if ("inviteAllCheck" === b.id)
            this._onToggleInviteAll(a);
        else {
            for (var c = 0, d = 0; d < this.inviteList.children.length; d++) {
                var e = this.inviteList.children[d];
                this.checkedContacts[e.getEmail()] = e.isChecked(), c += e.isChecked() ? 1 : 0
            }
            this._searchIsEmpty() && this.inviteAllCheck.setChecked(c === this.inviteList.children.length, !1);
            var f = 0;
            for (var g in this.checkedContacts)
                this.checkedContacts[g] && f++;
            this.sendButton.setEnabled(f > 0)
        }
    },
    _onClick: function(a) {
        "inviteButton" === a.target.id && this._onClickInvite(a)
    },
    _fetchMore: function() {
        return this.inviteList.options.item_options.checkedAll = this.inviteAllChecked(), this.resource.atEnd() ? void this.removeListener(this._scrollListener) : (this.rendering=!0, void this.getChildById("inviteList").renderAdditional(P.ModuleRenderType.APPEND).then(function() {
            this.rendering=!1
        }.bind(this)))
    },
    _onTextChange: function() {
        this._filterResults()
    },
    onTypeaheadData: function(a) {
        if (!this._searchIsEmpty() && this._getSearchText() === a.term) {
            var b = [];
            _.each(a.items, function(a) {
                var c = $.extend({}, a);
                $.inArray(this.options.network, EMAIL_NETWORKS) >= 0 && (c.id_type = "email"), this.options.checkable && (this.checkedContacts[c.id]|=this.inviteAllChecked(), c.checked = this.checkedContacts[c.id]), b.push(c)
            }.bind(this)), this.inviteList.options.items = b, this.inviteList.resource = null, this.inviteList.render(), b.length ? this.emptyResultsFooter.hide() : this.emptyResultsFooter.show()
        }
    },
    _filterResults: function(a) {
        this._searchIsEmpty() ? (this.inviteList.resource || this.inviteList.renderAbort(), this.emptyResultsFooter.hide(), this.inviteList.resource = this.resource, delete this.inviteList.options.items, this.inviteList.render().then(function() {
            this._searchIsEmpty() && (this.options.checkable && _.each(this.inviteList.children, function(a) {
                a.setChecked(this.checkedContacts[a.getEmail()], !1)
            }.bind(this)), a && a())
        }.bind(this))) : this.typeahead.search(this._getSearchText(), function() {})
    },
    _getSearchText: function() {
        return this.$("input[type='text']").val().toLowerCase()
    },
    _searchIsEmpty: function() {
        var a = this._getSearchText();
        return !a || "" === a
    },
    inviteAllChecked: function() {
        return this.options.checkable && this.inviteAllCheck.isChecked()
    },
    _onClickInvite: function() {
        this.sendInvitesClicked()
    },
    _onToggleInviteAll: function() {
        this._getSearchText() ? (this.$("input[type='text']").val(""), this._filterResults(function() {
            this._toggleInviteAll()
        }.bind(this))) : this._toggleInviteAll()
    },
    _onClickInviteAll: function() {
        this.inviteAllCheck.setChecked(!this.inviteAllChecked()), this._onToggleInviteAll()
    },
    _toggleInviteAll: function() {
        var a = this.inviteAllChecked();
        _.each(this.inviteList.children, function(b) {
            this.checkedContacts[b.getEmail()] = a, b.setChecked(a)
        }.bind(this)), this.sendButton.setEnabled(a)
    },
    getCheckedContacts: function() {
        return this.checkedContacts
    },
    sendInvitesClicked: P.NOOP
}), P.modules.InviteListBase.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.InviteListEmail"), goog.require("P.Module"), goog.require("P.modules.InviteListBase"), P.modules.InviteListEmail = P.modules.InviteListBase.extend({
    onContentReady: function() {
        P.modules.InviteListBase.prototype.onContentReady.apply(this, arguments), this.sendInvitationEmailModule = this.getChildById("sendInvitationEmailModule")
    },
    onTypeaheadData: function(a) {
        P.modules.InviteListBase.prototype.onTypeaheadData.apply(this, arguments);
        var b = a.term, c = P.isEmailAddress(b);
        this.sendInvitationEmailModule.options = {
            text_value: b,
            is_valid_email: c
        }, this.sendInvitationEmailModule.render()
    },
    sendInvitesClicked: function() {
        var a;
        if (this.inviteAllChecked())
            a = P.resourceFactory.create("BulkNetworkInviteResource", {
                network: this.options.network
            });
        else {
            var b = [], c = this.getCheckedContacts();
            for (var d in c)
                c[d] && b.push(d);
            a = P.resourceFactory.create("UserMultiInviteResource", {
                emails: b
            })
        }
        this.sendButton.showLoading(), a.callCreate().then(function() {
            this.sendButton.hideLoading(), this.triggerEvent(P.CONST.EVENT_INVITE_USER, null, !0)
        }.bind(this))
    }
}), P.modules.InviteListEmail.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.InviteListFacebook"), goog.require("P.Module"), P.modules.InviteListFacebook = P.modules.InviteListBase.extend({
    onContentReady: function() {
        P.modules.InviteListBase.prototype.onContentReady.apply(this, arguments), P.fb.ensureInit(P.NOOP)
    }
}), P.modules.InviteListFacebook.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.InviteModal"), goog.require("P.Module"), P.modules.InviteModal = P.Module.extend({}), P.modules.InviteModal.showInviteModal = function(a, b) {
    var c = {
        name: "InviteModal",
        resource: {
            name: "UserResource",
            options: {
                user_id: a
            }
        },
        options: {
            page: b
        }
    };
    P.loadModule(c).then(function(a) {
        P.getModalManager().showInModal(a, {
            can_dismiss: !1
        })
    })
}, P.modules.InviteModal.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.InviterAnyEmail"), goog.require("P.Module"), P.modules.InviterAnyEmail = P.Module.extend({
    onContentReady: function() {
        var a = {
            email: [P.Validator.Required(), P.Validator.Email()]
        };
        this.form = new P.Form(this.$("form"), a), this.formListener && this.removeListener(this.formListener), this.formListener = this.listen(this.form, P.CONST.EVENT_SUBMIT_VALIDATED, this._onSubmitValidated), this.emailInviteButton = this.getChildById("invite"), this.emailInviteButton.disable(), this.$(".emailInput").focus()
    },
    _onSubmitValidated: function(a) {
        if (!a.errors[0]) {
            this.emailInviteButton.showLoading();
            var b = this.form.getValue("email");
            this.$(".emailInput").val(""), P.Invite.userInviteEmail(b, function() {
                this.emailInviteButton.hideLoading(), this.triggerEvent(P.CONST.EVENT_INVITE_USER, null, !0)
            }.bind(this))
        }
    }
}), P.modules.InviterAnyEmail.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/InviterAnyEmail/InviterAnyEmail.nunjucks"), goog.provide("P.modules.InviterEmail"), goog.require("P.Module"), P.modules.InviterEmail = P.Module.extend({
    onCreated: function() {
        this.childListen(P.CONST.EVENT_BUTTON_CLICK, this._onButtonClick)
    },
    onContentReady: function() {
        this.network = this.options.network
    },
    _onButtonClick: function(a) {
        var b = a.target;
        if ("connect" === b.id) {
            b.showLoading(!0);
            var c = P.SocialNetworkSettingsManager.instance(), d = {
                success: function() {
                    var a = {
                        username: P.currentUser.attributes.username,
                        filter: "not_on_pinterest"
                    }, d = {
                        success: function() {
                            this.render()
                        }.bind(this),
                        error: function() {
                            b.hideLoading()
                        },
                        resourceOptions: a
                    };
                    c.pollForFriends(this.network, d)
                }.bind(this),
                error: function() {
                    b.hideLoading()
                }
            };
            c.handleConnect(this.network, !0, d)
        }
    }
}), P.modules.InviterEmail.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/InviterEmail/InviterEmail.nunjucks"), goog.provide("P.modules.JoinButton"), goog.require("P.Module"), goog.require("P.modules.NavigateButton"), P.modules.JoinButton = P.modules.NavigateButton.extend({
    getNavigateUrl: function() {
        return P.getRegisterUrl({
            action: "join"
        })
    }
}), P.modules.JoinButton.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.KLPBar"), goog.require("P.Module"), P.modules.KLPBar = P.Module.extend({
    onContentReady: function() {
        this.isEmpty() ? P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_KLP_BAR, P.CONST.PUBSUB_TOPIC_KLP_BAR_HIDDEN) : (this.show(), P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_KLP_BAR, P.CONST.PUBSUB_TOPIC_KLP_BAR_SHOWN))
    }
}), P.modules.KLPBar.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.LanguageDropdown"), goog.require("P.Module"), P.modules.LanguageDropdown = P.Module.extend({
    events: {
        "click .language": "onClick"
    },
    onClick: function(a) {
        var b = $(a.currentTarget), c = P.url.appendQueryString(b.attr("data-url"), P.getQueryStringParams());
        return P.navigate(c), !1
    }
}), P.modules.LanguageDropdown.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.LanguageMenu"), goog.require("P.Module"), P.modules.LanguageMenu = P.Module.extend({}), P.modules.LanguageMenu.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.LoginPage"), goog.require("P.Module"), P.modules.LoginPage = P.Module.extend({
    onAddedToDom: function() {
        this.resizeWindow(), P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_SITE, P.CONST.PUBSUB_TOPIC_NAG_STATE, !1)
    },
    onRemovedFromDom: function() {
        P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_SITE, P.CONST.PUBSUB_TOPIC_NAG_STATE, !0)
    },
    onContentReady: function() {
        this.resizeWindow(), this.extraData && this.extraData.pinit_landing && P.trackRegisterAction("unauth_pinit_landing")
    },
    resizeWindow: function() {
        this.contentReady && this.inDom && P.getWindowManager().contain(this.$el)
    }
}), P.modules.LoginPage.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.LogoutAppUpsell"), goog.require("P.Module"), P.modules.LogoutAppUpsell = P.Module.extend({
    onAddedToDom: function() {
        P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_SITE, P.CONST.PUBSUB_TOPIC_NAG_STATE, !0)
    },
    onRemovedFromDom: function() {
        P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_SITE, P.CONST.PUBSUB_TOPIC_NAG_STATE, !0)
    },
    onContentReady: function() {
        this.setupForm(), this.$("form input").first().focus()
    },
    setupForm: function() {
        var a = {
            phone_or_email: [P.Validator.PhoneNumber()]
        };
        this.form = new P.Form(this.$("form"), a), this.formListener = this.listen(this.form, P.CONST.EVENT_SUBMIT_VALIDATED, this.onSubmitValidated), this.sendButton = this.getChildById("submit_button")
    },
    onSubmitValidated: function(a) {
        a.errors && a.errors.length || this.installAppSms()
    },
    onFailure: function() {
        this.sendButton.hideLoading()
    },
    onSuccess: function() {
        this.$(".dialogInput").hide("fast"), this.$(".dialogSuccess").show("fast")
    },
    installAppSms: function() {
        var a = this.form.getValue("phone_or_email"), b = P.resourceFactory.create("SmsAppInstall", {
            number: a
        });
        this.sendButton.showLoading(), b.callCreate({
            showError: !1
        }).then(this.onSuccess.bind(this), this.onFailure.bind(this))
    }
}), P.modules.LogoutAppUpsell.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.MobileLandingPage"), goog.require("P.Module"), P.modules.MobileLandingPage = P.Module.extend({}), P.modules.MobileLandingPage.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.MoreDropdown"), goog.require("P.Module"), P.modules.MoreDropdown = P.Module.extend({}), P.modules.MoreDropdown.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.MultiInviter"), goog.require("P.Module"), P.modules.MultiInviter = P.Module.extend({
    onCreated: function() {
        this.childListen(P.CONST.EVENT_INVITE_USER, this._onInviteSent)
    },
    _onInviteSent: function() {
        this.$(".inviteConfirm").show(), P.setTimeout(function() {
            this.$(".inviteConfirm").hide()
        }.bind(this), 2e3)
    }
}), P.modules.MultiInviter.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.MultiInviterEmail"), goog.require("P.Module"), P.modules.MultiInviterEmail = P.Module.extend({
    onCreated: function() {
        this.childListen(P.CONST.EVENT_BUTTON_CLICK, this._onButtonClick)
    },
    onContentReady: function() {
        if (P.Module.prototype.onContentReady.apply(this, arguments), !this.options.network) {
            this.gmailConnect = this.getChildById("gmailConnect"), this.yahooConnect = this.getChildById("yahooConnect"), this.microsoftConnect = this.getChildById("microsoftConnect");
            var a = {
                email: [P.Validator.Required(), P.Validator.Email()]
            };
            this.form = new P.Form(this.$("form"), a), this.formListener && this.removeListener(this.formListener), this.formListener = this.listen(this.form, P.CONST.EVENT_SUBMIT_VALIDATED, this._onSubmitValidated), this.emailInviteButton = this.getChildById("invite"), this.$(".emailInput").focus()
        }
    },
    _onSubmitValidated: function(a) {
        if (!a.errors[0]) {
            this.emailInviteButton.showLoading();
            var b = this.form.getValue("email");
            this.$(".emailInput").val(""), P.Invite.userInviteEmail(b, function() {
                this.emailInviteButton.hideLoading(), this.triggerEvent(P.CONST.EVENT_INVITE_USER, null, !0)
            }.bind(this))
        }
    },
    _onButtonClick: function(a) {
        var b = a.target, c = null;
        switch (b.id) {
        case"gmailConnect":
            c = P.SocialConnect.GOOGLE;
            break;
        case"yahooConnect":
            c = P.SocialConnect.YAHOO;
            break;
        case"microsoftConnect":
            c = P.SocialConnect.MICROSOFT;
            break;
        default:
            return 
        }
        b.showLoading(!0);
        var d = P.SocialNetworkSettingsManager.instance(), e = {
            success: function() {
                var a = {
                    username: P.currentUser.attributes.username,
                    filter: "not_on_pinterest"
                }, e = {
                    success: function() {
                        this.render()
                    }.bind(this),
                    error: function() {
                        b.hideLoading()
                    },
                    resourceOptions: a
                };
                d.pollForFriends(c, e)
            }.bind(this),
            error: function() {
                b.hideLoading()
            }
        };
        d.handleConnect(c, !0, e)
    }
}), P.modules.MultiInviterEmail.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.MultiInviterFacebook"), goog.require("P.Module"), P.modules.MultiInviterFacebook = P.Module.extend({
    onCreated: function() {
        this.childListen(P.CONST.EVENT_BUTTON_CLICK, this._onClick)
    },
    _onClick: function(a) {
        var b = a.target;
        if ("connectFacebook" === b.id) {
            var c = this.getChildById("connectFacebook"), d = P.SocialNetworkSettingsManager.instance(), e = {
                success: function() {
                    var a = {
                        username: P.currentUser.attributes.username,
                        filter: "not_on_pinterest"
                    }, b = {
                        success: function() {
                            this.options.reloadAll===!0 ? window.location.reload() : this.render()
                        }.bind(this),
                        error: function() {
                            c.hideLoading()
                        },
                        resourceOptions: a
                    };
                    d.pollForFriends("facebook", b)
                }.bind(this),
                error: function() {
                    c.hideLoading()
                }
            };
            c.showLoading(), d.handleConnect("facebook", !0, e)
        }
    }
}), P.modules.MultiInviterFacebook.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.NagBase"), goog.require("P.Module"), P.modules.NagBase = P.Module.extend({
    events: {
        "click .nagClose": "onCloseButtonClick"
    },
    clickHandler: function() {
        return null
    },
    onCloseButtonClick: function() {
        this.destroy(), P.trackGAEvent("nag", P.CONST.GA_ACTION_CLICK_CLOSE, "type", this.extraData.type)
    },
    onContentReady: function() {
        var a = {};
        a[P.CONST.PUBSUB_TOPIC_NAG_UPDATED] = this.onActionSaved, this.pubsubSubscribe(P.CONST.PUBSUB_CHANNEL_CURRENT_USER, a)
    },
    onActionSaved: function(a, b, c) {
        this.updateNagMessage(c)
    },
    updateNagMessage: function(a) {
        this.$(".message").text(a)
    },
    resourceCall: function(a, b, c) {
        var d = c.success, e = c.error;
        this.xhr = $.ajax({
            cache: !1,
            url: a,
            data: {},
            dataType: "json",
            type: "get" === b ? "get": "post",
            success: d,
            error: e
        })
    }
}), P.modules.NagBase.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/NagBase/NagBase.nunjucks"), goog.provide("P.modules.NagEmail"), goog.require("P.Module"), goog.require("P.modules.NagBase"), P.modules.NagEmail = P.modules.NagBase.extend({
    events: {
        "click .message a": "handleLinkClick"
    },
    onCreated: function() {
        this.successMessage = P._("Thanks! You should receive a confirmation email soon.")
    },
    handleLinkClick: function(a) {
        switch (a.target.id) {
        case"cancelEmailUpdate":
            this.cancelEmailUpdate();
            break;
        case"editEmail":
            this.updateEmail();
            break;
        case"removeBounce":
            this.removeBounce();
            break;
        case"resendEmail":
            this.resendConfirmEmail();
            break;
        case"resendEmailUpdate":
            this.resendUpdatedEmailAddressEmail()
        }
        return !1
    },
    removeBounce: function() {
        var a = P.resourceFactory.create("UserSettingsResource", {
            email_bounced: !1
        });
        a.callUpdate().then(function() {
            var a = P._("Got it! Make sure your inbox isn't full so that our emails can find their way to you.");
            this.updateNagMessage(a)
        }.bind(this))
    },
    updateEmail: function() {
        this.showLoading();
        var a = {
            name: "UserEditEmail",
            resource: {
                name: "UserSettingsResource",
                options: {}
            }
        };
        P.loadModule(a).then(function(a) {
            this.hideLoading(), this.showInModal(a)
        }.bind(this))
    },
    cancelEmailUpdate: function() {
        var a = P.resourceFactory.create("CancelEmailUpdateResource");
        a.callCreate().then(function() {
            this.updateNagMessage(P._("Thanks! Your email address change was cancelled."))
        }.bind(this))
    },
    resendUpdatedEmailAddressEmail: function() {
        var a = P.resourceFactory.create("ResendEmailUpdateEmailResource");
        a.callCreate().then(function() {
            this.updateNagMessage(this.successMessage)
        }.bind(this))
    },
    resendConfirmEmail: function() {
        var a = P.resourceFactory.create("ResendVerificationEmailResource");
        a.callCreate().then(function() {
            this.updateNagMessage(this.successMessage)
        }.bind(this))
    }
}), P.modules.NagEmail.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.NagFollowingFeedDeprecation"), goog.require("P.modules.NagBase"), P.modules.NagFollowingFeedDeprecation = P.modules.NagBase.extend({}), P.modules.NagFollowingFeedDeprecation.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.NagNoScript"), goog.require("P.Module"), P.modules.NagNoScript = P.Module.extend({}), P.modules.NagNoScript.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.NagPolicy"), goog.require("P.Module"), goog.require("P.modules.NagBase"), P.modules.NagPolicy = P.modules.NagBase.extend({
    events: {
        "click .policy": "clickHandler"
    },
    clickHandler: function() {
        var a = {
            name: "ConfirmDialog",
            options: {
                template: "pin_policy"
            }
        };
        return P.loadModule(a).then(function(a) {
            this.showInModal(a), this.listen(a, P.CONST.EVENT_CONFIRM, function() {
                this.savePolicyConfirmation()
            })
        }.bind(this)), !1
    },
    onActionSaved: function() {
        P.modules.NagBase.prototype.onActionSaved.apply(this, arguments), P.setTimeout(function() {
            this.parent.render()
        }.bind(this), 2e3)
    },
    savePolicyConfirmation: function() {
        var a = P.resourceFactory.create("ConfirmGuidelinesResource", {});
        a.callUpdate().then(function() {
            this.updateNagMessage(P._("Thanks for confirming!"))
        }.bind(this), function(a) {
            this.log.debug(a)
        }.bind(this))
    }
}), P.modules.NagPolicy.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.NagSearch"), goog.require("P.Module"), P.modules.NagSearch = P.Module.extend({}), P.modules.NagSearch.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.NagSecurity"), goog.require("P.Module"), goog.require("P.modules.NagBase"), P.modules.NagSecurity = P.modules.NagBase.extend({
    onContentReady: function() {
        this.showWriteBanned()
    },
    events: {
        "click .resetPassword": "clickHandler"
    },
    clickHandler: function() {
        var a = function() {
            var a = P._("Thanks! You should receive a password reset email soon.");
            this.updateNagMessage(a)
        }.bind(this), b = P.resourceFactory.create("UserResetPasswordResource", {
            username_or_email: P.currentUser.attributes.username
        });
        return b.callCreate({
            showError: !1
        }).then(a), !1
    },
    showWriteBanned: function() {
        P.writeban.showWriteBanned(this)
    }
}), P.modules.NagSecurity.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.NagSwitchToMobile"), goog.require("P.Module"), P.modules.NagSwitchToMobile = P.Module.extend({
    onContentReady: function() {
        this.childListen(P.CONST.EVENT_BUTTON_CLICK, this.onButtonClick)
    },
    onButtonClick: function(a) {
        "switchToMobileSite" === a.target.id && (Cookie.unset(P.CONST.COOKIE_FORCE_DESKTOP), P.changeWindowLocation("/", !1))
    }
}), P.modules.NagSwitchToMobile.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.Nags"), goog.require("P.Module"), P.modules.Nags = P.Module.extend({
    onContentReady: function() {
        var a = {};
        a[P.CONST.PUBSUB_TOPIC_NAG_STATE] = this.onNagStateChange, this.pubsubSubscribe(P.CONST.PUBSUB_CHANNEL_SITE, a);
        var b = {};
        b[P.CONST.PUBSUB_TOPIC_MAIN_MODULE_NEW] = this.onMainModuleChange, this.pubsubSubscribe(P.CONST.PUBSUB_CHANNEL_MAIN_MODULE, b)
    },
    onNagStateChange: function(a, b, c) {
        this.$el.toggle(c)
    },
    onMainModuleChange: function(a, b, c) {
        var d = c;
        this.options.main_module_name !== d.className && (this.options.main_module_name = d.className, this.render()), this.options.main_module_options !== d.options && (this.options.main_module_options = d.options, this.render())
    }
}), P.modules.Nags.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.NetworkNotificationItems"), goog.require("P.Module");
var todaysHtml = "<div class='networkNotifDateHeader unseenHeader todayHeader'><span> {{text}} </span></div>", headerHtml = "<div class='networkNotifDateHeader'><span> {{timeSince}} </span></div>", headerClass = ".networkNotifDateHeader";
P.modules.NetworkNotificationItems = P.Module.extend({
    events: {
        addHeaders: "addHeadersToContent"
    },
    onContentReady: function() {
        this.listen(this, "addHeaders", this.addHeadersToContent), this.trigger("addHeaders")
    },
    addHeadersToContent: function() {
        this.$(headerClass).remove();
        var a=!1, b = "", c = P._("Today's stories"), d = P.string.format(todaysHtml, {
            text: c
        }), e = this.$(".networkNotifItem");
        e.each(function() {
            var c = $(this), e = c.data("time"), f = new Date(1e3 * parseInt(e, 10)), g = new Date, h = {
                weekday: "long",
                month: "long",
                day: "numeric"
            }, i = P.dateToLocaleString(g, h), j = P.dateToLocaleString(f, h);
            i === j && c.addClass("unseen"), i !== j || a ? j !== b && $(headerHtml.replace("{{timeSince}}", j)).insertBefore(c) : ($(d).insertBefore(c), a=!0), b = j
        })
    }
}), P.modules.NetworkNotificationItems.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.NetworkNotifications"), goog.require("P.Module");
var NETWORK_MIN_THRESHOLD = 300;
P.modules.NetworkNotifications = P.Module.extend({
    events: {
        "click .networkNotifItem": "onNetworkNotificationClick"
    },
    mixins: [P.Mixins.PreventScroll],
    onCreated: function() {
        this.onNetworkNotificationsScroll = this.onNetworkNotificationsScroll.bind(this), this.onNetworkNotificationsScroll = _.throttle(this.onNetworkNotificationsScroll, 200)
    },
    onContentReady: function() {
        this.scrollableElement = this.$(".networkNotifContent"), this._scrollListener = this.listen(this.scrollableElement, "scroll", this.onNetworkNotificationsScroll), this.startPreventScroll(this.scrollableElement, this.$(".NetworkNotificationItems")), this.parent && this.listen(this.parent, P.CONST.EVENT_DROPDOWN_HIDE, this.onHide)
    },
    onHide: function() {
        this.$(".unseen").removeClass("unseen")
    },
    onNetworkNotificationsScroll: function() {
        if (!this.rendering) {
            var a = this.$(".NetworkNotificationItems"), b = a.height() + a.position().top - this.scrollableElement.height();
            return b <= NETWORK_MIN_THRESHOLD && this.fetchMore(), !1
        }
    },
    onNetworkNotificationClick: function(a) {
        var b = $(a.target), c = $(a.currentTarget), d = c.attr("data-url");
        return b.is("a")?!0 : void(d && this.navigate(d))
    },
    fetchMore: function() {
        if (!this.rendering) {
            if (this.resource.atEnd())
                return void this.removeListener(this._scrollListener);
            this.rendering=!0, this.getChildById("items").renderAdditional(P.ModuleRenderType.APPEND).then(function() {
                this.rendering=!1, this.addHeadersToChildContent()
            }.bind(this))
        }
    },
    addHeadersToChildContent: function() {
        var a = this.$(".NetworkNotificationItems");
        $(a).trigger("addHeaders")
    }
}), P.modules.NetworkNotifications.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.NetworkStoryInfoBar"), goog.require("P.Module"), P.modules.NetworkStoryInfoBar = P.Module.extend({}), P.modules.NetworkStoryInfoBar.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.NetworkStoryLandingPage"), goog.require("P.Module"), P.modules.NetworkStoryLandingPage = P.Module.extend({}), P.modules.NetworkStoryLandingPage.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.NotificationItems"), goog.require("P.Module"), P.modules.NotificationItems = P.Module.extend({}), P.modules.NotificationItems.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.NotificationSettings"), goog.require("P.Module");
var CLASS_EMAIL_DISABLED = "emailDisabled", CLASS_EMAIL_SETTINGS = "emailSettings", MODULE_ID_EMAIL_GLOBAL_TOGGLE = "emailGlobalToggle";
P.modules.NotificationSettings = P.Module.extend({
    onContentReady: function() {
        this.$form = this.$("form");
        var a = new P.Form(this.$form, []);
        this.listen(a, P.CONST.EVENT_SUBMIT_VALIDATED, this.onSubmitValidated), this.childListen(P.CONST.EVENT_CHANGE, this.onChildChange)
    },
    updateResource: function() {
        var a = {}, b = {};
        this.$(".pushNotifSettings input[type=checkbox]").each(function() {
            var a = $(this), c = a.attr("name");
            b[c.substr(5)] = a.is(":checked") ? "anyone" : "none"
        }), a.push_settings = JSON.stringify(b), a.filter_settings = this.$("input[name=filter_settings]:checked").val();
        var c = P.resourceFactory.create("NotificationSettingsResource", a);
        return c.callUpdate()
    },
    onSubmitValidated: function() {
        this.showLoading(!0);
        var a = this.updateResource();
        return this.isInModal() && (a = a.then(function() {
            this.destroy()
        }.bind(this))), a.fin(this.hideLoading.bind(this)), !1
    },
    onChildChange: function(a) {
        var b = a.target;
        b.id === MODULE_ID_EMAIL_GLOBAL_TOGGLE && (b.isChecked() ? this.setEmailsEnabled(!0) : this.confirmDisableEmails())
    },
    confirmDisableEmails: function() {
        var a = {
            name: "ConfirmDialog",
            options: {
                template: "disable_emails_confirm"
            }
        };
        P.loadModule(a).then(function(a) {
            this.showInModal(a);
            var b = this.listen(a, P.CONST.EVENT_DESTROYED, function() {
                var a = this.getChildById(MODULE_ID_EMAIL_GLOBAL_TOGGLE);
                a.setChecked(!0)
            });
            this.listen(a, P.CONST.EVENT_CONFIRM, function() {
                this.setEmailsEnabled(!1), this.removeListener(b)
            })
        }.bind(this))
    },
    setEmailsEnabled: function(a) {
        var b = P.resourceFactory.create("UserSettingsResource", {
            email_enabled: a
        }), c = this.$("." + CLASS_EMAIL_SETTINGS);
        c.toggleClass(CLASS_EMAIL_DISABLED, !a), b.callUpdate()
    }
}), P.modules.NotificationSettings.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.Notifications"), goog.require("P.Module");
var ACTOR_ID_ATTR = "data-actor-id", MIN_THRESHOLD = 300;
P.modules.Notifications = P.Module.extend({
    events: {
        "mouseover .notifMessage a": "onActorMouseover",
        "click .notifItem": "onNotificationClick"
    },
    mixins: [P.Mixins.PreventScroll],
    onCreated: function() {
        this.onNotificationsScroll = this.onNotificationsScroll.bind(this), this.onNotificationsScroll = _.throttle(this.onNotificationsScroll, 200)
    },
    onContentReady: function() {
        this.scrollableElement = this.$(".notifContent"), this._scrollListener = this.listen(this.scrollableElement, "scroll", this.onNotificationsScroll), this.startPreventScroll(this.scrollableElement, this.$(".NotificationItems")), this.parent && this.listen(this.parent, P.CONST.EVENT_DROPDOWN_HIDE, this.onHide)
    },
    onHide: function() {
        this.$(".unseen").removeClass("unseen")
    },
    onActorMouseover: function(a) {
        var b = $(a.target), c = b.attr(ACTOR_ID_ATTR);
        this.setActiveUser(c, b.parents(".notifItem"))
    },
    onNotificationClick: function(a) {
        var b = $(a.target), c = $(a.currentTarget), d = c.attr("data-url");
        return b.is("a")?!0 : void(d && this.navigate(d))
    },
    onNotificationsScroll: function() {
        if (!this.rendering) {
            var a = this.$(".NotificationItems"), b = a.height() + a.position().top - this.scrollableElement.height();
            return b <= MIN_THRESHOLD && this.fetchMore(), !1
        }
    },
    fetchMore: function() {
        if (!this.rendering) {
            if (this.resource.atEnd())
                return void this.removeListener(this._scrollListener);
            this.rendering=!0, this.getChildById("items").renderAdditional(P.ModuleRenderType.APPEND).then(function() {
                this.rendering=!1
            }.bind(this))
        }
    },
    setActiveUser: function(a, b) {
        b.find(".actorImage, .notifComment").each(function() {
            var b = $(this);
            b.toggleClass("active", b.attr(ACTOR_ID_ATTR) === a)
        })
    }
}), P.modules.Notifications.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.NuxImagesFeedPage"), goog.require("P.Module"), P.modules.NuxImagesFeedPage = P.Module.extend({}), P.modules.NuxImagesFeedPage.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.NuxPinCreate"), goog.require("P.Module"), P.modules.NuxPinCreate = P.Module.extend({}), P.modules.NuxPinCreate.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.NuxTutorial"), goog.require("P.Module"), P.modules.NuxTutorial = P.Module.extend({}), P.modules.NuxTutorial.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.OAuthPage"), goog.require("P.modules.OAuthPageBase"), P.modules.OAuthPage = P.modules.OAuthPageBase.extend({
    events: {
        "click .authorizeApp": "onAuthorizeButtonClicked",
        "click .joinButton": "onJoinButtonClicked"
    },
    onJoinButtonClicked: function() {
        P.navigate("/join/register/email/?next=" + encodeURIComponent(P.getCurrentUrl()))
    }
}), P.modules.OAuthPage.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.OldToast"), goog.require("P.modules.PositionModule"), P.modules.OldToast = P.modules.PositionModule.extend({
    render: function() {
        return $(document.body).append(this.$el), this.triggerEvent(P.CONST.EVENT_OLD_TOAST_RENDER, null, !0), P.Module.prototype.render.apply(this, arguments)
    },
    onContentReady: function() {
        this.fadeIn(), P.setTimeout(function() {
            this.fadeOut(function() {
                this.destroy()
            }.bind(this))
        }.bind(this), 4e3)
    }
}), P.modules.OldToast.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.PasswordResetOneClick"), goog.require("P.Module"), P.modules.PasswordResetOneClick = P.Module.extend({
    onCreated: function() {
        this.childListen(P.CONST.EVENT_BUTTON_CLICK, this.onResetPassword)
    },
    onSuccess: function() {
        this.$(".message").hide(), this.$(".successMessage").show()
    },
    onResetPassword: function(a) {
        if ("resetPasswordButton" === a.target.id) {
            var b = {
                username_or_email: this.options.username_or_email
            }, c = P.resourceFactory.create("UserResetPasswordResource", b), d = this.getChildById("resetPasswordButton");
            d.showLoading(), c.callCreate({
                showError: !1
            }).then(function() {
                this.onSuccess()
            }.bind(this)).fin(function() {
                d.hideLoading()
            })
        }
    }
}), P.modules.PasswordResetOneClick.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.PinActionBar"), goog.require("P.Module"), goog.require("P.modules.IncrementingNavigateButton");
var ACTION_LEFT_ROUNDED_CLASS = "leftRounded", LIKES_BUTTON_ID = "likesButton", REPINS_BUTTON_ID = "repinsButton", PIN_IT_BUTTON_ID = "pinItButton";
P.modules.PinActionBar = P.Module.extend({
    events: {
        "click .repin": "onRepinClicked"
    },
    onContentReady: function() {
        P.Module.prototype.onContentReady.apply(this, arguments);
        var a = this.options.pin_id;
        if (a) {
            var b = {};
            b[P.CONST.PUBSUB_TOPIC_PIN_LIKED] = this.onPinLiked, b[P.CONST.PUBSUB_TOPIC_PIN_UNLIKED] = this.onPinUnliked, b[P.CONST.PUBSUB_TOPIC_PIN_REPINNED] = this.onPinRepinned, this.pubsubSubscribe(a, b)
        }
        this.childListen(P.CONST.EVENT_INCREMENT_BUTTON_DESTROY, this.onCloseupIncrementButtonHide), this.childListen(P.CONST.EVENT_INCREMENT_BUTTON_CREATE, this.onCloseupIncrementButtonShow), this.childListen(P.CONST.EVENT_REQUIRES_AUTHENTICATION, function(a) {
            a.data.contextualResource || (a.data.contextualResource = this.getContextualResource())
        }), this.extraData && this.extraData.showPinTip && this.showSavePinTooltip(), this.model && this.listenToOnce(this.model, "change:serving_link", function() {
            this.renderExistingData()
        }.bind(this))
    },
    removeDropdowns: function() {
        var a = this.getDropdowns();
        _.each(a, function(a) {
            a.hide()
        })
    },
    showSavePinTooltip: function() {
        var a = this.getChildById("pinItButton"), b = P._("<strong>Want to save this Pin for yourself?</strong> Go ahead and Pin It.");
        this.extraData.unauthPinCloseupDisplayData && this.extraData.unauthPinCloseupDisplayData.copy && (b = this.extraData.unauthPinCloseupDisplayData.copy);
        var c = {
            name: "Dropdown",
            options: {
                anchor: a.$el,
                class_name: "large",
                fixed: !1,
                position_point: "BOTTOM_LEFT",
                text: b
            }
        };
        P.loadModule(c).then(function(a) {
            a.render().then(function() {
                $("body").append(a.$el), a.fadeIn()
            })
        })
    },
    getDropdowns: function() {
        var a = this.getChildrenByModuleName("Dropdown") || [], b = this.getChildrenByModuleName("DropdownButton");
        return _.each(b, function(b) {
            var c = b.getDropdown();
            a.push(c)
        }), a
    },
    getContextualResource: function() {
        return P.resourceFactory.create("PinResource", {
            id: this.options.pin_id
        })
    },
    showRepinModal: function() {
        var a = this.getChildById(PIN_IT_BUTTON_ID);
        a.showModal()
    },
    getLoadingSpinnerOptions: function() {
        return null
    },
    onRepinClicked: function() {
        if (this.extraData.inUnauthPinCloseup) {
            P.trackRegisterAction("repin_click");
            var a = P.ExperienceManager.instance(), b = P.Experiences.Placement.WEB_PIN_CLOSEUP, c = P.Experiences.Experience.WEB_UNAUTH_PIN_CLOSEUP;
            a.completePlacedExperience(b, c)
        }
    },
    onPinRepinned: function(a, b, c) {
        var d = this.getChildById(REPINS_BUTTON_ID);
        c.board && "secret" !== c.board.privacy && d && d.increment()
    },
    onPinLiked: function() {
        var a = this.getChildById(LIKES_BUTTON_ID);
        a && a.increment()
    },
    onPinUnliked: function() {
        var a = this.getChildById(LIKES_BUTTON_ID);
        a && a.decrement()
    },
    onCloseupIncrementButtonHide: function(a) {
        var b = a.data, c = this.getChildById(b);
        c.$el.removeClass(ACTION_LEFT_ROUNDED_CLASS)
    },
    onCloseupIncrementButtonShow: function(a) {
        var b = a.data, c = this.getChildById(b);
        c.$el.addClass(ACTION_LEFT_ROUNDED_CLASS)
    },
    setDropdownsFixed: function(a) {
        var b = this.getDropdowns();
        _.each(b, function(b) {
            var c = _.clone(b.options);
            c.fixed = a, b.setOptions(c), b.positionModule()
        })
    },
    updateSticky: function(a) {
        this._sticky || (this._sticky = new P.Sticky(this.$el, a), this.listen(this._sticky, P.CONST.EVENT_STICKY_FIXED, function(a) {
            this.setDropdownsFixed(a)
        }))
    },
    unsticky: function() {
        this._sticky && this._sticky.unSticky()
    },
    getLoggingObjectIdStr: function() {
        return this.options.pin_id
    }
}), P.modules.PinActionBar.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/PinActionBar/PinActionBar.nunjucks"), goog.provide("P.modules.PinBookmarklet"), goog.require("P.Module"), P.modules.PinBookmarklet = P.Module.extend({
    onCreated: function() {
        this.childListen(P.CONST.EVENT_NAVIGATE, this.onChildNavigate)
    },
    onAddedToDom: function() {
        this._windowMessageListener = this.listen($(window), "message", this.onWindowMessage)
    },
    onRemovedFromDom: function() {
        this._windowMessageListener && (this.removeListener(this._windowMessageListener), this._windowMessageListener = null)
    },
    _parseDataUri: function(a) {
        var b = /^data:(.+\/.+);(.+),(.*)$/, c = a.match(b);
        return c ? {
            contentType: c[1],
            encoding: c[2],
            payload: c[3]
        } : null
    },
    onWindowMessage: function(a) {
        var b = a.originalEvent.data;
        if (b && "pinImageData" === b.type) {
            var c = b.dataUri;
            if (!c)
                return void P.showError(P._("Missing image data"));
            var d = this._parseDataUri(c);
            if (!d)
                return void P.showError(P._("Invalid image data uri"));
            if ("base64" !== d.encoding)
                return void P.showError(P._("The image data URI uses an unsupported encoding"));
            var e = P.resourceFactory.create("ImagePreviewResource", {
                content_type: d.contentType,
                base64_payload: d.payload
            });
            e.callCreate().then(function(a) {
                var b = a.resource_response.data.image_url;
                this._setImage(b)
            }.bind(this))
        }
    },
    _setImage: function(a) {
        this.options.image_url = a;
        var b = this.getChildById("pinCreate");
        b.setImage(a)
    },
    onContentReady: function() {
        this.resizeWindowToFit();
        var a = this.options.image_url;
        !a && window.opener && window.opener.postMessage("pinterestReady", "*")
    },
    onChildRemoved: function() {
        this.children.length ? this.resizeWindowToFit() : window.close()
    },
    onChildNavigate: function(a) {
        var b=!0;
        P.changeWindowLocation(a.data.url, b), window.close()
    },
    resizeWindowToFit: function() {
        P.getWindowManager().shrinkWrap()
    }
}), P.modules.PinBookmarklet.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.PinCloseupSettings"), goog.require("P.Module"), P.modules.PinCloseupSettings = P.Module.extend({}), P.modules.PinCloseupSettings.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.PinComment"), goog.require("P.Module"), P.modules.PinComment = P.Module.extend({
    onCreated: function() {
        this.childListen("commentDeleteSuccess", this.onPinCommentDelete)
    },
    onPinCommentDelete: function() {
        this.$el.slideUp(300, function() {
            this.destroy()
        }.bind(this))
    }
}), P.modules.PinComment.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/PinComment/PinComment.nunjucks"), goog.provide("P.modules.PinCommentList"), goog.require("P.Module"), goog.require("P.modules.PinCommentListBase"), P.modules.PinCommentList = P.modules.PinCommentListBase.extend({
    events: _.extend(P.modules.PinCommentListBase.prototype.events, {
        "mousedown .content": "onTextAreaMouseDown",
        "keydown .content": "onTextAreaPossiblyResized",
        "mouseup .content": "onTextAreaPossiblyResized"
    }),
    onTextAreaMouseDown: function() {
        this.commentContentHeight = this.$(".content").height()
    },
    onTextAreaPossiblyResized: function() {
        if (null !== this.commentContentHeight) {
            var a = this.$(".content").height();
            this.commentContentHeight !== a && (this.triggerEvent(P.CONST.EVENT_DIMS_CHANGED, null, !0), this.commentContentHeight = a)
        }
    }
}), P.modules.PinCommentList.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/PinCommentList/PinCommentList.nunjucks"), goog.provide("P.modules.PinCounts"), goog.require("P.Module");
var PIN_COUNTS_CLASS_HIDDEN = "hidden";
P.modules.PinCounts = P.Module.extend({
    events: {
        "click .commentsIcon": "_onCommentsClick"
    },
    onContentReady: function() {
        this.pinId = this.options.pin_id, this.repinCount = this.data.repin_count, this.likeCount = this.data.like_count, this.commentCount = this.data.comment_count;
        var a = {};
        a[P.CONST.PUBSUB_TOPIC_PIN_COMMENT_CREATED] = this._onPinCommentCreated, a[P.CONST.PUBSUB_TOPIC_PIN_COMMENT_DELETED] = this._onPinCommentDeleted, a[P.CONST.PUBSUB_TOPIC_PIN_LIKED] = this._onPinLiked, a[P.CONST.PUBSUB_TOPIC_PIN_UNLIKED] = this._onPinUnliked, a[P.CONST.PUBSUB_TOPIC_PIN_REPINNED] = this._onPinRepinned, this.pubsubSubscribe(this.pinId, a)
    },
    _onCommentsClick: function(a) {
        a.preventDefault(), this.triggerEvent(P.CONST.EVENT_PIN_COMMENTS_TOGGLED, null, !0)
    },
    _updateCountEl: function(a, b) {
        a.text(b.toString());
        var c = a.parent();
        b ? c.removeClass(PIN_COUNTS_CLASS_HIDDEN) : c.addClass(PIN_COUNTS_CLASS_HIDDEN)
    },
    _setLikeCount: function(a) {
        this.likeCount = a, this._updateCountEl(this.$(".likes"), a)
    },
    _setCommentCount: function(a) {
        this.commentCount = a, this._updateCountEl(this.$(".comments"), a)
    },
    _setRepinCount: function(a) {
        this.repinCount = a, this._updateCountEl(this.$(".repins"), a)
    },
    _onPinCommentCreated: function() {
        this._setCommentCount(this.commentCount + 1)
    },
    _onPinCommentDeleted: function() {
        this._setCommentCount(this.commentCount - 1)
    },
    _onPinLiked: function() {
        this._setLikeCount(this.likeCount + 1)
    },
    _onPinUnliked: function() {
        this._setLikeCount(this.likeCount - 1)
    },
    _onPinRepinned: function(a, b, c) {
        c.board && c.board.privacy !== P.CONST.BOARD_PRIVACY_SECRET && this._setRepinCount(this.repinCount + 1)
    }
}), P.modules.PinCounts.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.PinCreateSuccess"), goog.require("P.Module");
var CLOSE_DELAY_DEFAULT = 2e3, CLOSE_DELAY_WITH_RELATED_DATA = 1e4, CLOSE_DELAY_AFTER_FOLLOW = 1e3, BUTTON_ID_INSTALL_EXTENSION_BUTTON = "installExtensionButton", BUTTON_ID_CANCEL_INSTALL_EXTENSION_BUTTON = "cancelInstallButton", BUTTON_ID_GOT_IT_BUTTON_DOMAIN = "gotItButtonDomain", BUTTON_ID_GOT_IT_BUTTON_ODD_CONTENTS = "gotItButtonOddContents", BUTTON_ID_GOT_IT_BUTTON_CATEGORY_BOXED = "gotItButtonCategoryBoxed", BUTTON_ID_GOT_IT_BUTTON_BOARD_BOXED = "gotItButtonBoardBoxed", BUTTON_ID_DISMISS_ALL_PROMOS_BUTTON = "dismissAllPromos";
P.modules.PinCreateSuccess = P.Module.extend({
    onContentReady: function() {
        var a = P.getQueryStringParams().guid;
        a && P.logWidgetEvent({
            guid: a,
            pin_id: this.options.pin_id
        });
        var b = CLOSE_DELAY_DEFAULT, c=!1, d = this.getChildById("successBoard");
        if (d && d.hasBoard()) {
            b = CLOSE_DELAY_WITH_RELATED_DATA, c=!0;
            var e = {};
            e[P.CONST.PUBSUB_TOPIC_USER_FOLLOW] = this.onBoardFollow, this.pubsubSubscribe(d.getBoardId(), e)
        }
        var f = this.getChildById("successPromo");
        if (f&&!f.isValid())
            return void this.destroy();
        var g = this.getChildById(BUTTON_ID_INSTALL_EXTENSION_BUTTON);
        g && this.childListen(P.CONST.EVENT_BUTTON_CLICK, this.onInstallExtensionButtonClick);
        var h = this.getChildById(BUTTON_ID_CANCEL_INSTALL_EXTENSION_BUTTON), i = this.getChildById(BUTTON_ID_GOT_IT_BUTTON_DOMAIN), j = this.getChildById(BUTTON_ID_GOT_IT_BUTTON_ODD_CONTENTS), k = this.getChildById(BUTTON_ID_GOT_IT_BUTTON_CATEGORY_BOXED), l = this.getChildById(BUTTON_ID_GOT_IT_BUTTON_BOARD_BOXED);
        (h || i || j || k || l) && (this.childListen(P.CONST.EVENT_BUTTON_CLICK, this.onGotItButtonClick), b = CLOSE_DELAY_WITH_RELATED_DATA);
        var m = this.getChildById(BUTTON_ID_DISMISS_ALL_PROMOS_BUTTON);
        m && this.childListen(P.CONST.EVENT_BUTTON_CLICK, this.onDismissAllPromosButtonClick), h ? this._viewWebPinSuccessExperience(P.Experiences.Experience.WEB_PIN_SUCCESS_NEW_EXTENSION_UPSELL) : i ? this._viewWebPinSuccessExperience(P.Experiences.Experience.WEB_PIN_SUCCESS_EXTENSION_ED_DOMAIN) : j ? this._viewWebPinSuccessExperience(P.Experiences.Experience.WEB_PIN_SUCCESS_EXTENSION_ED_ODD_CONTENTS) : k ? this._viewWebPinSuccessExperience(P.Experiences.Experience.WEB_PIN_SUCCESS_EXTENSION_ED_CATEGORY_BOXED) : l && this._viewWebPinSuccessExperience(P.Experiences.Experience.WEB_PIN_SUCCESS_EXTENSION_ED_BOARD_BOXED), c || this.$el.addClass("noBody"), P.ExperienceManager.instance().isPlacedExperience(P.Experiences.Placement.WEB_PIN_SUCCESS, P.Experiences.Experience.WEB_PIN_SUCCESS_EXTENSION_UPSELL) && "bookmarklet" === this.options.method && (b = CLOSE_DELAY_WITH_RELATED_DATA), this.options.auto_close!==!1 && this.closeOnDelay(b), P.ExperienceManager.instance().completePlacedExperience(P.Experiences.Placement.WEB_PIN_CLOSEUP, P.Experiences.Experience.WEB_PIN_CLOSEUP_LITE)
    },
    closeOnDelay: function(a) {
        this.closeTimer && clearTimeout(this.closeTimer), this.closeTimer = P.setTimeout(function() {
            this.closeTimer = null, this.destroy()
        }.bind(this), a)
    },
    onInstallExtensionButtonClick: function(a) {
        var b = a.target;
        b.id === BUTTON_ID_INSTALL_EXTENSION_BUTTON && (P.browserExtension.instance.handleExtensionInstall(P.NOOP, P.NOOP), this._completeWebPinSuccessExperience(P.Experiences.Experience.WEB_PIN_SUCCESS_NEW_EXTENSION_UPSELL))
    },
    onGotItButtonClick: function(a) {
        var b, c = a.target;
        c.id === BUTTON_ID_CANCEL_INSTALL_EXTENSION_BUTTON ? b = P.Experiences.Experience.WEB_PIN_SUCCESS_NEW_EXTENSION_UPSELL : c.id === BUTTON_ID_GOT_IT_BUTTON_DOMAIN ? b = P.Experiences.Experience.WEB_PIN_SUCCESS_EXTENSION_ED_DOMAIN : c.id === BUTTON_ID_GOT_IT_BUTTON_ODD_CONTENTS ? b = P.Experiences.Experience.WEB_PIN_SUCCESS_EXTENSION_ED_ODD_CONTENTS : c.id === BUTTON_ID_GOT_IT_BUTTON_CATEGORY_BOXED ? b = P.Experiences.Experience.WEB_PIN_SUCCESS_EXTENSION_ED_CATEGORY_BOXED : c.id === BUTTON_ID_GOT_IT_BUTTON_BOARD_BOXED && (b = P.Experiences.Experience.WEB_PIN_SUCCESS_EXTENSION_ED_BOARD_BOXED), this._completeWebPinSuccessExperience(b)
    },
    onDismissAllPromosButtonClick: function(a) {
        var b = a.target;
        b.id === BUTTON_ID_DISMISS_ALL_PROMOS_BUTTON && (this._completeWebPinSuccessExperience(P.Experiences.Experience.WEB_PIN_SUCCESS_NEW_EXTENSION_UPSELL), this._completeWebPinSuccessExperience(P.Experiences.Experience.WEB_PIN_SUCCESS_EXTENSION_ED_DOMAIN), this._completeWebPinSuccessExperience(P.Experiences.Experience.WEB_PIN_SUCCESS_EXTENSION_ED_ODD_CONTENTS), this._completeWebPinSuccessExperience(P.Experiences.Experience.WEB_PIN_SUCCESS_EXTENSION_ED_CATEGORY_BOXED), this._completeWebPinSuccessExperience(P.Experiences.Experience.WEB_PIN_SUCCESS_EXTENSION_ED_BOARD_BOXED))
    },
    _viewWebPinSuccessExperience: function(a) {
        if (a) {
            var b = P.ExperienceManager.instance().constructPlacedExperienceId(P.Experiences.Placement.WEB_PIN_SUCCESS, a);
            P.ExperienceManager.instance().viewPlacedExperienceId(b)
        }
    },
    _completeWebPinSuccessExperience: function(a) {
        if (a) {
            var b = P.ExperienceManager.instance().constructPlacedExperienceId(P.Experiences.Placement.WEB_PIN_SUCCESS, a);
            P.ExperienceManager.instance().completePlacedExperienceId(b)
        }
    },
    onBoardFollow: function() {
        this.closeOnDelay(CLOSE_DELAY_AFTER_FOLLOW)
    },
    onDestroyed: function() {
        "pin_create_ignition" === this.options.action && P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_TUTORIAL, P.CONST.PUBSUB_TOPIC_TUTORIAL_NEXT)
    }
}), P.modules.PinCreateSuccess.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.PinCreateSuccessBoard"), goog.require("P.Module"), P.modules.PinCreateSuccessBoard = P.Module.extend({
    onContentReady: function() {
        this.hasBoard || this.hide()
    },
    hasBoard: function() {
        return !!this.getChildById("board")
    },
    getBoardId: function() {
        return this.extraData.boardId
    }
}), P.modules.PinCreateSuccessBoard.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.PinCreateSuccessExtensionNag"), goog.require("P.Module"), goog.require("P.Experiences"), P.modules.PinCreateSuccessExtensionNag = P.Module.extend({
    events: {
        "click .getNewPinItButton": "onGetNewPinItButtonClick"
    },
    onGetNewPinItButtonClick: function() {
        this._completeExperience()
    },
    onContentReady: function() {
        this._viewExperience()
    },
    _viewExperience: function() {
        P.trackGAEvent("web_pin_success_extension_upsell", "viewed");
        var a = P.ExperienceManager.instance();
        a.viewPlacedExperience(P.Experiences.Placement.WEB_PIN_SUCCESS, P.Experiences.Experience.WEB_PIN_SUCCESS_EXTENSION_UPSELL)
    },
    _completeExperience: function() {
        P.trackGAEvent("web_pin_success_extension_upsell", "completed");
        var a = P.ExperienceManager.instance();
        a.completePlacedExperience(P.Experiences.Placement.WEB_PIN_SUCCESS, P.Experiences.Experience.WEB_PIN_SUCCESS_EXTENSION_UPSELL)
    }
}), P.modules.PinCreateSuccessExtensionNag.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.PinCreateSuccessPins"), goog.require("P.Module"), P.modules.PinCreateSuccessPins = P.Module.extend({
    onContentReady: function() {
        this.isEmpty() && this.hide()
    },
    isEmpty: function() {
        if (!this.contentReady)
            return !1;
        var a = this.getChildById("relatedPinsFeed");
        return !a ||!a.hasItems()
    }
}), P.modules.PinCreateSuccessPins.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.PinCreateSuccessPromoBase"), goog.require("P.Module"), P.modules.PinCreateSuccessPromoBase = P.Module.extend({
    isValid: function() {
        return !0
    }
}), P.modules.PinCreateSuccessPromoBase.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/PinCreateSuccessPromoBase/PinCreateSuccessPromoBase.nunjucks"), goog.provide("P.modules.PinDeleteCommentButton"), goog.require("P.Module"), goog.require("P.modules.InlineHoverButton"), P.modules.PinDeleteCommentButton = P.modules.InlineHoverButton.extend({
    events: {
        click: "onClick"
    },
    showConfirmation: function() {
        var a = {
            name: "ConfirmDialog",
            options: {
                template: "delete_comment"
            }
        };
        P.loadModule(a).then(function(a) {
            this.showInModal(a), this.listen(a, P.CONST.EVENT_CONFIRM, this.onDeleteConfirm)
        }.bind(this))
    },
    onDeleteConfirm: function() {
        P.trackGAEvent("comment_delete", P.CONST.GA_ACTION_CLICK_SUBMIT);
        var a = {
            pin_id: this.options.pin_id,
            comment_id: this.options.comment_id
        }, b = P.resourceFactory.create("PinCommentResource", a);
        b.callDelete().then(function() {
            P.trackGAEvent("comment_delete", P.CONST.GA_ACTION_SUCCESS), this.triggerEvent("commentDeleteSuccess", this, !0), P.pubsub.publish(this.options.pin_id, P.CONST.PUBSUB_TOPIC_PIN_COMMENT_DELETED)
        }.bind(this), function() {
            P.trackGAEvent("comment_delete", P.CONST.GA_ACTION_ERROR)
        })
    },
    onClick: function() {
        P.trackGAEvent("comment_delete", P.CONST.GA_ACTION_OPEN_MODAL), this.showConfirmation()
    }
}), P.modules.PinDeleteCommentButton.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.PinDragAndDrop"), goog.require("P.Module"), goog.require("P.spinner"), P.modules.PinDragAndDrop = P.Module.extend({
    events: {
        dragdrop: "onOverlayDrop",
        drop: "onOverlayDrop",
        dragleave: "onOverlayLeave",
        click: "onOverlayLeave"
    },
    onOverlayDrop: function(a) {
        a.preventDefault();
        var b = a.originalEvent.dataTransfer && a.originalEvent.dataTransfer.files;
        if (!b ||!b.length)
            return void this.removeOverlay();
        if (!(new XMLHttpRequest).upload)
            return void this.removeOverlay();
        var c = new FormData;
        c.append("img", b[0]);
        var d = new XMLHttpRequest;
        d.open("POST", P.absolutify("/upload-image/")), d.setRequestHeader("Cache-Control", "no-cache"), d.setRequestHeader("X-CSRFToken", P.csrf.getCSRFToken()), d.onload = function() {
            200 === d.status ? (this._uploadingFilesSpinner.stop(), this.ensurePinCreate(JSON.parse(d.responseText).image_url)) : this.removeOverlay()
        }.bind(this), this._uploadingFilesSpinner = new P.Spinner({
            size: P.Spinner.Size.MEDIUM
        }), this._uploadingFilesSpinner.spin(this.$el), this.$(".overlayText").hide(), d.send(c)
    },
    onOverlayLeave: function(a) {
        a.preventDefault(), this.removeOverlay()
    },
    removeOverlay: function() {
        this.destroy()
    },
    ensurePinCreate: function(a) {
        var b = {
            name: "PinUploader",
            options: {}
        };
        this.removeOverlay(), P.loadModule(b).then(function(b) {
            b.imageUrl = a, b.ensurePinCreate()
        })
    }
}), P.modules.PinDragAndDrop.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.PinDupWarning"), goog.require("P.Module"), P.modules.PinDupWarning = P.Module.extend({
    onContentReady: function() {
        P.Module.prototype.onContentReady.apply(this, arguments), this.model && this.listenToOnce(this.model, "change:pinned_to_board", function() {
            this.renderExistingData()
        }.bind(this))
    }
}), P.modules.PinDupWarning.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/PinDupWarning/PinDupWarning.nunjucks"), goog.provide("P.modules.PinEdit"), goog.require("P.Module"), goog.require("P.modules.PinEditBase"), P.modules.PinEdit = P.modules.PinEditBase.extend({
    onContentReady: function() {
        if (P.autologin.checkForAutologin()) {
            var a = P._("To edit your Pin, please take a second to confirm it's really you.");
            return P.autologin.showLoginErrorDialog(this, a), void this.destroy()
        }
        this.pinForm = this.getChildById("pinForm"), this.childListen(P.CONST.EVENT_ITEM_SELECTED, this.onPlaceTypeaheadItemSelected), this.refreshOnSave=!1, this.listen(this.pinForm, P.CONST.EVENT_SUBMIT_VALIDATED, this.onSubmitValidated), this.childListen(P.CONST.EVENT_BUTTON_CLICK, this._onButtonClick)
    },
    onPlaceTypeaheadItemSelected: function(a) {
        var b = a.data.item, c = b.get("id");
        this.$(".pinPlaceId").val(c)
    },
    onSubmitValidated: function(a) {
        var b = a.data;
        b.errors[0] || (this.needConfirm() ? this.showPrivacyChangeConfirmation() : this.savePin())
    },
    needConfirm: function() {
        var a = this.data.board.privacy, b = this.pinForm.getBoardPicker(), c = b.getSelectedBoardPrivacy();
        return a === P.CONST.BoardPrivacy.SECRET && c === P.CONST.BoardPrivacy.PUBLIC
    },
    showConfirmation: function() {
        var a = {
            name: "ConfirmDialog",
            options: {
                template: "delete_pin",
                ga_category: P.CONST.GA_CATEGORY_PIN_DELETE
            }
        };
        P.loadModule(a).then(function(a) {
            this.showInModal(a), this.listen(a, P.CONST.EVENT_CONFIRM, this.onDeleteConfirm)
        }.bind(this))
    },
    showPrivacyChangeConfirmation: function() {
        var a = {
            name: "ConfirmDialog",
            options: {
                template: "change_pin_privacy"
            }
        };
        P.loadModule(a).then(function(a) {
            this.showInModal(a), this.listen(a, P.CONST.EVENT_CONFIRM, function() {
                P.trackGAEvent(P.CONST.GA_CATEGORY_PIN_EDIT, P.CONST.GA_ACTION_CLICK_CONFIRM), this.savePin()
            })
        }.bind(this))
    }
}), P.modules.PinEdit.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.PinEmail"), goog.require("P.Module"), P.modules.PinEmail = P.Module.extend({
    onContentReady: function() {
        var a = {
            pin: [P.Validator.Required()],
            email: [P.Validator.Required(), P.Validator.Email()],
            recipient_name: [P.Validator.Required()]
        };
        this.formListener && this.removeListener(this.formListener), this.form = new P.Form(this.$("form"), a), this.formListener = this.listen(this.form, P.CONST.EVENT_SUBMIT_VALIDATED, this.onSubmitValidated), this.childListen(P.CONST.EVENT_BUTTON_CLICK, this.onButtonClick)
    },
    onButtonClick: function(a) {
        var b = a.target;
        b && ("submitButton" === b.id ? P.trackGAEvent("pin_email", P.CONST.GA_ACTION_CLICK_SUBMIT) : "cancelButton" === b.id && P.trackGAEvent("pin_email", P.CONST.GA_ACTION_CLICK_CANCEL))
    },
    onSubmitValidated: function(a) {
        a.errors[0] || this.sendEmail()
    },
    sendEmail: function() {
        var a = this.$("form").serializeArray(), b = {}, c = this.getChildById("submitButton");
        _.each(a, function(a) {
            b[a.name] = a.value
        }), c.showLoading();
        var d = {
            name: "ConfirmDialog",
            options: {
                template: "email_pin",
                recipient_name: b.recipient_name
            }
        }, e = P.resourceFactory.create("EmailPinResource", b);
        e.callCreate({
            showError: !1
        }).then(function() {
            P.trackGAEvent("pin_email", P.CONST.GA_ACTION_SUCCESS), P.loadModule(d).then(function(a) {
                this.showInModal(a), this.listen(a, P.CONST.EVENT_CONFIRM, this.destroy)
            }.bind(this))
        }.bind(this), function(a) {
            P.trackGAEvent("pin_email", P.CONST.GA_ACTION_ERROR), P.showError(a.message)
        }).fin(function() {
            c.hideLoading()
        })
    }
}), P.modules.PinEmail.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.PinFlagCommentButton"), goog.require("P.Module"), goog.require("P.modules.InlineHoverButton"), P.modules.PinFlagCommentButton = P.modules.InlineHoverButton.extend({
    events: {
        click: "onClick"
    },
    showReasonModal: function() {
        var a = {
            name: "FlagComment",
            options: {
                pin_id: this.options.pin_id,
                comment_id: this.options.comment_id
            }
        };
        P.loadModule(a).then(function(a) {
            this.showInModal(a)
        }.bind(this))
    },
    onClick: function() {
        P.trackGAEvent("comment_flag", P.CONST.GA_ACTION_OPEN_MODAL), this.showReasonModal()
    }
}), P.modules.PinFlagCommentButton.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.PinPicksLink"), goog.require("P.Module"), P.modules.PinPicksLink = P.Module.extend({}), P.modules.PinPicksLink.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.PinShareButton"), goog.require("P.Module"), P.modules.PinShareButton = P.Module.extend({}), P.modules.PinShareButton.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.PinUploader"), goog.require("P.Module"), P.modules.PinUploader = P.Module.extend({
    onContentReady: function() {
        var a = this.getChildById("uploader");
        this.listen(a, P.CONST.EVENT_UPLOAD_SUCCESS, this.onUploadSuccess), this.listen(a, P.CONST.EVENT_UPLOAD_ERROR, this.onUploadError)
    },
    onUploadSuccess: function(a) {
        P.trackGAEvent("pin_upload", P.CONST.GA_ACTION_SUCCESS), this.imageUrl = a.data.image_url, this.ensurePinCreate()
    },
    onUploadError: function(a) {
        P.trackGAEvent("pin_upload", P.CONST.GA_ACTION_ERROR), P.showError(a.data)
    },
    ensurePinCreate: function() {
        var a = {
            image_url: this.imageUrl,
            action: "upload",
            method: "uploaded"
        };
        this.options.default_board_id && (a.default_board_id = this.options.default_board_id);
        var b = "PinCreate", c = {}, d = {
            name: b,
            options: a,
            id: "pinCreate"
        };
        this.showLoading(), P.loadModule(d).then(function(a) {
            this.hideLoading(), this.showInModal(a, c), this.triggerEvent(P.CONST.EVENT_PIN_CREATE_OPENED, null, !0), this.destroy()
        }.bind(this))
    }
}), P.modules.PinUploader.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.Pinnable"), goog.require("P.modules.PinnableBase");
var CLASS_DISABLED = "disabled", CLASS_SELECTED_ITEM = "selected", ADD_TO_MAP_VIEWTYPE = "add_to_map";
P.modules.Pinnable = P.modules.PinnableBase.extend({
    events: {
        "click a.pinImageWrapper": "onClick",
        click: "onClick"
    },
    enable: function() {
        this.$el.removeClass(CLASS_DISABLED)
    },
    disable: function() {
        this.$el.addClass(CLASS_DISABLED)
    },
    select: function() {
        this._setSelected(!0)
    },
    _setSelected: function(a) {
        this.$el.toggleClass(CLASS_SELECTED_ITEM, a)
    },
    deselect: function() {
        this._setSelected(!1)
    },
    onClick: function() {
        if (this.options.view_type !== ADD_TO_MAP_VIEWTYPE)
            return this.createPin(), !1;
        var a = this.$("img").attr("src");
        this.triggerEvent(P.CONST.EVENT_PLACE_IMAGE_SELECTED, a, !0), this.select()
    },
    createPin: function() {
        var a = {
            image_url: this.options.url,
            action: "create",
            method: "scraped",
            link: this.options.link
        }, b = "PinCreate", c = {}, d = {
            name: b,
            options: a,
            id: "pinCreate"
        };
        P.loadModule(d).then(function(a) {
            this.showInModal(a, c)
        }.bind(this))
    }
}), P.modules.Pinnable.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.PintreeEst"), goog.require("P.Module"), P.modules.PintreeEst = P.Module.extend({}), P.modules.PintreeEst.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.PlaceBoardHeader"), goog.require("P.Module"), goog.require("P.modules.BoardHeader"), P.modules.PlaceBoardHeader = P.modules.BoardHeader.extend({}), P.modules.PlaceBoardHeader.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.PlaceBoardInfoBar"), goog.require("P.Module"), goog.require("P.modules.BoardInfoBar"), P.modules.PlaceBoardInfoBar = P.modules.BoardInfoBar.extend({}), P.modules.PlaceBoardInfoBar.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.PlaceSelector"), goog.require("P.Module"), P.modules.PlaceSelector = P.Module.extend({
    onContentReady: function() {
        this._placeChanged=!1, this.childListen(P.CONST.EVENT_ITEM_SELECTED, this.onItemSelected), this.childListen(P.CONST.EVENT_TYPEAHEAD_SEARCH_START, this.onSearchStart), this.childListen(P.CONST.EVENT_TYPEAHEAD_NO_RESULTS_RETURNED, this.onNoResultsReturned), this.childListen(P.CONST.EVENT_TYPEAHEAD_RESULTS_RETURNED, this.onResultsReturned), this.childListen(P.CONST.EVENT_TYPEAHEAD_HINT, this.onHint)
    },
    onHint: function(a) {
        this.hintData = a.data, this.options.show_hints && this.determineHint()
    },
    determineHint: function() {
        if (this.hintData && this.hintData.length) {
            var a = this.getTypeaheadField();
            if (_.isEmpty(this.results))
                a.setPrependedStaticItems([{
                    template: "hint_no_city",
                    selectable: !1
                }
                ]);
            else {
                var b = this.hintData[0].feature.name, c = b;
                - 1 !== b.indexOf(",") && (c = b.split(",")[0]), a.setPrependedStaticItems([{
                    template: "hint_specific_city",
                    selectable: !1,
                    locality: c,
                    place: b
                }
                ])
            }
        }
    },
    onNoResultsReturned: function(a) {
        this.results = a.data;
        var b = this.getTypeaheadField();
        b.setPrependedStaticItems([]), this.hideTypeaheadLoading()
    },
    getTypeaheadField: function() {
        return this.getChildById("placeField")
    },
    onResultsReturned: function(a) {
        this.results = a.data;
        var b = this.getTypeaheadField();
        b.setPrependedStaticItems([]), this.hideTypeaheadLoading()
    },
    onSearchStart: function() {
        var a = this.getTypeaheadField();
        a.showLoading()
    },
    hideTypeaheadLoading: function() {
        var a = this.getTypeaheadField();
        a.hideLoading()
    },
    getSelectedPlace: function() {
        if (!this._placeChanged)
            return null;
        var a = this.getTypeaheadField();
        if (!a)
            return "0";
        var b = a.getTypeaheadSelectedItem();
        if (!b)
            return "0";
        var c = b.get("id");
        return c ? c : "0"
    },
    focusPlaceField: function() {
        var a = this.getTypeaheadField();
        a.focus()
    },
    onItemSelected: function(a) {
        this._placeChanged=!0;
        var b = a.data.item, c = this.getTypeaheadField(), d = b.get("name");
        c.setValue(d)
    }
}), P.modules.PlaceSelector.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/PlaceSelector/PlaceSelector.nunjucks"), goog.provide("P.modules.Pulser"), goog.require("P.Module");
var PULSER_ANIMATION_STEPS = [{
    transition: {
        scale: .5,
        opacity: 1
    }
}, {
    transition: {
        scale: .6,
        opacity: 1
    },
    time: 200,
    timingFunction: "cubic-bezier(0, 0.55, 0.55, 1.0)"
}, {
    transition: {
        scale: .4
    },
    time: 200,
    timingFunction: "cubic-bezier(0, 0.55, 0.55, 1.0)"
}, {
    transition: {
        scale: .8,
        opacity: 0
    },
    time: 1400,
    timingFunction: "cubic-bezier(0, 0.5, 0, 1)"
}
];
P.modules.Pulser = P.Module.extend({
    events: {
        click: "_onClick"
    },
    onContentReady: function() {
        this._positionPulser(), this.$(".pulserImage").css(PULSER_ANIMATION_STEPS[0].transition), this.options.fixed && this.$el.addClass("fixed"), this.$el.css("visibility", "visible"), this._playAnimation(), window.setInterval(this._playAnimation.bind(this), 2e3), this.listen(P.Viewport, P.CONST.EVENT_RESIZE, this._positionPulser), this.listen(P.Viewport, P.CONST.EVENT_BODY_COLUMN_CHANGE, this._positionPulser)
    },
    _positionPulser: function() {
        var a = this.options.anchor;
        a && P.Positioning.positionElementAtAnchor(this.$el, $(a), P.CONST.PositionPoint.CENTER_CENTER, !!this.options.fixed, !1)
    },
    _onClick: function() {
        this.triggerEvent(P.CONST.EVENT_PULSER_CLICKED, null, !0)
    },
    _playAnimation: function() {
        var a = this.$(".pulserImage");
        a.css(PULSER_ANIMATION_STEPS[0].transition), PULSER_ANIMATION_STEPS.slice(1).forEach(function(b) {
            a = a.transition(b.transition, b.time, b.timingFunction).delay()
        })
    }
}), P.modules.Pulser.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.PushNotificationSettings"), goog.require("P.Module"), P.modules.PushNotificationSettings = P.Module.extend({
    onContentReady: function() {
        this.$form = this.$("form");
        var a = new P.Form(this.$form, {});
        this.listen(a, P.CONST.EVENT_SUBMIT_VALIDATED, this.onSubmitValidated)
    },
    onSubmitValidated: function() {
        var a = {}, b = {};
        this.$(".pushNotifSettings input[type=checkbox]").each(function() {
            var a = $(this), c = a.attr("name");
            b[c.substr(5)] = a.is(":checked") ? "anyone" : "none"
        }), a.push_settings = JSON.stringify(b);
        var c = P.resourceFactory.create("NotificationSettingsResource", a);
        this.showLoading(!0), c.callUpdate().then(function() {
            this.isInModal() && this.destroy()
        }.bind(this)).fin(function() {
            this.hideLoading()
        }.bind(this))
    }
}), P.modules.PushNotificationSettings.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.QAPinQuestion"), goog.require("P.Module"), P.modules.QAPinQuestion = P.Module.extend({}), P.modules.QAPinQuestion.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/QAPinQuestion/QAPinQuestion.nunjucks"), goog.provide("P.modules.Question"), goog.require("P.modules.QuestionBase"), P.modules.Question = P.modules.QuestionBase.extend({
    onContentReady: function() {
        var a = this.data.id, b = {};
        b[P.CONST.PUBSUB_TOPIC_QUESTION_DELETED] = this._onQuestionDeleted, b[P.CONST.PUBSUB_TOPIC_QUESTION_REPORTED] = this._onQuestionReported, b[P.CONST.PUBSUB_TOPIC_QUESTION_LIKED] = this._onQuestionLiked, b[P.CONST.PUBSUB_TOPIC_QUESTION_UNLIKED] = this._onQuestionUnliked, b[P.CONST.PUBSUB_TOPIC_QUESTION_UPDATED] = this._onQuestionUpdated, this.pubsubSubscribe(a, b)
    },
    getQuestionUserName: function() {
        return this.data.created_by_user.full_name
    },
    _onQuestionDeleted: function() {
        this.destroy()
    },
    _onQuestionReported: function() {
        this.destroy()
    },
    _onQuestionUpdated: function() {
        this.render()
    }
}), P.modules.Question.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.QuestionCreate"), goog.require("P.Module"), P.modules.QuestionCreate = P.Module.extend({
    events: {
        "click .suggestions li": "_onSuggestionClick",
        "focus .content": "_onContentFocus"
    },
    onContentReady: function() {
        this._titleFieldContentChangedListener && this.removeListener(this._titleFieldContentChangedListener), this._titleFieldContentChangedListener = this.listen(this._getTitleField(), P.CONST.EVENT_CONTENT_CHANGED, this._onTitleFieldContentChanged), this.$form = this.$("form");
        var a = {
            title: [P.Validator.Length({
                min: 5,
                max: this.extraData.title_max_length
            })]
        }, b = {
            prevalidate: !0
        };
        this.form = new P.Form(this.$form, a, b), this.listen(this.form, P.CONST.EVENT_SUBMIT_VALIDATED, this._onSubmitValidated)
    },
    _onDuplicateQuestionDialogConfirm: function(a) {
        a.stopPropagation();
        var b = {
            questionId: a.target.options.question_id
        };
        this.triggerEvent(P.CONST.EVENT_SEE_QUESTION, b, !0)
    },
    _onSubmitValidated: function(a) {
        if (!a.errors[0]) {
            var b = this._getTitleField().getValue();
            if (this._isTitleQuestion(b))
                return void this._validateExistingQuestionAndPost();
            var c = {
                name: "ConfirmDialog",
                options: {
                    template: "confirm_question_not_comment"
                }
            };
            P.loadModule(c).then(function(a) {
                this.showInModal(a), this.listen(a, P.CONST.EVENT_DIALOG_BUTTON_CLICKED, function(a) {
                    var b = $(a.data);
                    b.hasClass("dialogAskQuestion") ? this._validateExistingQuestionAndPost() : b.hasClass("dialogPostComment") && this._postComment()
                })
            }.bind(this))
        }
    },
    _isTitleQuestion: function(a) {
        return - 1 !== a.indexOf("?")
    },
    _validateExistingQuestionAndPost: function() {
        if (!this._hasValidCanonicalPinId())
            return void this._saveQuestion();
        var a = this._getSubmitButton();
        a.showLoading();
        var b = {
            title: this._getTitleField().getValue(),
            canonical_pin_id: this._getCanonicalPinId()
        }, c = P.resourceFactory.create("QuestionResource", b);
        c.callGet({
            showError: !1
        }).then(function(a) {
            var b = a.resource_response.data;
            if (b) {
                var c = {
                    name: "ConfirmDialog",
                    options: {
                        question_id: b.id,
                        template: "duplicate_question"
                    }
                };
                P.loadModule(c).then(function(a) {
                    this.showInModal(a), this.listen(a, P.CONST.EVENT_CONFIRM, this._onDuplicateQuestionDialogConfirm)
                }.bind(this))
            } else 
                this._saveQuestion()
        }.bind(this)).fin(function() {
            a.hideLoading()
        })
    },
    _onTitleFieldContentChanged: function(a) {
        a.stopPropagation(), this._updateCharacterCount()
    },
    _getSubmitButton: function() {
        return this.getChildById("submitButton")
    },
    _getTitleField: function() {
        return this.getChildById("titleField")
    },
    _getCanonicalPinId: function() {
        return this.options.canonical_pin_id
    },
    _hasValidCanonicalPinId: function() {
        var a = this._getCanonicalPinId();
        return a && "0" !== a
    },
    _saveQuestion: function() {
        var a = this._getSubmitButton();
        a.showLoading();
        var b = {
            title: this._getTitleField().getValue(),
            context_pin_id: this.options.context_pin_id
        }, c = P.resourceFactory.create("QuestionResource", b);
        c.callCreate().then(function(a) {
            var c = a.resource_response.data;
            P.pubsub.publish(b.context_pin_id, P.CONST.PUBSUB_TOPIC_PIN_QUESTION_CREATED, c), this.$form[0].reset(), this.$el.removeClass("expanded"), this._updateCharacterCount()
        }.bind(this)).fin(function() {
            a.hideLoading()
        })
    },
    _postComment: function() {
        var a = this._getTitleField().getValue(), b = this.options.context_pin_id;
        P.pubsub.publish(b, P.CONST.PUBSUB_TOPIC_PIN_COMMENT_POPULATED, a), this.$form[0].reset(), this.form.validate(), this.getChildById("characterCounter").setCount(0)
    },
    _onContentFocus: function() {
        this.$el.addClass("expanded")
    },
    _onSuggestionClick: function(a) {
        a.preventDefault();
        var b = $(a.target).text(), c = this._getTitleField();
        c.setValue(b), this._updateCharacterCount(), this.form.validate(), c.focus()
    },
    _updateCharacterCount: function() {
        var a = this._getTitleField(), b = a.getUntrimmedValue().length;
        this.getChildById("characterCounter").setCount(b)
    }
}), P.modules.QuestionCreate.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.QuestionEdit"), goog.require("P.modules.EntityEdit"), P.modules.QuestionEdit = P.modules.EntityEdit.extend({
    getFormValidationRules: function() {
        return {
            title: [P.Validator.Length({
                min: 5,
                max: 140
            })]
        }
    },
    getFormValidationOptions: function() {
        return {
            prevalidate: !0
        }
    },
    getEditResource: function() {
        var a = {
            question_id: this.data.id,
            title: this.getChildById("titleField").getValue()
        };
        return P.resourceFactory.create("QuestionResource", a)
    },
    onEditSuccess: function() {
        P.pubsub.publish(this.data.id, P.CONST.PUBSUB_TOPIC_QUESTION_UPDATED)
    },
    getDeleteConfirmTemplate: function() {
        return "delete_question"
    },
    getDeleteResource: function() {
        var a = {
            question_id: this.data.id
        };
        return P.resourceFactory.create("QuestionResource", a)
    },
    onDeleteSuccess: function() {
        P.pubsub.publish(this.data.id, P.CONST.PUBSUB_TOPIC_QUESTION_DELETED)
    }
}), P.modules.QuestionEdit.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.QuestionReport"), goog.require("P.modules.EntityReport"), P.modules.QuestionReport = P.modules.EntityReport.extend({
    getReportResourceName: function() {
        return "QuestionReportResource"
    },
    getCustomReportResourceOptions: function() {
        return {
            question_id: this.options.question_id,
            context_pin_id: this.options.context_pin_id
        }
    },
    onReportSuccess: function() {
        P.pubsub.publish(this.options.question_id, P.CONST.PUBSUB_TOPIC_QUESTION_REPORTED)
    }
}), P.modules.QuestionReport.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.Questions"), goog.require("P.modules.QuestionsBase");
var QUESTION_TUTORIAL_WAIT = 1e3;
P.modules.Questions = P.modules.QuestionsBase.extend({
    initPubsub: function() {
        var a = this.options.context_pin_id, b = {};
        b[P.CONST.PUBSUB_TOPIC_PIN_QUESTION_CREATED] = this._onPinQuestionCreated, this.pubsubSubscribe(a, b)
    },
    showNotificationTutorial: function() {
        this._showTutorial("qaNotificationIntro", QUESTION_TUTORIAL_WAIT);
        var a = P.ExperienceManager.instance().constructPlacedExperienceId(P.Experiences.Placement.WEB_PIN_CLOSEUP, P.Experiences.Experience.WEB_QA_CLOSEUP_NOTIFICATION_USER_ED);
        P.ExperienceManager.instance().viewPlacedExperienceId(a), P.ExperienceManager.instance().completePlacedExperienceId(a)
    },
    showQATutorial: function() {
        var a = this.getChildByModuleName("PagedList").getChildByModuleName("List").getChildByModuleName("Question"), b = null;
        if (a) {
            var c = a.getChildByModuleName("Answers").getChildByModuleName("PagedList").getChildByModuleName("List").getChildrenByModuleName("Answer");
            b = _.find(c, function(a) {
                return a._getLikeCount() > 0
            })
        }
        if (b) {
            this._getCreate().show(), this._showTutorial("qaAnswerIntro", QUESTION_TUTORIAL_WAIT);
            var d = P.ExperienceManager.instance().constructPlacedExperienceId(P.Experiences.Placement.WEB_PIN_CLOSEUP, P.Experiences.Experience.WEB_QA_CLOSEUP_USER_ED);
            P.ExperienceManager.instance().viewPlacedExperienceId(d), P.ExperienceManager.instance().completePlacedExperienceId(d)
        }
    },
    _showTutorial: function(a, b) {
        P.setTimeout(function() {
            this.scrollToQuestions(P.CONST.QA_TUTORIAL_SCROLL_OFFSET, function() {
                P.TutorialManager.instance().startTutorial(a)
            })
        }.bind(this), b || 0)
    },
    _onSeeQuestion: function(a) {
        a.stopPropagation();
        var b = a.data.questionId, c = this._getQuestionById(b), d = {
            $el: c.getContent()
        };
        this.triggerEvent(P.CONST.EVENT_SCROLL_TO_ELEMENT, d, !0)
    },
    _onPinQuestionCreated: function(a, b, c) {
        this._hasValidCanonicalPinId() || (this.options.canonical_pin_id = c.canonical_pin_id);
        var d = c, e = new P.modules.Question({
            options: {
                context_pin_id: this.options.context_pin_id
            },
            resource: {
                name: "QuestionResource",
                options: {
                    question_id: d.id,
                    field_set_key: "list_item"
                }
            }
        }), f = this.addItem(e), g = {
            name: "OldToast",
            options: {
                position_mode: "ANCHORED",
                position_point: "RIGHT_TOP",
                template: "create_question_success"
            }
        };
        P.loadModule(g).then(function(a) {
            this.addChild(a);
            var b = a.render(), c = [f, b];
            Promise.all(c).then(function() {
                a.options.anchor = e.getContent(), a.positionModule()
            })
        }.bind(this))
    }
}), P.modules.Questions.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.RecFeedHomePage"), goog.require("P.Module"), P.modules.RecFeedHomePage = P.Module.extend({
    onContentReady: function() {
        var a = this.getChildById("grid"), b = "none";
        a&&!a.hasItems() && (a.remove(), b = "block"), this.$(".noResults").css("display", b)
    }
}), P.modules.RecFeedHomePage.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.RecentContacts"), goog.require("P.Module"), P.modules.RecentContacts = P.Module.extend({}), P.modules.RecentContacts.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.RelatedBoards"), goog.require("P.Module"), P.modules.RelatedBoards = P.Module.extend({
    events: {
        "click .relatedBoard": "_onBoardClicked"
    },
    _onBoardClicked: function(a) {
        this._clickedBoardId = $(a.currentTarget).data("boardId")
    },
    getLoggingObjectIdStr: function() {
        return this._clickedBoardId
    }
}), P.modules.RelatedBoards.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/RelatedBoards/RelatedBoards.nunjucks"), goog.provide("P.modules.RelatedEditorials"), goog.require("P.Module"), P.modules.RelatedEditorials = P.Module.extend({
    onContentReady: function() {
        this.destroyIfEmpty()
    }
}), P.modules.RelatedEditorials.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/RelatedEditorials/RelatedEditorials.nunjucks"), goog.provide("P.modules.RelatedItemsSlideshow"), goog.require("P.Module"), P.modules.RelatedItemsSlideshow = P.Module.extend({
    moduleRenderer: new P.ModuleRendererLocal("app/desktop/modules/RelatedItemsSlideshow/RelatedItemsSlideshow.nunjucks")
}), P.modules.RelatedItemsSlideshow.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/RelatedItemsSlideshow/RelatedItemsSlideshow.nunjucks"), goog.provide("P.modules.RelatedRecipe"), goog.require("P.Module"), P.modules.RelatedRecipe = P.Module.extend({}), P.modules.RelatedRecipe.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.RemoveUserFromBoardDialog"), goog.require("P.Module"), goog.require("P.modules.ConfirmDialog"), P.modules.RemoveUserFromBoardDialog = P.modules.ConfirmDialog.extend({
    events: {
        "click [name=ban]": "onBanClick"
    },
    onContentReady: function() {
        this.returnData = ["ban"], P.modules.ConfirmDialog.prototype.onContentReady.call(this)
    },
    onBanClick: function(a) {
        var b = $(a.target), c = P._(b.is(":checked") ? "Block Pinner" : "Remove Pinner");
        this.setPrimaryButtonText(c)
    }
}), P.modules.RemoveUserFromBoardDialog.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/RemoveUserFromBoardDialog/RemoveUserFromBoardDialog.nunjucks"), goog.provide("P.modules.Replies"), goog.require("P.modules.RepliesBase"), P.modules.Replies = P.modules.RepliesBase.extend({
    _onReplyCreated: function(a) {
        var b = new P.modules.Reply({
            resource: {
                name: "ReplyResource",
                options: {
                    reply_id: a.id,
                    field_set_key: "list_item"
                }
            }
        });
        this.addItem(b)
    }
}), P.modules.Replies.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.Reply"), goog.require("P.modules.ReplyBase"), P.modules.Reply = P.modules.ReplyBase.extend({
    onContentReady: function() {
        var a = this.data.id, b = {};
        b[P.CONST.PUBSUB_TOPIC_REPLY_DELETED] = this._onReplyDeleted, b[P.CONST.PUBSUB_TOPIC_REPLY_REPORTED] = this._onReplyReported, b[P.CONST.PUBSUB_TOPIC_REPLY_UPDATED] = this._onReplyUpdated, this.pubsubSubscribe(a, b)
    },
    _onReplyDeleted: function() {
        this.destroy()
    },
    _onReplyReported: function() {
        this.destroy()
    },
    _onReplyUpdated: function() {
        this.render()
    }
}), P.modules.Reply.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ReplyCreate"), goog.require("P.Module"), P.modules.ReplyCreate = P.Module.extend({
    events: {
        "focus .content": "_onContentFocus"
    },
    onContentReady: function() {
        this.$form = this.$("form");
        var a = {
            content: [P.Validator.Required()]
        }, b = {
            prevalidate: !0
        };
        this.form = new P.Form(this.$form, a, b), this.listen(this.form, P.CONST.EVENT_SUBMIT_VALIDATED, this.onSubmitValidated)
    },
    onSubmitValidated: function(a) {
        a.errors[0] || this._saveReply()
    },
    _getSubmitButton: function() {
        return this.getChildById("submitButton")
    },
    _saveReply: function() {
        var a = this.getChildById("contentField").getValue(), b = this.options.context_pin_id, c = this.options.question_id, d = this.options.answer_id, e = {
            content: a,
            context_pin_id: b,
            question_id: c
        };
        d && (e.answer_id = d);
        var f = P.resourceFactory.create("ReplyResource", e), g = this._getSubmitButton();
        g.showLoading(), f.callCreate().then(function(a) {
            var b = a.resource_response.data;
            d ? P.pubsub.publish(d, P.CONST.PUBSUB_TOPIC_ANSWER_REPLY_CREATED, b) : P.pubsub.publish(c, P.CONST.PUBSUB_TOPIC_QUESTION_REPLY_CREATED, b), this.$form[0].reset(), this.$el.removeClass("expanded")
        }.bind(this)).fin(function() {
            g.hideLoading()
        })
    },
    _onContentFocus: function() {
        this.$el.addClass("expanded")
    }
}), P.modules.ReplyCreate.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ReplyEdit"), goog.require("P.modules.EntityEdit"), P.modules.ReplyEdit = P.modules.EntityEdit.extend({
    getFormValidationRules: function() {
        return {
            content: [P.Validator.Required()]
        }
    },
    getFormValidationOptions: function() {
        return {
            prevalidate: !0
        }
    },
    getEditResource: function() {
        var a = {
            reply_id: this.data.id,
            content: this.getChildById("contentField").getValue()
        };
        return P.resourceFactory.create("ReplyResource", a)
    },
    onEditSuccess: function() {
        P.pubsub.publish(this.data.id, P.CONST.PUBSUB_TOPIC_REPLY_UPDATED)
    },
    getDeleteConfirmTemplate: function() {
        return "delete_reply"
    },
    getDeleteResource: function() {
        var a = {
            reply_id: this.data.id
        };
        return P.resourceFactory.create("ReplyResource", a)
    },
    onDeleteSuccess: function() {
        P.pubsub.publish(this.data.id, P.CONST.PUBSUB_TOPIC_REPLY_DELETED)
    }
}), P.modules.ReplyEdit.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ReplyReport"), goog.require("P.modules.EntityReport"), P.modules.ReplyReport = P.modules.EntityReport.extend({
    getReportResourceName: function() {
        return "ReplyReportResource"
    },
    getCustomReportResourceOptions: function() {
        return {
            reply_id: this.options.reply_id,
            context_pin_id: this.options.context_pin_id
        }
    },
    onReportSuccess: function() {
        P.pubsub.publish(this.options.reply_id, P.CONST.PUBSUB_TOPIC_REPLY_REPORTED)
    }
}), P.modules.ReplyReport.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ReportBug"), goog.require("P.Module");
var INPUT_METADATA_SELECTOR = '[name="metadata"]';
P.modules.ReportBug = P.Module.extend({
    getMetadata: function() {
        return this.$(INPUT_METADATA_SELECTOR).val()
    },
    onContentReady: function() {
        var a = this.getChildById("uploader");
        this.listen(a, P.CONST.EVENT_UPLOAD_SUCCESS, this.onUploadSuccess), this.listen(a, P.CONST.EVENT_UPLOAD_ERROR, this.onUploadError), this.imageUrl = null;
        var b = {
            title: [P.Validator.Required()],
            description: [P.Validator.Required()]
        };
        this.setMetadata(), this.form = new P.Form(this.$("form"), b), this.formListener = this.listen(this.form, P.CONST.EVENT_SUBMIT_VALIDATED, this.onSubmitValidated)
    },
    onSubmitValidated: function() {
        this.reportBug()
    },
    setMetadata: function() {
        var a = window.navigator.userAgent, b = P.getCurrentUrl(), c = P.experiments.instance.getDebugInfo();
        this.$(INPUT_METADATA_SELECTOR).val("\n\n\n\n----------------------------------\nuserAgent: " + a + "\ncurrentURL: " + b + "\nexperiments: " + c + "\nusername: " + P.currentUser.get("username") + "\n\n")
    },
    reportBug: function() {
        var a = this.$("form").serializeArray(), b = this.getChildById("submitButton"), c = {};
        _.each(a, function(a) {
            c[a.name] = a.value
        }), c.description = c.description + this.getMetadata(), this.imageUrl && (c.image_url = this.imageUrl), b.showLoading();
        var d = P.resourceFactory.create("ReportErrorResource", c);
        d.callCreate().then(function(a) {
            var b = a.resource_response.data, c = {
                name: "ConfirmDialog",
                options: {
                    template: "report_bug",
                    task_url: b,
                    class_name: "reportBug"
                }
            };
            P.loadModule(c).then(function(a) {
                this.showInModal(a), this.listen(a, P.CONST.EVENT_CONFIRM, this.destroy)
            }.bind(this))
        }.bind(this)).fin(function() {
            b.hideLoading()
        })
    },
    onUploadSuccess: function(a) {
        this.imageUrl = a.data.image_url
    },
    onUploadError: function() {
        P.showError(P.string.common.defaultErrorMessage)
    }
}), P.modules.ReportBug.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.RichPinDebugger"), goog.require("P.Module");
var HIDDEN = "hidden", SELECTED = "selected";
P.modules.RichPinDebugger = P.Module.extend({
    events: {
        "click .menu .main": "onShowMain",
        "click .menu .scraped": "onShowScraped",
        "click .menu .parsed": "onShowParsed"
    },
    onContentReady: function() {
        this.$form = this.$("form"), this.$main = this.$(".section.main"), this.$menus = this.$(".menu a"), this.$scraped = this.$(".section.scraped"), this.$sections = this.$(".section"), this.$parsed = this.$(".section.parsed"), this.form = new P.Form(this.$form, []), this.listen(this.form, P.CONST.EVENT_SUBMIT_VALIDATED, this.retrieve)
    },
    retrieve: function() {
        var a = this.$form.serializeArray(), b = a[0].value, c = {
            link: b
        }, d = this.getChildById("submitButton"), e = P.resourceFactory.create("RichPinReindexResource", c), f = function(a) {
            var c = encodeURIComponent(b);
            if (a&&!a.resource_response.error && a.resource_response.data) {
                var d = a.resource_response.data;
                c = encodeURIComponent(d.url)
            }
            this.navigate("?link=" + c)
        }.bind(this);
        d.showLoading(), e.callCreate().then(f).fin(function() {
            d.hideLoading()
        })
    },
    onShowMain: function(a) {
        return this.hideAllMenus(), this.$main.removeClass(HIDDEN), $(a.target).addClass(SELECTED), !1
    },
    onShowParsed: function(a) {
        return this.hideAllMenus(), this.$parsed.removeClass(HIDDEN), $(a.target).addClass(SELECTED), !1
    },
    onShowScraped: function(a) {
        return this.hideAllMenus(), this.$scraped.removeClass(HIDDEN), $(a.target).addClass(SELECTED), !1
    },
    hideAllMenus: function() {
        this.$sections.addClass(HIDDEN), this.$menus.removeClass(SELECTED)
    }
}), P.modules.RichPinDebugger.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.RichPinDebuggerItem"), goog.require("P.Module"), P.modules.RichPinDebuggerItem = P.Module.extend({}), P.modules.RichPinDebuggerItem.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.RichPinHeading"), goog.require("P.Module"), P.modules.RichPinHeading = P.Module.extend({}), P.modules.RichPinHeading.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.RichTextField"), goog.require("P.Module");
var FOCUS_CLASS = "focused", LOAD_PREVIEW_WAIT = 1e3, PREVIEW_MAX_RETRY = 8, EMBEDED_IMG_SIZE = "136x136";
P.modules.RichTextField = P.Module.extend({
    _hasEmbeddedContent: !1,
    _firstUrl: null,
    _queryEmbeddedContentRetry: 0,
    onAddedToDom: function() {
        this.childListen(P.CONST.EVENT_PASTE, this.onInputPaste), this.childListen(P.CONST.EVENT_FOCUS, this.onInputFocus), this.childListen(P.CONST.EVENT_BLUR, this.onInputBlur), this.childListen(P.CONST.EVENT_BUTTON_CLICK, this.removeEmbeddedContent)
    },
    onContentReady: function() {
        this.options.attached_url && (this._firstUrl = this.options.attached_url, this._hasEmbeddedContent=!0, this.$(".textFieldAttachment").show())
    },
    onInputPaste: function() {
        P.setTimeout(this.checkForUrlInput.bind(this), 10)
    },
    checkForUrlInput: function() {
        if (!this._hasEmbeddedContent&&!this._firstUrl) {
            var a = this.getContent(), b = this._extractUrls(a);
            b && (this._firstUrl = b[0], this.scheduleUrlScraping(this._firstUrl))
        }
    },
    _extractUrls: function(a) {
        var b = /(https?:\/\/[^\s]+)/g, c = /(www\.\w[^@\s]+\.\w[^\s]+)/g;
        return a.match(b) || a.match(c)
    },
    scheduleUrlScraping: function(a) {
        this.getUrlSummaryResource(a).callCreate({
            showError: !1
        }).then(function(a) {
            var b = a.resource_response.data.url;
            b && (this._firstUrl = b, this.triggerEvent(P.CONST.EVENT_ITEMS_REQUEST_START, null, !0), this.loadEmbedDataForLink(b))
        }.bind(this), function() {
            this.reset()
        }.bind(this))
    },
    waitToLoadEmbedData: function(a) {
        P.setTimeout(this.loadEmbedDataForLink.bind(this, a), LOAD_PREVIEW_WAIT)
    },
    loadEmbedDataForLink: function(a) {
        this._queryEmbeddedContentRetry < PREVIEW_MAX_RETRY ? (this.getUrlSummaryResource(a).callGet({
            showError: !1
        }).then(function(b) {
            var c = b.resource_response.data;
            c.title && c.site_name ? (this.renderEmbedContent(c), this.triggerEvent(P.CONST.EVENT_ITEMS_REQUEST_SUCCESS, null, !0)) : this.waitToLoadEmbedData(a)
        }.bind(this), function() {
            this.triggerEvent(P.CONST.EVENT_ITEMS_REQUEST_ERROR, null, !0), this.reset()
        }.bind(this)), this._queryEmbeddedContentRetry += 1) : (this.triggerEvent(P.CONST.EVENT_ITEMS_REQUEST_ERROR, null, !0), this.reset())
    },
    renderEmbedContent: function(a) {
        a.imgsrc = a.images[EMBEDED_IMG_SIZE].url;
        var b = {
            name: "UrlPreview",
            id: "attachmentContent",
            data: a
        };
        P.loadModule(b).then(function(a) {
            var b = this.$(".textFieldAttachment");
            this.insertChild(a, b), a.renderExistingData(), b.show(), this._hasEmbeddedContent=!0
        }.bind(this))
    },
    getUrlSummaryResource: function(a) {
        return P.resourceFactory.create("UrlSummaryResource", {
            url: a,
            field_set_key: "preview"
        })
    },
    onInputFocus: function() {
        this._getContainer().addClass(FOCUS_CLASS)
    },
    onInputBlur: function() {
        this._getContainer().removeClass(FOCUS_CLASS)
    },
    getContent: function() {
        return this.getChildById("contentField").getValue()
    },
    _getContainer: function() {
        return this.$container || (this.$container = this.$(".fieldContainer")), this.$container
    },
    _getAttachment: function() {
        return this.attachment || (this.attachment = this.getChildById("attachmentContent")), this.attachment
    },
    removeEmbeddedContent: function(a) {
        "cancelButton" === a.target.id && this.reset()
    },
    reset: function() {
        this._getAttachment() && this.removeChild(this.attachment), this.attachment = null, this._hasEmbeddedContent=!1, this._firstUrl = null, this._queryEmbeddedContentRetry = 0, this.$(".textFieldAttachment").hide()
    },
    getAttachmentUrl: function() {
        return this._firstUrl
    }
}), P.modules.RichTextField.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.RightHeader"), goog.require("P.Module"), P.modules.RightHeader = P.Module.extend({}), P.modules.RightHeader.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ScrollToTop"), goog.require("P.Module");
var VISIBLE_CLASS = "visible", PADDING_PX = 500;
P.modules.ScrollToTop = P.Module.extend({
    events: {
        click: "onScrollToTopClick"
    },
    onCreated: function() {
        this.visible=!1, this.$scroller = null
    },
    setScroller: function(a) {
        this.scrollListener && (this.removeListener(this.scrollListener), this.scrollListener = null), this.$scroller = a, this.$scroller.length > 0 && (this.updateButtonVisibility(), this.scrollListener = this.listen(this.$scroller, "scroll", this.updateButtonVisibility))
    },
    updateButtonVisibility: function() {
        var a = this.$scroller.scrollTop();
        a > PADDING_PX ? this.showButton() : this.hideButton()
    },
    onScrollToTopClick: function() {
        this.triggerEvent(P.CONST.EVENT_SCROLL_TO_TOP, {}, !0), P.trackGAEvent("scroll_to_top", P.CONST.GA_ACTION_CLICK)
    },
    animateButtonIn: function() {
        P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_SITE, P.CONST.PUBSUB_TOPIC_SCROLL_TO_TOP_VISIBLE, null), P.deferDomManipulation(function() {
            this.$el.addClass(VISIBLE_CLASS)
        }.bind(this))
    },
    animateButtonOut: function() {
        P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_SITE, P.CONST.PUBSUB_TOPIC_SCROLL_TO_TOP_HIDDEN, null), P.deferDomManipulation(function() {
            this.$el.removeClass(VISIBLE_CLASS)
        }.bind(this))
    },
    showButton: function() {
        this.visible || (this.visible=!0, this.animateButtonIn())
    },
    hideButton: function() {
        this.visible && (this.visible=!1, this.animateButtonOut())
    }
}), P.modules.ScrollToTop.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.SearchGuidesBar"), goog.require("P.Module");
var GUIDE_WIDTH = 125, NUM_GUIDES_SLIDE_WINDOW = 3, NUM_GUIDES_PER_COLUMN = 2;
P.modules.SearchGuidesBar = P.Module.extend({
    events: {
        "click .guidesContainer li": "onGuideClick",
        "click .navigator.left em": "onLeftNavigatorClick",
        "click .navigator.right em": "onRightNavigatorClick"
    },
    getOwnedScrollables: function() {
        return this.$(".guidesSlider")
    },
    onCreated: function() {
        this.$guidesSlider = this.$(".guidesSlider"), this.$guidesContainer = this.$(".guidesContainer"), this.currentGuideIndex = 0, this.totalGuides = this.options.num_guides;
        var a = this.totalGuides * GUIDE_WIDTH;
        this.$guidesContainer.css("width", a + "px"), this.$leftNav = this.$(".navigator.left"), this.$rightNav = this.$(".navigator.right"), this.listen(P.Viewport, P.CONST.EVENT_BODY_COLUMN_CHANGE, this.onBodyColumnChange), this.scrollLeft = 0, this.onSliderScroll = this.onSliderScroll.bind(this), this.$guidesSlider.on("scroll", this.onSliderScroll)
    },
    onBodyColumnChange: function() {
        this.updateNavigators()
    },
    onContentReady: function() {
        this.isReady() && this.updateNavigators()
    },
    onAddedToDom: function() {
        this.isReady() && this.updateNavigators()
    },
    isReady: function() {
        return this.inDom && this.contentReady
    },
    onSliderScroll: function(a) {
        this.scrollLeft = a.target.scrollLeft, this.currentGuideIndex = Math.floor(this.scrollLeft / GUIDE_WIDTH), this.updateNavigators()
    },
    onGuideClick: function(a) {
        var b = $(a.currentTarget), c = b.children().first(), d = c.attr("data-term"), e = c.attr("data-term-position"), f = c.attr("data-dominant-color"), g = c.attr("data-guide-index");
        P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_SITE, P.CONST.PUBSUB_TOPIC_SEARCH_GUIDE_SELECTED, {
            term: d,
            position: e,
            color: f,
            index: g
        })
    },
    onLeftNavigatorClick: function() {
        this.$guidesSlider.animate({
            scrollLeft: this.scrollLeft - NUM_GUIDES_SLIDE_WINDOW * GUIDE_WIDTH
        }, 300)
    },
    onRightNavigatorClick: function() {
        this.$guidesSlider.animate({
            scrollLeft: this.scrollLeft + NUM_GUIDES_SLIDE_WINDOW * GUIDE_WIDTH
        }, 300)
    },
    updateNavigators: function() {
        0 === this.scrollLeft ? this.hideLeftNavigator() : this.showLeftNavigator();
        var a = P.Viewport.numColumns * NUM_GUIDES_PER_COLUMN;
        this.totalGuides - this.currentGuideIndex > a ? this.showRightNavigator() : this.hideRightNavigator()
    },
    hideLeftNavigator: function() {
        this.$leftNav.hide()
    },
    showLeftNavigator: function() {
        this.$leftNav.show()
    },
    hideRightNavigator: function() {
        this.$rightNav.hide()
    },
    showRightNavigator: function() {
        this.$rightNav.show()
    }
}), P.modules.SearchGuidesBar.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.SearchInfoBar"), goog.require("P.Module"), goog.require("P.modules.InfoBarBase"), P.modules.SearchInfoBar = P.modules.InfoBarBase.extend({}), P.modules.SearchInfoBar.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.SearchInputToken"), goog.require("P.modules.Token");
var RgbColor;
P.modules.SearchInputToken = P.modules.Token.extend({
    events: {
        "click .remove": "onRemoveClick"
    },
    onContentReady: function() {
        this.bgColor || (this.bgColor = this.options.color ? this.clampColorBrightness(this.options.color) : this.getRandomColor()), this.$(".tokenContainer").css("background-color", this.bgColor)
    },
    onRemoveClick: function(a) {
        this._logContextEvent(a), this.triggerEvent(P.CONST.EVENT_REMOVE_TOKEN, this, !0), a.stopPropagation()
    },
    getTokenData: function() {
        var a = this.options.term, b = this.options.position;
        return {
            text: a,
            priority: b
        }
    },
    clampColorBrightness: function(a) {
        return this._isBright(a) ? this._darken(a, .2) : a
    },
    _isBright: function(a) {
        var b = this.hexToRgb(a);
        if (b) {
            var c = Math.sqrt(b.r * b.r * .241 + b.g * b.g * .691 + b.b * b.b * .068);
            return c > 200
        }
        return !1
    },
    _darken: function(a, b) {
        var c = this.hexToRgb(a), d = Math.round(c.r * (1 - b)), e = Math.round(c.g * (1 - b)), f = Math.round(c.b * (1 - b));
        return d = Math.min(Math.max(0, d), 255), e = Math.min(Math.max(0, e), 255), f = Math.min(Math.max(0, f), 255), "#" + d.toString(16) + e.toString(16) + f.toString(16)
    },
    hexToRgb: function(a) {
        var b = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/, c = a.match(b);
        return c ? {
            r: parseInt(c[1], 16),
            g: parseInt(c[2], 16),
            b: parseInt(c[3], 16)
        } : null
    },
    getRandomColor: function() {
        var a = _.random(1, 360), b = _.random(20, 90), c = _.random(20, 75);
        return "hsl(" + a + "," + b + "%," + c + "%)"
    }
}), P.modules.SearchInputToken.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/SearchInputToken/SearchInputToken.nunjucks"), goog.provide("P.modules.SearchPage"), goog.require("P.Module"), P.modules.SearchPage = P.Module.extend({
    onCreated: function() {
        this.childListen(P.CONST.EVENT_NAVIGATE, this.onChildNavigate)
    },
    _updateSearchOptions: function() {
        this.searchOptions = _.pick(this.options, "query", "scope", "boost")
    },
    onChildNavigate: function(a) {
        var b = a.data.url;
        if (!P.isOffsiteUrl(b)) {
            var c = P.router.get().resolve(b);
            if (c && "SearchPage" === c.module) {
                var d = P.router.get().resolve(b).options;
                return this.setOptions(d), this.publishSearchChange(), void(a.data.handled=!0)
            }
        }
    },
    onContentReady: function() {
        this.publishSearchChange()
    },
    onAddedToDom: function() {
        this.addTutorials()
    },
    addTutorials: function() {
        if (this._hasTokens() && this._hasGuides()) {
            var a = P.ExperienceManager.instance(), b = P.Experiences.Placement.WEB_SEARCH_PAGE_TAKEOVER, c = a.getPlacedExperience(b);
            if (c) {
                var d = P.ExperienceManager.Tutorials[c.experience_id];
                d && (P.TutorialManager.instance().startTutorial(d), a.viewPlacedExperience(b, c.experience_id))
            }
        }
    },
    _hasGuides: function() {
        return !!this.data.guides && this.data.guides.length > 0
    },
    _hasTokens: function() {
        var a = null;
        try {
            a = P.app.getChildById("header").getChildById("mainSearchTextbox").getChildById("searchField").getChildById("tokenizedInput")
        } catch (b) {
            return !1
        }
        return !!a && a.getTokens().length > 0
    },
    publishSearchChange: function() {
        this._updateSearchOptions();
        var a = this.searchOptions || {};
        P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_SITE, P.CONST.PUBSUB_TOPIC_SEARCH_QUERY_UPDATED, a.query || ""), P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_SITE, P.CONST.PUBSUB_TOPIC_SEARCH_SCOPE_UPDATED, a.scope || ""), P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_SITE, P.CONST.PUBSUB_TOPIC_SEARCH_BOOST_UPDATED, a.boost || "")
    }
}), P.modules.SearchPage.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.SearchQAPage"), goog.require("P.Module"), P.modules.SearchQAPage = P.Module.extend({}), P.modules.SearchQAPage.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.SearchScopeBar"), goog.require("P.Module"), P.modules.SearchScopeBar = P.Module.extend({}), P.modules.SearchScopeBar.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/SearchScopeBar/SearchScopeBar.nunjucks"), goog.provide("P.modules.SearchScopeSelector"), goog.require("P.Module"), P.modules.SearchScopeSelector = P.Module.extend({
    events: {
        'change input[name="scope"]': "onScopeChange"
    },
    queryStringWithoutFacets: function() {
        var a = window.location.search;
        return a = a.replace(/&fc=[^&]*/, ""), a = a.replace(/\?fc=[^&]*&?/, "?")
    },
    navigateToScope: function(a) {
        var b = this.queryStringWithoutFacets();
        P.currentUser.isAuthenticated() || "my_pins" !== a || this.navigate("/join/"), this.navigate("/search/" + a + "/" + b)
    },
    navigateToFacet: function(a, b) {
        var c = this.queryStringWithoutFacets();
        b && (c += ("" === c ? "?" : "&") + "fc=" + b), this.navigate("/search/" + a + "/" + c)
    },
    onScopeChange: function(a) {
        var b = $(a.currentTarget), c = b.val();
        if (c !== this.options.scope) {
            var d = b.attr("data-url") || c;
            this.navigateToScope(d)
        }
    }
}), P.modules.SearchScopeSelector.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.SendInvitationEmail"), goog.require("P.Module"), P.modules.SendInvitationEmail = P.Module.extend({
    events: {
        "click .sendInvitationEmail": "onMouseClick"
    },
    onMouseClick: function() {
        if (this.options.is_valid_email) {
            var a = this.options.text_value;
            P.Invite.userInviteEmail(a, function() {
                this.triggerEvent(P.CONST.EVENT_INVITE_USER, null, !0)
            }.bind(this))
        }
    }
}), P.modules.SendInvitationEmail.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/SendInvitationEmail/SendInvitationEmail.nunjucks"), goog.provide("P.modules.SentPin"), goog.require("P.Module"), P.modules.SentPin = P.Module.extend({
    onContentReady: function() {
        P.Module.prototype.onContentReady.apply(this, arguments), this.scrollListener = this.listen(this.getScrollableElement(), P.CONST.EVENT_SCROLL, this._onScroll), this.hasShownModal=!1, this.childListen(P.CONST.EVENT_PIN_MASK_CLICKED, this._onPinClicked), P.trackRegisterAction("send_pin_landing"), this.scrollThreshold = this.$(".gridContainer").offset().top + 200;
        var a = this.$(".morePins");
        a.fixedsticky(), this.getChildById("relatedPins").hasItems() || a.hide()
    },
    _onScroll: function() {
        var a = this.getScrollableElement().scrollTop();
        a > this.scrollThreshold&&!this.hasShownModal && this._showRegisterModal(this.data.id)
    },
    _onPinClicked: function(a) {
        var b = a.data.module;
        this._showRegisterModal(b.getPinId())
    },
    _showRegisterModal: function(a) {
        this.hasShownModal=!0;
        var b = {
            name: "SentPinRegistration",
            resource: {
                name: "PinResource",
                options: {
                    id: a
                }
            }
        };
        P.loadModule(b).then(function(a) {
            P.getModalManager().showInModal(a, {
                can_scroll: !0
            })
        }), P.trackRegisterAction("send_pin_landing_show_modal")
    }
}), P.modules.SentPin.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.SentPinRegistration"), goog.require("P.Module"), P.modules.SentPinRegistration = P.Module.extend({}), P.modules.SentPinRegistration.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.SentPinSender"), goog.require("P.Module"), P.modules.SentPinSender = P.Module.extend({}), P.modules.SentPinSender.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.SmartFeedPage"), goog.require("P.Module"), P.modules.SmartFeedPage = P.Module.extend({}), P.modules.SmartFeedPage.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.StoryFeedPage"), goog.require("P.Module"), P.modules.StoryFeedPage = P.Module.extend({}), P.modules.StoryFeedPage.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.TabletInterstitial"), goog.require("P.Module"), goog.require("P.nativeApp"), P.modules.TabletInterstitial = P.Module.extend({
    events: {
        "click .noThanks": "onClickStayInBrowser",
        "click .openInApp": "onClickOpenInApp"
    },
    onClickOpenInApp: function() {
        P.nativeApp.setOpenInAppPreference(), this.triggerEvent(P.CONST.EVENT_INTERSTITIAL_OPEN_IN_APP, null, !0)
    },
    onClickStayInBrowser: function() {
        P.nativeApp.setStayInBrowserPreference(!0, !1);
        var a = this.parent;
        a.destroy()
    }
}), P.modules.TabletInterstitial.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.TextContainer"), goog.require("P.Module"), P.modules.TextContainer = P.Module.extend({}), P.modules.TextContainer.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.TrademarkForm"), goog.require("P.Module");
var SELECTOR_AGENT_FIELDS = ".agentFields", SELECTOR_TRANSFER_FIELD = ".transferField";
P.modules.TrademarkForm = P.Module.extend({
    onCreated: function() {
        this.onComplainantTypeChange = this.onComplainantTypeChange.bind(this), this.onTrademarkClaimSuccess = this.onTrademarkClaimSuccess.bind(this), this.onAddURLButtonClick = this.onAddURLButtonClick.bind(this)
    },
    onContentReady: function() {
        if (_.contains(["username", "content", "goods"], this.options.claim_type)) {
            this.$("[name=complainant_type]").on("change", this.onComplainantTypeChange), this.$("[name=course_of_action]").on("change", this.onClaimTypeChange);
            var a = this.getChildById("addURL");
            a && this.listen(a, P.CONST.EVENT_BUTTON_CLICK, this.onAddURLButtonClick), this.complainantType = null, this.claimType = null;
            var b = new Date;
            this.$("#trademarkSignatureDate").val(b.getMonth() + 1 + "/" + b.getDate() + "/" + b.getFullYear()), this.setupForm()
        }
    },
    setupForm: function() {
        var a = this.$("form"), b = {};
        this.form = new P.Form(a, b), this.listen(this.form, P.CONST.EVENT_SUBMIT_VALIDATED, this.onSubmitValidated)
    },
    onComplainantTypeChange: function(a) {
        var b = $(a.target);
        if (b.is(":checked")) {
            var c = b.val();
            this.complainantType = c, "agent" === c ? this.showAgentFields() : this.hideAgentFields()
        }
    },
    onClaimTypeChange: function(a) {
        var b = $(a.target);
        if (b.is(":checked")) {
            var c = b.val();
            this.claimType = c, "transfer" === c ? $(SELECTOR_TRANSFER_FIELD).show() : $(SELECTOR_TRANSFER_FIELD).hide()
        }
    },
    onSubmitValidated: function(a) {
        if (!a.errors[0]) {
            var b = this.createResourceOptions(), c = this.getChildById("submitBtn");
            c.showLoading();
            var d = P.resourceFactory.create("TrademarkClaimResource", b);
            d.callCreate().then(this.onTrademarkClaimSuccess.bind(this)).fin(function() {
                c.hideLoading()
            })
        }
    },
    onTrademarkClaimSuccess: function(a) {
        var b = a.resource_response.data, c = {
            name: "ConfirmDialog",
            options: {
                claim_id: b,
                template: "trademark_claim_success"
            }
        };
        P.loadModule(c).then(function(a) {
            this.showInModal(a), this.listen(a, P.CONST.EVENT_DESTROYED, function() {
                this.navigate("/")
            })
        }.bind(this))
    },
    onAddURLButtonClick: function() {
        var a = this.$(".infringingURLs"), b = a.children().first().clone();
        b.find("input").removeAttr("id"), a.append(b)
    },
    showAgentFields: function() {
        this.$(SELECTOR_AGENT_FIELDS).show()
    },
    hideAgentFields: function() {
        this.$(SELECTOR_AGENT_FIELDS).hide()
    },
    createResourceOptions: function() {
        var a = _.omit(this.form.getData(), "complainant_type");
        a.claim_type = this.options.claim_type, a.is_owner = "owner" === this.complainantType;
        var b = ["infringing_content_urls", "infringing_goods_urls"];
        return _.each(b, function(b) {
            var c = a[b];
            _.isArray(c) && (c = _.map(c, function(a) {
                return $.trim(a)
            }), c = _.reject(c, function(a) {
                return "" === a
            }), a[b] = c.join(","))
        }), a
    }
}), P.modules.TrademarkForm.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.TrademarkFormSelector"), goog.require("P.Module"), P.modules.TrademarkFormSelector = P.Module.extend({
    onContentReady: function() {
        this.$("[name=claim_type]").on("change", this.onClaimTypeChange.bind(this))
    },
    onClaimTypeChange: function(a) {
        var b = $(a.target);
        if (b.is(":checked")) {
            var c = b.val();
            this.navigate("/about/trademark/form/" + c + "/")
        }
    }
}), P.modules.TrademarkFormSelector.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.TweetButton"), goog.require("P.Module"), goog.require("P.modules.Button"), P.modules.TweetButton = P.modules.Button.extend({
    onClick: function() {
        var a = this.options.ga_category || "share_twitter";
        P.trackGAEvent(a, P.CONST.GA_ACTION_CLICK), this.openWebIntent(), this.triggerEvent(P.CONST.EVENT_BUTTON_CLICK, null, !0)
    },
    openWebIntent: function() {
        var a = this.getWindowUrl(), b = 550, c = 420;
        return P.getWindowManager().open(a, null, b, c)
    },
    getWindowUrl: function() {
        var a = "https://twitter.com/intent/tweet?via=pinterest", b = {};
        return this.options.tweet_path && (b.url = encodeURIComponent(P.absolutify(this.options.tweet_path))), this.options.tweet_text && (b.text = encodeURIComponent(this.options.tweet_text)), _.reduce(b, function(a, b, c) {
            return a + "&" + c + "=" + b
        }, a)
    }
}), P.modules.TweetButton.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.UnauthBanner"), goog.require("P.Module"), P.modules.UnauthBanner = P.Module.extend({
    events: {
        "click .bannerOpenInApp": "openInApp"
    },
    onContentReady: function() {
        this.destroyIfEmpty() || (this.childListen(P.CONST.EVENT_BUTTON_CLICK, this.onButtonClick), this.$(".emailLogin").attr("href", P.getLoginUrl()), this.childListen(P.CONST.EVENT_NAVIGATE, this.onChildNavigate))
    },
    onButtonClick: function(a) {
        var b = a.target;
        "emailSignup" === a.target.id && (this.navigate(P.url.appendQueryString(b.getNavigateUrl(), {
            prev: window.location.href
        })), a.stopPropagation())
    },
    openInApp: function() {
        P.nativeApp.setOpenInAppPreference(), this.triggerEvent(P.CONST.EVENT_OPEN_IN_APP, null, !0)
    },
    onChildNavigate: function(a) {
        ( - 1 !== a.data.url.indexOf("/login/")||-1 !== a.data.url.indexOf("/join/")) && (a.data.url = a.data.url + "?prev=" + window.location.pathname)
    }
}), P.modules.UnauthBanner.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.UnauthHomePage"), goog.require("P.Module"), goog.require("P.modules.UnauthHomePageBase"), P.modules.UnauthHomePage = P.modules.UnauthHomePageBase.extend({}), P.modules.UnauthHomePage.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.UnblockButton"), goog.require("P.Module"), P.modules.UnblockButton = P.Module.extend({
    events: {
        click: "onClick"
    },
    onUserUnblockSuccess: function() {
        var a = {
            name: "ConfirmDialog",
            options: {
                template: "block_unblock_user_success",
                name: this.options.full_name,
                action: "unblocked"
            }
        };
        _.extend(a.options, this.options.dialog_options), P.loadModule(a).then(function(a) {
            this.showInModal(a, {
                can_dismiss: !1
            }), this.listen(a, P.CONST.EVENT_CONFIRM, this.onUnblockConfirm)
        }.bind(this))
    },
    onUnblockConfirm: function() {
        this.destroy()
    },
    onClick: function() {
        P.trackGAEvent("user_unblock", P.CONST.GA_ACTION_CLICK);
        var a = this.options.user_id;
        this.showLoading();
        var b = P.resourceFactory.create("UserBlockResource", {
            blocked_user_id: this.options.user_id
        });
        b.callDelete().then(function() {
            P.trackGAEvent("user_unblock", P.CONST.GA_ACTION_SUCCESS), P.pubsub.publish(a, P.CONST.PUBSUB_TOPIC_USER_UNBLOCKED), this.onUserUnblockSuccess()
        }.bind(this), function() {
            P.trackGAEvent("user_unblock", P.CONST.GA_ACTION_ERROR)
        }).fin(function() {
            this.hideLoading()
        }.bind(this))
    }
}), P.modules.UnblockButton.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.UrlPreview"), goog.require("P.Module"), P.modules.UrlPreview = P.Module.extend({}), P.modules.UrlPreview.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/UrlPreview/UrlPreview.nunjucks"), goog.provide("P.modules.User"), goog.require("P.Module");
var VIEW_TYPE_FOLLOW_FRIENDS_ITEM = "followFriendsItem";
P.modules.User = P.Module.extend({
    events: {
        "click .dismiss": "onDismissClick",
        click: "onClick"
    },
    getLoadingSpinnerOptions: function() {
        var a = P.Module.prototype.getLoadingSpinnerOptions.call(this);
        return this.options.view_type === VIEW_TYPE_FOLLOW_FRIENDS_ITEM ? _.extend(a, {
            size: P.Spinner.Size.SMALL
        }) : a
    },
    getProfileImage: function() {
        var a;
        switch (this.options && this.options.view_type) {
        case"userSelect":
            a = this.$(".profileImage");
            break;
        default:
            return 
        }
        return a.attr("src")
    },
    onContentReady: function() {
        var a = {};
        a[P.CONST.PUBSUB_TOPIC_USER_FOLLOW] = this.onUserFollow, a[P.CONST.PUBSUB_TOPIC_USER_UNFOLLOW] = this.onUserUnfollow;
        var b = this.getUserId();
        this.pubsubSubscribe(b, a)
    },
    onUserFollow: function() {
        this.options.view_type === VIEW_TYPE_FOLLOW_FRIENDS_ITEM && this.$el.addClass("contactConfirmed"), this.triggerEvent(P.CONST.EVENT_USER_FOLLOW, null, !0)
    },
    onUserUnfollow: function() {
        this.triggerEvent(P.CONST.EVENT_USER_UNFOLLOW, null, !0)
    },
    onDismissClick: function() {
        this.triggerEvent(P.CONST.EVENT_DISMISS, null, !0)
    },
    getUserId: function() {
        return this.data && this.data.id
    },
    onClick: function() {
        if ("userSelect" === this.options.view_type && this.triggerEvent(P.CONST.EVENT_USER_CLICK, null, !0), "userCheckableSelectView" === this.options.view_type) {
            var a = this.$(".selectCheck");
            a.toggleClass("checked");
            var b = {
                user_id: this.getUserId(),
                is_following: a.hasClass("checked")
            };
            this.triggerEvent(P.CONST.EVENT_USER_CLICK, b, !0)
        }
    }
}), P.modules.User.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/User/User.nunjucks"), goog.provide("P.modules.UserAppSettings"), goog.require("P.Module"), P.modules.UserAppSettings = P.Module.extend({
    onContentReady: function() {
        this.childListen(P.CONST.EVENT_BUTTON_CLICK, this.onButtonClick)
    },
    onButtonClick: function(a) {
        var b = a.target.id;
        - 1 !== b.indexOf("revokeButton") && this.showConfirmation(b)
    },
    onRevokeConfirm: function(a) {
        var b = this.getChildById(a), c = a.replace("revokeButton", ""), d = P.resourceFactory.create("OAuthUserAuthorizationsResource", {
            consumer_id: c
        });
        b.showLoading(), d.callDelete().then(function() {
            this.render()
        }.bind(this)).fin(function() {
            b.hideLoading()
        })
    },
    showConfirmation: function(a) {
        var b = {
            name: "ConfirmDialog",
            options: {
                template: "revoke_app_access"
            }
        };
        P.loadModule(b).then(function(b) {
            this.showInModal(b), this.listen(b, P.CONST.EVENT_CONFIRM, function() {
                this.onRevokeConfirm(a)
            })
        }.bind(this))
    }
}), P.modules.UserAppSettings.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.UserBadge"), goog.require("P.Module"), P.modules.UserBadge = P.Module.extend({}), P.modules.UserBadge.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.UserBlock"), goog.require("P.Module"), P.modules.UserBlock = P.Module.extend({
    events: {
        "click .cancelButton": "onCancelButtonClick"
    },
    onContentReady: function() {
        this.form = new P.Form(this.$("form"), []), this.formListener = this.listen(this.form, P.CONST.EVENT_SUBMIT_VALIDATED, this.onSubmitValidated), this.childListen(P.CONST.EVENT_BUTTON_CLICK, this.onButtonClick)
    },
    onButtonClick: function(a) {
        var b = a.target;
        if (b) {
            var c = this.options.blocked_by_me ? "user_unblock": "user_block";
            "cancelButton" === b.id ? P.trackGAEvent(c, P.CONST.GA_ACTION_CLICK_CANCEL) : "submitButton" === b.id && P.trackGAEvent(c, P.CONST.GA_ACTION_CLICK_SUBMIT)
        }
    },
    onSubmitValidated: function(a) {
        a.errors[0] || this.blockUser()
    },
    onUserBlockSuccess: function() {
        var a = {
            name: "ConfirmDialog",
            options: {
                template: "block_unblock_user_success",
                name: this.options.full_name,
                action: "blocked"
            }
        };
        P.loadModule(a).then(function(a) {
            this.showInModal(a, {
                can_dismiss: !1
            }), this.listen(a, P.CONST.EVENT_CONFIRM, this.onBlockConfirm)
        }.bind(this))
    },
    onBlockConfirm: function() {
        P.getModalManager().removeAllModals();
        var a = P.getCurrentUrl().split("/") || [];
        a[1] && a[1] === this.options.username && this.navigate("/")
    },
    blockUser: function() {
        var a = this.getChildById("submitButton"), b = this.options.user_id;
        a.showLoading();
        var c = {
            blocked_user_id: b
        }, d = P.resourceFactory.create("UserBlockResource", c), e = this.options.blocked_by_me ? "user_unblock": "user_block";
        (this.options.blocked_by_me ? d.callDelete() : d.callCreate()).then(function() {
            P.trackGAEvent(e, P.CONST.GA_ACTION_SUCCESS), P.pubsub.publish(this.options.user_id, P.CONST.PUBSUB_TOPIC_USER_BLOCKED), this.onUserBlockSuccess()
        }.bind(this), function() {
            P.trackGAEvent(e, P.CONST.GA_ACTION_ERROR)
        }).fin(function() {
            a.hideLoading()
        })
    },
    onCancelButtonClick: function() {
        this.destroy()
    }
}), P.modules.UserBlock.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.UserBoardInvites"), goog.require("P.Module"), P.modules.UserBoardInvites = P.Module.extend({
    onContentReady: function() {
        this.destroyIfEmpty(), this.pagedGrid = this.getChildById("pagedGrid"), this.childListen(P.CONST.EVENT_CONTENT_CHANGED, this.onChildContentChanged)
    },
    onChildRemoved: function() {
        this.destroyIfEmpty()
    },
    onChildContentChanged: function() {
        this.pagedGrid.hasItems() || this.pagedGrid.destroy()
    },
    isEmpty: function() {
        return !this.children.length
    }
}), P.modules.UserBoardInvites.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.UserChangePassword"), goog.require("P.Module");
var changePasswordSubmitButtonId = "changePasswordSubmit";
P.modules.UserChangePassword = P.Module.extend({
    onContentReady: function() {
        this.$form = this.$("form");
        var a = {
            "new": [P.Validator.Required(), P.Validator.ContainsOnlyAscii({
                message: P.string.common.asciiPasswordError
            }), P.Validator.Password()],
            new_confirm: [P.Validator.Required(), P.Validator.EqualTo({
                targetFieldName: "new",
                message: P._("Passwords don't match")
            })]
        };
        this.extraData.has_password && (a.old = [P.Validator.Required()]), this.form = new P.Form(this.$form, a), this.listen(this.form, P.CONST.EVENT_SUBMIT_VALIDATED, this.onSubmitValidated);
        var b = this.getChildById("forgotPasswordButton");
        b && this.listen(b, P.CONST.EVENT_BUTTON_CLICK, this.onForgotPasswordClick)
    },
    onSubmitValidated: function(a) {
        var b = this.getChildById(changePasswordSubmitButtonId);
        a.errors[0] || (b.showLoading(!0), this.changePassword())
    },
    changePassword: function() {
        this.hideLoading(!0);
        var a = function() {
            if (this.isInModal()) {
                var a = {
                    name: "ConfirmDialog",
                    options: {
                        template: "change_password_success"
                    }
                }, b = function() {
                    this.triggerEvent("success", this), this.destroy(), P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_SITE, P.CONST.PUBSUB_TOPIC_USER_CHANGED_PASSWORD, this.extraData.render_social_networks)
                }.bind(this);
                P.loadModule(a).then(function(a) {
                    this.showInModal(a), this.listen(a, P.CONST.EVENT_CONFIRM, b)
                }.bind(this))
            } else 
                this.navigate("/")
        }.bind(this), b = $("form", this.$el), c = {
            "new": b.find("[name=new]").val(),
            new_confirm: b.find("[name=new_confirm]").val()
        };
        this.extraData.has_password && (c.old = b.find("[name=old]").val());
        var d = P.resourceFactory.create("UserPasswordResource", c);
        d.callUpdate().then(a).fin(function() {
            var a = this.getChildById(changePasswordSubmitButtonId);
            a.hideLoading()
        }.bind(this))
    },
    onForgotPasswordClick: function() {
        P.trackGAEvent("forgot_password", P.CONST.GA_ACTION_CLICK), this.showLoading();
        var a = P.resourceFactory.create("UserResetPasswordResource", {
            username_or_email: P.currentUser.attributes.username
        }), b = function() {
            P.trackGAEvent("forgot_password", P.CONST.GA_ACTION_SUCCESS);
            var a = {
                name: "ConfirmDialog",
                options: {
                    template: "change_password"
                }
            };
            P.loadModule(a).then(function(a) {
                this.showInModal(a), this.listen(a, P.CONST.EVENT_CONFIRM, this.destroy)
            }.bind(this))
        }.bind(this), c = function() {
            this.hideLoading()
        }.bind(this), d = function() {
            P.trackGAEvent("forgot_password", P.CONST.GA_ACTION_ERROR)
        };
        a.callCreate({
            showError: !1
        }).then(b, d).fin(c)
    }
}), P.modules.UserChangePassword.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.UserContact"), goog.require("P.Module"), P.modules.UserContact = P.Module.extend({
    events: {
        "click .dismiss": "onDismissClick",
        "click .contactWrapper": "onAction"
    },
    onDismissClick: function() {
        this.triggerEvent(P.CONST.EVENT_DISMISS, null, !0)
    },
    getUserId: function() {
        return this.user.hash_id
    },
    onContentReady: function() {
        this.user = this.options.contact_info
    },
    onInviteSuccess: function(a) {
        a && (this.triggerEvent(P.CONST.EVENT_INVITE_USER, null, !0), this.$el.addClass("contactConfirmed"))
    },
    onAction: function() {
        return "facebook" === this.user.network ? P.Invite.userInviteFacebook(this.user.id, this.onInviteSuccess.bind(this)) : "email" === this.user.id_type && P.Invite.userInviteEmail(this.user.id, this.onInviteSuccess.bind(this)), !1
    }
}), P.modules.UserContact.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.UserDropdown"), goog.require("P.Module"), P.modules.UserDropdown = P.Module.extend({
    events: {
        "click .reportBug": "openReportBugModal",
        "click .reportUser": "openReportUserModal",
        "click .sendProfile": "sendProfile",
        "click .sendMessage": "sendUserMessage",
        "click .userMenuFindBoards": "openFindBoards",
        "click .userMenuCreateBoard": "openCreateBoard",
        "click .userMenuAddPin": "openAddPin",
        "click .userMenuUploadPin": "openUploadPin",
        "click .userMenuEditProfile": "openEditProfile",
        "click .userMenuMakeAWidget": "openMakeAWidget",
        "click .settings": "onSettingsClick",
        "click .userMenuMakeABoardWidget": "openMakeABoardWidget",
        "click .sendBoard": "sendBoard"
    },
    onSettingsClick: function(a) {
        if (a.stopPropagation(), a.preventDefault(), P.currentUser.isLimitedLogin())
            P.limitedLogin.showLogin(this);
        else if ("True" !== Cookie.get(P.CONST.COOKIE_DUMMY_SECURE) || P.autologin.checkForAutologin()) {
            var b = P._("To get to your settings, please take a second to confirm it's really you.");
            P.autologin.showLoginErrorDialog(this, b)
        } else 
            this.navigate("/settings/")
    },
    getFindFriendsElement: function() {
        return this.$(".userMenuFindFriends").parent().eq(0)
    },
    getMyBoardsElement: function() {
        return this.$(".myBoards").parent().eq(0)
    },
    getFindBoardsElement: function() {
        return this.$(".userMenuFindBoards").parent().eq(0)
    },
    openFindBoards: function() {
        var a = {
            name: "FastFollow",
            resource: {
                name: "UserResource",
                options: {
                    username: P.currentUser.get("username"),
                    field_set_key: "fast_follow"
                }
            },
            options: {
                post_orientation: !0
            }
        };
        return this.showLoading(), P.loadModule(a).then(function(a) {
            this.hideLoading(), this.showInModal(a, {
                can_dismiss: !0,
                container_class: "fastFollowContainer"
            })
        }.bind(this)), !1
    },
    openReportBugModal: function(a) {
        a.preventDefault();
        var b = {
            name: "ReportBug",
            options: {
                shrinkToFit: !0
            }
        };
        return this.showLoading(), P.loadModule(b).then(function(a) {
            this.hideLoading(), this.showInModal(a)
        }.bind(this)), !1
    },
    openReportUserModal: function(a) {
        a.preventDefault();
        var b = this.options.user, c = {
            name: "FlagUser",
            options: {
                full_name: b.full_name,
                first_name: b.first_name,
                blocked_by_me: b.blocked_by_me,
                user_id: b.id,
                username: b.username,
                hide_other_field: !0
            }
        };
        return this.showLoading(), P.loadModule(c).then(function(a) {
            this.hideLoading(), this.showInModal(a)
        }.bind(this)), !1
    },
    sendProfile: function(a) {
        if (a.stopPropagation(), a.preventDefault(), P.currentUser.isLimitedLogin())
            P.limitedLogin.showLogin(this);
        else {
            var b = this.options.user, c = {
                name: "SendPinner",
                options: {
                    class_name: "modal",
                    object_id: b.id,
                    object_image_url: b.image_large_url,
                    object_description: b.bio,
                    object_url: "/" + b.username
                }
            };
            this.showLoading(), P.loadModule(c).then(function(a) {
                this.hideLoading(), this.showInModal(a)
            }.bind(this))
        }
    },
    sendUserMessage: function(a) {
        if (P.currentUser.isLimitedLogin())
            P.limitedLogin.showLogin(this);
        else {
            var b = [this.options.user.id];
            P.getConversationsManager().sendMessageToUsers(b, [], {
                text: null
            }).then(function() {
                this.triggerEvent(P.CONST.EVENT_DISMISS, null, !0), this.render()
            }.bind(this)), a.stopPropagation()
        }
    },
    openCreateBoard: function() {
        var a = {
            name: "BoardCreate",
            options: {}
        };
        return this.showLoading(), P.loadModule(a).then(function(a) {
            this.hideLoading(), this.showInModal(a)
        }.bind(this)), !1
    },
    openAddPin: function() {
        var a = {
            name: "AddPinURL",
            options: {
                shrinkToFit: !0,
                show_title: !0
            }
        };
        return this.showLoading(), P.loadModule(a).then(function(a) {
            this.hideLoading(), this.showInModal(a)
        }.bind(this)), !1
    },
    openUploadPin: function() {
        var a = {
            name: "PinUploader",
            options: {
                shrinkToFit: !0,
                show_title: !0
            }
        };
        return this.showLoading(), P.loadModule(a).then(function(a) {
            this.hideLoading(), this.showInModal(a)
        }.bind(this)), !1
    },
    openEditProfile: function() {
        var a = {
            name: "UserEdit",
            resource: {
                name: "UserSettingsResource",
                options: {}
            },
            options: {
                user_id: this.options.user_id
            }
        };
        return this.showLoading(), P.loadModule(a).then(function(a) {
            this.hideLoading(), this.showInModal(a)
        }.bind(this)), !1
    },
    openMakeAWidget: function() {
        var a = {
            name: "EmbedPinner",
            options: {
                user: this.options.user,
                view_type: "guided"
            }
        };
        return this.showLoading(), P.loadModule(a).then(function(a) {
            this.hideLoading(), this.showInModal(a)
        }.bind(this)), !1
    },
    openMakeABoardWidget: function() {
        var a = {
            name: "EmbedBoard",
            options: {
                board: this.options.board,
                view_type: "guided",
                class_name: "v2"
            }
        };
        return this.showLoading(), P.loadModule(a).then(function(a) {
            this.hideLoading(), this.showInModal(a)
        }.bind(this)), !1
    },
    sendBoard: function(a) {
        if (a.preventDefault(), P.currentUser.isLimitedLogin())
            P.limitedLogin.showLogin(this);
        else {
            var b = this.options.board, c = {
                name: "SendBoard",
                options: {
                    class_name: "newBoardHeaderStyle",
                    object_id: b.id,
                    object_image_url: b.image_cover_url,
                    object_description: b.description,
                    object_url: b.url
                }
            };
            this.showLoading(), P.loadModule(c).then(function(a) {
                this.hideLoading(), this.showInModal(a)
            }.bind(this))
        }
        return !1
    }
}), P.modules.UserDropdown.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.UserEdit"), goog.require("P.Module"), P.modules.UserEdit = P.Module.extend({
    onContentReady: function() {
        var a = {
            first_name: [P.Validator.Required()],
            username: [P.Validator.Required()],
            about: [P.Validator.Length({
                max: P.CONST.MAX_CHARS_FOR_USER_DESCRIPTION
            })]
        };
        this.data.is_partner && (a.business_name = [P.Validator.Required()]), this.formListener && this.removeListener(this.formListener), this.form = new P.Form(this.$("form"), a), this.formListener = this.listen(this.form, P.CONST.EVENT_SUBMIT_VALIDATED, this.onSubmitValidated);
        var b = {};
        b[P.CONST.PUBSUB_TOPIC_USER_UPDATED] = this.onImageUploaded, this.pubsubSubscribe(this.options.user_id, b)
    },
    onImageUploaded: function(a, b, c) {
        if (c && c.data && c.data.profile_image_url) {
            var d = this.$(".profileImage");
            d.attr("src", c.data.profile_image_url), d.on("load", function() {
                d.toggleClass("restrictWidth", d.height() > d.width())
            })
        }
    },
    onSubmitValidated: function(a) {
        a.errors[0] || this.saveProfile()
    },
    getFormData: function() {
        var a = this.$("form").serializeArray(), b = {};
        return _.each(a, function(a) {
            b[a.name] = a.value
        }), b
    },
    getSaveResource: function(a) {
        return P.resourceFactory.create("UserSettingsResource", a)
    },
    saveProfile: function() {
        var a = this.getFormData(), b = this.getChildById("submitButton"), c = this.extraData.currentUsername, d = a.username && c !== a.username;
        b.showLoading(), this.getSaveResource(a).callUpdate().then(function() {
            var b = this.isInModal()&&!d;
            if (b)
                P.pubsub.publish(this.options.user_id, P.CONST.PUBSUB_TOPIC_USER_UPDATED), this.destroy();
            else {
                var c = "/" + a.username + "/";
                this.navigate(c)
            }
        }.bind(this)).fin(function() {
            b.hideLoading()
        })
    }
}), P.modules.UserEdit.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.UserEditEmail"), goog.require("P.Module"), P.modules.UserEditEmail = P.Module.extend({
    onContentReady: function() {
        this.$form = this.$("form"), this.form = new P.Form(this.$form, {
            email: [P.Validator.Required()]
        }), this.listen(this.form, P.CONST.EVENT_SUBMIT_VALIDATED, this.onSubmitValidated)
    },
    onSubmitValidated: function(a) {
        a.errors[0] || this.updateEmail()
    },
    updateEmail: function() {
        var a = {}, b = this.form.getValue("email");
        this.data.email.trim() !== b.trim() ? a.email = b : a.email_bounced=!1;
        var c = P.resourceFactory.create("UserSettingsResource", a);
        c.callUpdate().then(function(a) {
            var b = a.resource_response.data;
            if (this.isInModal()) {
                var c;
                c = P._(b.email_changing_to ? "Thanks! Your email update is pending. You should receive a confirmation email soon." : "Thanks! Your email has been updated. You should receive a confirmation email soon."), P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_CURRENT_USER, P.CONST.PUBSUB_TOPIC_NAG_UPDATED, c), this.destroy()
            }
        }.bind(this))
    }
}), P.modules.UserEditEmail.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.UserEditVerifyWebsite"), goog.require("P.Module"), P.modules.UserEditVerifyWebsite = P.Module.extend({
    events: {
        'keyup input[name="website_url"]': "onInput",
        'input input[name="website_url"]': "onInput"
    },
    onContentReady: function() {
        this.originalWebsite = this.data.website_url;
        var a = {};
        a[P.CONST.PUBSUB_TOPIC_USER_UPDATED] = this.onUserUpdated, this.pubsubSubscribe(P.CONST.PUBSUB_CHANNEL_CURRENT_USER, a);
        var b = this.getChildById("verifyWebsite");
        this.listen(b, P.CONST.EVENT_BUTTON_CLICK, this.onClick)
    },
    onUserUpdated: function() {
        this.render()
    },
    onInput: function(a) {
        var b = $(a.target).val(), c = this.getChildById("verifyWebsite"), d = this.options.domain_verified && b === this.originalWebsite;
        this.$(".verifiedDomainContainer").toggleClass("hidden", !d), this.$(".verifyButton").toggleClass("hidden", d), b ? c.enable() : c.disable()
    },
    showModal: function() {
        this.showLoading();
        var a = {
            name: "DomainVerify",
            resource: {
                name: "DomainVerifyResource",
                options: {}
            }
        };
        P.loadModule(a).then(function(a) {
            this.hideLoading();
            var b = {
                show_api_error: !0
            };
            this.showInModal(a, b)
        }.bind(this))
    },
    onClick: function() {
        var a = this.$('input[name="website_url"]').val();
        if (a === this.originalWebsite)
            return void this.showModal(a);
        var b = this.getChildById("verifyWebsite");
        b.showLoading();
        var c = P.resourceFactory.create("UserSettingsResource", {
            website_url: a
        });
        c.callUpdate().then(function() {
            P.pubsub.publish(this.options.user_id, P.CONST.PUBSUB_TOPIC_USER_UPDATED), this.showModal(a)
        }.bind(this)).fin(function() {
            b.hideLoading()
        })
    }
}), P.modules.UserEditVerifyWebsite.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.UserEducationGuide"), goog.require("P.modules.Tutorial"), goog.require("P.Module"), P.modules.UserEducationGuide = P.modules.Tutorial.extend({
    onContentReady: function() {
        this.manager = P.TutorialManager.instance(), this.childListen(P.CONST.EVENT_NEXT, this.manager._next.bind(this.manager)), this.childListen(P.CONST.EVENT_PREVIOUS, this.manager._previous.bind(this.manager)), this.childListen(P.CONST.EVENT_DISMISS, this.manager._onDismiss.bind(this.manager))
    }
}), P.modules.UserEducationGuide.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.UserEducationGuideDropdown"), goog.require("P.Module"), P.modules.UserEducationGuideDropdown = P.Module.extend({
    events: {
        "click .guide": "onClickGuide"
    },
    onContentReady: function() {
        P.pubsub.subscribe(P.CONST.PUBSUB_CHANNEL_TUTORIAL, P.CONST.PUBSUB_TOPIC_TUTORIAL_TRIGGER_ACTIVE, function(a, b, c) {
            c ? (this.options.guides = [c], this.$el.removeClass("noGuides"), this.render()) : (this.options.guides = [], this.render())
        }.bind(this))
    },
    onClickGuide: function(a) {
        this.triggerEvent(P.CONST.EVENT_DISMISS, null, !0);
        var b = $(a.target).closest(".guide").attr("data-name");
        P.TutorialManager.instance().startTutorial(b, {
            display_data: {
                automatic_trigger: !0
            }
        })
    }
}), P.modules.UserEducationGuideDropdown.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/UserEducationGuideDropdown/UserEducationGuideDropdown.nunjucks"), goog.provide("P.modules.UserEducationGuideStep"), goog.require("P.Module"), P.modules.UserEducationGuideStep = P.Module.extend({}), P.modules.UserEducationGuideStep.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/UserEducationGuideStep/UserEducationGuideStep.nunjucks"), goog.provide("P.modules.UserEducationGuideTooltip"), goog.require("P.Module"), goog.require("P.modules.UserEducationGuideStep"), P.modules.UserEducationGuideTooltip = P.modules.UserEducationGuideStep.extend({
    onContentReady: function() {
        var a = P.Viewport, b = $(this.options.anchor), c = b.offset().left + b.outerWidth() / 2;
        this.$el.addClass(c > a.width * (2 / 3) ? "caretOnRight" : c < a.width * (1 / 3) ? "caretOnLeft" : "caretInMiddle")
    }
}), P.modules.UserEducationGuideTooltip.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/UserEducationGuideTooltip/UserEducationGuideTooltip.nunjucks"), goog.provide("P.modules.UserEducationTriggerCard"), goog.require("P.Module"), P.modules.UserEducationTriggerCard = P.Module.extend({
    events: {
        click: "onClick"
    },
    onClick: function() {
        this.triggerEvent(P.CONST.EVENT_TRIGGER_FLYOUT_CLICKED, null, !0)
    }
}), P.modules.UserEducationTriggerCard.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/UserEducationTriggerCard/UserEducationTriggerCard.nunjucks"), goog.provide("P.modules.UserInfoBar"), goog.require("P.Module"), goog.require("P.modules.InfoBarBase"), P.modules.UserInfoBar = P.modules.InfoBarBase.extend({}), P.modules.UserInfoBar.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.UserNavigateButton"), goog.require("P.Module"), goog.require("P.modules.NavigateButton"), P.modules.UserNavigateButton = P.modules.NavigateButton.extend({}), P.modules.UserNavigateButton.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.UserProfileContent"), goog.require("P.Module");
var BOARDS_TAB = "boards", PINS_TAB = "pins";
P.modules.UserProfileContent = P.Module.extend({
    onCreated: function() {
        var a = {};
        a[P.CONST.PUBSUB_TOPIC_PIN_CREATED] = this.onPinAdded, this.pubsubSubscribe(P.CONST.PUBSUB_CHANNEL_CURRENT_USER, a)
    },
    addTutorials: function() {
        if (this.options.tab === BOARDS_TAB) {
            var a = P.ExperienceManager.instance(), b = P.Experiences.Placement.WEB_USER_PROFILE_TAKEOVER;
            a.getPlacedExperienceWithContext(b, {
                user_id: this.data.id
            }).then(function(c) {
                if (c) {
                    var d = P.ExperienceManager.Tutorials[c.experience_id];
                    d && (P.TutorialManager.instance().startTutorial(d, {
                        display_data: c.display_data
                    }), a.viewPlacedExperience(b, c.experience_id))
                }
            })
        }
    },
    onContentReady: function() {
        if (!this.data.board_count&&!this.data.secret_board_count) {
            var a = {};
            a[P.CONST.PUBSUB_TOPIC_BOARD_CREATED] = this.onFirstBoardCreated, this.pubsubSubscribe(P.CONST.PUBSUB_CHANNEL_CURRENT_USER, a)
        }
        _.defer(this.addTutorials.bind(this)), this.followingContentGrid = this.getChildByModuleName("Grid"), this.childListen(P.CONST.EVENT_REFRESH_FOLLOWING_GRID, this.onRefreshFollowingGrid)
    },
    onRefreshFollowingGrid: function(a) {
        var b, c = {};
        "navFollowedInterests" === a.data.following_tab ? (b = "InterestFollowingResource", c.view_type = "followingView") : "navFollowedPinners" === a.data.following_tab ? b = "UserFollowingResource" : "navFollowedBoards" === a.data.following_tab && (b = "BoardFollowingResource"), b && (this.followingContentGrid.resource = P.resourceFactory.create(b, {
            username: a.target.options.username
        }), this.followingContentGrid.options.item_options = c, this.followingContentGrid.render())
    },
    onFirstBoardCreated: function() {
        this.pubsubUnsubscribe(P.CONST.PUBSUB_CHANNEL_CURRENT_USER, P.CONST.PUBSUB_TOPIC_BOARD_CREATED), this.render()
    },
    onPinAdded: function(a, b, c) {
        if (this.options.tab === PINS_TAB && c.board.privacy !== P.CONST.BOARD_PRIVACY_SECRET && this.extraData.isOwnProfile) {
            var d = this.getChildById("userPins");
            d ? d.prependNewItems(1) : this.render()
        }
    }
}), P.modules.UserProfileContent.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.UserProfileFollow"), goog.require("P.Module");
var CLOSE_DELAY = 7e3;
P.modules.UserProfileFollow = P.Module.extend({
    onContentReady: function() {
        var a = this.getChildById("followButton");
        a && this.listen(a, "toggleFollow", function() {
            this.$(".userProfileOnEntry").addClass("hidden"), a.getState() ? (this.$(".UserProfileFollowPins").addClass("followed"), this.$(".userProfileFollowButton").addClass("hidden"), this.$(".postUnFollow").addClass("hidden"), this.$(".postFollow").removeClass("hidden"), P.setTimeout(function() {
                window.close()
            }, CLOSE_DELAY)) : this.$(".postUnFollow").removeClass("hidden")
        })
    }
}), P.modules.UserProfileFollow.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.UserProfileFollowPins"), goog.require("P.Module"), P.modules.UserProfileFollowPins = P.Module.extend({
    onContentReady: function() {
        for (var a = this.$(".pinSlot"), b = a.length, c = 0, d = function() {
            $(this).parent().addClass("visible")
        }, e = 0; e < this.data.length; e++)
            if (this.data[e].images) {
                var f = document.createElement("IMG");
                c < b && (f.onload = d), f.src = this.data[e].images["236x"].url, a[c%b].appendChild(f), c += 1
            }
    }
}), P.modules.UserProfileFollowPins.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.UserProfileHeader"), goog.require("P.Module"), P.modules.UserProfileHeader = P.Module.extend({
    onCreated: function() {
        this._resized=!1, this._canSeeFixedHeader=!1
    },
    _resizeTextIfReady: function() {
        !this._resized && this.inDom && this.contentReady && this.$(".userProfileHeaderBio").overflowingText()
    },
    onContentReady: function() {
        if (this._resizeTextIfReady(), this.options.user_id) {
            var a = {};
            a[P.CONST.PUBSUB_TOPIC_USER_UPDATED] = this.onUserUpdated, this.pubsubSubscribe(this.options.user_id, a)
        }
        if (this.options.report_user_spam&&!this.data.blocked_by_me) {
            P.getModalManager().removeAllModals();
            var b = {
                name: "FlagUser",
                options: {
                    full_name: this.data.full_name,
                    first_name: this.data.first_name,
                    blocked_by_me: this.data.blocked_by_me,
                    user_id: this.data.id,
                    username: this.data.username,
                    hide_other_field: !0
                }
            };
            P.loadModule(b).then(function(a) {
                this.showInModal(a)
            }.bind(this))
        }
        this.scrollListener = this.listen(this.getScrollableElement(), P.CONST.EVENT_SCROLL, this.onScroll)
    },
    onAddedToDom: function() {
        this._resizeTextIfReady()
    },
    onUserUpdated: function() {
        this.render()
    },
    onScroll: function() {
        var a = this.getScrollableElement().scrollTop();
        if (!(a < 0)) {
            var b = a > 120;
            b^this._canSeeFixedHeader && (this.$(".fixedHeaderNameAndImage").animate({
                bottom: this._canSeeFixedHeader ? "70px": "19px"
            }, 200), this.$(".fixedHeader").toggleClass("shadow"), this._canSeeFixedHeader = b)
        }
    }
}), P.modules.UserProfileHeader.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.UserProfileImageUploader"), goog.require("P.Module"), P.modules.UserProfileImageUploader = P.Module.extend({
    onCreated: function() {
        this.onUpdateSuccess = this.onUpdateSuccess.bind(this)
    },
    onContentReady: function() {
        var a = this.getChildById("uploader");
        this.listen(a, P.CONST.EVENT_UPLOAD_SUCCESS, this.onUploadSuccess), this.listen(a, P.CONST.EVENT_UPLOAD_ERROR, this.onUploadError)
    },
    onUploadSuccess: function(a) {
        P.trackGAEvent("user_profile_image_upload", P.CONST.GA_ACTION_SUCCESS), this.imageUrl = a.data.image_url, this.updateUserProfileImage()
    },
    onUploadError: function(a) {
        P.trackGAEvent("user_profile_image_upload", P.CONST.GA_ACTION_ERROR);
        var b = a.data;
        P.showError(b)
    },
    getUserSettingsResource: function() {
        return P.resourceFactory.create("UserSettingsResource", {
            profile_image_url: this.imageUrl
        })
    },
    updateUserProfileImage: function() {
        var a = this.getUserSettingsResource();
        a.callUpdate({
            success: this.onUpdateSuccess
        })
    },
    onUpdateSuccess: function(a) {
        var b = a.resource_response;
        b.data.profile_image_url = this.imageUrl, P.pubsub.publish(this.options.user_id, P.CONST.PUBSUB_TOPIC_USER_UPDATED, b), this.destroy()
    }
}), P.modules.UserProfileImageUploader.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.UserRegister"), goog.require("P.Module"), goog.require("P.modules.UserRegisterBase"), P.modules.UserRegister = P.modules.UserRegisterBase.extend({
    onContentReady: function() {
        P.modules.UserRegisterBase.prototype.onContentReady.call(this);
        var a = this.$("input[name=email]"), b = P.getConversationsManager().getUnauthUserEmail();
        !a.val() && b && a.val(b)
    }
}), P.modules.UserRegister.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.UserRegisterDetails"), goog.require("P.Module"), P.modules.UserRegisterDetails = P.Module.extend({
    onContentReady: function() {
        this.finalSignupButton = this.$(".signup"), this.userFullNameField = this.$("input[name='full_name']"), this.userAgeInput = this.$("#userAge"), this.userAgeField = this.$("input[name='age']"), this.secondErrorTooltip = this.$("#secondStepTooltip"), this.userFullNameField.focus();
        var a = {
            age: [P.Validator.Age({
                message: P._("Please enter a valid number.")
            })],
            full_name: [P.Validator.Name({
                message: P._("<b>And your name is...?</b>")
            })]
        };
        this.form = new P.Form(this.$("form"), a), this.getChildById("submitButton") && this.listen(this.getChildById("submitButton"), P.CONST.EVENT_BUTTON_CLICK, this.validateAndCallback), this.$(".inNux").keypress(function(a) {
            13 === a.keyCode && this.finalSignupButton.click()
        }.bind(this))
    },
    validateAndCallback: function() {
        this.form.validateField(this.userFullNameField, function(a) {
            0 !== a.errors.length ? this.validateComplete(a.errors[0]) : "" === this.userAgeInput.val().trim() ? this.triggerEvent(P.CONST.EVENT_CONFIRM, this, !0) : this.form.validateField(this.userAgeField, function(a) {
                0 !== a.errors.length ? this.validateComplete(a.errors[0]) : this.triggerEvent(P.CONST.EVENT_CONFIRM, this, !0)
            }.bind(this))
        }.bind(this))
    },
    validateComplete: function(a) {
        this.$(".errorIcon").hide();
        var b = this.$("input.hasError");
        b.siblings("em").fadeIn(), b.hasClass("name") ? this.secondErrorTooltip.removeClass("secondTooltip") : this.secondErrorTooltip.addClass("secondTooltip"), this.secondErrorTooltip.html(a).fadeIn()
    }
}), P.modules.UserRegisterDetails.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.UserRegisterPage"), goog.require("P.Module"), goog.require("P.modules.UserRegisterPageBase"), P.modules.UserRegisterPage = P.modules.UserRegisterPageBase.extend({
    onAddedToDom: function() {
        P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_SITE, P.CONST.PUBSUB_TOPIC_NAG_STATE, !1)
    },
    onRemovedFromDom: function() {
        P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_SITE, P.CONST.PUBSUB_TOPIC_NAG_STATE, !0)
    }
}), P.modules.UserRegisterPage.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.UserSettingsPage"), goog.require("P.Module"), goog.require("P.modules.Button");
var CLASS_TOC_SELECTED = "selected", SCROLL_MARGIN_OF_ERROR = 2;
P.modules.UserSettingsPage = P.Module.extend({
    events: {
        "click .toc li": "onTOCClick"
    },
    onContentReady: function() {
        var a = {
            email: [P.Validator.Email()],
            first_name: [P.Validator.Required()],
            username: [P.Validator.Required()],
            about: [P.Validator.Length({
                max: P.CONST.MAX_CHARS_FOR_USER_DESCRIPTION
            })]
        };
        this.data.is_partner && (a.contact_name = [P.Validator.Required()], a.business_name = [P.Validator.Required()]), this.$form = this.$("form"), this.form = new P.Form(this.$form, a), this.listen(this.form, P.CONST.EVENT_SUBMIT_VALIDATED, this.onSubmitValidated), this.childListen(P.CONST.EVENT_BUTTON_CLICK, this.onButtonClick);
        var b = {};
        b[P.CONST.PUBSUB_TOPIC_USER_CHANGED_PASSWORD] = this.onPasswordChanged, this.pubsubSubscribe(P.CONST.PUBSUB_CHANNEL_SITE, b), this.negativeSpaceAdded = 0, this.scrollListener = this.listen(this.getScrollableElement(), P.CONST.EVENT_SCROLL, this.onScroll), this.$(".formFooter").fixedsticky()
    },
    onPasswordChanged: function(a, b, c) {
        var d = this.getChildById("userChangePasswordButton");
        if (d.options.submodule.options.has_password=!0, d.options.text = this.extraData.change_password_text, d.render(), c) {
            var e = this.getChildById("userSocialNetworkSettings");
            e.render()
        }
    },
    onButtonClick: function(a) {
        var b = a.target, c = b.id;
        switch (c) {
        case"clearRecentSearches":
            this.clearRecentSearches(a)
        }
    },
    clearRecentSearches: function(a) {
        var b = a.target;
        b.disable();
        var c = P.resourceFactory.create("TypeaheadClearRecentResource");
        c.callDelete({
            showError: !1
        }).fin(function() {
            b.enable()
        })
    },
    onSubmitValidated: function(a) {
        if (!a.errors[0]) {
            var b = this.getChildById("notifications"), c = [this.save()];
            b && c.push(b.updateResource()), Promise.all(c).then(function(a) {
                var b = a[0];
                if (b&&!b.resource_response.error) {
                    var c = b.resource_response.data;
                    this.data.email !== this.email && c.email_changing_to ? this.showPendingEmailChange() : this.navigateToSettingsPage()
                }
            }.bind(this))
        }
    },
    navigateToUserProfilePage: function(a) {
        var b = "/" + a + "/";
        this.navigate(b)
    },
    navigateToSettingsPage: function() {
        var a = "/settings";
        this.navigate(a, !0)
    },
    save: function() {
        var a = this.$form.serializeArray(), b = {};
        _.each(a, function(a) {
            b[a.name] = "on" === a.value || "off" === a.value ? "on" === a.value : a.value
        }), this.$form.find("input[type=checkbox]").each(function() {
            var a = $(this);
            b[a.attr("name")] = a.is(":checked")
        });
        var c = this.getChildById("submitButton"), d = P.resourceFactory.create("UserSettingsResource", b);
        return this.email = b.email, c.showLoading(), d.callUpdate().fin(function() {
            c.hideLoading()
        })
    },
    showPendingEmailChange: function() {
        var a = P.string.format(P._("To finish updating your address, look for the confirmation email we sent to {{ current_email }}."), {
            current_email: this.data.email
        }), b = {
            name: "ConfirmDialog",
            options: {
                button_text: P._("Ok"),
                body_message: a,
                title: P._("You're almost done!"),
                template: "generic"
            }
        };
        P.loadModule(b).then(function(a) {
            this.showInModal(a, {
                can_dismiss: !1
            }), this.listen(a, P.CONST.EVENT_CLOSE, this.navigateToSettingsPage), this.listen(a, P.CONST.EVENT_CONFIRM, this.navigateToSettingsPage)
        }.bind(this))
    },
    onTOCClick: function(a) {
        var b = $(a.currentTarget).find("a").attr("href"), c = $(b).position().top;
        return this.$(".toc li").removeClass(CLASS_TOC_SELECTED), $(a.currentTarget).addClass(CLASS_TOC_SELECTED), this.tocClicked=!0, P.scrollToTop({
            newScrollOffset: c,
            duration: 800,
            callback: function() {
                this.tocClicked=!1
            }.bind(this)
        }), a.stopPropagation(), !1
    },
    addNegativeSpace: function() {
        if (0 === this.negativeSpaceAdded) {
            var a = this.$(".standardForm");
            a.height("100%");
            var b = this.$("#apps").position().top, c = $(document).height() - this.getScrollableElement().height(), d = b - c;
            if (d > 0) {
                var e = a.height();
                a.height(e + d), this.negativeSpaceAdded = d
            }
        }
    },
    onScroll: function() {
        var a = this.getScrollableElement().scrollTop();
        if (!(a < 0)) {
            if (!this.tocClicked) {
                for (var b = null, c = 0, d = this.$(".sectionTitle"), e = 0; e < d.length; e++) {
                    var f = d[e], g = $(f).position().top;
                    a >= g - SCROLL_MARGIN_OF_ERROR && (!b || c < g) && (b = f, c = g)
                }
                this.$(".toc li").removeClass(CLASS_TOC_SELECTED), this.$('.toc a[href="#' + $(b).attr("id") + '"]').parent("li").addClass(CLASS_TOC_SELECTED)
            }
            this.addNegativeSpace()
        }
    }
}), P.modules.UserSettingsPage.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.UserSocialNetworkSettings"), goog.require("P.Module"), P.modules.UserSocialNetworkSettings = P.Module.extend({
    FB_PUBLISH_ACTIONS_PERMISSION: "publish_actions",
    onCreated: function() {
        this.childListen("change", this.onChildChange), P.pubsub.subscribe(P.CONST.PUBSUB_CHANNEL_CURRENT_USER, P.CONST.PUBSUB_TOPIC_SOCIAL_NETWORK_UPDATED, function() {
            this.render()
        }.bind(this))
    },
    disconnectFromSocial: function(a, b, c) {
        this.showLoading(!0);
        var d = {
            error: function() {
                a.toggle()
            },
            complete: function() {
                this.hideLoading()
            }.bind(this)
        };
        if (c || "facebookTimelineToggle" !== a.id) {
            var e = P.SocialNetworkSettingsManager.instance();
            e.handleConnect(c, b, d)
        } else 
            P.FbUtil.maybeRequestFbTimelinePermission(d, this.extraData.facebookId)
    },
    onChildChange: function(a) {
        var b = a.target, c = b.isChecked && b.isChecked(), d = null;
        switch (b.id) {
        case"facebookToggle":
            if (!(c&&!this.extraData.facebookUrl ||!c && this.extraData.facebookUrl))
                return;
            d = P.SocialConnect.FACEBOOK, c || this.getChildById("facebookTimelineToggle").setChecked(!1);
            break;
        case"facebookTimelineToggle":
            var e = {};
            e.facebook_timeline_enabled = c;
            var f = P.resourceFactory.create("UserSettingsResource", e);
            if (f.callUpdate({}), !c || this.extraData.facebookTimelineEnabled)
                return void(this.extraData.facebookTimelineEnabled=!this.extraData.facebookTimelineEnabled);
            d = null;
            break;
        case"twitterToggle":
            if (!(c&&!this.extraData.twitterUrl ||!c && this.extraData.twitterUrl))
                return;
            d = P.SocialConnect.TWITTER;
            break;
        case"gplusToggle":
            if (!(c&&!this.extraData.gplusUrl ||!c && this.extraData.gplusUrl))
                return;
            d = P.SocialConnect.GPLUS;
            break;
        case"googleToggle":
            if (!(c&&!this.extraData.connected_to_google ||!c && this.extraData.connected_to_google))
                return;
            d = P.SocialConnect.GOOGLE;
            break;
        case"yahooToggle":
            if (!(c&&!this.extraData.connected_to_yahoo ||!c && this.extraData.connected_to_yahoo))
                return;
            d = P.SocialConnect.YAHOO;
            break;
        case"rakutenToggle":
            if (!(c&&!this.extraData.connected_to_rakuten ||!c && this.extraData.connected_to_rakuten))
                return;
            d = P.SocialConnect.RAKUTEN;
            break;
        case"microsoftToggle":
            if (!(c&&!this.extraData.connected_to_microsoft ||!c && this.extraData.connected_to_microsoft))
                return;
            d = P.SocialConnect.MICROSOFT;
            break;
        default:
            return 
        }
        if (c || this.extraData.has_password)
            this.disconnectFromSocial(b, c, d);
        else {
            var g = {
                name: "UserChangePassword",
                options: {
                    has_password: !1,
                    render_social_networks: !1
                }
            }, h=!1;
            P.loadModule(g).then(function(a) {
                this.showInModal(a), this.listen(a, "destroyed", function() {
                    h ? this.disconnectFromSocial(b, c, d) : (P.showError(P._("A password must be set before unlinking.")), b.toggle())
                }), this.listen(a, "success", function() {
                    h=!0
                })
            }.bind(this))
        }
    }
}), P.modules.UserSocialNetworkSettings.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.VerifyWebsite"), goog.require("P.Module"), P.modules.VerifyWebsite = P.Module.extend({}), P.modules.VerifyWebsite.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.VisualCropSearchButton"), goog.require("P.Module"), goog.require("P.modules.Button"), P.modules.VisualCropSearchButton = P.modules.Button.extend({
    onClick: function() {
        this.triggerEvent(P.CONST.EVENT_VISUAL_SEARCH_OBJECT_CROP_BUTTON_PRESSED, null, !0)
    },
    moduleRenderer: new P.ModuleRendererLocal("app/desktop/modules/VisualCropSearchButton/VisualCropSearchButton.nunjucks")
}), P.modules.VisualCropSearchButton.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/VisualCropSearchButton/VisualCropSearchButton.nunjucks"), goog.provide("P.modules.VisualSearchPage"), goog.require("P.Module"), P.modules.VisualSearchPage = P.Module.extend({
    onContentReady: function() {
        this._fadeOutBoxesIfReady()
    },
    onAddedToDom: function() {
        this._fadeOutBoxesIfReady()
    },
    _fadeOutBoxesIfReady: function() {
        this.inDom && this.contentReady && setTimeout(function() {
            this.$(".visualSearchOverlayInnerWrapper>img").fadeTo(1500, 1)
        }.bind(this), 1e3)
    }
}), P.modules.VisualSearchPage.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.VisualSearchPageQueryItem"), goog.require("P.Module"), P.modules.VisualSearchPageQueryItem = P.Module.extend({}), P.modules.VisualSearchPageQueryItem.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.VisualSearchSelector"), goog.require("P.Module"), P.modules.VisualSearchSelector = P.Module.extend({
    events: {
        "click label": "_onPinTypeLabelClick"
    },
    navigateToPinType: function(a) {
        this.navigate("/search/" + a + "/" + this.options.pin_id + "/")
    },
    _onPinTypeLabelClick: function(a) {
        var b = $(a.currentTarget), c = b.find("input"), d = c.val();
        if (d !== this.options.pin_type) {
            var e = c.attr("data-url") || d;
            return this.navigateToPinType(e), !1
        }
    }
}), P.modules.VisualSearchSelector.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.VisuallySimilar"), goog.require("P.Module"), P.modules.VisuallySimilar = P.Module.extend({
    events: {
        "change .queryType": "onButtonClick"
    },
    onButtonClick: function(a) {
        console.log("Change to", a.target.value), this.resource.options.query_type = a.target.value, this.render().then(function() {
            this.fadeIn()
        }.bind(this))
    }
}), P.modules.VisuallySimilar.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.YourWebsiteDropdown"), goog.require("P.Module"), P.modules.YourWebsiteDropdown = P.Module.extend({}), P.modules.YourWebsiteDropdown.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.reg.ContextualSignup"), goog.require("P.Module");
var CONTEXTUAL_TYPE_TO_KEY = {
    pin: "pin_to_create",
    board: "board_to_follow",
    user: "user_to_follow"
}, STEPS = ["wallStep", "optionsStep", "signupStep"], ALL_STEPS = STEPS.join(" ");
P.modules.reg.ContextualSignup = P.Module.extend({
    onContentReady: function() {
        this.multiStepSignupSetup(), this.loginButton = this.getChildById("loginButton"), this.joinButton = this.getChildById("joinButton"), this.skipButton = this.getChildById("skipButton"), this.facebookConnectButton = this.getChildById("facebookConnectButton"), this.emailButton = this.getChildById("emailButton"), this.$signupForm = this.$(".csSignupForm"), this.options.starting_step && this.setStep(this.options.starting_step), this.joinButton && this.listen(this.joinButton, P.CONST.EVENT_BUTTON_CLICK, this.onJoinClick), this.emailButton && this.listen(this.emailButton, P.CONST.EVENT_BUTTON_CLICK, this.onEmailClick), this.facebookConnectButton && this.listen(this.facebookConnectButton, P.CONST.FACEBOOK_LOGIN_FAILURE, this.onFacebookLoginFailure), this.childListen(P.CONST.EVENT_USER_REGISTER, this.onRegisterSuccess), this.skipButton && this.listen(this.skipButton, P.CONST.EVENT_BUTTON_CLICK, this.onSkipClick), this.childListen(P.CONST.EVENT_NAVIGATE, this.onChildNavigate), this.listen(this, P.CONST.EVENT_NAVIGATE, this.onChildNavigate), P.trackRegisterAction(this.data && this.data.type ? "contextual_signup_" + this.data.type : "contextual_signup_no_context"), P.trackRegisterAction("register_landing");
        var a = {};
        a[P.CONST.PUBSUB_TOPIC_MODAL_MASK_CLICK] = this.onModalMaskClick, this.pubsubSubscribe(P.CONST.PUBSUB_CHANNEL_SITE, a)
    },
    multiStepSignupSetup: function() {
        P.trackRegisterAction("popup_modal_loaded"), this.fbButton = this.$(".unAuthFacebookConnect"), this.groupSeparatorDiv = this.$(".groupSeparatorDark"), this.step1Bottom = this.$(".step1Bottom"), this.buttonContainer = this.$(".registerButtons"), this.businessSignupDiv = this.$(".csBusinessSignup"), this.tosFooter = this.$(".outerTermsOfServiceFooter"), this.loginLine = this.$(".loginLine"), this.defaultDelay = 200, this.childListen("transitionToSecondStep", function() {
            (this.extraData && ("mixed_https_enabled" === this.extraData.inline_signup_modal || "employees" === this.extraData.inline_signup_modal) || P.experiments.instance.inExperimentGroupsActiveOrTriggerable("closeup_signup_modal_js", ["enabled_slideshow", "enabled_image", "enabled_closeup", "employees"])) && this.loginLine.fadeOut(this.defaultDelay), this.businessSignupDiv.fadeIn(), this.tosFooter.fadeOut(), P.trackRegisterAction("register_multi_screen_username_pass_complete")
        }), this.childListen("fadeOutConnectOptions", function() {
            this.fbButton.fadeOut(this.defaultDelay)
        }), !this.extraData || "mixed_https_enabled" !== this.extraData.inline_signup_modal && "employees" !== this.extraData.inline_signup_modal || (this.groupSeparatorDiv.show(), this.step1Bottom.show(), this.tosFooter.show(), this.$(".csContent").css({
            paddingTop: "10px"
        }), this.loginLine.css({
            marginTop: "5px"
        }), this.$(".buttonWrapper").css({
            marginTop: "15px"
        }), this.$(".passwordField").css({
            marginTop: "0"
        }), P.trackRegisterAction("register_multi_screen_username_pass_loaded"))
    },
    onRegisterSuccess: function(a) {
        this.options.open_new_window_on_success && (a.stopPropagation(), P.changeWindowLocation("/", !0), window.close()), this.options.next && "/" === this.options.next.charAt(0) && (a.stopPropagation(), window.location = this.options.next)
    },
    onChildNavigate: function(a) {
        if (this.options.next && a.data&&-1 !== a.data.url.indexOf("/login/")) {
            var b = P.getQueryStringParams();
            b.next = this.options.next, a.data.url = "/login/?" + $.param(b)
        }
    },
    onModalMaskClick: function() {
        var a = this.$("h3");
        a.addClass("shake"), P.setTimeout(function() {
            a.removeClass("shake")
        }, 1500)
    },
    setStep: function(a) {
        this.$el.removeClass(ALL_STEPS), this.$el.addClass(a)
    },
    onJoinClick: function(a) {
        if (a.stopPropagation(), this.options.redirect_to_signup) {
            var b = P.absolutify("/join/", "https:");
            return this.options.auto_follow_interest ? b = P.url.appendQueryString(b, {
                auto_follow_interest: this.options.auto_follow_interest
            }) : this.options.prev && (b = P.url.appendQueryString(b, {
                prev: this.options.prev
            })), void P.changeWindowLocation(b, !1)
        }
        this.setStep("optionsStep"), P.trackRegisterAction("contextual_signup_join")
    },
    onSkipClick: function() {
        this.destroy()
    },
    onEmailClick: function(a) {
        a.stopPropagation(), this.showSignupForm({}), P.trackRegisterAction("contextual_signup_join_email")
    },
    getContextualItem: function() {
        if (!this.data)
            return {};
        if ("pinnable" === this.data.type)
            return {
                pin_to_create_url: this.data.link,
                pin_to_create_image_url: this.data.url
            };
        var a = {}, b = CONTEXTUAL_TYPE_TO_KEY[this.data.type];
        return b && (a[b] = this.data.id), a
    },
    onFacebookLoginFailure: function(a) {
        var b = a.data;
        a.stopPropagation(), P.trackRegisterAction("contextual_signup_join_facebook"), this.facebookConnectButton.showLoading(), P.UserRegistration.fetchNetworkData(P.SocialConnect.FACEBOOK).then(function(a) {
            this.log.debug("FB data:", a), this.facebookConnectButton.hideLoading();
            var c = {
                image_url: a.image_url,
                first_name: a.first_name,
                last_name: a.last_name,
                gender: a.gender,
                email: a.email,
                social_username: a.username,
                facebook_id: b.facebook_id,
                facebook_token: b.facebook_token
            };
            this.showSignupForm({
                form: c,
                network: P.SocialConnect.FACEBOOK,
                show_username: !1,
                show_email: !1,
                show_name: !1,
                show_password: !1,
                show_country: !1,
                show_gender: !1,
                show_facebook: !0
            })
        }.bind(this))
    },
    showSignupForm: function(a, b) {
        a.contextualItem = this.getContextualItem();
        var c = function() {
            this.signupForm.setOptions(a), this.signupForm.render(b || P.NOOP)
        }.bind(this);
        if (this.signupForm)
            c();
        else {
            var d = {
                name: "reg.SignupForm",
                options: a
            };
            P.loadModule(d).then(function(a) {
                this.signupForm = a, this.insertChild(a, this.$signupForm), this.setStep("signupStep"), this.$signupForm.show(), c()
            }.bind(this))
        }
    }
}), P.modules.reg.ContextualSignup.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.reg.ContextualSignupSenderInfo"), goog.require("P.Module"), P.modules.reg.ContextualSignupSenderInfo = P.Module.extend({}), P.modules.reg.ContextualSignupSenderInfo.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.reg.SignupForm"), goog.require("P.Module"), P.modules.reg.SignupForm = P.Module.extend({
    onContentReady: function() {
        this.setupForm()
    },
    onAddedToDom: function() {
        this.$("form input").first().focus()
    },
    setupForm: function() {
        if (!this.form) {
            var a = {
                first_name: [P.Validator.Required()],
                email: [P.Validator.Required(), P.Validator.Email()],
                gender: [P.Validator.Required()]
            };
            this.options.show_password!==!1 && (a.password = [P.Validator.Password()]), this.form = new P.Form(this.$("form"), a, {
                insertErrorsBefore: !0
            }), this.formListener = this.listen(this.form, P.CONST.EVENT_SUBMIT_VALIDATED, this.onSubmitValidated), this.submitButton = this.getChildById("submitButton"), this.options.network || this.submitButton.disable()
        }
    },
    showFields: function(a) {
        _.each(a, function(a) {
            var b = this.$("form input[name=" + a + "]");
            b.parents(".hidden").removeClass("hidden")
        }.bind(this))
    },
    onSubmitValidated: function(a) {
        if (!a.errors ||!a.errors.length) {
            var b = _.extend({}, this.options.form, this.options.contextualItem, this.form.getData());
            this.submitButton.showLoading(), P.UserRegistration.register(this.options.network, b).then(function(a) {
                this.log.debug("Signup success:", a), this.triggerEvent(P.CONST.EVENT_USER_REGISTER, {}, !0) && (window.location = "/")
            }.bind(this), function() {
                this.showFields(["email"]), this.submitButton.hideLoading()
            }.bind(this))
        }
    }
}), P.modules.reg.SignupForm.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ui.ImageCrop"), goog.require("P.Module"), P.modules.ui.ImageCrop = P.Module.extend({
    events: {
        "mousedown .drag": "onStartDrag",
        "touchstart .drag": "onStartDrag"
    },
    onAddedToDom: function() {
        this._positionIfReady()
    },
    onContentReady: function() {
        _.defaults(this.options, {
            size: {
                width: 222,
                height: 150
            },
            padding: 60
        }), this.$holder = this.$(".holder"), this.$bg = this.$(".bg"), this.$help = this.$(".help"), this.$frame = this.$(".frame"), this.$mask = this.$(".mask"), this.$spinner = this.$(".spinner"), this.$holder.show().css("height", this.options.size.height + 2 * this.options.padding), this.options.help_text && this.$help.html(this.options.help_text), this._positionIfReady()
    },
    _positionIfReady: function() {
        if (!this._positioned && this.inDom && this.contentReady) {
            this._positioned=!0;
            var a = this._frameBounds = {
                left: this.$holder.width() / 2 - this.options.size.width / 2,
                width: this.options.size.width,
                top: this.options.padding,
                height: this.options.size.height
            };
            a.ratio = a.height / a.width, this.$frame.css(a);
            var b = this.$mask.children();
            b.eq(0).css({
                top: 0,
                left: 0,
                right: 0,
                height: a.top
            }), b.eq(1).css({
                top: a.top,
                left: a.left + a.width,
                right: 0,
                height: a.height
            }), b.eq(2).css({
                top: a.top + a.height,
                left: 0,
                right: 0,
                bottom: 0
            }), b.eq(3).css({
                top: a.top,
                left: 0,
                width: a.left,
                height: a.height
            }), this.options.image_url && this.setImage(this.options.image_url)
        }
    },
    initImage: function() {
        if (!this.$img.height() ||!this.$img.width())
            return void _.delay(this.initImage.bind(this), 200);
        var a = this._imageBounds = {
            nativeWidth: this.$img.width(),
            nativeHeight: this.$img.height()
        };
        a.ratio = a.nativeHeight / a.nativeWidth, this.$img.addClass("in"), this._fitImage(), this._centerImage(), this._hideSpinner()
    },
    onStartDrag: function(a) {
        var b = "touchstart" === a.type;
        this._mousePosition = b ? {
            x: a.originalEvent.touches[0].pageX,
            y: a.originalEvent.touches[0].pageY
        } : {
            x: a.pageX,
            y: a.pageY
        }, this._startPosition = {
            x: parseInt(this.$bg.css("left"), 10),
            y: parseInt(this.$bg.css("top"), 10)
        }, $("body").on({
            "mousemove.ui-ImageCrop touchmove.ui-ImageCrop": this.onDragging.bind(this),
            "mouseup.ui-ImageCrop touchend.ui-ImageCrop": this.onStopDragging
        }), a.preventDefault()
    },
    onDragging: function(a) {
        a.preventDefault();
        var b = "touchmove" === a.type, c = b ? a.originalEvent.changedTouches[0]: a, d = c.pageX - this._mousePosition.x, e = c.pageY - this._mousePosition.y, f = {
            top: this._startPosition.y + e,
            left: this._startPosition.x + d
        };
        this._clampValues(f), this.$bg.css(f)
    },
    onStopDragging: function() {
        $("body").off("mousemove.ui-ImageCrop mouseup.ui-ImageCrop touchmove.ui-ImageCrop touchend.ui-ImageCrop")
    },
    _clampValues: function(a) {
        a.top = Math.min(a.top, this._frameBounds.top), a.left = Math.min(a.left, this._frameBounds.left), a.top + this._imageBounds.height < this._frameBounds.top + this._frameBounds.height && (a.top = this._frameBounds.top + this._frameBounds.height - this._imageBounds.height + 1), a.left + this._imageBounds.width < this._frameBounds.left + this._frameBounds.width && (a.left = this._frameBounds.left + this._frameBounds.width - this._imageBounds.width + 1)
    },
    setImage: function(a) {
        this._showSpinner();
        var b = this.$img = $("<img>", {
            src: a
        });
        this.$bg.empty().append(b), this.initImage()
    },
    _fitImage: function() {
        var a;
        a = this._imageBounds.ratio >= this._frameBounds.ratio ? this._frameBounds.width / this._imageBounds.nativeWidth : this._frameBounds.height / this._imageBounds.nativeHeight, this._scaleImage(a)
    },
    _centerImage: function() {
        var a = this.$holder.height(), b = this.$holder.width();
        this.$bg.css({
            top: a / 2 - this.$bg.height() / 2 + 1,
            left: b / 2 - this.$bg.width() / 2 + 1
        })
    },
    _scaleImage: function(a) {
        var b = this._imageBounds.width = this._imageBounds.nativeWidth * a, c = this._imageBounds.height = this._imageBounds.nativeHeight * a;
        this.$img.css({
            width: b,
            height: c
        })
    },
    _showSpinner: function() {
        this.$spinner.show()
    },
    _hideSpinner: function() {
        this.$spinner.hide()
    },
    getCropData: function() {
        var a = {
            x: - 1 * (parseInt(this.$bg.css("left"), 10) - parseInt(this._frameBounds.left, 10)),
            y: - 1 * (parseInt(this.$bg.css("top"), 10) - parseInt(this._frameBounds.top, 10))
        }, b = this.$img.width() / this._imageBounds.nativeWidth, c = {
            crop_x: a.x,
            crop_y: a.y,
            nativeHeight: this._imageBounds.nativeHeight,
            nativeWidth: this._imageBounds.nativeWidth,
            height: this.options.size.height,
            width: this.options.size.width,
            scale: b
        };
        return c
    }
}), P.modules.ui.ImageCrop.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ui.ImageUploader"), goog.require("P.Module");
var IMAGE_UPLOADER_CLASS_SELECTED = "selected";
P.modules.ui.ImageUploader = P.Module.extend({
    onCreated: function() {
        this.onUploaderSubmit = this.onUploaderSubmit.bind(this), this.onUploaderComplete = this.onUploaderComplete.bind(this), this.onUploaderProgress = this.onUploaderProgress.bind(this), this.onUploaderError = this.onUploaderError.bind(this)
    },
    enable: function() {
        this.getButton().enable()
    },
    disable: function() {
        this.getButton().disable()
    },
    select: function() {
        this._setSelected(!0)
    },
    _setSelected: function(a) {
        this.$el.toggleClass(IMAGE_UPLOADER_CLASS_SELECTED, a)
    },
    deselect: function() {
        this._setSelected(!1)
    },
    onContentReady: function() {
        this.ensureUploader()
    },
    getUploadUrl: function() {
        return P.absolutify("/upload-image/")
    },
    getFileNameElement: function() {
        return this.$fileName || (this.$fileName = this.$(".uploaderProgress").find("span")), this.$fileName
    },
    getButton: function() {
        return this.getChildById("upload")
    },
    ensureUploader: function() {
        return this.uploader ? this.uploader : (this.uploader = new qq.FineUploaderBasic({
            debug: P.DEBUG,
            button: this.getButton().$el.get(0),
            multiple: !1,
            request: {
                endpoint: this.getUploadUrl(),
                inputName: "img",
                forceMultipart: !0,
                customHeaders: {
                    "X-CSRFToken": P.csrf.getCSRFToken()
                }
            },
            callbacks: {
                onUpload: this.onUploaderSubmit,
                onComplete: this.onUploaderComplete,
                onProgress: this.onUploaderProgress,
                onError: this.onUploaderError,
                showAlert: function(a) {
                    this.log.debug(a)
                }.bind(this)
            }
        }), this.uploader)
    },
    onUploaderSubmit: function() {
        this.getButton().showLoading(), this.triggerEvent(P.CONST.EVENT_UPLOAD_START), this.log.debug("UploaderSubmit", arguments)
    },
    onUploaderComplete: function(a, b, c) {
        c.success && (this.getButton().hideLoading(), this.getButton().setStyles({
            primary: !1
        }), this.triggerEvent(P.CONST.EVENT_UPLOAD_SUCCESS, c, !0), this.getFileNameElement().text(c.filename), this.log.debug("UploaderComplete", arguments))
    },
    onUploaderProgress: function(a, b, c, d) {
        var e = Math.round(c / d * 100);
        this.triggerEvent(P.CONST.EVENT_UPLOAD_PROGRESS, {
            loaded: c,
            total: d,
            percent: e
        }), this.getFileNameElement().text(e + "%"), this.log.debug("UploaderProgress", arguments)
    },
    resetFileNameElement: function() {
        this.getFileNameElement().text("")
    },
    onUploaderError: function(a, b, c) {
        this.getButton().hideLoading(), this.triggerEvent(P.CONST.EVENT_UPLOAD_ERROR, c), this.log.debug("UploaderError", arguments), P.showError(c), this.resetFileNameElement()
    }
}), P.modules.ui.ImageUploader.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ui.PinPreview"), goog.require("P.Module"), P.modules.ui.PinPreview = P.Module.extend({
    setImage: function(a) {
        this.options.image_url = a, this.showLoading(!0);
        var b = function() {
            this.hideLoading()
        }.bind(this), c = this.$("img").get(0);
        c && (c.onerror = c.onload = b, c.src = a)
    }
}), P.modules.ui.PinPreview.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/ui/PinPreview/PinPreview.nunjucks"), goog.provide("P.modules.ui.SearchForm"), goog.require("P.Module"), goog.require("P.modules.SearchInputToken");
var CLASS_FIELD_FOCUS = "focus";
P.modules.ui.SearchForm = P.Module.extend({
    events: {
        "submit > form": "onSubmit",
        click: "onClick"
    },
    onChildItemSelected: function(a) {
        var b = a.data.item, c = b.get("query") || "";
        this.showGuidedSearch && this.updateSearchTokens(c, !0);
        var d = b.get("url");
        if (d) {
            if (this.options.navigate_on_search) {
                if (this.showGuidedSearch) {
                    var e = b.get("type");
                    this.updateQueryStates(c, e, b.get("resultIndex")), "board" !== e && "user" !== e && (d += this.constructQueryStatesParams())
                }
                this.navigateInProgress ? this.savedUrl = d : this.navigate(d)
            }
            return this.typeaheadField.blur(), !1
        }
    },
    onContentReady: function() {
        this.savedUrl = "", this.navigateInProgress=!1;
        var a = {};
        a[P.CONST.PUBSUB_TOPIC_NAVIGATE_COMPLETE] = this.onNavigateComplete, a[P.CONST.PUBSUB_TOPIC_NAVIGATE_STARTED] = this.onNavigateStarted, a[P.CONST.PUBSUB_TOPIC_SEARCH_QUERY_UPDATED] = this.onSearchQueryUpdated, a[P.CONST.PUBSUB_TOPIC_SEARCH_SCOPE_UPDATED] = this.onSearchScopeUpdated, a[P.CONST.PUBSUB_TOPIC_SEARCH_BOOST_UPDATED] = this.onSearchBoostUpdated, a[P.CONST.PUBSUB_TOPIC_SEARCH_GUIDE_SELECTED] = this.onSearchGuideSelected, this.pubsubSubscribe(P.CONST.PUBSUB_CHANNEL_SITE, a), this.typeaheadField = this.getChildById("searchField"), this.showGuidedSearch = this.options.support_guided_search, this.showNewTypeahead = this.options.support_advanced_typeahead, this.showGuidedSearch && (this.tokenizedInput = this.typeaheadField.getChildById("tokenizedInput"), this.queryStates = [], this.queryStatesChange = null), this.selectedListener = this.childListen(P.CONST.EVENT_ITEM_SELECTED, this.onChildItemSelected), this.childListen(P.CONST.EVENT_TOKEN_REMOVED_BY_USER, this.onTokenRemovedByUser), this.childListen(P.CONST.EVENT_FOCUS, this.onTypeaheadFieldFocus), this.childListen(P.CONST.EVENT_BLUR, this.onTypeaheadFieldBlur), this.childListen(P.CONST.EVENT_TYPEAHEAD_HIDDEN, this.onTypeaheadHidden), this.listen(P.router.get(), P.CONST.EVENT_ROUTE_MATCHED, this.onRouteMatched)
    },
    onNavigateComplete: function() {
        this.savedUrl.length > 0 && (this.navigate(this.savedUrl), this.savedUrl = ""), this.navigateInProgress=!1
    },
    onNavigateStarted: function() {
        this.navigateInProgress=!0
    },
    onRouteMatched: function(a) {
        this.showGuidedSearch && a.options.query && a.options.query !== this.typeaheadField.getValue() && this.updateSearchTokens(a.options.query)
    },
    onTokenRemovedByUser: function(a) {
        if (this.showGuidedSearch && a.data) {
            var b = a.data.text;
            this.updateQueryStates(b, "remove_refine")
        }
        this.navigateWithTokens()
    },
    onTypeaheadFieldFocus: function() {
        this.$el.addClass(CLASS_FIELD_FOCUS), this.showGuidedSearch && this.tokenizedInput.setEditingTokenText()
    },
    onTypeaheadFieldBlur: function() {
        if (this.$el.removeClass(CLASS_FIELD_FOCUS), this.showGuidedSearch&&!this.showNewTypeahead) {
            var a = this.typeaheadField.getValue();
            this.tokenizedInput.setInputValue(""), this.updateSearchTokens(a, !1)
        }
    },
    onTypeaheadHidden: function() {
        if (this.showGuidedSearch && this.showNewTypeahead) {
            var a = this.typeaheadField.getValue();
            this.tokenizedInput.setInputValue(""), this.updateSearchTokens(a, !1)
        }
    },
    navigateWithTokens: function() {
        var a = this.typeaheadField.getValue(), b = encodeURIComponent(a), c = "/", d = this.currentScope || this.options.scope || "pins";
        b && (c = "/search/" + d + "/?q=" + b, c += this.constructQueryStatesParams()), this.options.navigate_on_search && (this.navigateInProgress ? this.savedUrl = c : this.navigate(c))
    },
    tokenizeQuery: function(a) {
        var b = a.split(/\s+/), c = _.find(b, function(a) {
            return _.contains(P.CONST.SEARCH_FILTER_CONJUNCTIONS, a.toLowerCase())
        });
        return c ? [a] : b
    },
    updateSearchTokens: function(a, b) {
        var c;
        if (b ? (this.clearTypeaheadField(), c = a) : c = this.tokenizedInput.setTokenValue(a), c) {
            var d = this.tokenizeQuery(c), e = _.map(d, function(a) {
                return {
                    term: a,
                    position: "1"
                }
            });
            this.addSearchInputTokens(e)
        }
    },
    onSearchQueryUpdated: function(a, b, c) {
        var d = c || "";
        this.showGuidedSearch ? this.typeaheadField.isFocussed() || (this.tokenizedInput.setInputValue(""), this.updateSearchTokens(d, !1)) : this.setTypeaheadValue(d)
    },
    onSearchScopeUpdated: function(a, b, c) {
        var d = c || "pins";
        this.currentScope = d, this.typeaheadField.setAutocompleteScope(d)
    },
    onSearchBoostUpdated: function(a, b, c) {
        var d = c || "";
        this.currentBoost = d
    },
    onSearchGuideSelected: function(a, b, c) {
        var d = c.term || "", e = c.position, f = c.color, g = c.index;
        if (d) {
            var h = [{
                term: d,
                position: e,
                color: f
            }
            ];
            this.addSearchInputTokens(h), this.updateQueryStates(d, "add_refine", g)
        }
        this.navigateWithTokens()
    },
    removeSearchInputToken: function(a) {
        this.tokenizedInput.removeToken(a)
    },
    addSearchInputTokens: function(a) {
        var b = _.map(a, function(a) {
            return new P.modules.SearchInputToken({
                options: {
                    term: a.term,
                    position: a.position,
                    color: a.color
                }
            })
        });
        this.tokenizedInput.addTokensAndUpdateInputView(b)
    },
    setTypeaheadValue: function(a) {
        this.typeaheadField.setValue(a)
    },
    clearTypeaheadField: function() {
        this.typeaheadField.clear()
    },
    _getTypeaheadHighlightedItem: function() {
        return this.typeaheadField.getTypeaheadHighlightedItem()
    },
    focus: function() {
        this.typeaheadField.focus()
    },
    onSubmit: function() {
        var a = this._getTypeaheadHighlightedItem();
        if (a)
            return !1;
        var b = this.typeaheadField.getValue();
        if ("" === $.trim(b))
            return P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_SITE, P.CONST.PUBSUB_TOPIC_SEARCH_QUERY_UPDATED_WITH_EMPTY_QUERY, b), !1;
        this.showGuidedSearch && (this.updateSearchTokens(b, !0), this.typeaheadField.abortSearch(), this.typeaheadField.blur());
        var c = encodeURIComponent(b), d = this.currentScope || this.options.scope || "pins";
        if (this.typeaheadField.setAutocompleteScope(d), this.options.navigate_on_search) {
            var e = "/search/" + d + "/?q=" + c;
            "recent_week" === this.currentBoost && (e = "/search/pins/recent/?q=" + c), this.showGuidedSearch && (this.updateQueryStates(b, "typed"), e += this.constructQueryStatesParams()), this.navigate(e)
        }
        return P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_SITE, P.CONST.PUBSUB_TOPIC_SEARCH_QUERY_UPDATED, b), this.typeaheadField.blur(), this.typeaheadField.abortSearch(), !1
    },
    constructSingleQueryStateParam: function(a) {
        var b = "";
        return "typed" === a.type ? b += a.term + "|" + a.type : "recentsearch" === a.type || "autocomplete" === a.type ? b += a.term + "|" + a.type + "|" + a.index : "guide" === a.type && (b += a.term + "|" + a.type + "|" + a.filter_type + "|" + a.index), b
    },
    constructQueryStatesParams: function() {
        var a = "";
        if (this.queryStates.length > 0) {
            var b = [];
            _.each(this.queryStates, function(a) {
                b.push(this.constructSingleQueryStateParam(a))
            }.bind(this));
            var c = {
                term_meta: b
            };
            this.queryStatesChange && (c[this.queryStatesChange.action] = this.constructSingleQueryStateParam(this.queryStatesChange), this.queryStatesChange = null), a = "&" + $.param(c)
        }
        return a
    },
    updateQueryStates: function(a, b, c) {
        var d;
        if ("typed" === b)
            this.queryStates = [], d = this.tokenizeQuery(a), _.each(d, function(a) {
                this.queryStates.push({
                    term: a,
                    type: b
                })
            }.bind(this));
        else if ("recent_query" === b)
            this.queryStates = [], d = this.tokenizeQuery(a), _.each(d, function(a) {
                this.queryStates.push({
                    term: a,
                    type: "recentsearch",
                    index: c
                })
            }.bind(this));
        else if (_.contains(["query", "pin_search", "board_search", "people_search"], b))
            this.queryStates = [], d = this.tokenizeQuery(a), _.each(d, function(a) {
                this.queryStates.push({
                    term: a,
                    type: "autocomplete",
                    index: c
                })
            }.bind(this));
        else if ("add_refine" === b)
            this.queryStates.push({
                term: a,
                type: "guide",
                filter_type: "word",
                index: c
            }), this.queryStatesChange = {
                action: "add_refine",
                term: a,
                type: "guide",
                filter_type: "word",
                index: c
            };
        else if ("remove_refine" === b) {
            var e = _.find(this.queryStates, function(b) {
                return b.term === a
            });
            e && (this.queryStates.splice(_.indexOf(this.queryStates, e), 1), e.action = "remove_refine", this.queryStatesChange = e)
        }
    },
    onClick: function() {
        this.focus()
    }
}), P.modules.ui.SearchForm.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.AnswerLikeButton"), goog.require("P.Module"), goog.require("P.modules.QALikeButton"), P.modules.AnswerLikeButton = P.modules.QALikeButton.extend({
    getLikeResource: function(a) {
        var b = {
            answer_id: this.options.answer_id
        };
        return a && (b.context_pin_id = this.options.context_pin_id), P.resourceFactory.create("AnswerLikeResource", b)
    },
    onToggleSuccess: function(a) {
        var b = a ? P.CONST.PUBSUB_TOPIC_ANSWER_LIKED: P.CONST.PUBSUB_TOPIC_ANSWER_UNLIKED;
        P.pubsub.publish(this.options.answer_id, b)
    }
}), P.modules.AnswerLikeButton.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/AnswerLikeButton/AnswerLikeButton.nunjucks"), goog.provide("P.modules.AnswersBase"), goog.require("P.modules.QAList"), P.modules.AnswersBase = P.modules.QAList.extend({
    _onQuestionAnswerCreated: function() {}
}), P.modules.AnswersBase.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.BoardFollowSuccessToast"), goog.require("P.Module"), goog.require("P.modules.ToastBase"), P.modules.BoardFollowSuccessToast = P.modules.ToastBase.extend({}), P.modules.BoardFollowSuccessToast.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/BoardFollowSuccessToast/BoardFollowSuccessToast.nunjucks"), goog.provide("P.modules.BoardInvites"), goog.require("P.Module"), goog.require("P.modules.BoardInvite"), P.modules.BoardInvites = P.Module.extend({
    onContentReady: function() {
        if (!this.options.pending) {
            var a = this.resource.options.board_id, b = {};
            b[P.CONST.PUBSUB_TOPIC_BOARD_APPROVED_COLLABORATOR_INVITE] = this.onApprovedCollaboratorInvite, this.pubsubSubscribe(a, b)
        }
        this.childListen(P.CONST.EVENT_BOARD_CREATE_USER_REMOVED, this.onInviteeRemoved), this.boardCreateInvitees = []
    },
    onApprovedCollaboratorInvite: function(a, b, c) {
        this.addInvitee({
            type: "pinner",
            userId: c.userId
        })
    },
    onInviteeRemoved: function(a) {
        var b = a.data.type, c = a.data.identifier;
        this.boardCreateInvitees = _.filter(this.boardCreateInvitees, function(a) {
            return b !== a.type || c !== a.identifier
        })
    },
    getSelectedInvitees: function(a) {
        var b = _.filter(this.boardCreateInvitees, function(b) {
            return a === b.type
        });
        return _.pluck(b, "identifier")
    },
    hasSelectedInvitee: function(a) {
        var b=!1;
        return _.each(this.boardCreateInvitees, function(c) {
            c.type === a.type && c.identifier === a.identifier && (b=!0)
        }), b
    },
    _createPinnerBoardEditInvite: function(a) {
        var b = a.identifier, c = {
            resource: {
                name: "BoardInviteResource",
                options: {
                    board_id: this.resource.options.board_id,
                    invited_user_id: b,
                    field_set_key: "boardEdit"
                }
            }
        };
        return new P.modules.BoardInvite(c)
    },
    _createPinnerBoardCreateInvite: function(a) {
        var b = a.identifier, c = {
            resource: {
                name: "UserResource",
                options: {
                    user_id: b,
                    field_set_key: "board_invite"
                }
            },
            options: {
                view_type: "boardCreate",
                identifier: b
            }
        };
        return new P.modules.BoardInvite(c)
    },
    _createEmailBoardCreateInvite: function(a) {
        var b = a.identifier;
        return new P.modules.BoardInvite({
            options: {
                view_type: "email",
                identifier: b
            }
        })
    },
    _createFacebookBoardCreateInvite: function(a) {
        var b = a.attributes, c = a.identifier, d = b.name, e = b.send_pin_image;
        return new P.modules.BoardInvite({
            options: {
                view_type: "facebook",
                identifier: c,
                name: d,
                image: e
            }
        })
    },
    addInvitee: function(a) {
        var b, c = this.options.view_type, d = this.getChildById("boardInvitesPagedGrid"), e = a.type;
        if (this.hasSelectedInvitee(a)) {
            var f = {
                name: "ConfirmDialog",
                options: {
                    message: P._("That user has already been invited to add Pins on this board!")
                }
            };
            P.loadModule(f).then(function(a) {
                this.showInModal(a)
            }.bind(this))
        } else 
            "boardCreate" === c ? (b = "email" === e ? this._createEmailBoardCreateInvite(a) : "facebook" === e ? this._createFacebookBoardCreateInvite(a) : this._createPinnerBoardCreateInvite(a), this.boardCreateInvitees.push({
                type: e,
                identifier: a.identifier
            })) : b = this._createPinnerBoardEditInvite(a);
        b && b.render().then(function() {
            d.prependChildItem(b)
        })
    }
}), P.modules.BoardInvites.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ConversationHead"), goog.require("P.modules.Token");
var INACTIVE_CLASS = "inactive";
P.modules.ConversationHead = P.modules.Token.extend({
    events: {
        "click .headWrapper": "onClick"
    },
    onContentReady: function() {
        "ontouchstart"in window && this.$el.addClass("touch");
        var a = this.$el;
        this.options.inactive ? window.setTimeout(function() {
            a.addClass(INACTIVE_CLASS)
        }, 100) : this.$el.removeClass(INACTIVE_CLASS), this.triggerEvent(P.CONST.EVENT_CONVERSATION_HEAD_READY, null, !0)
    },
    getBadgeCount: function() {
        return this.options.badge_count
    },
    setBadgeCount: function(a) {
        this.options.badge_count = a, this.render()
    },
    setActive: function() {
        this.options.inactive=!1, this.$el.removeClass(INACTIVE_CLASS)
    },
    setInactive: function() {
        this.options.inactive=!0, this.$el.addClass(INACTIVE_CLASS)
    },
    getUsers: function() {
        return this.options.users || []
    },
    toggleDroppableHover: function(a) {
        this.$el.toggleClass(P.CONST.CLASS_DROPPABLE_HOVER, a)
    },
    getUserIds: function() {
        return _.pluck(this.getUsers(), "id")
    },
    getExternalEmails: function() {
        return this.options.emails || []
    },
    getAllUserIds: function() {
        return this.getUserIds().concat(this.getExternalEmails())
    },
    getFirstUserId: function() {
        return this.getAllUserIds()[0]
    },
    onClick: function() {
        this.triggerEvent(P.CONST.EVENT_CONVERSATION_HEAD_CLICKED, null, !1)
    }
}), P.modules.ConversationHead.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/ConversationHead/ConversationHead.nunjucks"), goog.provide("P.modules.CreateConversationGroup"), goog.require("P.conversationsUtil"), goog.require("P.Module"), goog.require("P.modules.ConversationHead"), P.modules.CreateConversationGroup = P.Module.extend({
    mixins: [P.Mixins.PreventScroll],
    events: {
        "click .tokenized": "onTokenizedAreaClick"
    },
    focus: function() {
        var a = this.getTypeaheadField();
        a.focus()
    },
    onCreated: function() {
        this.childListen(P.CONST.EVENT_BUTTON_CLICK, this.onButtonClicked), this.childListen(P.CONST.EVENT_TOKEN_REMOVED, this.onTokenRemoved), this.childListen(P.CONST.EVENT_ENTER_PRESSED, this.onEnterPressed), this.childListen(P.CONST.EVENT_TOKEN_ADDED, this.onTokenAdded), this.childListen(P.CONST.EVENT_CONVERSATION_LIST_ITEM_CLICKED, this.onListItemClicked), this.childListen(P.CONST.EVENT_ITEM_SELECTED, this.onTypeaheadItemSelected), this.userIds = [], this.emails = []
    },
    onEnterPressed: function(a) {
        var b = this.getTypeaheadField();
        b.getTypeaheadHighlightedItem() || "input" === a.target.id || this.userIds.length && this._triggerSendEvent()
    },
    getTokenizedInput: function() {
        return this.getTypeaheadField().getChildById("tokenizedInput")
    },
    getTypeaheadField: function() {
        return this.getChildById("searchField")
    },
    onTokenizedAreaClick: function() {
        this.focus()
    },
    onTokenAdded: function(a) {
        var b = a.data, c = b.getUsers(), d = b.getFirstUserId();
        c.length > 0 ? this.userIds.push(d) : this.emails.push(d), this._setListItemWithUserId(d, !0), this.setSendButtonEnabled(!0), this.focus()
    },
    onTokenRemoved: function(a) {
        var b = a.data, c = b.getFirstUserId(), d = _.indexOf(this.userIds, c), e = _.indexOf(this.emails, c);
        - 1 !== d ? this.userIds.splice(d, 1) : - 1 !== e && this.emails.splice(e, 1), this._setListItemWithUserId(c, !1), this._getTotalUsersCount() || this.setSendButtonEnabled(!1), this.focus()
    },
    _getTotalUsersCount: function() {
        return this.userIds.length + this.emails.length
    },
    _setListItemWithUserId: function(a, b) {
        this._getConversationsList().setListItemWithUserId(a, b)
    },
    _getConversationsList: function() {
        return this.getChildById("convosList")
    },
    onContentReady: function() {
        this._setup(), this.focus(), this.startPreventingScroll()
    },
    adjustTokenizedInputWidth: function() {
        var a = this.getTypeaheadField(), b = this.getWidth(), c = 10, d = this.$(".placeholder").width();
        a.getContent().width(b - 2 * c - d)
    },
    onTypeaheadItemSelected: function(a) {
        a.stopPropagation();
        var b = a.target;
        b.parent.reset();
        var c, d = a.data.item.attributes, e = d.email;
        c = e ? {
            id: e
        } : {
            id: d.id,
            username: d.username,
            image_large_url: d.image_medium_url
        }, this.setSendButtonEnabled(!0), this._addConversationHeadAsToken(c)
    },
    _addConversationHeadAsToken: function(a) {
        var b = this.getTokenizedInput(), c = b.getTokens(), d = _.find(c, function(b) {
            return b.getFirstUserId() === a.id
        });
        if (!d) {
            var e = {
                size: "small",
                users: [],
                emails: []
            };
            a.username ? e.users = [a] : e.emails = [a.id];
            var f = new P.modules.ConversationHead({
                options: e
            });
            f.render().then(function() {
                b.addTokensAndUpdateInputView([f])
            })
        }
        this.focus()
    },
    _setup: function() {
        this.inDom && this.contentReady && (this.adjustTokenizedInputWidth(), this.focus())
    },
    setSendButtonEnabled: function(a) {
        var b = this.$(".cancelButton"), c = this.$(".sendToGroupButton");
        a ? (b.hide(), c.show()) : (b.show(), c.hide())
    },
    _removeHeadForUser: function(a) {
        var b = this.getTokenizedInput(), c = b.getTokens();
        _.each(c, function(c) {
            a.id === c.getFirstUserId() && b.removeToken(c)
        })
    },
    _addUserAsToken: function(a) {
        this._addConversationHeadAsToken(a)
    },
    onListItemClicked: function(a) {
        a.stopPropagation();
        var b = a.target, c = b.getFirstUser();
        b.isActive() ? this._removeHeadForUser(c) : (b.setActive(!0), this._addUserAsToken(c))
    },
    onAddedToDom: function() {
        this._setup()
    },
    startPreventingScroll: function() {
        this.startPreventScroll(this.$(".ConversationsList"), this.$(".List"))
    },
    onButtonClicked: function(a) {
        var b = a.target.id;
        "sendToGroupButton" === b && this._triggerSendEvent()
    },
    _triggerSendEvent: function() {
        this.triggerEvent(P.CONST.EVENT_SEND_OBJECT_TO_USERS, {
            user_ids: this.userIds,
            emails: this.emails
        }, !0)
    }
}), P.modules.CreateConversationGroup.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/CreateConversationGroup/CreateConversationGroup.nunjucks"), goog.provide("P.modules.DefamationForm"), goog.require("P.Module"), goog.require("P.modules.TakedownFormBase"), P.modules.DefamationForm = P.modules.TakedownFormBase.extend({}), P.modules.DefamationForm.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.DmcaLinkForm"), goog.require("P.Module"), goog.require("P.modules.TakedownFormBase"), P.modules.DmcaLinkForm = P.modules.TakedownFormBase.extend({}), P.modules.DmcaLinkForm.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.DmcaPinForm"), goog.require("P.Module"), goog.require("P.modules.TakedownFormBase"), P.modules.DmcaPinForm = P.modules.TakedownFormBase.extend({}), P.modules.DmcaPinForm.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.Dropdown"), goog.require("P.modules.PositionModule");
var CLASS_DROPDOWN_ACTIVE = "active", DROPDOWN_CONTAINER_CLASS = "dropdownContainer";
P.modules.Dropdown = P.modules.PositionModule.extend({
    events: {
        keyup: "_onKeyUp"
    },
    _onKeyUp: function(a) {
        switch (a.keyCode) {
        case P.keyCode.ESCAPE:
            a.stopPropagation(), a.stopImmediatePropagation(), this.hide(), this.triggerEvent(P.CONST.EVENT_ESCAPE_DROPDOWN, this)
        }
    },
    onCreated: function() {
        P.modules.PositionModule.prototype.onCreated.apply(this, arguments), this.renderPromise = null, this.showing=!1, this.childListen(P.CONST.EVENT_DISMISS, this.hide), this.childListen(P.CONST.EVENT_DROPDOWN_HIDE, this.hide), this.childListen(P.CONST.EVENT_DROPDOWN_HIDE_NOT_PROPAGATE, this.hideWithoutTriggering), this.childListen(P.CONST.EVENT_CONVERSATIONS_IS_EMPTY_WITHOUT_FRIENDS, this.onIsEmptyWithoutFriends), this.childListen(P.CONST.EVENT_CONVERSATIONS_IS_EMPTY, this.onIsEmpty), this.options.persist_through_navigate || (this.childListen(P.CONST.EVENT_NAVIGATE, this.hide), this.listen(P.router.get(), P.CONST.EVENT_ROUTE_MATCHED, this.hide)), this.childListen(P.CONST.EVENT_EXTERNAL_CLICK, this.hide), this.childListen(P.CONST.EVENT_CONTENT_CHANGED, this.positionModule), this.childListen(P.CONST.EVENT_CHANGE, this.positionModule)
    },
    onAddClassForChild: function(a) {
        var b = a.data;
        this.$el.addClass(b)
    },
    onIsEmpty: function() {
        this.$el.addClass("isEmpty")
    },
    onIsEmptyWithoutFriends: function() {
        this.$el.addClass("isEmptyWithoutFriends")
    },
    _positionIfReady: function() {
        this.inDom && this.contentReady && (this.positionModule(), this.ensureHoverIntent(), this.getPositionAnchor().initHovering())
    },
    onAdded: function() {
        this.options.prefetch && (this.options.prefetch=!1, this.render())
    },
    onAddedToDom: function() {
        this._positionIfReady()
    },
    onContentReady: function() {
        this._positionIfReady()
    },
    onOptionsChanged: function() {
        this.renderPromise = null
    },
    getLoadingSpinnerOptions: function() {
        return _.extend(P.modules.PositionModule.prototype.getLoadingSpinnerOptions.call(this), {
            size: P.Spinner.Size.SMALL
        })
    },
    render: function() {
        var a = this._renderInternal2();
        return this.renderPromise = a, a
    },
    _renderInternal2: function() {
        return new Promise(function(a) {
            this.renderContainer();
            var b = this.$el;
            this.options.append_to_closeup ? $(".Closeup").append(b) : $("body").append(b);
            var c = function() {
                this.contentReady=!0, this.onContentReady(), a()
            }.bind(this), d = this.getPositionElement();
            this.options.title && d.append('<h2 class="dropdownTitle">' + this.options.title + "</h2>"), this.options.text && d.append('<p class="dropdownText">' + this.options.text + "</p>"), this.options.module ? P.loadModule(this.options.module).then(function(a) {
                this.setContentModule(a);
                var b = a.data ? a.renderExistingData(): a.render();
                b.then(c), this.options.display_while_loading && c()
            }.bind(this)) : c(), this.triggerEvent(P.CONST.EVENT_DROPDOWN_SHOW, null, !0)
        }.bind(this))
    },
    setSticky: function(a) {
        var b = _.clone(this.options);
        b.sticky = a, this.setOptions(b)
    },
    ensureHoverIntent: function() {
        this.parent.isClickButton&&!this.parent.isClickButton() && (this._hoverIntent || this.options.manually_close || (this._hoverIntent = new P.HoverIntent(this.$el, {
            exitDelay: 500
        }), this.listen(this._hoverIntent, P.CONST.EVENT_HOVERINTENT_OUT_COMPLETE, function() {
            this.getPositionAnchor().isHovering() || this.hide()
        })))
    },
    _hide: function() {
        this.showing=!1, this.$el.removeClass(CLASS_DROPDOWN_ACTIVE).removeClass("slideIn"), this._bodyListener && (this.removeListener(this._bodyListener), this._bodyListener = null)
    },
    hideWithoutTriggering: function() {
        this._hide()
    },
    hide: function() {
        if (this._hide(), this.triggerEvent(P.CONST.EVENT_DROPDOWN_HIDE, null, !0), this.children.length) {
            var a = this.getContentModule();
            a.trigger(P.CONST.EVENT_DROPDOWN_CONTAINER_HIDDEN, null)
        }
    },
    _ensureModule: function() {
        return this.renderPromise || (this.renderPromise = this.render()), this.renderPromise
    },
    ensureOpenListeners: function() {
        this.options.sticky || (this._bodyListener = this.listen($(document), "mousedown touchstart", this._onMouseDown))
    },
    _onMouseDown: function(a) {
        var b = this.options.mouse_close_mode;
        switch (b) {
        case"never":
            break;
        case"always":
            this.hide();
            break;
        default:
            var c = $(a.target).closest(this.$el).length > 0 || $(a.target).closest(this.options.anchor).length > 0;
            c || this.hide()
        }
    },
    isShowing: function() {
        return this.showing
    },
    updateMaxHeight: function() {
        if (this.children.length) {
            var a = this.getContentModule();
            if (this.options.constrain_height) {
                var b = a.getHeight(!0), c = parseInt(this.$el.css("top"), 10) || 0, d = Math.max(P.Viewport.height - c - P.CONST.PIN_MARGIN, 0);
                b > d && a.getContent().css({
                    "max-height": d,
                    "overflow-y": "auto"
                })
            }
        }
    },
    show: function(a) {
        return this.showing=!0, this.ensureOpenListeners(), this._ensureModule().then(function() {
            if (this.showing) {
                this.$el.addClass(CLASS_DROPDOWN_ACTIVE), this.positionModule(), this.updateMaxHeight();
                var b = this.getContentModule();
                b && P.deferDomManipulation(function() {
                    b.trigger(P.CONST.EVENT_DROPDOWN_CONTAINER_SHOWN, null), b.focus()
                }), a && P.dom.deferWrite().then(a)
            }
            this.triggerEvent(P.CONST.EVENT_DROPDOWN_SHOW, null, !0), P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_TUTORIAL, P.CONST.PUBSUB_TOPIC_VIEW_CHANGE, {
                moduleName: "Dropdown",
                action: P.CONST.ViewActions.OPEN,
                options: this.options
            })
        }.bind(this))
    },
    reposition: function(a) {
        this.showing && (this.$el.addClass(CLASS_DROPDOWN_ACTIVE), this.positionModule(), this.updateMaxHeight(), a && a())
    },
    fadeIn: function(a) {
        this.show(function() {
            this.$el.addClass("fadeIn"), a && a()
        }.bind(this))
    },
    slideIn: function() {
        return this.$el.addClass("hideModule"), new Promise(function(a) {
            this.show(function() {
                "undefined" !== typeof Modernizr && Modernizr.csstransforms3d ? this.$el.addClass("slideIn") : this.$el.removeClass("hideModule"), a(void 0)
            }.bind(this))
        }.bind(this))
    },
    getDropdown: function() {
        return this.$("." + DROPDOWN_CONTAINER_CLASS)
    },
    isVisible: function() {
        return this.$el.hasClass(CLASS_DROPDOWN_ACTIVE)
    },
    setVisible: function(a) {
        return this.$el.toggleClass(CLASS_DROPDOWN_ACTIVE, a)
    },
    isHovering: function() {
        return this.$el.isHovering()
    },
    initHovering: function() {
        this.$el.initHovering()
    },
    getContentModule: function() {
        return this.children[0]
    },
    getContentModulePromise: function() {
        return this._ensureModule().then(function() {
            return this.getContentModule()
        }.bind(this))
    },
    setContentModule: function(a) {
        var b = this.getContentModule();
        b && b.destroy(), this.insertChild(a, this.getPositionElement())
    }
}), P.modules.Dropdown.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/Dropdown/Dropdown.nunjucks"), goog.provide("P.modules.DropdownButton"), goog.require("P.Module"), goog.require("P.modules.Button"), goog.require("P.modules.Dropdown");
var TUTORIAL_DROPDOWN = "tutorialDropdown", CLICK = "click", HOVER = "hover", OPEN_STRATEGY = {};
OPEN_STRATEGY[CLICK] = CLICK, OPEN_STRATEGY[HOVER] = HOVER, P.modules.DropdownButton = P.modules.Button.extend({
    onClick: function(a) {
        if (this.options.check_write_banned && P.currentUser.isWriteBanned())
            P.writeban.showWriteBanned(this);
        else if (this.options.check_limited_login && P.currentUser.isLimitedLogin())
            P.limitedLogin.showLogin(this);
        else {
            if (this.openStrategy === HOVER)
                return !1;
            this._ensureDropdown();
            var b = this._dropdown.isVisible();
            b ? this.hideDropdown() : this.showDropdown()
        }
        this._logContextEvent(a), a.stopPropagation(), a.stopImmediatePropagation(), a.preventDefault()
    },
    setHighlight: function(a) {
        this.$el.toggleClass(P.CONST.CLASS_BUTTON_HIGHLIGHTED, a)
    },
    onCreated: function() {
        this._dropdown = null, this.openStrategy = this.options.show_dropdown_on_hover ? OPEN_STRATEGY[HOVER] : OPEN_STRATEGY[CLICK]
    },
    getDropdown: function() {
        return this._ensureDropdown(), this._dropdown
    },
    getDropdownOptions: function() {
        return this.options.dropdown_options || {}
    },
    getContentModuleLoadOptions: function() {
        return this.options.module
    },
    _ensureDropdown: function() {
        if (!this._dropdown) {
            var a, b = this.options.anchor_selector;
            b && (a = "." + b);
            var c = {
                anchor: a ? a: this.$el,
                module: this.getContentModuleLoadOptions()
            };
            _.extend(c, this.getDropdownOptions()), this._dropdown = new P.modules.Dropdown({
                id: "dropdown",
                options: c
            }), this._dropdown.initHovering(), this.listen(this._dropdown, P.CONST.EVENT_DROPDOWN_HIDE, this.onDropdownHide), this.addChild(this._dropdown)
        }
    },
    onMouseEnterComplete: function() {
        this.isHoverEnabled() && this.$el.isHovering() && this.showDropdown()
    },
    showDropdown: function(a) {
        this.setActiveStyle(!0), this.hideTutorial(), this._ensureDropdown(), this._dropdown.slideIn(200).then(a)
    },
    hideDropdown: function() {
        this._dropdown && this._dropdown.hide()
    },
    isDropdownVisible: function() {
        return this._ensureDropdown(), this._dropdown.isVisible()
    },
    onMouseOutComplete: function() {
        this._ensureDropdown(), this._dropdown.isHovering() || this.hideDropdown()
    },
    initListeners: function() {
        this.openStrategy !== CLICK && (!this._hoverIntent || this._hoverIntent.isElement(this.$el)) && (this._hoverIntent = new P.HoverIntent(this.$el, {
            enterDelay: 5,
            exitDelay: 200
        }), this.listen(this._hoverIntent, P.CONST.EVENT_HOVERINTENT_ENTER_COMPLETE, function() {
            this.onMouseEnterComplete()
        }), this.listen(this._hoverIntent, P.CONST.EVENT_HOVERINTENT_OUT_COMPLETE, function() {
            this.onMouseOutComplete()
        }))
    },
    onButtonClick: function(a) {
        a.stopPropagation()
    },
    onContentReady: function() {
        var a=!!this.getDropdownOptions().prefetch;
        a && this._ensureDropdown(), this.$el.initHovering(), this.childListen(P.CONST.EVENT_BUTTON_CLICK, this.onButtonClick), this.childListen(P.CONST.EVENT_TUTORIAL_SHOW, this.showTutorial), this.initListeners(), this.options.tutorial && this.options.tutorial.topic && this.options.tutorial.show && this.showTutorial()
    },
    onDropdownHide: function() {
        this.setActiveStyle(!1), this.$el.focus()
    },
    ensureTutorialDropdown: function() {
        if (!this.getChildById(TUTORIAL_DROPDOWN)) {
            var a = _.extend({}, this.options.dropdown_options, {
                title: this.options.tutorial.title,
                text: this.options.tutorial.text,
                anchor: this.$el,
                class_name: "tutorial",
                largeCaret: !1
            }), b = new P.modules.Dropdown({
                id: TUTORIAL_DROPDOWN,
                options: a
            });
            this.appendChild(b)
        }
        return this.getChildById(TUTORIAL_DROPDOWN)
    },
    onShowTutorial: function() {
        this.showTutorial()
    },
    isClickButton: function() {
        return this.openStrategy === CLICK
    },
    showTutorial: function() {
        if (this.options.tutorial) {
            var a = this.ensureTutorialDropdown();
            a.fadeIn(), this.setExperienceViewed()
        }
    },
    hideTutorial: function() {
        if (this.options.tutorial) {
            var a = this.getChildById(TUTORIAL_DROPDOWN);
            a && a.destroy(), this.setExperienceCompleted()
        }
    },
    setExperienceViewed: function() {
        if (this.options.tutorial.experienceId && this.options.tutorial.placementId) {
            var a = P.ExperienceManager.instance();
            a.viewPlacedExperience(this.options.tutorial.placementId, this.options.tutorial.experienceId)
        }
    },
    setExperienceCompleted: function() {
        if (this.options.tutorial.experienceId && this.options.tutorial.placementId) {
            var a = P.ExperienceManager.instance();
            a.completePlacedExperience(this.options.tutorial.placementId, this.options.tutorial.experienceId)
        }
    },
    isHoverEnabled: function() {
        return this.options.disabled!==!0 && this.openStrategy !== CLICK
    }
}), P.modules.DropdownButton.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/DropdownButton/DropdownButton.nunjucks"), goog.provide("P.modules.Grid"), goog.require("P.Module"), goog.require("P.modules.GridFooter"), goog.require("P.modules.GridItems");
var ERROR_CLASS = "hasError", SCROLL_MARGIN_ERROR = 2, UNAUTH_BANNER_HEIGHT = 240;
P.modules.Grid = P.Module.extend({
    DRAGGING_ENABLED: "draggingEnabled",
    DRAGGING_DISABLED: "draggingDisabled",
    onContentReady: function() {
        if (this.options.show_grid_footer && (this.childListen(P.CONST.EVENT_ERROR, this.onError), this.childListen(P.CONST.EVENT_ERROR_RESOLVED, this.onErrorResolved), this.childListen(P.CONST.EVENT_BUTTON_CLICK, this.onButtonClick)), this.childListen(P.CONST.EVENT_ITEMS_REQUEST_START, this.onItemsRequestStart), this.childListen(P.CONST.EVENT_ITEMS_REQUEST_SUCCESS, this.onItemsRequestSuccess), this.childListen(P.CONST.EVENT_ITEMS_END, this.onItemsEnd), this.items = this.getChildByModuleName("GridItems"), this.footer = this.getChildByModuleName("GridFooter"), this._initializeDragManagerIfPossible(), this.footer && this.hasItems() && this.footer.show(), P.currentUser.isAuthenticated()) {
            var a = {};
            a[P.CONST.PUBSUB_TOPIC_CONVERSATION_ADDED] = this.onConversationAdded, a[P.CONST.PUBSUB_TOPIC_CONVERSATION_NO_ACTIVE_CONVERSATIONS] = this.onNoActiveConversations, this.pubsubSubscribe(P.CONST.PUBSUB_CHANNEL_MESSAGES, a), P.getConversationsManager().hasActiveConversations() || this.onNoActiveConversations()
        } else 
            this.showingPageTwoSneakPeek=!1, this.options.scrollable ? this.scrollListener = this.listen(this.getScrollableElement(), P.CONST.EVENT_SCROLL, this.onScroll) : this.hasMoreItems() ? (this.requestMoreItemsAndBlock(), this.childListen(P.CONST.EVENT_CONTENT_CHANGED, this.requestMoreItemsAndBlock)) : this.options.show_grid_footer && this.addNegativeSpace()
    },
    hasItems: function() {
        return this.items.hasItems()
    },
    hasItemsOfType: function(a) {
        return !!this.items.getChildrenByModuleName(a).length
    },
    hasMoreItems: function() {
        return this.items.hasMoreItems()
    },
    getGridItemsChildren: function() {
        var a = this.getGridItems();
        return a.getChildren()
    },
    requestMoreItems: function() {
        this.items.requestMoreItems()
    },
    emptyItems: function() {
        this.items.empty()
    },
    renderItems: function(a, b) {
        this.items.render().then(a, b)
    },
    setPageSize: function(a) {
        this.items.setPageSize(a)
    },
    getItemsResource: function() {
        return this.items.resource
    },
    setItemsResource: function(a) {
        this.setResource(a), this.items && this.items.setResource(a)
    },
    onConversationAdded: function() {
        this.setDragState(this.DRAGGING_ENABLED)
    },
    onNoActiveConversations: function() {
        this.setDragState(this.DRAGGING_DISABLED)
    },
    onError: function() {
        this.hasError=!0, this.$el.addClass(ERROR_CLASS), this.footer && (this.footer.showError(), this.footer.hideGridLoading())
    },
    onErrorResolved: function() {
        this.hasError && (this.hasError=!1, this.$el.removeClass(ERROR_CLASS))
    },
    onButtonClick: function(a) {
        return "gridFooter" === a.target.id && this.requestMoreItems(), !1
    },
    onItemsRequestStart: function() {
        this.footer && this.footer.showGridLoading()
    },
    _initializeDragManagerIfPossible: function() {
        P.currentUser.isAuthenticated() && (this.items.initializeDragManager({}), this.dragState && this.setDragState(this.dragState, !0))
    },
    setDragState: function(a, b) {
        (this.dragState !== a || b) && (this.dragState = a, this.dragState === this.DRAGGING_DISABLED ? this.items.disableDragging() : this.items.enableDragging())
    },
    onItemsRequestSuccess: function() {
        this._initializeDragManagerIfPossible(), this.footer && this.footer.hideError()
    },
    onItemsEnd: function() {
        this.footer && this.footer.hideGridLoading()
    },
    prependChildItem: function(a) {
        this.getGridItems().prependChildItem(a)
    },
    prependNewItems: function(a, b) {
        return this.getGridItems().prependNewItems(a, b)
    },
    getGridItems: function() {
        return this.items
    },
    getFirstGridItem: function(a) {
        return this.getGridItems().getChildByModuleName(a)
    },
    requestMoreItemsAndBlock: function() {
        var a = this.getGridItems();
        if (a && a.isReady()&&!this.showingPageTwoSneakPeek) {
            var b = this.$el.height();
            this.showingPageTwoSneakPeek=!0, this.requestMoreItems(), this.$el.height(b), this.$el.css("overflow-y", "hidden"), this.$el.css("margin-bottom", 0)
        }
    },
    addNegativeSpace: function() {
        this.$(".GridFooter").hide(), this.$el.css("padding-bottom", UNAUTH_BANNER_HEIGHT)
    },
    onScroll: function() {
        var a = this.getScrollableElement().scrollTop(), b = $(document).height() - this.getScrollableElement().height();
        a >= b - SCROLL_MARGIN_ERROR && (this.addNegativeSpace(), this.removeListener(this.scrollListener))
    }
}), P.modules.Grid.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/Grid/Grid.nunjucks"), goog.provide("P.modules.HeroBasic"), goog.require("P.Module"), goog.require("P.modules.HeroHelperBase"), P.modules.HeroBasic = P.modules.HeroHelperBase.extend({
    onContentReady: function() {
        this.childListen(P.CONST.EVENT_BUTTON_CLICK, this.onButtonClick), this.placementId = Number(this.extraData && this.extraData.placement_id), this.experienceId = Number(this.extraData && this.extraData.experience_id), this.placedExperienceId = this.extraData && this.extraData.placed_experience_id, this.options.type = P.Experiences.ExperienceReverse[String(this.experienceId)], this.experienceId !== P.Experiences.Experience.NOOP && this.setExperienceViewed(), P.trackRegisterAction("web_hero_app_upsell_displayed_" + this.experienceId)
    },
    onButtonClick: function(a) {
        var b = a.target;
        if ("close" === b.id)
            return void this.dismiss();
        if (b.options)
            switch (b.options.action) {
            case P.Experiences.ExperienceCompleteAction.COMPLETE:
                this.complete();
                break;
            case P.Experiences.ExperienceCompleteAction.COMPLETE_AND_SHOW:
                this.complete(!0);
                break;
            case P.Experiences.ExperienceCompleteAction.DONT_COMPLETE_AND_HIDE:
                this.hide();
                break;
            case P.Experiences.ExperienceCompleteAction.DONT_COMPLETE_AND_SHOW:
                break;
            default:
                this.hide()
            }
    }
}), P.modules.HeroBasic.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.Login"), goog.require("P.Module"), goog.require("P.modules.LoginBase"), P.modules.Login = P.modules.LoginBase.extend({
    events: {
        "focus input[name=username_or_email]": "onFocusEmail",
        "blur input[name=username_or_email]": "onBlurEmail",
        "click .suggestionEmail": "onClickSuggestionEmail",
        "click .forgotPassword": "onForgotPassword"
    },
    onFocusEmail: function() {
        P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_SITE, P.CONST.PUBSUB_TOPIC_NAG_STATE, !1)
    },
    onBlurEmail: function() {
        if (this.extraData.showEmailSuggestion) {
            var a = this.$inputEmail.val(), b = _.extend({}, {
                email: a,
                email_filter: "allow_all"
            });
            this.emailSuggestionResource = P.resourceFactory.create("EmailSuggestionResource", b), this.emailSuggestionResource.callGet({
                showError: !1
            }).then(function(b) {
                var c = b.resource_response.data;
                c.length > 0 ? (this.$inputEmail.val(c[0]), this.$suggestionEmail.text(a), this.$suggestion.slideDown()) : this.$suggestion.slideUp()
            }.bind(this), function() {
                this.$suggestion.slideUp()
            }.bind(this))
        }
    },
    onClickSuggestionEmail: function(a) {
        var b = this.$suggestionEmail.text();
        this.$inputEmail.val(b), this.$suggestion.slideUp(), a.preventDefault()
    },
    onContentReady: function() {
        var a = {}, b = this.options.invite_follow_board, c = this.options.invite_follow_user;
        return c && (b ? a.invite_follow_board = c + "/" + b : a.invite_follow_user = c, P.SessionStorage.setItem(P.CONST.SESSION_KEY_INVITE_FOLLOW, a)), !P.currentUser.isAuthenticated() || P.currentUser.get("autologin") || P.currentUser.isLimitedLogin() || "True" !== Cookie.get(P.CONST.COOKIE_DUMMY_SECURE) ? (P.modules.LoginBase.prototype.onContentReady.apply(this, arguments), this.$suggestion = this.$(".suggestion"), this.$suggestionEmail = this.$(".suggestionEmail"), void(this.$inputEmail = this.$("input[name=username_or_email]"))) : void this.redirect(a)
    },
    onForgotPassword: function(a) {
        window.location = $(a.target).attr("href")
    }
}), P.modules.Login.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.LoginButton"), goog.require("P.Module"), goog.require("P.modules.NavigateButton"), P.modules.LoginButton = P.modules.NavigateButton.extend({
    getNavigateUrl: function() {
        return P.getLoginUrl({
            action: "login"
        })
    }
}), P.modules.LoginButton.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.Modal"), goog.require("P.interfaces.Modal"), goog.require("P.modules.PositionModule"), goog.require("P.ModalPresentationTypes"), goog.require("P.Module");
var SHOW_CLASS = "show", DURATION = 300;
P.modules.Modal = P.modules.PositionModule.extend({
    events: {
        "click .modalScroller": "onModalScrollerClick",
        "click .modalContainer": "onModalContainerClick",
        "click .closeModal": "onCloseModalClick"
    },
    positionMode: P.CONST.PositionMode.VIEWPORT_MIDDLE,
    onCreated: function() {
        P.modules.PositionModule.prototype.onCreated.call(this), this.childListen(P.CONST.EVENT_BUTTON_CLICK, this.onChildButtonClick)
    },
    _defineAnimations: function() {
        if ("undefined" !== typeof Modernizr && Modernizr.csstransforms3d) {
            var a = this.getModule(), b = "-" + a.getContent().css("width");
            $.keyframe.define([{
                name: "enter",
                "0%": {
                    transform: "translateX(" + b + ")",
                    visibility: "visible"
                },
                "70%": {
                    transform: "translateX(20px)",
                    visibility: "visible"
                },
                "100%": {
                    transform: "translateX(0px)",
                    visibility: "visible"
                }
            }
            ]), $.keyframe.define([{
                name: "dismiss",
                "0%": {
                    transform: "translateX(0px)",
                    visibility: "visible"
                },
                "30%": {
                    transform: "translateX(20px)",
                    visibility: "visible"
                },
                "100%": {
                    transform: "translateX(" + b + ")",
                    visibility: "visible"
                }
            }
            ])
        }
    },
    render: function() {
        this.empty();
        var a = this.options.modal_style || "", b = this.options.mask_type || "", c = this.options.container_class || "";
        this.$el.addClass(a), this.$el.attr("tabindex", "1"), this.$el.append('<div class="modalMask ' + b + '"></div><div class="modalScroller"><div class="modalContainer ' + c + '"><span class="positionModuleCaret"></span><div class="modalContent"><div class="modalModule"></div></div></div></div>'), this.getCanDismiss() && this.$(".modalContent").append('<button class="Button closeModal inModal cancelButton borderless"><em></em>&nbsp;</button>');
        var d = this.getModule();
        return d && this.addModuleToContainer(d), Promise.resolve(void 0)
    },
    addModuleToContainer: function(a) {
        a.id = "modalModule", a.errorStrategy = P.CONST.ErrorStrategy.SHOW, this.insertChild(a, this.getModuleContainer()), a.rendered ? this.setupModule(a) : (a.render().then(function() {
            this.setupModule(a)
        }.bind(this)), this.listen(a, P.CONST.EVENT_ERROR, function(a) {
            var b = P.string.common.defaultErrorMessage;
            this.options.show_api_error && a.data.message && (b = a.data.message), P.showError(b), this.hide()
        }))
    },
    setupModule: function(a) {
        a.setModal(this), this._defineAnimations(), this.onRendered(), this.onContentReady()
    },
    _setPositionMode: function(a) {
        switch (a) {
        case P.ModalPresentationTypes.PANEL:
            this.positionMode = P.CONST.PositionMode.MANUAL;
            var b = _.invert(P.ModalPresentationTypes)[a].toLowerCase();
            this.$el.addClass(b)
        }
    },
    _showMask: function() {
        var a = this.getMask();
        P.dom.deferWrite().then(function() {
            a.addClass(SHOW_CLASS)
        })
    },
    setVisible: function(a) {
        this.$el.toggleClass(SHOW_CLASS, a)
    },
    show: function() {
        this._setPositionMode(this.options.presentation_type || P.ModalPresentationTypes.FORM_SHEET), this.render().then(function() {
            this.log.debug("success")
        }.bind(this))
    },
    hide: function() {
        if (this._isPanel()) {
            var a = this.getModuleContainer(), b = function() {
                var b = this.getModule();
                b.triggerEvent(P.CONST.EVENT_MODAL_ANIMATE_HIDE_END, null, !1), P.dom.deferWrite().then(function() {
                    a.removeClass(SHOW_CLASS)
                }), this.destroy()
            }.bind(this), c = this.getModule(), d = this.getMask();
            P.dom.deferWrite().then(function() {
                d.removeClass(SHOW_CLASS)
            }), c.triggerEvent(P.CONST.EVENT_MODAL_ANIMATE_HIDE_START, null, !1), a.playAnimationIfSupported({
                name: "dismiss",
                duration: DURATION
            }, b)
        } else {
            var e = this.getModule();
            this.options.custom_exit_animation && e ? e.animateExitFromModal() : this.destroy()
        }
    },
    onAddedToDom: function() {
        var a = this.options.can_scroll?!0 : !1;
        P.Body.pushScrolling(a)
    },
    onRemovedFromDom: function() {
        P.Body.pop()
    },
    getModule: function() {
        return this.options.module
    },
    setTransparentContent: function(a) {
        this.getContent().toggleClass("transparent", a);
        var b = this.options.show_close_button;
        b && (a=!1), this.$(".closeModal").toggle(!a)
    },
    getContent: function() {
        return this.$(".modalContent")
    },
    getModuleContainer: function() {
        return this.$(".modalModule")
    },
    getMask: function() {
        return this.$(".modalMask")
    },
    getModalScroller: function() {
        return this.$(".modalScroller")
    },
    getFullName: function() {
        var a = P.Module.prototype.getFullName.call(this);
        return this.moduleOpener && (a = this.moduleOpener.getFullName() + "#" + a), a
    },
    getPositionElement: function() {
        return this.$(".modalContainer")
    },
    setModule: function(a) {
        var b = this.getChildById("modalModule");
        b && (b.id = "", b.remove()), this.options.module = a, b = this.$(".modalModule"), b.empty(), this.addModuleToContainer(a)
    },
    onChildRemoved: function() {
        this.getChildById("modalModule") || this.hide()
    },
    onChildButtonClick: function(a) {
        var b = a.target;
        if (b && b.isCancelButton()) {
            var c = this.options.module, d = c.GACategory;
            d || (d = c.options.ga_category), d && P.trackGAEvent(d, P.CONST.GA_ACTION_CLICK_CANCEL), a.stopPropagation(), this.hide()
        }
    },
    onModalScrollerClick: function(a) {
        a.target === a.currentTarget && (a.stopPropagation(), this.getCanDismiss() && (this.hide(), this.getModule().triggerEvent(P.CONST.EVENT_DISMISS, null, !1)), P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_SITE, P.CONST.PUBSUB_TOPIC_MODAL_MASK_CLICK))
    },
    _isPanel: function() {
        return this.options.presentation_type === P.ModalPresentationTypes.PANEL
    },
    onModalContainerClick: function(a) {
        a.target === a.currentTarget && (a.stopPropagation(), this.onModalScrollerClick(a))
    },
    onCloseModalClick: function() {
        this.triggerEvent(P.CONST.EVENT_DISMISS, null, !1), this.getModule().triggerEvent(P.CONST.EVENT_DISMISS, null, !1), this.destroy()
    },
    animatePanelIn: function() {
        var a = this.getModule(), b = function() {
            P.dom.deferWrite().then(function() {
                this.getPositionElement().addClass(SHOW_CLASS), a.triggerEvent(P.CONST.EVENT_MODAL_ANIMATE_SHOW_END, null, !1)
            }.bind(this))
        }.bind(this), c = this.getModuleContainer();
        this._showMask(), a.triggerEvent(P.CONST.EVENT_MODAL_ANIMATE_SHOW_START, null, !1), c.playAnimationIfSupported({
            name: "enter",
            duration: DURATION
        }, b)
    },
    onRendered: function() {
        P.modules.PositionModule.prototype.onRendered();
        var a = this.$el;
        if (this.positionModule(), this._isPanel())
            this.animatePanelIn();
        else {
            var b = this.getPositionElement(), c = b.css("marginTop"), d = 0;
            c.length && (d =+ c.split("px")[0]), P.dom.deferWrite().then(function() {
                this.options.custom_entrance_animation ? this.getModule().animateEntranceToModal() : a.addClass(SHOW_CLASS)
            }.bind(this))
        }
        this.options.transparent && this.setTransparentContent(!0)
    },
    getCanDismiss: function() {
        var a = this.options.can_dismiss;
        return this._isPanel() && (a=!1), void 0 === a || a
    }
}), P.modules.Modal.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.NuxProgress"), goog.require("P.Module"), goog.require("P.tutorialManager"), goog.require("P.modules.NuxProgressBase");
var MODULE_ID_NUX_PROGRESS = "nuxTutorialProgress";
P.modules.NuxProgress = P.modules.NuxProgressBase.extend({
    onCreated: function() {
        P.modules.NuxProgressBase.prototype.onCreated.call(this);
        var a = {};
        a[P.CONST.PUBSUB_TOPIC_TUTORIAL_MINI_NEXT] = this.updateMiniStep, a[P.CONST.PUBSUB_TOPIC_TUTORIAL_SKIP_PROGRESS_BAR_STEP] = this.skipProgessBarStep, this.pubsubSubscribe(P.CONST.PUBSUB_CHANNEL_TUTORIAL, a)
    },
    autoFollowInterest: function(a) {
        var b = {
            interest_list: "favorited",
            interest_id: a
        }, c = "InterestFollowResource", d = "interest_auto_follow", e = P.resourceFactory.create(c, b);
        e.callCreate({
            showError: !1
        }).then(function() {
            P.trackGAEvent(d, P.CONST.GA_ACTION_SUCCESS)
        }, function() {
            P.trackGAEvent(d, P.CONST.GA_ACTION_ERROR)
        })
    },
    onContentReady: function() {
        this.$progressWrapper = this.$(".nuxProgress"), this.progressBar = this.getChildByModuleName("ui.Progress"), this.$progressWrapper.removeClass("hidden"), P.modules.NuxProgressBase.prototype.onContentReady.call(this)
    },
    onChildRendered: function(a) {
        var b = this.progressData[this.getNuxTutorialName()];
        a.id === MODULE_ID_NUX_PROGRESS && "bar" === b.progressBarType && this.progressBar.updateStepWidths()
    },
    nextStep: function(a) {
        P.modules.NuxProgressBase.prototype.nextStep.call(this, a), this.setProgressBar(a)
    },
    setProgressBar: function(a) {
        var b = this.progressData[this.getNuxTutorialName()];
        if (b) {
            var c = b.steps, d = _.values(c);
            this.hasMinisteps = _.all(d, function(a) {
                return _.has(a, "miniStepData")
            }), this.hasMinisteps ? (_.isUndefined(this.stepSequences) && (this.stepSequences = _.pluck(d, "miniStepData"), this.miniStepSequences = _.flatten(this.stepSequences, !1), this.progressBar.options = {
                steps: this.miniStepSequences.length,
                ministeps: this.miniStepSequences,
                type: b.progressBarType
            }, this.progressBar.render()), c[this.currentStep].enableOnMiniStepsFull && this.nextButton.disable()) : (this.progressBar.options = {
                current_step: a,
                steps: d.length
            }, this.progressBar.render());
            var e = c[a];
            e && e.hide_progress_bar ? this.$(".progressFooterWrapper").addClass("hidden") : this.$(".progressFooterWrapper").removeClass("hidden")
        }
    },
    updateMiniStep: function(a, b, c) {
        var d = c, e = _.where(this.miniStepSequences, {
            type: d.type
        }).length, f = _.isNumber(d.total) ? d.total: 1;
        f = Math.min(Math.max(f, 0), e), this.progressBar.setMiniStepProgress(d.type, f), this.setMiniStepMessage(d.type, f);
        var g = this.progressData[this.getNuxTutorialName()].steps[this.currentStep];
        g.enableOnMiniStepsFull && (e === f ? (this.nextButton.enable(), g.enabledButtonText && this.nextButton.setText(g.enabledButtonText)) : (this.nextButton.disable(), g.enabledButtonText && this.nextButton.setText(g.buttonText)))
    },
    setMiniStepMessage: function(a, b) {
        var c = _.filter(this.miniStepSequences, function(b) {
            return b.type === a
        }), d = "";
        if (b > 0 && b <= c.length) {
            var e = c[b - 1];
            e && (d = e.finishedStepText)
        }
        var f = this.$(".contextualProgress");
        f && f.text(d)
    },
    endMandatoryFlow: function() {
        return P.ExperienceManager.instance().isPlacedExperience(P.Experiences.Placement.WEB_HOME_TAKEOVER, P.Experiences.Experience.WEB_MANDATORY_AUTOBAHN) ? P.ExperienceManager.instance().completePlacedExperience(P.Experiences.Placement.WEB_HOME_TAKEOVER, P.Experiences.Experience.WEB_MANDATORY_AUTOBAHN) : Promise.resolve()
    },
    setStepTexts: function(a) {
        var b, c, d, e;
        if (this.progressData) {
            var f = this.progressData[this.getNuxTutorialName()];
            if (f) {
                var g = f.steps;
                if (g) {
                    var h = g[a];
                    h && (b = h.buttonText, c = h.header1, d = h.header2, e = h.skip_data)
                }
            }
        }
        this.$skip && (this.$skip.unbind(), P.ExperienceManager.instance().isPlacedExperience(P.Experiences.Placement.WEB_HOME_TAKEOVER, P.Experiences.Experience.WEB_REBUILD_FEED) ? (this.$skip.removeClass("hidden"), this.$skip.bind("click", function() {
            var a = P.resourceFactory.create("UserStateResource", {
                state: "RESETTING_HOME_FEED"
            });
            a.callDelete().then(function() {
                window.location.reload()
            }, P.NOOP)
        })) : this._handleSkipButton(e)), b && (this.getNextButton().setText(b), this.getNextButton().show()), this._updateHeaders(c, d)
    },
    skipProgessBarStep: function() {
        var a = _.indexOf(this.tutorialManager.allStepNames, this.tutorialManager.currentStep) + 1;
        if (this.progressData) {
            var b = this.progressData[this.getNuxTutorialName()];
            if (b) {
                var c = b.steps;
                if (c) {
                    var d = c[a];
                    if (d) {
                        var e = d.skip_data;
                        this._launchSkipConfirmDialog(e)
                    }
                }
            }
        }
    }
}), P.modules.NuxProgress.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.OAuthAuthorizationPage"), goog.require("P.modules.OAuthPageBase"), P.modules.OAuthAuthorizationPage = P.modules.OAuthPageBase.extend({
    onContentReady: function() {
        this.tryRedirect(this.data), this.form = new P.Form(this.$("form"), {}), this.listen(this.form, P.CONST.EVENT_SUBMIT_VALIDATED, this.authorizeConsumer), this.childListen(P.CONST.EVENT_BUTTON_CLICK, this.onButtonClick)
    },
    onButtonClick: function(a) {
        return "cancelButton" === a.target.id ? this.cancelAuthorization() : void 0
    },
    authorizeConsumer: function() {
        var a = this.getChildById("submitButton");
        a.showLoading(), this.makeAuthorizationDecision(!0, a)
    },
    cancelAuthorization: function() {
        var a = this.getChildById("cancelButton");
        a.showLoading(), this.makeAuthorizationDecision(!1, a)
    }
}), P.modules.OAuthAuthorizationPage.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.PublicityRightsForm"), goog.require("P.Module"), goog.require("P.modules.TakedownFormBase"), P.modules.PublicityRightsForm = P.modules.TakedownFormBase.extend({}), P.modules.PublicityRightsForm.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.RepinSuccessToast"), goog.require("P.Module"), goog.require("P.modules.ToastBase"), P.modules.RepinSuccessToast = P.modules.ToastBase.extend({}), P.modules.RepinSuccessToast.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/RepinSuccessToast/RepinSuccessToast.nunjucks"), goog.provide("P.modules.UserEducationDropdownButton"), goog.require("P.Module"), goog.require("P.modules.DropdownButton"), P.modules.UserEducationDropdownButton = P.modules.DropdownButton.extend({
    onClick: function(a) {
        P.modules.DropdownButton.prototype.onClick.call(this, a), this.triggerEvent(P.CONST.EVENT_TUTORIAL_TRIGGER_CLICKED, null, !0)
    },
    onContentReady: function() {
        P.modules.DropdownButton.prototype.onContentReady.call(this), P.pubsub.subscribe(P.CONST.PUBSUB_CHANNEL_TUTORIAL, P.CONST.PUBSUB_TOPIC_TUTORIAL_TRIGGER_ACTIVE, function(a, b, c) {
            c&&!c.showFlyout && this.setTriggerActiveState(!0)
        }.bind(this))
    },
    setTriggerActiveState: function(a) {
        a ? this.$el.addClass("triggerActive") : this.$el.removeClass("triggerActive")
    }
}), P.modules.UserEducationDropdownButton.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/UserEducationDropdownButton/UserEducationDropdownButton.nunjucks"), goog.provide("P.modules.tutorials.ModalStepBase"), goog.require("P.interfaces.ModalTutorialStep"), goog.require("P.Module"), goog.require("P.modules.tutorials.StepBase");
var CLASS_TUTORIAL_HIGHLIGHT = "tutorialHighlight", CLASS_TUTORIAL_HIGHLIGHT_MASK = "tutorialHighlightMask", CLASS_TUTORIAL_HIGHLIGHT_BACKGROUND = "tutorialHighlightBackground", LINK_HREF_ATTR = "href";
P.modules.tutorials.ModalStepBase = P.modules.tutorials.StepBase.extend({
    highlightedElements: {},
    initializeStep: function() {
        this.listen(P.Viewport, P.CONST.EVENT_RESIZE, this.onResize)
    },
    disableCloneLinks: function(a) {
        var b = a.find("a");
        _.each(b, function(a) {
            var b = $(a), c = b.attr(LINK_HREF_ATTR);
            b.attr("data-href", c).removeAttr(LINK_HREF_ATTR)
        })
    },
    disableButtonCloneLinks: function(a) {
        a.removeAttr(LINK_HREF_ATTR)
    },
    setModalPosition: function(a, b, c, d) {
        var e = "VIEWPORT_MIDDLE";
        a && b && (e = "ANCHORED", this.modal.options.position_point = a, this.modal.options.anchor = b), this.modal.options.position_mode = e, void 0 !== d && (this.modal.options.fixed = d), this.modal.options.caret=!0, c && this.modal.positionModule()
    },
    setCloneInteractions: function(a) {
        var b = $("body"), c = $('<div class="' + CLASS_TUTORIAL_HIGHLIGHT_MASK + '"/>');
        c.addClass(CLASS_TUTORIAL_HIGHLIGHT), b.append(c), a.$mask = c, this.disableCloneLinks(a)
    },
    setCloneBackground: function(a) {
        var b = $("body"), c = $('<div class="' + CLASS_TUTORIAL_HIGHLIGHT_BACKGROUND + '"/>');
        c.addClass(CLASS_TUTORIAL_HIGHLIGHT), b.append(c), a.$background = c
    },
    setCloneDimensions: function(a, b) {
        var c = b.outerWidth() + 1, d = b.outerHeight() + 1;
        a.css({
            width: c,
            height: d,
            "box-sizing": "border-box"
        })
    },
    ensurePath: function(a) {
        window.location.pathname !== a && this.navigate(a)
    },
    cleanHighlightedElements: function() {
        $("." + CLASS_TUTORIAL_HIGHLIGHT).remove(), this.highlightedElements = {}
    },
    _getModuleChildById: function(a, b) {
        var c = a._childrenIdMap[b];
        if (c)
            return c;
        for (var d, e = 0, f = a.children.length; e < f; e++)
            if (d = a.children[e], c = this._getModuleChildById(d, b))
                return c
    },
    _getModuleChildrenByModuleName: function(a, b) {
        var c = [];
        return _.each(a.children, function(a) {
            a.className === b && c.push(a), c = c.concat(this._getModuleChildrenByModuleName(a, b))
        }.bind(this)), c
    },
    _getHighlightedModule: function(a) {
        var b = this._getModuleChildById(P.app, a);
        return b ? this._highlightModule(b, !0) : null
    },
    _highlightModule: function(a, b) {
        return this._highlightElement(a.cid, a.$el, b)
    },
    _highlightElement: function(a, b, c) {
        var d;
        if (c) {
            d = b.clone(), d.$origin = b, d.attr("id", a), d.addClass(CLASS_TUTORIAL_HIGHLIGHT), this.highlightedElements[a] = d;
            var e = $("body");
            e.append(d), this.options.has_background && this.setCloneBackground(d), this.setCloneInteractions(d), this.setCloneDimensions(d, b), this.positionClone(d)
        } else 
            d = this.highlightedElements[a], d && (d.remove(), delete this.highlightedElements[a]);
        return d
    },
    positionClone: function(a) {
        var b = a.$origin.parents().addBack();
        b.css("animation-duration", "0s"), _.defer(function() {
            var c = a.$origin.offset();
            c = {
                top: c.top,
                left: c.left
            };
            var d = c.top - $(window).scrollTop();
            d > 0 && (c.top = d), a.css(c);
            var e = $.extend({}, c, {
                height: a.outerHeight(),
                width: a.outerWidth()
            });
            a.$mask && a.$mask.css(e), a.$background && (this.options.background_class && a.$background.addClass(this.options.background_class), a.$background.css(e)), this.modal && this.modal.positionModule(), b.css("animation-duration", "")
        }.bind(this))
    },
    onResize: function() {
        _.each(this.highlightedElements, this.positionClone.bind(this))
    },
    onRemoved: function() {
        this.cleanHighlightedElements()
    }
}), P.modules.tutorials.ModalStepBase.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.tutorials.NewUserStepBase"), goog.require("P.Module"), goog.require("P.modules.tutorials.StepBase"), goog.require("P.modules.NuxProgress"), P.modules.tutorials.NewUserStepBase = P.modules.tutorials.StepBase.extend({
    onContentReady: function() {
        this.nuxProgress = P.app.getChildById("nuxProgress"), this.nuxProgress.initializeProgress({
            module: this
        })
    },
    hideStepHeader: function() {
        var a = this.$(".newUserStepHeader");
        a.addClass("hidden")
    }
}), P.modules.tutorials.NewUserStepBase.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ui.DatePickerField"), goog.require("P.modules.ui.Field"), P.modules.ui.DatePickerField = P.modules.ui.Field.extend({
    onContentReady: function() {
        P.modules.ui.Field.prototype.onContentReady.apply(this), this.childListen(P.CONST.EVENT_DATEPICKER_DATE_SELECTED, this.onDateSelected);
        var a = {
            module: {
                name: "ui.DatePicker",
                options: {
                    selection_mode: "single",
                    utc: this.options.utc,
                    min_date: this.options.min_date,
                    max_date: this.options.max_date
                }
            },
            anchor: this.$el,
            display_while_loading: !0,
            position_point: this.options.position_point || "BOTTOM_CENTER"
        }; this._dropdown = new P.modules.Dropdown({
            options : a
        }), this.addChild(this._dropdown)
    }, onDateSelected: function(a) {
        var b = a.data || {}, c = b.dates;
        c && (this.setValue(c.getMonth() + 1 + "/" + c.getDate() + "/" + c.getFullYear()), this._dropdown.hide())
    }, syncDatePickerWithInputField: function() {
        var a = $.trim(this._field.getValue()).toLowerCase(), b = this._dropdown.getContentModule();
        b && b.setSelectedDate(a)
    }, onInputFocus: function() {
        this._dropdown.show(this.syncDatePickerWithInputField.bind(this)), this.el.scrollIntoView(!0)
    }, onInputBlur: function() {}, onInputKeyup: function() {
        this.syncDatePickerWithInputField()
    }
}), P.modules.ui.DatePickerField.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ui.FollowButton"), goog.require("P.modules.Button"), goog.require("P.modules.Dropdown"), goog.require("P.modules.BoardFollowSuccessToast");
var UNFOLLOW_CLASS = "dim", FOLLOW_CLASS = "primary", MEMO_DROPDOWN = "memoDropdown";
P.modules.ui.FollowButton = P.modules.Button.extend({
    getResourceId: function() {
        return null
    },
    getFollowResource: function() {
        return null
    },
    getFollowClass: function() {
        return FOLLOW_CLASS
    },
    getUnfollowClass: function() {
        return UNFOLLOW_CLASS
    },
    toggleState: function() {
        this.setState(!this.options.followed), this.trigger("toggleFollow"), this.getResourceId() && P.pubsub.publish(this.getResourceId(), this.options.followed ? P.CONST.PUBSUB_TOPIC_USER_FOLLOW : P.CONST.PUBSUB_TOPIC_USER_UNFOLLOW, !0)
    },
    setState: function(a) {
        this.$el.addClass(a ? this.getUnfollowClass() : this.getFollowClass()), this.$el.removeClass(a ? this.getFollowClass() : this.getUnfollowClass()), this.$el.text(this.options[a ? "unfollow_text": "follow_text"]), this.options.followed = a
    },
    getState: function() {
        return this.options.followed
    },
    showToast: function() {
        if (!this.options.followed) {
            var a, b = this.getFollowResource().name;
            "BoardFollowResource" === b && (a = P.resourceFactory.create("RelatedBoardForUserFeedResource", {
                board_id: this.options.board_id
            })), a && a.callGet({
                showError: !1
            }).then(function(a) {
                if (!a.resource_response.error) {
                    var b = a.resource_response.data[0];
                    if (b) {
                        var c = new P.modules.BoardFollowSuccessToast({
                            data: b
                        });
                        P.getToastsManager().addToast(c)
                    }
                }
            })
        }
    },
    toggleFollow: function() {
        var a = this.getFollowResource();
        if (!a)
            return void this.log.error("No resource returned in `getFollowResource()`");
        var b = P.experiments.instance.inExperimentGroups("web_toasts", ["employees", "enabled"]);
        b && this.showToast(), this.showLoading();
        var c = this.options.followed ? this.options.unfollow_ga_category: this.options.follow_ga_category;
        (this.options.followed ? a.callDelete() : a.callCreate()).then(function() {
            c && P.trackGAEvent(c, P.CONST.GA_ACTION_SUCCESS), this.toggleState()
        }.bind(this), function() {
            c && P.trackGAEvent(c, P.CONST.GA_ACTION_ERROR)
        }).fin(function() {
            this.hideLoading()
        }.bind(this))
    },
    onClick: function() {
        if (this.ensureAuthentication()&&!this.options.is_me) {
            var a = this.options.followed ? this.options.unfollow_ga_category: this.options.follow_ga_category;
            return a && P.trackGAEvent(a, P.CONST.GA_ACTION_CLICK), this.toggleFollow(), !1
        }
    },
    getAuthRedirectUrl: function() {
        return P.getRegisterUrl({
            action: "follow"
        })
    },
    hideMemo: function() {
        if (this.options.memo) {
            var a = this.getChildById(MEMO_DROPDOWN);
            a && a.fadeOut(function() {
                a.destroy()
            })
        }
    },
    showMemo: function() {
        var a = this.options.memo && this.options.memo.show;
        if (a&&!this.getChildById(MEMO_DROPDOWN)) {
            this.isClickButton = function() {
                return !1
            };
            var b = this.options.memo.position_point ? this.options.memo.position_point: "RIGHT_CENTER", c = {
                title: this.options.memo.title,
                anchor: this.$el,
                position_point: b,
                class_name: "autoFollowMemo",
                largeCaret: !1
            }, d = new P.modules.Dropdown({
                id: MEMO_DROPDOWN,
                options: c
            });
            this.appendChild(d), d.fadeIn(function() {
                P.setTimeout(function() {
                    this.hideMemo()
                }.bind(this), 5e3)
            }.bind(this))
        }
    }
}), P.modules.ui.FollowButton.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/ui/FollowButton/FollowButton.nunjucks"), goog.provide("P.modules.ui.MetricGraph"), goog.require("P.Module"), goog.require("P.modules.Dropdown"), goog.require("P.modules.ui.MetricPoint");
var COLOR_SCHEMES = {
    "default": ["#367cbd", "#c06506", "#009e83"],
    "dark audience": ["#8e498a", "#bd82ba"],
    "dark domain": ["#76c5d3", "#a3eaf7"],
    "dark profile": ["#acce6f", "#d7ecb2"]
};
P.modules.ui.MetricGraph = P.Module.extend({
    events: {
        "click .legendColorBox": "onClickLegend",
        "click .legendLabel": "onClickLegend",
        resize: "onResize"
    },
    graphContainer: function() {
        return this.$(".graphPlaceholder", this.el)
    },
    onCreated: function() {
        this.placeholder = void 0, this.disabledSeries = {}, this.resetCurrentHover()
    },
    onAddedToDom: function() {
        this._addedToDom=!0, this.trySetupGraph()
    },
    onContentReady: function() {
        this._contentReady=!0, this.data = this.data || {
            rows: []
        }, this.trySetupGraph()
    },
    onRemoved: function() {
        this.hideDropdown()
    },
    render: function() {
        return this.disabledSeries = {}, P.Module.prototype.render.apply(this, arguments)
    },
    resizeGraph: function() {
        this.updateGraph()
    },
    trySetupGraph: function() {
        this._addedToDom && this._contentReady && (this.listen(P.Viewport, P.CONST.EVENT_BODY_COLUMN_CHANGE, this.resizeGraph), this._metricPointDropdown = null, this.updateGraph(), this.setupGraphClicks(), this.anchor = $("<em></em>").appendTo(this.$el))
    },
    onClickLegend: function(a) {
        var b = $(a.target).attr("data-index");
        this.toggleSeries(b)
    },
    toggleSeries: function(a) {
        this.disabledSeries[a]=!this.disabledSeries[a], this.updateGraph()
    },
    extractMetricSeries: function(a) {
        var b = this.data.rows || this.data;
        return $.map(b, function(b) {
            var c = 1e3 * b.timestamp, d = b[a] || 0;
            return [[c, d]]
        })
    },
    _getMetricColor: function(a) {
        var b = this.options.metric_group[a], c = this.options.metric_type_map[b];
        if (c && c.graph_color)
            return c.graph_color;
        var d = COLOR_SCHEMES[this.options.color_scheme || "default"];
        return d[a%d.length]
    },
    _getMetricFormat: function(a) {
        var b = this.options.metric_group[a], c = this.options.metric_type_map[b];
        return c && c.format ? c.format : null
    },
    buildTimeSeries: function() {
        var a = [];
        this.metricKeys = [];
        for (var b = 0; b < this.options.metric_group.length; b++) {
            var c = this.options.metric_group[b], d = [];
            this.metricKeys.push(this.options.metric_type_map[c].graph_name), this.disabledSeries[b]!==!0 && (d = this.extractMetricSeries(c)), a.push({
                data: d,
                label: this.options.metric_type_map[c].graph_name,
                color: this._getMetricColor(b)
            })
        }
        return a
    },
    updateGraph: function() {
        var a = this.buildTimeSeries();
        this.drawGraph(a)
    },
    tickGenerator: function(a) {
        for (var b = a.max, c = a.gridHeight, d = Number(((b - c) / 4).toPrecision(1)), e = Number((Math.round(c / d) + 1) * d), f = []; e < b;)
            f.push(e), e += d;
        return f
    },
    tickFormatterY: function(a, b) {
        return a < 0 || a < b.min || a > b.max ? "" : b.max < 1e6 ? Number(a.toFixed(b.tickDecimals)).toLocaleString() : (a/=1e6, Number(a.toFixed(1)).toLocaleString() + "m")
    },
    timeFormatter: function(a, b, c) {
        if (a < b.datamin || a > b.datamax)
            return "";
        var d = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"], e = new Date(a), f = String(e.getUTCDate());
        return c || 1 === e.getUTCDate() ? d[e.getUTCMonth()] + " " + f : f
    },
    seriesMinMax: function(a, b) {
        for (var c = 0, d = Number.MAX_VALUE, e = 0; e < a.length; e++)
            for (var f = a[e].data, g = 0; g < f.length; g++) {
                var h = f[g][b];
                c = c > h ? c : h, d = d < h ? d : h
            }
        return {
            min: d,
            max: c
        }
    },
    seriesMinMaxY: function(a) {
        var b = this.seriesMinMax(a, 1), c = b.max - b.min;
        return 0 === c ? (b.min = 0, b.max = 1.2 * b.max, c = b.max) : (b.min -= .25 * c, b.max += .2 * c), b.gridHeight = b.min + .15 * c, b
    },
    seriesMinMaxX: function(a) {
        var b = 864e5, c = this.seriesMinMax(a, 0), d = c.max - c.min, e = .08 * d;
        return c.max += Math.max(b, e), c.min -= Math.max(b, e), c
    },
    drawGraph: function(a) {
        var b = this.graphContainer(), c = this.seriesMinMaxX(a), d = this.seriesMinMaxY(a), e = this.tickGenerator(d), f = {
            series: {
                shadowSize: 0,
                highlightColor: "rgb(230, 230, 230)",
                lines: {
                    show: !0
                }
            },
            legend: {
                margin: [140, 10],
                noColumns: 3,
                backgroundOpacity: 0,
                labelBoxBorderColor: "rgba(0,0,0,0)"
            },
            grid: {
                aboveData: !0,
                autoHighlight: !1,
                axisMargin: 0,
                backgroundColor: "rgb(255, 255, 255)",
                borderColor: "rgb(230, 230, 230)",
                borderWidth: 0,
                clickable: !0,
                hoverable: !0,
                labelMargin: 0,
                markings: [{
                    xaxis: {
                        from: c.min,
                        to: c.max
                    },
                    yaxis: {
                        from: d.gridHeight,
                        to: d.gridHeight
                    },
                    color: "rgb(129, 129, 129)"
                }, {
                    xaxis: {
                        from: - 1,
                        to: - 1
                    },
                    yaxis: {
                        from: d.gridHeight,
                        to: d.max
                    },
                    color: "rgb(214, 214, 214)"
                }
                ],
                minBorderMargin: 0
            },
            yaxis: {
                max: d.max,
                min: d.min,
                reserveSpace: !0,
                tickColor: "rgb(230, 230, 230)",
                tickFormatter: this.tickFormatterY,
                ticks: e
            },
            xaxis: {
                labelHeight: 5,
                max: c.max,
                min: c.min,
                mode: "time",
                tickColor: "rgb(129, 129, 129)",
                tickFormatter: this.timeFormatter,
                tickLength: 0
            },
            multihighlight: {
                mode: "x"
            }
        }, g = $.plot(b, a, f);
        this.plotData = g.getData()
    },
    checkAndSetNewHover: function(a) {
        var b, c = a.x, d = 0, e = _.find(this.plotData, function(a) {
            return a.data.length > 0
        });
        if (!e)
            return null;
        for (b = 0; b < e.data.length&&!(null == e.data[b] || e.data[b][0] > c); b++);
        if (0 === b || b === e.data.length)
            return this.hideDropdown(), null;
        var f = e.data[b - 1], g = e.data[b], h = c - f[0], i = g[0] - c;
        if (d = h < i ? b - 1 : b, d === this.currentHover)
            return null;
        this.currentHover = d;
        var j = [];
        return _.each(this.plotData, function(a) {
            j.push(a.data[d] || null)
        }), j
    },
    _ensureDropdown: function() {
        this._metricPointDropdown || (this._metricPoint = new P.modules.ui.MetricPoint, this._metricPointDropdown = new P.modules.Dropdown({
            options: {
                position_point: "RIGHT_CENTER"
            }
        }), this._metricPointDropdown.show(function() {
            this.appendChild(this._metricPointDropdown), this._metricPointDropdown.setContentModule(this._metricPoint)
        }.bind(this)))
    },
    onPointHovered: function(a) {
        var b = this.checkAndSetNewHover(a);
        if (b) {
            this._ensureDropdown();
            for (var c, d = 0, e = 1, f = this.plotData[0].xaxis.p2c, g = this.plotData[0].yaxis.p2c, h = this.graphContainer().offset(), i = 0, j = 0, k = 0; k < b.length; k++)
                b[k] && (c = b[k], i += g(c[e]), ++j);
            if (0 !== j) {
                var l = i / j, m = h.left + f(c[d]) + 20, n = m + this._metricPointDropdown.getWidth(), o = h.left + this.graphContainer().width();
                n > o ? (this.anchor.css({
                    top: h.top + l,
                    left: m - 40
                }), this._metricPointDropdown.options.position_point = "LEFT_CENTER") : (this.anchor.css({
                    top: h.top + l,
                    left: m
                }), this._metricPointDropdown.options.position_point = "RIGHT_CENTER"), this._metricPointDropdown.options.anchor = $(this.anchor), this._metricPointDropdown.show();
                var p = [];
                for (k = 0; k < b.length; k++)
                    b[k] && p.push({
                        metric: this.metricKeys[k],
                        value: this.formatValue(b[k][e], this._getMetricFormat(k)),
                        value_color: this._getMetricColor(k)
                    });
                var q = {
                    start_date: this._metricPoint.formatDate(new Date(c[d]), !0),
                    metric_values: p
                };
                if (this.options.rolling_window_days) {
                    var r = c[d], s = 2592e6, t = new Date(r - s), u = new Date(r);
                    q.start_date = this._metricPoint.formatDate(t), q.end_date = this._metricPoint.formatDate(u)
                }
                this._metricPoint.options = q, this._metricPoint.render()
            }
        }
    },
    formatValue: function(a, b) {
        return b && "USD" === b ? "$" + P.number.formatUSD(a) : Number(a).toLocaleString()
    },
    onPointUnhovered: function() {
        this.hideDropdown()
    },
    hideDropdown: function() {
        this._metricPointDropdown && this._metricPointDropdown.hide(), this.resetCurrentHover()
    },
    resetCurrentHover: function() {
        this.currentHover = {}
    },
    setupGraphClicks: function() {
        var a = this.graphContainer();
        a.bind("plothover", function(a, b) {
            this.onPointHovered(b)
        }.bind(this)), a.bind("mouseout", function() {
            this.onPointUnhovered()
        }.bind(this))
    }
}), P.modules.ui.MetricGraph.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ui.Picker"), goog.require("P.Module"), goog.require("P.modules.ui.SelectList"), P.modules.ui.Picker = P.Module.extend({
    events: {
        keydown: "_onKeydown",
        "textchange .name": "_onNameTextChange"
    },
    onCreated: function() {
        this.childListen(P.CONST.EVENT_BUTTON_CLICK, this._onChildButtonClick), this.childListen(P.CONST.EVENT_ITEM_CLICK, this._onChildItemClick), this._list = null, this._addedCreateItem=!1
    },
    onContentReady: function() {
        this._list = this.getChildById("list"), this._addedCreateItem=!1
    },
    focus: function() {
        P.deferDomManipulation(function() {
            this.$(".name").focusWithoutScrolling(), this._list.scrollSelectedItemElementIntoView()
        }.bind(this))
    },
    getList: function() {
        return this._list
    },
    clearName: function() {
        this.$(".name").val(""), this._onNameTextChange()
    },
    _create: function() {
        return Promise.reject(new Error("subclasses must override this"))
    },
    _createAndSubmit: function(a) {
        this.showLoading(), this._create(a).then(function(a) {
            return a && (this._submit(a), !this.options.skip_append_created_item) ? this._list.appendItem(a, !0) : void 0
        }.bind(this)).fin(function() {
            this.hideLoading()
        }.bind(this))
    },
    _createFromInputNameAndSubmit: function() {
        var a = this._getNameInputText();
        this._createAndSubmit(a)
    },
    _getNameInputText: function() {
        return $.trim(this.$(".name").val())
    },
    _handleChoice: function(a) {
        if (a.is_create)
            this._createFromInputNameAndSubmit();
        else if (a.is_create_suggestion) {
            var b = a.name, c = b.toString();
            this._createAndSubmit(c)
        } else 
            this._submit(a)
    },
    _onChildButtonClick: function(a) {
        var b = a.target;
        b && "createButton" === b.id && this._createFromInputNameAndSubmit()
    },
    _onChildItemClick: function(a) {
        var b = a.target;
        if (b && "list" === b.id) {
            var c = a.data;
            this._handleChoice(c)
        }
    },
    _onKeydown: function(a) {
        if (this._list.hasVisibleItems())
            switch (a.keyCode) {
            case P.keyCode.UP:
                a.preventDefault(), a.stopPropagation(), this._list.highlightUp();
                break;
            case P.keyCode.DOWN:
                a.preventDefault(), a.stopPropagation(), this._list.highlightDown();
                break;
            case P.keyCode.ENTER:
            case P.keyCode.NUMPAD_ENTER:
                a.preventDefault(), a.stopPropagation();
                var b = this._list.getSelectedItemData();
                this._handleChoice(b ? b : {
                    name: this._getNameInputText(),
                    is_create: !0
                })
            }
    },
    _onNameTextChange: function() {
        var a = void 0 !== this.options.allow_create ? this.options.allow_create : !0;
        if (a&&!this._addedCreateItem) {
            var b = {};
            this.options.create_item_label && (b.create_item_label = this.options.create_item_label), this._list.appendItem({
                type: "module",
                name: "ui.PickerItemCreate",
                options: b,
                data: {
                    is_create: !0
                }
            }), this._addedCreateItem=!0
        }
        var c = this._getNameInputText(), d = function(a) {
            var b=!!c;
            if (b) {
                var d = a.filter(function(a) {
                    return a.data.is_create || a.data.recommendation_reason || a.data.is_create_suggestion?!1 : !0
                }), e = d.map(function(a) {
                    return a.data.name
                }), f = P.filter.match(c, e), g = {};
                e.forEach(function(a, b) {
                    g[a] = f.itemMatched[b]
                })
            }
            var h = a.map(function(a) {
                var d = a.data;
                if (d.is_create) {
                    var e = b&&!f.hasExactMatch, h = a;
                    return h.setCreateName(c), e
                }
                if (d.recommendation_reason || d.is_create_suggestion)
                    return !b;
                if (b) {
                    var i = d.name;
                    return g[i]
                }
                return !0
            });
            return h
        };
        this._list.setItemVisibilityCallback(d)
    },
    _submit: function(a) {
        this.triggerEvent(P.CONST.EVENT_CHANGE, a, !0)
    }
}), P.modules.ui.Picker.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/ui/Picker/Picker.nunjucks"), goog.provide("P.modules.ui.TableLookalikePicker"), goog.require("P.modules.ui.Picker"), P.modules.ui.TableLookalikePicker = P.modules.ui.Picker.extend({}), P.modules.ui.TableLookalikePicker.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/ui/TableLookalikePicker/TableLookalikePicker.nunjucks"), goog.provide("P.modules.ui.TypeaheadField"), goog.require("P.Module"), goog.require("P.modules.Dropdown"), P.modules.ui.TypeaheadField = P.Module.extend({
    events: {
        "input .field": "onFieldInput",
        "blur .field": "onFieldBlur",
        "focus .field": "onFieldFocus",
        "keyup .field": "onFieldKeyup",
        "keydown .field": "onFieldKeydown",
        "textchange .field": "onFieldTextChange"
    },
    onCreated: function() {
        this.valueFromHighlight=!1, this.showNewTypeahead=!!this.options.support_advanced_typeahead, this.showGuidedSearch=!!this.options.support_guided_search
    },
    getTypeahead: function() {
        return this.showNewTypeahead ? this.getChildById("typeaheadDropdown").getContentModule() : this.getChildById("typeahead")
    },
    onFieldTextChange: function() {
        this.isFocussed() && this.search()
    },
    initTypeahead: function() {
        this.showNewTypeahead ? (this.initTypeaheadDropdown(), this.childListen(P.CONST.EVENT_ITEM_SELECTED, this.onChildItemSelected), this.childListen(P.CONST.EVENT_ITEM_HIGHLIGHTED, this.onChildItemHighlighted), this.childListen(P.CONST.EVENT_TYPEAHEAD_HIDDEN, this.onTypeaheadHidden), this.childListen(P.CONST.EVENT_TYPEAHEAD_SHOWN, this.onTypeaheadShown), this.childListen(P.CONST.EVENT_TYPEAHEAD_MOUSEDOWN, this.onTypeaheadMousedown)) : (this.childListen(P.CONST.EVENT_ITEM_SELECTED, this.onChildItemSelected), this.childListen(P.CONST.EVENT_ITEM_HIGHLIGHTED, this.onChildItemHighlighted), this.childListen(P.CONST.EVENT_TYPEAHEAD_MOUSEDOWN, this.onTypeaheadMousedown), this.options.show_caret && (this.childListen(P.CONST.EVENT_TYPEAHEAD_RESULTS_RETURNED, this.onTypeaheadResultsReturned), this.childListen(P.CONST.EVENT_TYPEAHEAD_NO_RESULTS_RETURNED, this.onTypeaheadNoResultsReturned), this.childListen(P.CONST.EVENT_TYPEAHEAD_HIDDEN, this.onTypeaheadHidden), this.childListen(P.CONST.EVENT_TYPEAHEAD_SHOWN, this.onTypeaheadShown)))
    },
    initTypeaheadDropdown: function() {
        this.typeaheadDropdown = new P.modules.Dropdown({
            id: "typeaheadDropdown",
            options: {
                class_name: "typeaheadDropdown",
                fixed: !0,
                hide_caret: !0,
                position_mode: P.CONST.PositionMode.MANUAL,
                prefetch: !0,
                mouse_close_mode: "never",
                module: {
                    name: "ui.Typeahead",
                    options: {
                        bypass_lru_cache: this.options.bypass_lru_cache,
                        bypass_maxheight: !0,
                        class_name: "centeredWithinWrapper",
                        enable_recent_queries: this.options.enable_recent_queries,
                        exclude_non_followers: this.options.exclude_non_followers,
                        minimum_term_character_length: this.options.minimum_term_character_length,
                        num_places: this.options.num_places,
                        resource_name: this.options.resource_name,
                        should_geocode: this.options.should_geocode,
                        tags: this.options.tags,
                        template: this.options.template,
                        use_tab_index: this.options.use_tab_index,
                        view_type: "expanded"
                    }
                }
            }
        }), this.addChild(this.typeaheadDropdown)
    },
    hideTypeaheadUnlessPreserved: function() {
        this.options.preserve_typeahead || this.getTypeahead().hide()
    },
    enableInput: function() {
        this._setInputEnabled(!0)
    },
    _setInputEnabled: function(a) {
        var b = "disabled";
        this.$field.toggleClass(b, !a), a ? this.$field.removeAttr(b) : this.$field.attr(b, b)
    },
    disableInput: function() {
        this._setInputEnabled(!1)
    },
    onChildItemSelected: function(a) {
        var b = a.data.item, c = b&&!b.get("ignoreLabel") ? b.get("label"): this.getValue(), d = this.options.set_input_value_on_selection;
        void 0 === d && (d=!0), c && d && (this.valueFromHighlight=!1, this.setValue(c)), this.blur()
    },
    onChildItemHighlighted: function(a) {
        var b = a.data.item, c = b&&!b.get("ignoreLabel") ? b.get("label"): this.getTypeahead().getLastTerm();
        this.options.populate_on_result_highlight && (this.valueFromHighlight=!!b, this.setValue(c))
    },
    onTypeaheadResultsReturned: function() {
        this.showCaret()
    },
    onTypeaheadHidden: function() {
        this.hideCaret(), this.typeaheadDropdown && this.typeaheadDropdown.hide()
    },
    onTypeaheadShown: function() {
        this.showCaret(), this.typeaheadDropdown&&!this.typeaheadDropdown.isShowing() && this.typeaheadDropdown.show()
    },
    onTypeaheadNoResultsReturned: function() {
        this.hideCaret()
    },
    showCaret: function() {
        this._setCaretVisible(!0)
    },
    hideCaret: function() {
        this._setCaretVisible(!1)
    },
    _setCaretVisible: function(a) {
        this.$(".typeaheadCaret").toggleClass("visible", a)
    },
    highlightTypehaeadUp: function() {
        this.getTypeahead().highlightUp()
    },
    highlightTypeaheadDown: function() {
        this.getTypeahead().highlightDown()
    },
    onContentReady: function() {
        this.initTypeahead(), this.$field = this.$(".field"), this.$field.placeholder()
    },
    onFieldInput: function() {
        this.isFocussed() && this.search()
    },
    _focusHighlightedIfNeeded: function() {
        this.options.use_tab_index && (this.getTypeahead().focusHighlighted(), this.focus())
    },
    onFieldKeydown: function(a) {
        var b = this.getTypeahead(), c = P.keyCode;
        if (b.isOpen())
            switch (a.keyCode) {
            case c.ENTER:
                this.valueFromHighlight && (this.cancelBlur=!0, window.setTimeout(function() {
                    this.cancelBlur=!1
                }.bind(this), 500)), this.options.prevent_default_on_enter && a.preventDefault();
                break;
            case c.BACKSPACE:
                this.valueFromHighlight=!1
            }
    },
    focus: function() {
        this.getField().focusWithoutScrolling()
    },
    onFieldKeyup: function(a) {
        var b = this.getTypeahead(), c = P.keyCode;
        if (b.isOpen())
            switch (a.keyCode) {
            case c.UP:
                b.highlightUp(), this._focusHighlightedIfNeeded(), a.preventDefault();
                break;
            case c.DOWN:
                b.highlightDown(), this._focusHighlightedIfNeeded(), a.preventDefault();
                break;
            case c.ENTER:
            case c.NUMPAD_ENTER:
            case c.TAB:
                var d = {};
                if (b.highlightedItem) {
                    var e = "pins", f = b.highlightedItem.get("type");
                    "pin_search" === f && (f = "query"), "board_search" === f && (e = "boards", f = "query"), "people_search" === f && (e = "users", f = "query"), d = {
                        entered_query: b.getLastTerm(),
                        selected_query: b.highlightedItem.get("label"),
                        result_index: b.highlightedItem.get("resultIndex"),
                        autocomplete_type: f,
                        search_mode: e
                    }
                }
                var g = b.select();
                this._logCustomContextEvent(P.ContextLogging.EventType.CLICK, P.ContextLogging.ElementType.AUTOCOMPLETE_SUGGESTION, P.ContextLogging.ComponentType.TYPEAHEAD_SUGGESTIONS, d), g && (this.abortSearch(), a.preventDefault());
                break;
            case c.ESCAPE:
                this.blur(), a.preventDefault();
                break;
            default:
                this.valueFromHighlight=!1
            } else 
                switch (a.keyCode) {
                case c.ENTER:
                case c.NUMPAD_ENTER:
                    this.abortSearch(), this.triggerEvent(P.CONST.EVENT_ENTER_PRESSED, {}, !0)
                }
    },
    getTypeaheadItemsToRender: function() {
        return this.getTypeahead().itemsToRender
    },
    getTypeaheadHighlightedItem: function() {
        return this.valueFromHighlight ? this.getTypeahead().getHighlightedItem() : null
    },
    getTypeaheadSelectedItem: function() {
        return this.getTypeahead().getSelectedItem()
    },
    removeCacheForTerm: function(a) {
        this.getTypeahead().removeCacheForTerm(a)
    },
    removeCacheForCurrentTerm: function() {
        var a = this.getValue();
        this.removeCacheForTerm(a)
    },
    closeTypeahead: function() {
        this.abortSearch(), this.getTypeahead().hide()
    },
    onFieldBlur: function() {
        return this.cancelBlur ? void(this.cancelBlur=!1) : (this.valueFromHighlight ? (this.valueFromHighlight=!1, this.reset()) : this.showGuidedSearch && (this.abortSearch(), this.setValue("")), this.hideTypeaheadUnlessPreserved(), void this.triggerEvent(P.CONST.EVENT_BLUR, null, !0))
    },
    onFieldFocus: function() {
        this.$field.trigger("mousedown"), this.options.search_on_focus && this.search(), this.options.prefetch_on_focus && this.getTypeahead().prefetch(), this.triggerEvent(P.CONST.EVENT_FOCUS, null, !0)
    },
    onTypeaheadMousedown: function() {
        this.cancelBlur=!0, window.setTimeout(function() {
            this.cancelBlur=!1
        }.bind(this), 300)
    },
    getValue: function() {
        if ("tokenized" === this.options.type) {
            var a = this.getChildById("tokenizedInput");
            return this.showGuidedSearch ? a.getTokenInputValue() : a.getInputValue()
        }
        return this.$field.val()
    },
    getField: function() {
        return this.$field
    },
    reset: function() {
        this.abortSearch(), this.setValue(""), this.getTypeahead().emptyResults(), this.getTypeahead().hide()
    },
    setValue: function(a) {
        if ("tokenized" === this.options.type) {
            var b = this.getChildById("tokenizedInput");
            b.setInputValue(a)
        } else 
            this.$field.val(a);
        this.triggerEvent(P.CONST.EVENT_CONTENT_CHANGED, {
            value: a
        }, !0)
    },
    getTypeaheadResultCount: function() {
        return this.getTypeahead().getItemCount()
    },
    setAutocompleteScope: function(a) {
        this.getTypeahead().setAutocompleteScope(a)
    },
    clear: function() {
        if ("tokenized" === this.options.type) {
            var a = this.getChildById("tokenizedInput");
            a.clearTokens(), a.clearSavedTokens()
        }
        this.setValue("")
    },
    abortSearch: function() {
        this.searchTimer && window.clearTimeout(this.searchTimer), this.getTypeahead().abortSearch()
    },
    setResourceOptionForTypeahead: function(a, b) {
        var c = this.getTypeahead().getResource();
        c.set(a, b)
    },
    setPrependedStaticItems: function(a) {
        this.getTypeahead().setPrependedStaticItems(a)
    },
    setAppendedStaticItems: function(a) {
        this.getTypeahead().setAppendedStaticItems(a)
    },
    resetPrependedStaticItems: function() {
        this.getTypeahead().resetPrependedStaticItems()
    },
    resetAppendedStaticItems: function() {
        this.getTypeahead().resetAppendedStaticItems()
    },
    search: function(a) {
        var b = a;
        b || (b = this.getValue()), this.searchTimer && window.clearTimeout(this.searchTimer);
        var c = function() {
            this.getTypeahead().search(b)
        }.bind(this), d = this.options.search_delay;
        d ? this.searchTimer = window.setTimeout(c, d) : c()
    },
    blur: function() {
        this.$field.blur()
    },
    isFocussed: function() {
        return this.$field.is(":focus")
    }
}), P.modules.ui.TypeaheadField.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/ui/TypeaheadField/TypeaheadField.nunjucks"), goog.provide("P.modules.AddAPlace"), goog.require("P.Module"), goog.require("P.modules.Pinnable"), goog.require("P.modules.GridItems");
var PINIT_BUTTON_ID = "pinitButton";
P.modules.AddAPlace = P.Module.extend({
    events: {
        "keyup .description": "onDescriptionKeyup"
    },
    onDescriptionKeyup: function() {
        this._enableIfReady()
    },
    onContentReady: function() {
        if (this.childListen(P.CONST.EVENT_BUTTON_CLICK, this.onButtonClick), this.childListen(P.CONST.EVENT_UPLOAD_SUCCESS, this.onUploadSuccess), this.childListen(P.CONST.EVENT_PLACE_IMAGE_SELECTED, this.onPlaceImageSelected), P.scrollbarWidth() > 0) {
            var a = this.getChildById("images");
            if (a) {
                var b = a.getGridItems();
                b && b.setHasScroll(!0)
            }
        }
    },
    setPlace: function(a) {
        this.place = a
    },
    onUploadSuccess: function(a) {
        var b = a.data.image_url;
        this.setImage(b);
        var c = {
            name: "Pinnable",
            options: {
                url: b,
                view_type: "add_to_map"
            }
        };
        P.loadModule(c).then(function(a) {
            var b = a;
            a.render().then(function() {
                var c = this.getGridItems();
                c.prependChildItem(a);
                var d = this.getImages();
                _.each(d, function(a) {
                    a.deselect()
                }), b.select(), this._enableIfReady()
            }.bind(this))
        }.bind(this))
    },
    getGridItems: function() {
        var a = this.getChildById("images").getGridItems();
        return a
    },
    setImage: function(a) {
        this._image = a
    },
    onButtonClick: function(a) {
        var b = a.target;
        if (b.id === PINIT_BUTTON_ID) {
            a.stopPropagation();
            var c = this._image;
            if (!c)
                return void P.showError(P._("Please pick an image for this pin."));
            this._enableIfReady() && (b.showLoading(), this.triggerEvent(P.CONST.EVENT_PINIT_BUTTON_CLICKED, c, !0))
        }
    },
    _enableIfReady: function() {
        var a = this.getChildById(PINIT_BUTTON_ID), b = this.hasValidDescription();
        return b ? (this.removeErrorState(), this._image ? (this.removeErrorState(), a.enable(), !0) : !1) : (this.addErrorState(), !1)
    },
    onPlaceImageSelected: function(a) {
        var b = this.getImages();
        _.each(b, function(a) {
            a.deselect()
        });
        var c = a.data;
        this._image = c, this._enableIfReady(), this.focus()
    },
    onAddedToDom: function() {
        this.focus()
    },
    focus: function() {
        this.$(".description").focus()
    },
    addErrorState: function() {
        this._setDescriptionError(!0), this.focus()
    },
    _setDescriptionError: function(a) {
        this.$(".description").toggleClass("hasError", a), this.$(".descriptionLabel").toggleClass("error", a), this.$(".required").toggleClass("visible", a)
    },
    removeErrorState: function() {
        this._setDescriptionError(!1)
    },
    getImages: function() {
        var a = this.getChildById("images").getGridItems(), b = a.children;
        return b
    },
    hasValidDescription: function() {
        var a = this.$(".description");
        return !!a.val().length
    }
}), P.modules.AddAPlace.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.AnswerEdit"), goog.require("P.modules.EntityEdit"), P.modules.AnswerEdit = P.modules.EntityEdit.extend({
    getFormValidationRules: function() {
        return {
            content: [P.Validator.Required()]
        }
    },
    getFormValidationOptions: function() {
        return {
            prevalidate: !0
        }
    },
    getEditResource: function() {
        var a = {
            answer_id: this.data.id,
            content: this.getChildById("contentField").getContent(),
            attached_url: this.getChildById("contentField").getAttachmentUrl()
        };
        return P.resourceFactory.create("AnswerResource", a)
    },
    onEditSuccess: function() {
        P.pubsub.publish(this.data.id, P.CONST.PUBSUB_TOPIC_ANSWER_UPDATED)
    },
    getDeleteConfirmTemplate: function() {
        return "delete_answer"
    },
    getDeleteResource: function() {
        var a = {
            answer_id: this.data.id
        };
        return P.resourceFactory.create("AnswerResource", a)
    },
    onDeleteSuccess: function() {
        P.pubsub.publish(this.data.id, P.CONST.PUBSUB_TOPIC_ANSWER_DELETED)
    }
}), P.modules.AnswerEdit.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.AnswerReport"), goog.require("P.modules.EntityReport"), P.modules.AnswerReport = P.modules.EntityReport.extend({
    getReportResourceName: function() {
        return "AnswerReportResource"
    },
    getCustomReportResourceOptions: function() {
        return {
            answer_id: this.options.answer_id,
            context_pin_id: this.options.context_pin_id
        }
    },
    onReportSuccess: function() {
        P.pubsub.publish(this.options.answer_id, P.CONST.PUBSUB_TOPIC_ANSWER_REPORTED)
    }
}), P.modules.AnswerReport.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.Answers"), goog.require("P.modules.AnswersBase"), P.modules.Answers = P.modules.AnswersBase.extend({
    initPubsub: function() {
        var a = {};
        a[P.CONST.PUBSUB_TOPIC_QUESTION_ANSWER_CREATED] = this._onQuestionAnswerCreated, this.pubsubSubscribe(this.options.question_id, a)
    },
    _onQuestionAnswerCreated: function(a, b, c) {
        var d = c, e = new P.modules.Answer({
            options: {
                context_pin_id: this.options.context_pin_id
            },
            resource: {
                name: "AnswerResource",
                options: {
                    answer_id: d.id,
                    field_set_key: "list_item"
                }
            }
        }), f = this.addItem(e), g = {
            name: "OldToast",
            options: {
                position_mode: "ANCHORED",
                position_point: "RIGHT_TOP",
                template: "create_answer_success"
            }
        };
        P.loadModule(g).then(function(a) {
            this.addChild(a);
            var b = a.render();
            Promise.all([f, b]).then(function() {
                a.options.anchor = e.getContent(), a.positionModule()
            })
        }.bind(this))
    }
}), P.modules.Answers.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.BoardCoverEdit"), goog.require("P.Module"), goog.require("P.modules.ui.ImageCrop"), P.modules.BoardCoverEdit = P.Module.extend({
    pins: null,
    index: null,
    prefetchBuffer: 10,
    events: {
        "click .previous": "previous",
        "click .next": "next"
    },
    onCreated: function() {
        this.imageCrop = null, this.onKeyup = this.onKeyup.bind(this), this.next = this.next.bind(this), this.previous = this.previous.bind(this), this.$img = $("<img>")
    },
    _positionIfReady: function() {
        !this._positioned && this.inDom && this.contentReady && (this._positioned=!0, this.imageCrop = this.getChildByModuleName("ui.ImageCrop"), this.listen($("body"), "keyup", this.onKeyup), this.coverPinId = this.options.cover_pin_id, this._initializePins(!0))
    },
    _initializePins: function(a) {
        if (a && null !== this.coverPinId) {
            var b = {
                id: this.coverPinId,
                field_set_key: "board_cover_picker"
            }, c = P.resourceFactory.create("PinResource", b);
            c.callGet({
                showError: !1
            }).then(function(a) {
                this._appendPinsFromData([a.resource_response.data]), this._initializePins()
            }.bind(this), function() {
                this.coverPinId = null, this._initializePins()
            }.bind(this))
        } else 
            this._appendPinsFromData(this.data), this.setIndex(0), this.updateButtons()
    },
    _appendPinsFromData: function(a) {
        this.pins || (this.pins = []), _.each(a, function(a) {
            var b = {
                id: a.id,
                url: a.images["236x"].url
            };
            b.id === this.coverPinId && this.pins.length || this.pins.push(b)
        }.bind(this))
    },
    onAddedToDom: function() {
        this._positionIfReady()
    },
    onContentReady: function() {
        this._positionIfReady()
    },
    onKeyup: function(a) {
        null !== this.index && (a.keyCode === P.keyCode.LEFT ? this.previous() : a.keyCode === P.keyCode.RIGHT && this.next())
    },
    requestMoreIfNeeded: function() {
        this.index + this.prefetchBuffer < this.pins.length || this.resource.atEnd() || this.resource.callGet().then(function(a) {
            this.data = a.resource_response.data, this._appendPinsFromData(this.data)
        }.bind(this), function() {
            this.data = []
        }.bind(this))
    },
    next: function() {
        if (this.requestMoreIfNeeded(), this.index === this.pins.length - 1)
            return !1;
        var a = this.index + 1;
        return this.setIndex(a), !1
    },
    previous: function() {
        var a = this.index - 1;
        return this.setIndex(a), !1
    },
    setIndex: function(a) {
        var b = this.pins[a];
        b && (this.imageCrop.setImage(b.url), this.index = a, this.preload([this.index - 2, this.index - 1, this.index + 1, this.index + 2]), this.updateButtons())
    },
    preload: function(a) {
        _.each(a, function(a) {
            var b = this.pins[a];
            b && P.preloadImage(b.url)
        }.bind(this))
    },
    updateButtons: function() {
        var a = this.index > 0;
        this.$(".previous").toggle(a);
        var b = this.index < this.pins.length - 1 ||!this.resource.atEnd();
        this.$(".next").toggle(b)
    },
    getBoardCoverData: function() {
        var a = this.pins[this.index].id, b = this.pins[this.index].url, c = _.extend({}, {
            pin_id: a,
            pin_image_url: b
        }, this.imageCrop.getCropData());
        return c
    }
}), P.modules.BoardCoverEdit.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.BusinessAccountConvert"), goog.require("P.Module"), goog.require("P.modules.BusinessAccountCreate"), P.modules.BusinessAccountConvert = P.modules.BusinessAccountCreate.extend({
    onContentReady: function() {
        P.currentUser.attributes.is_partner && this.navigate("/business/getstarted/"), P.modules.BusinessAccountCreateFormV1.prototype.onContentReady.call(this)
    },
    save: function() {
        var a = this.form.getData();
        a.contact_name = a.first_name + " " + a.last_name;
        var b = this.getChildById("submitButton"), c = P.resourceFactory.create("PartnerResource", a);
        b.showLoading(), c.callUpdate().fin(function() {
            b.hideLoading()
        }).then(function() {
            this.navigate("/business/getstarted/")
        }.bind(this))
    },
    onSubmitValidated: function(a) {
        a.errors[0] || this.save()
    }
}), P.modules.BusinessAccountConvert.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.FastFollow"), goog.require("P.Module"), goog.require("P.modules.Grid");
var FAST_FOLLOW_CONTENT_CLASS = "fastFollowContent", FAST_FOLLOW_HEADER_ID = "fastFollowHeader", FAST_FOLLOW_GRID_ID = "categoryBoardsGrid", FAST_FOLLOW_BOARD_MASK = "wholeBoardMask", FAST_FOLLOW_MIN_HEIGHT = 355, FAST_FOLLOW_MODAL_TOP_PADDING = 102, FAST_FOLLOW_MODAL_BOTTOM_PADDING = 56, NUM_REQUIRED_BOARDS = 5, FastFollowSidebarActions = {
    CATEGORY: 0,
    SEARCH_TERM: 1
};
P.modules.FastFollow = P.Module.extend({
    _boardsFollowed: [],
    _modalDisplayed: !1,
    _cachedGrids: {},
    _currentAction: FastFollowSidebarActions.CATEGORY,
    getOwnedScrollables: function() {
        return this.$(".fastFollowGridContainer")
    },
    _getBoardIdFromEvent: function(a) {
        var b = a.data || {};
        return b.board_id
    },
    _onBoardFollow: function(a) {
        var b = this._getBoardIdFromEvent(a), c = $.inArray(b, this._boardsFollowed);
        b&&-1 === c && (this._boardsFollowed.push(b), this._updateFollowedBoards(1), this._updateFollowedBoardMask(a, !0))
    },
    _onBoardUnfollow: function(a) {
        var b = this._getBoardIdFromEvent(a);
        if (b) {
            var c = $.inArray(b, this._boardsFollowed);
            - 1 !== c && (this._boardsFollowed.splice(c, 1), this._updateFollowedBoards( - 1)), this._updateFollowedBoardMask(a, !1), this._boardsFollowed.length === NUM_REQUIRED_BOARDS - 1 && this._setProgressCompletion(!1)
        }
    },
    _updateFollowedBoardMask: function(a, b) {
        var c = this._getBoardIdFromEvent(a);
        if (c) {
            var d = this.$("." + FAST_FOLLOW_BOARD_MASK + ".mask" + c);
            b ? d.show() : d.hide()
        }
    },
    _onCategoryUpdate: function(a) {
        var b = a.data, c = {
            name: "CategoryBoardsResource",
            options: {
                category: b
            }
        };
        this._currentAction = FastFollowSidebarActions.CATEGORY, this._updateGridFromResource(c, b, b)
    },
    _onSearchQueryUpdate: function(a) {
        var b = a.data, c = {
            name: "SearchResource",
            options: {
                query: b,
                scope: "boards",
                search_context: "fast_follow"
            }
        };
        this._currentAction = FastFollowSidebarActions.SEARCH_TERM, this._updateGridFromResource(c, null, b)
    },
    _updateGridFromResource: function(a, b) {
        this._currentGrid || (this._currentGrid = this.getChildById(FAST_FOLLOW_GRID_ID), this._cachedGrids[this._currentGrid.resource.options.category] = this._currentGrid), this._currentGrid.remove();
        var c = this._cachedGrids[b];
        c || (c = new P.modules.Grid({
            id: FAST_FOLLOW_GRID_ID,
            options: {
                centered: !1,
                layout: "fixed_height",
                show_grid_footer: !1,
                scrollable: !0,
                item_options: {
                    allow_click_thru: !1,
                    board_click_mask: !0
                }
            },
            resource: a
        }), c.render(), b && (this._cachedGrids[b] = c));
        var d = this.$(".fastFollowGridContainer");
        this.$("." + FAST_FOLLOW_CONTENT_CLASS).scrollTop(0), this.insertChild(c, d), this._currentGrid = c
    },
    _updateBoardHeading: function(a) {
        this.$(".heading").hide(), this._currentAction === FastFollowSidebarActions.CATEGORY ? (a = this.$(".followPageSidebarCategory[data-category=" + a + "]"), a = a ? a.text() : null, this.$(".categoryHeading").show()) : this.$(".searchHeading").show();
        var b = this.$(".categoryOrQuery");
        b && b.length && a && b.text(a)
    },
    _onProgressCompletion: function() {
        this._userRegisterTrackActionOrientationComplete(), this._setProgressCompletion(!0)
    },
    _onFastFollowCompletion: function(a) {
        var b = a.target;
        b && "tryOutYourFeedButton" === b.id && (this.hide(), this.navigate("/", null, !0))
    },
    _userRegisterTrackActionOrientationComplete: function() {
        P.trackRegisterAction("orientation_complete")
    },
    _setProgressCompletion: function(a) {
        var b = this.getChildById(FAST_FOLLOW_HEADER_ID);
        b && (b.options.progress_completed = a, a ? b.render() : (b.options.num_boards_followed = this._boardsFollowed.length, b.render()))
    },
    _updateFollowedBoards: function(a) {
        if (!this._modalDisplayed) {
            var b = this.getChildById(FAST_FOLLOW_HEADER_ID);
            b && b.stepProgress(a)
        }
    },
    onContentReady: function() {
        _.each(this.extraData.followed_boards, function(a) {
            this._boardsFollowed.push(a.id)
        }.bind(this)), this.childListen(P.CONST.EVENT_FAST_FOLLOW_CATEGORY_SELECTED, this._onCategoryUpdate), this.childListen(P.CONST.EVENT_FAST_FOLLOW_SEARCH_QUERY_UPDATED, this._onSearchQueryUpdate), this.childListen(P.CONST.EVENT_PROGRESS_COMPLETED, this._onProgressCompletion), this.childListen(P.CONST.EVENT_BOARD_FOLLOW, this._onBoardFollow, this), this.childListen(P.CONST.EVENT_BOARD_UNFOLLOW, this._onBoardUnfollow, this), this.childListen(P.CONST.EVENT_BUTTON_CLICK, this._onFastFollowCompletion), this.listen(P.Viewport, P.CONST.EVENT_RESIZE, this.position), this.position()
    },
    position: function() {
        if (this.inDom && this.contentReady) {
            this.fastFollowHeaderHeight || (this.fastFollowHeaderHeight = this.$(".FastFollowHeader").outerHeight(!0));
            var a = FAST_FOLLOW_MODAL_TOP_PADDING + FAST_FOLLOW_MODAL_BOTTOM_PADDING, b = P.Viewport.height, c = b - a - this.fastFollowHeaderHeight, d = Math.max(FAST_FOLLOW_MIN_HEIGHT, c);
            this.$(".fastFollowContent").height(d)
        }
    },
    onDestroyed: function() {
        _.each(_.values(this._cachedGrids), function(a) {
            a.destroy()
        })
    }
}), P.modules.FastFollow.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.FastFollowPinfluencers"), goog.require("P.Module"), goog.require("P.modules.Grid");
var FASTFOLLOW_PINFLUENCER_CONTENT_CLASS = "fastFollowContent", FASTFOLLOW_PINFLUENCER_GRID_ID = "categoryPinfluencersGrid", FAST_FOLLOW_USER_MASK = "wholeUserMask", FASTFOLLOW_MIN_HEIGHT = 355, FASTFOLLOW_MODAL_TOP_PADDING = 102, FASTFOLLOW_MODAL_BOTTOM_PADDING = 56;
P.modules.FastFollowPinfluencers = P.Module.extend({
    getOwnedScrollables: function() {
        return this.$(".fastFollowGridContainer")
    },
    _getUserIdFromEvent: function(a) {
        var b = a.target.data || {};
        return b.id
    },
    _onPinfluencerFollow: function(a) {
        var b = this._getUserIdFromEvent(a);
        if (b) {
            var c = this.$("." + FAST_FOLLOW_USER_MASK + ".mask" + b);
            c.show()
        }
    },
    _onPinfluencerUnfollow: function(a) {
        var b = this._getUserIdFromEvent(a);
        if (b) {
            var c = this.$("." + FAST_FOLLOW_USER_MASK + ".mask" + b);
            c.hide()
        }
    },
    _onCategoryUpdate: function(a) {
        var b = a.data, c = {
            name: "FastFollowPinfluencerUsersResource",
            options: {
                category: b
            }
        };
        this._updateGridFromResource(c, b, b)
    },
    _updateGridFromResource: function(a, b, c) {
        this._currentGrid || (this._currentGrid = this.getChildById(FASTFOLLOW_PINFLUENCER_GRID_ID), this._cachedGrids[this._currentGrid.resource.options.category] = this._currentGrid), this._currentGrid.remove();
        var d = P.resourceFactory.create("FastFollowPinfluencerUsersResource", {
            category: c
        });
        d.callGet().then(function(c) {
            if (0 === c.resource_response.data.length)
                this.$(".EmptyGridMessage").show();
            else {
                this.$(".EmptyGridMessage").hide();
                var d = this._cachedGrids[b];
                d || (d = new P.modules.Grid({
                    id: FASTFOLLOW_PINFLUENCER_GRID_ID,
                    options: {
                        scrollable: !0,
                        layout: "fixed_height",
                        show_grid_footer: !1,
                        item_options: {
                            user_click_mask: !0
                        }
                    },
                    resource: a
                }), d.render(), b && (this._cachedGrids[b] = d));
                var e = this.$(".fastFollowGridContainer");
                this.$("." + FASTFOLLOW_PINFLUENCER_CONTENT_CLASS).scrollTop(0), this.insertChild(d, e), this._currentGrid = d
            }
        }.bind(this))
    },
    onContentReady: function() {
        this.childListen(P.CONST.EVENT_FAST_FOLLOW_PINFLUENCER_CATEGORY_SELECTED, this._onCategoryUpdate), this.childListen(P.CONST.EVENT_USER_FOLLOW, this._onPinfluencerFollow, this), this.childListen(P.CONST.EVENT_USER_UNFOLLOW, this._onPinfluencerUnfollow, this), this.listen(P.Viewport, P.CONST.EVENT_RESIZE, this.position), this.position()
    },
    position: function() {
        if (this.inDom && this.contentReady) {
            this.fastFollowHeaderHeight || (this.fastFollowHeaderHeight = this.$(".FastFollowHeader").outerHeight(!0));
            var a = FASTFOLLOW_MODAL_TOP_PADDING + FASTFOLLOW_MODAL_BOTTOM_PADDING, b = P.Viewport.height, c = b - a - this.fastFollowHeaderHeight, d = Math.max(FASTFOLLOW_MIN_HEIGHT, c);
            this.$(".fastFollowContent").height(d)
        }
    },
    onCreated: function() {
        this._cachedGrids = {}
    },
    onDestroyed: function() {
        _.each(_.values(this._cachedGrids), function(a) {
            a.destroy()
        })
    }
}), P.modules.FastFollowPinfluencers.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/FastFollowPinfluencers/FastFollowPinfluencers.nunjucks"), goog.provide("P.modules.FriendsToFollow"), goog.require("P.Module"), goog.require("P.modules.User"), P.modules.FriendsToFollow = P.Module.extend({
    friendIdsUsed: [],
    friendsUnused: [],
    usersToReplace: [],
    usersDismissing: [],
    events: {
        "click .pinfluencerButton": "onPinfluencerButtonClick"
    },
    onContentReady: function() {
        this.friendIdsUsed = this.extraData.friendIdsUsed, this.invite_mode = "invites" === this.options.mode, this.list = this.getChildByModuleName("List"), this.destroyIfEmpty() || (this.childListen(P.CONST.EVENT_DISMISS, this.onChildDismiss), this.childListen(P.CONST.EVENT_USER_FOLLOW, this.onChildActionTaken), this.childListen(P.CONST.EVENT_INVITE_USER, this.onChildActionTaken)), this.invite_mode && P.fb.ensureInit(P.NOOP)
    },
    onPinfluencerButtonClick: function() {
        var a = {
            name: "FastFollowPinfluencers"
        };
        P.loadModule(a).then(function(a) {
            this.showInModal(a)
        }.bind(this))
    },
    onChildDismiss: function(a) {
        var b, c = a.target;
        this.invite_mode ? (b = P.resourceFactory.create("UserInviteSuggestionResource", {}), b.set("hash_id", c.getUserId())) : (b = P.resourceFactory.create("UserFriendSuggestionResource", {}), b.set("user_id", c.getUserId())), b.callDelete(), this.dismissUser(c)
    },
    onChildActionTaken: function(a) {
        var b = a.target;
        window.setTimeout(function() {
            if (this.dismissUser(b), this.invite_mode) {
                var a = P.resourceFactory.create("UserInviteSuggestionResource", {});
                a.set("hash_id", b.getUserId()), a.callDelete()
            }
        }.bind(this), 500)
    },
    requestMoreFriendsIfNeeded: function() {
        var a = this.friendsUnused, b = this.usersDismissing.length + this.usersToReplace.length;
        a.length >= b || this.resource.xhr || (this.resource.resetBookmark(), this.invite_mode ? this.resource.options.excluded_hash_ids = this.friendIdsUsed : this.resource.options.excluded_user_ids = this.friendIdsUsed, this.resource.callGet().then(function(a) {
            var b = a.resource_response.data;
            for (this.friendsUnused = b; this.usersToReplace.length;) {
                var c = this.usersToReplace.shift();
                this.replaceUser(c)
            }
        }.bind(this)))
    },
    dismissUser: function(a) {
        a && (this.usersDismissing.push(a), a.fadeOut(function() {
            this.usersDismissing = _.without(this.usersDismissing, a), this.friendsUnused.length ? this.replaceUser(a) : (this.usersToReplace.push(a), this.requestMoreFriendsIfNeeded())
        }.bind(this)))
    },
    getHeaderElement: function() {
        return this.$(".memoTitle")
    },
    replaceUser: function(a) {
        var b = a.$el.parent(), c = this.friendsUnused.pop();
        return c ? (this.invite_mode ? (a.options.contact_info = c, this.friendIdsUsed.push(c.hash_id)) : (a.resource.options.user_id = c.id, this.friendIdsUsed.push(c.id)), void a.render().then(function() {
            a.show(), this.list.removeChild(a), b.remove(), this.list.$el.append(b), this.list.insertChild(a, b), a.fadeIn()
        }.bind(this))) : (this.list.removeChild(a), void b.remove())
    }
}), P.modules.FriendsToFollow.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.GeoFeatureList"), goog.require("P.Module"), goog.require("P.modules.Dropdown"), P.modules.GeoFeatureList = P.Module.extend({
    events: {
        "click .dropdownTarget": "onTargetClick"
    },
    onListItemClick: function(a) {
        var b = $(a.data).attr("data-index"), c = this.options.features[b];
        this.options.active_feature = c, this.hideDropdown(), this.render().then(function() {
            this.triggerEvent(P.CONST.EVENT_UPDATE_GEO_FEATURE_LIST, c, !0)
        }.bind(this))
    },
    onContentReady: function() {
        var a = {
            module: this.getContentModuleLoadOptions(),
            anchor: this.$(".dropdownTarget"),
            class_name: "aboveModal geoFeatureDropdown",
            prefetch: !0,
            position_point: "BOTTOM_LEFT"
        };
        this.options.active_feature = null, this._dropdown = new P.modules.Dropdown({
            options: a,
            id: "dropdown"
        })
    },
    updateFeatures: function(a) {
        this.options.active_feature = null, this.options.features = a, this.render()
    },
    getContentModuleLoadOptions: function() {
        return {
            name: "List",
            options: {
                items: this.options.features
            }
        }
    },
    hideDropdown: function() {
        this._dropdown.hide()
    },
    onTargetClick: function() {
        if (this._dropdown.isShowing())
            this.hideDropdown();
        else {
            var a = this;
            this._dropdown.show(function() {
                var b = a._dropdown.getChildByModuleName("List");
                a.listen(b, P.CONST.EVENT_LIST_ITEM_CLICK, a.onListItemClick)
            })
        }
    }
}), P.modules.GeoFeatureList.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/GeoFeatureList/GeoFeatureList.nunjucks"), goog.provide("P.modules.Header"), goog.require("P.Module"), goog.require("P.modules.ui.SearchForm"), goog.require("P.router"), P.modules.Header = P.Module.extend({
    events: {},
    onContentReady: function() {
        var a = {};
        this.pubsubSubscribe(P.CONST.PUBSUB_CHANNEL_SITE, a), this.listen(P.router.get(), P.CONST.EVENT_ROUTE_MATCHED, this.onRouteMatched);
        var b = {};
        b[P.CONST.PUBSUB_TOPIC_MAIN_MODULE_NEW] = this.onMainModuleChange, this.pubsubSubscribe(P.CONST.PUBSUB_CHANNEL_MAIN_MODULE, b)
    },
    onRouteMatched: function(a) {
        var b = a.navigateData.currentModule || {}, c = ["SearchPage", "Closeup"];
        if (!_.contains(c, a.module) && _.contains(c, b.className)) {
            var d = this.getChildById("mainSearchTextbox");
            d.clearTypeaheadField()
        }
    },
    onMainModuleChange: function(a, b, c) {
        var d = c, e = ["LoginPage", "UserRegisterPage"];
        (this.options.main_module_name === d.className||-1 === e.indexOf(d.className)&&-1 === e.indexOf(this.options.main_module_name)) && (P.currentUser.isAuthenticated() || "HomePage" !== this.options.main_module_name && "HomePage" !== d.className) || (this.options.main_module_name = d.className, this.render());
        var f = ["InterestFeedPage", "BoardPage", "Closeup"];
        if ((!P.currentUser.isAuthenticated() || P.experiments.instance.inExperimentGroupsActiveOrTriggerable("auth_klp_bar", ["enabled", "interests_only"])) && ( - 1 !== f.indexOf(this.options.main_module_name)||-1 !== f.indexOf(d.className))) {
            var g = this.getChildByModuleName("KLPBar");
            g && g.render()
        }
    },
    getHeight: function() {
        return this.$(".headerBackground").height()
    },
    getUserMenu: function() {
        return this.getChildById("userMenu")
    },
    getHomeElement: function() {
        return this.$(".logo")
    },
    show: function() {
        this.$el.show(), this.$el.removeClass("hidden")
    }
}), P.modules.Header.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.HeroRebuildFeed"), goog.require("P.Module"), goog.require("P.modules.HeroBasic");
var PICKING_INTERESTS_STATE = 1;
P.modules.HeroRebuildFeed = P.modules.HeroBasic.extend({
    complete: function(a) {
        var b = this.getChildById("complete");
        b.showLoading();
        var c = P.resourceFactory.create("UserStateResource", {
            state: "RESETTING_HOME_FEED",
            value: PICKING_INTERESTS_STATE
        });
        c.callCreate().then(function() {
            P.modules.HeroBasic.prototype.complete.apply(this, [a]), window.location.reload()
        }.bind(this), P.NOOP)
    }
}), P.modules.HeroRebuildFeed.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.HeroUndoRebuildFeed"), goog.require("P.Module"), goog.require("P.modules.HeroBasic");
var MAX_NUM_CALLS_TO_TRY = 10, POLL_INTERVAL = 500, REBUILT_STATE = 2;
P.modules.HeroUndoRebuildFeed = P.modules.HeroBasic.extend({
    dismiss: function() {
        var a = this.getChildById("close");
        a.showLoading();
        var b = P.resourceFactory.create("OrientationContextResource", {});
        b.callDelete({
            showError: !1
        }).then(function() {
            this.pollFeedStatus(MAX_NUM_CALLS_TO_TRY)
        }.bind(this))
    },
    pollFeedStatus: function(a) {
        a <= 0 && window.location.reload();
        var b = P.resourceFactory.create("UserStateResource", {
            state: "RESETTING_HOME_FEED"
        });
        b.callGet({
            showError: !1
        }).then(function(b) {
            b.resource_response.data !== REBUILT_STATE ? window.location.reload() : P.setTimeout(function() {
                this.pollFeedStatus(a - 1)
            }.bind(this), POLL_INTERVAL)
        }.bind(this), function() {
            P.setTimeout(function() {
                this.pollFeedStatus(a - 1)
            }.bind(this), POLL_INTERVAL)
        }.bind(this))
    }
}), P.modules.HeroUndoRebuildFeed.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.NotificationsConversationsButton"), goog.require("P.modules.DropdownButton");
var NEWS_TAB = 0, YOU_TAB = 1, MESSAGE_TAB = 2;
P.modules.NotificationsConversationsButton = P.modules.DropdownButton.extend({
    getContentModuleLoadOptions: function() {
        return this.getDropdownModule()
    },
    onCreated: function() {
        P.modules.DropdownButton.prototype.onCreated.call(this);
        var a = {};
        a[P.CONST.PUBSUB_TOPIC_CONVERSATION_UNREAD_COUNT] = this.onConversationUnreadCount, a[P.CONST.PUBSUB_TOPIC_CONVERSATION_UNREAD_COUNT_DECREASE] = this.onConversationUnreadCountDecrease, this.pubsubSubscribe(P.CONST.PUBSUB_CHANNEL_SITE, a), this.childListen(P.CONST.EVENT_BUTTON_CLICK, this.onButtonClick), this.childListen(P.CONST.EVENT_UNREAD_CONVERSATION_LIST_ITEM_CLICK, this.onUnreadConversationListItemClick)
    },
    onConversationUnreadCountDecrease: function(a, b, c) {
        this._decrementButtonByCount(c)
    },
    _decrementButtonByCount: function(a) {
        var b = this.getBadgeCount(), c = Math.max(b - a, 0);
        this.setBadgeCount(c), 0 === c && P.getConversationsManager().deleteConversationBadgeCount(), !this._dropdown.isShowing() && this._dropdown.getContentModule() && this._dropdown.getContentModule().render()
    },
    onButtonClick: function(a) {
        var b = a.target;
        b.isSegmentedControlButton() && this.clearAndUpdateBadgeById(b.id)
    },
    clearAndUpdateBadgeById: function(a) {
        "networkNotificationsButton" === a ? this.clearAndUpdateNetworkNotifBadge() : "notificationsButton" === a ? this.clearAndUpdateNotificationsBadge() : "conversationsButton" === a && this.clearAndUpdateConversationsBadge()
    },
    clearAndUpdateBadgeByIndex: function(a) {
        a === NEWS_TAB ? this.clearAndUpdateNetworkNotifBadge() : a === YOU_TAB ? this.clearAndUpdateNotificationsBadge() : a === MESSAGE_TAB && this.clearAndUpdateConversationsBadge()
    },
    clearAndUpdateConversationsBadge: function() {
        this.unseenConversationsCount = 0, P.getConversationsManager().deleteConversationBadgeCount(), this.clearConversationsSegmentButtonBadge(), this.updateBadgeCount()
    },
    clearAndUpdateNotificationsBadge: function() {
        this.unseenNotificationsCount = 0, this.clearNotificationsSegmentButtonBadge(), this.updateBadgeCount()
    },
    clearAndUpdateNetworkNotifBadge: function() {
        this.unseenNetworkNotifCount = 0, this.clearNetworkNotifSegmentButtonBadge(), this.updateBadgeCount()
    },
    getDropdownModule: function() {
        return {
            name: "NotificationsConversationsDropdown",
            options: {}
        }
    },
    onUnreadConversationListItemClick: function() {
        var a = this.getBadgeCount();
        a -= 1, this.setBadgeCount(a), 0 === a && P.getConversationsManager().deleteConversationBadgeCount()
    },
    getNotificationsSegmentButton: function() {
        var a, b = this.getDropdown();
        if (b.children.length) {
            var c = b.getContentModule();
            a = c.getNotificationsSegmentedButton()
        }
        return a
    },
    getConversationsSegmentButton: function() {
        var a, b = this.getDropdown();
        if (b.children.length) {
            var c = b.getContentModule();
            a = c.getConversationsSegmentedButton()
        }
        return a
    },
    getNetworkNotifSegmentButton: function() {
        var a, b = this.getDropdown();
        if (b.children.length) {
            var c = b.getContentModule();
            a = c.getNetworkNotifSegmentedButton()
        }
        return a
    },
    clearConversationsSegmentButtonBadge: function() {
        var a = this.getConversationsSegmentButton();
        a && a.clearBadge()
    },
    clearNotificationsSegmentButtonBadge: function() {
        var a = this.getNotificationsSegmentButton();
        a && a.clearBadge()
    },
    clearNetworkNotifSegmentButtonBadge: function() {
        var a = this.getNetworkNotifSegmentButton();
        a && a.clearBadge()
    },
    setNotificationsSegmentButtonBadgeCount: function(a) {
        var b = this.getNotificationsSegmentButton();
        b && b.setBadge(a)
    },
    setNetworkNotifSegmentButtonBadgeCount: function(a) {
        var b = this.getNetworkNotifSegmentButton();
        b && b.setBadge(a)
    },
    setConversationsSegmentButtonBadgeCount: function(a) {
        var b = this.getConversationsSegmentButton();
        b && b.setBadge(a)
    },
    onConversationUnreadCount: function(a, b, c) {
        this.unseenConversationsCount = c, 0 === c ? this.clearConversationsSegmentButtonBadge() : this.setConversationsSegmentButtonBadgeCount(c), this.updateBadgeCount()
    },
    onContentReady: function() {
        P.modules.DropdownButton.prototype.onContentReady.call(this), this.unseenNetworkNotifCount = 0, this.unseenNotificationsCount = 0, this.unseenConversationsCount = 0, this.data && (this.unseenNetworkNotifCount = this.data.network_story_count, isNaN(this.unseenNetworkNotifCount) && (this.unseenNetworkNotifCount = 0), this.unseenNotificationsCount = this.data.notification_unseen_count, isNaN(this.unseenNotificationsCount) && (this.unseenNotificationsCount = 0), this.setBadgeCount(this.unseenNotificationsCount + this.unseenNetworkNotifCount)), this.childListen(P.CONST.EVENT_DROPDOWN_HIDE, this.onDropdownHide), this.childListen(P.CONST.EVENT_DROPDOWN_SHOW, this.onDropdownShow), this.listen(P.Updater.instance(), "notifications_count", function(a) {
            if (a)
                if (this.getDropdown().isShowing()) {
                    var b = this.getDropdown(), c = b.getContentModule(), d = c._getSegmentedController(), e = "notifications" === d.getActiveModule().id;
                    e ? this.clearAndUpdateNotificationsBadge() : (this.unseenNotificationsCount = a, this.setNotificationsSegmentButtonBadgeCount(a))
                } else 
                    this.unseenNotificationsCount = a, this.setNotificationsSegmentButtonBadgeCount(a);
            else 
                this.clearNotificationsSegmentButtonBadge();
            this.updateBadgeCount()
        }), this.listen(P.Updater.instance(), "network_notifications_count", function(a) {
            if (a)
                if (this.getDropdown().isShowing()) {
                    var b = this.getDropdown(), c = b.getContentModule(), d = c._getSegmentedController(), e = "networkNotif" === d.getActiveModule().id;
                    e ? this.clearAndUpdateNetworkNotifBadge() : (this.unseenNetworkNotifCount = a, this.setNetworkNotifSegmentButtonBadgeCount(a))
                } else 
                    this.unseenNetworkNotifCount = a, this.setNetworkNotifSegmentButtonBadgeCount(a);
            else 
                this.clearNetworkNotifSegmentButtonBadge();
            this.updateBadgeCount()
        })
    },
    onDropdownHide: function() {
        var a = this.getDropdown();
        this.setActiveStyle(!1);
        var b = a.getContentModule();
        if (!b)
            return void this.log.warn("modInDropdown not found in NotificationsConversationsButton");
        b.removeCreateConversationGroup();
        var c = b._getSegmentedController();
        if (!c)
            return void this.log.warn("segmentedController not found in NotificationsConversationsButton");
        var d = c.getSelectedTab();
        this.saveSelectedTab(d), this.clearAndUpdateBadgeByIndex(d)
    },
    onDropdownShow: function(a) {
        var b = a.target, c = b.getContentModule(), d = c._getSegmentedController();
        d.onButtonSelected(this.getTabToShow());
        var e = "notifications" === d.getActiveModule().id, f = "networkNotif" === d.getActiveModule().id, g = "conversationsListDropdown" === d.getActiveModule().id;
        b.getContentModulePromise().then(function() {
            e && this.unseenNotificationsCount ? this.clearAndUpdateNotificationsBadge() : f && this.unseenNetworkNotifCount ? this.clearAndUpdateNetworkNotifBadge() : g && this.unseenConversationsCount && this.clearAndUpdateConversationsBadge()
        }.bind(this))
    },
    updateBadgeCount: function() {
        var a = 0;
        a = this.unseenNotificationsCount + this.unseenNetworkNotifCount + this.unseenConversationsCount, this.setBadgeCount(a), P.Title.instance().setPrefixCount(a)
    },
    getTabToShow: function() {
        var a =- 1;
        return this.unseenConversationsCount > 0 ? a = MESSAGE_TAB : this.unseenNotificationsCount > 0 ? a = YOU_TAB : this.unseenNetworkNotifCount > 0 && (a = NEWS_TAB), - 1 === a && (a = P.LocalStorage.getItem(P.CONST.LOCALSTORAGE_SELECTED_NOTIFICATION_TAB), null == a && (a = NEWS_TAB)), a
    },
    saveSelectedTab: function(a) {
        P.LocalStorage.setItem(P.CONST.LOCALSTORAGE_SELECTED_NOTIFICATION_TAB, a)
    }
}), P.modules.NotificationsConversationsButton.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.NotificationsConversationsDropdown"), goog.require("P.Module"), goog.require("P.modules.CreateConversationGroup");
var CLASS_CONVERSATIONS_SHOWING = "conversationsShowing";
P.modules.NotificationsConversationsDropdown = P.Module.extend({
    onCreated: function() {
        this.childListen(P.CONST.EVENT_BUTTON_CLICK, this.onButtonClick), this.childListen(P.CONST.EVENT_SEND_OBJECT_TO_USERS, this.onCreateConversationWithUsers), this.showingConversationGroup=!1
    },
    onButtonClick: function(a) {
        var b = a.target;
        if (b.isCancelButton())
            return void this.removeCreateConversationGroup();
        switch (b.id) {
        case"conversationsButton":
            this.$el.addClass("conversationsShowing");
            break;
        case"notificationsButton":
            this.$el.removeClass("conversationsShowing");
            break;
        case"newMessage":
            this.showCreateConversationGroup()
        }
    },
    onCreateConversationWithUsers: function(a) {
        var b = a.data.user_ids, c = a.data.emails, d = {
            text: a.data.text
        };
        P.getConversationsManager().sendMessageToUsers(b, c, d).then(function() {
            this.triggerEvent(P.CONST.EVENT_DISMISS, null, !0), this.render()
        }.bind(this))
    },
    showCreateConversationGroup: function() {
        this.showingConversationGroup || (this.createConversationGroup = new P.modules.CreateConversationGroup({}), this.createConversationGroup.renderExistingData().then(function() {
            this.appendChild(this.createConversationGroup)
        }.bind(this))), this.showingConversationGroup=!0
    },
    removeCreateConversationGroup: function() {
        (this.showingConversationGroup || this.createConversationGroup) && (this.createConversationGroup.destroy(), this.createConversationGroup = null), this.showingConversationGroup=!1
    },
    getConversationsSegmentedButton: function() {
        var a = this._getSegmentedController();
        return a ? a.getChildById("conversationsButton") : void 0
    },
    getNotificationsSegmentedButton: function() {
        var a = this._getSegmentedController();
        return a ? a.getChildById("notificationsButton") : void 0
    },
    getNetworkNotifSegmentedButton: function() {
        var a = this._getSegmentedController();
        return a ? a.getChildById("networkNotificationsButton") : void 0
    },
    setConversationsActiveSegment: function() {
        var a = this._getSegmentedController();
        this.$el.addClass(CLASS_CONVERSATIONS_SHOWING), a.makeActiveModuleFromIndex(1)
    },
    _getSegmentedController: function() {
        return this.getChildById("segmentedController")
    },
    setNotificationsActiveSegment: function() {
        var a = this._getSegmentedController();
        this.$el.removeClass(CLASS_CONVERSATIONS_SHOWING), a.makeActiveModuleFromIndex(0)
    },
    getNotificationsSegment: function() {
        var a, b = this._getSegmentedController();
        return b && (a = b.getChildByModuleName("notifications")), a
    }
}), P.modules.NotificationsConversationsDropdown.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.Pin"), goog.require("P.modules.PinBase"), goog.require("P.modules.PinCommentList"), goog.require("P.translate");
var PIN_EDIT_BUTTON_ID = "editButton", PIN_CLASS_VISIBLE = "visible", PIN_CLASS_HIDDEN = "hidden", SCOPED_EVENT_NAME = "mapPage", MOUSEENTER_EVENT_NAME = "mouseenter." + SCOPED_EVENT_NAME, MOUSELEAVE_EVENT_NAME = "mouseleave." + SCOPED_EVENT_NAME, VIEW_TYPES = {
    BOARD_PINS_GRID: "boardPinsGrid",
    DETAILED: "detailed",
    SUMMARY: "summary",
    VISUAL_OBJECT_GRID: "visualObjectGrid"
}, GRID_ACTION_BUTTON_WRAPPERS = [".likeEditButtonWrapper", ".repinSendButtonWrapper"];
P.modules.Pin = P.modules.PinBase.extend({
    events: {
        "mouseleave .pinImageSourceWrapper": "onPinMouseout",
        "click .playIndicatorPill.gifType": "onGifClick",
        "click .richPinMeta.hasMapButton": "onRichPinMetaWithMapClick",
        "click .pinMask": "onPinMaskClicked",
        "click .translateButton": "onTranslateClick",
        "click .vaseButton": "onVaseToggleClick",
        "click a.pinImageWrapper": "onPinImageWrapperClick"
    },
    onPinImageWrapperClick: function(a) {
        P.currentUser.isAuthenticated() || P.experiments.instance.inExperimentGroupsActiveOrTriggerable("more_signup_modals", ["enabled"]) || (P.experiments.instance.activateAndPersistExperiment("closeup_signup_modal_js"), P.experiments.instance.inExperimentGroupsActiveOrTriggerable("closeup_signup_modal_js", ["enabled_slideshow", "enabled_image", "employees"]) && (a.preventDefault(), a.stopPropagation(), a.stopImmediatePropagation()), P.experiments.instance.inExperimentGroupsActiveOrTriggerable("closeup_signup_modal_js", ["enabled_slideshow", "enabled_image", "enabled_closeup", "employees"]) && P.UserRegistration.showSignupModal(this.resource, {
            extra_class: "closeupSignupRedesign",
            redirect_to_signup: !0,
            can_dismiss: !1,
            prev: window.location.pathname,
            tagline: P._("Sign up to get more details about this Pin"),
            caption: P._("And find even more Pins like this.")
        }))
    },
    onPinMouseout: function() {
        var a = this.getChildById("sendPinButton");
        if (a) {
            var b = a.getDropdown();
            b && b.isVisible() && this.toggleActionButtons(!0)
        }
    },
    toggleActionButtons: function(a) {
        this.$(GRID_ACTION_BUTTON_WRAPPERS.join(", ")).toggleClass(PIN_CLASS_VISIBLE, a)
    },
    onRichPinMetaWithMapClick: function() {
        var a = this.getPinId();
        this._forceSeeOnMap=!0, this.getPlaceData() && this.triggerEvent(P.CONST.EVENT_PIN_PLACE_CLICK, a, !0)
    },
    onButtonClick: function(a) {
        var b = a.target, c = b.id;
        switch (c) {
        case"expandGiraffe":
            this.onExpandGiraffeClick(a), b.destroy(), this.$(".navLinkOverlay").removeClass("squished");
            break;
        case"addToMap":
            this.triggerEvent(P.CONST.EVENT_BOARD_CACHE_PIN_ID_TO_ADD_TO_MAP, this, !0);
            break;
        case"seeOnMap":
            b.setHighlight(!0);
            break;
        case"pinItToMapButton":
            var d = this.extraData.image;
            this.showLoading(!0), this.triggerEvent(P.CONST.EVENT_PINIT_BUTTON_CLICKED, d, !0);
            break;
        case"pinItButton":
            if (P.experiments.instance.inExperimentGroups("web_pin_create", ["employees_v3", "enabled_v3"]) && this._getViewType() === VIEW_TYPES.SUMMARY) {
                var e = _.extend({}, this.options, {
                    disable_links: !0,
                    hide_hover_UI: !0,
                    editable_description: !0
                }), f = new P.modules.Pin({
                    options: e,
                    data: this.data
                });
                f.renderExistingData().then(function() {
                    var a = f.getContent(), b = this.$el.parent(".item");
                    this.triggerEvent(P.CONST.EVENT_APPEND_ELEMENT, a, !0);
                    var c = b.offset();
                    a.css("top", c.top), a.css("left", c.left), a.addClass("cloned"), P.getModalManager().setAnimatedElement(a)
                }.bind(this))
            }
        }
    },
    getId: function() {
        return this.options.pin_id
    },
    onExpandGiraffeClick: function() {
        this.$(".pinImageWrapper").removeClass("collapsed"), this.triggerEvent(P.CONST.EVENT_DIMS_CHANGED, null, !0)
    },
    getSummaryImageUrl: function() {
        return this.data.images["236x"].url
    },
    getLink: function() {
        return this.data.link || null
    },
    showEditModal: function() {
        var a = this.getChildById(PIN_EDIT_BUTTON_ID);
        return a ? (a.showModal(), !0) : !1
    },
    getPinMedia: function() {
        var a = this._getViewType();
        switch (a) {
        case VIEW_TYPES.DETAILED:
            return this.$(this.isEmbed()&&!this.isGif() ? "iframe" : ".PaddedPin img.pinImage");
        case VIEW_TYPES.BOARD_PINS_GRID:
        case VIEW_TYPES.VISUAL_OBJECT_GRID:
            return this.$("img");
        case VIEW_TYPES.SUMMARY:
            return this.$(".pinHolder .pinImg");
        default:
            return this.log.error("requesting pin media for unsupported view_type:" + a), null
        }
    },
    isEmbed: function() {
        return this.data.embed && this.data.embed.src
    },
    isGif: function() {
        return this.data.embed && "gif" === this.data.embed.type
    },
    isVideo: function() {
        return this.data.is_video
    },
    getDominantColor: function() {
        return this.data.dominant_color || "#eee"
    },
    getDetailedImageDimensions: function() {
        var a = {
            width: 736,
            height: 370
        }, b = {
            youtube: a,
            vimeo: a,
            vevo: a,
            soundcloud: {
                width: 553,
                height: 166
            }
        };
        if (this.data.is_playable && (this.data.is_video || this.data.attribution && this.data.attribution.embed)) {
            if (this.data.attribution) {
                var c = b[this.data.attribution.provider_name];
                if (c)
                    return c
            }
            if (this.data.embed)
                return this.data.embed
        }
        return this.data.images["736x"]
    },
    _getViewType: function() {
        return this.options.view_type ? this.options.view_type : VIEW_TYPES.SUMMARY
    },
    onContentReady: function() {
        P.modules.PinBase.prototype.onContentReady.call(this), P.experiments.instance.inExperimentGroupsActiveOrTriggerable("pin_translator_v3", ["enabled", "employees", "control"]) && "detailed" === this.options.view_type && this.data.description && P.translate.detect(this.data.description).then(function(a) {
            var b = a.resource_response.data;
            if (this.userLanguage = P.CONTEXT.language, b && this.userLanguage !== b) {
                var c = P.experiments.instance.getGroupForExperiment("pin_translator_v3", !0);
                if ("control" !== c) {
                    var d = this._getTranslateButton();
                    d.show()
                }
            }
        }.bind(this));
        var a = this.options.pin_id;
        if (a) {
            var b = {};
            b[P.CONST.PUBSUB_TOPIC_PIN_COMMENT_CREATED] = this.onPinCommentCreated, b[P.CONST.PUBSUB_TOPIC_PIN_COMMENT_DELETED] = this.onPinCommentDeleted, b[P.CONST.PUBSUB_TOPIC_PIN_REPINNED] = this.onPinRepinned, b[P.CONST.PUBSUB_TOPIC_PIN_COMMENT_POPULATED] = this.onPinCommentPopulated, b[P.CONST.PUBSUB_TOPIC_PIN_DELETED] = this.onPinDeleted, b[P.CONST.PUBSUB_TOPIC_PIN_LIKED] = this.onPinLiked, b[P.CONST.PUBSUB_TOPIC_PIN_UNLIKED] = this.onPinUnliked, b[P.CONST.PUBSUB_TOPIC_PIN_UPDATED] = this.onPinUpdated, this.pubsubSubscribe(a, b)
        }
        this.listen(this, P.CONST.EVENT_NAVIGATE, this.onNavigate), this.childListen(P.CONST.EVENT_NAVIGATE, this.onNavigate), this.childListen(P.CONST.EVENT_BUTTON_CLICK, this.onButtonClick), this.childListen(P.CONST.EVENT_DROPDOWN_SHOW, this.onDropdownShow), this.childListen(P.CONST.EVENT_DROPDOWN_HIDE, this.onDropdownHide), this.childListen(P.CONST.EVENT_PIN_COMMENTS_TOGGLED, this.onPinCommentsToggled), this.childListen(P.CONST.EVENT_REQUIRES_AUTHENTICATION, function(a) {
            a.data.contextualResource || (a.data.contextualResource = this.getContextualResource())
        }), this.listen(this, P.CONST.ADD_HOVER_LISTENER_FOR_MAP_MARKER, this.addHoverListenerForMapMarker), this.listen(this, P.CONST.REMOVE_HOVER_LISTENER_FOR_MAP_MARKER, this.removeHoverListenerForMapMarker), this._commentList = this.getChildById("comment_list"), this.getPinMedia().load(this.hideBackgroundText.bind(this)).each(function() {
            this.complete && this.width < P.CONST.PIN_WIDTH && $(this).trigger("load")
        })
    },
    closeAddToMapModalIfNeeded: function() {
        var a = this.getChildById("addToMap");
        a && P.getModalManager().removeTopModal()
    },
    getContextualResource: function() {
        return P.resourceFactory.create("PinResource", {
            id: this.getId()
        })
    },
    hideBackgroundText: function() {
        this.$(".pinDomain").addClass(PIN_CLASS_HIDDEN), this.$(".pinCanonicalDescription").addClass(PIN_CLASS_HIDDEN)
    },
    onGifClick: function(a) {
        a.preventDefault(), this.originalSrc || (this.originalSrc = this.$(".pinImg").attr("src"));
        var b = this.$(".playIndicatorPill.gifType");
        return this.isPlaying ? (this.$(".pinImg").attr("src", this.originalSrc), b.removeClass("playing")) : (this.$(".pinImg").attr("src", this.data.embed.src), b.addClass("playing")), this.isPlaying=!this.isPlaying, !1
    },
    _canReRenderSafely: function() {
        var a = this.data.recommendation_reason, b=!1;
        return a && (b = a.reason), this.data.promoter?!1 : a && "FOLLOWED_INTEREST" !== b?!1 : !0
    },
    onPinRepinned: function() {
        if (this._canReRenderSafely() && this.model) {
            var a = this.data, b = a.repin_count, c = Math.max(b + 1, 0);
            a.repin_count = c, this.model.set(a), this.render()
        }
    },
    addHoverListenerForMapMarker: function() {
        var a = this.$el, b = this.getId(), c = this.getChildById("seeOnMap");
        this.removeHoverListenerForMapMarker(), a.on(MOUSEENTER_EVENT_NAME, function() {
            this.triggerEvent(P.CONST.EVENT_PIN_MOUSE_IN, b, !0), c && c.setHighlight(!0)
        }.bind(this)), a.on(MOUSELEAVE_EVENT_NAME, function() {
            this._forceSeeOnMap || (this.triggerEvent(P.CONST.EVENT_PIN_MOUSE_OUT, b, !0), c && c.setHighlight(!1))
        }.bind(this))
    },
    removeHoverListenerForMapMarker: function() {
        var a = this.$el;
        a.off(MOUSEENTER_EVENT_NAME + " " + MOUSELEAVE_EVENT_NAME)
    },
    onDropdownShow: function(a) {
        var b = a.target.options.view_type;
        "pickedForYou" === b ? P.logFrontEndEvent("pickedForYouHoverShow") : this.toggleActionButtons(!0)
    },
    onDropdownHide: function() {
        this.toggleActionButtons(!1)
    },
    onNavigate: function(a) {
        P.isOffsiteUrl(a.data.url) && (a.data.pinId = this.options.pin_id), this.hideDropdowns()
    },
    hideDropdowns: function() {
        var a = this.getChildrenByModuleName("DropdownButton");
        _.each(a, function(a) {
            a.getDropdown().hide()
        })
    },
    onPinCommentCreated: function() {
        this._getViewType() === VIEW_TYPES.SUMMARY && this.render()
    },
    onPinCommentDeleted: function() {
        this._getViewType() === VIEW_TYPES.SUMMARY && this.render()
    },
    onPinCommentPopulated: function(a, b, c) {
        this.showPinComments(c)
    },
    onPinLiked: function() {
        this.triggerEvent(P.CONST.EVENT_PIN_LIKED, null, !0);
        var a = this.getChildById("likeButton");
        a && a.setState(!0), this.incrementLikeCount()
    },
    onPinUnliked: function() {
        this.triggerEvent(P.CONST.EVENT_PIN_UNLIKED, null, !0);
        var a = this.getChildById("likeButton");
        a && a.setState(!1), this.decrementLikeCount()
    },
    incrementLikeCount: function() {
        this._setLikeCountDiff(1)
    },
    decrementLikeCount: function() {
        this._setLikeCountDiff( - 1)
    },
    _setLikeCountDiff: function(a) {
        if (this.model) {
            var b = this.data;
            if (this._canReRenderSafely()) {
                var c = b.like_count, d = Math.max(c + a, 0);
                b.like_count = d, b.liked_by_me = a > 0, this.model.set(b), this.render()
            }
        }
    },
    onPinUpdated: function(a, b, c) {
        this.triggerEvent(P.CONST.EVENT_PIN_UPDATED, c, !0), this.model && this.model.set(c), this.render()
    },
    onPinDeleted: function() {
        this.triggerEvent(P.CONST.EVENT_PIN_DELETED, this, !0), this.destroy()
    },
    onPinCommentsToggled: function() {
        this._commentList ? this._commentList.toggle() : this.showPinComments()
    },
    onPinMaskClicked: function() {
        this.triggerEvent(P.CONST.EVENT_PIN_MASK_CLICKED, {
            module: this
        }, !0)
    },
    onVaseToggleClick: function() {
        var a = this.getChildById("vaseButton");
        this.$(".vaseText.hidden")[0] ? (a.setText(P._("Less")), this.$(".vaseText").removeClass("hidden")) : (a.setText(P._("More")), this.$(".vaseText").addClass("hidden")), this.triggerEvent(P.CONST.EVENT_DIMS_CHANGED, null, !0)
    },
    updateTranslateButton: function(a, b) {
        this.$(".pinDesc").text(a);
        var c = this._getTranslateButton();
        $(".nonCanonicalDesc")[0] && c.text(b), $(".canonicalDesc")[0] && c.setText(b), null !== c && (this.translatedPin = this.translatedPin?!1 : !0)
    },
    onTranslateClick: function() {
        this.translatedPin ? this.updateTranslateButton(this.data.description, P._("See translation")) : this.translatedText ? this.updateTranslateButton(this.translatedText, P._("See original")) : P.translate.translate(this.data.description, this.userLanguage).then(function(a) {
            this.translatedText = a.resource_response.data, this.updateTranslateButton(this.translatedText, P._("See original"))
        }.bind(this))
    },
    _getTranslateButton: function() {
        return $(".nonCanonicalDesc")[0] ? this.$(".translateButton") : $(".canonicalDesc")[0] ? this.getChildById("translateButton") : null
    },
    showPinComments: function(a) {
        if (this._commentList)
            this._commentList.show(), this._commentList.populateComment(a);
        else {
            var b = this.data, c = b.id, d = b.comment_count, e = P.resourceFactory.create("PinCommentListResource", {
                field_set_key: "pin_detailed",
                pin_id: c,
                page_size: 50
            }), f = new P.modules.PinCommentList({
                id: "comment_list",
                options: {
                    pin_id: c,
                    count: d,
                    image_size: "medium",
                    show_actions: !0,
                    max_num_to_show: 50,
                    view_type: "detailed",
                    pre_populate: a
                },
                resource: e
            });
            f.render(), this._commentList = f;
            var g = this.$(".pinComments");
            this.insertChild(f, g)
        }
    },
    getSourceUrl: function() {
        return this.data.link || ""
    },
    getFirstVisualObject: function() {
        var a = this.getChildByModuleName("PaddedPin");
        return a ? a.getFirstVisualObject() : null
    }
}), P.modules.Pin.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/Pin/Pin.nunjucks"), goog.provide("P.modules.PinCreate"), goog.require("P.Module"), goog.require("P.modules.BoardPickerOld"), goog.require("P.modules.RepinSuccessToast");
var PIN_CREATE_API_RESPONSE_CODE_SPAM_CONTENT = 14;
P.modules.PinCreate = P.Module.extend({
    setImage: function(a) {
        this.options.image_url = a;
        var b = this.getChildById("pinForm");
        b.setImage(a)
    },
    onButtonClick: function(a) {
        var b = a.target;
        switch (b.id) {
        case"submitButton":
            P.trackGAEvent(this.GACategory, P.CONST.GA_ACTION_CLICK_SUBMIT);
            break;
        case"cancelButton":
            P.trackGAEvent(this.GACategory, P.CONST.GA_ACTION_CLICK_CANCEL), this.modal || this.destroy()
        }
    },
    onContentReady: function() {
        if (P.Module.prototype.onContentReady.apply(this, arguments), this.GACategory = this.isRepin() ? "repin_create" : "pin_create", this.pinForm = this.getChildById("pinForm"), this.listen(this.pinForm, P.CONST.EVENT_SUBMIT_VALIDATED, this.onSubmitValidated), this.childListen(P.CONST.EVENT_BUTTON_CLICK, this.onButtonClick), this.childListen("boardCreated", this.onBoardCreate), this.childListen(P.CONST.EVENT_CHANGE, this.onChildChange), this.isRepin() && P.experiments.instance.inExperimentGroupsActiveOrTriggerable("web_toasts", ["employees", "enabled"])) {
            var a = P.resourceFactory.create("RelatedBoardForPinRandomFeedResource", {
                pin: this.data.id,
                page_size: 1
            });
            a.callGet({
                showError: !1
            }).then(function(a) {
                a.resource_response.error || (this._suggestedBoard = a.resource_response.data[0])
            }.bind(this))
        }
        this.updateSubmitButtons()
    },
    onChildChange: function(a) {
        switch (a.target.id) {
        case"boardPicker":
            this.updateSubmitButtons()
        }
    },
    updateSubmitButtons: function() {
        var a = this.pinForm.getBoardPicker();
        a.getSelectedBoardId() ? this.pinForm.form.enableSubmitButtons() : this.pinForm.form.disableSubmitButtons()
    },
    onSubmitValidated: function(a) {
        var b = a.data;
        b.errors[0] || this.createPin()
    },
    isRepin: function() {
        return !(!this.data ||!this.data.id)
    },
    getPinResource: function() {
        var a = "PinResource", b = _.extend(this.pinForm.getData(), _.pick(this.options, "method", "is_video"));
        return this.isRepin() && (a = "RepinResource", b.pin_id = this.data.id), P.resourceFactory.create(a, b)
    },
    createPin: function() {
        this.showLoading(!0);
        var a = this.getPinResource();
        a.callCreate({
            showError: !1
        }).then(function(a) {
            this.onPinCreateSuccess(a)
        }.bind(this), function(a) {
            if (P.trackGAEvent(this.GACategory, P.CONST.GA_ACTION_ERROR), "create" === this.options.action && a.api_error_code === PIN_CREATE_API_RESPONSE_CODE_SPAM_CONTENT) {
                var b = {
                    name: "ConfirmDialog",
                    options: {
                        fluid: !0,
                        template: "blocked_source"
                    }
                };
                P.loadModule(b).then(function(a) {
                    a.render().then(function() {
                        this.parent.appendChild(a), this.destroy()
                    }.bind(this))
                }.bind(this))
            } else 
                P.showError(a.message)
        }.bind(this)).fin(function() {
            this.hideLoading()
        }.bind(this))
    },
    onBoardCreate: function(a) {
        var b = a.target;
        if (b instanceof P.modules.BoardPickerOld) {
            var c = b.getBoardCount(), d = a.data;
            this.log.debug("Created a board", d, c), c >= 1 && (this._createdBoardToEdit = d)
        }
    },
    onPinCreateSuccess: function(a) {
        P.trackGAEvent(this.GACategory, P.CONST.GA_ACTION_SUCCESS);
        var b, c, d = a.resource_response.data;
        if (P.experiments.instance.inExperimentGroups("web_toasts", ["employees", "enabled"]) && this.modal && this.isRepin()) {
            var e = {
                pin: d
            };
            this._suggestedBoard && (e.suggested_board = this._suggestedBoard);
            var f = new P.modules.RepinSuccessToast({
                data: e
            });
            return P.getToastsManager().addToast(f), P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_CURRENT_USER, P.CONST.PUBSUB_TOPIC_PIN_CREATED, d), P.pubsub.publish(d.board.id, P.CONST.PUBSUB_TOPIC_PIN_CREATED, d), P.pubsub.publish(P.currentUser.id, P.CONST.PUBSUB_TOPIC_PIN_CREATED), this.isRepin() && P.pubsub.publish(this.data.id, P.CONST.PUBSUB_TOPIC_PIN_REPINNED, d), b = this.pinForm.getBoardPicker(), c = P.resourceFactory.clone(b.resource), P.resourceCache.instance.callGet(c), void this.destroy()
        }
        var g = d.board, h = g.url, i = g.category, j = g.id, k = this.options.action, l = g.name, m = g.privacy, n = g.is_collaborative, o = {
            id: "pinSuccess",
            name: "PinCreateSuccess",
            options: {
                action: k,
                board: l,
                board_category: i,
                board_id: j,
                board_url: h,
                domain: d.domain,
                pin_id: d.id,
                is_collaborative: n,
                is_extension_installed: P.browserExtension.instance.isExtensionInstalled(),
                privacy: m,
                method: this.options.method
            },
            resource: P.Resource.NOOP_RESOURCE
        };
        "pin_create_ignition" === this.options.action ? o.options.auto_close=!1 : this._createdBoardToEdit && this._createdBoardToEdit.id === g.id && (o = {
            id: "pinSuccess",
            name: "PinCreateSuccessBoardEdit",
            resource: {
                name: "BoardResource",
                options: {
                    board_id: g.id,
                    field_set_key: "basic"
                }
            },
            options: {
                pinCreateInfo: o
            }
        }), this.showLoading(), P.loadModule(o).then(function(a) {
            this.modal ? this.modal.setModule(a) : "pin_create_ignition" === this.options.action ? this.showInModal(a, {}) : a.render().then(function() {
                this.parent.appendChild(a), this.destroy()
            }.bind(this))
        }.bind(this)), this.triggerEvent(P.CONST.EVENT_PIN_CREATE, d), P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_CURRENT_USER, P.CONST.PUBSUB_TOPIC_PIN_CREATED, d), P.pubsub.publish(d.board.id, P.CONST.PUBSUB_TOPIC_PIN_CREATED, d), P.pubsub.publish(P.currentUser.id, P.CONST.PUBSUB_TOPIC_PIN_CREATED), this.isRepin() && P.pubsub.publish(this.data.id, P.CONST.PUBSUB_TOPIC_PIN_REPINNED, d), b = this.pinForm.getBoardPicker(), c = P.resourceFactory.clone(b.resource), P.resourceCache.instance.callGet(c)
    }
}), P.modules.PinCreate.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/PinCreate/PinCreate.nunjucks"), goog.provide("P.modules.PinCreateSuccessBoardBoxed"), goog.require("P.modules.PinCreateSuccessPromoBase"), P.modules.PinCreateSuccessBoardBoxed = P.modules.PinCreateSuccessPromoBase.extend({
    isValid: function() {
        return this._hasBoard()?!0 : (this.hide(), !1)
    },
    _hasBoard: function() {
        return !!this.getChildById("board")
    }
}), P.modules.PinCreateSuccessBoardBoxed.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/PinCreateSuccessBoardBoxed/PinCreateSuccessBoardBoxed.nunjucks"), goog.provide("P.modules.PinCreateSuccessCategoryBoxed"), goog.require("P.modules.PinCreateSuccessPromoBase"), P.modules.PinCreateSuccessCategoryBoxed = P.modules.PinCreateSuccessPromoBase.extend({
    isValid: function() {
        var a = this._getPinCount();
        return !this._hasBoardCategory() ||!a || a < 3 ? (this.hide(), !1) : !0
    },
    _hasBoardCategory: function() {
        return null !== this.options.board_category && "other" !== this.options.board_category
    },
    _getPinCount: function() {
        return this.extraData && this.extraData.pinCount ? this.extraData.pinCount : null
    }
}), P.modules.PinCreateSuccessCategoryBoxed.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/PinCreateSuccessCategoryBoxed/PinCreateSuccessCategoryBoxed.nunjucks"), goog.provide("P.modules.PinCreateSuccessDomain"), goog.require("P.modules.PinCreateSuccessPromoBase"), P.modules.PinCreateSuccessDomain = P.modules.PinCreateSuccessPromoBase.extend({
    isValid: function() {
        var a = this._getPinCount();
        return !this._getDomain() ||!a || a < 5 ? (this.hide(), !1) : !0
    },
    _getDomain: function() {
        return this.options && this.options.pin_domain ? this.options.pin_domain : null
    },
    _getPinCount: function() {
        return this.extraData && this.extraData.pinCount ? this.extraData.pinCount : null
    }
}), P.modules.PinCreateSuccessDomain.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/PinCreateSuccessDomain/PinCreateSuccessDomain.nunjucks"), goog.provide("P.modules.PinCreateSuccessExtensionUpsell"), goog.require("P.modules.PinCreateSuccessPromoBase"), P.modules.PinCreateSuccessExtensionUpsell = P.modules.PinCreateSuccessPromoBase.extend({}), P.modules.PinCreateSuccessExtensionUpsell.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/PinCreateSuccessExtensionUpsell/PinCreateSuccessExtensionUpsell.nunjucks"), goog.provide("P.modules.PinCreateSuccessOddContents"), goog.require("P.modules.PinCreateSuccessPromoBase"), P.modules.PinCreateSuccessOddContents = P.modules.PinCreateSuccessPromoBase.extend({}), P.modules.PinCreateSuccessOddContents.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/PinCreateSuccessOddContents/PinCreateSuccessOddContents.nunjucks"), goog.provide("P.modules.PinForm"), goog.require("P.Module"), goog.require("P.modules.UserSocialNetworkSettings"), goog.require("P.modules.PlaceSelector");
var FB_KEY = P.SocialConnect.FACEBOOK, TW_KEY = P.SocialConnect.TWITTER, SHARE_SOCIAL_WRAPPER_SELECT = ".socialShareWrapper";
P.modules.PinForm = P.modules.UserSocialNetworkSettings.extend({
    events: {
        'change [name="share_facebook"]': "onFacebookCheckboxChanged",
        "focus .PlaceSelector input": "onPlaceSelectorFocus",
        click: "_onClick"
    },
    setImage: function(a) {
        this.options.image_url = a;
        var b = this.getChildById("pinPreview");
        b.setImage(a)
    },
    _onClick: function(a) {
        var b = $(a.target).closest(".PlaceSelector").length;
        if (!b) {
            var c = this.getPlaceSelector();
            if (c) {
                var d = c.getTypeaheadField(), e = d.getTypeahead();
                e.isOpen() && e.hide()
            }
        }
    },
    getPlaceSelector: function() {
        return this.getChildById("placeSelector")
    },
    onPlaceSelectorFocus: function() {
        var a = this.getPlaceSelector();
        if (a) {
            var b = a.getTypeaheadField(), c = b.getTypeaheadItemsToRender(), d = c && c.length > 0;
            if (d) {
                var e = b.getTypeahead();
                e.show()
            }
        }
    },
    onCreated: function() {
        P.modules.UserSocialNetworkSettings.prototype.onCreated.apply(this, arguments), this.networkToSelectorMap = {}, this.networkToSelectorMap[FB_KEY] = '[name="share_facebook"]', this.networkToSelectorMap[TW_KEY] = '[name="share_twitter"]'
    },
    onItemSelected: function() {
        this.getChildById("removePlaceButton").show()
    },
    onFacebookCheckboxChanged: function() {
        var a = this.getNetworkChecked(P.SocialConnect.FACEBOOK);
        a && P.FbUtil.maybeRequestFbTimelinePermission({
            error: function() {
                this.setNetworkChecked(P.SocialConnect.FACEBOOK, !a)
            }.bind(this)
        })
    },
    onContentReady: function() {
        var a = {
            message: P._("Don't forget a description!")
        }, b = {
            description: [P.Validator.Required(a), P.Validator.Length({
                max: P.CONST.MAX_CHARS_FOR_BOARD_PIN_DESCRIPTION
            })]
        };
        this.form = new P.Form(this.$("form"), b), this.listen(this.form, P.CONST.EVENT_SUBMIT_VALIDATED, this.onSubmitValidated), this.childListen(P.CONST.EVENT_CHANGE, this._onChildChange), this.childListen(P.CONST.EVENT_ITEM_SELECTED, this.onItemSelected), this.childListen(P.CONST.EVENT_BUTTON_CLICK, this.onButtonClick);
        var c = this.getBoardPicker();
        c.getSelectedBoardPrivacy() === P.CONST.BoardPrivacy.SECRET && this.hideSocialExplicitSharing();
        var d = this.getChildById("uploader");
        d && this.listen(d, P.CONST.EVENT_UPLOAD_SUCCESS, this.onUploadSuccess)
    },
    onButtonClick: function(a) {
        var b = a.target;
        "removePlaceButton" === b.id && this.removePlace()
    },
    removePlace: function() {
        this.$(".pinPlaceId").val(0);
        var a = this.getPlaceSelector(), b = a.getTypeaheadField();
        b.reset(), b.enableInput(), this.getChildById("removePlaceButton").hide()
    },
    _onChildChange: function(a) {
        if ("boardPicker" === a.target.id) {
            var b = a.data;
            b.privacy === P.CONST.BoardPrivacy.SECRET ? this.hideSocialExplicitSharing() : this.showSocialExplicitSharing()
        }
    },
    hideSocialExplicitSharing: function() {
        this.$(SHARE_SOCIAL_WRAPPER_SELECT).hide()
    },
    showSocialExplicitSharing: function() {
        this.$(SHARE_SOCIAL_WRAPPER_SELECT).show()
    },
    onSubmitValidated: function(a) {
        this.triggerEvent(P.CONST.EVENT_SUBMIT_VALIDATED, a, !0)
    },
    onUploadSuccess: function(a) {
        var b = a.data.image_url, c = this.getChildById("pinPreview");
        c.setImage(b), this.options.image_url = b
    },
    getBoardPicker: function() {
        return this.getChildById("boardPicker")
    },
    getBoardId: function() {
        return this.getBoardPicker().getSelectedBoardId()
    },
    getDescription: function() {
        return this.getChildById("pinDescriptionField").getValue()
    },
    setNetworkChecked: function(a, b) {
        var c = this.networkToSelectorMap[a];
        c && this.$(c).prop("checked", b)
    },
    getNetworkChecked: function(a) {
        var b = this.networkToSelectorMap[a];
        if (b) {
            var c = this.$(b);
            return c.length ? c.is(":checked") : ""
        }
    },
    getImageUrl: function() {
        return this.options.image_url
    },
    getLink: function() {
        return this.$("#pinFormLink").val() || ""
    },
    getData: function() {
        var a = {
            board_id: this.getBoardId(),
            description: this.getDescription(),
            link: this.getLink()
        }, b = this.getNetworkChecked(P.SocialConnect.TWITTER);
        "" !== b && (a.share_twitter = b), b = this.getNetworkChecked(P.SocialConnect.FACEBOOK), "" !== b && (a.share_facebook = b);
        var c = this.getImageUrl();
        if (c && (a.image_url = c, P.beginsWith(c, "//"))) {
            var d = document.referrer;
            if (d) {
                var e;
                P.beginsWith(d, "http://") ? e = "http:" : P.beginsWith(d, "https://") && (e = "https:"), e && (a.image_url = e + a.image_url)
            }
        }
        var f = this.$(".pinPlaceId");
        return f.length && (a.place = "0" === f.val() ? 0 : f.val()), this.data && this.data.source_interest && (a.source_interest_id = this.data.source_interest.id), a
    }
}), P.modules.PinForm.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/PinForm/PinForm.nunjucks"), goog.provide("P.modules.PresenterButton"), goog.require("P.modules.DropdownButton"), P.modules.PresenterButton = P.modules.DropdownButton.extend({}), P.modules.PresenterButton.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/PresenterButton/PresenterButton.nunjucks"), goog.provide("P.modules.SendObjectBase"), goog.require("P.Module"), goog.require("P.modules.CreateConversationGroup"), goog.require("P.modules.ConversationsList"), goog.require("P.conversationsUtil"), P.modules.SendObjectBase = P.Module.extend({
    _OBJECT_ID_NAME: "",
    _SEND_RESOURCE_NAME: "ConversationsResource",
    mixins: [P.Mixins.PreventScroll],
    onContentReady: function() {
        this.childListen(P.CONST.EVENT_CONVERSATION_LIST_ITEM_CLICKED, this.onListItemClick), this.childListen(P.CONST.EVENT_ITEM_SELECTED, this.onItemSelected), this.childListen(P.CONST.EVENT_TYPEAHEAD_SEARCH_START, this.onSearchStart), this.childListen(P.CONST.EVENT_TYPEAHEAD_RESULTS_RETURNED, this.onResultsReturned), this.childListen(P.CONST.EVENT_TYPEAHEAD_NO_RESULTS_RETURNED, this.onNoResultsReturned), this.childListen(P.CONST.EVENT_CONTENT_CHANGED, this.onContentChanged), this.listen(this.parent, P.CONST.EVENT_DROPDOWN_SHOW, this.onShow), this.startPreventingScroll(), this._setup()
    },
    onSearchStart: function() {
        this.$(".spinner").addClass("visible"), this.hideConversationsList()
    },
    onShow: function() {
        this._focusTypeahead()
    },
    _getTypeaheadField: function() {
        return this.getChildById("typeaheadField")
    },
    _focusTypeahead: function() {
        var a = this._getTypeaheadField();
        window.setTimeout(function() {
            a.focus()
        }, 100)
    },
    onContentChanged: function() {
        this.startPreventingScroll()
    },
    onNoResultsReturned: function() {
        this.$(".spinner").removeClass("visible");
        var a = this._getTypeaheadField();
        $.trim(a.getValue()).length || this.showConversationsList()
    },
    onResultsReturned: function() {
        this.$(".spinner").removeClass("visible")
    },
    hideConversationsList: function() {
        var a = this._getConversationsList();
        a.fadeOut()
    },
    showConversationsList: function() {
        var a = this._getConversationsList();
        a.fadeIn()
    },
    _getConversationsList: function() {
        return this.getChildById("conversationsList")
    },
    _setup: function() {
        this._setMaxHeight()
    },
    _setMaxHeight: function() {
        this.$el.css("maxHeight", this.$el.height())
    },
    startPreventingScroll: function() {
        this.startPreventScroll(this.$(".ConversationsList").last(), this.$(".List").last())
    },
    onItemSelected: function(a) {
        var b = a.data.item, c = b.attributes, d = c.username ? [c.id]: [], e = c.email ? [c.email]: [];
        this._sendToUsers(d, e), this.triggerEvent(P.CONST.EVENT_DISMISS, null, !0)
    },
    reset: function() {
        this.render()
    },
    onListItemClick: function(a) {
        var b = a.target;
        this._sendToUsers(b.getUserIds(), b.getEmails()), this.triggerEvent(P.CONST.EVENT_DISMISS, null, !0)
    },
    _getMessageEl: function() {
        return this.$(".message")
    },
    getMessageValue: function() {
        return $.trim(this._getMessageEl().val())
    },
    clearMessageValue: function() {
        this._getMessageEl().val("")
    },
    _sendToUsers: function(a, b) {
        if (b || (b = []), a.length + b.length !== 0) {
            var c = {
                text: this.getMessageValue(),
                object_type: this._OBJECT_ID_NAME,
                object_id: this.options.object_id
            };
            P.getConversationsManager().sendMessageToUsers(a, b, c).then(function(a) {
                this.clearMessageValue(), this.resetTypeaheadField();
                var b = a.resource_response.data;
                P.getConversationsManager().logContextEvent(P.ContextLogging.EventType.CONVERSATION_MESSAGE_SEND, b.id, this.options.object_id, this.$el)
            }.bind(this))
        }
    },
    resetTypeaheadField: function() {
        var a = this._getTypeaheadField();
        a.reset(), a.clear()
    }
}), P.modules.SendObjectBase.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/SendObjectBase/SendObjectBase.nunjucks"), goog.provide("P.modules.SendPin"), goog.require("P.Module"), goog.require("P.modules.SendObjectBase"), P.modules.SendPin = P.modules.SendObjectBase.extend({
    _OBJECT_ID_NAME: "pin"
}), P.modules.SendPin.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/SendPin/SendPin.nunjucks"), goog.provide("P.modules.SendPinner"), goog.require("P.Module"), goog.require("P.modules.SendObjectBase"), P.modules.SendPinner = P.modules.SendObjectBase.extend({
    _OBJECT_ID_NAME: "user"
}), P.modules.SendPinner.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/SendPinner/SendPinner.nunjucks"), goog.provide("P.modules.UserEducationGuideStacked"), goog.require("P.Module"), goog.require("P.modules.UserEducationGuideStep");
var MAX_ROTATION_ANGLE = 30, MIN_ROTATION_ANGLE = 10;
P.modules.UserEducationGuideStacked = P.modules.UserEducationGuideStep.extend({
    onContentReady: function() {
        this.childListen(P.CONST.EVENT_BUTTON_CLICK, function(a) {
            var b = a.target;
            b && ("nextButton" === b.id ? (a.stopPropagation(), this.updateCardsForNextStep().then(function() {
                this.triggerEvent(P.CONST.EVENT_NEXT, null, !0)
            }.bind(this))) : "dismissButton" === b.id && (a.stopPropagation(), this.$el.removeClass("active"), window.setTimeout(function() {
                this.triggerEvent(P.CONST.EVENT_DISMISS, null, !0)
            }.bind(this), 500)))
        }), window.setTimeout(function() {
            this.$el.addClass("active")
        }.bind(this), 200)
    },
    updateCardsForNextStep: function() {
        return new Promise(function(a) {
            var b = this.$(".guideStepContent:first-child");
            b.appendTo(this.$(".cardPositionAnimation.cardPosition")).transition({
                y: 350,
                rotate: this._getRotateAngle(),
                visibility: "hidden"
            }, 800, "ease", function() {
                b.remove(), a(void 0)
            })
        }.bind(this))
    },
    _getRotateAngle: function() {
        var a = Math.random() * MAX_ROTATION_ANGLE;
        return a < MIN_ROTATION_ANGLE && (a = MIN_ROTATION_ANGLE), Math.random() < .5 && (a*=-1), a + "deg"
    }
}), P.modules.UserEducationGuideStacked.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/UserEducationGuideStacked/UserEducationGuideStacked.nunjucks"), goog.provide("P.modules.UserMenu"), goog.require("P.Module"), goog.require("P.modules.DropdownButton"), P.modules.UserMenu = P.modules.DropdownButton.extend({
    onContentReady: function() {
        var a = this.extraData.userId;
        if (a) {
            var b = {};
            b[P.CONST.PUBSUB_TOPIC_USER_UPDATED] = this.onUserUpdated, this.pubsubSubscribe(this.extraData.userId, b)
        }
        P.modules.DropdownButton.prototype.onContentReady.apply(this, arguments)
    },
    onUserUpdated: function() {
        this.render()
    },
    setSticky: function(a) {
        this.getDropdown().setSticky(a)
    }
}), P.modules.UserMenu.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/UserMenu/UserMenu.nunjucks"), goog.provide("P.modules.UserNews"), goog.require("P.Module"), goog.require("P.modules.FriendsToFollow"), P.modules.UserNews = P.Module.extend({
    events: {
        "click .sendInvite": "showBulkInviteBox"
    },
    onContentReady: function() {
        this.destroyIfEmpty()
    },
    onChildRemoved: function() {
        this.destroyIfEmpty() || this.triggerEvent(P.CONST.EVENT_CONTENT_CHANGED, null, !0)
    },
    getEditFeedButton: function() {
        var a = this.getChildByModuleName("BoardsToFollow");
        return a.getEditFeedButtonElement()
    },
    getFriendsToFollowButton: function() {
        var a = this.getChildByModuleName("FriendsToFollow");
        return a.getHeaderElement()
    },
    showBulkInviteBox: function() {
        var a = {
            name: "MultiInviter"
        };
        P.loadModule(a).then(function(a) {
            P.getModalManager().showInModal(a)
        })
    }
}), P.modules.UserNews.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.UserSelectBase"), goog.require("P.Module"), goog.require("P.modules.ui.TypeaheadField"), goog.require("P.modules.UserSocialNetworkSettings");
var USER_SELECT_BASE_CLASS_ACTIVE = "active", USER_SELECT_BASE_CLASS_ANIMATE = "animate", USER_SELECT_BASE_CLASS_HIDDEN = "hidden", SEND_DELAY = 2600, CONNECT_SUCCESS_DELAY = 2600, ACTIVATE_DELAY = 400;
P.modules.UserSelectBase = P.modules.UserSocialNetworkSettings.extend({
    events: {
        "click .undoUserSelect": "hideFakeSuccess",
        "click .userSelectEmailConnect": "onEmailUserPress",
        "keyup .field": "onFieldKeyup"
    },
    sendDelay: SEND_DELAY,
    onCreated: function() {
        P.modules.UserSocialNetworkSettings.prototype.onCreated.apply(this, arguments), this._selectedItem = null
    },
    getSelectedItem: function() {
        return this._selectedItem
    },
    clearSelectedItem: function() {
        this._selectedItem = null
    },
    onAddedToDom: function() {
        this._messageShowing=!1, this._hasQueriedTypeahead=!1, this._gplusButtonLoaded=!1
    },
    onContentReady: function() {
        var a = {};
        a[P.CONST.PUBSUB_TOPIC_SEARCH_QUERY_UPDATED] = this.onSearchQueryUpdated, this.pubsubSubscribe(P.CONST.PUBSUB_CHANNEL_SITE, a), this.$staticResults = this.$(".staticResults"), this.$message = this.$('input[name="message"]'), this.$beforeSend = this.$(".userSelectBeforeSend"), this.$afterSend = this.$(".userSelectAfterSend"), this.$afterConnect = this.$(".userSelectAfterConnect"), this.$userSelectMessageWrapper = this.$(".userSelectMessageWrapper"), this.$emailButtonWrapper = this.$(".emailButtonWrapper"), this.$gmailButtonWrapper = this.$(".gmailButtonWrapper"), this.$facebookButtonWrapper = this.$(".facebookButtonWrapper"), this.$yahooButtonWrapper = this.$(".yahooButtonWrapper"), this.$findFriend = this.$('input[name="userSelectFriendSearch"]'), this.$gplusButtonWrapper = this.$(".gplusButtonWrapper"), this.sendEmailButton = this.getChildById("sendEmail"), this.gplusButton = this.$(".userSelectGplusConnect")[0], this.typeaheadField = this.getChildById("userSelectField"), this.childListen("enterPressed", this.onChildEnterPressed), this.listen(this.parent, P.CONST.EVENT_DROPDOWN_SHOW, this.onEventDropdownShow), "modal" === this.options.class_name ? this.listen(this, P.CONST.EVENT_DISMISS, this.onHide) : this.listen(this.parent, P.CONST.EVENT_DROPDOWN_HIDE, this.onHide), this.buttonListener && this.removeListener(this.buttonListener), this.buttonListener = this.childListen(P.CONST.EVENT_BUTTON_CLICK, this.onButtonClick), this.childListen(P.CONST.EVENT_ITEM_SELECTED, this.onChildItemSelected), this.childListen(P.CONST.EVENT_USER_CLICK, this.onUserClick), this.childListen(P.CONST.EVENT_TYPEAHEAD_RESULTS_RETURNED, this.onTypeaheadResultsReturned), this.childListen(P.CONST.EVENT_TYPEAHEAD_NO_RESULTS_RETURNED, this.onNoTypeaheadResultsReturned), this.childListen(P.CONST.EVENT_TYPEAHEAD_RENDER_DONE, this.onTypeaheadRenderDone), this.$message.placeholder(), this.$findFriend.placeholder(), this.loadGplusButton()
    },
    onChildEnterPressed: function() {
        this.onEmailUserPress()
    },
    onTypeaheadRenderDone: function() {},
    enableGplusShareButton: function(a, b, c) {
        var d = this.$("." + a)[0];
        P.gapi.get(function(e) {
            var f = {
                contenturl: b,
                clientid: this.extraData.gplusClientId,
                cookiepolicy: "single_host_origin",
                prefilltext: P._("Join me on Pinterest!"),
                calltoactionurl: b,
                recipients: a,
                calltoactionlabel: c
            };
            e.interactivepost.render(d, f)
        }.bind(this))
    },
    onEventDropdownShow: function() {
        this.focusFriendTypeahead()
    },
    onNoTypeaheadResultsReturned: function() {
        this.showStaticResults(), this.showStaticSocialOptions(), this.showSendEmailButton(), this.focusFriendTypeahead()
    },
    onTypeaheadResultsReturned: function(a) {
        var b = a.data.count;
        this._hasQueriedTypeahead=!0, b ? (this.showStaticResults(), this.showSendEmailButton(), this.hideStaticSocialOptions()) : this.showStaticSocialOptions()
    },
    loadGplusButton: function() {
        var a = function(a) {
            this.onGplusAuth(a)
        }.bind(this);
        P.gapi.get(function(b) {
            this._gplusButtonLoaded || (this._gplusButtonLoaded=!0, b.signin.render(this.gplusButton, {
                clientid: this.extraData.gplusClientId,
                accesstype: "offline",
                cookiepolicy: "single_host_origin",
                scope: "https://www.googleapis.com/auth/userinfo.email",
                apppackagename: "com.pinterest",
                callback: a
            }))
        }.bind(this))
    },
    onGplusAuth: function(a) {
        if (a.code && "none" !== a.prompt&&!P.currentUser.isLimitedLogin()) {
            var b = {}, c = {};
            c.one_time_code = a.code, b.data = c, b.network = "gplus";
            var d = P.resourceFactory.create("UserSocialNetworkResource", b);
            d.callCreate().then(function() {
                this.showConnectSuccess("gplus"), P.trackGAEvent("user_connect_gplus", P.CONST.GA_ACTION_SUCCESS)
            }.bind(this))
        }
    },
    showGplusConnectButton: function() {
        this.loadGplusButton(), this.$gplusButtonWrapper.removeClass(USER_SELECT_BASE_CLASS_HIDDEN)
    },
    hideGplusConnectButton: function() {
        this.$gplusButtonWrapper.addClass(USER_SELECT_BASE_CLASS_HIDDEN)
    },
    hideGmailConnectButton: function() {
        this.$gmailButtonWrapper.addClass(USER_SELECT_BASE_CLASS_HIDDEN)
    },
    showGmailConnectButton: function() {
        this.$gmailButtonWrapper.removeClass(USER_SELECT_BASE_CLASS_HIDDEN)
    },
    hideFacebookConnectButton: function() {
        this.$facebookButtonWrapper.addClass(USER_SELECT_BASE_CLASS_HIDDEN)
    },
    showFacebookConnectButton: function() {
        this.$facebookButtonWrapper.removeClass(USER_SELECT_BASE_CLASS_HIDDEN)
    },
    hideYahooConnectButton: function() {
        this.$yahooButtonWrapper.addClass(USER_SELECT_BASE_CLASS_HIDDEN)
    },
    showYahooConnectButton: function() {
        this.$yahooButtonWrapper.removeClass(USER_SELECT_BASE_CLASS_HIDDEN)
    },
    hideSendEmailButton: function() {
        this.$emailButtonWrapper.addClass(USER_SELECT_BASE_CLASS_HIDDEN)
    },
    showSendEmailButton: function() {
        this.$emailButtonWrapper.removeClass(USER_SELECT_BASE_CLASS_HIDDEN)
    },
    hideStaticSocialOptions: function() {
        this.hideFacebookConnectButton(), this.hideGplusConnectButton(), this.hideGmailConnectButton(), this.hideYahooConnectButton()
    },
    showStaticSocialOptions: function() {
        this.showSendEmailButton(), this.showFacebookConnectButton(), this.showGplusConnectButton(), this.showGmailConnectButton(), this.showYahooConnectButton()
    },
    hideStaticResults: function() {
        this.$staticResults.addClass(USER_SELECT_BASE_CLASS_HIDDEN)
    },
    showStaticResults: function() {
        this.$staticResults.removeClass(USER_SELECT_BASE_CLASS_HIDDEN)
    },
    focusAddMessageField: function() {
        this.$message.focusWithoutScrolling()
    },
    focusFriendTypeahead: function() {
        this.$findFriend.focusWithoutScrolling()
    },
    setEmailButtonText: function(a, b) {
        var c = P._("Email to {{ email_address }}"), d = P.string.format(c, {
            email_address: a
        });
        this.sendEmailButton.setText(d);
        var e=!b;
        this.$(".sendEmailError").text(b).toggleClass("hidden", e)
    },
    onHide: function() {
        this._timeout && this._selectedItem && (this.onSendAction(), this.reset(), clearTimeout(this._timeout))
    },
    onFieldKeyup: function(a) {
        var b = P.keyCode;
        if (a.keyCode !== b.ENTER && a.keyCode !== b.NUMPAD_ENTER)
            if (this.$findFriend.val().length > 0) {
                this.sendEmailButton.show();
                var c = this.$findFriend.val();
                this.setEmailButtonText(c, "")
            } else 
                this.sendEmailButton.hide()
    },
    onEmailUserPress: function() {
        var a = new P.Validator(this.$findFriend, [P.Validator.Length({
            min: 1
        }), P.Validator.Email()]);
        a.validate(function(a) {
            if (a.errors.length > 0) {
                var b = this.$findFriend.val(), c = a.errors[0];
                this.setEmailButtonText(b, c)
            } else 
                this._selectedItem = {
                    full_name: this.$findFriend.val(),
                    email: this.$findFriend.val(),
                    type: "emailtypeahead"
                }, this.showSuccess()
        }.bind(this))
    },
    removeMessageContent: function() {
        this.$message.val("")
    },
    onUserClick: function(a) {
        var b = a.target.data, c = a.target;
        b && (this._selectedItem = b, b.image_medium_url || (this._selectedItem.image_medium_url = c.getProfileImage()), this.showSuccess())
    },
    onButtonClick: function(a) {
        var b = a.target;
        if (b) {
            var c, d = b.id;
            switch (d) {
            case"connectFacebook":
                c = P.SocialConnect.FACEBOOK;
                break;
            case"connectGmail":
                c = P.SocialConnect.GOOGLE;
                break;
            case"connectGplus":
                c = P.SocialConnect.GPLUS;
                break;
            case"connectYahoo":
                c = P.SocialConnect.YAHOO;
                break;
            default:
                return 
            }
            this.connectToNetwork(c)
        }
    },
    isEmailType: function(a) {
        return "emailcontact" === a || "emailtypeahead" === a || "email" === a
    },
    connectToNetwork: function(a) {
        a !== P.SocialConnect.GPLUS && this.handleConnect(a, !0, {
            success: function() {
                this.showConnectSuccess(a), P.trackGAEvent("user_connect_" + a, P.CONST.GA_ACTION_SUCCESS)
            }.bind(this)
        })
    },
    hideNetworkConnectButton: function(a) {
        switch (a) {
        case P.SocialConnect.FACEBOOK:
            this.hideFacebookConnectButton();
            break;
        case P.SocialConnect.GPLUS:
            this.hideGplusConnectButton();
            break;
        case P.SocialConnect.YAHOO:
            this.hideYahooConnectButton()
        }
    },
    showAndHideItem: function(a, b) {
        b.addClass(USER_SELECT_BASE_CLASS_ANIMATE), P.supportCSSTransitions() ? window.setTimeout(function() {
            a.addClass(USER_SELECT_BASE_CLASS_ACTIVE)
        }, ACTIVATE_DELAY) : a.addClass(USER_SELECT_BASE_CLASS_ACTIVE)
    },
    showConnectSuccess: function(a) {
        this.showAndHideItem(this.$afterConnect, this.$beforeSend);
        var b, c = {
            facebook: "Facebook",
            google: "Gmail",
            gplus: "Google+",
            yahoo: "Yahoo"
        };
        a in c ? b = c[a] : (P.Logger.getLogger("UserSelectBase").error("Unknown network " + a), b = a), this.$(".userConnectedNetworkName").text(b), this.$(".userSelectConnectSuccessMug").addClass(a + "ConnectSuccessMug"), this._timeout = P.setTimeout(function() {
            this.resetUserSelect()
        }.bind(this), CONNECT_SUCCESS_DELAY)
    },
    resetUserSelect: function() {
        this.showAndHideItem(this.$beforeSend, this.$afterConnect), this.reset(), this.render(), this.focusFriendTypeahead(), clearTimeout(this._timeout)
    },
    showSuccess: function() {
        var a = this._selectedItem, b = a.full_name || a.first_name, c = a.image_medium_url;
        this.showAndHideItem(this.$afterSend, this.$beforeSend), this.$(".receiverName").text(b), this.$(".userSelectSuccessMug").attr("src", c), this._timeout = P.setTimeout(function() {
            "modal" === this.options.class_name ? this.triggerEvent(P.CONST.EVENT_DISMISS, null, !0) : this.triggerEvent(P.CONST.EVENT_DROPDOWN_HIDE, null, !0)
        }.bind(this), SEND_DELAY)
    },
    reset: function() {
        this.hideFakeSuccess(), this.setMessageValue(""), this.typeaheadField.clear(), this.typeaheadField.closeTypeahead(), this.hideSendEmailButton()
    },
    hideFakeSuccess: function() {
        this.$beforeSend.removeClass(USER_SELECT_BASE_CLASS_HIDDEN + " " + USER_SELECT_BASE_CLASS_ANIMATE), this.$afterSend.removeClass(USER_SELECT_BASE_CLASS_ACTIVE + " " + USER_SELECT_BASE_CLASS_ANIMATE), clearTimeout(this._timeout), this._timeout = null
    },
    getMessageValue: function() {
        return $.trim(this.$(".message").val())
    },
    setMessageValue: function(a) {
        return $.trim(this.$(".message").val(a))
    },
    showTypeaheadResults: function() {
        var a = this.getChildByModuleName("ui.Typeahead");
        a.show()
    },
    isValidItemType: function(a) {
        return "user" === a || "email" === a || "emailcontact" === a
    },
    onChildItemSelected: function(a) {
        a.stopPropagation();
        var b = a.data.item.attributes;
        if (this.isValidItemType(b.type))
            return this._selectedItem = b, this.showSuccess(), !1
    },
    onSearchQueryUpdated: function(a, b, c) {
        var d = c || "";
        this.typeaheadField.setValue(d)
    },
    onSendAction: function() {}
}), P.modules.UserSelectBase.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.UserSelectFriendsInvite"), goog.require("P.Module"), goog.require("P.modules.UserSelectBase");
var CLASS_HIDDEN = "hidden";
P.modules.UserSelectFriendsInvite = P.modules.UserSelectBase.extend({
    onContentReady: function() {
        P.modules.UserSelectBase.prototype.onContentReady.call(this), P.fb.ensureInit(P.NOOP)
    },
    onChildItemSelected: function(a) {
        a.stopPropagation();
        var b = a.data.item.attributes;
        return b.type === P.CONST.TYPEAHEAD_TYPE_FB_NON_PINNER ? (P.Invite.userInviteFacebook(b.id), void this.resetForNextInvite()) : b.type === P.CONST.TYPEAHEAD_TYPE_GPLUS_NON_PINNER ? (P.Invite.trackInvite("gplus", !0), void this.resetForNextInvite()) : void P.modules.UserSelectBase.prototype.onChildItemSelected.call(this, a)
    },
    onSendAction: function() {
        var a = this.getSelectedItem();
        "user" === a.type ? this.userFollow(a) : this.isEmailType(a.type) ? P.Invite.userInviteEmail(a.email) : P.showError(P.string.common.defaultErrorMessage), this.resetForNextInvite()
    },
    onTypeaheadRenderDone: function(a) {
        var b = P.absolutify("/" + P.currentUser.get("username"));
        this.enableGplusShareButton(a.data, b, "VISIT")
    },
    userFollow: function(a) {
        var b = P.resourceFactory.create("UserFollowResource", {
            user_id: a.id
        });
        b.call("create").then(function() {
            P.Invite.trackInvite("pinterest", !0)
        }, function() {
            P.Invite.trackInvite("pinterest", !1)
        })
    },
    resetForNextInvite: function() {
        this.parent && this.parent.show(), this.reset(), this.$(".inviteFriends").addClass(CLASS_HIDDEN), this.$(".inviteMoreFriends").removeClass(CLASS_HIDDEN)
    },
    showSuccess: function() {
        var a = this.getSelectedItem(), b = this.$(".inviteSent"), c = this.$(".followSent");
        "user" === a.type ? (b.addClass(CLASS_HIDDEN), c.removeClass(CLASS_HIDDEN)) : (b.removeClass(CLASS_HIDDEN), c.addClass(CLASS_HIDDEN)), P.modules.UserSelectBase.prototype.showSuccess.call(this)
    }
}), P.modules.UserSelectFriendsInvite.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.tutorials.BuildingHomeFeedSpinner"), goog.require("P.modules.tutorials.StepBase"), goog.require("P.modules.NuxProgress");
var MAX_STATUS_CHECKS = 10, STATUS_POLL_INTERVAL = 500;
P.modules.tutorials.BuildingHomeFeedSpinner = P.modules.tutorials.StepBase.extend({
    numChecks: 0,
    onContentReady: function() {
        this.options.is_nux && (this.nuxProgress = P.app.getChildByModuleName("NuxProgress"), this.nuxProgress.initializeProgress({
            module: this
        }))
    },
    _checkHomeFeedRebuildStatus: function() {
        var a, b = function() {
            P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_TUTORIAL, P.CONST.PUBSUB_TOPIC_TUTORIAL_NEXT)
        };
        a = P.resourceFactory.create("OrientationContextStatusResource", {
            redo_homefeed: this.options.is_nux===!1
        }), this.numChecks += 1, a.callGet({
            showError: !1
        }).then(function() {
            b()
        }, function() {
            this.numChecks <= MAX_STATUS_CHECKS ? P.setTimeout(this._checkHomeFeedRebuildStatus.bind(this), STATUS_POLL_INTERVAL) : b()
        }.bind(this))
    },
    onShow: function(a) {
        P.setTimeout(this._checkHomeFeedRebuildStatus.bind(this), STATUS_POLL_INTERVAL), P.modules.tutorials.StepBase.prototype.onShow.call(this, a)
    }
}), P.modules.tutorials.BuildingHomeFeedSpinner.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/tutorials/BuildingHomeFeedSpinner/BuildingHomeFeedSpinner.nunjucks"), goog.provide("P.modules.tutorials.ModalAnalyticsAudienceSelectorIntro"), goog.require("P.modules.tutorials.ModalStepBase"), P.modules.tutorials.ModalAnalyticsAudienceSelectorIntro = P.modules.tutorials.ModalStepBase.extend({
    getPlacementId: function() {
        return P.Experiences.Placement.ANALYTICS_AUDIENCE_DASHBOARD_TAKEOVER
    },
    getExperienceId: function() {
        return P.Experiences.Experience.ANALYTICS_AUDIENCE_SELECTOR_USER_ED
    },
    getHighlightedElement: function() {
        var a = this._getModuleChildrenByModuleName(P.app, "SelectButtonWrapper");
        return this._highlightModule(a[0], !0)
    },
    onShow: function(a) {
        var b = this.getHighlightedElement();
        b && this.setModalPosition("BOTTOM_CENTER", b, !0), a && a()
    }
}), P.modules.tutorials.ModalAnalyticsAudienceSelectorIntro.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.tutorials.ModalAnalyticsHomeIntroBase"), goog.require("P.modules.tutorials.ModalStepBase"), P.modules.tutorials.ModalAnalyticsHomeIntroBase = P.modules.tutorials.ModalStepBase.extend({
    getPlacementId: function() {
        return P.Experiences.Placement.ANALYTICS_HOME_TAKEOVER
    },
    getExperienceId: function() {
        return P.Experiences.Experience.ANALYTICS_HOME_USER_ED
    },
    getHighlightedCardModule: function(a) {
        var b = this._getModuleChildrenByModuleName(P.app, "HomePageAnalyticsCard"), c = null;
        switch (a) {
        case"profile":
            c = b[0];
            break;
        case"audience":
            c = b[1];
            break;
        case"domain":
            c = b[2]
        }
        return c ? this._highlightModule(c, !0) : null
    },
    getStepPosition: P.NOOP,
    onShow: function(a) {
        var b = this.getHighlightedElement();
        b ? this.setModalPosition(this.getStepPosition(), b, !0) : this.setModalPosition(null, null, !0), a && a()
    }
}), P.modules.tutorials.ModalAnalyticsHomeIntroBase.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.tutorials.ModalAnalyticsHomeOverallIntro"), goog.require("P.Module"), goog.require("P.modules.tutorials.ModalAnalyticsHomeIntroBase"), P.modules.tutorials.ModalAnalyticsHomeOverallIntro = P.modules.tutorials.ModalAnalyticsHomeIntroBase.extend({
    getStepPosition: function() {
        return null
    },
    getHighlightedElement: function() {
        return null
    }
}), P.modules.tutorials.ModalAnalyticsHomeOverallIntro.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.tutorials.ModalAnalyticsHomeProfileCardIntro"), goog.require("P.Module"), goog.require("P.modules.tutorials.ModalAnalyticsHomeIntroBase"), P.modules.tutorials.ModalAnalyticsHomeProfileCardIntro = P.modules.tutorials.ModalAnalyticsHomeIntroBase.extend({
    getStepPosition: function() {
        return "RIGHT_CENTER"
    },
    getHighlightedElement: function() {
        return this.getHighlightedCardModule("profile")
    }
}), P.modules.tutorials.ModalAnalyticsHomeProfileCardIntro.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.tutorials.ModalCategorySearchIntro"), goog.require("P.Module"), goog.require("P.modules.tutorials.ModalStepBase"), P.modules.tutorials.ModalCategorySearchIntro = P.modules.tutorials.ModalStepBase.extend({
    onShow: function(a) {
        var b = this._getHighlightedElementForModule("categoriesDropdownButton"), c = this._getHighlightedElementForModule("mainSearchTextbox"), d = b || c;
        d && (this.setModalPosition("BOTTOM_RIGHT", d, !0), d.addClass("categorySearchIntroHighlight")), a && a()
    },
    _getHighlightedElementForModule: function(a) {
        var b = this._getModuleChildById(P.app, a);
        return b ? this._highlightModule(b, !0) : null
    },
    getPlacementId: function() {
        return P.Experiences.Placement.WEB_HOME_TAKEOVER
    },
    getExperienceId: function() {
        return P.Experiences.Experience.WEB_CATEGORY_SEARCH_USER_ED
    }
}), P.modules.tutorials.ModalCategorySearchIntro.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.tutorials.ModalFastFollowIntro"), goog.require("P.Module"), goog.require("P.modules.tutorials.ModalStepBase"), P.modules.tutorials.ModalFastFollowIntro = P.modules.tutorials.ModalStepBase.extend({
    onCreated: function() {
        P.modules.tutorials.ModalStepBase.prototype.onCreated.apply(this, arguments), this.listen(this, P.CONST.EVENT_NEXT, this.onNextClicked)
    },
    onNextClicked: function() {
        try {
            var a = this._getMenu();
            a.getDropdown().getContentModulePromise().then(function(a) {
                a.openFindBoards()
            })
        } catch (b) {
            var c = {
                name: "FastFollow",
                resource: {
                    name: "UserResource",
                    options: {
                        username: P.currentUser.get("username"),
                        field_set_key: "fast_follow"
                    }
                },
                options: {
                    post_orientation: !0
                }
            };
            P.loadModule(c).then(function(a) {
                this.showInModal(a, {
                    can_dismiss: !0,
                    container_class: "fastFollowContainer"
                })
            }.bind(this))
        }
    },
    onShow: function(a) {
        var b = this._getMenu();
        b.getDropdown().setSticky(!0), b.showDropdown(function() {
            b.getDropdown().getContentModulePromise().then(function(b) {
                var c = b.getFindBoardsElement(), d = this._highlightElement("highlightContainer", c, !0);
                d.addClass("fastFollowIntroHighlight"), d.on("click", function() {
                    this.triggerEvent(P.CONST.EVENT_NEXT, null, !0)
                }.bind(this)), this.setModalPosition("LEFT_TOP", d, !0), a && a()
            }.bind(this))
        }.bind(this))
    },
    _getMenu: function() {
        return this._getModuleChildById(P.app, "userMenu")
    },
    onExit: function(a) {
        if (P.app)
            try {
                var b = this._getMenu();
                b.getDropdown().setSticky(!1), b.hideDropdown()
        } catch (c) {}
        a && a()
    },
    getPlacementId: function() {
        return P.Experiences.Placement.WEB_HOME_TAKEOVER
    },
    getExperienceId: function() {
        return P.Experiences.Experience.WEB_FAST_FOLLOW_USER_ED
    }
}), P.modules.tutorials.ModalFastFollowIntro.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.tutorials.ModalFindFriendsIntro"), goog.require("P.Module"), goog.require("P.modules.tutorials.ModalStepBase"), P.modules.tutorials.ModalFindFriendsIntro = P.modules.tutorials.ModalStepBase.extend({
    onShow: function(a) {
        var b = this._getModuleChildrenByModuleName(P.app, "UserMenu")[0];
        this.noUserMenu=!b, this.highlightFindFriendsInMenu(a)
    },
    onExit: function(a) {
        if (!this.noUserMenu && P.app)
            try {
                var b = this._getMenu();
                b.getDropdown().setSticky(!1), b.hideDropdown()
        } catch (c) {}
        a && a()
    },
    highlightFindFriendsInMenu: function(a) {
        if (this.noUserMenu) {
            var b = this._getFindFriendsItem(), c = this._highlightModule(b, !0);
            this.setModalPosition("RIGHT_CENTER", c, !0), c.addClass("findFriendsIntroHighlight")
        } else {
            var d = this._getMenu();
            d.getDropdown().setSticky(!0), d.showDropdown(function() {
                d.getDropdown().getContentModulePromise().then(function(b) {
                    var c = b.getFindFriendsElement(), d = this._highlightElement("highlightContainer", c, !0);
                    d.addClass("findFriendsIntroHighlightMenu"), d.on("click", function() {
                        this.triggerEvent(P.CONST.EVENT_NEXT, null, !0)
                    }.bind(this));
                    var e = "LEFT_TOP";
                    this.setModalPosition(e, d, !0), a && a()
                }.bind(this))
            }.bind(this))
        }
    },
    _getFindFriendsItem: function() {
        return this._getModuleChildById(P.app, "userNews")
    },
    _getMenu: function() {
        return this._getModuleChildById(P.app, "userMenu")
    },
    getPlacementId: function() {
        return P.Experiences.Placement.WEB_HOME_TAKEOVER
    },
    getExperienceId: function() {
        return P.Experiences.Experience.WEB_FIND_FRIENDS_USER_ED
    }
}), P.modules.tutorials.ModalFindFriendsIntro.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.tutorials.ModalFirstBoardIntro"), goog.require("P.Module"), goog.require("P.modules.tutorials.ModalStepBase"), P.modules.tutorials.ModalFirstBoardIntro = P.modules.tutorials.ModalStepBase.extend({
    onShow: function(a) {
        $("html, body").scrollTop(0);
        var b=!1, c = this._getModuleChildrenByModuleName(P.app, "UserProfileContent");
        if (c && c[0]) {
            var d = c[0].data, e = d.board_count + d.secret_board_count;
            b = e > 0
        }
        var f, g;
        b ? (f = this.$(".hasBoardsTitle"), g = this.$(".hasBoardsContent")) : (f = this.$(".hasNoBoardsTitle"), g = this.$(".hasNoBoardsContent")), f.show(), g.show(), this.highlightBoard(), a && a()
    },
    highlightBoard: function() {
        if (this.board = this.getTargetBoard(), this.board) {
            var a = this._highlightModule(this.board, !0);
            a.on("click", this.onBoardClicked.bind(this)), a.addClass("firstBoardIntroHighlight");
            var b, c = $(window).height();
            b = a.offset().top + a.height() > c ? "TOP_LEFT" : "RIGHT_TOP", this.setModalPosition(b, a, !0)
        }
    },
    setCloneInteractions: function(a) {
        this.disableCloneLinks(a)
    },
    getTargetBoard: function() {
        var a, b = this._getModuleChildrenByModuleName(P.app, "Grid")[0];
        if (b) {
            var c = b.getGridItems();
            a = c.getChildModuleAtIndex(0, "BoardCreateRep")
        }
        return a
    },
    onBoardClicked: function(a) {
        return a.preventDefault(), this.triggerEvent(P.CONST.EVENT_PREVIOUS, null, !0), this.board.showModal(), !1
    },
    getPlacementId: function() {
        return P.Experiences.Placement.WEB_USER_PROFILE_TAKEOVER
    },
    getExperienceId: function() {
        return P.Experiences.Experience.WEB_FIRST_BOARD_USER_ED
    }
}), P.modules.tutorials.ModalFirstBoardIntro.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.tutorials.ModalFirstPinIntro"), goog.require("P.Module"), goog.require("P.modules.tutorials.ModalStepBase"), P.modules.tutorials.ModalFirstPinIntro = P.modules.tutorials.ModalStepBase.extend({
    onCreated: function() {
        P.modules.tutorials.ModalStepBase.prototype.onCreated.apply(this, arguments), this.listen(P.Viewport, P.CONST.EVENT_BODY_COLUMN_CHANGE, this.onBodyColumnChange)
    },
    onShow: function(a) {
        this.highlightPin(), a && a()
    },
    highlightPin: function() {
        if (this.pin = this.getTargetPin(), this.pin) {
            var a = this._highlightModule(this.pin, !0);
            this.$repinButton = a.find(".repinSmall"), this.$repinButton.on("click", this.onRepinClicked.bind(this)), this.modal.$el.addClass("modalPinIntro"), this.setModalPosition("LEFT_TOP", this.$repinButton, !0), a.addClass("firstPinIntroHighlight")
        }
    },
    setCloneInteractions: function(a) {
        this.disableCloneLinks(a)
    },
    getTargetPin: function() {
        var a = this._getModuleChildrenByModuleName(P.app, "Grid")[0];
        if (a) {
            var b = a.getGridItems(), c = Math.ceil(P.Viewport.numColumns / 2);
            return b.getChildModuleAtIndex(c, "Pin")
        }
    },
    onBodyColumnChange: function() {
        this.$repinButton.off(), this.$repinButton = null, this.cleanHighlightedElements(), this.highlightPin()
    },
    onRepinClicked: function() {
        this.triggerEvent(P.CONST.EVENT_PREVIOUS, null, !0);
        var a = this.pin.getChildById("pinItButton");
        a.showModal()
    },
    getPlacementId: function() {
        return P.Experiences.Placement.WEB_HOME_TAKEOVER
    },
    getExperienceId: function() {
        return P.Experiences.Experience.WEB_FIRST_PIN_USER_ED
    }
}), P.modules.tutorials.ModalFirstPinIntro.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.tutorials.ModalGSHeaderIntroStepBase"), goog.require("P.modules.tutorials.ModalStepBase"), P.modules.tutorials.ModalGSHeaderIntroStepBase = P.modules.tutorials.ModalStepBase.extend({
    onShow: function(a) {
        var b;
        this.options.module_id && (b = this._getHighlightedModule(this.options.module_id)), b && (this.modal.options.caret_style = this.options.caret_class, this.setModalPosition(this.options.step_position, b, !0)), a && a()
    },
    onTutorialComplete: function() {
        var a = this._getModuleChildById(P.app, "mainSearchTextbox");
        a && window.setTimeout(function() {
            a.focus()
        }, 500)
    },
    getPlacementId: function() {
        return P.Experiences.Placement.WEB_HOME_TAKEOVER
    },
    getExperienceId: function() {
        return P.Experiences.Experience.WEB_GUIDED_SEARCH_HEADER_USER_ED
    }
}), P.modules.tutorials.ModalGSHeaderIntroStepBase.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.tutorials.ModalGuidedSearchIntroStepBase"), goog.require("P.modules.tutorials.ModalStepBase"), P.modules.tutorials.ModalGuidedSearchIntroStepBase = P.modules.tutorials.ModalStepBase.extend({
    onShow: function(a) {
        if (this.options.module_id) {
            var b = this._getHighlightedModule(this.options.module_id);
            b && this.setModalPosition(this.options.step_position, b, !0)
        } else {
            var c = this._getModuleChildById(P.app, "tokenizedInput"), d = c.getTokens()[0];
            if (d) {
                var e = this._highlightModule(d, !0);
                e && this.setModalPosition(this.options.step_position, e, !0)
            }
        }
        a && a()
    },
    getPlacementId: function() {
        return P.Experiences.Placement.WEB_SEARCH_PAGE_TAKEOVER
    },
    getExperienceId: function() {
        return P.Experiences.Experience.WEB_GUIDED_SEARCH_USER_ED
    }
}), P.modules.tutorials.ModalGuidedSearchIntroStepBase.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.tutorials.ModalHomeFeedPinIntro"), goog.require("P.Module"), goog.require("P.modules.tutorials.ModalStepBase");
var MODAL_HOME_FEED_LOGO_STEP_BACKGROUND_CLASS = "pinterestLogoStepBackground";
P.modules.tutorials.ModalHomeFeedPinIntro = P.modules.tutorials.ModalStepBase.extend({
    onEnter: function(a) {
        this.ensurePath("/"), a && a()
    },
    onShow: function(a) {
        var b = this._getModuleChildById(P.app, "header"), c = b.getHomeElement(), d = this._highlightElement("homeButton", c, !0), e = $("<div>");
        e.addClass(MODAL_HOME_FEED_LOGO_STEP_BACKGROUND_CLASS), e.css({
            top: d.offset().top - 60,
            left: d.offset().left
        }), $("body").append(e), a && a()
    },
    onExit: function(a) {
        $("." + MODAL_HOME_FEED_LOGO_STEP_BACKGROUND_CLASS).remove(), a && a()
    }
}), P.modules.tutorials.ModalHomeFeedPinIntro.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.tutorials.ModalPinIntro"), goog.require("P.Module"), goog.require("P.modules.tutorials.ModalStepBase");
var SAMPLE_PIN_CLASS = "samplePinTutorialStep";
P.modules.tutorials.ModalPinIntro = P.modules.tutorials.ModalStepBase.extend({
    onEnter: function(a) {
        this.ensurePath("/"), $("body").append('<div class="' + SAMPLE_PIN_CLASS + '">&nbsp;</div>'), a && a()
    },
    onShow: function(a) {
        var b = $("." + SAMPLE_PIN_CLASS);
        this.setModalPosition("RIGHT_TOP", b, !0), a && a()
    },
    onExit: function(a) {
        $("." + SAMPLE_PIN_CLASS).remove(), a && a()
    }
}), P.modules.tutorials.ModalPinIntro.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.tutorials.ModalPlacePinsAddBase"), goog.require("P.Module"), goog.require("P.modules.tutorials.ModalStepBase"), P.modules.tutorials.ModalPlacePinsAddBase = P.modules.tutorials.ModalStepBase.extend({
    onShow: function() {
        this.highlightAddButton()
    },
    highlightAddButton: function() {
        if (this.button = this.getTargetModule(), this.button) {
            var a = this._highlightModule(this.button, !0), b = "RIGHT_TOP";
            $(window).width() <= 5 * (P.CONST.PIN_WIDTH + P.CONST.PIN_MARGIN) && (b = "BOTTOM_RIGHT"), this.setModalPosition(b, a, !0)
        }
    },
    getTargetModule: function() {
        var a = this._getModuleChildrenByModuleName(P.app, "BoardPage")[0];
        if (a) {
            var b = this._getModuleChildrenByModuleName(a, "ShowModalButton");
            if (!_.isEmpty(b)) {
                var c = _.find(b, function(a) {
                    return a.$el.hasClass("addAPlace")
                });
                return c
            }
        }
    }
}), P.modules.tutorials.ModalPlacePinsAddBase.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.tutorials.ModalPlacePinsAddEmpty"), goog.require("P.Module"), goog.require("P.modules.tutorials.ModalPlacePinsAddBase"), P.modules.tutorials.ModalPlacePinsAddEmpty = P.modules.tutorials.ModalPlacePinsAddBase.extend({
    getPlacementId: function() {
        return P.Experiences.Placement.WEB_EMPTY_PLACES_BOARD_TAKEOVER
    },
    getExperienceId: function() {
        return P.Experiences.Experience.WEB_EMPTY_PLACES_BOARD_USER_ED
    },
    onNextButtonClicked: function() {
        this.button.$el.click()
    }
}), P.modules.tutorials.ModalPlacePinsAddEmpty.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.tutorials.ModalPlacePinsAddFilled"), goog.require("P.Module"), goog.require("P.modules.tutorials.ModalPlacePinsAddBase"), P.modules.tutorials.ModalPlacePinsAddFilled = P.modules.tutorials.ModalPlacePinsAddBase.extend({
    getPlacementId: function() {
        return P.Experiences.Placement.WEB_FILLED_PLACES_BOARD_TAKEOVER
    },
    getExperienceId: function() {
        return P.Experiences.Experience.WEB_FILLED_PLACES_BOARD_USER_ED
    }
}), P.modules.tutorials.ModalPlacePinsAddFilled.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.tutorials.ModalPlacePinsEdit"), goog.require("P.Module"), goog.require("P.modules.tutorials.ModalStepBase"), P.modules.tutorials.ModalPlacePinsEdit = P.modules.tutorials.ModalStepBase.extend({
    onShow: function() {
        $("html, body").scrollTop(0), this.highlightEditButton()
    },
    highlightEditButton: function() {
        var a = this.getTargetModule();
        if (a) {
            var b = this._highlightModule(a, !0);
            this.setModalPosition("RIGHT_CENTER", b, !0)
        }
    },
    getTargetModule: function() {
        var a = this._getModuleChildrenByModuleName(P.app, "PlaceBoardInfoBar")[0];
        if (a) {
            var b = this._getModuleChildById(a, "editButton");
            if (b)
                return b
        }
    },
    getPlacementId: function() {
        return P.Experiences.Placement.WEB_FILLED_PLACES_BOARD_TAKEOVER
    },
    getExperienceId: function() {
        return P.Experiences.Experience.WEB_FILLED_PLACES_BOARD_USER_ED
    }
}), P.modules.tutorials.ModalPlacePinsEdit.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.tutorials.ModalPlacePinsShow"), goog.require("P.Module"), goog.require("P.modules.tutorials.ModalStepBase"), P.modules.tutorials.ModalPlacePinsShow = P.modules.tutorials.ModalStepBase.extend({
    onShow: function() {
        this.highlightAddPlace()
    },
    highlightAddPlace: function() {
        var a = this.getTargetPin(), b = this._getModuleChildById(a, "addToMap");
        if (b || (b = this._getModuleChildById(a, "seeOnMap")), b) {
            var c = b.$el, d = c.offset().top, e = c.height(), f = P.Viewport.height, g = $(".headerBackground").height(), h = d - f / 2 - g / 2 + e / 2;
            this.$("." + b.id).show(), $(window).scrollTop(h);
            var i = this._highlightModule(b, !0);
            this.setModalPosition("RIGHT_CENTER", i, !0, !0)
        }
    },
    getTargetPin: function() {
        var a = this._getModuleChildrenByModuleName(P.app, "Grid")[0];
        if (!a)
            return void 0;
        var b = a.getGridItems();
        return b.getChildModuleAtIndex(0, "Pin")
    },
    getPlacementId: function() {
        return P.Experiences.Placement.WEB_FILLED_PLACES_BOARD_TAKEOVER
    },
    getExperienceId: function() {
        return P.Experiences.Experience.WEB_FILLED_PLACES_BOARD_USER_ED
    }
}), P.modules.tutorials.ModalPlacePinsShow.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.tutorials.ModalQAIntroBaseStep"), goog.require("P.Module"), goog.require("P.modules.tutorials.ModalStepBase"), P.modules.tutorials.ModalQAIntroBaseStep = P.modules.tutorials.ModalStepBase.extend({
    onShow: function(a) {
        this.isContextualExperience=!0;
        var b = this.getHighlightedElement();
        b && (this.adjustHighlightedElement(b), this.modal.options.caret_style = "lightGray", this.setModalPosition("TOP_LEFT", b, !0)), a && a()
    },
    getHighlightedElement: P.NOOP,
    adjustHighlightedElement: P.NOOP
}), P.modules.tutorials.ModalQAIntroBaseStep.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.tutorials.ModalQuestionIntroOne"), goog.require("P.Module"), goog.require("P.modules.tutorials.ModalQAIntroBaseStep"), P.modules.tutorials.ModalQuestionIntroOne = P.modules.tutorials.ModalQAIntroBaseStep.extend({
    getHighlightedElement: function() {
        var a = this._getModuleChildrenByModuleName(P.app, "Questions");
        return a && 0 !== a.length ? this._highlightModule(a[0], !0) : null
    },
    adjustHighlightedElement: function(a) {
        var b = a.width(), c = a.height();
        a.css({
            width: b + 20,
            height: c + 20
        }).addClass("modalQuestionIntroHighlighted")
    }
}), P.modules.tutorials.ModalQuestionIntroOne.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.tutorials.ModalQuestionIntroTwo"), goog.require("P.Module"), goog.require("P.modules.tutorials.ModalQAIntroBaseStep"), P.modules.tutorials.ModalQuestionIntroTwo = P.modules.tutorials.ModalQAIntroBaseStep.extend({
    _onBeforeShow: function() {
        var a = this._getModuleChildrenByModuleName(P.app, "Question"), b = a[0].getQuestionUserName(), c = this.$(".questionIntroTitle"), d = c.html(), e = P.string.format(d, {
            name: b
        });
        c.html(e)
    },
    onShow: function(a) {
        this._onBeforeShow(), P.modules.tutorials.ModalQAIntroBaseStep.prototype.onShow.call(this, a)
    },
    getHighlightedElement: function() {
        var a = this._getModuleChildrenByModuleName(P.app, "Question");
        return a && 0 !== a.length ? this._highlightModule(a[0], !0) : null
    }
}), P.modules.tutorials.ModalQuestionIntroTwo.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.tutorials.ModalSeeProfileIntro"), goog.require("P.Module"), goog.require("P.modules.tutorials.ModalStepBase"), P.modules.tutorials.ModalSeeProfileIntro = P.modules.tutorials.ModalStepBase.extend({
    onShow: function(a) {
        var b = this._getModuleChildrenByModuleName(P.app, "UserMenu")[0];
        if (this.noUserMenu=!b, this.noUserMenu) {
            var c = this._getModuleChildById(P.app, "userMenu"), d = this._highlightModule(c, !0);
            this.setModalPosition("BOTTOM_CENTER", d, !0)
        } else 
            b.setSticky(!0), b.showDropdown(function() {
                b.getDropdown().getContentModulePromise().then(function(b) {
                    var c = b.getMyBoardsElement(), d = this._highlightElement("highlightContainer", c, !0);
                    d.addClass("seeProfileIntroHighlight"), d.on("click", function() {
                        this.triggerEvent(P.CONST.EVENT_NEXT, null, !0)
                    }.bind(this)), this.setModalPosition("LEFT_TOP", d, !0), a && a()
                }.bind(this))
            }.bind(this))
    },
    onExit: function(a) {
        if (!this.noUserMenu && P.app) {
            var b = this._getModuleChildrenByModuleName(P.app, "UserMenu")[0];
            b.setSticky(!1), b.hideDropdown()
        }
        a && a()
    },
    getPlacementId: function() {
        return P.Experiences.Placement.WEB_HOME_TAKEOVER
    },
    getExperienceId: function() {
        return P.Experiences.Experience.WEB_YOUR_BOARDS_USER_ED
    }
}), P.modules.tutorials.ModalSeeProfileIntro.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.tutorials.ModalVisualObjectSearchIntro"), goog.require("P.Module"), goog.require("P.modules.tutorials.ModalStepBase"), P.modules.tutorials.ModalVisualObjectSearchIntro = P.modules.tutorials.ModalStepBase.extend({
    getExperienceId: function() {
        return P.Experiences.Experience.WEB_VISUAL_OBJECT_SEARCH_CLOSEUP_USER_ED
    },
    getPlacementId: function() {
        return P.Experiences.Placement.WEB_PIN_CLOSEUP
    },
    onShow: function(a) {
        this.isContextualExperience=!0;
        var b = this._getHighlightedClickTarget();
        b && (b.css({
            "margin-left": "auto",
            "margin-top": "auto"
        }), this.setModalPosition("BOTTOM_CENTER", b, !0, !1)), a && a(), this.setExperienceViewed()
    },
    _getHighlightedClickTarget: function() {
        var a = this._getModuleChildrenByModuleName(P.app, "PaddedPin");
        return a.length ? this._highlightElement("highlightedVisualObject", a[0].getFirstVisualObject(), !0) : null
    }
}), P.modules.tutorials.ModalVisualObjectSearchIntro.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.tutorials.NewUserFindFriends"), goog.require("P.Module"), goog.require("P.modules.tutorials.NewUserStepBase"), P.modules.tutorials.NewUserFindFriends = P.modules.tutorials.NewUserStepBase.extend({
    onContentReady: function() {
        P.modules.tutorials.NewUserStepBase.prototype.onContentReady.call(this), this.listen(this.getChildById("fbTab"), P.CONST.EVENT_BUTTON_CLICK, this.onButtonTabClick), this.listen(this.getChildById("twTab"), P.CONST.EVENT_BUTTON_CLICK, this.onButtonTabClick), this.childListen(P.CONST.EVENT_USER_CLICK, this.onFriendClick), this.content = null, this.selectedButton = null, this.twitterConnected = _.isString(P.currentUser.get("twitter_url")), this.facebookConnected = _.isString(P.currentUser.get("facebook_url"))
    },
    onEnter: function(a) {
        P.scrollToTop({}), a && a()
    },
    onFriendClick: function(a) {
        var b = a.data || {};
        if (b.user_id) {
            var c = P.resourceFactory.create("UserFollowResource", {
                user_id: b.user_id
            });
            c.call(b.is_following ? "create" : "delete")
        }
    },
    _notifyProgressBar: function(a) {
        P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_TUTORIAL, P.CONST.PUBSUB_TOPIC_TUTORIAL_MINI_NEXT, {
            type: a,
            total: 1
        })
    },
    onButtonTabClick: function(a) {
        this.$(".emptyContactGrid").addClass("hidden");
        var b = a.target, c = null, d = null;
        switch (b.id) {
        case"fbTab":
            c = P.SocialConnect.FACEBOOK, this.facebookConnected && (d = "UserFacebookFriendsResource", this._notifyProgressBar("facebook")), this.getChildById("fbTab").setSelectedStyle(!0), this.getChildById("twTab").setSelectedStyle(!1);
            break;
        case"twTab":
            c = P.SocialConnect.TWITTER, this.twitterConnected && (d = "UserTwitterFriendsResource", this._notifyProgressBar("twitter")), this.getChildById("fbTab").setSelectedStyle(!1), this.getChildById("twTab").setSelectedStyle(!0)
        }
        if (c) {
            var e = new P.modules.FindFriendsContent({
                options: {
                    tab: c,
                    username: P.currentUser.get("username"),
                    item_options: {
                        view_type: "userCheckableSelectView"
                    }
                }
            });
            if (d) {
                var f = {
                    username: P.currentUser.get("username")
                };
                e.resource = P.resourceFactory.create(d, f)
            }
            e.render().then(function() {
                this.content && this.content.remove(), this.appendChild(e), this.content = e, this.listen(e, P.CONST.EVENT_SOCIAL_NETWORK_CONNECTION, function(a) {
                    switch (a.data.network) {
                    case P.SocialConnect.FACEBOOK:
                        this._notifyProgressBar("facebook"), this.facebookConnected=!0;
                        break;
                    case P.SocialConnect.TWITTER:
                        this._notifyProgressBar("twitter"), this.twitterConnected=!0
                    }
                })
            }.bind(this))
        }
    }
}), P.modules.tutorials.NewUserFindFriends.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.tutorials.NewUserInstallExtension"), goog.require("P.Module"), goog.require("P.browserExtension"), goog.require("P.modules.tutorials.NewUserStepBase");
var BUTTON_ID_INSTALL_BUTTON = "installButton";
P.modules.tutorials.NewUserInstallExtension = P.modules.tutorials.NewUserStepBase.extend({
    onContentReady: function() {
        P.modules.tutorials.NewUserStepBase.prototype.onContentReady.call(this), this.optionalSkip = this.$(".optionalSkip"), this.optionalSkip.bind("click", this.onSkipClick)
    },
    onEnter: function(a) {
        P.scrollToTop({});
        var b = void 0 !== $("body").attr("data-pinterest-extension-installed");
        b && P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_TUTORIAL, P.CONST.PUBSUB_TOPIC_TUTORIAL_NEXT), a && a()
    },
    onShow: function(a) {
        var b = void 0 !== $("body").attr("data-pinterest-extension-installed");
        b || this.show(), a && a()
    },
    onButtonClick: function(a) {
        var b = a.target;
        b.id === BUTTON_ID_INSTALL_BUTTON && P.browserExtension.instance.handleExtensionInstall(this.onChromeExtensionInstallationSuccess, P.NOOP)
    },
    onChromeExtensionInstallationSuccess: function() {
        P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_TUTORIAL, P.CONST.PUBSUB_TOPIC_TUTORIAL_NEXT)
    },
    onSkipClick: function() {
        P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_TUTORIAL, P.CONST.PUBSUB_TOPIC_TUTORIAL_SKIP_PROGRESS_BAR_STEP)
    }
}), P.modules.tutorials.NewUserInstallExtension.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.tutorials.NewUserInterestSearch"), goog.require("P.Module"), goog.require("P.modules.tutorials.NewUserStepBase");
var SELECTOR_TOOLTIP_CLOSER_LOOK = ".tooltipCloserLook", NEW_USER_INTEREST_SEARCH_CLASS_VISIBLE = "visible", EXIT_TOUR_TIME = 15e3, FORCE_EXIT_TIME = 48e4, MIN_SEARCHES = 1, SEARCH_ITEM_OPTIONS = {
    show_pinner: !0,
    show_board: !0,
    lite: !0,
    show_via: !1,
    show_pinned_from: !1
};
P.modules.tutorials.NewUserInterestSearch = P.modules.tutorials.NewUserStepBase.extend({
    onAddedToDom: function() {
        this.childListen(P.CONST.EVENT_NAVIGATE, this.onChildNavigate)
    },
    onButtonClick: function(a) {
        var b = a.target.id;
        "previous" === b && this.triggerInterest()
    },
    initializeStep: function() {
        this.childListen(P.CONST.EVENT_NAVIGATE, P.NuxUtils.preventNavigationIfNecessary), this.numSearches = 0, this.endTourTooltip = null;
        var a = {};
        a[P.CONST.PUBSUB_TOPIC_PIN_CREATED] = this._onRepinned, this.pubsubSubscribe(P.CONST.PUBSUB_CHANNEL_CURRENT_USER, a)
    },
    onChildNavigate: function(a) {
        var b = P.router.get().resolve(a.data.url);
        "FeedPage" === b.module ? (this.triggerCategory(b.options.feed), a.data.handled=!0) : "SearchPage" === b.module ? (this.triggerPinSearch(b.options.query), a.data.handled=!0) : "Closeup" === b.module && this._closeTooltip(), a.data.handled && a.stopPropagation()
    },
    onEnter: function(a) {
        var b = {
            name: "ConfirmDialog",
            options: {
                template: "new_user_ready"
            }
        };
        this.forceExit = window.setTimeout(function() {
            P.loadModule(b).then(function(a) {
                this.showInModal(a, {
                    mask_type: "dark",
                    can_dismiss: !1
                }), this.listen(a, P.CONST.EVENT_CONFIRM, function() {
                    this.nuxProgress.triggerEvent(P.CONST.EVENT_NEXT)
                }), P.ExperienceManager.instance().completePlacedExperience(P.Experiences.Placement.WEB_HOME_TAKEOVER, P.Experiences.Experience.WEB_MANDATORY_AUTOBAHN), P.trackRegisterAction("autobahn_force_exit")
            }.bind(this))
        }.bind(this), FORCE_EXIT_TIME), this.autoEnableExit = window.setTimeout(function() {
            this._enableExitTour()
        }.bind(this), EXIT_TOUR_TIME), a && a()
    },
    _onRepinned: function() {
        this._enableExitTour(), this.pubsubUnsubscribe(P.CONST.PUBSUB_CHANNEL_CURRENT_USER, P.CONST.PUBSUB_TOPIC_PIN_CREATED), P.trackRegisterAction("autobahn_repinned")
    },
    onContentReady: function() {
        P.modules.tutorials.NewUserStepBase.prototype.onContentReady.call(this), this.grid = this.getChildById("grid"), this.$previousButton = this.$(".previous"), this.endTourButton = this.nuxProgress.getNextButton(), this.endTourButton.disable();
        var a = this.extraData ? this.extraData.showAutobahnV3Tooltip: !1;
        a===!0 && this.showEndTourTip()
    },
    showEndTourTip: function() {
        if (this.endTourButton) {
            var a = {
                name: "Dropdown",
                options: {
                    anchor: this.endTourButton.$el,
                    class_name: "endTourTooltip",
                    position_point: "BOTTOM_RIGHT",
                    sticky: !0,
                    text: P._("Try a pin search below. <br>(The more specific, the better!)"),
                    title: P._("Psst! Before you leave...")
                }
            };
            P.loadModule(a).then(function(a) {
                this.endTourTooltip = a, a.render().then(function() {
                    this.endTourButton.appendChild(a), a.positionModule(), a.fadeIn()
                }.bind(this))
            }.bind(this))
        }
    },
    hideEndTourTip: function() {
        this.endTourTooltip && this.endTourTooltip.fadeOut()
    },
    showPrevious: function() {
        this.togglePrevious(!0), this._toggleTooltip(!0), this._handleSearchCount()
    },
    hidePrevious: function() {
        this.togglePrevious(!1), this._toggleTooltip(!1)
    },
    togglePrevious: function(a) {
        this.$previousButton.toggleClass("visible", a)
    },
    _handleSearchCount: function() {
        this.numSearches = 1, this.numSearches === MIN_SEARCHES && (P.trackRegisterAction("autobahn_user_search"), this._enableExitTour())
    },
    triggerCategory: function(a) {
        this.grid.options.layout = "variable_height", this.grid.options.item_options = SEARCH_ITEM_OPTIONS, this.grid.resource = P.resourceFactory.create("CategoryFeedResource", {
            feed: a
        }), this.grid.empty(), this.grid.render().then(this.showPrevious.bind(this))
    },
    triggerInterest: function() {
        this.grid.options.layout = "fixed_height", this.grid.resource = P.resourceFactory.create("AllCategoriesResource", {
            field_set_key: "grid_item"
        }), this.grid.render().then(this.hidePrevious.bind(this))
    },
    triggerPinSearch: function(a) {
        return "" === $.trim(a) ? this.triggerInterest() : (this.grid.resource = P.resourceFactory.create("SearchResource", {
            query: a,
            scope: "pins"
        }), this.grid.options.layout = "variable_height", this.grid.options.item_options = SEARCH_ITEM_OPTIONS, this.grid.empty(), void this.grid.render().then(this.showPrevious.bind(this)))
    },
    _enableExitTour: function() {
        this.endTourButton.enable(), this.hideEndTourTip()
    },
    onExit: function(a) {
        clearTimeout(this.forceExit), clearTimeout(this.autoEnableExit), a && a()
    },
    _toggleTooltip: function(a) {
        var b = this.$(SELECTOR_TOOLTIP_CLOSER_LOOK);
        b && b.toggleClass(NEW_USER_INTEREST_SEARCH_CLASS_VISIBLE, a)
    },
    _closeTooltip: function() {
        var a = this.$(SELECTOR_TOOLTIP_CLOSER_LOOK);
        a && a.remove()
    }
}), P.modules.tutorials.NewUserInterestSearch.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.tutorials.NewUserPin"), goog.require("P.Module"), goog.require("P.modules.tutorials.NewUserStepBase");
var FACEBOOK_SCRIPT_ID = "fb_pixel", FACEBOOK_PIXEL_CONFIGURATION = {
    pixel_id: "6011522978142",
    value: "0.00",
    currency: "USD"
};
P.modules.tutorials.NewUserPin = P.modules.tutorials.NewUserStepBase.extend({
    onContentReady: function() {
        window.fb_param = FACEBOOK_PIXEL_CONFIGURATION, P.script.load([], "//connect.facebook.net/en_US/fp.js", FACEBOOK_SCRIPT_ID), P.modules.tutorials.NewUserStepBase.prototype.onContentReady.call(this)
    }
}), P.modules.tutorials.NewUserPin.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.tutorials.NewUserPinCreate"), goog.require("P.Module"), goog.require("P.modules.tutorials.NewUserStepBase"), P.modules.tutorials.NewUserPinCreate = P.modules.tutorials.NewUserStepBase.extend({
    onContentReady: function() {
        P.modules.tutorials.NewUserStepBase.prototype.onContentReady.call(this), this.nextStepButton = this.nuxProgress.getNextButton(), this.nextStepButton.disable()
    }
}), P.modules.tutorials.NewUserPinCreate.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.tutorials.NewUserPinSearch"), goog.require("P.Module"), goog.require("P.modules.tutorials.NewUserStepBase");
var MIN_BOTTOM_GUTTER =- 220, MIN_REQUESTED_ITEMS = 3, NEW_USER_SELECTOR_TOOLTIP_CLOSER_LOOK = ".tooltipCloserLook", NEW_USER_CLASS_VISIBLE = "visible", INTERVAL_TIME = 5e3, NEW_USER_EXIT_TOUR_TIME = 15e3, NEW_USER_FORCE_EXIT_TIME = 48e4, TEMPLATE_SUGGESTIONS = "<% _.each(suggestions, function(suggestion) { %><li><%= suggestion %></li><% }) %>";
P.modules.tutorials.NewUserPinSearch = P.modules.tutorials.NewUserStepBase.extend({
    events: {
        "click .searchSuggestions li": "_onSuggestionClick",
        "click .searchInterestField": "stopInterval",
        "submit .searchInterest": "_onSubmit"
    },
    initializeStep: function() {
        this.currentQuestion = 0, this._requestedItems = 0, this._startCountingRequestedItems=!1, this.childListen(P.CONST.EVENT_NAVIGATE, P.NuxUtils.preventNavigationIfNecessary), this._onScrollHandle = this.listen($(window), "scroll", _.debounce(this._onScroll.bind(this), 50)), this.childListen(P.CONST.EVENT_ITEMS_REQUEST_SUCCESS, this._onRequestItemSuccess);
        var a = {};
        a[P.CONST.PUBSUB_TOPIC_PIN_CREATED] = this._onRepinned, this.pubsubSubscribe(P.CONST.PUBSUB_CHANNEL_CURRENT_USER, a)
    },
    onContentReady: function() {
        this.$searchTitle = this.$(".searchTitle"), this.$searchSuggestions = this.$(".searchSuggestions ul"), this.$searchField = this.$(".searchInterestField"), this.endTourButton = this.getChildById("nextButton"), this.interestGrid = this.getChildById("interestGrid"), this.interval = P.setInterval(this._nextQuestion.bind(this), INTERVAL_TIME), this.$searchField.placeholder(), this.endTourButton.setText(this.extraData.nextButtonText), this.endTourButton.disable(), this.siteWideNags = P.app.getChildByModuleName("Nags"), this.header = P.app.getChildById("header")
    },
    onEnter: function(a) {
        var b = {
            name: "ConfirmDialog",
            options: {
                template: "new_user_ready"
            }
        };
        this.forceExit = window.setTimeout(function() {
            P.loadModule(b).then(function(a) {
                this.showInModal(a, {
                    mask_type: "dark",
                    can_dismiss: !1
                }), this.listen(a, P.CONST.EVENT_CONFIRM, function() {
                    this._endMandatoryFlow()
                }), P.ExperienceManager.instance().completePlacedExperience(P.Experiences.Placement.WEB_HOME_TAKEOVER, P.Experiences.Experience.WEB_MANDATORY_AUTOBAHN), P.trackRegisterAction("autobahn_force_exit")
            }.bind(this))
        }.bind(this), NEW_USER_FORCE_EXIT_TIME), this.autoEnableExit = window.setTimeout(function() {
            this._enableExitTour()
        }.bind(this), NEW_USER_EXIT_TOUR_TIME), a && a()
    },
    _onRepinned: function() {
        this._enableExitTour(), this.pubsubUnsubscribe(P.CONST.PUBSUB_CHANNEL_CURRENT_USER, P.CONST.PUBSUB_TOPIC_PIN_CREATED), P.trackRegisterAction("autobahn_repinned")
    },
    setInterest: function(a, b) {
        a = $.trim(a), b ? (this.$searchField.val(""), this.$searchField.attr("placeholder", a)) : (this.$searchField.val(a), this._onRequestItemSuccess(), P.trackRegisterAction("autobahn_user_search")), this.$searchField.placeholder();
        var c = this.$searchField.val(), d = this.$searchSuggestions.children("li");
        _.each(d, function(b) {
            var d = $(b), e = d.text().toLowerCase() === a.toLowerCase(), f = d.text().toLowerCase() === c.toLowerCase();
            d.toggleClass("highlight", f || e)
        }), this.interestGrid.resource.options.interest = a, this.renderGrid()
    },
    renderGrid: _.debounce(function() {
        this.interestGrid.render()
    }, 250),
    stopInterval: function() {
        clearInterval(this.interval)
    },
    onRemovedFromDom: function() {
        this._closeTooltip(), this.stopInterval()
    },
    _closeTooltip: function() {
        var a = this.$(NEW_USER_SELECTOR_TOOLTIP_CLOSER_LOOK);
        a && (a.remove(), this.removeListener(this._onScrollHandle))
    },
    _nextQuestion: function() {
        this.currentQuestion++;
        var a = this.extraData.search_suggestions.length;
        this.currentQuestion === a && (this.currentQuestion = 0), this._refreshQuestion()
    },
    _previousQuestion: function() {
        this.currentQuestion--;
        var a = this.extraData.search_suggestions.length;
        this.currentQuestion < 0 && (this.currentQuestion = a - 1), this._refreshQuestion()
    },
    _refreshQuestion: function() {
        var a = this.extraData.search_suggestions, b = a[this.currentQuestion];
        if (b) {
            var c = b.suggestions[0], d = _.template(TEMPLATE_SUGGESTIONS, b);
            this.$searchTitle.html(b.title), this.$searchSuggestions.html(d), this.setInterest(c, !0)
        }
    },
    _search: function() {
        this.setInterest(this.$searchField.val(), !1)
    },
    _onButtonClick: function(a) {
        this.stopInterval();
        var b = a.target.id;
        "next" === b ? this._nextQuestion() : "prev" === b ? this._previousQuestion() : "search" === b ? this._search() : ("close" === b || "nextButton" === b) && this._endMandatoryFlow()
    },
    _endMandatoryFlow: function() {
        if (clearTimeout(this.forceExit), clearTimeout(this.autoEnableExit), P.ExperienceManager.instance().isPlacedExperience(P.Experiences.Placement.WEB_HOME_TAKEOVER, P.Experiences.Experience.WEB_MANDATORY_AUTOBAHN)) {
            var a = P.ExperienceManager.instance().completePlacedExperience(P.Experiences.Placement.WEB_HOME_TAKEOVER, P.Experiences.Experience.WEB_MANDATORY_AUTOBAHN);
            a.fin(function() {
                this.triggerEvent(P.CONST.EVENT_NEXT, null, !0), this._endMandatoryFlowRender()
            }.bind(this))
        } else 
            this.triggerEvent(P.CONST.EVENT_NEXT, null, !0), this._endMandatoryFlowRender()
    },
    _endMandatoryFlowRender: function() {
        this.header && this.header.render(), this.siteWideNags && this.siteWideNags.render()
    },
    _onRequestItemSuccess: function() {
        this._requestedItems === MIN_REQUESTED_ITEMS && (this._enableExitTour(), P.trackRegisterAction("autobahn_search_done")), this._requestedItems++
    },
    _enableExitTour: function() {
        this.endTourButton.enable()
    },
    _onScroll: function() {
        this.stopInterval();
        var a = this.$(".newUserStepHeader"), b = this.$(NEW_USER_SELECTOR_TOOLTIP_CLOSER_LOOK), c = a.offset().top + a.height();
        if (b) {
            var d = c + MIN_BOTTOM_GUTTER;
            b.toggleClass(NEW_USER_CLASS_VISIBLE, $(window).scrollTop() > d)
        }
    },
    _onSubmit: function(a) {
        a.preventDefault(), this._search()
    },
    _onSuggestionClick: function(a) {
        this.stopInterval(), this.setInterest($(a.target).text(), !1)
    }
}), P.modules.tutorials.NewUserPinSearch.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.tutorials.NewUserPinSource"), goog.require("P.Module"), goog.require("P.modules.tutorials.NewUserStepBase"), P.modules.tutorials.NewUserPinSource = P.modules.tutorials.NewUserStepBase.extend({}), P.modules.tutorials.NewUserPinSource.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.tutorials.NewUserPinUsage"), goog.require("P.Module"), goog.require("P.modules.tutorials.NewUserStepBase"), P.modules.tutorials.NewUserPinUsage = P.modules.tutorials.NewUserStepBase.extend({}), P.modules.tutorials.NewUserPinUsage.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.AppBase"), goog.require("P.HistoryManager"), goog.require("P.interfaces.HistoryManagerProvider"), goog.require("P.Module"), goog.require("P.modules.PinCreate"), goog.require("P.util");
var LOADING_DELAY = 500, NEXT_ACTION = {
    REPLACE: 0,
    REPLACE_TOP: 1,
    APPEND: 2,
    CLOSE: 3,
    IGNORE: 4
};
P.modules.AppBase = P.Module.extend({
    MAIN_MODULE_ID: "mainModule",
    CLOSEUP_NAME: "Closeup",
    onCreated: function() {
        P.currentUser.isAuthenticated() || P.currentUser.attemptLogin(), this.historyManager = new P.HistoryManager, this.backgroundModule = null, this.canUpdatePageInfo=!1, P.pubsub.subscribe(P.CONST.PUBSUB_CHANNEL_SITE, P.CONST.PUBSUB_TOPIC_WINDOW_LOCATION_CHANGE, function() {
            this.midNavigate=!1
        }.bind(this));
        var a = {};
        a[P.CONST.PUBSUB_TOPIC_KLP_BAR_HIDDEN] = this.removeHasKLPBarClass, a[P.CONST.PUBSUB_TOPIC_KLP_BAR_SHOWN] = this.addHasKLPBarClass, this.pubsubSubscribe(P.CONST.PUBSUB_CHANNEL_KLP_BAR, a)
    },
    onAddedToDom: function() {
        var a = P.router.get();
        a.start(), P.AppVersion.setup(P.CONTEXT.app_version), this.childListen(P.CONST.EVENT_NAVIGATE, this.onChildNavigate), this.childListen(P.CONST.EVENT_SCROLL_TO_ELEMENT, this._onChildScrollToElement), this.childListen(P.CONST.EVENT_SCROLL_TO_TOP, this.onChildScrollToTop), this.listen(a, P.CONST.EVENT_ROUTE_MATCHED, this.onRouteMatched), this.listen(a, P.CONST.EVENT_ROUTE_NO_MATCH, this.onRouteNoMatch), this.childListen(P.CONST.EVENT_REQUIRES_AUTHENTICATION, this.onChildEventRequiresAuthentication);
        var b = {};
        b[P.CONST.PUBSUB_TOPIC_PAGE_INFO] = this.onPageInfoChange, this.pubsubSubscribe(P.CONST.PUBSUB_CHANNEL_SITE, b)
    },
    onChildAdded: function() {
        this._adjustScrollToTopPositionIfNeeded()
    },
    onChildEventRequiresAuthentication: function(a) {
        var b = a.data.authRedirectUrl;
        b && this.navigate(a.data.authRedirectUrl)
    },
    _onChildScrollToElement: function(a) {
        var b = a.data, c = b.$el, d = {
            scrollOffset: b.scrollOffset,
            callback: b.callback
        };
        this._scrollToElement(c, d)
    },
    onChildScrollToTop: function() {
        var a = this._getCurrentMainModule(), b = a.getScrollableElement();
        P.scrollToTop({
            $scroller: b
        })
    },
    _getCurrentMainModule: function() {
        var a = this.getChildById(this.MAIN_MODULE_ID);
        return a ? a : this.children[this.children.length - 1]
    },
    _scrollToElement: function(a, b) {
        var c = this._getCurrentMainModule(), d = P.normalizeScroller(c.getScrollableElement()), e = a.positionAncestor(d).top, f = 0 === b.scrollOffset ? 0: b.scrollOffset || P.CONST.SCROLL_TO_ELEMENT_OFFSET, g = {
            newScrollOffset: Math.max(e - f, 0),
            $scroller: d,
            callback: b.callback
        };
        P.scrollToTop(g)
    },
    setUpContextLogging: function() {
        var a = this._getCurrentMainModule();
        if (!a.getHasError()) {
            var b = window.location.pathname + window.location.search, c = P.router.get().resolve(b);
            if (c) {
                var d = c.extraContent.log;
                if (d) {
                    var e = P.ContextEvent.fromPlainObject(d);
                    e.setEventType(P.ContextLogging.EventType.VIEW), e.setRequestIdentifier(P.PAGE_LOAD_REQUEST_IDENTIFIER);
                    var f = a.getLoggingObjectIdStr();
                    f && e.setObjectIdStr(f), P.ContextLogger.getInstance().addEvent(e)
                }
            } else 
                this.log.error("Router couldn't resolve url for context logging", {
                    url: b
                })
        }
    },
    onRemovedFromDom: function() {
        this._removeListeners()
    },
    onRouteMatched: function(a) {
        if (P.AppVersion.isNewVersionAvailable() && this.midNavigate && (P.AppVersion.isNewVersionRequired() || "Closeup" !== a.module))
            return this._setVersionRedirectCookie(), void window.location.reload();
        this.log.debug("onRoute", a), P.trackGAPageview(a.module);
        var b, c = a.module, d = a.options, e = a.resource;
        this.extraData && this.extraData.userAgent && a.extraContent && (b = P.DeepLink.getLinkForUserAgent(this.extraData.userAgent, a.extraContent)), P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_SITE, P.CONST.PUBSUB_TOPIC_DEEP_LINK, b);
        var f = "https:" === window.location.protocol, g = a.extraContent.https;
        if (g = P.currentUser.isAuthenticated() ? g || P.experiments.instance.inExperimentGroupsActiveOrTriggerable("https_auth", ["full_https", "full_https2", "rollout", "rollout2", "employees"]) : !0, a.extraContent.require_explicit_login && P.currentUser.get("autologin"))
            return void P.navigate(P.getLoginUrl());
        if (a.extraContent.require_authentication&&!P.currentUser.isAuthenticated())
            return void P.navigate(P.getRegisterUrl({
            prev: a.navigateData.fromHistoryUid
        }));
        if (a.extraContent.require_sterling_access&&!P.currentUser.get("has_sterling_access"))
            return void P.navigate("/");
        if (a.extraContent.require_business_user&&!P.currentUser.get("is_partner"))
            return void P.navigate("/");
        if (g&&!f)
            return void window.location.replace(window.location.href.replace(/http:\/\//, "https://"));
        if (!g && f)
            return void window.location.replace(window.location.href.replace(/https:\/\//, "http://"));
        this.removeAllModals();
        var h = this._getCurrentMainModule();
        a.navigateData.currentModule = h, P.loadModuleConstructor(c).then(function(b) {
            var c = this.historyManager.getModule(b, a.navigateData);
            if (!this._getCurrentMainModule())
                return void window.location.reload();
            var f = null, g = a.extraContent.log;
            g ? (g.event_type = P.ContextLogging.EventType.VIEW, f = P.ContextEvent.fromPlainObject(g)) : P.ContextLogger.getInstance().clearContext(), this.updateMainModule(c, d, e, a.navigateData, f)
        }.bind(this));
        var i = this.historyManager.getPageInfo();
        i && this.setPageInfo(i), this.canUpdatePageInfo=!i
    },
    onRouteNoMatch: function() {
        window.location.reload()
    },
    onPageInfoChange: function(a, b, c) {
        this.canUpdatePageInfo && (this.historyManager.setPageInfo(c), this.setPageInfo(c), this.canUpdatePageInfo=!1)
    },
    setPageInfo: function(a) {
        a.title && $(document).attr("title", a.title), $("head meta[data-app]").remove();
        var b = [];
        _.each(a.meta, function(a, c) {
            b.push($("<meta>").prop({
                name: c,
                property: c,
                content: a,
                "data-app": 1
            }))
        }), $("head").append(b)
    },
    startModuleTransition: function(a) {
        a.fadeOut(), clearTimeout(this._loaderTimeout), this._loaderTimeout = P.setTimeout(function() {
            this.loadingShown=!0, this.showLoading()
        }.bind(this), LOADING_DELAY, "App loader")
    },
    stopModuleTransition: function(a) {
        clearTimeout(this._loaderTimeout), a.fadeIn(), this.loadingShown && (this.hideLoading(), this.loadingShown=!1)
    },
    updateMainModule: function(a, b, c, d, e) {
        var f = a.module, g = a.backgroundModule, h = this._getCurrentMainModule();
        h.saveExtraState(!0), this.log.debug("Current:", h.className, "New:", f.className);
        var i = this._getNextAction(h, f, g, d), j = i === NEXT_ACTION.REPLACE && h.className !== this.CLOSEUP_NAME && f.className !== this.CLOSEUP_NAME;
        j && this.startModuleTransition(h), f.clearFades();
        var k = this._getCanClose(h, a, i);
        null !== k && (b.can_close = k);
        var l = null === k || k===!1;
        if (P.Body.setScrolling(l), e) {
            var m = function(a, b, c) {
                var d = c;
                e.setRequestIdentifier(d), this.pubsubUnsubscribe(P.CONST.PUBSUB_CHANNEL_REQUEST)
            }.bind(this), n = {};
            n[P.CONST.PUBSUB_TOPIC_REQUEST_IDENTIFIER] = m, this.pubsubSubscribe(P.CONST.PUBSUB_CHANNEL_REQUEST, n)
        }
        var o = function() {
            if (this.midNavigate=!1, j && this.stopModuleTransition(f), f.showModule(), this.updateScrollWatchers(f), e&&!f.getHasError()) {
                var a = f.getLoggingObjectIdStr();
                a && e.setObjectIdStr(a), P.ContextLogger.getInstance().addEvent(e), P.pubsub.clearChannel(P.CONST.PUBSUB_CHANNEL_REQUEST)
            }
            P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_SITE, P.CONST.PUBSUB_TOPIC_NAVIGATE_COMPLETE)
        }.bind(this);
        f.errorStrategy = P.CONST.ErrorStrategy.SHOW, f.setAsMainModule(b, c, d).then(function() {
            f.hideModule(), this._performNextAction(i, h, a, d), P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_MAIN_MODULE, P.CONST.PUBSUB_TOPIC_MAIN_MODULE_NEW, this._getCurrentMainModule());
            var b = P.CONTEXT.breadcrumbs || f.getBreadcrumbs();
            f.setBreadcrumbs(b), P.CONTEXT.breadcrumbs = null, P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_BREADCRUMBS, P.CONST.PUBSUB_TOPIC_BREADCRUMB_UPDATE, b), this._adjustScrollToTopPositionIfNeeded(), this._scrollMainModuleIfNeeded()
        }.bind(this), function() {
            this.historyManager.cancelNavigation()
        }.bind(this)).fin(function() {
            if (o(), !P.currentUser.isAuthenticated()) {
                P.experiments.instance.activateAndPersistExperiment("more_signup_modals");
                var a = P.experiments.instance.inExperimentGroupsActiveOrTriggerable("more_signup_modals", ["enabled"]);
                (a || P.signupModalManager.shouldShowSignupModal(f)) && P.signupModalManager.showContextualSignupModal(f)
            }
        })
    },
    _getNextAction: function(a, b, c, d) {
        var e = null;
        return e = a === b ? NEXT_ACTION.IGNORE : b.className !== this.CLOSEUP_NAME ? a.className === this.CLOSEUP_NAME && a.options.can_close && this.backgroundModule && b === this.backgroundModule ? NEXT_ACTION.CLOSE : NEXT_ACTION.REPLACE : d.fromNavigate ? a.className === this.CLOSEUP_NAME ? a.options.can_close ? NEXT_ACTION.REPLACE_TOP : NEXT_ACTION.REPLACE : NEXT_ACTION.APPEND : a === c && b.className === this.CLOSEUP_NAME ? NEXT_ACTION.APPEND : NEXT_ACTION.REPLACE
    },
    _getCanClose: function(a, b, c) {
        var d = b.module, e = b.backgroundModule;
        if (d.className !== this.CLOSEUP_NAME)
            return null;
        var f = a.className === this.CLOSEUP_NAME, g=!!a.options.can_close;
        switch (c) {
        case NEXT_ACTION.REPLACE:
            return !!e;
        case NEXT_ACTION.REPLACE_TOP:
            return g;
        case NEXT_ACTION.APPEND:
            return !f || g;
        case NEXT_ACTION.IGNORE:
            return g
        }
        return null
    },
    _performNextAction: function(a, b, c, d) {
        var e = c.module, f = c.backgroundModule, g = e.$el, h = a !== NEXT_ACTION.IGNORE, i = this.getChildById("header"), j = 0;
        if (i && (j = i.getHeight()), a === NEXT_ACTION.IGNORE)
            this.backgroundModule && this.historyManager.updateBackgroundModule(this.backgroundModule, d);
        else if (a === NEXT_ACTION.CLOSE)
            this.backgroundModule = null, b.detachElement(), this.removeChildId(b);
        else if (a === NEXT_ACTION.REPLACE) {
            this.backgroundModule !== f && (this.backgroundModule && (this.backgroundModule.detachElement(), this.backgroundModule = null), f && (f !== b && (f.appendToElement(this.$(".mainContainer")), this.addChild(f)), this.backgroundModule = f)), b !== f && (this.removeChildId(b), b.detachElement()), this.removeChildId(b), g.css("min-height", P.Viewport.height - j);
            var k = $(this.backgroundModule ? ".appendedContainer" : ".mainContainer");
            k.append(g), this.addChild(e)
        } else 
            a === NEXT_ACTION.REPLACE_TOP ? (b.detachElement(), g.css("min-height", P.Viewport.height - j), $(".appendedContainer").append(g), this.addChild(e), this.historyManager.updateBackgroundModule(this.backgroundModule, d)) : a === NEXT_ACTION.APPEND && (this.backgroundModule = b, this.removeChildId(b), g.css("min-height", P.Viewport.height - j), $(".appendedContainer").append(g), this.addChild(e), this.historyManager.updateBackgroundModule(this.backgroundModule, d));
        (h || this._forceRefreshRequested(d)) && (this.setChildId(e, this.MAIN_MODULE_ID), e.restoreExtraState(!0))
    },
    _setVersionRedirectCookie: function() {
        Cookie.set(P.CONST.COOKIE_VERSION_REFRESH, P.AppVersion.currentVersion, 1)
    },
    onContentReady: function() {
        this.setUpContextLogging();
        var a = this._getCurrentMainModule(), b = P.currentUser.get("username");
        P.trackGAPageview(a.className), _.defer(this._startTutorials.bind(this)), this.setChildId(a, this.MAIN_MODULE_ID), this.historyManager.start(a), this.historyManager.setPageInfo(P.PAGE_INFO), this.setPageInfo(P.PAGE_INFO), this.updateScrollWatchers(a), this._setDevicePixelRatioCookie(), this._adjustScrollToTopPositionIfNeeded(), this._scrollMainModuleIfNeeded();
        var c;
        P.experiments.instance.inExperimentGroupsActiveOrTriggerable("web_pin_create", ["enabled_filter", "enabled_separator", "employees_separator", "enabled_v3", "employees_v3"]) ? c = P.resourceFactory.create("BoardPickerBoardsResource", {
            filter: "all",
            field_set_key: "board_picker"
        }) : b && (c = P.resourceFactory.create("BoardsResource", {
            username: b,
            filter: "all",
            field_set_key: "board_picker",
            sort: "board_picker",
            default_board_id: null
        })), c && P.resourceCache.instance.callGet(c);
        var d = this;
        this.childListen(P.CONST.EVENT_UNAUTH_BANNER_OPEN_IN_APP, function() {
            d.openInApp(P.CONST.EVENT_UNAUTH_BANNER_OPEN_IN_APP)
        }), this.childListen(P.CONST.EVENT_OPEN_IN_APP, this.openInApp), this.userAgent = this.extraData.userAgent, this.deepLink = "", this.userAgent === P.CONST.USER_AGENT_PLATFORM_IOS || this.userAgent === P.CONST.USER_AGENT_PLATFORM_IPAD ? (this.deepLink = P.CONTEXT.ios_deep_link, P.DeepLink.setup(this.deepLink, "pinterest://", this.extraData.deepLinkTracking)) : this.userAgent === P.CONST.USER_AGENT_PLATFORM_ANDROID && (this.deepLink = P.CONTEXT.android_deep_link, P.DeepLink.setup(this.deepLink, "pinterest://" + window.location.host, this.extraData.deepLinkTracking));
        var e = this.extraData.isTablet, f=!1;
        f || (this._shouldOpenInApp() ? this.openInApp(P.CONST.EVENT_COOKIE_BASED_REDIRECT_TO_APP) : this._shouldShowAppInterstitial() && this._showInterstitial(e))
    },
    _setDevicePixelRatioCookie: function() {
        var a = (window.devicePixelRatio || 1) + "";
        Cookie.set(P.CONST.COOKIE_DEVICE_PIXEL_RATIO, a)
    },
    onChildNavigate: function(a) {
        if (this.midNavigate)
            return void a.stopPropagation();
        this._adjustScrollToTopPositionIfNeeded();
        var b = a.data.url;
        if (!P.isOffsiteUrl(b) && (this.midNavigate=!0, P.AppVersion.isNewVersionRequired()))
            return this._setVersionRedirectCookie(), P.changeWindowLocation(b, !1), void a.stopPropagation();
        this.log.debug("App got navigate event from child", a.target, "for url:", b);
        var c = new P.navigateData.NavigateData;
        c.handled=!!a.data.handled, c.evt = a, this.historyManager.navigate(b, c), a.stopPropagation()
    },
    _adjustScrollToTopPositionIfNeeded: function() {},
    _scrollMainModuleIfNeeded: P.NOOP,
    _startTutorials: function() {
        P.TutorialManager.instance().resumeTutorial()
    },
    isTutorialActive: function() {
        return P.TutorialManager.instance().isTutorialActive()
    },
    updateScrollWatchers: function() {},
    removeAllModals: function() {},
    addHasKLPBarClass: function() {
        this.$(".appContent").addClass("hasKLPBar"), this.$(".message.messageUnauth").addClass("hasKLPBar")
    },
    removeHasKLPBarClass: function() {
        this.$(".appContent").removeClass("hasKLPBar"), this.$(".message.messageUnauth").removeClass("hasKLPBar")
    },
    _shouldOpenInApp: function() {
        return this.extraData && this.extraData.came_from_email && P.experiments.instance.inExperimentGroups("email_to_mweb_redirect_to_app_store", ["enabled", "rollout"])?!0 : this.deepLink ? P.nativeApp.getOpenInAppPreference() : !1
    },
    openInApp: function(a) {
        var b;
        b = a === P.CONST.EVENT_COOKIE_BASED_REDIRECT_TO_APP ? this.extraData.redirectYozioLink : a === P.CONST.EVENT_INTERSTITIAL_OPEN_IN_APP ? this.extraData.interstitialYozioLink : a === P.CONST.EVENT_UNAUTH_BANNER_OPEN_IN_APP ? this.extraData.unauthBannerYozioLink : this.extraData.defaultYozio, P.DeepLink.redirectToDeepLink(b, this.userAgent)
    },
    _shouldShowAppInterstitial: function() {
        return !this.deepLink || this.extraData.hideAppInterstitial?!1 : !P.nativeApp.getOpenInAppPreference()&&!P.nativeApp.getStayInBrowserPreference()
    },
    _showInterstitial: function(a) {
        var b, c = this;
        b = a ? {
            name: "TabletInterstitial"
        } : {
            name: "AppInterstitial"
        }, P.loadModule(b).then(function(a) {
            P.getModalManager().showInModal(a, {
                can_dismiss: !1,
                full_screen: !0,
                modal_style: "tablet"
            }), this.listen(a, P.CONST.EVENT_INTERSTITIAL_OPEN_IN_APP, function() {
                c.openInApp(P.CONST.EVENT_INTERSTITIAL_OPEN_IN_APP)
            })
        }.bind(this))
    }
}), P.modules.AppBase.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.AuxiliarySiteHeaderButtonDropdown"), goog.require("P.Module"), goog.require("P.modules.DropdownButton"), P.modules.AuxiliarySiteHeaderButtonDropdown = P.modules.DropdownButton.extend({
    onContentReady: function() {
        P.modules.DropdownButton.prototype.onContentReady.apply(this, arguments);
        var a = this.$el.width();
        $(".headerDropdown").width(a)
    }
}), P.modules.AuxiliarySiteHeaderButtonDropdown.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.Board"), goog.require("P.Module"), goog.require("P.modules.Dropdown");
var CLASS_NO_SHADOW = "noShadow", VIEW_TYPE_FOLLOW = "follow_view", VIEW_TYPE_BOARD_PINS_GRID = "boardPinsGrid", VIEW_TYPE_BOARD_COVER_IMAGE = "boardCoverImage";
P.modules.Board = P.Module.extend({
    events: {
        "click .dismiss": "onDismissClick"
    },
    getOwnedScrollables: function() {
        return this.$(".pinGridWrapper")
    },
    onContentReady: function() {
        var a = this.getId();
        if (a) {
            var b = {};
            b[P.CONST.PUBSUB_TOPIC_BOARD_COVER_UPDATED] = this.onBoardCoverUpdated, b[P.CONST.PUBSUB_TOPIC_BOARD_DELETED] = this.onBoardDeleted, b[P.CONST.PUBSUB_TOPIC_BOARD_UPDATED] = this.onBoardUpdated, b[P.CONST.PUBSUB_TOPIC_PIN_DELETED] = this.onPinDeleted, this.pubsubSubscribe(a, b)
        }
        if (this.options.view_type === VIEW_TYPE_BOARD_PINS_GRID) {
            var c = this.getChildById("pinGrid");
            this.listen(c, P.CONST.EVENT_CONTENT_CHANGED, function() {
                var a = this.$el.css("max-height") || "0";
                a = a.replace(/[^0-9]/g, ""), this.$el.outerHeight() < a && this.$el.addClass(CLASS_NO_SHADOW)
            })
        }
        this.options.view_type === VIEW_TYPE_FOLLOW && this.initHoverListeners()
    },
    onDismissClick: function() {
        this.dismissed=!0, this.triggerEvent(P.CONST.EVENT_DISMISS, null, !0)
    },
    onBoardHoverEnter: function() {
        this.$el.isHovering() && this._dropdown.show()
    },
    onBoardHoverExit: function() {
        this._dropdown.isHovering() || this._dropdown.hide()
    },
    onPinDeleted: function() {
        this.options.view_type === VIEW_TYPE_BOARD_COVER_IMAGE && this.onBoardUpdated()
    },
    onBoardCoverUpdated: function(a, b, c) {
        this.setBoardCover(c)
    },
    positionBoardPinsGrid: function() {
        var a = this.getChildById("pinGrid");
        a.$(".activeItem").focus()
    },
    toggleFollow: function() {
        this.getChildByModuleName("BoardFollowButton").toggleFollow()
    },
    initHoverListeners: function() {
        !this._hoverIntent && this.options.use_flyout && (this._hoverIntent = new P.HoverIntent(this.$el, {
            enterDelay: 500,
            exitDelay: 200
        }), this.listen(this, P.CONST.EVENT_NAVIGATE, this.onBoardHoverExit), this.listen(this._hoverIntent, P.CONST.EVENT_HOVERINTENT_ENTER_COMPLETE, this.onBoardHoverEnter), this.listen(this._hoverIntent, P.CONST.EVENT_HOVERINTENT_OUT_COMPLETE, this.onBoardHoverExit), this.isClickButton = function() {
            return !1
        }, this._dropdown = new P.modules.Dropdown({
            options: {
                anchor: this.$el,
                class_name: "followViewHover underneathHeader",
                position_point: "RIGHT_TOP",
                module: {
                    name: "Board",
                    options: {
                        view_type: "boardPinsGrid",
                        scrollable: !0,
                        prevent_default_scroll: !0,
                        board_follow_button_options: {
                            board_id: this.resource.options.board_id
                        }
                    }, resource : {
                        name : "BoardResource", options : {
                            board_id : this.resource.options.board_id
                        }
                    }
                }
            }
        }), this.appendChild(this._dropdown), this.$el.initHovering(), this._dropdown.initHovering())
    },
    setBoardCover: function(a) {
        var b = a.url, c = a.crop_x, d = a.crop_y, e = a.nativeHeight, f = a.nativeWidth, g = a.scale, h = this.$(".boardCoverWrapper img");
        h.attr("src", b).css({
            height: e * g,
            left: - c,
            "max-width": "none",
            position: "absolute",
            top: - d,
            width: f * g
        });
        var i = this.getChildById("boardCoverEditButton"), j = i.options.submodule.options;
        j.board_cover_edit_options.cover_pin_id = a.pin_id
    },
    disabledButtons: [],
    disable: function() {
        this.$el.find(".hoverMask").addClass("notNavigatable"), this.disabledButtons = [], _.each(this.getChildrenByModuleName("ShowModalButton"), function(a) {
            a.isDisabled() || (a.disable(), this.disabledButtons.push(a))
        }.bind(this))
    },
    enable: function() {
        this.$el.find(".hoverMask").removeClass("notNavigatable"), _.each(this.disabledButtons, function(a) {
            a.enable()
        })
    },
    setFollowButtonState: function(a) {
        var b = this.getChildByModuleName("BoardFollowButton");
        b && b.setState(a)
    },
    getId: function() {
        return this.data && this.data.id
    },
    onBoardDeleted: function() {
        this.triggerEvent(P.CONST.EVENT_BOARD_DELETED, this, !0), this.destroy()
    },
    onBoardUpdated: function() {
        this.render()
    },
    getLoggingObjectIdStr: function() {
        return this.getId()
    }
}), P.modules.Board.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/Board/Board.nunjucks"), goog.provide("P.modules.BoardEditBase"), goog.require("P.Module"), goog.require("P.modules.BoardCollaboratorInvitesBase"), goog.require("P.modules.BoardInvites"), P.modules.BoardEditBase = P.modules.BoardCollaboratorInvitesBase.extend({
    onCreated: function() {
        P.modules.BoardCollaboratorInvitesBase.prototype.onCreated.call(this), this.childListen(P.CONST.EVENT_BUTTON_CLICK, this.onButtonClick)
    },
    setupForm: function() {
        this.$form = this.$("form");
        var a = {}, b = this.extraData;
        if (this._isOwner()) {
            var c = b.errorMessages.name.required;
            a = {
                name: [P.Validator.Required({
                    message: c
                }), P.Validator.Length({
                    max: P.CONST.MAX_CHARS_FOR_BOARD_TITLE
                })],
                description: [P.Validator.Length({
                    max: P.CONST.MAX_CHARS_FOR_BOARD_PIN_DESCRIPTION
                })]
            }
        }
        this.form = new P.Form(this.$form, a), this.listen(this.form, P.CONST.EVENT_SUBMIT_VALIDATED, this.onSubmitValidated)
    },
    onContentReady: function() {
        this.setupForm()
    },
    onButtonClick: function(a) {
        var b = a.target;
        if (b) {
            var c = this._getGACategory();
            "submitButton" === b.id ? P.trackGAEvent(c, P.CONST.GA_ACTION_CLICK_SUBMIT) : "cancelButton" === b.id && P.trackGAEvent(c, P.CONST.GA_ACTION_CLICK_CANCEL)
        }
    },
    onSubmitValidated: function(a) {
        a.errors[0] || this.saveBoard()
    },
    getBoardId: function() {
        return this.data && this.data.id
    },
    _getGACategory: function() {
        return this.getBoardId() ? "board_edit" : "board_create"
    },
    isMakePublic: function(a) {
        return this.data && "secret" === this.data.privacy && "public" === a
    },
    getFieldValues: function() {
        var a = this.$("form"), b = {}, c = a.find("[name=name]");
        c.length && (b.name = c.val());
        var d = this.getChildById("boardCategory");
        d && (b.category = d.getValue());
        var e = a.find("[name=description]");
        e.length && (b.description = e.val());
        var f = this.getChildById("secretCheckbox");
        f && (b.privacy = f.isChecked() ? "secret" : "public");
        var g = this.getChildById("emailCheckbox");
        g && (b.collab_board_email = g.isChecked());
        var h = this.getChildById("placeLayoutCheckbox");
        return h && (b.layout = h.isChecked() ? "places" : "default"), this.extraData && this.extraData.isProtected && (b["protected"] = 1), b
    },
    _isOwner: function() {
        return this.extraData && this.extraData.isOwner
    },
    saveBoard: function() {
        var a = this.getChildById("submitButton");
        a.showLoading();
        var b = this.getFieldValues(), c = this.getBoardId(), d = _.clone(b);
        c && (d.board_id = c);
        var e;
        if (this._isOwner()) {
            e = P.resourceFactory.create("BoardResource", d);
            var f = {
                showError: !1
            }, g = c ? e.callUpdate(f): e.callCreate(f);
            g.then(this.onSaveSuccess.bind(this), this.onSaveError.bind(this)).fin(function() {
                a.hideLoading()
            })
        } else 
            e = P.resourceFactory.create("BoardSettingsResource", d), e.callUpdate().fin(function() {
                a.hideLoading(), this.destroy()
            }.bind(this))
    },
    onSaveError: function(a) {
        P.trackGAEvent(this._getGACategory(), P.CONST.GA_ACTION_ERROR);
        var b = this.$(".formFooter"), c = this.$(".inlineError");
        c.length ? c.empty() : c = $("<p></p>").addClass("inlineError"), c.text(a.message), c.insertBefore(b)
    },
    _isNewBoard: function() {
        var a = this.getBoardId();
        return !a
    },
    onSaveSuccess: function(a) {
        var b, c, d, e = this.getChildById("boardInvites");
        e && (b = e.getSelectedInvitees("pinner"), c = e.getSelectedInvitees("email"), d = e.getSelectedInvitees("facebook"));
        var f = this.getBoardId(), g = this._isNewBoard();
        P.trackGAEvent(this._getGACategory(), P.CONST.GA_ACTION_SUCCESS);
        var h = a.resource_response.data;
        f ? (P.pubsub.publish(f, P.CONST.PUBSUB_TOPIC_BOARD_UPDATED, h), this.isMakePublic(h.privacy) && P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_CURRENT_USER, P.CONST.PUBSUB_TOPIC_BOARD_UPDATED, P.CONST.PUBSUB_MESSAGE_BOARD_SET_PUBLIC)) : (P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_CURRENT_USER, P.CONST.PUBSUB_TOPIC_BOARD_CREATED, h), this.triggerEvent(P.CONST.EVENT_BOARD_CREATED, h, !0)), g && (b && this.inviteUsers(h.id, b), c && this.inviteEmail(h.id, c), d && d.length > 0 && this.inviteFacebook(h.id, d));
        var i = "navigate_on_success"in this.options ? this.options.navigate_on_success: g ||!this.isInModal();
        i ? this.navigate(h.url) : this.destroy()
    },
    displayFacebookDialog: function(a, b, c) {
        P.FacebookDialog.open({
            type: "send",
            path: b,
            to: a,
            callback: c
        })
    },
    inviteUsers: function(a, b) {
        var c = {
            board_id: a,
            invited_user_ids: b
        };
        if (b && b.length > 0) {
            var d = P.resourceFactory.create("BoardInviteResource", c);
            d.callCreate()
        }
    },
    inviteEmail: function(a, b) {
        var c = {
            board_id: a,
            emails: b
        };
        if (b && b.length > 0) {
            var d = P.resourceFactory.create("BoardEmailInviteResource", c);
            d.callCreate()
        }
    },
    inviteFacebook: function(a, b) {
        var c = P.resourceFactory.create("BoardFacebookInviteResource", {
            board_id: a
        });
        c.callGet().then(function(c) {
            var d = c.resource_response.data;
            this._inviteFacebookRecursive(a, b, d.invite_code, d.url)
        }.bind(this))
    },
    _inviteFacebookRecursive: function(a, b, c, d) {
        if (b.length > 0) {
            var e = b.pop();
            this.displayFacebookDialog(e, d, function(e) {
                if (this._inviteFacebookRecursive(a, b, c, d), e && e.success) {
                    var f = P.resourceFactory.create("BoardFacebookInviteResource", {
                        board_id: a,
                        invite_code: c
                    });
                    f.callUpdate()
                }
            }.bind(this))
        }
    }
}), P.modules.BoardEditBase.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.BoardFollowButton"), goog.require("P.Module"), goog.require("P.modules.ui.FollowButton"), P.modules.BoardFollowButton = P.modules.ui.FollowButton.extend({
    getResourceId: function() {
        return this.options.board_id
    },
    getFollowResource: function() {
        return P.resourceFactory.create("BoardFollowResource", {
            board_id: this.getResourceId()
        })
    },
    getFollowClass: function() {
        return this.options.follow_class
    },
    getContextualResource: function() {
        return P.resourceFactory.create("BoardResource", {
            board_id: this.getResourceId(),
            field_set_key: "grid_item"
        })
    },
    onContentReady: function() {
        if (this.options.user_id) {
            var a = {};
            a[P.CONST.PUBSUB_TOPIC_USER_FOLLOW] = this.onFollowUser, a[P.CONST.PUBSUB_TOPIC_USER_UNFOLLOW] = this.onUnfollowUser, this.pubsubSubscribe(this.options.user_id, a)
        }
        var b = {};
        b[P.CONST.PUBSUB_TOPIC_USER_FOLLOW] = this._onFollow, b[P.CONST.PUBSUB_TOPIC_USER_UNFOLLOW] = this._onUnfollow, this.pubsubSubscribe(this.getResourceId(), b), this.showMemo()
    },
    _onFollow: function() {
        var a = {
            board_id: this.getResourceId()
        };
        this.triggerEvent(P.CONST.EVENT_BOARD_FOLLOW, a, !0)
    },
    _onUnfollow: function() {
        var a = {
            board_id: this.getResourceId()
        };
        this.triggerEvent(P.CONST.EVENT_BOARD_UNFOLLOW, a, !0), P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_CURRENT_USER, P.CONST.PUBSUB_TOPIC_BOARD_UNFOLLOW, !0)
    },
    onFollowUser: function() {
        this.setState(!0)
    },
    onUnfollowUser: function() {
        this.setState(!1)
    }
}), P.modules.BoardFollowButton.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/BoardFollowButton/BoardFollowButton.nunjucks"), goog.provide("P.modules.Conversation"), goog.require("P.Module"), goog.require("P.modules.Dropdown"), goog.require("P.modules.ConversationHead"), goog.require("P.modules.ConversationPopup"), P.modules.Conversation = P.Module.extend({
    onCreated: function() {
        this.childListen(P.CONST.EVENT_BUTTON_CLICK, this.onButtonClick), this.childListen(P.CONST.EVENT_CONVERSATION_HEAD_READY, this.onConversationHeadReady)
    },
    onEscape: function() {
        P.getConversationsManager().closeConversation(this)
    },
    onContentReady: function() {
        this._attachPopup()
    },
    onConversationHeadReady: function(a) {
        var b = a.target;
        _.contains(this.children, b) && (this._headClickListener || (this._headClickListener = this.listen(b, P.CONST.EVENT_CONVERSATION_HEAD_CLICKED, this.onConversationHeadClick)), b.getContent().droppable({
            activeClass: "ui-state-highlight",
            tolerance: "pointer",
            over: function(a, b) {
                $(b.helper).transition({
                    scale: .24
                }, 230, "ease").transition({
                    scale: .25,
                    duration: 20
                }), $(this).transition({
                    scale: 1.3,
                    duration: 150
                }).transition({
                    scale: 1.2,
                    duration: 100
                })
            },
            out: function(a, b) {
                $(b.helper).transition({
                    scale: 1,
                    duration: 250
                }), $(this).transition({
                    scale: 1,
                    duration: 250
                })
            },
            drop: function(a, b) {
                var c = this.getConversationPopup(), d = P.getConversationsManager().getDraggedObject();
                c.sendMessage(null, d), P.getConversationsManager().openConversation(this), $(b.helper).transition({
                    scale: 1,
                    duration: 0
                })
            }.bind(this)
        }))
    },
    onConversationHeadClick: function() {
        if (this._popup)
            if (this._popup.isShowing()) {
                if (this.getConversationHeadBadgeCount())
                    return void this.getConversationPopup().scrollToLatest();
                    P.getConversationsManager().closeConversation(this)
            } else 
                P.getConversationsManager().openConversation(this);
            else 
                this._attachPopup()
    },
    onDropdownShow: function() {
        var a = this.getConversationPopup();
        this.focusInput();
        var b = this._popup.getContent();
        b.droppable({
            activeClass: "ui-state-highlight",
            tolerance: "pointer",
            activate: function() {
                P.getConversationsManager().getDraggedObject() && a.showDropTarget()
            },
            deactivate: function() {
                a.hideDropTarget()
            },
            over: function(c, d) {
                P.getConversationsManager().getDraggedObject() && (a.setDropTargetText(P._("Drop here to send!")), d.helper.transition({
                    scale: .5,
                    duration: 130
                }).transition({
                    scale: .53,
                    duration: 50
                }), b.addClass("ui-state-hover"))
            },
            out: function(c, d) {
                a.setDropTargetText(P._("Drag here to send!")), b.removeClass("ui-state-hover"), d.helper.animate({
                    scale: 1
                }, 150)
            },
            drop: function(b, c) {
                if (P.getConversationsManager().getDraggedObject()) {
                    var d = P.getConversationsManager().getDraggedObject();
                    a.sendMessage(null, d), $(c.helper).transition({
                        scale: 1,
                        duration: 0
                    })
                }
            }
        }), this._shouldScrollToBottom && a.scrollToLatest(), this._shouldScrollToBottom=!1
    },
    _attachPopup: function() {
        var a = {
            module: this.getPopupModuleLoadOptions(),
            anchor: this.getContent(),
            mouse_close_mode: "never",
            persist_through_navigate: !0,
            fixed: !0,
            caret_style: "lightGray lightGrayConversations",
            position_point: "RIGHT_BOTTOM",
            class_name: "aboveModal activeConversationDropdown",
            prefetch: !0
        };
        this._popup = new P.modules.Dropdown({
            options: a,
            id: "popup"
        }), this.addChild(this._popup), this._shouldScrollToBottom=!0, this.listen(this._popup, P.CONST.EVENT_DROPDOWN_SHOW, this.onDropdownShow), this.listen(this._popup, P.CONST.EVENT_ESCAPE_DROPDOWN, this.onEscape), this.childListen(P.CONST.EVENT_CONVERSATION_DECREMENT_BADGE, this.onDecrementBadge)
    },
    onDecrementBadge: function() {
        var a = this._getConversationHead(), b = this.getConversationHeadBadgeCount(), c = Math.max(b - 1, 0);
        a.setBadgeCount(c)
    },
    getPopupModuleLoadOptions: function() {
        var a = _.clone(this.options);
        return a.peek=!0, a.popup_log_component_type = P.ContextLogging.ComponentType.CONVERSATION_MESSAGES, {
            name: "ConversationPopup",
            options: a,
            data: this.data
        }
    },
    focusInput: function() {
        var a = this.getConversationPopup();
        a && a.focus()
    },
    updateConversation: function(a) {
        this.data = a;
        var b = a.unread, c = this.getConversationPopup();
        if (this.popupIsVisible()) {
            if (!c.isScrolledToBottom()) {
                var d = this.getConversationHeadBadgeCount(), e = d + b;
                c.setUnseenMessageCount(e), this.setBadgeCount(e)
            }
            c.fetchNewMessages(b)
        } else 
            this.setBadgeCount(b), c.fetchNewMessages(b, !0)
    },
    getConversationPopup: function() {
        return this._popup.getContentModule()
    },
    focus: function() {
        this.focusInput()
    },
    onDestroyed: function() {
        this.closePopup()
    },
    showPopup: function() {
        var a = this.getConversationHeadBadgeCount();
        a && P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_SITE, P.CONST.PUBSUB_TOPIC_CONVERSATION_UNREAD_COUNT_DECREASE, a), this.setBadgeCount(0), this._popup.show(), this.focusInput()
    },
    adjustPopup: function() {
        this._popup.reposition()
    },
    getConversationHeadBadgeCount: function() {
        var a = this._getConversationHead();
        return a.getBadgeCount()
    },
    closePopup: function() {
        this._popup.hide()
    },
    setBadgeCount: function(a) {
        var b = this._getConversationHead();
        b.setBadgeCount(a)
    },
    setActive: function() {
        var a = this._getConversationHead();
        a.setActive()
    },
    setInactive: function() {
        var a = this._getConversationHead();
        a.setInactive()
    },
    popupIsVisible: function() {
        return this._popup.isVisible()
    },
    _getConversationHead: function() {
        return this.getChildById("conversationHead")
    },
    onButtonClick: function(a) {
        var b = a.target;
        b.isCancelButton() && (this.closePopup(), P.getConversationsManager().scaleConversationDownAndRemove(this.getConversationId()))
    },
    getConversationId: function() {
        return this.options.id
    }
}), P.modules.Conversation.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/Conversation/Conversation.nunjucks"), goog.provide("P.modules.InterestFollowButton"), goog.require("P.Module"), goog.require("P.modules.ui.FollowButton"), P.modules.InterestFollowButton = P.modules.ui.FollowButton.extend({
    getResourceId: function() {
        return this.options.interest_id
    },
    getFollowResource: function() {
        return P.resourceFactory.create("InterestFollowResource", {
            interest_list: P.CONST.INTEREST_LIST_FAVORITED,
            interest_id: this.getResourceId()
        })
    },
    onContentReady: function() {
        this.showMemo()
    },
    onClick: function() {
        if (!this.extraData.isMobile || this.ensureAuthentication())
            if (P.currentUser.isAuthenticated()) {
                var a = this.options.followed ? this.options.unfollow_ga_category: this.options.follow_ga_category;
                a && P.trackGAEvent(a, P.CONST.GA_ACTION_CLICK), this.toggleFollow()
            } else 
                P.UserRegistration.showSignupModal(null, {
                    redirect_to_signup: !0,
                    tagline: P.string.format(P._("Want to follow {{ interest_name }}? Just sign up!"), {
                        interest_name: this.options.interest_display_name
                    }),
                    auto_follow_interest: this.getResourceId()
                })
    }
}), P.modules.InterestFollowButton.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.UserBoardsBase"), goog.require("P.Module"), goog.require("P.modules.Board");
var USER_BOARDS_BASE_SECRET_BOARD_TYPE = P.CONST.BOARD_PRIVACY_SECRET, USER_BOARDS_BASE_MODULE_ID_PUBLIC_BOARDS_GRID = "publicBoardsGrid", USER_BOARDS_BASE_MODULE_ID_SECRET_BOARDS_GRID = "secretBoardsGrid";
P.modules.UserBoardsBase = P.Module.extend({
    onContentReady: function() {
        var a = {};
        a[P.CONST.PUBSUB_TOPIC_BOARD_CREATED] = this.onBoardCreated, a[P.CONST.PUBSUB_TOPIC_BOARD_DELETED] = this.onBoardDeleted, a[P.CONST.PUBSUB_TOPIC_BOARD_UPDATED] = this.onBoardUpdated, this.extraData.isOwnProfile && (a[P.CONST.PUBSUB_TOPIC_BOARD_REMOVED_COLLABORATOR_SELF] = this.onBoardRemovedSelf), this.pubsubSubscribe(P.CONST.PUBSUB_CHANNEL_CURRENT_USER, a)
    },
    onBoardCreated: function(a, b, c) {
        var d = c, e = d.id, f = d.privacy, g = f === USER_BOARDS_BASE_SECRET_BOARD_TYPE ? USER_BOARDS_BASE_MODULE_ID_SECRET_BOARDS_GRID: USER_BOARDS_BASE_MODULE_ID_PUBLIC_BOARDS_GRID, h = this.getChildById(g), i = new P.modules.Board({
            options: {
                show_board_context: !1
            },
            resource: {
                name: "BoardResource",
                options: {
                    board_id: e
                }
            }
        });
        h.items.appendChild(i), i.render()
    },
    onBoardDeleted: function() {},
    onBoardUpdated: function(a, b, c) {
        c === P.CONST.PUBSUB_MESSAGE_BOARD_SET_PUBLIC && this.render()
    },
    onBoardRemovedSelf: function() {
        this.render()
    }
}), P.modules.UserBoardsBase.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.UserFollowButton"), goog.require("P.Module"), goog.require("P.modules.ui.FollowButton"), P.modules.UserFollowButton = P.modules.ui.FollowButton.extend({
    getResourceId: function() {
        return this.options.user_id
    },
    getFollowResource: function() {
        return P.resourceFactory.create("UserFollowResource", {
            user_id: this.getResourceId()
        })
    },
    getFollowClass: function() {
        return this.options.follow_class
    },
    onContentReady: function() {
        this.showMemo()
    },
    getContextualResource: function() {
        return P.resourceFactory.create("UserResource", {
            user_id: this.getResourceId(),
            field_set_key: "grid_item"
        })
    }
}), P.modules.UserFollowButton.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/UserFollowButton/UserFollowButton.nunjucks"), goog.provide("P.modules.tutorials.NewUserInterestPicker"), goog.require("P.Module"), goog.require("P.modules.tutorials.NewUserStepBase"), goog.require("P.tutorialManager");
var INIT_FEED_DELAY_MS = 1500;
P.modules.tutorials.NewUserInterestPicker = P.modules.tutorials.NewUserStepBase.extend({
    onAddedToDom: function() {
        this.childListen(P.CONST.EVENT_ITEM_CLICK, this.onInterestClick)
    },
    onInterestClick: function(a) {
        var b = a.data || {}, c = b.url_name;
        _.contains(this.selectedInterests, c) ? this.selectedInterests = _.without(this.selectedInterests, c) : this.selectedInterests.push(c), this._notifyProgressBar()
    },
    _notifyProgressBar: function() {
        P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_TUTORIAL, P.CONST.PUBSUB_TOPIC_TUTORIAL_MINI_NEXT, {
            type: "interest",
            total: this.selectedInterests.length
        })
    },
    initializeStep: function() {
        this.selectedInterests = []
    },
    onExit: function(a) {
        var b = this.selectedInterests.join(",");
        if (b) {
            var c = this.nuxProgress.getNextButton();
            c.showLoading();
            var d = this.nuxProgress.$skip;
            d.addClass("hidden");
            var e = function() {
                P.setTimeout(function() {
                    a && (a(), c.hideLoading(), d.removeClass("hidden"))
                }, INIT_FEED_DELAY_MS)
            };
            this.signalFollowedInterests(b, e)
        } else 
            a && a()
    },
    signalFollowedInterests: function(a, b) {
        var c = {
            interests: a
        };
        P.ExperienceManager.instance().isPlacedExperience(P.Experiences.Placement.WEB_HOME_TAKEOVER, P.Experiences.Experience.WEB_REBUILD_FEED) && (c.redo_homefeed=!0);
        var d = P.resourceFactory.create("OrientationContextResource", c);
        d.callCreate().then(b)
    }
}), P.modules.tutorials.NewUserInterestPicker.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.ui.SocialTypeaheadField"), goog.require("P.Module"), goog.require("P.modules.ui.TypeaheadField"), P.modules.ui.SocialTypeaheadField = P.modules.ui.TypeaheadField.extend({
    onCreated: function() {
        P.modules.ui.TypeaheadField.prototype.onCreated.apply(this), this._updateNetworks()
    },
    onContentReady: function() {
        P.modules.ui.TypeaheadField.prototype.onContentReady.apply(this), this.childListen(P.CONST.EVENT_TYPEAHEAD_HINT, this.updateTypeaheadStaticItems), this.childListen(P.CONST.EVENT_ITEM_SELECTED, this.onItemSelected), P.pubsub.subscribe(P.CONST.PUBSUB_CHANNEL_CURRENT_USER, P.CONST.PUBSUB_TOPIC_SOCIAL_NETWORK_UPDATED, function() {
            this._updateNetworks(), this.updateTypeaheadStaticItems(), this.render()
        }.bind(this))
    },
    onItemSelected: function(a) {
        var b = a.data.item, c = b.attributes;
        c.network && (this.connectToNetwork(c.network), this.options.bubble_network_item_click || a.stopPropagation())
    },
    _updateSocialConnectItems: function() {
        this._socialConnectItems = _.map(this._networksToConnect, function(a) {
            return {
                template: "socialConnect",
                selectable: !0,
                network: a
            }
        })
    },
    _updateNetworks: function() {
        var a = P.currentUser;
        this._networksToConnect = [], a.get("connected_to_facebook") || a.get("facebook_url") || this._networksToConnect.push(P.SocialConnect.FACEBOOK), a.get("connected_to_twitter") || a.get("twitter_url") || this._networksToConnect.push(P.SocialConnect.TWITTER), a.get("connected_to_gplus") || a.get("gplus_url") || this._networksToConnect.push(P.SocialConnect.GPLUS), a.get("connected_to_yahoo") || this._networksToConnect.push(P.SocialConnect.YAHOO), this._updateSocialConnectItems()
    },
    updateTypeaheadStaticItems: function() {
        var a = [];
        if (this.options.allow_email) {
            var b = this.getValue();
            if (b) {
                var c = P.isEmailAddress(b), d = this.options.email_options || {};
                d.template || (d.template = "emailSelect"), a = [_.extend(d, {
                    selectable: c,
                    email: b,
                    is_valid: c
                })]
            }
        }
        var e = a.concat(this._socialConnectItems);
        this.setAppendedStaticItems(e)
    },
    _markNetworkAsConnected: function(a) {
        this._networksToConnect = _.without(this._networksToConnect, a), this._updateSocialConnectItems(), this.updateTypeaheadStaticItems(), this.render()
    },
    connectToNetwork: function(a) {
        var b = {
            success: function() {
                this._markNetworkAsConnected(a)
            }.bind(this)
        };
        P.SocialNetworkSettingsManager.instance().handleConnect(a, !0, b)
    }
}), P.modules.ui.SocialTypeaheadField.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/ui/SocialTypeaheadField/SocialTypeaheadField.nunjucks"), goog.provide("P.modules.AddPinToMap"), goog.require("P.Module"), goog.require("P.modules.GeoFeatureList"), goog.require("P.modules.Map");
var CLASS_ADD_PIN_TO_MAP_LOADING = "loading", CLASS_EMPTY_STATE = "isEmpty", ID_BACK_BUTTON = "backButton", ID_CLOSE_BUTTON = "closeButton", CLASS_HAS_NO_RESULTS_HIDE_EMPTY_STATE = "hasNoResults";
P.modules.AddPinToMap = P.Module.extend({
    events: {
        "keydown input": "onSearchFieldKeydown",
        "click .exampleQuery": "onExampleQueryClick"
    },
    onExampleQueryClick: function(a) {
        var b = $(a.target), c = b.text();
        this.typeaheadField.setValue(c), this.typeaheadField.search()
    },
    onSearchFieldKeydown: function() {
        this.typeaheadField.setResourceOptionForTypeahead("near", null), this.typeaheadField.setResourceOptionForTypeahead("should_geocode", !0), this._ignoreHints=!1
    },
    onCreated: function() {
        this.onUploadSuccess = this.onUploadSuccess.bind(this), this._place = null, this.typeaheadItems = null, this.childListen(P.CONST.EVENT_ITEM_HIGHLIGHTED, this.onTypeaheadItemHighlighted), this.childListen(P.CONST.EVENT_EXTERNAL_CLICK, this.onExternalClick), this.listen(this, P.CONST.EVENT_EXTERNAL_CLICK, this.onExternalClick), this.childListen(P.CONST.EVENT_ITEM_SELECTED, this.onTypeaheadItemSelected), this.childListen(P.CONST.EVENT_BUTTON_CLICK, this.onButtonClick), this.childListen(P.CONST.EVENT_UPLOAD_SUCCESS, this.onUploadSuccess), this.childListen(P.CONST.EVENT_TYPEAHEAD_SEARCH_START, this.onTypeaheadSearchStart), this.childListen(P.CONST.EVENT_TYPEAHEAD_HINT, this.onTypeaheadHint), this.childListen(P.CONST.EVENT_TYPEAHEAD_RESULTS_RETURNED, this.onTypeaheadResultsReturned), this.childListen(P.CONST.EVENT_TYPEAHEAD_NO_RESULTS_RETURNED, this.onTypeaheadNoResultsReturned), this.childListen(P.CONST.EVENT_PINIT_BUTTON_CLICKED, this.onPinItButtonClicked), this.childListen(P.CONST.EVENT_UPDATE_GEO_FEATURE_LIST, this.onUpdateGeo)
    },
    onExternalClick: function(a) {
        a.stopPropagation()
    },
    getTerm: function() {
        var a = this.typeaheadField.getValue();
        return a
    },
    search: function() {
        var a = this.getTerm();
        a.length && this.typeaheadField.getTypeahead().search()
    },
    onTypeaheadHint: function(a) {
        if (!this._ignoreHints) {
            var b = a.data || [];
            this._loadFeatures(b), this.features.length > 1 ? this._addGeoFeatureList() : this._removeGeoFeatureList(), this._panMapAsNeeded(), this._toggleRegionEmptyResult()
        }
    },
    _toggleRegionEmptyResult: function() {
        var a, b = this.$(".noResults");
        a = this.features.length ? P.string.format(P._("Sorry, we couldn't find {{ what }} in {{ where }}."), {
            where: this.$(".featureName").text(),
            what: this.interpretation.what
        }) : P._("Sorry, we couldn't find that"), b.text(a)
    },
    _loadFeatures: function(a) {
        var b = _.map(a, function(a) {
            var b = {}, c = a.feature;
            return b.text = c.name, b.icon_class_name = "flag" + c.cc, b.class_name = "geoFeature", b.cc = c.cc, b.center = c.center, b
        });
        if (this.features = b, a.length) {
            var c = a[0];
            this.interpretation = {
                what: c.what,
                where: c.where,
                center: b[0].center
            }
        }
    },
    _removeGeoFeatureList: function() {
        this.$el.removeClass("hasGeoFeatures"), this._geoFeatureList && (this._geoFeatureList.hide(), this._geo = null, this._toggleRegionEmptyResult())
    },
    _addGeoFeatureList: function() {
        if (this.$el.addClass("hasGeoFeatures"), this._geoFeatureList)
            this._geoFeatureList.updateFeatures(this.features), this._geoFeatureList.show();
        else {
            var a = this.typeaheadField, b = a.$el, c = new P.modules.GeoFeatureList({
                options: {
                    features: this.features
                }
            });
            this._geoFeatureList = c, c.render().then(function() {
                this.insertChild(c, b)
            }.bind(this))
        }
        this._panMapAsNeeded()
    },
    _panMapAsNeeded: function() {
        if (this.interpretation) {
            var a = this.interpretation.center, b = new L.LatLng(a.latitude, a.longitude);
            this._triggerCenter(b)
        }
    },
    onTypeaheadSearchStart: function() {
        this.showLoading()
    },
    hideTypeaheadResults: function() {
        this.typeaheadField.getTypeahead().emptyResults()
    },
    showLoading: function() {
        this.$el.toggleClass(CLASS_ADD_PIN_TO_MAP_LOADING, !0)
    },
    hideLoading: function() {
        this.$el.toggleClass(CLASS_ADD_PIN_TO_MAP_LOADING, !1)
    },
    _setLoading: function(a) {
        this.$el.toggleClass(CLASS_ADD_PIN_TO_MAP_LOADING, a)
    },
    onTypeaheadResultsReturned: function(a) {
        var b = a.data.items;
        this._setPlaceholderMarkersOnMap(b), this.hideEmptyState(), this.hideNoResults(), this.hideLoading()
    },
    showEmptyState: function() {
        this.hideNoResults(), this._setEmptyStateVisible(!0)
    },
    hideEmptyState: function() {
        this._setEmptyStateVisible(!1)
    },
    _setEmptyStateVisible: function(a) {
        this.$el.toggleClass(CLASS_EMPTY_STATE, a)
    },
    showNoResults: function() {
        this._setNoResultsVisible(!0)
    },
    hideNoResults: function() {
        this._setNoResultsVisible(!1)
    },
    _setNoResultsVisible: function(a) {
        this.$el.toggleClass(CLASS_HAS_NO_RESULTS_HIDE_EMPTY_STATE, a)
    },
    onTypeaheadNoResultsReturned: function() {
        this.$(".ui-Typeahead").show(), this.clearPlaceholderMarkersFromMap(), this.hideLoading(), this.hideTypeaheadResults(), this._toggleRegionEmptyResult();
        var a = this.getTerm();
        $.trim(a.length) > 1 ? this.showNoResults() : this.showEmptyState()
    },
    _triggerCenter: function(a) {
        this.triggerEvent(P.CONST.EVENT_CENTER_MAP_GEO_FEATURE, a)
    },
    getPlaceSelector: function() {
        return this.getChildByModuleName("PlaceSelector")
    },
    onContentReady: function() {
        var a = this.options.board_id, b = this.getPlaceSelector(), c = b.getTypeaheadField();
        this.typeaheadField = c;
        var d = {};
        d[P.CONST.PUBSUB_TOPIC_PLACEHOLDER_MARKER_OPENED] = this.onPlaceholderMarkerOpen, this.pubsubSubscribe(a, d)
    },
    onUpdateGeo: function(a) {
        var b = a.data;
        this._geo = b, this._updateGeo(b), this._panMapAsNeeded();
        var c = this._geo.center, d = new L.LatLng(c.latitude, c.longitude);
        this._triggerCenter(d)
    },
    _updateGeo: function(a) {
        var b = a.text, c = this.interpretation.what;
        this.typeaheadField.setResourceOptionForTypeahead("near", b), this.typeaheadField.setResourceOptionForTypeahead("should_geocode", !1), this.typeaheadField.search(c), this._ignoreHints=!0
    },
    focus: function() {
        this.typeaheadField.focus()
    },
    onPlaceholderMarkerOpen: function(a, b, c) {
        var d = c.place_id;
        if (d) {
            var e = this.typeaheadField.getTypeahead();
            e.highlightItemWithAttributeAndValue("id", d), e.focusHighlighted()
        }
    },
    onUploadSuccess: function(a) {
        a.stopPropagation();
        var b = a.data.image_url;
        this._setActiveImage(b)
    },
    onButtonClick: function(a) {
        var b = a.target, c = b.id;
        if (c === ID_BACK_BUTTON) {
            var d = this.getChildById("addPlace");
            d && d.remove(), this._panMapAsNeeded(), this._setPlaceholderMarkersOnMap(this.typeaheadItems), this.setBackButton(!1), a.stopPropagation()
        } else 
            c === ID_CLOSE_BUTTON && this.triggerEvent(P.CONST.EVENT_REMOVE_PLACEHOLDER_MARKER_TO_MAP_FROM_TYPEAHEAD, null)
    },
    reset: function() {
        var a = this.typeaheadField;
        a.reset(), this.hideTypeaheadResults(), this._removeAddPlace()
    },
    onPinItButtonClicked: function(a) {
        var b = a.data;
        this._setActiveImage(b), this.createPin()
    },
    _setActiveImage: function(a) {
        this._activeImageUrl = a
    },
    _getActiveImage: function() {
        return this._activeImageUrl
    },
    createPin: function() {
        var a = this._place, b = a.get("id"), c = this.$("textarea").val(), d = this.options.board_id, e = this._getActiveImage(), f = {
            board_id: d,
            place: b,
            description: c,
            image_url: e
        }, g = P.resourceFactory.create("PinResource", f);
        g.callCreate().then(function() {
            this._place.set("placeholder", !1), this._setActiveImage(null), P.pubsub.publish(d, P.CONST.PUBSUB_TOPIC_PREPEND_ITEM_MAP_BOARD, this._place.attributes), this.reset()
        }.bind(this))
    },
    addPermanentMarkerToMap: function(a) {
        var b = a.attributes;
        this.triggerEvent(P.CONST.EVENT_ADD_PERMANENT_MARKER_TO_MAP_FROM_TYPEAHEAD, b)
    },
    _isNewPin: function() {
        return !this.options.pin_id
    },
    setBackButton: function(a) {
        var b = this.getChildById("closeButton");
        a ? (b.options.text = P._("Back"), b.id = ID_BACK_BUTTON, b.options.cancelButton=!1) : (b.options.text = P._("Close"), b.id = ID_CLOSE_BUTTON, b.options.cancelButton=!0), b.render()
    },
    _replaceContentWithPinForm: function(a) {
        var b = this.options.board_id, c = {
            id: "addPlace",
            name: "AddAPlace",
            options: {
                place: a.attributes,
                board_id: b
            }
        };
        P.loadModule(c).then(function(b) {
            this.showLoading(), b.render().then(function() {
                this.setBackButton(!0), this.hideLoading();
                var c = this.$(".typeaheadWrapper");
                this.insertChild(b, c), b.setPlace(a)
            }.bind(this))
        }.bind(this))
    },
    _removeAddPlace: function() {
        var a = this.getChildById("addPlace");
        a && a.remove()
    },
    _getMarkerOptions: function(a) {
        var b = P.MarkerOptionsFactory.fromPlainObject(a.attributes);
        return b
    },
    onRemovedFromDom: function() {
        this.triggerEvent(P.CONST.EVENT_REMOVE_PLACEHOLDER_MARKER_TO_MAP_FROM_TYPEAHEAD, null)
    },
    _setPlaceholderMarkersOnMap: function(a) {
        this.typeaheadItems = a;
        var b = _.map(a, function(a) {
            return a.get("template") ? void 0 : this._getMarkerOptions(a)
        }.bind(this));
        b = b;
        var c = {
            markerOptionsList: b
        };
        this.triggerEvent(P.CONST.EVENT_SET_PLACEHOLDER_MARKERS, c)
    },
    highlightPlaceholderMarkerOnMap: function(a) {
        var b = a.get("resultIndex"), c = {
            index: b
        };
        this.triggerEvent(P.CONST.EVENT_HIGHLIGHT_PLACEHOLDER_MARKER, c)
    },
    clearPlaceholderMarkersFromMap: function() {
        this.triggerEvent(P.CONST.EVENT_REMOVE_PLACEHOLDER_MARKER_TO_MAP_FROM_TYPEAHEAD, null), this.triggerEvent(P.CONST.EVENT_CLEAR_PLACEHOLDER_MARKER_HIGHLIGHT, null)
    },
    hideChildDropdowns: function() {
        this._geoFeatureList && this._geoFeatureList.hideDropdown()
    },
    onTypeaheadItemSelected: function(a) {
        a.stopPropagation();
        var b = a.data.item;
        if (b&&!b.get(P.CONST.TYPEAHEAD_ATTRIBUTE_EMPTY_STATE)) {
            var c = b.get("search_id"), d = b.get("id");
            if (c) {
                var e = {
                    search_id: c,
                    place: d
                }, f = P.resourceFactory.create("PlacePingbackResource", e);
                f.call("update", {
                    error: P.NOOP,
                    success: P.NOOP,
                    complete: P.NOOP
                })
            }
            if (this._isNewPin()) {
                this._place = b;
                var g = b.get("latitude"), h = b.get("longitude"), i = L.latLng(g, h), j = b.get("resultIndex"), k = {
                    latLng: i,
                    index: j
                };
                return this.triggerEvent(P.CONST.EVENT_PLACE_SELECTED, k), this._replaceContentWithPinForm(b), void this.highlightPlaceholderMarkerOnMap(b)
            }
            var l = a.target;
            l.showLoading(!0);
            var m = this.options.pin_id, n = P.resourceFactory.create("PinResource", {
                id: m,
                place: d
            });
            n.callUpdate({
                showError: !1
            }).then(function(a) {
                var c = a.resource_response.data;
                l.hideLoading(), this.addPermanentMarkerToMap(b), P.pubsub.publish(m, P.CONST.PUBSUB_TOPIC_PIN_UPDATED, c)
            }.bind(this))
        }
    },
    onTypeaheadItemHighlighted: function(a) {
        var b = a.data.item;
        b || this._place ? (b && this.highlightPlaceholderMarkerOnMap(b), a.stopPropagation()) : this.triggerEvent(P.CONST.EVENT_CLEAR_PLACEHOLDER_MARKER_HIGHLIGHT, null)
    }
}), P.modules.AddPinToMap.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/AddPinToMap/AddPinToMap.nunjucks"), goog.provide("P.modules.App"), goog.require("P.HistoryManager"), goog.require("P.interfaces.HistoryManagerProvider"), goog.require("P.modules.AppBase"), goog.require("P.interfaces.IModalManager"), goog.require("P.modules.Grid"), goog.require("P.modules.Header"), goog.require("P.modules.Modal");
var CLASS_SHOWING_PLACE_BOARD = "showingPlaceBoard", CLASS_SHOWING_CLOSEUP = "showingCloseup";
P.modules.App = P.modules.AppBase.extend({
    events: {
        dragenter: "onDragEnter",
        dragover: "eventPreventDefault",
        dragdrop: "eventPreventDefault",
        drop: "eventPreventDefault",
        dragleave: "eventPreventDefault"
    },
    onCreated: function() {
        P.modules.AppBase.prototype.onCreated.call(this), this.modalManager = null
    },
    onAddedToDom: function() {
        P.modules.AppBase.prototype.onAddedToDom.apply(this, arguments);
        var a = this.extraData ? this.extraData.deepLinkTracking: null;
        P.DeepLink.setup(P.CONTEXT.ios_deep_link, "pinterest://", a), this.childListen(P.CONST.EVENT_MODAL, this.onChildModal), this.childListen(P.CONST.EVENT_CLOSE, this.onChildClose), this.childListen(P.CONST.EVENT_APPEND_ELEMENT, this.onAppendElement), this.modalManager || (this.modalManager = P.getModalManager())
    },
    onAppendElement: function(a) {
        var b = a.data;
        b.appendTo(this.$el)
    },
    _startTutorials: function() {
        P.TutorialManager.instance().resumeTutorial()
    },
    isTutorialActive: function() {
        return P.TutorialManager.instance().isTutorialActive()
    },
    _adjustScrollToTopPositionIfNeeded: function() {
        var a = this._getCurrentMainModule();
        if (a) {
            if ("BoardPage" === a.className && a.isPlaceBoard())
                return void this.$el.addClass(CLASS_SHOWING_PLACE_BOARD);
            this.$el.removeClass(CLASS_SHOWING_PLACE_BOARD), "Closeup" === a.className ? this.$el.addClass(CLASS_SHOWING_CLOSEUP) : this.$el.removeClass(CLASS_SHOWING_CLOSEUP)
        }
    },
    _scrollMainModuleIfNeeded: function() {
        var a = this._getCurrentMainModule();
        a && a.initScroll()
    },
    onContentReady: function() {
        P.modules.AppBase.prototype.onContentReady.apply(this, arguments), P.requestPushNotifications();
        var a, b = P.getConversationFromUrl();
        if (P.experiments.instance.inExperimentGroupsActiveOrTriggerable("web_toasts", ["employees", "enabled"])) {
            var c = this.getChildById("toasts");
            P.getToastsManager().setContainer(c)
        }
        if ((P.currentUser.isAuthenticated() || b)&&!P.currentUser.isLimitedLogin())
            if (a = P.getConversationsManager(), a.setContainer(this.getChildById("activeConversations")), P.currentUser.isAuthenticated()) {
                var d = P.Experiences.Placement.WEB_ONLOAD_AUTO_COMPLETE, e = P.Experiences.Experience.WEB_MSGS_WELCOME_MESSAGE;
                P.ExperienceManager.instance().isPlacedExperience(d, e) && P.ExperienceManager.instance().completePlacedExperience(d, e), a.loadInitialConversations(b), a.listenForConversations()
            } else 
                a.addConversationForUnauthUser(b);
        var f = {};
        f[P.CONST.PUBSUB_TOPIC_HIDE_UNAUTH_BANNER] = this.hideUnauthBanner, this.pubsubSubscribe(P.CONST.PUBSUB_CHANNEL_SITE, f), P.currentUser.isAuthenticated() || this.listen(this.getScrollableElement(), P.CONST.EVENT_SCROLL, this.onScroll), P.fb.ensureInit(P.NOOP)
    },
    _getScrollToTopModule: function() {
        var a = this.getChildById("scrollToTop");
        return a
    },
    updateScrollWatchers: function(a) {
        var b = this._getScrollToTopModule();
        b && b.setScroller(a.getScrollableElement())
    },
    onChildModal: function(a) {
        this.log.debug("Got modal event from child", a.target, "for module:", a.data.module), a.stopPropagation(), this.modalManager.showInModal(a.data.module, a.data.showModalOptions || {}, a.target)
    },
    onChildClose: function() {
        this.historyManager.closeCurrentModule()
    },
    removeAllModals: function() {
        this.isTutorialActive() || this.modalManager.removeAllModals(!0)
    },
    debugNumGridItems: function() {
        for (var a, b = [], c = [this]; c.length > 0;)
            a = c.pop(), "GridItems" === a.className && b.push(a), c = c.concat(a.children);
        return _.each(b, function(a, b) {
            for (var c = a.parent, d = a.className + " has " + a.children.length + " children"; c;)
                d = c.className + "->" + d, c = c.parent;
            this.log.debug(b + 1 + ": " + d)
        }.bind(this)), 0 === b.length && this.log.debug("There are no grids in the page."), ":)"
    },
    updateNavigationBar: function() {
        var a = P.app.getChildByModuleName("Nags"), b = P.app.getChildById("header");
        b && b.render().then(function() {
            b.show()
        }), a && a.render(), this._showFooterButtons()
    },
    _showFooterButtons: function() {
        var a = P.app.getChildById("footerButtons");
        a && a.setVisible(!0)
    },
    getHistoryManager: function() {
        return this.historyManager
    },
    eventPreventDefault: function(a) {
        a.preventDefault()
    },
    onDragEnter: function(a) {
        a.preventDefault();
        var b = a.originalEvent.dataTransfer.types;
        if ((!b||-1 !== _.values(b).indexOf("Files")) && (!this.dragOverlayModule || this.dragOverlayModule.destroyed) && P.currentUser && P.currentUser.isAuthenticated()) {
            var c = {
                name: "PinDragAndDrop",
                options: {}
            };
            P.loadModule(c).then(function(a) {
                this.dragOverlayModule = a, a.render().then(function() {
                    this.appendChild(a)
                }.bind(this))
            }.bind(this))
        }
    },
    onScroll: function() {
        P.getModalManager().hasModals() || this.$(".UnauthBanner").removeClass("fade")
    },
    hideUnauthBanner: function() {
        this.$(".UnauthBanner").addClass("fade")
    }
}), P.Errors.wrap(P.modules.App.prototype, ["initialize", "onAddedToDom", "onChildNavigate", "onChildModal", "onContentReady", "onRoute", "onRouteNotFound"]), P.modules.App.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.BoardCreate"), goog.require("P.Module"), goog.require("P.modules.BoardEditBase"), goog.require("P.modules.BoardInvites"), P.modules.BoardCreate = P.modules.BoardEditBase.extend({
    _clearInviteForm: function() {
        var a = this.getChildById("boardInviteForm");
        a.clearTypeahead()
    },
    onChildInviteUser: function(a) {
        var b = this.getChildById("boardInvites"), c = a.data.userId, d = a.data.type, e = a.data.attributes;
        if (d === P.CONST.TYPEAHEAD_TYPE_FB_NON_PINNER)
            b.addInvitee({
                type: "facebook",
                identifier: c,
                attributes: e
            });
        else if ("user" === d)
            b.addInvitee({
                type: "pinner",
                identifier: c
            });
        else {
            var f = a.data.userId;
            b.addInvitee({
                type: "email",
                identifier: f
            })
        }
        this._clearInviteForm()
    },
    focusDescription: function() {
        this.$(".boardEditDescription").focus()
    },
    onChildInviteEmail: function(a) {
        var b = this.getChildById("boardInvites"), c = a.data.email;
        b.addInvitee({
            type: "email",
            identifier: c
        }), this._clearInviteForm()
    }
}), P.modules.BoardCreate.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.BoardPage"), goog.require("P.modules.BoardPageBase"), goog.require("P.Module"), goog.require("P.modules.Map"), goog.require("P.modules.AddPinToMap"), goog.require("P.modules.InviteModal"), goog.require("P.number");
var CLASS_ATTRIBUTION_MOVED = "moved", CLASS_FADE = "fade", BOARD_PAGE_PINS_TAB = "pins";
P.modules.BoardPage = P.modules.BoardPageBase.extend({
    onCreated: function() {
        this._pinCount = 0, this._onPrependedToMapBoard = this._onPrependedToMapBoard.bind(this)
    },
    addTutorials: function() {
        if (this.options.tab === BOARD_PAGE_PINS_TAB && this.extraData.canEdit) {
            var a, b = this.data, c = P.ExperienceManager.instance();
            a = b.layout === P.CONST.BOARD_LAYOUT_PLACES ? _.isEmpty(this.getPins()) ? P.Experiences.Placement.WEB_EMPTY_PLACES_BOARD_TAKEOVER : P.Experiences.Placement.WEB_FILLED_PLACES_BOARD_TAKEOVER : P.Experiences.Placement.WEB_BOARD_TAKEOVER, c.getPlacedExperienceWithContext(a, {
                board_id: this.data.id
            }).then(function(b) {
                if (b) {
                    var d = P.ExperienceManager.Tutorials[b.experience_id];
                    d && (P.TutorialManager.instance().startTutorial(d, {
                        display_data: b.display_data
                    }), c.viewPlacedExperience(a, b.experience_id))
                }
            })
        }
    },
    getLoggingObjectIdStr: function() {
        return this.data.id
    },
    onScrollToTopHidden: function() {
        this.restoreAttributionOriginalPosition()
    },
    onScrollToTopVisible: function() {
        this.preventAttributionObstruction()
    },
    restoreAttributionOriginalPosition: function() {
        this._toggleAttributionMoved(!1)
    },
    _toggleAttributionMoved: function(a) {
        this.$(".attribution").toggleClass(CLASS_ATTRIBUTION_MOVED, a)
    },
    preventAttributionObstruction: function() {
        this._toggleAttributionMoved(!0)
    },
    addPermanentMarkerFromTypeahead: function(a) {
        a = a.data, this.map.clearPlaceholderMarkers(), a.highlighted=!0, a.animated=!0, a.placeholder=!1, a = this._generateMapMarkerData(a), this.map.addPermanentMarkerFromTypeahead(a), this.hideMapModal()
    },
    onSetPlaceholderMarkers: function(a) {
        var b = a.data, c = b.markerOptionsList;
        c = _.compact(c), _.each(c, function(a) {
            a.placeholder=!0, a.highlighted=!1, a.animated=!1
        });
        var d = _.map(c, function(a) {
            return this._generateMapMarkerData(a)
        }.bind(this));
        this.map.setPlaceholderMarkers(d, !1)
    },
    onHighlightPlaceholderMarker: function(a) {
        var b = a.data.index;
        this.map.clearPlaceholderHighlights(), this.map.highlightPlaceholderMarker(b)
    },
    onClearHighlightedPlaceholderMarkerHighlight: function() {
        this.map.clearPlaceholderHighlights()
    },
    onClearPlaceholderMarkers: function() {
        this.map.clearPlaceholderMarkers()
    },
    _generateMapMarkerData: function(a) {
        var b = a.pin || this.getPinToAddToMap(), c = [a.latitude, a.longitude], d = a.id, e = {
            pin: b,
            coordinates: c,
            id: d
        }, f = _.extend(e, a);
        return f
    },
    onRemovedFromDom: function() {
        this.data && this.data.layout === P.CONST.BOARD_LAYOUT_PLACES && (this.hideMapModal(), this.map.clearMarkers(), this.getPins().forEach(function(a) {
            a.resetShowOnMapButton()
        }))
    },
    _getPinByPinId: function(a) {
        for (var b, c = this.getPins(), d = 0, e = c.length; d < e; ++d)
            if (b = c[d], b.getId() === a)
                return b;
        return null
    },
    onMapPopupOpened: function(a) {
        var b = a.data, c = this._getPinByPinId(b);
        c.scrollIntoView(), this.map.highlightMarkerForPinId(b)
    },
    onContentReady: function() {
        if (P.modules.BoardPageBase.prototype.onContentReady.call(this), this.extraData && (this.extraData.redirect_to_signup ? (P.trackRegisterAction("board_invite_landing"), this.navigate("/join/discover/")) : this.extraData.show_invite_modal && (P.trackRegisterAction("board_invite_landing"), P.modules.InviteModal.showInviteModal(this.options.inviter_user_id, "board"))), this.data.id) {
            var a = {};
            a[P.CONST.PUBSUB_TOPIC_BOARD_BANNED_COLLABORATOR] = this.onBannedUser, a[P.CONST.PUBSUB_TOPIC_BOARD_UPDATED] = this.onBoardUpdated, a[P.CONST.PUBSUB_TOPIC_BOARD_DELETED] = this.onBoardDeleted, a[P.CONST.PUBSUB_TOPIC_BOARD_REMOVED_COLLABORATOR_SELF] = this.onBoardRemovedSelf, a[P.CONST.PUBSUB_TOPIC_BOARD_WRITE_ACCESS_UPDATED] = this.onBoardWriteAccessUpdated, a[P.CONST.PUBSUB_TOPIC_PIN_CREATED] = this.onPinAdded, a[P.CONST.PUBSUB_TOPIC_PREPEND_ITEM_MAP_BOARD] = this.onPrependNewPinMapBoard, a[P.CONST.PUBSUB_TOPIC_PIN_FLAGGED] = this.onPinFlagged, this.pubsubSubscribe(this.data.id, a)
        }
        if (this.childListen(P.CONST.EVENT_PIN_UPDATED, this.onChildPinUpdated), this.childListen(P.CONST.EVENT_PIN_DELETED, this.onPinDeleted), this.childListen(P.CONST.EVENT_RESET_SHOW_PIN_ON_MAP_BUTTON, this.resetShowPinOnMapButtonStates), this.map) {
            var b = {};
            b[P.CONST.PUBSUB_TOPIC_SCROLL_TO_TOP_HIDDEN] = this.onScrollToTopHidden, b[P.CONST.PUBSUB_TOPIC_SCROLL_TO_TOP_VISIBLE] = this.onScrollToTopVisible, this.pubsubSubscribe(P.CONST.PUBSUB_CHANNEL_SITE, b), this.attachHoverListeners(), this.childListen(P.CONST.EVENT_PIN_PLACE_CLICK, this.onPinPlaceClick), this.childListen(P.CONST.EVENT_MAP_POPUP_OPENED, this.onMapPopupOpened), this.childListen(P.CONST.EVENT_PIN_MOUSE_IN, this.onPinMouseIn), this.childListen(P.CONST.EVENT_PIN_MOUSE_OUT, this.onPinMouseOut), this.childListen(P.CONST.EVENT_ITEMS_REQUEST_SUCCESS, this.onChildItemsAddedToGrid), this.childListen(P.CONST.EVENT_BOARD_CACHE_PIN_ID_TO_ADD_TO_MAP, this.onPinAddToMapCachePinId), this.childListen(P.CONST.EVENT_MODAL, this.onPlaceBoardModal)
        }
        this.options.show_edit && (this.extraData.canEdit && this.showEditModal(), delete this.options.show_edit), this._sticky = new P.Sticky(this.$(".addPinToMapButton"), {
            $boundTo: this.$el,
            $scrollable: this.getScrollableElement(),
            headerHeight: $(".headerBackground").height()
        }), _.defer(this.addTutorials.bind(this)), this.numPinsFlagged = 0
    },
    onPlaceBoardModal: function(a) {
        var b = a.data.module;
        "AddPinToMap" === b.className && (this.listen(b, P.CONST.EVENT_MODAL_ANIMATE_SHOW_START, this.onAddPinToMapBeginShowing), this.listen(b, P.CONST.EVENT_MODAL_ANIMATE_SHOW_END, this.onAddPinToMapEndShowing), this.listen(b, P.CONST.EVENT_MODAL_ANIMATE_HIDE_START, this.onAddPinToMapBeginHiding), this.listen(b, P.CONST.EVENT_TYPEAHEAD_NO_RESULTS_RETURNED, this.onTypeaheadNoResultsReturned), this.listen(b, P.CONST.EVENT_CENTER_MAP_GEO_FEATURE, this.onCenterMapGeoFeature), this.listen(b, P.CONST.EVENT_BUTTON_CLICK, this.onButtonClick), this.listen(b, P.CONST.EVENT_ADD_PERMANENT_MARKER_TO_MAP_FROM_TYPEAHEAD, this.addPermanentMarkerFromTypeahead), this.listen(b, P.CONST.EVENT_PLACE_SELECTED, this.onPlaceSelected), this.listen(b, P.CONST.EVENT_SET_PLACEHOLDER_MARKERS, this.onSetPlaceholderMarkers), this.listen(b, P.CONST.EVENT_HIGHLIGHT_PLACEHOLDER_MARKER, this.onHighlightPlaceholderMarker), this.listen(b, P.CONST.EVENT_CLEAR_PLACEHOLDER_MARKER_HIGHLIGHT, this.onClearHighlightedPlaceholderMarkerHighlight), this.listen(b, P.CONST.EVENT_REMOVE_PLACEHOLDER_MARKER_TO_MAP_FROM_TYPEAHEAD, this.onClearPlaceholderMarkers), this.listen(b, P.CONST.EVENT_TYPEAHEAD_SEARCH_WORLD, this.onSearchGlobally))
    },
    onBoardWriteAccessUpdated: function() {
        this.renderHeader()
    },
    onPinDeleted: function() {
        this.renderHeader()
    },
    onCenterMapGeoFeature: function(a) {
        var b = a.data, c = this.map.getCityBoundsFromCenter(b);
        this.map.fitBounds(c)
    },
    onPinFlagged: function() {
        this.numPinsFlagged += 1
    },
    getNumPinsFlagged: function() {
        return this.numPinsFlagged
    },
    onSearchGlobally: function() {
        this._searchingGlobally=!0, this.map.fitWorld()
    },
    onCitySelected: function(a) {
        var b = a.data;
        this._city = b;
        var c, d;
        b.bounds ? d = b.bounds : c = b.latLng, d || (d = this.getCityBoundsFromCenter(c)), this.map.fitBounds(d)
    },
    makeLatLngBoundsFromLatLngAndPadding: function(a, b) {
        var c = L.latLng(a.lat - b, a.lng - b), d = L.latLng(a.lat + b, a.lng + b);
        return L.latLngBounds(c, d)
    },
    getCityBoundsFromCenter: function(a) {
        var b = .05;
        return this.makeLatLngBoundsFromLatLngAndPadding(a, b)
    },
    onTypeaheadNoResultsReturned: function() {
        this.map && this.map.clearPlaceholderMarkers()
    },
    onPlaceSelected: function(a) {
        var b = a.data.index;
        this.map.showOnlyPlaceholderMarkerAtIndex(b), this._place = a.data
    },
    onPlaceholderMarkerOpened: function(a) {
        var b = a.data.place_id, c = a.data.index, d = this.data.id;
        P.pubsub.publish(d, P.CONST.PUBSUB_TOPIC_PLACEHOLDER_MARKER_OPENED, {
            place_id: b
        }), this.map.highlightPlaceholderMarker(c)
    },
    onButtonClick: function(a) {
        var b = a.target;
        "wrongPlace" === b.id ? this._place = null : "addToMap" === b.id && this.disablePinsAndButton()
    },
    disablePinsAndButton: function() {
        this._setPinsAndButtonEnabled(!1)
    },
    enablePinsAndButton: function() {
        this._setPinsAndButtonEnabled(!0)
    },
    _setPinsAndButtonEnabled: function(a) {
        var b, c = this.$(".locationBoardPageContentWrapper, .locationBoardContentWrapperBackground, .addAPlace"), d = this.map.getAttributionElement(), e = P.app._getScrollToTopModule();
        e && (b = e.$el), c = c.add(d), e && (b.length && (c = c.add(b)), a ? c.removeClass(CLASS_FADE) : c.addClass(CLASS_FADE))
    },
    setMapPaddingTopLeft: function() {
        var a, b = this._getAddToMapButton();
        b || (a = this.getGrid());
        var c = a || b;
        if (c) {
            var d = c.getOffset(), e = c.getPosition(), f = c.getWidth() + d.left + e.left, g = 100, h = L.point(f, g);
            this.map.setPaddingTopLeft(h)
        }
    },
    hideMapModal: function() {
        P.getModalManager().removeTopModal()
    },
    _onPrependedToMapBoard: function() {
        var a = this.getPins()[0], b = this._markerToPrepend;
        b.pin = a, this.addPermanentMarkerFromTypeahead({
            data: b
        })
    },
    onPrependNewPinMapBoard: function(a, b, c) {
        var d = this.getGrid();
        this._markerToPrepend = c, this.hideMapModal(), d.prependNewItems(1, this._onPrependedToMapBoard), this.renderHeader()
    },
    onPinMouseOut: function(a) {
        var b = a.data;
        this.map.unHighlightMarkerForPinId(b)
    },
    onPinMouseIn: function(a) {
        var b = a.data;
        this.map.highlightMarkerForPinId(b)
    },
    onPinPlaceClick: function(a) {
        var b = a.data;
        this.map.highlightMarkerForPinId(b), this.map.openPopupForPin(b)
    },
    onAddPinToMapBeginShowing: function() {
        this.disablePinsAndButton(), this.map.toggleTranslucentMarkers(!0), this.detatchHoverListeners(), this.map.closeAllMarkerPopups(), this.attachHoverListeners()
    },
    onAddPinToMapEndShowing: function(a) {
        var b = a.target;
        b.focus(), P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_TUTORIAL, P.CONST.PUBSUB_TOPIC_TUTORIAL_NEXT)
    },
    onAddPinToMapBeginHiding: function(a) {
        var b = a.target;
        this.enablePinsAndButton(), this.setPinToAddToMap(null), this.ensureModalChildDropdownsHidden(b), this.map.clearPlaceholderMarkers(), this.detatchHoverListeners(), this.map.toggleTranslucentMarkers(!1), this.attachHoverListeners()
    },
    ensureModalChildDropdownsHidden: function(a) {
        a.hideChildDropdowns()
    },
    onPinAddToMapCachePinId: function(a) {
        var b = a && a.data;
        this.setPinToAddToMap(b)
    },
    getPinToAddToMap: function() {
        return this._pinToAddToMap
    },
    setPinToAddToMap: function(a) {
        this._pinToAddToMap = a
    },
    _getPinsWithCoordinates: function() {
        var a = [];
        return this.map && this.getPins().forEach(function(b) {
            var c = b.getCoordinates();
            c && a.push(b)
        }), a
    },
    detatchHoverListeners: function() {
        this.map && this._toggleHoverListeners(!1)
    },
    _toggleHoverListeners: function(a) {
        var b = this._getPinsWithCoordinates();
        _.each(b, function(b) {
            var c = b.getCoordinates();
            if (c) {
                var d = a ? P.CONST.ADD_HOVER_LISTENER_FOR_MAP_MARKER: P.CONST.REMOVE_HOVER_LISTENER_FOR_MAP_MARKER;
                b.trigger(d)
            }
        })
    },
    attachHoverListeners: function() {
        this.map && this._toggleHoverListeners(!0)
    },
    isPlaceBoard: function() {
        var a = this.data;
        return a ? a.layout === P.CONST.BOARD_LAYOUT_PLACES : !1
    },
    onRendered: function() {
        var a = "places" === this.data.layout;
        a && this.attachHoverListeners(), P.Module.prototype.onRendered()
    },
    resetShowPinOnMapButtonStates: function() {
        this.getPins().forEach(function(a) {
            a.resetShowOnMapButton()
        })
    },
    onChildItemsAddedToGrid: function() {
        this.map && (this.attachHoverListeners(), this.updatePinsOnMap())
    },
    updatePinsOnMap: function() {
        var a = this._pinCount, b = this.getPins();
        if (!b)
            return void(this._pinCount = 0);
        var c = b.length, d = c - a - 1;
        d && (b = b.slice(a), this.map.addMarkersToMap(b, !0), this._pinCount = c)
    },
    onBoardUpdated: function(a, b, c) {
        c.url !== this.data.url && this.inDom ? (this.data.url = c.url, this.navigate(c.url)) : this.headerDataChanged(c) && this.renderHeader(), c.layout !== this.data.layout && (this.data.layout = c.layout, c.url === this.data.url ? window.location.reload() : this.navigate(c.url, this, !0))
    },
    onPinAdded: function() {
        var a = this.getGrid();
        a.prependNewItems(1), this.renderHeader()
    },
    onBannedUser: function() {
        this.renderHeader();
        var a = this.getGrid();
        a.render()
    },
    headerDataChanged: function(a) {
        var b = _.pick(this.data, "privacy", "description"), c = _.pick(a, "privacy", "description");
        return !_.isEqual(b, c)
    },
    onBoardDeleted: function() {
        this.inDom && this.navigateToUserPage()
    },
    navigateToUserPage: function() {
        var a = this.extraData && this.extraData.currentUsername, b = "/", c = a ? b + a + "/": b;
        this.navigate(c)
    },
    getHeader: function() {
        return this.getChildById("boardHeader")
    },
    renderHeader: function() {
        var a = this.getHeader();
        a.render()
    },
    showEditModal: function() {
        var a = this.getHeader();
        return a.showEditModal()
    },
    onChildPinUpdated: function(a) {
        var b = a.data, c = b.board.id, d = b.place, e = a.target, f = b.id;
        if (c !== this.data.id && (e.destroy(), this._removePinFromMap(e)), d || this._removePinFromMap(e), this.map) {
            var g = this.map.getMarkerForPin(f);
            if (g && d) {
                var h = g.getLatLng(), i = h.lat, j = h.lng, k = d.latitude, l = d.longitude;
                if (l !== j || k !== i) {
                    this.map.removeMarkerForPinId(f);
                    var m = {
                        data: d
                    };
                    m.data.pin = e, this.addPermanentMarkerFromTypeahead(m)
                }
            }
        }
    },
    onBoardRemovedSelf: function() {
        this.data.privacy === P.CONST.BOARD_PRIVACY_SECRET && this.inDom ? this.navigateToUserPage() : this.renderHeader()
    }
}), P.modules.BoardPage.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/BoardPage/BoardPage.nunjucks"), goog.provide("P.modules.BoardsToFollow"), goog.require("P.Module"), goog.require("P.modules.Board"), goog.require("P.modules.Dropdown");
var NUM_BOARDS_IN_LIST = 3, BOARDS_TO_FOLLOW_VIEW_TYPE_FOLLOW = "follow_view";
P.modules.BoardsToFollow = P.Module.extend({
    boardsUsed: [],
    boardsUnused: [],
    boardsToReplace: [],
    onCreated: function() {
        this.childListen(P.CONST.EVENT_DISMISS, this.onChildDismiss), this.childListen(P.CONST.EVENT_BOARD_FOLLOW, this.onChildBoardFollow)
    },
    onContentReady: function() {
        this.boardsUnused = this.extraData.boardsUnused, this.list = this.getChildByModuleName("List"), this.requestMoreBoardsIfNeeded(), this.replaceBoardsWithUnused()
    },
    onChildDismiss: function(a) {
        var b = a.target;
        this.dismissBoard(b)
    },
    onChildBoardFollow: function(a) {
        var b = a.target.parent;
        b.options.view_type === BOARDS_TO_FOLLOW_VIEW_TYPE_FOLLOW && window.setTimeout(function() {
            this.dismissBoard(b)
        }.bind(this), 500)
    },
    getEditFeedButtonElement: function() {
        return this.$(".memoTitle")
    },
    requestMoreBoardsIfNeeded: function() {
        this.boardsUnused.length > NUM_BOARDS_IN_LIST || this.resource.xhr || this.resource.callGet().then(function(a) {
            var b = a.resource_response.data;
            this.boardsUnused = this.boardsUnused.concat(b), this.replaceBoardsWithUnused()
        }.bind(this))
    },
    dismissBoard: function(a) {
        a&&!a.dismissing && (a.dismissing=!0, this.requestMoreBoardsIfNeeded(), a.fadeOut(function() {
            this.replaceBoard(a)
        }.bind(this)))
    },
    getBoard: function(a) {
        var b = new P.modules.Board({
            options: {
                show_board_context: !0,
                view_type: BOARDS_TO_FOLLOW_VIEW_TYPE_FOLLOW,
                size: "small"
            },
            resource: {
                name: "BoardResource",
                options: {
                    board_id: a,
                    field_set_key: "boards_to_follow"
                }
            }
        });
        return b
    },
    hideBoard: function(a) {
        a && (a._dropDown && a._dropDown.hide(), a.destroy())
    },
    replaceBoardsWithUnused: function() {
        for (; this.boardsToReplace.length && this.boardsUnused.length;) {
            var a = this.boardsToReplace.shift();
            this.replaceBoard(a)
        }
    },
    replaceBoard: function(a) {
        var b = this.boardsUnused.pop();
        if (b) {
            var c = this.getBoard(b.id);
            c.render().then(function() {
                var b = $("<li></li>").appendTo(this.list.$el);
                this.list.insertChild(c, b), this.list.insertChild(c, b), this.hideBoard(a), c.show(), c.fadeIn()
            }.bind(this), function() {
                this.hideBoard(a), this.replaceBoard(c)
            }.bind(this)), this.boardsUsed.push(b)
        }
    }
}), P.modules.BoardsToFollow.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.BusinessGetStarted"), goog.require("P.Module"), goog.require("P.modules.BoardCreate"), P.modules.BusinessGetStarted = P.Module.extend({
    events: {
        "click .partnerCreateBoard": "createBoard"
    },
    createBoard: function() {
        return P.trackGAEvent("board_create", P.CONST.GA_ACTION_OPEN_MODAL), this.showBoardCreateModal(), !1
    },
    showBoardCreateModal: function() {
        var a = new P.modules.BoardCreate({
            options: {}
        });
        this.showInModal(a)
    }
}), P.modules.BusinessGetStarted.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.CloseupSidebar"), goog.require("P.Module"), goog.require("P.modules.Board"), P.modules.CloseupSidebar = P.Module.extend({
    onContentReady: function() {
        if (this.data.id) {
            var a = {};
            a[P.CONST.PUBSUB_TOPIC_PIN_UPDATED] = this.onPinUpdated, this.pubsubSubscribe(this.data.id, a)
        }
        var b = this.getChildByModuleName("Board");
        b.positionBoardPinsGrid(), this.childListen(P.CONST.EVENT_NAVIGATE, this.showContextualSignup)
    },
    onPinUpdated: function() {
        this.render()
    },
    showContextualSignup: function(a) {
        if (!P.currentUser.isAuthenticated()) {
            var b = P.experiments.instance.inExperimentGroupsActiveOrTriggerable("more_signup_modals", ["enabled"]);
            if (!b) {
                var c, d = a.data.url;
                c = P._(d.indexOf("/pin/")>-1 ? "Sign up to get more details about this Pin and discover more great ideas!" : "Sign up to get more details about this board and discover more great ideas!"), c && setTimeout(function() {
                    P.UserRegistration.showSignupModal(null, {
                        extra_class: "redesign",
                        redirect_to_signup: !0,
                        can_dismiss: !1,
                        prev: window.location.pathname,
                        tagline: c
                    })
                }, 1e3)
            }
        }
    },
    _updateVisualModule: function(a, b) {
        if (this.$(".visuallySimilarContainer")) {
            var c = this.getChildById("visuallySimilar"), d = this.$(".nonVisuallySimilarContainer");
            if (!a)
                return void(c && c.fadeOut(function() {
                    c.destroy(), d.fadeIn()
                }));
            if (c)
                c.resource.setOptions(a), c.fadeOut(), this.showLoading(), c.render().then(function() {
                    this.hideLoading(), c.fadeIn()
                }.bind(this));
            else {
                var e = {
                    name: "VisuallySimilar",
                    id: "visuallySimilar",
                    resource: {
                        name: b,
                        options: a
                    }
                };
                d.fadeOut(), this.showLoading(), P.loadModule(e).then(function(a) {
                    a.render().then(function() {
                        _.each(this.getChildrenByModuleName("VisuallySimilar"), function(a) {
                            this.removeChild(a)
                        }.bind(this)), this.hideLoading(), this.insertChild(a, this.$(".visuallySimilarContainer")), a.fadeIn()
                    }.bind(this))
                }.bind(this))
            }
        }
    },
    updateVisuallySimilar: function(a) {
        var b = null;
        a && (b = {
            pin_id: a.pinId,
            obj_id: a.objId
        }), this._updateVisualModule(b, "VisualSearchResource")
    },
    updateLiveVisualSearch: function(a) {
        var b = null;
        a && (b = {
            pin_id: a.pinId,
            crop: a.crop
        }), this._updateVisualModule(b, "VisualLiveSearchResource")
    },
    updateDomain: function(a) {
        var b = this.getChildById("domain");
        if (!a)
            return void(b && (b.destroy(), this.$(".domainContainerTitle").hide()));
        if (!b && a) {
            var c = {
                name: "Domain",
                id: "domain",
                resource: {
                    name: "DomainResource",
                    options: {
                        domain: a
                    }
                }
            };
            return void P.loadModule(c).then(function(a) {
                a.render().then(function() {
                    this.$(".domainContainerTitle").show(), this.insertChild(a, this.$("#domainContainer"))
                }.bind(this))
            }.bind(this))
        }
        b.resource.set("domain", a), b.render().then(function() {
            b.fadeIn()
        })
    },
    updateRelatedRecipes: function(a) {
        if (this.$(".relatedRecipeContainer")) {
            var b = this.getChildById("relatedRecipe");
            if (!a || 0 === a.length)
                return void(b && b.destroy());
            if (!b && a) {
                var c = {
                    name: "RelatedRecipe",
                    id: "relatedRecipe",
                    options: {
                        ingredients: a
                    },
                    resource: {
                        name: "NoopResource",
                        options: {}
                    }
                };
                return void P.loadModule(c).then(function(a) {
                    a.render().then(function() {
                        this.insertChild(a, this.$(".relatedRecipeContainer"))
                    }.bind(this))
                }.bind(this))
            }
            b.options = {
                ingredients: a
            }, b.render().then(function() {
                b.fadeIn()
            })
        }
    }
}), P.modules.CloseupSidebar.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.PaddedPin"), goog.require("P.Module"), goog.require("P.modules.Pin"), P.modules.PaddedPin = P.Module.extend({
    events: {
        "mouseenter .visualSearchObjectTagClickTarget": "visualSearchToolTipShow",
        "mouseleave .visualSearchObjectTagClickTarget": "visualSearchToolTipHide",
        "click .pinImage": "showContextualSignup",
        "mousemove .paddedPinLink": "onLinkMousemove"
    },
    onCreated: function() {
        this._hasBeenSetDraggable=!1, this._draggablePin = null, this._isDraggable=!1
    },
    onLinkMousemove: function() {
        P.getConversationsManager().getConversationIds().length&&!this._draggablePin && this.generateAndSetDraggablePin()
    },
    detatchDraggable: function() {
        this.$(".paddedPinLink").draggable({
            disabled: !0
        }), this._isDraggable=!1, this._draggablePin = null
    },
    attachDraggable: function() {
        var a = this;
        this._hasBeenSetDraggable&&!this._isDraggable ? this.$(".paddedPinLink").draggable("enable") : this._isDraggable || this.$(".paddedPinLink").draggable({
            appendTo: $(".App"),
            cursor: "move",
            cursorAt: {
                left: P.CONST.PIN_WIDTH / 2,
                top: 50
            },
            helper: function() {
                return a._draggablePin.getContent()
            },
            drag: function(a, b) {
                var c = parseInt($(this).data("startingScrollTop"), 10);
                b.position.top -= c;
                var d = a.clientX - b.position.left, e = window.pageYOffset + a.clientY - b.position.top, f = b.helper.height(), g = b.helper.width(), h = d / g * 100, i = e / f * 100, j = "" + h + "% " + i + "%";
                b.helper.css("transformOrigin", j)
            },
            scroll: !1,
            revert: !1,
            start: function() {
                P.getConversationsManager().setDraggedObject(a._draggablePin), $(this).data("startingScrollTop", window.pageYOffset - P.CONST.PIN_MARGIN)
            },
            stop: function(a, b) {
                P.getConversationsManager().setDraggedObject(null);
                var c = parseInt($(this).data("startingScrollTop"), 10);
                b.position.top -= c
            }
        }), this._isDraggable=!0, this._hasBeenSetDraggable=!0
    },
    generateAndSetDraggablePin: function() {
        var a = this, b = new P.modules.Pin({
            data: this.data,
            options: {
                show_comments: !1,
                squish_giraffe_pins: !1
            }
        });
        b.renderExistingData().then(function() {
            a._draggablePin = b, a.attachDraggable()
        })
    },
    getLoggingObjectIdStr: function() {
        return this.resource.options.id
    },
    onAddedToDom: function() {
        this._setupClickIfReady()
    },
    onContentReady: function() {
        this._setupClickIfReady();
        var a = {};
        a[P.CONST.PUBSUB_TOPIC_CONVERSATION_ADDED] = this.onConversationAdded, a[P.CONST.PUBSUB_TOPIC_CONVERSATION_NO_ACTIVE_CONVERSATIONS] = this.onNoActiveConversations, this.pubsubSubscribe(P.CONST.PUBSUB_CHANNEL_MESSAGES, a)
    },
    onConversationAdded: function() {
        this.attachDraggable()
    },
    onNoActiveConversations: function() {
        this.detatchDraggable()
    },
    showContextualSignup: function() {
        if (!P.currentUser.isAuthenticated()) {
            var a = P.experiments.instance.inExperimentGroupsActiveOrTriggerable("more_signup_modals", ["enabled"]);
            a || P.UserRegistration.showSignupModal(null, {
                extra_class: "redesign",
                redirect_to_signup: !0,
                can_dismiss: !1,
                prev: window.location.pathname,
                tagline: P._("Sign up to get more details about this Pin and discover more great ideas!")
            })
        }
    },
    _setupClickIfReady: function() {
        if (this.contentReady && this.inDom) {
            var a = this;
            this.createToolTips(), this.$(".visualSearchObjectTagClickTarget").click(function() {
                a.triggerEvent(P.CONST.EVENT_VISUAL_SEARCH_OBJECT_SELECTED, $(this).data("visualobjectid").toString(), !0)
            })
        }
    },
    visualSearchToolTipHide: function(a) {
        this.dropdown[$(a.currentTarget).data("visualobjectid")].hide()
    },
    visualSearchToolTipShow: function(a) {
        this.dropdown[$(a.currentTarget).data("visualobjectid")].show(function() {})
    },
    createToolTips: function() {
        this.dropdown = {}, jQuery.each(this.$(".visualSearchObjectTagClickTarget"), function(a, b) {
            this.createVisualSearchDropdown($(b))
        }.bind(this))
    },
    createVisualSearchDropdown: function(a) {
        var b = {
            name: "Dropdown",
            options: {
                anchor: a,
                class_name: "large aboveModal",
                position_point: "BOTTOM_CENTER",
                text: P._("Click the red dot to see similar looks"),
                append_to_closeup: !0
            }
        };
        P.loadModule(b).then(function(b) {
            var c = b;
            this.dropdown[a.data("visualobjectid")] = c, c.render().then(function() {
                _.defer(function() {
                    c.positionModule()
                })
            })
        }.bind(this))
    },
    getFirstVisualObject: function() {
        var a = this.$(".visualSearchObjectTagClickTarget");
        return a.length ? a.first() : null
    }
}), P.modules.PaddedPin.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.SendBoard"), goog.require("P.Module"), goog.require("P.modules.SendObjectBase"), P.modules.SendBoard = P.modules.SendObjectBase.extend({
    _OBJECT_ID_NAME: "board"
}), P.modules.SendBoard.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/SendBoard/SendBoard.nunjucks"), goog.provide("P.modules.UserBoards"), goog.require("P.modules.Board"), goog.require("P.modules.BoardCreateRep"), goog.require("P.modules.UserBoardsBase");
var SECRET_BOARD_TYPE = P.CONST.BOARD_PRIVACY_SECRET, MODULE_ID_PUBLIC_BOARDS_GRID = "publicBoardsGrid", MODULE_ID_SECRET_BOARDS_GRID = "secretBoardsGrid";
P.modules.UserBoards = P.modules.UserBoardsBase.extend({
    onContentReady: function() {
        P.modules.UserBoardsBase.prototype.onContentReady.call(this), this.extraData.isOwnProfile && (this.initializeBoardsSortManager(MODULE_ID_PUBLIC_BOARDS_GRID), this.initializeBoardsSortManager(MODULE_ID_SECRET_BOARDS_GRID), this.setupMessageHandlers())
    },
    addCreateBoardRep: function(a, b, c) {
        if (!c.items.getChildById(a)) {
            var d = new P.modules.BoardCreateRep({
                id: a,
                options: {
                    secret: b === SECRET_BOARD_TYPE
                }
            });
            d.render().then(function() {
                c.items.appendChild(d)
            })
        }
    },
    initializeBoardsSortManager: function(a) {
        var b = this.getChildById(a), c = {
            cancel: ".BoardCreateRep",
            over: function(a, b) {
                var c = 30, d = $(window).scrollTop(), e = b.offset.top - d, f = b.item.height(), g = e < 0, h = e > P.Viewport.height - f;
                h && (c*=-1), (g || h) && $(window).scrollTop(d - c)
            },
            update: function(b, c) {
                this.onBoardsSortUpdate(b, c, a)
            }.bind(this)
        };
        b.setDragState(b.DRAGGING_DISABLED), b.items.initializeSortManager(c, "Board", function(a) {
            return a.data && a.data.id
        })
    },
    onBoardsSortUpdate: function(a, b, c) {
        var d = this.getChildById(c);
        this.saveBoardOrder(d.items.getSortOrder())
    },
    saveBoardOrder: function(a) {
        var b = "BoardsReorderResource", c = {
            board_ids: a
        }, d = P.resourceFactory.create(b, c), e = "user_boards_reorder";
        d.callUpdate({
            showError: !1
        }).then(function() {
            P.trackGAEvent(e, P.CONST.GA_ACTION_SUCCESS)
        }, function() {
            P.trackGAEvent(e, P.CONST.GA_ACTION_ERROR)
        })
    },
    setupMessageHandlers: function() {
        var a = [this.getChildById(MODULE_ID_PUBLIC_BOARDS_GRID), this.getChildById(MODULE_ID_SECRET_BOARDS_GRID)], b = {};
        b[P.CONST.PUBSUB_TOPIC_CONVERSATION_OPEN] = this.handleConversationOpen.bind(this, a), b[P.CONST.PUBSUB_TOPIC_CONVERSATION_CLOSED] = this.handleConversationClosed.bind(this, a), b[P.CONST.PUBSUB_TOPIC_CONVERSATION_NO_ACTIVE_CONVERSATIONS] = this.handleConversationClosed.bind(this, a), this.pubsubSubscribe(P.CONST.PUBSUB_CHANNEL_MESSAGES, b)
    },
    handleConversationOpen: function(a) {
        _.each(a, function(a) {
            a.setDragState(a.DRAGGING_ENABLED)
        })
    },
    handleConversationClosed: function(a) {
        _.each(a, function(a) {
            a.setDragState(a.DRAGGING_DISABLED)
        })
    }
}), P.modules.UserBoards.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.tutorials.ModalAnalyticsHomeAudienceCardIntro"), goog.require("P.Module"), goog.require("P.modules.tutorials.ModalAnalyticsHomeIntroBase"), P.modules.tutorials.ModalAnalyticsHomeAudienceCardIntro = P.modules.tutorials.ModalAnalyticsHomeIntroBase.extend({
    getStepPosition: function() {
        return "RIGHT_CENTER"
    },
    getHighlightedElement: function() {
        return this.getHighlightedCardModule("audience")
    }
}), P.modules.tutorials.ModalAnalyticsHomeAudienceCardIntro.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.tutorials.ModalAnalyticsHomeDomainCardIntro"), goog.require("P.Module"), goog.require("P.modules.tutorials.ModalAnalyticsHomeIntroBase"), P.modules.tutorials.ModalAnalyticsHomeDomainCardIntro = P.modules.tutorials.ModalAnalyticsHomeIntroBase.extend({
    getStepPosition: function() {
        return "LEFT_CENTER"
    },
    getHighlightedElement: function() {
        return this.getHighlightedCardModule("domain")
    }
}), P.modules.tutorials.ModalAnalyticsHomeDomainCardIntro.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.tutorials.ModalAnswerIntroOne"), goog.require("P.Module"), goog.require("P.modules.tutorials.ModalQAIntroBaseStep"), P.modules.tutorials.ModalAnswerIntroOne = P.modules.tutorials.ModalQAIntroBaseStep.extend({
    getHighlightedElement: function() {
        var a = this._getModuleChildrenByModuleName(P.app, "Question");
        return a && 0 !== a.length ? this._highlightModule(a[0], !0) : null
    }
}), P.modules.tutorials.ModalAnswerIntroOne.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.tutorials.ModalAnswerIntroTwo"), goog.require("P.Module"), goog.require("P.modules.tutorials.ModalQAIntroBaseStep"), P.modules.tutorials.ModalAnswerIntroTwo = P.modules.tutorials.ModalQAIntroBaseStep.extend({
    getHighlightedElement: function() {
        var a = this._getModuleChildrenByModuleName(P.app, "QuestionCreate");
        return a && 0 !== a.length ? this._highlightModule(a[0], !0) : null
    }
}), P.modules.tutorials.ModalAnswerIntroTwo.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.tutorials.ModalPlacePinsSearch"), goog.require("P.Module"), goog.require("P.modules.tutorials.ModalStepBase"), goog.require("P.modules.AddPinToMap"), P.modules.tutorials.ModalPlacePinsSearch = P.modules.tutorials.ModalStepBase.extend({
    onShow: function() {
        this.highlightAddPinToMap()
    },
    highlightAddPinToMap: function() {
        var a = this.getTargetModule();
        if (a) {
            var b = this._highlightModule(a, !0);
            this.setModalPosition("RIGHT_TOP", b, !0);
            var c = this._getModal();
            c && this._setModalVisible(c, !1)
        }
    },
    _setModalVisible: function(a, b) {
        var c = a.getMask();
        c = c.add(a.getModalScroller()), b ? c.css("visibility", "visible") : c.css("visibility", "hidden")
    },
    _getModal: function() {
        var a = P.getModalManager(), b = a.getTopModal();
        return b ? b : null
    },
    getTargetModule: function() {
        var a = this._getModal();
        if (!a)
            return null;
        var b = a.getModule();
        return b ? b : null
    },
    onPreviousButtonClicked: function() {
        P.modules.tutorials.ModalStepBase.prototype.onPreviousButtonClicked.call(this), this.clickCloseButton()
    },
    clickCloseButton: function() {
        var a = this.getTargetModule(), b = a.getChildById("closeButton");
        b.$el.click();
        var c = this._getModal();
        c && this._setModalVisible(c, !0)
    },
    getPlacementId: function() {
        return P.Experiences.Placement.WEB_EMPTY_PLACES_BOARD_TAKEOVER
    },
    getExperienceId: function() {
        return P.Experiences.Experience.WEB_EMPTY_PLACES_BOARD_USER_ED
    }
}), P.modules.tutorials.ModalPlacePinsSearch.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.BoardEditActionBase"), goog.require("P.Module"), goog.require("P.modules.BoardEditBase"), goog.require("P.modules.BoardInvites"), P.modules.BoardEditActionBase = P.modules.BoardEditBase.extend({
    onCreated: function() {
        P.modules.BoardEditBase.prototype.onCreated.call(this), this.childListen(P.CONST.EVENT_CHANGE, this.onChildChange)
    },
    onContentReady: function() {
        if (P.autologin.checkForAutologin()) {
            var a = P._("To edit your board, please take a second to confirm it's really you.");
            return P.autologin.showLoginErrorDialog(this, a), void this.destroy()
        }
        P.modules.BoardEditBase.prototype.onContentReady.call(this);
        var b = {};
        b[P.CONST.PUBSUB_TOPIC_BOARD_BANNED_COLLABORATOR] = this.onBannedUser, b[P.CONST.PUBSUB_TOPIC_BOARD_REMOVED_COLLABORATOR_SELF] = this.onBoardRemovedSelf, this.pubsubSubscribe(this.data.id, b)
    },
    onInviteAdded: function(a, b) {
        var c = this.getChildById(b ? "boardPendingInvites" : "boardInvites");
        P.trackGAEvent("collaborator_invite_user", P.CONST.GA_ACTION_SUCCESS), c.addInvitee({
            type: "pinner",
            identifier: a
        })
    },
    onSubmitValidated: function() {
        if (!this._showSecretBoardStatusChangeConfirmation)
            return void this.saveBoard();
        var a = {
            name: "ConfirmDialog",
            options: {
                template: "make_public"
            }
        };
        P.loadModule(a).then(function(a) {
            this.showInModal(a), this.listen(a, P.CONST.EVENT_CONFIRM, this.saveBoard)
        }.bind(this))
    },
    onChildChange: function(a) {
        if ("secretCheckbox" === a.target.id) {
            var b=!a.target.isChecked();
            this._showSecretBoardStatusChangeConfirmation = b?!0 : !1
        }
    },
    deleteBoard: function() {
        var a = this.getBoardId(), b = this.getFieldValues(), c = b.privacy, d = P.resourceFactory.create("BoardResource", {
            board_id: a
        }), e = function(a) {
            P.showError(a.message), P.trackGAEvent("board_delete", P.CONST.GA_ACTION_ERROR)
        }, f = function(b) {
            if (P.trackGAEvent("board_delete", P.CONST.GA_ACTION_SUCCESS), b) {
                var d = b.resource_response;
                if (d&&!d.error)
                    return void this.handleDelete(a, c)
            }
            e(b)
        }.bind(this);
        this.showLoading(), d.callDelete({
            showError: !1
        }).then(f, e).fin(function() {
            this.hideLoading()
        }.bind(this))
    },
    handleDelete: function() {},
    redirectAfterDelete: function() {
        var a = this.data.owner ? "/" + this.data.owner.username + "/": "/";
        window.location.href !== a && this.navigate(a)
    },
    onBoardRemovedSelf: function() {
        this.destroy()
    },
    onBannedUser: function() {
        var a = this.getChildById("boardInvites");
        a.render();
        var b = this.getChildById("boardPendingInvites");
        b && b.render()
    }
}), P.modules.BoardEditActionBase.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.BoardPicker"), goog.require("P.modules.ui.Picker"), goog.require("P.modules.BoardCreate"), P.modules.BoardPicker = P.modules.ui.Picker.extend({
    onContentReady: function() {
        P.modules.ui.Picker.prototype.onContentReady.call(this), this.model && this.model.on("change", function() {
            this.renderExistingData()
        }.bind(this))
    },
    create: function(a) {
        return this._create(a)
    },
    _create: function(a) {
        var b = P.experiments.instance.inExperimentGroupsActiveOrTriggerable("web_pin_create", ["enabled_v3", "employees_v3"]);
        if (a&&!b) {
            var c = P.resourceFactory.create("BoardResource", {
                name: a
            });
            return c.callCreate().then(function(a) {
                var b = a.resource_response.data, c = b.id;
                return this.triggerEvent(P.CONST.EVENT_BOARD_CREATED, c, !0), P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_CURRENT_USER, P.CONST.PUBSUB_TOPIC_BOARD_CREATED, b), b
            }.bind(this))
        }
        return a ? Promise.resolve({
            name: a
        }) : new Promise(function(b) {
            var c = new P.modules.BoardCreate;
            c.setOptions({
                name: a,
                navigate_on_success: !1
            }), this.listen(c, P.CONST.EVENT_DESTROYED, function() {
                b(null)
            }), this.listen(c, P.CONST.EVENT_BOARD_CREATED, function(a) {
                b(a.data)
            }), this.showInModal(c)
        }.bind(this))
    },
    hasBoards: function() {
        return this.extraData.hasBoards
    }
}), P.modules.BoardPicker.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/BoardPicker/BoardPicker.nunjucks"), goog.provide("P.modules.BoardPickerDropdownButton"), goog.require("P.modules.BoardPicker"), goog.require("P.modules.DropdownButton"), P.modules.BoardPickerDropdownButton = P.modules.DropdownButton.extend({
    onCreated: function() {
        P.modules.DropdownButton.prototype.onCreated.call(this), this._selectedBoard = null, this.childListen(P.CONST.EVENT_CHANGE, this._onChildChange), this.childListen(P.CONST.EVENT_DROPDOWN_HIDE, this._onChildDropdownHide)
    },
    onContentReady: function() {
        this.extraData && (this._selectedBoard = this.extraData.selectedBoard), P.modules.DropdownButton.prototype.onContentReady.call(this), this.extraData.no_boards && P.deferDomManipulation(function() {
            var a = this.$el;
            P.boardPickerUtil.showNoBoardsTooltip(a)
        }.bind(this))
    },
    getContentModuleLoadOptions: function() {
        var a = {
            name: "BoardPicker",
            options: {
                view_type: "compact",
                in_popover: !0
            },
            resource: {
                name: this.resource.name,
                options: this.resource.options
            }
        };
        return this.options.selected_board_id ? a.options.selected_board_id = this.options.selected_board_id : (a.options.selected_section_index = 0, a.options.selected_item_index = 0), a
    },
    getSelectedBoardId: function() {
        return this._selectedBoard ? this._selectedBoard.id : null
    },
    getSelectedBoardPrivacy: function() {
        return this._selectedBoard ? this._selectedBoard.privacy : null
    },
    _onChildChange: function(a) {
        a.stopPropagation(), this._selectedBoard = a.data, this.options.selected_board_id = this._selectedBoard.id;
        var b = this._getLabelModule();
        b.data = this._selectedBoard, b.renderExistingData(), this.hideDropdown(), this.triggerEvent(P.CONST.EVENT_CHANGE, a.data, !0), this.$el.blur()
    },
    _onChildDropdownHide: function() {
        var a = this.getDropdown().getContentModule();
        a.clearName()
    }
}), P.modules.BoardPickerDropdownButton.moduleRenderer = new P.ModuleRendererLocal("app/common/modules/BoardPickerDropdownButton/BoardPickerDropdownButton.nunjucks"), goog.provide("P.modules.BoardCollaboratorInviter"), goog.require("P.Module"), goog.require("P.modules.BoardEditActionBase"), P.modules.BoardCollaboratorInviter = P.modules.BoardEditActionBase.extend({
    onContentReady: function() {
        P.modules.BoardEditActionBase.prototype.onContentReady.call(this);
        var a = this.$(".BoardInviteForm .ui-TypeaheadField .ui-Input"), b = this.$(".BoardInviteForm .inviteButton");
        a.width(a.width() - b.innerWidth())
    }
}), P.modules.BoardCollaboratorInviter.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.BoardEdit"), goog.require("P.Module"), goog.require("P.modules.BoardEditActionBase"), P.modules.BoardEdit = P.modules.BoardEditActionBase.extend({
    handleDelete: function(a, b) {
        this.isInModal() ? (P.pubsub.publish(a, P.CONST.PUBSUB_TOPIC_BOARD_DELETED), P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_CURRENT_USER, P.CONST.PUBSUB_TOPIC_BOARD_DELETED, {
            privacy: b
        }), this.destroy()) : this.redirectAfterDelete()
    },
    onButtonClick: function(a) {
        P.modules.BoardEditBase.prototype.onButtonClick.call(this, a);
        var b = a.target;
        "deleteBoardButton" === b.id && this.onDeleteClick()
    },
    onDeleteClick: function() {
        P.trackGAEvent("board_delete", P.CONST.GA_ACTION_OPEN_MODAL), this.showConfirmation()
    },
    onDeleteConfirm: function() {
        P.trackGAEvent("board_delete", P.CONST.GA_ACTION_CLICK_SUBMIT), this.deleteBoard()
    },
    showConfirmation: function() {
        var a = {
            name: "ConfirmDialog",
            options: {
                template: "delete_board"
            }
        };
        P.loadModule(a).then(function(a) {
            this.showInModal(a), this.listen(a, P.CONST.EVENT_CONFIRM, this.onDeleteConfirm)
        }.bind(this))
    }
}), P.modules.BoardEdit.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.Closeup"), goog.require("P.Module"), goog.require("P.modules.CloseupBottom"), goog.require("P.modules.CloseupContent"), goog.require("P.modules.CloseupSidebar"), goog.require("P.modules.Pin"), goog.require("P.modules.PinActionBar"), goog.require("P.trackingTimer");
var MODULE_ID_ACTION_BAR = "actions", MODULE_ID_CONTENT = "content", MODULE_ID_SIDEBAR = "sidebar", MODULE_ID_BOTTOM = "bottom", SELECTOR_CLOSEUP_ACTION_BAR = ".closeupActionBarContainer", FIXED_IMAGE_WIDTH = 736, ACTIONBAR_HEIGHT = 57, DEFAULT_PADDING = 40, PIN_MARGIN = 14, CLOSEUP_CONTENT_WIDTH = 1e3, CLOSE_BUTTON_VISIBLE_CLASS = "visible";
P.modules.Closeup = P.Module.extend({
    events: {
        click: "_onClick",
        "click button.close": "onCloseButtonClick"
    },
    onVisualSearchObjectSelected: function(a) {
        var b = this.getChildById(MODULE_ID_SIDEBAR);
        if (b) {
            var c = this.resource.options.id, d = a.data;
            b.updateVisuallySimilar({
                pinId: c,
                objId: d
            })
        }
        return !1
    },
    getOwnedScrollables: function() {
        return this.options.can_close ? this.$el : $()
    },
    onCreated: function() {
        this.closeDiv = $('<button class="Button borderless close"><em></em>&nbsp;</button>'), P.trackingTimer.start(this.className, "CreatedToContentReady")
    },
    onKeyup: function(a) {
        var b = P.getModalManager();
        this.options.can_close&&!b.hasModals() && a.keyCode === P.keyCode.ESCAPE && this._close()
    },
    _close: function() {
        this.triggerEvent(P.CONST.EVENT_CLOSE, this, !0)
    },
    _unsticky: function() {
        this._actionBar && this._actionBar.unsticky()
    },
    _updateSticky: function() {
        if (this.parent && this.inDom && this._actionBar) {
            var a = this.$(".PaddedPin"), b = this.getScrollableElement(), c = 0;
            this.options.can_close || (c = $(".headerBackground").height()), this._actionBar.updateSticky({
                $boundTo: a,
                $scrollable: b,
                headerHeight: c
            })
        }
    },
    resetCloseButton: function() {
        this.$close.removeClass(CLOSE_BUTTON_VISIBLE_CLASS)
    },
    setupCropper: function() {
        var a = this;
        P.VersionedFileLoader.instance.loadScript("webapp/js/app/desktop/bundle-jcrop.js", function() {
            return $(".visualLiveSearchOverlayOuterWrapper").show(), $(".visualLiveSearchOverlay").Jcrop({
                keySupport: !1,
                onSelect: function(b) {
                    var c = $(".pinImage"), d = c.width(), e = c.height(), f = parseInt(c.css("margin-left"), 10), g = parseInt(c.css("padding-top"), 10), h = Math.max(b.x - f, 0), i = Math.min(b.x2 - f, d), j = Math.max(b.y - g, 0), k = Math.min(b.y2 - g, e), l = {
                        x: h / d,
                        y: j / e,
                        w: (i - h) / d,
                        h: (k - j) / e
                    }, m = a.getChildById(MODULE_ID_SIDEBAR);
                    if (m) {
                        var n = a.resource.options.id;
                        m.updateLiveVisualSearch({
                            pinId: n,
                            crop: l
                        })
                    }
                }
            }), $(".jcrop-holder").css({
                "background-color": ""
            }), !1
        })
    },
    onAddedToDom: function() {
        if (this.hasError)
            return this.detachElement(), void this.destroy();
        this._positionActionBar(), this.options.can_close && $("body").on("keyup.closeup", function(a) {
            this.onKeyup(a)
        }.bind(this)), this.childListen(P.CONST.EVENT_NAVIGATE, this.onChildNavigate), this.childListen(P.CONST.EVENT_VISUAL_SEARCH_OBJECT_SELECTED, this.onVisualSearchObjectSelected), this.childListen(P.CONST.EVENT_VISUAL_SEARCH_OBJECT_CROP_BUTTON_PRESSED, this.setupCropper), this.childListen(P.CONST.EVENT_OLD_TOAST_RENDER, this._onChildOldToastRender);
        var a = P.scrollbarWidth();
        this.$close || (this.$close = this.$(".close")), this.$close.css("right", a + PIN_MARGIN + "px").addClass(CLOSE_BUTTON_VISIBLE_CLASS)
    },
    _positionActionBar: function() {
        this._actionBar && this.inDom && this.contentReady && this._updateSticky()
    },
    onContentReady: function() {
        this._actionBar = this.getChildById(MODULE_ID_ACTION_BAR), this.options.show_repin ? (this.showRepinModal(), delete this.options.show_repin) : this.options.show_edit && (this.extraData.canEdit && this.showEditModal(), delete this.options.show_edit), this._positionActionBar(), this.extraData && this.extraData.showContextualReg && (P.trackRegisterAction("send_pin_landing"), P.UserRegistration.showSignupModal(this.resource, {
            sent_pin: !0,
            sender: this.options.sender,
            redirect_to_signup: !0
        }));
        var a = this.getChildById(MODULE_ID_CONTENT);
        a && _.defer(a.addTutorials.bind(a)), this._inUnauthPinCloseup() && P.trackRegisterAction("view_pin_closeup");
        var b = P.experiments.instance.inExperimentGroupsActiveOrTriggerable("more_signup_modals", ["enabled"]), c = P.experiments.instance.inExperimentGroupsActiveOrTriggerable("closeup_signup_modal_js", ["enabled_slideshow", "enabled_image", "enabled_closeup", "employees"]);
        this.options.can_close&&!P.currentUser.isAuthenticated() && (b || c || P.UserRegistration.showSignupModal(null, {
            extra_class: "redesign",
            redirect_to_signup: !0,
            can_dismiss: !1,
            prev: window.location.pathname,
            tagline: P._("Sign up to get more details about this Pin and discover more great ideas!")
        }))
    },
    onChildRemoved: function(a) {
        "CloseupContent" === a.className && (this.options.can_close ? this._close() : (this.destroy(), this.navigate("/")))
    },
    _removeTransitionImage: function() {
        this.transitionPinImage && (this.transitionPinImage.remove(), this.transitionPinImage = null)
    },
    onRemovedFromDom: function() {
        this._actionBar && this._actionBar.removeDropdowns(), this._unsticky(), this.options.can_close && $("body").off("keyup.closeup"), this._removeListeners()
    },
    _shouldRenderAsLite: function() {
        var a = P.ExperienceManager.instance().getPlacedExperience(P.Experiences.Placement.WEB_PIN_CLOSEUP);
        return a && (a.experience_id === P.Experiences.Experience.WEB_PIN_CLOSEUP_LITE || a.experience_id === P.Experiences.Experience.WEB_PIN_CLOSEUP_AUTOBAHN || a.display_data && a.display_data.lite)
    },
    render: function() {
        if (!this.options.can_close)
            try {
                return P.Module.prototype.render.apply(this, arguments)
        } catch (a) {
            throw console.error(a), a
        }
        this.$el.empty().addClass("canClose");
        var b = this._shouldRenderAsLite();
        b && this.$el.addClass("lite");
        var c = this._inUnauthPinCloseup(), d = {};
        c && (d = this._getUnauthPinCloseupDisplayData()), this.$el.append(this.closeDiv), this.$el.append('<div class="closeupActionBarContainer" data-component-type="' + P.ContextLogging.ComponentType.MODAL_PIN + '"></div><div class="closeupContainer"></div><div class="closeupBottom"></div>');
        var e=!!this.transitionPinImage;
        e && this.$el.append(this.transitionPinImage);
        var f = P.resourceFactory.clone(this.resource), g = this.resource.options.id, h = P.resourceFactory.clone(this.resource);
        h.options.field_set_key = "detailed";
        var i = new P.modules.CloseupContent({
            id: MODULE_ID_CONTENT,
            resource: h,
            options: {
                highlight_question_id: this.options.question_id,
                highlight_answer_id: this.options.answer_id,
                show_comments: this.options.show_comments,
                show_reply_answer_id: this.options.show_reply_answer_id,
                unauth_pin_closeup: c
            }
        }), j = this.$(SELECTOR_CLOSEUP_ACTION_BAR), k = new P.modules.PinActionBar({
            id: MODULE_ID_ACTION_BAR,
            options: {
                pin_id: g,
                unauth_pin_closeup: c,
                unauth_pin_closeup_display_data: d
            },
            resource: f
        });
        k.errorStrategy = P.CONST.ErrorStrategy.BUBBLE, k.render(), this._actionBar = k, this.insertChild(k, j);
        var l = this.$(".closeupContainer"), m = P.resourceFactory.clone(this.resource);
        m.options.field_set_key = "closeup_sidebar";
        var n = new P.modules.CloseupSidebar({
            id: MODULE_ID_SIDEBAR,
            resource: m
        });
        n.render().then(function() {
            this.insertChild(n, l)
        }.bind(this));
        var o = this.className, p = i.render().then(function() {
            if (this.insertChild(i, l), e) {
                var a = i.getPin(), c = a.getPinMedia(), d = c.attr("src");
                c.load(this._removeTransitionImage.bind(this)), c.error(this._removeTransitionImage.bind(this)), c.attr("src", d), c[0] && c[0].complete && this._removeTransitionImage()
            }
            this.contentReady=!0, this.onContentReady();
            var f = new P.modules.CloseupBottom({
                id: MODULE_ID_BOTTOM,
                options: {
                    pin_id: this.resource.options.id
                }
            });
            if (!b) {
                var g = this.$(".closeupBottom");
                f.render().then(function() {
                    this.insertChild(f, g)
                }.bind(this))
            }
        }.bind(this)).then(function() {
            P.trackingTimer.end(o, "CreatedToContentReady")
        });
        return e ? Promise.resolve(void 0) : p
    },
    handleError: function(a) {
        a.api_error_code === P.CONST.API_ERROR_PIN_NOT_FOUND && (this.hasError=!0), P.Module.prototype.handleError.call(this, a)
    },
    setCloseupBottomMinHeight: function() {
        var a = this.$(".closeupContainer").height(), b = this.getScrollableElement().scrollTop(), c = this.getChildById(MODULE_ID_BOTTOM);
        if (c) {
            var d = P.Viewport.height, e = b + d - a;
            c.setMinHeight(e)
        }
    },
    removeCloseupBottomMinHeight: function() {
        var a = this.getChildById(MODULE_ID_BOTTOM);
        a && a.setMinHeight(null)
    },
    showRepinModal: function() {
        this._actionBar && P.currentUser.isAuthenticated() && this._actionBar.showRepinModal()
    },
    showEditModal: function() {
        var a = this.getChildById(MODULE_ID_CONTENT);
        return a.showEditModal()
    },
    setAsMainModule: function(a, b, c) {
        var d = this.getChildById(MODULE_ID_CONTENT), e = this.getChildById(MODULE_ID_SIDEBAR), f = this.getChildById(MODULE_ID_BOTTOM), g = b.options.id;
        if (!d ||!e ||!f)
            return P.Module.prototype.setAsMainModule.apply(this, arguments);
        if (this._removeTransitionImage(), a.can_close ? 0 === this.closeDiv.parent().length && (this.$el.prepend(this.closeDiv), this.$el.addClass("canClose")) : this.closeDiv.parent().length > 0 && (this.closeDiv.remove(), this.$el.removeClass("canClose")), this.options.can_close = a.can_close, this.hasSameOptions(a, b) && this.contentReady&&!this._forceRefreshRequested(c))
            return Promise.resolve(void 0);
        this.setOptions(a), this.setResource(b), c.evt && c.evt.currentTarget && "Closeup" === c.evt.currentTarget.className || d.empty();
        var h = {
            name: b.name,
            options: _.extend({}, b.options)
        }, i = P.resourceFactory.clone(this.resource), j = new P.modules.PinActionBar({
            id: MODULE_ID_ACTION_BAR,
            options: {
                pin_id: g
            },
            resource: i
        });
        return h.options.field_set_key = "detailed", d.setResource(h), this.setCloseupBottomMinHeight(), j.render(), d.render().then(function() {
            var a = this.$(SELECTOR_CLOSEUP_ACTION_BAR);
            this.insertChild(j, a), this._actionBar && this._actionBar.destroy(), this._actionBar = j, this._positionActionBar(), f.setOptions({
                pin_id: g
            }), f.render().then(function() {
                this.removeCloseupBottomMinHeight()
            }.bind(this)), e.updateDomain(d.data.domain), e.updateRelatedRecipes(d.data.rich_recipe_top_ingredients)
        }.bind(this))
    },
    onChildNavigate: function(a) {
        if (P.NuxUtils.preventNavigationIfNecessary(a), this.log.debug("Closeup got navigate event from child", a.target, "for url:", a.data.url), !P.isOffsiteUrl(a.data.url)) {
            var b = this.getChildById(MODULE_ID_SIDEBAR);
            return b === a.currentTarget && "Pin" === a.target.className && (a.data.handled=!0, "boardPinsGrid" === a.target.options.view_type && b.updateVisuallySimilar(null)), !1
        }
    },
    onCloseButtonClick: function() {
        return this._close(), this.resetCloseButton(), !1
    },
    _onClick: function(a) {
        if (this.options.can_close) {
            var b = a.target;
            (b && (b === this.$el[0] || b === this.$(".closeupContainer")[0]) || b === this.$(".closeupBottom")[0]) && (a.stopPropagation(), this._close())
        }
    },
    performTransition: function(a) {
        var b = a.evt && a.evt.target || null, c = a.evt && a.evt.currentTarget || null;
        return b && "Pin" === b.className && "summary" === b._getViewType() && "Closeup" !== c.className && (this.transitionPinImage = this._getTransitionPinImage(b)), this.render()
    },
    _getTransitionPinImage: function(a) {
        var b = a.getPinMedia();
        if (!b)
            return null;
        var c = b.clone(), d = a.getSourceUrl() || a.getImageUrl(P.CONST.IMAGE_SIZE_ORIG), e = $("<a class='transitionImage' href='" + d + "'></a>").append(c);
        c[0].onload = null;
        var f, g = a.getDetailedImageDimensions(), h = g.height, i = g.width;
        if (i < FIXED_IMAGE_WIDTH) {
            var j = Math.round((FIXED_IMAGE_WIDTH - i) / 2);
            f = j < DEFAULT_PADDING ? j + ACTIONBAR_HEIGHT : DEFAULT_PADDING + ACTIONBAR_HEIGHT
        } else 
            f = ACTIONBAR_HEIGHT;
        var k = 2 * PIN_MARGIN, l = (P.Viewport.width - CLOSEUP_CONTENT_WIDTH + PIN_MARGIN) / 2, m = (FIXED_IMAGE_WIDTH - i) / 2, n = {
            height: h,
            padding: f + "px " + m + "px " + (f - ACTIONBAR_HEIGHT) + "px",
            left: l,
            top: k
        };
        return a.isVideo() && a.data.attribution && (n.padding = ACTIONBAR_HEIGHT + "px 0px 0px"), e.css(n), c.css({
            height: h,
            width: i
        }), e
    },
    getPin: function() {
        return this.getChildById(MODULE_ID_CONTENT).getPin()
    },
    getLoggingObjectIdStr: function() {
        return this.resource.options.id
    },
    _onChildOldToastRender: function(a) {
        var b = a.target;
        this.$el.append(b.getContent())
    },
    getQuestions: function() {
        var a = this.getChildById(MODULE_ID_CONTENT);
        return a ? a.getQuestions() : null
    },
    initScroll: function() {
        this.options.question_id && this.getQuestions() && this.getQuestions().scrollToQuestions()
    },
    _inUnauthPinCloseup: function() {
        var a=!1, b = P.ExperienceManager.instance().getPlacedExperience(P.Experiences.Placement.WEB_PIN_CLOSEUP);
        return b && b.experience_id === P.Experiences.Experience.WEB_UNAUTH_PIN_CLOSEUP && (a=!0), a
    },
    _getUnauthPinCloseupDisplayData: function() {
        var a = {}, b = P.ExperienceManager.instance().getPlacedExperience(P.Experiences.Placement.WEB_PIN_CLOSEUP);
        return b.experience_id === P.Experiences.Experience.WEB_UNAUTH_PIN_CLOSEUP && (a = b.display_data), a
    },
    scrollToRelatedPins: function() {
        P.scrollToTop(this.$el.closest(".mainContainer").length > 0 ? {
            $scroller: $("body"),
            newScrollOffset: this.$el.find(".CloseupRelatedPins").offset().top - $(".headerBackground").height()
        } : {
            $scroller: this.$el,
            newScrollOffset: this.$el.find(".CloseupRelatedPins").position().top + this.$el.scrollTop()
        })
    }
}), P.modules.Closeup.moduleRenderer = new P.ModuleRendererRemote, goog.provide("P.modules.PinCreate3"), goog.require("P.Module"), goog.require("P.modules.BoardPicker"), goog.require("P.modules.BoardCreate");
var PIN_CREATE3_API_RESPONSE_CODE_SPAM_CONTENT = 14, MODULE_MIN_HEIGHT = 550, SPACER = 37;
P.modules.PinCreate3 = P.Module.extend({
    onCreated: function() {
        this.childListen(P.CONST.EVENT_CHANGE, this.onChildChange), this.childListen(P.CONST.EVENT_BOARD_CREATED, this.onBoardCreated), this.childListen(P.CONST.EVENT_BUTTON_CLICK, this.onButtonClick)
    },
    onButtonClick: function(a) {
        var b = a.target;
        if (b.isCancelButton()) {
            a.stopPropagation();
            var c = this.getChildById("boardCreate");
            c && (c.destroy(), this.focus())
        }
    },
    animateEntranceToModal: function() {
        if (this.modal) {
            var a = this.modal.getPositionElement(), b = a.css("marginTop"), c = 0;
            b.length && (c =+ b.split("px")[0]);
            var d = this.$el.height();
            P.deferDomManipulation(function() {
                a.transition({
                    y: d + c + 10
                }, 1, function() {
                    this.modal.setVisible(!0), this.animatePinToModal()
                }.bind(this)).transition({
                    y: 0,
                    opacity: 1,
                    duration: 180
                })
            }.bind(this))
        }
    },
    _animateModalOut: function() {
        if (this.modal) {
            var a = this.modal.getMask();
            a.addClass("animateOut");
            var b = this.$el.height(), c = this.modal.getPositionElement(), d = c.css("marginTop"), e = 0;
            d && (d.length && (e =+ d.split("px")[0]), c.transition({
                y: e + b,
                duration: 180
            }, function() {
                this.modal.destroy()
            }.bind(this)))
        }
    },
    animateExitFromModal: function() {
        this._animateModalOut(), this.animatePinBackToGrid()
    },
    adjustHeight: function() {
        var a = P.getModalManager().getAnimatedElement();
        a || (a = this.getChildById("pin").getContent());
        var b = a.height(), c = b + 2 * SPACER, d = Math.max(c, MODULE_MIN_HEIGHT), e = $(window).height() - 2 * SPACER;
        if (this.$el.height(Math.min(e, d)), d > e) {
            a.addClass("cappedMaxHeight");
            var f = a.find(".pinImageActionButtonWrapper"), g = 0, h = 0, i = a.find(".pinMeta");
            i.length && (g = i.outerHeight());
            var j = a.find(".pinCredits");
            j.length && (h = j.outerHeight());
            var k = e - g - h - 2 * SPACER;
            f.css("maxHeight", k + "px")
        }
        var l = this.getBoardpicker(), m = l.getList(), n = m.getContent(), o = n.offset().top - this.$el.offset().top;
        n.height(d - o)
    },
    animatePinToModal: function() {
        var a = P.getModalManager().getAnimatedElement();
        if (a) {
            var b = a.offset(), c = $(window).width(), d = $(window).height(), e = this.$el.width(), f = this.$el.height(), g = Math.floor((c - e) / 2), h = Math.floor((d - f) / 2), i = g + SPACER, j = h + SPACER;
            j += this.getScrollableElement().scrollTop(), a.transition({
                x: Math.floor(i - b.left),
                y: Math.floor(j - b.top),
                opacity: 1,
                easing: "ease-out",
                duration: 220
            })
        }
    },
    onChildChange: function(a) {
        switch (a.target.id) {
        case"boardPicker":
            var b = a.data, c = b.id, d = b.name;
            (c || d) && (c ? this.createPin(c) : this.showCreateBoard(d))
        }
    },
    showCreateBoard: function(a) {
        var b = {
            board_name: a,
            form_class: "modalPinCreate3",
            class_name: "pinCreate3",
            navigate_on_success: !1,
            show_secret_boards_learn_more: !1,
            show_collaborators_learn_more: !1
        }, c = new P.modules.BoardCreate({
            id: "boardCreate",
            options: b
        });
        c.render().then(function() {
            this.insertChild(c, this.$(".boardsWrapper")), c.focusDescription()
        }.bind(this))
    },
    createBoardAndPin: function(a) {
        this.createBoard(a, {
            success: function(a) {
                this.createPin(a)
            }.bind(this)
        })
    },
    getPinResource: function() {
        var a, b, c = "PinResource", d = {}, e = this.getChildById("pin");
        return e ? (a = e.getContent(), b = e.data) : P.getModalManager().getAnimatedElement() && (a = P.getModalManager().getAnimatedElement(), b = this.data), this.isRepin() && (d.pin_id = b.id, c = "RepinResource"), d.description = b.description, d.link = b.link, d.is_video = b.is_video, d.image_url = b.image_url, a && (d.description = a.find(".pinDescription").text()), P.resourceFactory.create(c, d)
    },
    createPin: function(a) {
        if (!this.requestPending) {
            var b = this.getPinResource();
            b.options.board_id = a, this.requestPending=!0, b.callCreate({
                showError: !1
            }).then(function(a) {
                this.onPinCreateSuccess(a)
            }.bind(this), function(a) {
                if (P.trackGAEvent(this.GACategory, P.CONST.GA_ACTION_ERROR), "create" === this.options.action && a.api_error_code === PIN_CREATE3_API_RESPONSE_CODE_SPAM_CONTENT) {
                    var b = {
                        name: "ConfirmDialog",
                        options: {
                            fluid: !0,
                            template: "blocked_source"
                        }
                    };
                    P.loadModule(b).then(function(a) {
                        a.render().then(function() {
                            this.parent.appendChild(a), this.destroy()
                        }.bind(this))
                    }.bind(this))
                } else 
                    P.showError(a.message)
            }.bind(this)).fin(function() {
                this.requestPending=!1, this.hideLoading()
            }.bind(this))
        }
    },
    onBoardCreated: function(a) {
        var b = a.data, c = b.id;
        this.createPin(c)
    },
    onPinCreateSuccess: function(a) {
        P.trackGAEvent(this.GACategory, P.CONST.GA_ACTION_SUCCESS);
        var b = a.resource_response.data;
        if (P.experiments.instance.inExperimentGroups("web_toasts", ["employees", "enabled"]) && this.modal && this.isRepin()) {
            var c = {
                pin: b
            };
            this._suggestedBoard && (c.suggested_board = this._suggestedBoard), P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_CURRENT_USER, P.CONST.PUBSUB_TOPIC_PIN_CREATED, b), P.pubsub.publish(b.board.id, P.CONST.PUBSUB_TOPIC_PIN_CREATED, b), P.pubsub.publish(P.currentUser.id, P.CONST.PUBSUB_TOPIC_PIN_CREATED), this.isRepin() && P.pubsub.publish(this.data.id, P.CONST.PUBSUB_TOPIC_PIN_REPINNED, b), this._animateModalOut(), this.animatePinToSky();
            var d = new P.modules.RepinSuccessToast({
                data: c
            });
            return void P.getToastsManager().addToast(d)
        }
        this.modal && (this.modal.options.custom_exit_animation=!1, this.animatePinToSky());
        var e = b.board, f = e.url, g = e.category, h = e.id, i = this.options.action, j = e.name, k = e.privacy, l = e.is_collaborative, m = {
            id: "pinSuccess",
            name: "PinCreateSuccess",
            options: {
                action: i,
                board: j,
                board_category: g,
                board_id: h,
                board_url: f,
                domain: b.domain,
                pin_id: b.id,
                is_collaborative: l,
                is_extension_installed: P.browserExtension.instance.isExtensionInstalled(),
                privacy: k,
                method: this.options.method
            },
            resource: P.Resource.NOOP_RESOURCE
        };
        "pin_create_ignition" === this.options.action ? m.options.auto_close=!1 : this._createdBoardToEdit && this._createdBoardToEdit.id === e.id && (m = {
            id: "pinSuccess",
            name: "PinCreateSuccessBoardEdit",
            resource: {
                name: "BoardResource",
                options: {
                    board_id: e.id,
                    field_set_key: "basic"
                }
            },
            options: {
                pinCreateInfo: m
            }
        }), this.showLoading(), P.loadModule(m).then(function(a) {
            this.modal ? this.modal.setModule(a) : "pin_create_ignition" === this.options.action ? this.showInModal(a, {}) : a.render().then(function() {
                this.parent.appendChild(a), this.destroy()
            }.bind(this))
        }.bind(this)), this.triggerEvent(P.CONST.EVENT_PIN_CREATE, b), P.pubsub.publish(P.CONST.PUBSUB_CHANNEL_CURRENT_USER, P.CONST.PUBSUB_TOPIC_PIN_CREATED, b), P.pubsub.publish(b.board.id, P.CONST.PUBSUB_TOPIC_PIN_CREATED, b), P.pubsub.publish(P.currentUser.id, P.CONST.PUBSUB_TOPIC_PIN_CREATED), this.isRepin() && P.pubsub.publish(this.data.id, P.CONST.PUBSUB_TOPIC_PIN_REPINNED, b);
        var n = this.pinForm.getBoardPicker(), o = P.resourceFactory.clone(n.resource);
        P.resourceCache.instance.callGet(o)
    },
    isRepin: function() {
        return !(!this.data ||!this.data.id)
    },
    animatePinToSky: function() {
        var a = P.getModalManager().getAnimatedElement();
        a && a.transition({
            y: - $(window).height(),
            duration: 500
        }, function() {
            P.getModalManager().setAnimatedElement(null), this.destroy()
        }.bind(this))
    },
    animatePinBackToGrid: function() {
        var a = P.getModalManager().getAnimatedElement();
        a && a.transition({
            x: 0,
            y: 0,
            duration: 220,
            easing: "ease-in",
            opacity: .5
        }, function() {
            a.css("zIndex", ""), P.getModalManager().setAnimatedElement(null)
        })
    },
    onContentReady: function() {
        if (this.isRepin() && P.experiments.instance.inExperimentGroupsActiveOrTriggerable("web_toasts", ["employees", "enabled"]) && this.data && this.data.id) {
            var a = P.resourceFactory.create("RelatedBoardForPinRandomFeedResource", {
                pin: this.data.id,
                page_size: 1
            });
            a.callGet({
                showError: !1
            }).then(function(a) {
                a.resource_response.error || (this._suggestedBoard = a.resource_response.data[0])
            }.bind(this))
        }
        this.adjustHeight(), this.focus()
    },
    getBoardpicker: function() {
        return this.getChildById("boardPicker")
    },
    focus: function() {
        this.getBoardpicker().focus()
    }
}), P.modules.PinCreate3.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/PinCreate3/PinCreate3.nunjucks"), goog.provide("P.modules.PinCreateSuccessBoardEdit"), goog.require("P.Module"), goog.require("P.modules.BoardEditActionBase"), P.modules.PinCreateSuccessBoardEdit = P.modules.BoardEditActionBase.extend({
    onContentReady: function() {
        P.modules.BoardEditActionBase.prototype.onContentReady.call(this);
        var a = this.getChildById("doneButton");
        a && this.listen(a, P.CONST.EVENT_BUTTON_CLICK, this.onDone)
    },
    onDone: function() {
        this.showLoading();
        var a = {
            board_id: this.data && this.data.id
        }, b = this.getChildById("placeLayoutCheckbox");
        b && (a.layout = b.isChecked() ? "places" : "default");
        var c = P.resourceFactory.create("BoardResource", a), d = this.options.pinCreateInfo, e = function() {
            d && P.loadModule(d).then(function(a) {
                this.showInModal(a), this.hideLoading(), this.destroy()
            }.bind(this))
        }.bind(this);
        c.callUpdate({
            showError: !1
        }).fin(e)
    }
}), P.modules.PinCreateSuccessBoardEdit.moduleRenderer = new P.ModuleRendererLocal("app/desktop/modules/PinCreateSuccessBoardEdit/PinCreateSuccessBoardEdit.nunjucks");

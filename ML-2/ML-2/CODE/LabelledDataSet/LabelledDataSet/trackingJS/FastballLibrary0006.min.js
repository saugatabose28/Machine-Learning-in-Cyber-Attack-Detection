var fbiLibSLD = {}, fbiLibversion = {};
fbiLibSLD.minorVersion =- 1;
fbiLibSLD.majorVersion =- 1;
fbiLibversion.minor =- 1;
fbiLibversion.major =- 1;
var fbiLibQueue = [], fbiLibQueueBusy = false, fbiLibDomainName, fbiLibResolution;
fbiLibResolution = "cDepth=" + screen.colorDepth;
fbiLibResolution += "&resX=" + screen.width;
fbiLibResolution += "&resY=" + screen.height;
fbiLibResolution += "&fMajorVer=" + fbiLibversion.minor;
fbiLibResolution += "&fMinorVer=" + fbiLibversion.major;
fbiLibResolution += "&slMajorVer=" + fbiLibSLD.majorVersion;
fbiLibResolution += "&slMinorVer=" + fbiLibSLD.minorVersion;
function fbiLibSetCookie(e, f, a, c, b, g) {
    var d = e + "=" + f + (a ? "; expires=" + a.toGMTString() : "") + (c ? "; path=" + c : "") + (b ? "; domain=" + b : "") + (g ? "; secure" : "");
    document.cookie = d
}
function fbiLibGetDomainName() {
    if (fbiLibDomainName != null)
        fbiLibDomainName = fbiLibDomainName;
    else {
        var a = window.location.hostname;
        a = a.replace(/-tv/i, "-com");
        a = a.replace(/\.tv/i, ".com");
        a = a.replace(/-me/i, "-com");
        a = a.replace(/\.me/i, ".com");
        if (a.indexOf(".") < a.lastIndexOf("."))
            fbiLibDomainName = a.substr(a.indexOf(".") + 1);
        else 
            fbiLibDomainName = a
    }
}
function fbiUserInput(a, b) {
    this.key = a;
    this.value = b
}
function fbiEventObject(a, b, c, d) {
    this.inputArray = [];
    if (b == null)
        b = "";
    this.type = b.length > 10 ? b.substr(0, 10) : b;
    this.ciCode = isNaN(parseInt(c, 10)) ? 0 : c;
    this.ciImprList = d;
    this.relX = 0;
    this.relY = 0;
    this.absX = 0;
    this.absY = 0;
    if (!a)
        a = window.event;
    if (a)
        try {
            if (a.type != "load")
                if (a.pageX || a.pageY) {
                    this.absX = a.pageX;
                    this.absY = a.pageY;
                    this.relX = a.clientX;
                    this.relY = a.clientY
                } else if (a.clientX || a.clientY) {
                    this.absX = a.clientX + document.body.scrollLeft;
                    this.absY = a.clientY + document.body.scrollTop;
                    this.relX = a.clientX;
                    this.relY = a.clientY
                }
    } catch (e) {}
    this.toString = function() {
        return this._type
    };
    this.AddUserInput = function(a, b) {
        this.inputArray.push(new fbiUserInput(a, b))
    }
}
function fbiLibSetDomainName(a) {
    fbiLibDomainName = a
}
function fbiLibInsertIntoQueue(a) {
    fbiLibGetDomainName();
    fbiLibQueue.push(window.location.protocol + "//img." + fbiLibDomainName + "/pageevents.aspx?" + a)
}
function fbiRecordFastballEvent(b) {
    var d = location.pathname, a;
    a = "page_name=" + d;
    a = a + "&ci=" + b.ciCode;
    a = a + "&eventtype=" + b.type;
    a = a + "&ciimpressions=" + b.ciImprList;
    if (b.inputArray) {
        a = a + "&usrin=";
        for (var c = 0; c < b.inputArray.length; c++) {
            if (c > 0)
                a = a + "^";
            a = a + b.inputArray[c].key + "," + b.inputArray[c].value
        }
    } else 
        a = a + "&usrin=";
    if (b.relX !== 0)
        a = a + "&relativeX=" + b.relX;
    if (b.relY !== 0)
        a = a + "&relativeY=" + b.relY;
    if (b.absX !== 0)
        a = a + "&absoluteX=" + b.absX;
    if (b.absY !== 0)
        a = a + "&absoluteY=" + b.absY;
    a = a + "&r=" + Math.random();
    a = a + "&comview=0";
    if (document.getElementById("logarea"))
        document.getElementById("logarea").value += a + "\r\n";
    fbiLibInsertIntoQueue(a)
}
function FastballEvent_MouseClick(b, d) {
    var e = "", c = b, a = "";
    if (isIE6 = navigator.userAgent.toLowerCase().indexOf("msie 6")==-1) {
        if (c != null)
            a = b.type;
        fbiRecordFastballEvent(new fbiEventObject(c, a, d, e))
    }
}
function fbiLibDoVoid() {
    return 
}
function fbiLibCheckQueue() {
    if (!fbiLibQueueBusy && fbiLibQueue.length > 0) {
        fbiLibQueueBusy = true;
        var a = fbiLibQueue.shift();
        fbiLoadImage(a);
        fbiLibQueueBusy = false
    }
}
function fbiLoadImage(c, b) {
    var a = new Image(1, 1);
    a.onload = function() {
        if (b != null && b != undefined)
            b(a);
        else 
            fbiLibDoVoid()
    };
    a.src = c;
    a = null
}
fbiLibGetDomainName();
fbiLibSetCookie("fbiTrafficSettings", fbiLibResolution, "", "/", fbiLibDomainName);
var fbiLibQueueWatch = setInterval(fbiLibCheckQueue, 20);
function fbiRecordFastballOfferClick(c, a) {
    var b = null;
    if (a != null && a != undefined)
        if (typeof a == "function")
            b = a;
        else 
            b = function() {
                window.location = redirectUrl
            };
    fbiRecordFastballOfferEvent("c", c, b)
}
function fbiRecordFastballOfferImpression(a) {
    fbiRecordFastballOfferEvent("i", a, null)
}
function fbiRecordFastballOfferEvent(e, d, c) {
    var b = "https://img." + fbiLibDomainName + "/", a = b + "offerevent.aspx?offevt=" + e + "&appid=" + _fastballOffers.AppID + "&offid=" + d + "&shopper=" + _fastballOffers.ShopperID + "&visit=" + fbiReadCookie("pathway") + "&seq=" + fbiReadCookie("pagecount") + "&rep=1&imptype=1";
    fbiLoadImage(a, c)
}
var fbiReadCookie = function(e) {
    for (var c = e + "=", d = document.cookie.split(";"), b = 0; b < d.length; b++) {
        var a = d[b];
        while (a.charAt(0) == " ")
            a = a.substring(1, a.length);
        if (a.indexOf(c) == 0)
            return a.substring(c.length, a.length)
    }
    return null
};

function Swipe(a, b) {
    "use strict";
    function n() {
        h = g.children, k = h.length, h.length < 2 && (b.continuous=!1), f.transitions && b.continuous && h.length < 3 && (g.appendChild(h[0].cloneNode(!0)), g.appendChild(g.children[1].cloneNode(!0)), h = g.children), i = new Array(h.length), j = a.getBoundingClientRect().width || a.offsetWidth, g.style.width = h.length * j + "px";
        for (var c = h.length; c--;) {
            var d = h[c];
            d.style.width = j + "px", d.setAttribute("data-index", c), f.transitions && (d.style.left = c*-j + "px", w(c, l > c?-j : c > l ? j : 0, 0))
        }
        b.continuous && f.transitions && (w(u(l - 1), - j, 0), w(u(l + 1), j, 0)), f.transitions || (g.style.left = l*-j + "px"), a.style.visibility = "visible"
    }
    function q() {
        clearInterval(p), o = 0, p = setInterval(function() {
            o += 1
        }, 100)
    }
    function r() {
        o = 0
    }
    function s() {
        (b.continuous || l) && (v(l - 1), r())
    }
    function t() {
        (b.continuous || l < h.length - 1) && (v(l + 1), r())
    }
    function u(a) {
        return (h.length + a%h.length)%h.length
    }
    function v(a, c) {
        if (l != a) {
            if (f.transitions) {
                var e = Math.abs(l - a) / (l - a);
                if (b.continuous) {
                    var g = e;
                    e =- i[u(a)] / j, e !== g && (a =- e * h.length + a)
                }
                for (var k = Math.abs(l - a) - 1; k--;)
                    w(u((a > l ? a : l) - k - 1), j * e, 0);
                a = u(a), w(l, j * e, c || m), w(a, 0, c || m), b.continuous && w(u(a - e), - (j * e), 0)
            } else 
                a = u(a), y(l*-j, a*-j, c || m);
            l = a, d(b.callback && b.callback(l, h[l]))
        }
    }
    function w(a, b, c) {
        e && (e=!1, setTimeout(function() {
            e=!0
        }, c)), x(a, b, c), i[a] = b
    }
    function x(a, b, c) {
        var d = h[a], e = d && d.style;
        e && (e.webkitTransitionDuration = e.MozTransitionDuration = e.msTransitionDuration = e.OTransitionDuration = e.transitionDuration = c + "ms", e.webkitTransform = "translate(" + b + "px,0)" + "translateZ(0)", e.msTransform = e.MozTransform = e.OTransform = "translateX(" + b + "px)")
    }
    function y(a, c, d) {
        if (!d)
            return g.style.left = c + "px", void 0;
        var e =+ new Date, f = setInterval(function() {
            var i =+ new Date - e;
            return i > d ? (g.style.left = c + "px", z && C(), b.transitionEnd && b.transitionEnd.call(event, l, h[l]), clearInterval(f), void 0) : (g.style.left = (c - a) * (Math.floor(100 * (i / d)) / 100) + a + "px", void 0)
        }, 4)
    }
    function C() {
        B = setTimeout(t, z)
    }
    function D() {
        z = 0, clearTimeout(B)
    }
    var c = function() {}, d = function(a) {
        setTimeout(a || c, 0)
    }, e=!0, f = {
        addEventListener: !!window.addEventListener,
        touch: "ontouchstart"in window || window.DocumentTouch && document instanceof DocumentTouch,
        transitions: function(a) {
            var b = ["transitionProperty", "WebkitTransition", "MozTransition", "OTransition", "msTransition"];
            for (var c in b)
                if (void 0 !== a.style[b[c]])
                    return !0;
            return !1
        }(document.createElement("swipe"))
    };
    if (a) {
        var h, i, j, k, g = a.children[0];
        b = b || {};
        var l = parseInt(b.startSlide, 10) || 0, m = b.speed || 300;
        b.continuous = void 0 !== b.continuous ? b.continuous : !0;
        var p, o = 0;
        q();
        var B, G, z = b.auto || 0, E = {}, F = {}, H = {
            handleEvent: function(a) {
                switch (a.type) {
                case"touchstart":
                    this.start(a);
                    break;
                case"touchmove":
                    this.move(a);
                    break;
                case"touchend":
                    d(this.end(a));
                    break;
                case"webkitTransitionEnd":
                case"msTransitionEnd":
                case"oTransitionEnd":
                case"otransitionend":
                case"transitionend":
                    d(this.transitionEnd(a));
                    break;
                case"resize":
                    d(n.call())
                }
                b.stopPropagation && a.stopPropagation()
            },
            start: function(a) {
                var b = a.touches[0];
                E = {
                    x: b.pageX,
                    y: b.pageY,
                    time: + new Date
                }, G = void 0, F = {}, g.addEventListener("touchmove", this, !1), g.addEventListener("touchend", this, !1)
            },
            move: function(a) {
                if (!(a.touches.length > 1 || a.scale && 1 !== a.scale)) {
                    b.disableScroll && a.preventDefault();
                    var c = a.touches[0];
                    F = {
                        x: c.pageX - E.x,
                        y: c.pageY - E.y
                    }, "undefined" == typeof G && (G=!!(G || Math.abs(F.x) < Math.abs(F.y))), G || (a.preventDefault(), D(), b.continuous ? (x(u(l - 1), F.x + i[u(l - 1)], 0), x(l, F.x + i[l], 0), x(u(l + 1), F.x + i[u(l + 1)], 0)) : (F.x = F.x / (!l && F.x > 0 || l == h.length - 1 && F.x < 0 ? Math.abs(F.x) / j + 1 : 1), x(l - 1, F.x + i[l - 1], 0), x(l, F.x + i[l], 0), x(l + 1, F.x + i[l + 1], 0)))
                }
            },
            end: function() {
                var c =+ new Date - E.time, d = Number(c) < 250 && Math.abs(F.x) > 20 || Math.abs(F.x) > j / 2, e=!l && F.x > 0 || l == h.length - 1 && F.x < 0;
                b.continuous && (e=!1);
                var f = F.x < 0;
                G || (d&&!e ? (f ? (b.continuous ? (w(u(l - 1), - j, 0), w(u(l + 2), j, 0)) : w(l - 1, - j, 0), w(l, i[l] - j, m), w(u(l + 1), i[u(l + 1)] - j, m), l = u(l + 1)) : (b.continuous ? (w(u(l + 1), j, 0), w(u(l - 2), - j, 0)) : w(l + 1, j, 0), w(l, i[l] + j, m), w(u(l - 1), i[u(l - 1)] + j, m), l = u(l - 1)), b.callback && b.callback(l, h[l])) : b.continuous ? (w(u(l - 1), - j, m), w(l, 0, m), w(u(l + 1), j, m)) : (w(l - 1, - j, m), w(l, 0, m), w(l + 1, j, m))), g.removeEventListener("touchmove", H, !1), g.removeEventListener("touchend", H, !1)
            },
            transitionEnd: function(a) {
                parseInt(a.target.getAttribute("data-index"), 10) == l && (z && C(), b.transitionEnd && b.transitionEnd.call(a, l, h[l]))
            }
        };
        return n(), z && C(), f.addEventListener ? (f.touch && g.addEventListener("touchstart", H, !1), f.transitions && (g.addEventListener("webkitTransitionEnd", H, !1), g.addEventListener("msTransitionEnd", H, !1), g.addEventListener("oTransitionEnd", H, !1), g.addEventListener("otransitionend", H, !1), g.addEventListener("transitionend", H, !1)), window.addEventListener("resize", H, !1)) : window.onresize = function() {
            n()
        }, {
            setup: function() {
                n()
            },
            slide: function(a, b) {
                D(), v(a, b)
            },
            prev: function() {
                D(), s()
            },
            next: function() {
                D(), t()
            },
            pause: function() {
                function a() {
                    clearTimeout(B), B = 0
                }
                e ? a() : setTimeout(function() {
                    a()
                }, m)
            },
            unpause: function() {
                z > 0 && 0 == B && (C(), q())
            },
            getPos: function() {
                return l
            },
            getNumSlides: function() {
                return k
            },
            kill: function() {
                D(), g.style.width = "auto", g.style.left = 0;
                for (var a = h.length; a--;) {
                    var b = h[a];
                    b.style.width = "100%", b.style.left = 0, f.transitions && x(a, 0, 0)
                }
                f.addEventListener ? (g.removeEventListener("touchstart", H, !1), g.removeEventListener("webkitTransitionEnd", H, !1), g.removeEventListener("msTransitionEnd", H, !1), g.removeEventListener("oTransitionEnd", H, !1), g.removeEventListener("otransitionend", H, !1), g.removeEventListener("transitionend", H, !1), window.removeEventListener("resize", H, !1)) : window.onresize = null
            }
        }
    }
}(window.jQuery || window.Zepto) && function(a) {
    a.fn.Swipe = function(b) {
        return this.each(function() {
            a(this).data("Swipe", new Swipe(a(this)[0], b))
        })
    }
}(window.jQuery || window.Zepto);
